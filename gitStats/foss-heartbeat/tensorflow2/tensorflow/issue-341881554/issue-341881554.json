{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20878", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20878/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20878/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20878/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20878", "id": 341881554, "node_id": "MDU6SXNzdWUzNDE4ODE1NTQ=", "number": 20878, "title": "Issue with converting Keras .h5 files to .tflite files", "user": {"login": "bennyooo", "id": 17111728, "node_id": "MDQ6VXNlcjE3MTExNzI4", "avatar_url": "https://avatars3.githubusercontent.com/u/17111728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bennyooo", "html_url": "https://github.com/bennyooo", "followers_url": "https://api.github.com/users/bennyooo/followers", "following_url": "https://api.github.com/users/bennyooo/following{/other_user}", "gists_url": "https://api.github.com/users/bennyooo/gists{/gist_id}", "starred_url": "https://api.github.com/users/bennyooo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bennyooo/subscriptions", "organizations_url": "https://api.github.com/users/bennyooo/orgs", "repos_url": "https://api.github.com/users/bennyooo/repos", "events_url": "https://api.github.com/users/bennyooo/events{/privacy}", "received_events_url": "https://api.github.com/users/bennyooo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 29, "created_at": "2018-07-17T11:37:47Z", "updated_at": "2018-10-17T01:35:24Z", "closed_at": "2018-08-30T18:16:25Z", "author_association": "NONE", "body_html": "<p>There seems to be an issue with the above mentioned conversion.<br>\nAccording to this documentation (<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#keras\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#keras</a>) it should be possible to convert a Keras model into a .tflite file. However, when I try to convert the file, the following output is given:</p>\n<blockquote>\n<p>tflite_convert: error: one of the arguments --graph_def_file --saved_model_dir is required.</p>\n</blockquote>\n<p>I made sure that the .h5 contains both the model and the weights. Other conversions like .pb files have worked with this file as well. Also in the help section of the commad there is no reference to --keras_model_file.</p>\n<p><strong>Update</strong><br>\nI was using the wrong TF version so I got the error message above. However, using the nightly build results in other error messages:</p>\n<blockquote>\n<p>ValueError: Unknown activation function:relu6</p>\n</blockquote>\n<p>This error normally occurs when using load_model but there is the possibility to specify custom_objects (like relu6) to avoid it.</p>\n<p>How can this be done with tflite_convert?</p>", "body_text": "There seems to be an issue with the above mentioned conversion.\nAccording to this documentation (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#keras) it should be possible to convert a Keras model into a .tflite file. However, when I try to convert the file, the following output is given:\n\ntflite_convert: error: one of the arguments --graph_def_file --saved_model_dir is required.\n\nI made sure that the .h5 contains both the model and the weights. Other conversions like .pb files have worked with this file as well. Also in the help section of the commad there is no reference to --keras_model_file.\nUpdate\nI was using the wrong TF version so I got the error message above. However, using the nightly build results in other error messages:\n\nValueError: Unknown activation function:relu6\n\nThis error normally occurs when using load_model but there is the possibility to specify custom_objects (like relu6) to avoid it.\nHow can this be done with tflite_convert?", "body": "There seems to be an issue with the above mentioned conversion.\r\nAccording to this documentation (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#keras) it should be possible to convert a Keras model into a .tflite file. However, when I try to convert the file, the following output is given: \r\n\r\n> tflite_convert: error: one of the arguments --graph_def_file --saved_model_dir is required.\r\n\r\nI made sure that the .h5 contains both the model and the weights. Other conversions like .pb files have worked with this file as well. Also in the help section of the commad there is no reference to --keras_model_file.  \r\n\r\n**Update**\r\nI was using the wrong TF version so I got the error message above. However, using the nightly build results in other error messages: \r\n\r\n> ValueError: Unknown activation function:relu6\r\n\r\nThis error normally occurs when using load_model but there is the possibility to specify custom_objects (like relu6) to avoid it.\r\n\r\nHow can this be done with tflite_convert?"}
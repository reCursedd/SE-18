{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/322520257", "html_url": "https://github.com/tensorflow/tensorflow/issues/2540#issuecomment-322520257", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2540", "id": 322520257, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjUyMDI1Nw==", "user": {"login": "akosiorek", "id": 5015641, "node_id": "MDQ6VXNlcjUwMTU2NDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5015641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akosiorek", "html_url": "https://github.com/akosiorek", "followers_url": "https://api.github.com/users/akosiorek/followers", "following_url": "https://api.github.com/users/akosiorek/following{/other_user}", "gists_url": "https://api.github.com/users/akosiorek/gists{/gist_id}", "starred_url": "https://api.github.com/users/akosiorek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akosiorek/subscriptions", "organizations_url": "https://api.github.com/users/akosiorek/orgs", "repos_url": "https://api.github.com/users/akosiorek/repos", "events_url": "https://api.github.com/users/akosiorek/events{/privacy}", "received_events_url": "https://api.github.com/users/akosiorek/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-15T16:39:49Z", "updated_at": "2017-08-15T16:39:49Z", "author_association": "NONE", "body_html": "<p>I also had this problem and I needed to use a workaround. Instead of writing <code>log = tf.where(non_zero, tf.log(logarg), tf.zeros_like(logarg))</code> I needed to select values with <code>tf.boolean_mask</code> and then scatter them back into the original shape by doing:</p>\n<pre><code>logarg = tf.boolean_mask(logarg, non_zero)\nlog = tf.log(logarg)\nidx = tf.to_int32(tf.where(non_zero))\nlog = tf.scatter_nd(idx, log, tf.shape(non_zero))\n</code></pre>", "body_text": "I also had this problem and I needed to use a workaround. Instead of writing log = tf.where(non_zero, tf.log(logarg), tf.zeros_like(logarg)) I needed to select values with tf.boolean_mask and then scatter them back into the original shape by doing:\nlogarg = tf.boolean_mask(logarg, non_zero)\nlog = tf.log(logarg)\nidx = tf.to_int32(tf.where(non_zero))\nlog = tf.scatter_nd(idx, log, tf.shape(non_zero))", "body": "I also had this problem and I needed to use a workaround. Instead of writing `log = tf.where(non_zero, tf.log(logarg), tf.zeros_like(logarg))` I needed to select values with `tf.boolean_mask` and then scatter them back into the original shape by doing:\r\n```\r\nlogarg = tf.boolean_mask(logarg, non_zero)\r\nlog = tf.log(logarg)\r\nidx = tf.to_int32(tf.where(non_zero))\r\nlog = tf.scatter_nd(idx, log, tf.shape(non_zero))\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9343", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9343/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9343/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9343/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9343", "id": 223161318, "node_id": "MDU6SXNzdWUyMjMxNjEzMTg=", "number": 9343, "title": "Android Demo app & Yolo 2 - OutOfMemoryError ", "user": {"login": "anonym24", "id": 8851301, "node_id": "MDQ6VXNlcjg4NTEzMDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8851301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anonym24", "html_url": "https://github.com/anonym24", "followers_url": "https://api.github.com/users/anonym24/followers", "following_url": "https://api.github.com/users/anonym24/following{/other_user}", "gists_url": "https://api.github.com/users/anonym24/gists{/gist_id}", "starred_url": "https://api.github.com/users/anonym24/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anonym24/subscriptions", "organizations_url": "https://api.github.com/users/anonym24/orgs", "repos_url": "https://api.github.com/users/anonym24/repos", "events_url": "https://api.github.com/users/anonym24/events{/privacy}", "received_events_url": "https://api.github.com/users/anonym24/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-04-20T18:42:20Z", "updated_at": "2017-04-23T13:03:36Z", "closed_at": "2017-04-20T19:51:32Z", "author_association": "NONE", "body_html": "<p>I have successfully run Android Demo with Tiny Yolo (<em>graph-tiny-yolo-voc.pb</em> - 60mb),:</p>\n<pre><code>  private static final String YOLO_MODEL_FILE = \"file:///android_asset/graph-yolo-voc.pb\";\n  private static final int YOLO_INPUT_SIZE = 416;\n  private static final String YOLO_INPUT_NAME = \"input\";\n  private static final String YOLO_OUTPUT_NAMES = \"output\";\n  private static final int YOLO_BLOCK_SIZE = 32;\n  private static final boolean USE_YOLO = true;\n</code></pre>\n<p>I also decided to try Yolo 2 (<em>graph-yolo-voc.pb</em> - 193mb),<br>\nbut I get <em>OutOfMemoryError</em> when I run <em>TF Detect</em><br>\nMy phone has 3 GB of RAM<br>\nBut I know that is just android java limit and has nothing to do with current available/free memory<br>\nand we can use NDK to bypass this limit.</p>\n<p>I also tried to run with:</p>\n<pre><code>     &lt;activity android:name=\"org.tensorflow.demo.DetectorActivity\"\n                  android:largeHeap=\"true\"\n</code></pre>\n<p>but didn't help</p>\n<p>And also:</p>\n<pre><code>&lt;activity android:name=\"org.tensorflow.demo.DetectorActivity\"\n                  android:largeHeap=\"true\"\n                  android:hardwareAccelerated=\"false\"\n</code></pre>\n<p>App runs ok, but nothing happens, it just shows black screen, no camera frames..</p>\n<p>Is there a way to run app with big .pb files?<br>\n<em>TensorFlowInferenceInterface</em> needs <em>AssetManager</em> and <em>string file name</em>, then I guess it just uses default java IO to read file,<br>\nmb it's better to process all of this with NDK somehow?</p>", "body_text": "I have successfully run Android Demo with Tiny Yolo (graph-tiny-yolo-voc.pb - 60mb),:\n  private static final String YOLO_MODEL_FILE = \"file:///android_asset/graph-yolo-voc.pb\";\n  private static final int YOLO_INPUT_SIZE = 416;\n  private static final String YOLO_INPUT_NAME = \"input\";\n  private static final String YOLO_OUTPUT_NAMES = \"output\";\n  private static final int YOLO_BLOCK_SIZE = 32;\n  private static final boolean USE_YOLO = true;\n\nI also decided to try Yolo 2 (graph-yolo-voc.pb - 193mb),\nbut I get OutOfMemoryError when I run TF Detect\nMy phone has 3 GB of RAM\nBut I know that is just android java limit and has nothing to do with current available/free memory\nand we can use NDK to bypass this limit.\nI also tried to run with:\n     <activity android:name=\"org.tensorflow.demo.DetectorActivity\"\n                  android:largeHeap=\"true\"\n\nbut didn't help\nAnd also:\n<activity android:name=\"org.tensorflow.demo.DetectorActivity\"\n                  android:largeHeap=\"true\"\n                  android:hardwareAccelerated=\"false\"\n\nApp runs ok, but nothing happens, it just shows black screen, no camera frames..\nIs there a way to run app with big .pb files?\nTensorFlowInferenceInterface needs AssetManager and string file name, then I guess it just uses default java IO to read file,\nmb it's better to process all of this with NDK somehow?", "body": "I have successfully run Android Demo with Tiny Yolo (_graph-tiny-yolo-voc.pb_ - 60mb),:\r\n\r\n```\r\n  private static final String YOLO_MODEL_FILE = \"file:///android_asset/graph-yolo-voc.pb\";\r\n  private static final int YOLO_INPUT_SIZE = 416;\r\n  private static final String YOLO_INPUT_NAME = \"input\";\r\n  private static final String YOLO_OUTPUT_NAMES = \"output\";\r\n  private static final int YOLO_BLOCK_SIZE = 32;\r\n  private static final boolean USE_YOLO = true;\r\n```\r\n\r\nI also decided to try Yolo 2 (_graph-yolo-voc.pb_ - 193mb),\r\nbut I get _OutOfMemoryError_ when I run _TF Detect_\r\nMy phone has 3 GB of RAM \r\nBut I know that is just android java limit and has nothing to do with current available/free memory\r\nand we can use NDK to bypass this limit.\r\n\r\nI also tried to run with:\r\n```\r\n     <activity android:name=\"org.tensorflow.demo.DetectorActivity\"\r\n                  android:largeHeap=\"true\"\r\n```\r\nbut didn't help\r\n\r\nAnd also:\r\n```\r\n<activity android:name=\"org.tensorflow.demo.DetectorActivity\"\r\n                  android:largeHeap=\"true\"\r\n                  android:hardwareAccelerated=\"false\"\r\n```\r\nApp runs ok, but nothing happens, it just shows black screen, no camera frames..\r\n\r\nIs there a way to run app with big .pb files?  \r\n_TensorFlowInferenceInterface_ needs _AssetManager_ and _string file name_, then I guess it just uses default java IO to read file,\r\nmb it's better to process all of this with NDK somehow?"}
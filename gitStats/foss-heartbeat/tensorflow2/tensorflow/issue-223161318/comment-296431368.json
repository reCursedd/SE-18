{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/296431368", "html_url": "https://github.com/tensorflow/tensorflow/issues/9343#issuecomment-296431368", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9343", "id": 296431368, "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjQzMTM2OA==", "user": {"login": "anonym24", "id": 8851301, "node_id": "MDQ6VXNlcjg4NTEzMDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8851301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anonym24", "html_url": "https://github.com/anonym24", "followers_url": "https://api.github.com/users/anonym24/followers", "following_url": "https://api.github.com/users/anonym24/following{/other_user}", "gists_url": "https://api.github.com/users/anonym24/gists{/gist_id}", "starred_url": "https://api.github.com/users/anonym24/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anonym24/subscriptions", "organizations_url": "https://api.github.com/users/anonym24/orgs", "repos_url": "https://api.github.com/users/anonym24/repos", "events_url": "https://api.github.com/users/anonym24/events{/privacy}", "received_events_url": "https://api.github.com/users/anonym24/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-23T09:40:08Z", "updated_at": "2017-04-23T09:40:08Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3376817\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/andrewharp\">@andrewharp</a></p>\n<blockquote>\n<p>quantize the graph</p>\n</blockquote>\n<p>I have built: <code>bazel build tensorflow/tools/graph_transforms:transform_graph</code><br>\nNow I'm trying the second line, but I'm not sure what happens, looks like it asks for different parameters:</p>\n<pre><code>osboxes@osboxes:~/Desktop/tensorflow-master$ bazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\n&gt; --in_graph=graph-yolo-voc.pb \\\n&gt; --out_graph=graph-yolo-voc-opt.pb \\\n&gt; --inputs='Mul' \\\n&gt; --outputs='softmax' \\\n&gt; --transforms='\n&gt;   add_default_attributes\n&gt;   strip_unused_nodes(type=float, shape=\"1,299,299,3\")\n&gt;   remove_nodes(op=Identity, op=CheckNumerics)\n&gt;   fold_constants(ignore_errors=true)\n&gt;   fold_batch_norms\n&gt;   fold_old_batch_norms\n&gt;   quantize_weights\n&gt;   quantize_nodes\n&gt;   strip_unused_nodes\n&gt;   sort_by_execution_order'\n2017-04-23 10:35:57.903947: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying add_default_attributes\n2017-04-23 10:35:58.162621: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying strip_unused_nodes\n2017-04-23 10:35:58.162877: E tensorflow/tools/graph_transforms/transform_graph.cc:203] Input node softmax not found in graph\n2017-04-23 10:35:58.162919: E tensorflow/tools/graph_transforms/transform_graph.cc:204] usage: bazel-bin/tensorflow/tools/graph_transforms/transform_graph\nFlags:\n\t--in_graph=\"\"                    \tstring\tinput graph file name\n\t--out_graph=\"\"                   \tstring\toutput graph file name\n\t--inputs=\"\"                      \tstring\tinputs\n\t--outputs=\"\"                     \tstring\toutputs\n\t--transforms=\"\"                  \tstring\tlist of transforms\n\t--output_as_text=false           \tbool\twhether to write the graph in text protobuf format\n\nTransforms are:\nadd_default_attributes\nbackport_concatv2\nbackport_tensor_array_v3\nfold_batch_norms\nfold_constants\nfold_old_batch_norms\nfreeze_requantization_ranges\nfuse_pad_and_conv\nfuse_resize_and_conv\nfuse_resize_pad_and_conv\ninsert_logging\nmerge_duplicate_nodes\nobfuscate_names\nquantize_nodes\nquantize_weights\nremove_attribute\nremove_device\nremove_nodes\nrename_attribute\nrename_op\nrewrite_quantized_stripped_model_for_hexagon\nround_weights\nset_device\nsort_by_execution_order\nsparsify_gather\nstrip_unused_nodes\n\nosboxes@osboxes:~/Desktop/tensorflow-master$ \n\n</code></pre>", "body_text": "@andrewharp\n\nquantize the graph\n\nI have built: bazel build tensorflow/tools/graph_transforms:transform_graph\nNow I'm trying the second line, but I'm not sure what happens, looks like it asks for different parameters:\nosboxes@osboxes:~/Desktop/tensorflow-master$ bazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\n> --in_graph=graph-yolo-voc.pb \\\n> --out_graph=graph-yolo-voc-opt.pb \\\n> --inputs='Mul' \\\n> --outputs='softmax' \\\n> --transforms='\n>   add_default_attributes\n>   strip_unused_nodes(type=float, shape=\"1,299,299,3\")\n>   remove_nodes(op=Identity, op=CheckNumerics)\n>   fold_constants(ignore_errors=true)\n>   fold_batch_norms\n>   fold_old_batch_norms\n>   quantize_weights\n>   quantize_nodes\n>   strip_unused_nodes\n>   sort_by_execution_order'\n2017-04-23 10:35:57.903947: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying add_default_attributes\n2017-04-23 10:35:58.162621: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying strip_unused_nodes\n2017-04-23 10:35:58.162877: E tensorflow/tools/graph_transforms/transform_graph.cc:203] Input node softmax not found in graph\n2017-04-23 10:35:58.162919: E tensorflow/tools/graph_transforms/transform_graph.cc:204] usage: bazel-bin/tensorflow/tools/graph_transforms/transform_graph\nFlags:\n\t--in_graph=\"\"                    \tstring\tinput graph file name\n\t--out_graph=\"\"                   \tstring\toutput graph file name\n\t--inputs=\"\"                      \tstring\tinputs\n\t--outputs=\"\"                     \tstring\toutputs\n\t--transforms=\"\"                  \tstring\tlist of transforms\n\t--output_as_text=false           \tbool\twhether to write the graph in text protobuf format\n\nTransforms are:\nadd_default_attributes\nbackport_concatv2\nbackport_tensor_array_v3\nfold_batch_norms\nfold_constants\nfold_old_batch_norms\nfreeze_requantization_ranges\nfuse_pad_and_conv\nfuse_resize_and_conv\nfuse_resize_pad_and_conv\ninsert_logging\nmerge_duplicate_nodes\nobfuscate_names\nquantize_nodes\nquantize_weights\nremove_attribute\nremove_device\nremove_nodes\nrename_attribute\nrename_op\nrewrite_quantized_stripped_model_for_hexagon\nround_weights\nset_device\nsort_by_execution_order\nsparsify_gather\nstrip_unused_nodes\n\nosboxes@osboxes:~/Desktop/tensorflow-master$", "body": "@andrewharp  \r\n\r\n> quantize the graph\r\n\r\nI have built: `bazel build tensorflow/tools/graph_transforms:transform_graph`\r\nNow I'm trying the second line, but I'm not sure what happens, looks like it asks for different parameters:\r\n\r\n```\r\nosboxes@osboxes:~/Desktop/tensorflow-master$ bazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\r\n> --in_graph=graph-yolo-voc.pb \\\r\n> --out_graph=graph-yolo-voc-opt.pb \\\r\n> --inputs='Mul' \\\r\n> --outputs='softmax' \\\r\n> --transforms='\r\n>   add_default_attributes\r\n>   strip_unused_nodes(type=float, shape=\"1,299,299,3\")\r\n>   remove_nodes(op=Identity, op=CheckNumerics)\r\n>   fold_constants(ignore_errors=true)\r\n>   fold_batch_norms\r\n>   fold_old_batch_norms\r\n>   quantize_weights\r\n>   quantize_nodes\r\n>   strip_unused_nodes\r\n>   sort_by_execution_order'\r\n2017-04-23 10:35:57.903947: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying add_default_attributes\r\n2017-04-23 10:35:58.162621: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying strip_unused_nodes\r\n2017-04-23 10:35:58.162877: E tensorflow/tools/graph_transforms/transform_graph.cc:203] Input node softmax not found in graph\r\n2017-04-23 10:35:58.162919: E tensorflow/tools/graph_transforms/transform_graph.cc:204] usage: bazel-bin/tensorflow/tools/graph_transforms/transform_graph\r\nFlags:\r\n\t--in_graph=\"\"                    \tstring\tinput graph file name\r\n\t--out_graph=\"\"                   \tstring\toutput graph file name\r\n\t--inputs=\"\"                      \tstring\tinputs\r\n\t--outputs=\"\"                     \tstring\toutputs\r\n\t--transforms=\"\"                  \tstring\tlist of transforms\r\n\t--output_as_text=false           \tbool\twhether to write the graph in text protobuf format\r\n\r\nTransforms are:\r\nadd_default_attributes\r\nbackport_concatv2\r\nbackport_tensor_array_v3\r\nfold_batch_norms\r\nfold_constants\r\nfold_old_batch_norms\r\nfreeze_requantization_ranges\r\nfuse_pad_and_conv\r\nfuse_resize_and_conv\r\nfuse_resize_pad_and_conv\r\ninsert_logging\r\nmerge_duplicate_nodes\r\nobfuscate_names\r\nquantize_nodes\r\nquantize_weights\r\nremove_attribute\r\nremove_device\r\nremove_nodes\r\nrename_attribute\r\nrename_op\r\nrewrite_quantized_stripped_model_for_hexagon\r\nround_weights\r\nset_device\r\nsort_by_execution_order\r\nsparsify_gather\r\nstrip_unused_nodes\r\n\r\nosboxes@osboxes:~/Desktop/tensorflow-master$ \r\n\r\n```\r\n\r\n"}
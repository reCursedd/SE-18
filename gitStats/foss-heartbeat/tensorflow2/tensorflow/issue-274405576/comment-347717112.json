{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/347717112", "html_url": "https://github.com/tensorflow/tensorflow/issues/14613#issuecomment-347717112", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14613", "id": 347717112, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzcxNzExMg==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-29T01:01:24Z", "updated_at": "2017-11-29T01:01:24Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I'm at a loss to explain why the restarts are having such an effect on your training job. I believe <code>MonitoredTrainingSession</code> has always attempted to restart the underlying session transparently when certain types of failure happen, and the worker for which <code>is_chief</code> is <code>True</code> will attempt to reinitialize the parameters from the latest checkpoint if one is available. I doubt the dataset initialization is the cause, although your setup will reinitialize the iterator at each of these restarts, so you might need to shuffle the data to ensure that you're not iterating over the data in the same order each time and thus overfitting somehow.</p>\n<p>Can you share more details about the training setup?</p>\n<p>/cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19293677\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ispirmustafa\">@ispirmustafa</a> in case there were any recent changes to <code>MonitoredSession</code> that could explain a change in behavior.</p>", "body_text": "I'm at a loss to explain why the restarts are having such an effect on your training job. I believe MonitoredTrainingSession has always attempted to restart the underlying session transparently when certain types of failure happen, and the worker for which is_chief is True will attempt to reinitialize the parameters from the latest checkpoint if one is available. I doubt the dataset initialization is the cause, although your setup will reinitialize the iterator at each of these restarts, so you might need to shuffle the data to ensure that you're not iterating over the data in the same order each time and thus overfitting somehow.\nCan you share more details about the training setup?\n/cc @ispirmustafa in case there were any recent changes to MonitoredSession that could explain a change in behavior.", "body": "I'm at a loss to explain why the restarts are having such an effect on your training job. I believe `MonitoredTrainingSession` has always attempted to restart the underlying session transparently when certain types of failure happen, and the worker for which `is_chief` is `True` will attempt to reinitialize the parameters from the latest checkpoint if one is available. I doubt the dataset initialization is the cause, although your setup will reinitialize the iterator at each of these restarts, so you might need to shuffle the data to ensure that you're not iterating over the data in the same order each time and thus overfitting somehow.\r\n\r\nCan you share more details about the training setup?\r\n\r\n/cc @ispirmustafa in case there were any recent changes to `MonitoredSession` that could explain a change in behavior."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/321924924", "html_url": "https://github.com/tensorflow/tensorflow/pull/12223#issuecomment-321924924", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12223", "id": 321924924, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTkyNDkyNA==", "user": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-11T21:37:52Z", "updated_at": "2017-08-11T21:37:52Z", "author_association": "MEMBER", "body_html": "<p>The device_setter_test failure looks like a real bug:</p>\n<h2>ERROR: testBasic (<strong>main</strong>.RandomStrategyTest)</h2>\n<p>Traceback (most recent call last):<br>\nFile \"/var/lib/jenkins/workspace/tensorflow-pull-requests-cpu-python3/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/execroot/workspace/bazel-out/local-py3-opt/bin/bazel_pip/tensorflow/contrib/training/device_setter_test.runfiles/org_tensorflow/bazel_pip/tensorflow/contrib/training/python/training/device_setter_test.py\", line 42, in testBasic<br>\nu = variables.Variable(array_ops.zeros([2, 2]))<br>\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/variables.py\", line 208, in <strong>init</strong><br>\nconstraint=constraint)<br>\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/variables.py\", line 326, in _init_from_args<br>\nname=name)<br>\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/state_ops.py\", line 131, in variable_op_v2<br>\nshared_name=shared_name)<br>\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/gen_state_ops.py\", line 910, in _variable_v2<br>\nshared_name=shared_name, name=name)<br>\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper<br>\nop_def=op_def)<br>\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/framework/ops.py\", line 2669, in create_op<br>\nself._apply_device_functions(ret)<br>\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/framework/ops.py\", line 3438, in _apply_device_functions<br>\nop._set_device(device_function(op))  # pylint: disable=protected-access<br>\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/training/device_setter.py\", line 114, in device_function<br>\nps_device.task = self._ps_strategy(op)<br>\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/contrib/training/python/training/device_setter.py\", line 51, in <strong>call</strong><br>\nn = int(hashlib.md5(key).hexdigest(), 16)<br>\nTypeError: Unicode-objects must be encoded before hashing</p>", "body_text": "The device_setter_test failure looks like a real bug:\nERROR: testBasic (main.RandomStrategyTest)\nTraceback (most recent call last):\nFile \"/var/lib/jenkins/workspace/tensorflow-pull-requests-cpu-python3/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/execroot/workspace/bazel-out/local-py3-opt/bin/bazel_pip/tensorflow/contrib/training/device_setter_test.runfiles/org_tensorflow/bazel_pip/tensorflow/contrib/training/python/training/device_setter_test.py\", line 42, in testBasic\nu = variables.Variable(array_ops.zeros([2, 2]))\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/variables.py\", line 208, in init\nconstraint=constraint)\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/variables.py\", line 326, in _init_from_args\nname=name)\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/state_ops.py\", line 131, in variable_op_v2\nshared_name=shared_name)\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/gen_state_ops.py\", line 910, in _variable_v2\nshared_name=shared_name, name=name)\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\nop_def=op_def)\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/framework/ops.py\", line 2669, in create_op\nself._apply_device_functions(ret)\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/framework/ops.py\", line 3438, in _apply_device_functions\nop._set_device(device_function(op))  # pylint: disable=protected-access\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/training/device_setter.py\", line 114, in device_function\nps_device.task = self._ps_strategy(op)\nFile \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/contrib/training/python/training/device_setter.py\", line 51, in call\nn = int(hashlib.md5(key).hexdigest(), 16)\nTypeError: Unicode-objects must be encoded before hashing", "body": "The device_setter_test failure looks like a real bug:\r\n\r\nERROR: testBasic (__main__.RandomStrategyTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/var/lib/jenkins/workspace/tensorflow-pull-requests-cpu-python3/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/execroot/workspace/bazel-out/local-py3-opt/bin/bazel_pip/tensorflow/contrib/training/device_setter_test.runfiles/org_tensorflow/bazel_pip/tensorflow/contrib/training/python/training/device_setter_test.py\", line 42, in testBasic\r\n    u = variables.Variable(array_ops.zeros([2, 2]))\r\n  File \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/variables.py\", line 208, in __init__\r\n    constraint=constraint)\r\n  File \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/variables.py\", line 326, in _init_from_args\r\n    name=name)\r\n  File \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/state_ops.py\", line 131, in variable_op_v2\r\n    shared_name=shared_name)\r\n  File \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/ops/gen_state_ops.py\", line 910, in _variable_v2\r\n    shared_name=shared_name, name=name)\r\n  File \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/framework/ops.py\", line 2669, in create_op\r\n    self._apply_device_functions(ret)\r\n  File \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/framework/ops.py\", line 3438, in _apply_device_functions\r\n    op._set_device(device_function(op))  # pylint: disable=protected-access\r\n  File \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/python/training/device_setter.py\", line 114, in device_function\r\n    ps_device.task = self._ps_strategy(op)\r\n  File \"/workspace/pip_test/venv/lib/python3.4/site-packages/tensorflow/contrib/training/python/training/device_setter.py\", line 51, in __call__\r\n    n = int(hashlib.md5(key).hexdigest(), 16)\r\nTypeError: Unicode-objects must be encoded before hashing\r\n"}
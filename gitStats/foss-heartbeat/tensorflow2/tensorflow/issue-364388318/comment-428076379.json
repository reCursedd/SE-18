{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/428076379", "html_url": "https://github.com/tensorflow/tensorflow/pull/22559#issuecomment-428076379", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22559", "id": 428076379, "node_id": "MDEyOklzc3VlQ29tbWVudDQyODA3NjM3OQ==", "user": {"login": "yanivbl6", "id": 24679884, "node_id": "MDQ6VXNlcjI0Njc5ODg0", "avatar_url": "https://avatars2.githubusercontent.com/u/24679884?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yanivbl6", "html_url": "https://github.com/yanivbl6", "followers_url": "https://api.github.com/users/yanivbl6/followers", "following_url": "https://api.github.com/users/yanivbl6/following{/other_user}", "gists_url": "https://api.github.com/users/yanivbl6/gists{/gist_id}", "starred_url": "https://api.github.com/users/yanivbl6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yanivbl6/subscriptions", "organizations_url": "https://api.github.com/users/yanivbl6/orgs", "repos_url": "https://api.github.com/users/yanivbl6/repos", "events_url": "https://api.github.com/users/yanivbl6/events{/privacy}", "received_events_url": "https://api.github.com/users/yanivbl6/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-09T06:33:08Z", "updated_at": "2018-10-09T13:59:47Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I don't think it's coming from the program, since I was running the upstream tf_cnn benchmark (synthetic run), and tried reverting back to older versions (back till tf1.5 compatible), with the same error.</p>\n<p>Also- the error is happening on initialization, so the variables don't yet have a session to outlast.<br>\nI will try investigating the issue a bit further and will open an issue once I know more.</p>\n<p>Edit:<br>\nI do think there is a problem here, since GdrServer::Init is calling GrpcServer::Init that initialize the GPU (And calls GetCPUAllocator) <strong>before</strong> calling to the memory registration that registers the suballocator.</p>\n<p>Edit2:<br>\nThe tensorflow/benchmark is not off the hook just yet- I see they use some dummy session that creates the session and is immediately deleted. This could be what 'confuses' the suballocator. I think that both of the issues may exist simultaneously .</p>", "body_text": "I don't think it's coming from the program, since I was running the upstream tf_cnn benchmark (synthetic run), and tried reverting back to older versions (back till tf1.5 compatible), with the same error.\nAlso- the error is happening on initialization, so the variables don't yet have a session to outlast.\nI will try investigating the issue a bit further and will open an issue once I know more.\nEdit:\nI do think there is a problem here, since GdrServer::Init is calling GrpcServer::Init that initialize the GPU (And calls GetCPUAllocator) before calling to the memory registration that registers the suballocator.\nEdit2:\nThe tensorflow/benchmark is not off the hook just yet- I see they use some dummy session that creates the session and is immediately deleted. This could be what 'confuses' the suballocator. I think that both of the issues may exist simultaneously .", "body": "I don't think it's coming from the program, since I was running the upstream tf_cnn benchmark (synthetic run), and tried reverting back to older versions (back till tf1.5 compatible), with the same error.\r\n\r\nAlso- the error is happening on initialization, so the variables don't yet have a session to outlast.\r\nI will try investigating the issue a bit further and will open an issue once I know more.\r\n\r\nEdit:\r\nI do think there is a problem here, since GdrServer::Init is calling GrpcServer::Init that initialize the GPU (And calls GetCPUAllocator) **before** calling to the memory registration that registers the suballocator.\r\n\r\nEdit2:\r\nThe tensorflow/benchmark is not off the hook just yet- I see they use some dummy session that creates the session and is immediately deleted. This could be what 'confuses' the suballocator. I think that both of the issues may exist simultaneously ."}
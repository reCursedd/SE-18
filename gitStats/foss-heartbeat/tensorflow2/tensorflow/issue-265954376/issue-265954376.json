{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13764", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13764/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13764/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13764/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13764", "id": 265954376, "node_id": "MDU6SXNzdWUyNjU5NTQzNzY=", "number": 13764, "title": "Failure in TestNewTensor when running go test", "user": {"login": "vishvananda", "id": 142222, "node_id": "MDQ6VXNlcjE0MjIyMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/142222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vishvananda", "html_url": "https://github.com/vishvananda", "followers_url": "https://api.github.com/users/vishvananda/followers", "following_url": "https://api.github.com/users/vishvananda/following{/other_user}", "gists_url": "https://api.github.com/users/vishvananda/gists{/gist_id}", "starred_url": "https://api.github.com/users/vishvananda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vishvananda/subscriptions", "organizations_url": "https://api.github.com/users/vishvananda/orgs", "repos_url": "https://api.github.com/users/vishvananda/repos", "events_url": "https://api.github.com/users/vishvananda/events{/privacy}", "received_events_url": "https://api.github.com/users/vishvananda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-10-17T00:17:31Z", "updated_at": "2017-11-04T03:09:38Z", "closed_at": "2017-11-04T03:09:38Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: no</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source (branch 1.4)</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4.0-dev</li>\n<li><strong>Python version</strong>: 3.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 5.4.0</li>\n<li><strong>CUDA/cuDNN version</strong>: 8.0/6.0</li>\n<li><strong>GPU model and memory</strong>: nVidia 1080Ti 11G</li>\n<li><strong>Exact command to reproduce</strong>: go test -v github.com/tensorflow/tensorflow/tensorflow/go</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I'm trying to use the go bindings to the tensorflow c library. When I run the tests, I get a nil pointer dereference and a segfault. The details are below. Note that I've built the c library from source using the following options:</p>\n<p><code>bazel build -c opt --config=cuda --config=mkl -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --copt=-msse4.2 -c opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow:libtensorflow.so</code></p>\n<h3>Source code / logs</h3>\n<p>When I run go test -v github.com/tensorflow/tensorflow/tensorflow/go I get the following error:</p>\n<pre><code>2017-10-16 17:12:30.568054: E tensorflow/core/common_runtime/bfc_allocator.cc:244] tried to allocate 0 bytes\n2017-10-16 17:12:30.568065: W tensorflow/core/common_runtime/allocator_retry.cc:32] Request to allocate 0 bytes\n--- FAIL: TestNewTensor (0.00s)\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\n        panic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x536098]\n\ngoroutine 168 [running]:\ntesting.tRunner.func1(0xc42059c4e0)\n        /usr/lib/go-1.8/src/testing/testing.go:622 +0x29d\npanic(0x6a0b80, 0xa18e80)\n        /usr/lib/go-1.8/src/runtime/panic.go:489 +0x2cf\ngithub.com/tensorflow/tensorflow/tensorflow/go.tensorData(0x7fa8f40195b0, 0xc420595900, 0x688a80, 0x6ffb90)\n        /home/vishvananda/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:209 +0x48\ngithub.com/tensorflow/tensorflow/tensorflow/go.NewTensor(0x683d20, 0xc4205945e0, 0xc42004d9a0, 0x2, 0x2)\n        /home/vishvananda/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:92 +0x221\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestNewTensor(0xc42059c4e0)\n        /home/vishvananda/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor_test.go:92 +0x2526\ntesting.tRunner(0xc42059c4e0, 0x6ffbd0)\n        /usr/lib/go-1.8/src/testing/testing.go:657 +0x96\ncreated by testing.(*T).Run\n        /usr/lib/go-1.8/src/testing/testing.go:697 +0x2ca\nexit status 2\nFAIL    github.com/tensorflow/tensorflow/tensorflow/go  0.443s\n</code></pre>\n<p>Adding some debugging, it turns out that the TestNewTensor test fails when attempting to create the following tensor <code>{[]int64{2, 0}, [][]int64{{}, {}}}</code>. If I comment out that line, the tests pass.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\nTensorFlow installed from (source or binary): source (branch 1.4)\nTensorFlow version (use command below): 1.4.0-dev\nPython version: 3.5\nBazel version (if compiling from source): 5.4.0\nCUDA/cuDNN version: 8.0/6.0\nGPU model and memory: nVidia 1080Ti 11G\nExact command to reproduce: go test -v github.com/tensorflow/tensorflow/tensorflow/go\n\nDescribe the problem\nI'm trying to use the go bindings to the tensorflow c library. When I run the tests, I get a nil pointer dereference and a segfault. The details are below. Note that I've built the c library from source using the following options:\nbazel build -c opt --config=cuda --config=mkl -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --copt=-msse4.2 -c opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow:libtensorflow.so\nSource code / logs\nWhen I run go test -v github.com/tensorflow/tensorflow/tensorflow/go I get the following error:\n2017-10-16 17:12:30.568054: E tensorflow/core/common_runtime/bfc_allocator.cc:244] tried to allocate 0 bytes\n2017-10-16 17:12:30.568065: W tensorflow/core/common_runtime/allocator_retry.cc:32] Request to allocate 0 bytes\n--- FAIL: TestNewTensor (0.00s)\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\n        panic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x536098]\n\ngoroutine 168 [running]:\ntesting.tRunner.func1(0xc42059c4e0)\n        /usr/lib/go-1.8/src/testing/testing.go:622 +0x29d\npanic(0x6a0b80, 0xa18e80)\n        /usr/lib/go-1.8/src/runtime/panic.go:489 +0x2cf\ngithub.com/tensorflow/tensorflow/tensorflow/go.tensorData(0x7fa8f40195b0, 0xc420595900, 0x688a80, 0x6ffb90)\n        /home/vishvananda/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:209 +0x48\ngithub.com/tensorflow/tensorflow/tensorflow/go.NewTensor(0x683d20, 0xc4205945e0, 0xc42004d9a0, 0x2, 0x2)\n        /home/vishvananda/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:92 +0x221\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestNewTensor(0xc42059c4e0)\n        /home/vishvananda/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor_test.go:92 +0x2526\ntesting.tRunner(0xc42059c4e0, 0x6ffbd0)\n        /usr/lib/go-1.8/src/testing/testing.go:657 +0x96\ncreated by testing.(*T).Run\n        /usr/lib/go-1.8/src/testing/testing.go:697 +0x2ca\nexit status 2\nFAIL    github.com/tensorflow/tensorflow/tensorflow/go  0.443s\n\nAdding some debugging, it turns out that the TestNewTensor test fails when attempting to create the following tensor {[]int64{2, 0}, [][]int64{{}, {}}}. If I comment out that line, the tests pass.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: source (branch 1.4)\r\n- **TensorFlow version (use command below)**: 1.4.0-dev\r\n- **Python version**: 3.5\r\n- **Bazel version (if compiling from source)**: 5.4.0\r\n- **CUDA/cuDNN version**: 8.0/6.0\r\n- **GPU model and memory**: nVidia 1080Ti 11G\r\n- **Exact command to reproduce**: go test -v github.com/tensorflow/tensorflow/tensorflow/go\r\n\r\n### Describe the problem\r\n\r\nI'm trying to use the go bindings to the tensorflow c library. When I run the tests, I get a nil pointer dereference and a segfault. The details are below. Note that I've built the c library from source using the following options:\r\n\r\n`bazel build -c opt --config=cuda --config=mkl -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --copt=-msse4.2 -c opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow:libtensorflow.so`\r\n\r\n### Source code / logs\r\nWhen I run go test -v github.com/tensorflow/tensorflow/tensorflow/go I get the following error:\r\n```\r\n2017-10-16 17:12:30.568054: E tensorflow/core/common_runtime/bfc_allocator.cc:244] tried to allocate 0 bytes\r\n2017-10-16 17:12:30.568065: W tensorflow/core/common_runtime/allocator_retry.cc:32] Request to allocate 0 bytes\r\n--- FAIL: TestNewTensor (0.00s)\r\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n        panic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x536098]\r\n\r\ngoroutine 168 [running]:\r\ntesting.tRunner.func1(0xc42059c4e0)\r\n        /usr/lib/go-1.8/src/testing/testing.go:622 +0x29d\r\npanic(0x6a0b80, 0xa18e80)\r\n        /usr/lib/go-1.8/src/runtime/panic.go:489 +0x2cf\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.tensorData(0x7fa8f40195b0, 0xc420595900, 0x688a80, 0x6ffb90)\r\n        /home/vishvananda/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:209 +0x48\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.NewTensor(0x683d20, 0xc4205945e0, 0xc42004d9a0, 0x2, 0x2)\r\n        /home/vishvananda/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:92 +0x221\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestNewTensor(0xc42059c4e0)\r\n        /home/vishvananda/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor_test.go:92 +0x2526\r\ntesting.tRunner(0xc42059c4e0, 0x6ffbd0)\r\n        /usr/lib/go-1.8/src/testing/testing.go:657 +0x96\r\ncreated by testing.(*T).Run\r\n        /usr/lib/go-1.8/src/testing/testing.go:697 +0x2ca\r\nexit status 2\r\nFAIL    github.com/tensorflow/tensorflow/tensorflow/go  0.443s\r\n```\r\nAdding some debugging, it turns out that the TestNewTensor test fails when attempting to create the following tensor `{[]int64{2, 0}, [][]int64{{}, {}}}`. If I comment out that line, the tests pass."}
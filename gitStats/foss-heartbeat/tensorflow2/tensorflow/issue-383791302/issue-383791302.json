{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23939", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23939/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23939/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23939/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23939", "id": 383791302, "node_id": "MDU6SXNzdWUzODM3OTEzMDI=", "number": 23939, "title": " fatal error: cuda/include/cublas_v2.h: No such file or directory", "user": {"login": "kxhit", "id": 16812362, "node_id": "MDQ6VXNlcjE2ODEyMzYy", "avatar_url": "https://avatars2.githubusercontent.com/u/16812362?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kxhit", "html_url": "https://github.com/kxhit", "followers_url": "https://api.github.com/users/kxhit/followers", "following_url": "https://api.github.com/users/kxhit/following{/other_user}", "gists_url": "https://api.github.com/users/kxhit/gists{/gist_id}", "starred_url": "https://api.github.com/users/kxhit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kxhit/subscriptions", "organizations_url": "https://api.github.com/users/kxhit/orgs", "repos_url": "https://api.github.com/users/kxhit/repos", "events_url": "https://api.github.com/users/kxhit/events{/privacy}", "received_events_url": "https://api.github.com/users/kxhit/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-23T11:32:07Z", "updated_at": "2018-11-23T15:14:25Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>Following instructions building tensorflow from source by using bazel, I got error when</p>\n<p>bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package  --define framework_shared_object=false tensorflow:libtensorflow_cc.so --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"</p>\n<p><strong>System information</strong></p>\n<ul>\n<li>Linux Ubuntu 16.04</li>\n<li>TensorFlow installed from source</li>\n<li>TensorFlow version: r1.8</li>\n<li>Python version: 3.5</li>\n<li>Installed using virtualenv :</li>\n<li>Bazel version (if compiling from source): 0.18.1</li>\n<li>GCC/Compiler version (if compiling from source): 5.4</li>\n<li>CUDA/cuDNN version: 9.0/7.0</li>\n<li>GPU model and memory: TITAN XP</li>\n</ul>\n<p>my configuration file:<br>\nbuild --action_env PYTHON_BIN_PATH=\"/home/kx/segmappyenv/bin/python\"<br>\nbuild --action_env PYTHON_LIB_PATH=\"/home/kx/segmappyenv/lib/python3.5/site-packages\"<br>\nbuild --force_python=py3<br>\nbuild --host_force_python=py3<br>\nbuild --python_path=\"/home/kx/segmappyenv/bin/python\"<br>\nbuild --define with_jemalloc=true<br>\nbuild --define with_gcp_support=true<br>\nbuild --define with_hdfs_support=true<br>\nbuild --define with_s3_support=true<br>\nbuild --define with_kafka_support=true<br>\nbuild:xla --define with_xla_support=true<br>\nbuild:gdr --define with_gdr_support=true<br>\nbuild:verbs --define with_verbs_support=true<br>\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"<br>\nbuild --action_env TF_NEED_CUDA=\"1\"<br>\nbuild --action_env CUDA_TOOLKIT_PATH=\"/usr/local/cuda-9.0\"<br>\nbuild --action_env TF_CUDA_VERSION=\"9.0\"<br>\nbuild --action_env CUDNN_INSTALL_PATH=\"/usr/local/cuda-9.0\"<br>\nbuild --action_env TF_CUDNN_VERSION=\"7\"<br>\nbuild --action_env TF_NCCL_VERSION=\"1\"<br>\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"<br>\nbuild --action_env LD_LIBRARY_PATH=\"/opt/ros/kinetic/lib:/opt/ros/kinetic/lib/x86_64-linux-gnu:/usr/local/cuda-9.0/lib64:/usr/local/cuda-9.0/extras/CUPTI/lib64\"<br>\nbuild --action_env TF_CUDA_CLANG=\"0\"<br>\nbuild --action_env GCC_HOST_COMPILER_PATH=\"/usr/bin/gcc\"<br>\nbuild --config=cuda<br>\ntest --config=cuda<br>\nbuild --define grpc_no_ares=true<br>\nbuild:opt --copt=-march=native<br>\nbuild:opt --host_copt=-march=native<br>\nbuild:opt --define with_default_optimizations=true<br>\nbuild --copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK<br>\nbuild --host_copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK</p>\n<p><strong>Any other info / logs</strong><br>\nbuild logs:</p>\n<p>INFO: From Compiling tensorflow/core/distributed_runtime/master.cc [for host]:<br>\nIn file included from ./tensorflow/core/platform/default/logging.h:24:0,<br>\nfrom ./tensorflow/core/platform/logging.h:25,<br>\nfrom ./tensorflow/core/lib/core/status.h:25,<br>\nfrom ./tensorflow/core/framework/variant.h:29,<br>\nfrom ./tensorflow/core/framework/allocator.h:26,<br>\nfrom ./tensorflow/core/common_runtime/device.h:35,<br>\nfrom ./tensorflow/core/distributed_runtime/master.h:21,<br>\nfrom tensorflow/core/distributed_runtime/master.cc:32:<br>\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetTensorDim(tensorflow::gtl::ArraySlice, tensorflow::TensorFormat, char) [with T = long long int]':<br>\n./tensorflow/core/util/tensor_format.h:372:47:   required from here<br>\n./tensorflow/core/util/tensor_format.h:340:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]<br>\nCHECK(index &gt;= 0 &amp;&amp; index &lt; dimension_attributes.size())<br>\n^<br>\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'<br>\n#define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))<br>\n^<br>\n./tensorflow/core/util/tensor_format.h:340:3: note: in expansion of macro 'CHECK'<br>\nCHECK(index &gt;= 0 &amp;&amp; index &lt; dimension_attributes.size())<br>\n^<br>\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetFilterDim(tensorflow::gtl::ArraySlice, tensorflow::FilterTensorFormat, char) [with T = long long int]':<br>\n./tensorflow/core/util/tensor_format.h:381:54:   required from here<br>\n./tensorflow/core/util/tensor_format.h:355:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]<br>\nCHECK(index &gt;= 0 &amp;&amp; index &lt; dimension_attribute.size())<br>\n^<br>\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'<br>\n#define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))<br>\n^<br>\n./tensorflow/core/util/tensor_format.h:355:3: note: in expansion of macro 'CHECK'<br>\nCHECK(index &gt;= 0 &amp;&amp; index &lt; dimension_attribute.size())<br>\n^<br>\nERROR: /home/kx/segmappyenv/tensorflow/tensorflow/core/kernels/BUILD:2547:1: C++ compilation of rule '//tensorflow/core/kernels:self_adjoint_eig_v2_op' failed (Exit 1)<br>\nIn file included from tensorflow/core/kernels/self_adjoint_eig_v2_op_gpu.cc:29:0:<br>\n./tensorflow/core/kernels/cuda_solvers.h:26:36: fatal error: cuda/include/cublas_v2.h: No such file or directory<br>\ncompilation terminated.<br>\nINFO: Elapsed time: 383.691s, Critical Path: 52.31s<br>\nINFO: 2759 processes: 2759 local.<br>\nFAILED: Build did NOT complete successfully</p>", "body_text": "Following instructions building tensorflow from source by using bazel, I got error when\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package  --define framework_shared_object=false tensorflow:libtensorflow_cc.so --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"\nSystem information\n\nLinux Ubuntu 16.04\nTensorFlow installed from source\nTensorFlow version: r1.8\nPython version: 3.5\nInstalled using virtualenv :\nBazel version (if compiling from source): 0.18.1\nGCC/Compiler version (if compiling from source): 5.4\nCUDA/cuDNN version: 9.0/7.0\nGPU model and memory: TITAN XP\n\nmy configuration file:\nbuild --action_env PYTHON_BIN_PATH=\"/home/kx/segmappyenv/bin/python\"\nbuild --action_env PYTHON_LIB_PATH=\"/home/kx/segmappyenv/lib/python3.5/site-packages\"\nbuild --force_python=py3\nbuild --host_force_python=py3\nbuild --python_path=\"/home/kx/segmappyenv/bin/python\"\nbuild --define with_jemalloc=true\nbuild --define with_gcp_support=true\nbuild --define with_hdfs_support=true\nbuild --define with_s3_support=true\nbuild --define with_kafka_support=true\nbuild:xla --define with_xla_support=true\nbuild:gdr --define with_gdr_support=true\nbuild:verbs --define with_verbs_support=true\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\nbuild --action_env TF_NEED_CUDA=\"1\"\nbuild --action_env CUDA_TOOLKIT_PATH=\"/usr/local/cuda-9.0\"\nbuild --action_env TF_CUDA_VERSION=\"9.0\"\nbuild --action_env CUDNN_INSTALL_PATH=\"/usr/local/cuda-9.0\"\nbuild --action_env TF_CUDNN_VERSION=\"7\"\nbuild --action_env TF_NCCL_VERSION=\"1\"\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"\nbuild --action_env LD_LIBRARY_PATH=\"/opt/ros/kinetic/lib:/opt/ros/kinetic/lib/x86_64-linux-gnu:/usr/local/cuda-9.0/lib64:/usr/local/cuda-9.0/extras/CUPTI/lib64\"\nbuild --action_env TF_CUDA_CLANG=\"0\"\nbuild --action_env GCC_HOST_COMPILER_PATH=\"/usr/bin/gcc\"\nbuild --config=cuda\ntest --config=cuda\nbuild --define grpc_no_ares=true\nbuild:opt --copt=-march=native\nbuild:opt --host_copt=-march=native\nbuild:opt --define with_default_optimizations=true\nbuild --copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\nbuild --host_copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\nAny other info / logs\nbuild logs:\nINFO: From Compiling tensorflow/core/distributed_runtime/master.cc [for host]:\nIn file included from ./tensorflow/core/platform/default/logging.h:24:0,\nfrom ./tensorflow/core/platform/logging.h:25,\nfrom ./tensorflow/core/lib/core/status.h:25,\nfrom ./tensorflow/core/framework/variant.h:29,\nfrom ./tensorflow/core/framework/allocator.h:26,\nfrom ./tensorflow/core/common_runtime/device.h:35,\nfrom ./tensorflow/core/distributed_runtime/master.h:21,\nfrom tensorflow/core/distributed_runtime/master.cc:32:\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetTensorDim(tensorflow::gtl::ArraySlice, tensorflow::TensorFormat, char) [with T = long long int]':\n./tensorflow/core/util/tensor_format.h:372:47:   required from here\n./tensorflow/core/util/tensor_format.h:340:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\nCHECK(index >= 0 && index < dimension_attributes.size())\n^\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'\n#define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))\n^\n./tensorflow/core/util/tensor_format.h:340:3: note: in expansion of macro 'CHECK'\nCHECK(index >= 0 && index < dimension_attributes.size())\n^\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetFilterDim(tensorflow::gtl::ArraySlice, tensorflow::FilterTensorFormat, char) [with T = long long int]':\n./tensorflow/core/util/tensor_format.h:381:54:   required from here\n./tensorflow/core/util/tensor_format.h:355:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\nCHECK(index >= 0 && index < dimension_attribute.size())\n^\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'\n#define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))\n^\n./tensorflow/core/util/tensor_format.h:355:3: note: in expansion of macro 'CHECK'\nCHECK(index >= 0 && index < dimension_attribute.size())\n^\nERROR: /home/kx/segmappyenv/tensorflow/tensorflow/core/kernels/BUILD:2547:1: C++ compilation of rule '//tensorflow/core/kernels:self_adjoint_eig_v2_op' failed (Exit 1)\nIn file included from tensorflow/core/kernels/self_adjoint_eig_v2_op_gpu.cc:29:0:\n./tensorflow/core/kernels/cuda_solvers.h:26:36: fatal error: cuda/include/cublas_v2.h: No such file or directory\ncompilation terminated.\nINFO: Elapsed time: 383.691s, Critical Path: 52.31s\nINFO: 2759 processes: 2759 local.\nFAILED: Build did NOT complete successfully", "body": "Following instructions building tensorflow from source by using bazel, I got error when \r\n \r\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package  --define framework_shared_object=false tensorflow:libtensorflow_cc.so --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"\r\n\r\n\r\n**System information**\r\n- Linux Ubuntu 16.04\r\n- TensorFlow installed from source\r\n- TensorFlow version: r1.8\r\n- Python version: 3.5\r\n- Installed using virtualenv :\r\n- Bazel version (if compiling from source): 0.18.1\r\n- GCC/Compiler version (if compiling from source): 5.4\r\n- CUDA/cuDNN version: 9.0/7.0\r\n- GPU model and memory: TITAN XP \r\n\r\n\r\nmy configuration file:\r\nbuild --action_env PYTHON_BIN_PATH=\"/home/kx/segmappyenv/bin/python\"\r\nbuild --action_env PYTHON_LIB_PATH=\"/home/kx/segmappyenv/lib/python3.5/site-packages\"\r\nbuild --force_python=py3\r\nbuild --host_force_python=py3\r\nbuild --python_path=\"/home/kx/segmappyenv/bin/python\"\r\nbuild --define with_jemalloc=true\r\nbuild --define with_gcp_support=true\r\nbuild --define with_hdfs_support=true\r\nbuild --define with_s3_support=true\r\nbuild --define with_kafka_support=true\r\nbuild:xla --define with_xla_support=true\r\nbuild:gdr --define with_gdr_support=true\r\nbuild:verbs --define with_verbs_support=true\r\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\r\nbuild --action_env TF_NEED_CUDA=\"1\"\r\nbuild --action_env CUDA_TOOLKIT_PATH=\"/usr/local/cuda-9.0\"\r\nbuild --action_env TF_CUDA_VERSION=\"9.0\"\r\nbuild --action_env CUDNN_INSTALL_PATH=\"/usr/local/cuda-9.0\"\r\nbuild --action_env TF_CUDNN_VERSION=\"7\"\r\nbuild --action_env TF_NCCL_VERSION=\"1\"\r\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"\r\nbuild --action_env LD_LIBRARY_PATH=\"/opt/ros/kinetic/lib:/opt/ros/kinetic/lib/x86_64-linux-gnu:/usr/local/cuda-9.0/lib64:/usr/local/cuda-9.0/extras/CUPTI/lib64\"\r\nbuild --action_env TF_CUDA_CLANG=\"0\"\r\nbuild --action_env GCC_HOST_COMPILER_PATH=\"/usr/bin/gcc\"\r\nbuild --config=cuda\r\ntest --config=cuda\r\nbuild --define grpc_no_ares=true\r\nbuild:opt --copt=-march=native\r\nbuild:opt --host_copt=-march=native\r\nbuild:opt --define with_default_optimizations=true\r\nbuild --copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\r\nbuild --host_copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\r\n\r\n**Any other info / logs**\r\nbuild logs:\r\n\r\n\r\nINFO: From Compiling tensorflow/core/distributed_runtime/master.cc [for host]:\r\nIn file included from ./tensorflow/core/platform/default/logging.h:24:0,\r\n                 from ./tensorflow/core/platform/logging.h:25,\r\n                 from ./tensorflow/core/lib/core/status.h:25,\r\n                 from ./tensorflow/core/framework/variant.h:29,\r\n                 from ./tensorflow/core/framework/allocator.h:26,\r\n                 from ./tensorflow/core/common_runtime/device.h:35,\r\n                 from ./tensorflow/core/distributed_runtime/master.h:21,\r\n                 from tensorflow/core/distributed_runtime/master.cc:32:\r\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetTensorDim(tensorflow::gtl::ArraySlice<T>, tensorflow::TensorFormat, char) [with T = long long int]':\r\n./tensorflow/core/util/tensor_format.h:372:47:   required from here\r\n./tensorflow/core/util/tensor_format.h:340:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   CHECK(index >= 0 && index < dimension_attributes.size())\r\n                             ^\r\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'\r\n #define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))\r\n                                               ^\r\n./tensorflow/core/util/tensor_format.h:340:3: note: in expansion of macro 'CHECK'\r\n   CHECK(index >= 0 && index < dimension_attributes.size())\r\n   ^\r\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetFilterDim(tensorflow::gtl::ArraySlice<T>, tensorflow::FilterTensorFormat, char) [with T = long long int]':\r\n./tensorflow/core/util/tensor_format.h:381:54:   required from here\r\n./tensorflow/core/util/tensor_format.h:355:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   CHECK(index >= 0 && index < dimension_attribute.size())\r\n                             ^\r\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'\r\n #define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))\r\n                                               ^\r\n./tensorflow/core/util/tensor_format.h:355:3: note: in expansion of macro 'CHECK'\r\n   CHECK(index >= 0 && index < dimension_attribute.size())\r\n   ^\r\nERROR: /home/kx/segmappyenv/tensorflow/tensorflow/core/kernels/BUILD:2547:1: C++ compilation of rule '//tensorflow/core/kernels:self_adjoint_eig_v2_op' failed (Exit 1)\r\nIn file included from tensorflow/core/kernels/self_adjoint_eig_v2_op_gpu.cc:29:0:\r\n./tensorflow/core/kernels/cuda_solvers.h:26:36: fatal error: cuda/include/cublas_v2.h: No such file or directory\r\ncompilation terminated.\r\nINFO: Elapsed time: 383.691s, Critical Path: 52.31s\r\nINFO: 2759 processes: 2759 local.\r\nFAILED: Build did NOT complete successfully\r\n"}
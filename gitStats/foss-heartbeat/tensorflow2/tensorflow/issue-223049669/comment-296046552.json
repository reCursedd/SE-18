{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/296046552", "html_url": "https://github.com/tensorflow/tensorflow/issues/9334#issuecomment-296046552", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9334", "id": 296046552, "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjA0NjU1Mg==", "user": {"login": "fesun", "id": 23738439, "node_id": "MDQ6VXNlcjIzNzM4NDM5", "avatar_url": "https://avatars3.githubusercontent.com/u/23738439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fesun", "html_url": "https://github.com/fesun", "followers_url": "https://api.github.com/users/fesun/followers", "following_url": "https://api.github.com/users/fesun/following{/other_user}", "gists_url": "https://api.github.com/users/fesun/gists{/gist_id}", "starred_url": "https://api.github.com/users/fesun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fesun/subscriptions", "organizations_url": "https://api.github.com/users/fesun/orgs", "repos_url": "https://api.github.com/users/fesun/repos", "events_url": "https://api.github.com/users/fesun/events{/privacy}", "received_events_url": "https://api.github.com/users/fesun/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-21T03:50:02Z", "updated_at": "2017-04-21T03:50:02Z", "author_association": "CONTRIBUTOR", "body_html": "<p>`<br>\n#include \"tensorflow/core/framework/op_kernel.h\"<br>\n#include \"tensorflow/core/framework/tensor.h\"<br>\n#include \"tensorflow/core/framework/tensor_shape.h\"<br>\n#include \"tensorflow/core/framework/types.h\"<br>\n#include \"tensorflow/core/lib/core/errors.h\"<br>\n#include \"tensorflow/core/platform/cpu_info.h\"<br>\n#include \"tensorflow/core/framework/op.h\"<br>\n#include \"tensorflow/core/framework/shape_inference.h\"<br>\n#include \"tensorflow/core/framework/common_shape_fns.h\"<br>\n#include \"tensorflow/core/platform/env.h\"<br>\n#include \"tensorflow/core/platform/file_system.h\"</p>\n<p>namespace tensorflow {<br>\nusing shape_inference::DimensionHandle;<br>\nusing shape_inference::InferenceContext;<br>\nusing shape_inference::ShapeHandle;</p>\n<p>REGISTER_OP(\"MyConcat\")<br>\n.Input(\"tensors: dtypes\")<br>\n.Attr(\"dtypes: list(int)\")<br>\n.SetShapeFn([] (InferenceContext* c) {<br>\nreturn Status::OK();<br>\n})<br>\n.Doc(R\"doc(<br>\nconcat a list of tensors<br>\n)doc\");</p>\n<p>class MyConcatOp : public OpKernel {<br>\npublic:<br>\nexplicit MyConcatOp(OpKernelConstruction* context) : OpKernel(context) {}</p>\n<p>void Compute(OpKernelContext* context) override {<br>\n}<br>\n};</p>\n<p>REGISTER_KERNEL_BUILDER(Name(\"MyConcat\").Device(DEVICE_CPU), MyConcatOp);<br>\n}</p>\n<p>`<br>\nThis code refereed to the two links i pasted and  complied successfully, but failed to load. I think there is something wrong.</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>m = tf.load_op_library(\"./test_list.so\")<br>\nTraceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/load_library.py\", line 64, in load_op_library<br>\nNone, None, error_msg, error_code)<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Reference to attr 'dtypes' with type list(int) that isn't type or list(type) from Input(\"tensors: dtypes\") for Op MyConcat</p>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>", "body_text": "`\n#include \"tensorflow/core/framework/op_kernel.h\"\n#include \"tensorflow/core/framework/tensor.h\"\n#include \"tensorflow/core/framework/tensor_shape.h\"\n#include \"tensorflow/core/framework/types.h\"\n#include \"tensorflow/core/lib/core/errors.h\"\n#include \"tensorflow/core/platform/cpu_info.h\"\n#include \"tensorflow/core/framework/op.h\"\n#include \"tensorflow/core/framework/shape_inference.h\"\n#include \"tensorflow/core/framework/common_shape_fns.h\"\n#include \"tensorflow/core/platform/env.h\"\n#include \"tensorflow/core/platform/file_system.h\"\nnamespace tensorflow {\nusing shape_inference::DimensionHandle;\nusing shape_inference::InferenceContext;\nusing shape_inference::ShapeHandle;\nREGISTER_OP(\"MyConcat\")\n.Input(\"tensors: dtypes\")\n.Attr(\"dtypes: list(int)\")\n.SetShapeFn([] (InferenceContext* c) {\nreturn Status::OK();\n})\n.Doc(R\"doc(\nconcat a list of tensors\n)doc\");\nclass MyConcatOp : public OpKernel {\npublic:\nexplicit MyConcatOp(OpKernelConstruction* context) : OpKernel(context) {}\nvoid Compute(OpKernelContext* context) override {\n}\n};\nREGISTER_KERNEL_BUILDER(Name(\"MyConcat\").Device(DEVICE_CPU), MyConcatOp);\n}\n`\nThis code refereed to the two links i pasted and  complied successfully, but failed to load. I think there is something wrong.\n\n\n\n\nm = tf.load_op_library(\"./test_list.so\")\nTraceback (most recent call last):\nFile \"\", line 1, in \nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/load_library.py\", line 64, in load_op_library\nNone, None, error_msg, error_code)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Reference to attr 'dtypes' with type list(int) that isn't type or list(type) from Input(\"tensors: dtypes\") for Op MyConcat", "body": "`\r\n#include \"tensorflow/core/framework/op_kernel.h\"\r\n#include \"tensorflow/core/framework/tensor.h\"\r\n#include \"tensorflow/core/framework/tensor_shape.h\"\r\n#include \"tensorflow/core/framework/types.h\"\r\n#include \"tensorflow/core/lib/core/errors.h\"\r\n#include \"tensorflow/core/platform/cpu_info.h\"\r\n#include \"tensorflow/core/framework/op.h\"\r\n#include \"tensorflow/core/framework/shape_inference.h\"\r\n#include \"tensorflow/core/framework/common_shape_fns.h\"\r\n#include \"tensorflow/core/platform/env.h\"\r\n#include \"tensorflow/core/platform/file_system.h\"\r\n\r\nnamespace tensorflow {\r\nusing shape_inference::DimensionHandle;\r\nusing shape_inference::InferenceContext;\r\nusing shape_inference::ShapeHandle;\r\n\r\nREGISTER_OP(\"MyConcat\")\r\n  .Input(\"tensors: dtypes\")\r\n  .Attr(\"dtypes: list(int)\")\r\n  .SetShapeFn([] (InferenceContext* c) {\r\n      return Status::OK();\r\n  })\r\n  .Doc(R\"doc(\r\nconcat a list of tensors\r\n)doc\");\r\n\r\nclass MyConcatOp : public OpKernel {\r\npublic:\r\n  explicit MyConcatOp(OpKernelConstruction* context) : OpKernel(context) {}\r\n\r\n  void Compute(OpKernelContext* context) override {\r\n  }\r\n};\r\n\r\nREGISTER_KERNEL_BUILDER(Name(\"MyConcat\").Device(DEVICE_CPU), MyConcatOp);\r\n}\r\n\r\n`\r\nThis code refereed to the two links i pasted and  complied successfully, but failed to load. I think there is something wrong.\r\n\r\n> >>> m = tf.load_op_library(\"./test_list.so\")\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/load_library.py\", line 64, in load_op_library\r\n    None, None, error_msg, error_code)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Reference to attr 'dtypes' with type list(int) that isn't type or list(type) from Input(\"tensors: dtypes\") for Op MyConcat\r\n"}
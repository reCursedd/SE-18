{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8351", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8351/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8351/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8351/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8351", "id": 213748474, "node_id": "MDU6SXNzdWUyMTM3NDg0NzQ=", "number": 8351, "title": "how to avoid generating large metagraph?", "user": {"login": "bluekingsong", "id": 2830940, "node_id": "MDQ6VXNlcjI4MzA5NDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/2830940?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bluekingsong", "html_url": "https://github.com/bluekingsong", "followers_url": "https://api.github.com/users/bluekingsong/followers", "following_url": "https://api.github.com/users/bluekingsong/following{/other_user}", "gists_url": "https://api.github.com/users/bluekingsong/gists{/gist_id}", "starred_url": "https://api.github.com/users/bluekingsong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bluekingsong/subscriptions", "organizations_url": "https://api.github.com/users/bluekingsong/orgs", "repos_url": "https://api.github.com/users/bluekingsong/repos", "events_url": "https://api.github.com/users/bluekingsong/events{/privacy}", "received_events_url": "https://api.github.com/users/bluekingsong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-13T12:10:25Z", "updated_at": "2017-03-17T00:01:58Z", "closed_at": "2017-03-16T13:18:09Z", "author_association": "NONE", "body_html": "<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>x_nparray = $VERY_LARGE_NP_ARRAY(bigger than 2G)</p>\n<p>x = tf.Variable(init_value=x_nparray)</p>\n<p>saver=tf.Saver()<br>\nwith tf.Session() as sess:<br>\nsaver.save(sess, 'path/to/save')</p>\n<p>that would generate very large metagraph binary file, when i try to restore the model, it would failed because of the meta graph file size exceed  the protobuf limit size.</p>\n<p>I cannot reduce the size of x_nparray, because it's generated by other training system like caffe.</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>set bigger limit byte of protobuf, however, the x_nparray is bigger than 3G, while the largest limit i can set is 2G.</p>", "body_text": "If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nx_nparray = $VERY_LARGE_NP_ARRAY(bigger than 2G)\nx = tf.Variable(init_value=x_nparray)\nsaver=tf.Saver()\nwith tf.Session() as sess:\nsaver.save(sess, 'path/to/save')\nthat would generate very large metagraph binary file, when i try to restore the model, it would failed because of the meta graph file size exceed  the protobuf limit size.\nI cannot reduce the size of x_nparray, because it's generated by other training system like caffe.\nWhat other attempted solutions have you tried?\nset bigger limit byte of protobuf, however, the x_nparray is bigger than 3G, while the largest limit i can set is 2G.", "body": "\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n\r\nx_nparray = $VERY_LARGE_NP_ARRAY(bigger than 2G)\r\n\r\nx = tf.Variable(init_value=x_nparray)\r\n\r\nsaver=tf.Saver()\r\nwith tf.Session() as sess:\r\n  saver.save(sess, 'path/to/save')\r\n\r\nthat would generate very large metagraph binary file, when i try to restore the model, it would failed because of the meta graph file size exceed  the protobuf limit size.\r\n\r\n\r\nI cannot reduce the size of x_nparray, because it's generated by other training system like caffe. \r\n\r\n### What other attempted solutions have you tried?\r\nset bigger limit byte of protobuf, however, the x_nparray is bigger than 3G, while the largest limit i can set is 2G. \r\n"}
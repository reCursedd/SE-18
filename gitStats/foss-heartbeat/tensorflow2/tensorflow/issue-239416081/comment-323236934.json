{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/323236934", "html_url": "https://github.com/tensorflow/tensorflow/issues/11135#issuecomment-323236934", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11135", "id": 323236934, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzIzNjkzNA==", "user": {"login": "ASvyatkovskiy", "id": 4876874, "node_id": "MDQ6VXNlcjQ4NzY4NzQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/4876874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ASvyatkovskiy", "html_url": "https://github.com/ASvyatkovskiy", "followers_url": "https://api.github.com/users/ASvyatkovskiy/followers", "following_url": "https://api.github.com/users/ASvyatkovskiy/following{/other_user}", "gists_url": "https://api.github.com/users/ASvyatkovskiy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ASvyatkovskiy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ASvyatkovskiy/subscriptions", "organizations_url": "https://api.github.com/users/ASvyatkovskiy/orgs", "repos_url": "https://api.github.com/users/ASvyatkovskiy/repos", "events_url": "https://api.github.com/users/ASvyatkovskiy/events{/privacy}", "received_events_url": "https://api.github.com/users/ASvyatkovskiy/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-18T01:37:05Z", "updated_at": "2017-08-18T01:53:17Z", "author_association": "NONE", "body_html": "<p>I am still getting this error in 1.3.0, using example by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=29615768\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/WYF-Learning\">@WYF-Learning</a>: [1]</p>\n<p>I have compared the argument list of <code>rnn</code> in <code>keras.backend.tensorflow_backend</code> <a href=\"https://github.com/fchollet/keras/blob/7c7d73530c1ab1b47f9fb5f0612ec13fef1a26c6/keras/backend/tensorflow_backend.py#L2316\">https://github.com/fchollet/keras/blob/7c7d73530c1ab1b47f9fb5f0612ec13fef1a26c6/keras/backend/tensorflow_backend.py#L2316</a></p>\n<p>and in <code>tensorflow.contrib.keras.python.keras.backend</code> <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/keras/python/keras/backend.py#L2471\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/keras/python/keras/backend.py#L2471</a></p>\n<p>the latter does not have <code>input_length</code>, which in Keras is marked as not relevant for Tensorflow backend,<br>\nbut it still present in the call to <code>rnn</code> in the <code>tensorflow.contrib.keras.python.keras.layers.wrappers</code> <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/keras/python/keras/layers/wrappers.py#L203\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/keras/python/keras/layers/wrappers.py#L203</a></p>\n<p>removing fixes it:</p>\n<div class=\"highlight highlight-source-python\"><pre>      _, outputs, _ <span class=\"pl-k\">=</span> K.rnn(\n          step,\n          inputs,\n          <span class=\"pl-v\">initial_states</span><span class=\"pl-k\">=</span>[],\n          <span class=\"pl-c\"><span class=\"pl-c\">#</span>input_length=input_shape[1],</span>\n          <span class=\"pl-v\">unroll</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>)\n      y <span class=\"pl-k\">=</span> outputs\n    <span class=\"pl-k\">else</span>:</pre></div>\n<p>[1]</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ python\nPython 3.6.2 <span class=\"pl-k\">|</span>Continuum Analytics, Inc.<span class=\"pl-k\">|</span> (default, Jul 20 2017, 13:51:32) \n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux\nType <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>help<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>copyright<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>credits<span class=\"pl-pds\">\"</span></span> or <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>license<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">for</span> more information.\n&gt;&gt;&gt; import tensorflow as tf\n&gt;&gt;&gt; tf.__version__\n<span class=\"pl-s\"><span class=\"pl-pds\">'</span>1.3.0<span class=\"pl-pds\">'</span></span>\n&gt;&gt;&gt; \n&gt;&gt;&gt; from tensorflow.contrib.keras.python.keras.layers.wrappers import TimeDistributed\n&gt;&gt;&gt; from tensorflow.contrib.keras import layers as KL\n&gt;&gt;&gt; x = KL.Input(batch_shape=[1,5,64,64,3])\n&gt;&gt;&gt; y = TimeDistributed(KL.Conv2D(16, kernel_size=[3,3], padding=<span class=\"pl-s\"><span class=\"pl-pds\">'</span>same<span class=\"pl-pds\">'</span></span>, activation=<span class=\"pl-s\"><span class=\"pl-pds\">'</span>relu<span class=\"pl-pds\">'</span></span>))(x)\nTraceback (most recent call last):\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>&lt;stdin&gt;<span class=\"pl-pds\">\"</span></span>, line 1, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/alexeys/.local/lib/python3.6/site-packages/tensorflow/contrib/keras/python/keras/engine/topology.py<span class=\"pl-pds\">\"</span></span>, line 396, <span class=\"pl-k\">in</span> __call__\n    output = super(Layer, self).__call__(inputs, <span class=\"pl-k\">**</span>kwargs)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/alexeys/.local/lib/python3.6/site-packages/tensorflow/python/layers/base.py<span class=\"pl-pds\">\"</span></span>, line 450, <span class=\"pl-k\">in</span> __call__\n    outputs = self.call(inputs, <span class=\"pl-k\">*</span>args, <span class=\"pl-k\">**</span>kwargs)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/alexeys/.local/lib/python3.6/site-packages/tensorflow/contrib/keras/python/keras/layers/wrappers.py<span class=\"pl-pds\">\"</span></span>, line 208, <span class=\"pl-k\">in</span> call\n    unroll=False)\nTypeError: <span class=\"pl-en\">rnn</span>() got an unexpected keyword argument <span class=\"pl-s\"><span class=\"pl-pds\">'</span>input_length<span class=\"pl-pds\">'</span></span></pre></div>", "body_text": "I am still getting this error in 1.3.0, using example by @WYF-Learning: [1]\nI have compared the argument list of rnn in keras.backend.tensorflow_backend https://github.com/fchollet/keras/blob/7c7d73530c1ab1b47f9fb5f0612ec13fef1a26c6/keras/backend/tensorflow_backend.py#L2316\nand in tensorflow.contrib.keras.python.keras.backend https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/keras/python/keras/backend.py#L2471\nthe latter does not have input_length, which in Keras is marked as not relevant for Tensorflow backend,\nbut it still present in the call to rnn in the tensorflow.contrib.keras.python.keras.layers.wrappers https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/keras/python/keras/layers/wrappers.py#L203\nremoving fixes it:\n      _, outputs, _ = K.rnn(\n          step,\n          inputs,\n          initial_states=[],\n          #input_length=input_shape[1],\n          unroll=False)\n      y = outputs\n    else:\n[1]\n$ python\nPython 3.6.2 |Continuum Analytics, Inc.| (default, Jul 20 2017, 13:51:32) \n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import tensorflow as tf\n>>> tf.__version__\n'1.3.0'\n>>> \n>>> from tensorflow.contrib.keras.python.keras.layers.wrappers import TimeDistributed\n>>> from tensorflow.contrib.keras import layers as KL\n>>> x = KL.Input(batch_shape=[1,5,64,64,3])\n>>> y = TimeDistributed(KL.Conv2D(16, kernel_size=[3,3], padding='same', activation='relu'))(x)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/alexeys/.local/lib/python3.6/site-packages/tensorflow/contrib/keras/python/keras/engine/topology.py\", line 396, in __call__\n    output = super(Layer, self).__call__(inputs, **kwargs)\n  File \"/home/alexeys/.local/lib/python3.6/site-packages/tensorflow/python/layers/base.py\", line 450, in __call__\n    outputs = self.call(inputs, *args, **kwargs)\n  File \"/home/alexeys/.local/lib/python3.6/site-packages/tensorflow/contrib/keras/python/keras/layers/wrappers.py\", line 208, in call\n    unroll=False)\nTypeError: rnn() got an unexpected keyword argument 'input_length'", "body": "I am still getting this error in 1.3.0, using example by @WYF-Learning: [1]\r\n\r\nI have compared the argument list of `rnn` in `keras.backend.tensorflow_backend` https://github.com/fchollet/keras/blob/7c7d73530c1ab1b47f9fb5f0612ec13fef1a26c6/keras/backend/tensorflow_backend.py#L2316\r\n\r\nand in `tensorflow.contrib.keras.python.keras.backend` https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/keras/python/keras/backend.py#L2471\r\n\r\nthe latter does not have `input_length`, which in Keras is marked as not relevant for Tensorflow backend,\r\nbut it still present in the call to `rnn` in the `tensorflow.contrib.keras.python.keras.layers.wrappers` https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/keras/python/keras/layers/wrappers.py#L203\r\n\r\nremoving fixes it:\r\n\r\n```python\r\n      _, outputs, _ = K.rnn(\r\n          step,\r\n          inputs,\r\n          initial_states=[],\r\n          #input_length=input_shape[1],\r\n          unroll=False)\r\n      y = outputs\r\n    else:\r\n```\r\n\r\n[1]\r\n```bash\r\n$ python\r\nPython 3.6.2 |Continuum Analytics, Inc.| (default, Jul 20 2017, 13:51:32) \r\n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import tensorflow as tf\r\n>>> tf.__version__\r\n'1.3.0'\r\n>>> \r\n>>> from tensorflow.contrib.keras.python.keras.layers.wrappers import TimeDistributed\r\n>>> from tensorflow.contrib.keras import layers as KL\r\n>>> x = KL.Input(batch_shape=[1,5,64,64,3])\r\n>>> y = TimeDistributed(KL.Conv2D(16, kernel_size=[3,3], padding='same', activation='relu'))(x)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/alexeys/.local/lib/python3.6/site-packages/tensorflow/contrib/keras/python/keras/engine/topology.py\", line 396, in __call__\r\n    output = super(Layer, self).__call__(inputs, **kwargs)\r\n  File \"/home/alexeys/.local/lib/python3.6/site-packages/tensorflow/python/layers/base.py\", line 450, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"/home/alexeys/.local/lib/python3.6/site-packages/tensorflow/contrib/keras/python/keras/layers/wrappers.py\", line 208, in call\r\n    unroll=False)\r\nTypeError: rnn() got an unexpected keyword argument 'input_length'\r\n```"}
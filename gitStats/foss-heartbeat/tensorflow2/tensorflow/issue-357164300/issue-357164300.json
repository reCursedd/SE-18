{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22089", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22089/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22089/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22089/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22089", "id": 357164300, "node_id": "MDU6SXNzdWUzNTcxNjQzMDA=", "number": 22089, "title": "ResourceExhaustedError", "user": {"login": "ajaysh2193", "id": 24571705, "node_id": "MDQ6VXNlcjI0NTcxNzA1", "avatar_url": "https://avatars0.githubusercontent.com/u/24571705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajaysh2193", "html_url": "https://github.com/ajaysh2193", "followers_url": "https://api.github.com/users/ajaysh2193/followers", "following_url": "https://api.github.com/users/ajaysh2193/following{/other_user}", "gists_url": "https://api.github.com/users/ajaysh2193/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajaysh2193/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajaysh2193/subscriptions", "organizations_url": "https://api.github.com/users/ajaysh2193/orgs", "repos_url": "https://api.github.com/users/ajaysh2193/repos", "events_url": "https://api.github.com/users/ajaysh2193/events{/privacy}", "received_events_url": "https://api.github.com/users/ajaysh2193/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-09-05T10:26:30Z", "updated_at": "2018-11-20T13:30:54Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>Hi, I have trained CNN model on overall 3021 images (train data) which belongs to 9 classes (labeled data). I have 453 test images to verify my model predictions. My training model built fine with no issues (~95% accuracy) but while I am predicting it on test data, after running on some 40-45 images(also printing their predictions), it does not able to load and process further data/images to make prediction and shows below error.<br>\nI have tried reducing the batch size, but problems still persist.</p>\n<p>Error:<br>\nResourceExhaustedError: OOM when allocating tensor with shape[64,64,3,3] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc<br>\n[[Node: block1_conv2_77/convolution = Conv2D[T=DT_FLOAT, data_format=\"NCHW\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](block1_conv1_77/Relu, block1_conv2_77/kernel/read)]]<br>\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.</p>\n<hr>\n<p>For the reference, I am attaching my source code(please check model.zip for code) and error screenshot and I am using Tensorflow  1.10.0  with Python 3.6.5</p>\n<p>Note: My system configuration -<br>\nIntel i7, 32GB RAM, NVIDIA 1080 GPU, Windows 10.<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/24571705/45087543-e5ab9880-b123-11e8-9bae-ebaa1cda965c.png\"><img src=\"https://user-images.githubusercontent.com/24571705/45087543-e5ab9880-b123-11e8-9bae-ebaa1cda965c.png\" alt=\"error\" style=\"max-width:100%;\"></a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/24571705/45087544-e6442f00-b123-11e8-9a13-11ea42f5c0b6.PNG\"><img src=\"https://user-images.githubusercontent.com/24571705/45087544-e6442f00-b123-11e8-9a13-11ea42f5c0b6.PNG\" alt=\"gpu\" style=\"max-width:100%;\"></a></p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/2352317/model.zip\">model.zip</a></p>\n<hr>\n<p>Regards,<br>\nAjay Sharma</p>", "body_text": "Hi, I have trained CNN model on overall 3021 images (train data) which belongs to 9 classes (labeled data). I have 453 test images to verify my model predictions. My training model built fine with no issues (~95% accuracy) but while I am predicting it on test data, after running on some 40-45 images(also printing their predictions), it does not able to load and process further data/images to make prediction and shows below error.\nI have tried reducing the batch size, but problems still persist.\nError:\nResourceExhaustedError: OOM when allocating tensor with shape[64,64,3,3] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc\n[[Node: block1_conv2_77/convolution = Conv2D[T=DT_FLOAT, data_format=\"NCHW\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](block1_conv1_77/Relu, block1_conv2_77/kernel/read)]]\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\n\nFor the reference, I am attaching my source code(please check model.zip for code) and error screenshot and I am using Tensorflow  1.10.0  with Python 3.6.5\nNote: My system configuration -\nIntel i7, 32GB RAM, NVIDIA 1080 GPU, Windows 10.\n\n\nmodel.zip\n\nRegards,\nAjay Sharma", "body": "Hi, I have trained CNN model on overall 3021 images (train data) which belongs to 9 classes (labeled data). I have 453 test images to verify my model predictions. My training model built fine with no issues (~95% accuracy) but while I am predicting it on test data, after running on some 40-45 images(also printing their predictions), it does not able to load and process further data/images to make prediction and shows below error.\r\nI have tried reducing the batch size, but problems still persist.\r\n\r\n\r\nError:\r\nResourceExhaustedError: OOM when allocating tensor with shape[64,64,3,3] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc\r\n\t [[Node: block1_conv2_77/convolution = Conv2D[T=DT_FLOAT, data_format=\"NCHW\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](block1_conv1_77/Relu, block1_conv2_77/kernel/read)]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n*****************************************************************\r\n\r\n\r\nFor the reference, I am attaching my source code(please check model.zip for code) and error screenshot and I am using Tensorflow  1.10.0  with Python 3.6.5\r\n\r\n\r\nNote: My system configuration -\r\nIntel i7, 32GB RAM, NVIDIA 1080 GPU, Windows 10.\r\n![error](https://user-images.githubusercontent.com/24571705/45087543-e5ab9880-b123-11e8-9bae-ebaa1cda965c.png)\r\n![gpu](https://user-images.githubusercontent.com/24571705/45087544-e6442f00-b123-11e8-9a13-11ea42f5c0b6.PNG)\r\n\r\n\r\n\r\n[model.zip](https://github.com/tensorflow/tensorflow/files/2352317/model.zip)\r\n\r\n\r\n\r\n-----\r\nRegards,\r\nAjay Sharma\r\n"}
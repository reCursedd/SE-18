{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/210095197", "pull_request_review_id": 146241472, "id": 210095197, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMDA5NTE5Nw==", "diff_hunk": "@@ -297,10 +305,6 @@ class MklDnnConvUtil {\n     // Now handle padding. MKL-DNN uses asymetric padding.", "path": "tensorflow/core/kernels/mkl_conv_ops.h", "position": null, "original_position": 16, "commit_id": "48809b87793882266f01b7b40bc9e4a6e0f18f57", "original_commit_id": "7f94025fe72369117bf32d69156f0bd947402c96", "user": {"login": "ashraf-bhuiyan", "id": 8062406, "node_id": "MDQ6VXNlcjgwNjI0MDY=", "avatar_url": "https://avatars2.githubusercontent.com/u/8062406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashraf-bhuiyan", "html_url": "https://github.com/ashraf-bhuiyan", "followers_url": "https://api.github.com/users/ashraf-bhuiyan/followers", "following_url": "https://api.github.com/users/ashraf-bhuiyan/following{/other_user}", "gists_url": "https://api.github.com/users/ashraf-bhuiyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashraf-bhuiyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashraf-bhuiyan/subscriptions", "organizations_url": "https://api.github.com/users/ashraf-bhuiyan/orgs", "repos_url": "https://api.github.com/users/ashraf-bhuiyan/repos", "events_url": "https://api.github.com/users/ashraf-bhuiyan/events{/privacy}", "received_events_url": "https://api.github.com/users/ashraf-bhuiyan/received_events", "type": "User", "site_admin": false}, "body": "Thank for the suggestion of removing the duplicate edge.\r\nI took the 1st suggestion.\r\nI think with small change we can achieve this. We can have the following : \r\n  for (const Edge* e : pred->in_edges()) {\r\n    if (e->IsControlEdge()) {\r\n      //Don't allow duplicate edge\r\n      (*g)->AddControlEdge(e->src(), new_node, false);\r\n    }    \r\n  }\r\nHere, if duplicate edge is found, then it will return nullptr, otherwise it will add the edge.\r\n\r\nThe addControlEdge is in : https://github.com/tensorflow/tensorflow/blob/01267485b63d440eb9f3b4061d8e8ceaad5bca79/tensorflow/core/graph/graph.cc#L454 \r\n\r\nAnd the AddEdge is in : https://github.com/tensorflow/tensorflow/blob/425b62a344f18c875f6f024b36ae37749cb00feb/tensorflow/core/graph/graph.cc#L403\r\n\r\nPlease let me know if this looks ok or not.", "created_at": "2018-08-14T20:37:51Z", "updated_at": "2018-11-23T19:46:17Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/21318#discussion_r210095197", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21318", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/210095197"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/21318#discussion_r210095197"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21318"}}, "body_html": "<p>Thank for the suggestion of removing the duplicate edge.<br>\nI took the 1st suggestion.<br>\nI think with small change we can achieve this. We can have the following :<br>\nfor (const Edge* e : pred-&gt;in_edges()) {<br>\nif (e-&gt;IsControlEdge()) {<br>\n//Don't allow duplicate edge<br>\n(*g)-&gt;AddControlEdge(e-&gt;src(), new_node, false);<br>\n}<br>\n}<br>\nHere, if duplicate edge is found, then it will return nullptr, otherwise it will add the edge.</p>\n<p>The addControlEdge is in : <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/01267485b63d440eb9f3b4061d8e8ceaad5bca79/tensorflow/core/graph/graph.cc#L454\">tensorflow/tensorflow/core/graph/graph.cc</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 454\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/01267485b63d440eb9f3b4061d8e8ceaad5bca79\">0126748</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L454\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"454\"></td>\n          <td id=\"LC454\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-k\">const</span> Edge* <span class=\"pl-en\">Graph::AddControlEdge</span>(Node* source, Node* dest, </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>And the AddEdge is in : <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/425b62a344f18c875f6f024b36ae37749cb00feb/tensorflow/core/graph/graph.cc#L403\">tensorflow/tensorflow/core/graph/graph.cc</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 403\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/425b62a344f18c875f6f024b36ae37749cb00feb\">425b62a</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L403\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"403\"></td>\n          <td id=\"LC403\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-k\">const</span> Edge* <span class=\"pl-en\">Graph::AddEdge</span>(Node* source, <span class=\"pl-k\">int</span> x, Node* dest, <span class=\"pl-k\">int</span> y) { </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>Please let me know if this looks ok or not.</p>", "body_text": "Thank for the suggestion of removing the duplicate edge.\nI took the 1st suggestion.\nI think with small change we can achieve this. We can have the following :\nfor (const Edge* e : pred->in_edges()) {\nif (e->IsControlEdge()) {\n//Don't allow duplicate edge\n(*g)->AddControlEdge(e->src(), new_node, false);\n}\n}\nHere, if duplicate edge is found, then it will return nullptr, otherwise it will add the edge.\nThe addControlEdge is in : \n  \n    \n      tensorflow/tensorflow/core/graph/graph.cc\n    \n    \n         Line 454\n      in\n      0126748\n    \n    \n    \n    \n\n        \n          \n           const Edge* Graph::AddControlEdge(Node* source, Node* dest, \n        \n    \n  \n\n\nAnd the AddEdge is in : \n  \n    \n      tensorflow/tensorflow/core/graph/graph.cc\n    \n    \n         Line 403\n      in\n      425b62a\n    \n    \n    \n    \n\n        \n          \n           const Edge* Graph::AddEdge(Node* source, int x, Node* dest, int y) { \n        \n    \n  \n\n\nPlease let me know if this looks ok or not.", "in_reply_to_id": 209740152}
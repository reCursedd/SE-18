{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3154", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3154/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3154/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3154/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3154", "id": 163472346, "node_id": "MDU6SXNzdWUxNjM0NzIzNDY=", "number": 3154, "title": "can't enable --config=cuda", "user": {"login": "zhangwei0119", "id": 12144486, "node_id": "MDQ6VXNlcjEyMTQ0NDg2", "avatar_url": "https://avatars0.githubusercontent.com/u/12144486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangwei0119", "html_url": "https://github.com/zhangwei0119", "followers_url": "https://api.github.com/users/zhangwei0119/followers", "following_url": "https://api.github.com/users/zhangwei0119/following{/other_user}", "gists_url": "https://api.github.com/users/zhangwei0119/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangwei0119/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangwei0119/subscriptions", "organizations_url": "https://api.github.com/users/zhangwei0119/orgs", "repos_url": "https://api.github.com/users/zhangwei0119/repos", "events_url": "https://api.github.com/users/zhangwei0119/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangwei0119/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-07-01T20:53:22Z", "updated_at": "2016-07-15T18:24:50Z", "closed_at": "2016-07-15T18:24:50Z", "author_association": "NONE", "body_html": "<p>I successfully built tensorflow 0.9.0 with bazel 0.3.0 on Redhat Enterprices 6.6 without cuda support.</p>\n<h3>but when I enable --config=cuda, the build process stopped at linking '@protobuf//:protoc'</h3>\n<p>I suspected some settings associate with both cuda and python are incorrect (from the highlighted error logs) but have no idea how to reconfigure. Can you please help to find the problem?  I am using python2.7.11 from anaconda2</p>\n<p>Thanks,<br>\n-Wei</p>\n<p>$ bazel build --config=cuda @protobuf//:protoc --verbose_failures --keep_going<br>\nWARNING: /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/external/protobuf/WORKSPACE:1: Workspace name in /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/external/protobuf/WORKSPACE (@<strong>main</strong>) does not match the name given in the repository's definition (<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=30293029\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/protobuf\">@protobuf</a>); this will cause a build error in future versions.<br>\nINFO: Found 1 target...<br>\nERROR: /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/external/protobuf/BUILD:331:1: Couldn't build file external/protobuf/protoc: Linking of rule '@protobuf//:protoc' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command<br>\n(cd /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/execroot/tensorflow.gpu &amp;&amp; <br>\nexec env - <br>\nthird_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/local_linux-fastbuild/bin/external/protobuf/protoc bazel-out/local_linux-fastbuild/bin/external/protobuf/_objs/protoc/external/protobuf/src/google/protobuf/compiler/main.pic.o bazel-out/local_linux-fastbuild/bin/external/protobuf/libprotoc_lib.a bazel-out/local_linux-fastbuild/bin/external/protobuf/libprotobuf.a bazel-out/local_linux-fastbuild/bin/external/protobuf/libprotobuf_lite.a -lpthread -lstdc++ -B/usr/local/bin/ -pie -fPIC -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,-S): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.</p>\n<h3>Could not find platform independent libraries </h3>\n<h3>Could not find platform dependent libraries &lt;exec_prefix&gt;</h3>\n<h3>Consider setting $PYTHONHOME to [:&lt;exec_prefix&gt;]</h3>\n<h3>ImportError: No module named site</h3>\n<p>Target @protobuf//:protoc failed to build<br>\nINFO: Elapsed time: 0.354s, Critical Path: 0.01s</p>", "body_text": "I successfully built tensorflow 0.9.0 with bazel 0.3.0 on Redhat Enterprices 6.6 without cuda support.\nbut when I enable --config=cuda, the build process stopped at linking '@protobuf//:protoc'\nI suspected some settings associate with both cuda and python are incorrect (from the highlighted error logs) but have no idea how to reconfigure. Can you please help to find the problem?  I am using python2.7.11 from anaconda2\nThanks,\n-Wei\n$ bazel build --config=cuda @protobuf//:protoc --verbose_failures --keep_going\nWARNING: /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/external/protobuf/WORKSPACE:1: Workspace name in /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/external/protobuf/WORKSPACE (@main) does not match the name given in the repository's definition (@protobuf); this will cause a build error in future versions.\nINFO: Found 1 target...\nERROR: /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/external/protobuf/BUILD:331:1: Couldn't build file external/protobuf/protoc: Linking of rule '@protobuf//:protoc' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command\n(cd /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/execroot/tensorflow.gpu && \nexec env - \nthird_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/local_linux-fastbuild/bin/external/protobuf/protoc bazel-out/local_linux-fastbuild/bin/external/protobuf/_objs/protoc/external/protobuf/src/google/protobuf/compiler/main.pic.o bazel-out/local_linux-fastbuild/bin/external/protobuf/libprotoc_lib.a bazel-out/local_linux-fastbuild/bin/external/protobuf/libprotobuf.a bazel-out/local_linux-fastbuild/bin/external/protobuf/libprotobuf_lite.a -lpthread -lstdc++ -B/usr/local/bin/ -pie -fPIC -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,-S): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nCould not find platform independent libraries \nCould not find platform dependent libraries <exec_prefix>\nConsider setting $PYTHONHOME to [:<exec_prefix>]\nImportError: No module named site\nTarget @protobuf//:protoc failed to build\nINFO: Elapsed time: 0.354s, Critical Path: 0.01s", "body": "I successfully built tensorflow 0.9.0 with bazel 0.3.0 on Redhat Enterprices 6.6 without cuda support. \n### but when I enable --config=cuda, the build process stopped at linking '@protobuf//:protoc'\n\nI suspected some settings associate with both cuda and python are incorrect (from the highlighted error logs) but have no idea how to reconfigure. Can you please help to find the problem?  I am using python2.7.11 from anaconda2\n\nThanks,\n-Wei\n\n$ bazel build --config=cuda @protobuf//:protoc --verbose_failures --keep_going\nWARNING: /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/external/protobuf/WORKSPACE:1: Workspace name in /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/external/protobuf/WORKSPACE (@__main__) does not match the name given in the repository's definition (@protobuf); this will cause a build error in future versions.\nINFO: Found 1 target...\nERROR: /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/external/protobuf/BUILD:331:1: Couldn't build file external/protobuf/protoc: Linking of rule '@protobuf//:protoc' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command\n  (cd /root/.cache/bazel/_bazel_root/33ff58ac202e7ac02dc3ff3533effc70/execroot/tensorflow.gpu && \\\n  exec env - \\\n  third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/local_linux-fastbuild/bin/external/protobuf/protoc bazel-out/local_linux-fastbuild/bin/external/protobuf/_objs/protoc/external/protobuf/src/google/protobuf/compiler/main.pic.o bazel-out/local_linux-fastbuild/bin/external/protobuf/libprotoc_lib.a bazel-out/local_linux-fastbuild/bin/external/protobuf/libprotobuf.a bazel-out/local_linux-fastbuild/bin/external/protobuf/libprotobuf_lite.a -lpthread -lstdc++ -B/usr/local/bin/ -pie -fPIC -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,-S): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n### Could not find platform independent libraries <prefix>\n### Could not find platform dependent libraries <exec_prefix>\n### Consider setting $PYTHONHOME to <prefix>[:<exec_prefix>]\n### ImportError: No module named site\n\nTarget @protobuf//:protoc failed to build\nINFO: Elapsed time: 0.354s, Critical Path: 0.01s\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/275574011", "html_url": "https://github.com/tensorflow/tensorflow/issues/6687#issuecomment-275574011", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6687", "id": 275574011, "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTU3NDAxMQ==", "user": {"login": "darshanmaiya", "id": 3997166, "node_id": "MDQ6VXNlcjM5OTcxNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/3997166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darshanmaiya", "html_url": "https://github.com/darshanmaiya", "followers_url": "https://api.github.com/users/darshanmaiya/followers", "following_url": "https://api.github.com/users/darshanmaiya/following{/other_user}", "gists_url": "https://api.github.com/users/darshanmaiya/gists{/gist_id}", "starred_url": "https://api.github.com/users/darshanmaiya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darshanmaiya/subscriptions", "organizations_url": "https://api.github.com/users/darshanmaiya/orgs", "repos_url": "https://api.github.com/users/darshanmaiya/repos", "events_url": "https://api.github.com/users/darshanmaiya/events{/privacy}", "received_events_url": "https://api.github.com/users/darshanmaiya/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-27T02:22:38Z", "updated_at": "2017-01-27T02:22:38Z", "author_association": "NONE", "body_html": "<p>I'm facing the same issue when trying to use the same example from <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/dist_test/python/mnist_replica.py\">here</a>.</p>\n<p>Asynchronous works but setting sync_replicas to True results in the same error like this:</p>\n<pre><code>Traceback (most recent call last):\n  File \"mnist_replica.py\", line 293, in &lt;module&gt;\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"mnist_replica.py\", line 195, in main\n    train_step = opt.minimize(cross_entropy, global_step=global_step)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 279, in minimize\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/sync_replicas_optimizer.py\", line 751, in apply_gradients\n    array_ops.reshape(self._replica_id, (1,)),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 2448, in reshape\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 503, in apply_op\n    as_ref=input_arg.is_ref).dtype.name\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 669, in convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function\n    return constant(v, dtype=dtype, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/constant_op.py\", line 165, in constant\n    tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_util.py\", line 360, in make_tensor_proto\n    raise ValueError(\"None values not supported.\")\nValueError: None values not supported.\n</code></pre>\n<p>I am running in CPU only mode on Ubuntu 16.04 with tensorflow 0.12.1 and Python 2.7.12. I'm facing the same issue with Python3 as well as on Ubuntu 14.04.</p>", "body_text": "I'm facing the same issue when trying to use the same example from here.\nAsynchronous works but setting sync_replicas to True results in the same error like this:\nTraceback (most recent call last):\n  File \"mnist_replica.py\", line 293, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"mnist_replica.py\", line 195, in main\n    train_step = opt.minimize(cross_entropy, global_step=global_step)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 279, in minimize\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/sync_replicas_optimizer.py\", line 751, in apply_gradients\n    array_ops.reshape(self._replica_id, (1,)),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 2448, in reshape\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 503, in apply_op\n    as_ref=input_arg.is_ref).dtype.name\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 669, in convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function\n    return constant(v, dtype=dtype, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/constant_op.py\", line 165, in constant\n    tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_util.py\", line 360, in make_tensor_proto\n    raise ValueError(\"None values not supported.\")\nValueError: None values not supported.\n\nI am running in CPU only mode on Ubuntu 16.04 with tensorflow 0.12.1 and Python 2.7.12. I'm facing the same issue with Python3 as well as on Ubuntu 14.04.", "body": "I'm facing the same issue when trying to use the same example from [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/dist_test/python/mnist_replica.py).\r\n\r\nAsynchronous works but setting sync_replicas to True results in the same error like this:\r\n```\r\nTraceback (most recent call last):\r\n  File \"mnist_replica.py\", line 293, in <module>\r\n    tf.app.run()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"mnist_replica.py\", line 195, in main\r\n    train_step = opt.minimize(cross_entropy, global_step=global_step)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 279, in minimize\r\n    name=name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/sync_replicas_optimizer.py\", line 751, in apply_gradients\r\n    array_ops.reshape(self._replica_id, (1,)),\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 2448, in reshape\r\n    name=name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 503, in apply_op\r\n    as_ref=input_arg.is_ref).dtype.name\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 669, in convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function\r\n    return constant(v, dtype=dtype, name=name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/constant_op.py\", line 165, in constant\r\n    tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_util.py\", line 360, in make_tensor_proto\r\n    raise ValueError(\"None values not supported.\")\r\nValueError: None values not supported.\r\n```\r\n\r\nI am running in CPU only mode on Ubuntu 16.04 with tensorflow 0.12.1 and Python 2.7.12. I'm facing the same issue with Python3 as well as on Ubuntu 14.04."}
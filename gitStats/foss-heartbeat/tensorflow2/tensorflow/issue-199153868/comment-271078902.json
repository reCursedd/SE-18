{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/271078902", "html_url": "https://github.com/tensorflow/tensorflow/issues/6687#issuecomment-271078902", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6687", "id": 271078902, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MTA3ODkwMg==", "user": {"login": "infwinston", "id": 1206058, "node_id": "MDQ6VXNlcjEyMDYwNTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1206058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infwinston", "html_url": "https://github.com/infwinston", "followers_url": "https://api.github.com/users/infwinston/followers", "following_url": "https://api.github.com/users/infwinston/following{/other_user}", "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}", "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions", "organizations_url": "https://api.github.com/users/infwinston/orgs", "repos_url": "https://api.github.com/users/infwinston/repos", "events_url": "https://api.github.com/users/infwinston/events{/privacy}", "received_events_url": "https://api.github.com/users/infwinston/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-07T11:45:18Z", "updated_at": "2017-01-07T11:46:02Z", "author_association": "NONE", "body_html": "<p>Thanks for your quick reply.<br>\nEarlier I used the 0.12.1 version with gpu support which was built by myself (since my cuda version is 7.5).</p>\n<p>To make the situation simple, I tried to use the pre-built CPU version by the following instructions</p>\n<pre><code>source vir-tf/bin/activate\nexport TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.12.1-cp27-none-linux_x86_64.whl\npip install --ignore-installed --upgrade $TF_BINARY_URL\n</code></pre>\n<p>and then ran</p>\n<pre><code>export CUDA_VISIBLE_DEVICES=0; python mnist_replica.py --ps_hosts=\"localhost:50000\" --worker_hosts=\"localhost:50001\" --job_name=\"worker\" --task_index=0 --num_gpus=1 --train_steps=100 --sync_replicas=True\n</code></pre>\n<p>Unfortunately, the same error occurred.</p>\n<pre><code>I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:211] Started server with target: grpc://localhost:50001\nTraceback (most recent call last):\n  File \"mnist_replica.py\", line 281, in &lt;module&gt;\n    tf.app.run()\n  File \"local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"mnist_replica.py\", line 186, in main\n    train_step = opt.minimize(cross_entropy, global_step=global_step)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 279, in minimize\n    name=name)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/training/sync_replicas_optimizer.py\", line 751, in apply_gradients\n    array_ops.reshape(self._replica_id, (1,)),\n  File \"local/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 2448, in reshape\n    name=name)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 503, in apply_op\n    as_ref=input_arg.is_ref).dtype.name\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 669, in convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function\n    return constant(v, dtype=dtype, name=name)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 165, in constant\n    tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.py\", line 360, in make_tensor_proto\n    raise ValueError(\"None values not supported.\")\nValueError: None values not supported.\n</code></pre>\n<p>However, when I did the same things on another machine, it turns out to behave normal...</p>\n<p>Now I have no ideas why it failed on a specific machine...<br>\nI also found that someone faced similar errors <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"164134830\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3208\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3208/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/3208\">#3208</a> but under different situations.<br>\nWhat do you think of the possible reasons that cause the errors?<br>\nThanks.</p>", "body_text": "Thanks for your quick reply.\nEarlier I used the 0.12.1 version with gpu support which was built by myself (since my cuda version is 7.5).\nTo make the situation simple, I tried to use the pre-built CPU version by the following instructions\nsource vir-tf/bin/activate\nexport TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.12.1-cp27-none-linux_x86_64.whl\npip install --ignore-installed --upgrade $TF_BINARY_URL\n\nand then ran\nexport CUDA_VISIBLE_DEVICES=0; python mnist_replica.py --ps_hosts=\"localhost:50000\" --worker_hosts=\"localhost:50001\" --job_name=\"worker\" --task_index=0 --num_gpus=1 --train_steps=100 --sync_replicas=True\n\nUnfortunately, the same error occurred.\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:211] Started server with target: grpc://localhost:50001\nTraceback (most recent call last):\n  File \"mnist_replica.py\", line 281, in <module>\n    tf.app.run()\n  File \"local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"mnist_replica.py\", line 186, in main\n    train_step = opt.minimize(cross_entropy, global_step=global_step)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 279, in minimize\n    name=name)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/training/sync_replicas_optimizer.py\", line 751, in apply_gradients\n    array_ops.reshape(self._replica_id, (1,)),\n  File \"local/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 2448, in reshape\n    name=name)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 503, in apply_op\n    as_ref=input_arg.is_ref).dtype.name\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 669, in convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function\n    return constant(v, dtype=dtype, name=name)\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 165, in constant\n    tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.py\", line 360, in make_tensor_proto\n    raise ValueError(\"None values not supported.\")\nValueError: None values not supported.\n\nHowever, when I did the same things on another machine, it turns out to behave normal...\nNow I have no ideas why it failed on a specific machine...\nI also found that someone faced similar errors #3208 but under different situations.\nWhat do you think of the possible reasons that cause the errors?\nThanks.", "body": "Thanks for your quick reply.\r\nEarlier I used the 0.12.1 version with gpu support which was built by myself (since my cuda version is 7.5).\r\n\r\nTo make the situation simple, I tried to use the pre-built CPU version by the following instructions\r\n```\r\nsource vir-tf/bin/activate\r\nexport TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.12.1-cp27-none-linux_x86_64.whl\r\npip install --ignore-installed --upgrade $TF_BINARY_URL\r\n```\r\nand then ran\r\n```\r\nexport CUDA_VISIBLE_DEVICES=0; python mnist_replica.py --ps_hosts=\"localhost:50000\" --worker_hosts=\"localhost:50001\" --job_name=\"worker\" --task_index=0 --num_gpus=1 --train_steps=100 --sync_replicas=True\r\n```\r\nUnfortunately, the same error occurred.\r\n```\r\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:211] Started server with target: grpc://localhost:50001\r\nTraceback (most recent call last):\r\n  File \"mnist_replica.py\", line 281, in <module>\r\n    tf.app.run()\r\n  File \"local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"mnist_replica.py\", line 186, in main\r\n    train_step = opt.minimize(cross_entropy, global_step=global_step)\r\n  File \"local/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 279, in minimize\r\n    name=name)\r\n  File \"local/lib/python2.7/site-packages/tensorflow/python/training/sync_replicas_optimizer.py\", line 751, in apply_gradients\r\n    array_ops.reshape(self._replica_id, (1,)),\r\n  File \"local/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 2448, in reshape\r\n    name=name)\r\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 503, in apply_op\r\n    as_ref=input_arg.is_ref).dtype.name\r\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 669, in convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function\r\n    return constant(v, dtype=dtype, name=name)\r\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 165, in constant\r\n    tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\r\n  File \"local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.py\", line 360, in make_tensor_proto\r\n    raise ValueError(\"None values not supported.\")\r\nValueError: None values not supported.\r\n```\r\nHowever, when I did the same things on another machine, it turns out to behave normal...\r\n\r\nNow I have no ideas why it failed on a specific machine...\r\nI also found that someone faced similar errors https://github.com/tensorflow/tensorflow/issues/3208 but under different situations.\r\nWhat do you think of the possible reasons that cause the errors?\r\nThanks."}
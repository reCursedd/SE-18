{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/345707998", "html_url": "https://github.com/tensorflow/tensorflow/issues/14655#issuecomment-345707998", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14655", "id": 345707998, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTcwNzk5OA==", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-20T14:17:11Z", "updated_at": "2017-11-20T14:17:11Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Line 16 in your code is <code>out = tf.sigmoid(y_neg - y_pos)</code>. I don't know what you mean by not doing broadcast, since y_neg and y_pos may have different shape. Maybe you can clarify that by providing a modification that makes it work.<br>\nI'm sure gradient can pass your loss function in raw tensorflow, because if you use <code>tf.reduce_mean(out)</code> it can run. Why it does not work in keras is not something I'm able to help. But you can certainly leave it here for others to answer. At least now the problem is more clear.</p>", "body_text": "Line 16 in your code is out = tf.sigmoid(y_neg - y_pos). I don't know what you mean by not doing broadcast, since y_neg and y_pos may have different shape. Maybe you can clarify that by providing a modification that makes it work.\nI'm sure gradient can pass your loss function in raw tensorflow, because if you use tf.reduce_mean(out) it can run. Why it does not work in keras is not something I'm able to help. But you can certainly leave it here for others to answer. At least now the problem is more clear.", "body": "Line 16 in your code is `out = tf.sigmoid(y_neg - y_pos)`. I don't know what you mean by not doing broadcast, since y_neg and y_pos may have different shape. Maybe you can clarify that by providing a modification that makes it work.\r\nI'm sure gradient can pass your loss function in raw tensorflow, because if you use `tf.reduce_mean(out)` it can run. Why it does not work in keras is not something I'm able to help. But you can certainly leave it here for others to answer. At least now the problem is more clear."}
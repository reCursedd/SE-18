{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/396513505", "html_url": "https://github.com/tensorflow/tensorflow/issues/17012#issuecomment-396513505", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17012", "id": 396513505, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjUxMzUwNQ==", "user": {"login": "truokola", "id": 16853218, "node_id": "MDQ6VXNlcjE2ODUzMjE4", "avatar_url": "https://avatars1.githubusercontent.com/u/16853218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/truokola", "html_url": "https://github.com/truokola", "followers_url": "https://api.github.com/users/truokola/followers", "following_url": "https://api.github.com/users/truokola/following{/other_user}", "gists_url": "https://api.github.com/users/truokola/gists{/gist_id}", "starred_url": "https://api.github.com/users/truokola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/truokola/subscriptions", "organizations_url": "https://api.github.com/users/truokola/orgs", "repos_url": "https://api.github.com/users/truokola/repos", "events_url": "https://api.github.com/users/truokola/events{/privacy}", "received_events_url": "https://api.github.com/users/truokola/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-12T08:43:48Z", "updated_at": "2018-06-12T11:40:05Z", "author_association": "NONE", "body_html": "<p>I have both VS2015 and VS2017 installed but I build TF with VS2015 by using <code>cmake -G \"Visual Studio 14 2015 Win64\"</code>. But this setting is not transmitted to the child builds and therefore external projects, including protobuf, are built with VS2017. And in this case the build fails with exactly the error reported here.</p>\n<p>However, if I rename the VS2017 installation directory to some nonsense so that CMake cannot find it, then also the externals use VS2015 and the build succeeds. So apparently this problem arises from mixing two different toolsets.</p>\n<p>Similarly, if you are using the CMake <code>-T</code> switch to select the toolset, this selection does not propagate to the external builds.</p>", "body_text": "I have both VS2015 and VS2017 installed but I build TF with VS2015 by using cmake -G \"Visual Studio 14 2015 Win64\". But this setting is not transmitted to the child builds and therefore external projects, including protobuf, are built with VS2017. And in this case the build fails with exactly the error reported here.\nHowever, if I rename the VS2017 installation directory to some nonsense so that CMake cannot find it, then also the externals use VS2015 and the build succeeds. So apparently this problem arises from mixing two different toolsets.\nSimilarly, if you are using the CMake -T switch to select the toolset, this selection does not propagate to the external builds.", "body": "I have both VS2015 and VS2017 installed but I build TF with VS2015 by using `cmake -G \"Visual Studio 14 2015 Win64\"`. But this setting is not transmitted to the child builds and therefore external projects, including protobuf, are built with VS2017. And in this case the build fails with exactly the error reported here.\r\n\r\nHowever, if I rename the VS2017 installation directory to some nonsense so that CMake cannot find it, then also the externals use VS2015 and the build succeeds. So apparently this problem arises from mixing two different toolsets.\r\n\r\nSimilarly, if you are using the CMake `-T` switch to select the toolset, this selection does not propagate to the external builds."}
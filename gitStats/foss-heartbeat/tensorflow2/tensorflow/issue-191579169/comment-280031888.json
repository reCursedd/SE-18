{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/280031888", "html_url": "https://github.com/tensorflow/tensorflow/issues/5834#issuecomment-280031888", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5834", "id": 280031888, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDAzMTg4OA==", "user": {"login": "hughperkins", "id": 123560, "node_id": "MDQ6VXNlcjEyMzU2MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/123560?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hughperkins", "html_url": "https://github.com/hughperkins", "followers_url": "https://api.github.com/users/hughperkins/followers", "following_url": "https://api.github.com/users/hughperkins/following{/other_user}", "gists_url": "https://api.github.com/users/hughperkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/hughperkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hughperkins/subscriptions", "organizations_url": "https://api.github.com/users/hughperkins/orgs", "repos_url": "https://api.github.com/users/hughperkins/repos", "events_url": "https://api.github.com/users/hughperkins/events{/privacy}", "received_events_url": "https://api.github.com/users/hughperkins/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-15T14:54:36Z", "updated_at": "2017-02-15T14:54:36Z", "author_association": "NONE", "body_html": "<p>I had exactly the same problem, with a custom estimator, and an <code>input_fn</code>, that returns a tensor, and just looping forever.</p>\n<p>The fix turned out to be easy in the end, though whether it should really be necessary is an open question.  Instead of eg:</p>\n<pre><code>for y in estimator.predict(input_fn=...):\n    print('y', y)\n</code></pre>\n<p>or:</p>\n<pre><code>y = list(estimator.predict(input_fn=...))\n</code></pre>\n<p>... use itertools.islice to only retrieve as many predictions as you inputed input data, ie/eg:</p>\n<pre><code>y_generator = estimator.predict(input_fn=...)\ny = list(itertools.islice(y_generator, X.shape[0])\n</code></pre>", "body_text": "I had exactly the same problem, with a custom estimator, and an input_fn, that returns a tensor, and just looping forever.\nThe fix turned out to be easy in the end, though whether it should really be necessary is an open question.  Instead of eg:\nfor y in estimator.predict(input_fn=...):\n    print('y', y)\n\nor:\ny = list(estimator.predict(input_fn=...))\n\n... use itertools.islice to only retrieve as many predictions as you inputed input data, ie/eg:\ny_generator = estimator.predict(input_fn=...)\ny = list(itertools.islice(y_generator, X.shape[0])", "body": "I had exactly the same problem, with a custom estimator, and an `input_fn`, that returns a tensor, and just looping forever.\r\n\r\nThe fix turned out to be easy in the end, though whether it should really be necessary is an open question.  Instead of eg:\r\n\r\n```\r\nfor y in estimator.predict(input_fn=...):\r\n    print('y', y)\r\n```\r\nor:\r\n```\r\ny = list(estimator.predict(input_fn=...))\r\n```\r\n... use itertools.islice to only retrieve as many predictions as you inputed input data, ie/eg:\r\n```\r\ny_generator = estimator.predict(input_fn=...)\r\ny = list(itertools.islice(y_generator, X.shape[0])\r\n```"}
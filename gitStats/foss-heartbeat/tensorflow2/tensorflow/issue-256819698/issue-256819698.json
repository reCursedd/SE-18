{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12978", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12978/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12978/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12978/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12978", "id": 256819698, "node_id": "MDU6SXNzdWUyNTY4MTk2OTg=", "number": 12978, "title": "Bazel & cmake compilations for Windows are completely broken", "user": {"login": "zyavrik", "id": 2708564, "node_id": "MDQ6VXNlcjI3MDg1NjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/2708564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyavrik", "html_url": "https://github.com/zyavrik", "followers_url": "https://api.github.com/users/zyavrik/followers", "following_url": "https://api.github.com/users/zyavrik/following{/other_user}", "gists_url": "https://api.github.com/users/zyavrik/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyavrik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyavrik/subscriptions", "organizations_url": "https://api.github.com/users/zyavrik/orgs", "repos_url": "https://api.github.com/users/zyavrik/repos", "events_url": "https://api.github.com/users/zyavrik/events{/privacy}", "received_events_url": "https://api.github.com/users/zyavrik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 43, "created_at": "2017-09-11T19:43:18Z", "updated_at": "2018-04-05T15:16:57Z", "closed_at": "2017-12-14T08:18:36Z", "author_association": "NONE", "body_html": "<p>Can't compile tensorflow revision 1.3 using Bazel (revision of the last successful nightly build using cmake). Error is the following:</p>\n<pre><code>ERROR: C:/tensorflow-1.3rc1/tensorflow/stream_executor/BUILD:39:1: C++ compilation of rule '//tensorflow/stream_executor:cuda_platform' failed (Exit 2): cl.exe failed: error executing command\n  cd C:/msys64/tmp/_bazel_dmitry/ehgyfc-k/execroot/org_tensorflow\n  SET CUDA_COMPUTE_CAPABILITIE=None\n    SET CUDA_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\n    SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\n    SET CUDNN_INSTALL_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10240.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\shared;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\winrt;\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.10240.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\lib\\winv6.3\\um\\x64;\n    SET NO_WHOLE_ARCHIVE_OPTION=1\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\WINDOWS\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;C:\\msys64\\mingw64\\bin;C:\\msys64\\usr\\local\\bin;C:\\msys64\\usr\\bin;C:\\msys64\\usr\\bin;C:\\Windows\\System32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\msys64\\usr\\bin\\site_perl;C:\\msys64\\usr\\bin\\vendor_perl;C:\\msys64\\usr\\bin\\core_perl;C:\\WINDOWS\\system32\n    SET PWD=/proc/self/cwd\n    SET PYTHON_BIN_PATH=C:/Users/Dmitry/AppData/Local/Programs/Python/Python36/python.exe\n    SET PYTHON_LIB_PATH=C:/Users/Dmitry/AppData/Local/Programs/Python/Python36/lib/site-packages\n    SET TEMP=C:\\Users\\Dmitry\\AppData\\Local\\Temp\n    SET TF_CUDA_CLANG=0\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.5,5.2\n    SET TF_CUDA_VERSION=8.0\n    SET TF_CUDNN_VERSION=6\n    SET TF_NEED_CUDA=1\n    SET TF_NEED_OPENCL=0\n    SET TMP=C:\\Users\\Dmitry\\AppData\\Local\\Temp\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 -march=native -march=native /nologo /I. /Ibazel-out/msvc_x64-py3-opt/genfiles /Iexternal/bazel_tools /Ibazel-out/msvc_x64-py3-opt/genfiles/external/bazel_tools /Iexternal/protobuf /Ibazel-out/msvc_x64-py3-opt/genfiles/external/protobuf /Iexternal/eigen_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_sycl /Iexternal/gif_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/gif_archive /Iexternal/jpeg /Ibazel-out/msvc_x64-py3-opt/genfiles/external/jpeg /Iexternal/com_googlesource_code_re2 /Ibazel-out/msvc_x64-py3-opt/genfiles/external/com_googlesource_code_re2 /Iexternal/farmhash_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/farmhash_archive /Iexternal/fft2d /Ibazel-out/msvc_x64-py3-opt/genfiles/external/fft2d /Iexternal/highwayhash /Ibazel-out/msvc_x64-py3-opt/genfiles/external/highwayhash /Iexternal/png_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/png_archive /Iexternal/zlib_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/zlib_archive /Iexternal/snappy /Ibazel-out/msvc_x64-py3-opt/genfiles/external/snappy /Iexternal/local_config_cuda /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_cuda /Iexternal/bazel_tools/tools/cpp/gcc3 /Iexternal/protobuf/src /Ibazel-out/msvc_x64-py3-opt/genfiles/external/protobuf/src /Iexternal/eigen_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/eigen_archive /Iexternal/gif_archive/lib /Ibazel-out/msvc_x64-py3-opt/genfiles/external/gif_archive/lib /Iexternal/gif_archive/windows /Ibazel-out/msvc_x64-py3-opt/genfiles/external/gif_archive/windows /Iexternal/farmhash_archive/src /Ibazel-out/msvc_x64-py3-opt/genfiles/external/farmhash_archive/src /Iexternal/png_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/png_archive /Iexternal/zlib_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/zlib_archive /Iexternal/local_config_cuda/cuda /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_cuda/cuda/cuda/include /showIncludes /DEIGEN_MPL2_ONLY /DSNAPPY /MT /O2 /c tensorflow/stream_executor/cuda/cuda_gpu_executor.cc /Fobazel-out/msvc_x64-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_gpu_executor.o.\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(274): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(274): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(289): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(289): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(372): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(372): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(620): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(620): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(639): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(639): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(666): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(666): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(680): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(680): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(694): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(694): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(708): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(708): error C2059: syntax error: '::'\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\n____Building complete.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n____Elapsed time: 216.281s, Critical Path: 141.66s\n</code></pre>\n<p>If you try to compile master revision then compilation even won't start with the error:</p>\n<pre><code>ERROR: C:/tensorflow/tensorflow/core/kernels/BUILD:1932:1: C++ compilation of rule '//tensorflow/core/kernels:resize_bilinear_op_gpu' failed (Exit 2).\n.\\tensorflow/core/util/cuda_kernel_helper.h(359): error C3861: 'atomicAdd': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(360): error C3861: 'atomicAdd': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(361): error C3861: 'atomicAdd': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(362): error C3861: 'atomicAdd': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(365): error C3861: 'atomicMax': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(366): error C3861: 'atomicMax': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(378): error C3861: 'max': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(378): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(394): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(394): error C3861: '__double_as_longlong': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(393): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(399): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(445): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(462): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(498): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(507): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(516): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(527): error C3861: '__int_as_float': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(527): error C3861: '__float_as_int': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(526): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(529): error C3861: '__int_as_float': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(538): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(538): error C3861: '__double_as_longlong': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(537): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(540): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(548): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(557): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(566): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(577): error C3861: '__int_as_float': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(577): error C3861: '__float_as_int': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(576): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(579): error C3861: '__int_as_float': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(588): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(588): error C3861: '__double_as_longlong': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(587): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(590): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(617): error C2065: 'warpSize': undeclared identifier\n.\\tensorflow/core/util/cuda_kernel_helper.h(619): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(620): error C3861: '__shfl': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(621): error C3861: '__shfl': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(622): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(637): error C2065: 'warpSize': undeclared identifier\n.\\tensorflow/core/util/cuda_kernel_helper.h(639): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(640): error C3861: '__shfl_up': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(641): error C3861: '__shfl_up': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(642): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(657): error C2065: 'warpSize': undeclared identifier\n.\\tensorflow/core/util/cuda_kernel_helper.h(659): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(660): error C3861: '__shfl_down': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(661): error C3861: '__shfl_down': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(662): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(677): error C2065: 'warpSize': undeclared identifier\n.\\tensorflow/core/util/cuda_kernel_helper.h(679): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(680): error C3861: '__shfl_xor': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(681): error C3861: '__shfl_xor': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(682): error C2059: syntax error: 'volatile'\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\ncl : Command line warning D9002 : ignoring unknown option '-x'\ncl : Command line warning D9002 : ignoring unknown option '-nvcc_options=relaxed-constexpr'\ncl : Command line warning D9002 : ignoring unknown option '-nvcc_options=ftz=true'\ncl : Command line warning D9024 : unrecognized source file type 'cuda', object file assumed\ncl : Command line warning D9027 : source file 'cuda' ignored\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\n____Elapsed time: 3817.327s, Critical Path: 143.61s\n</code></pre>\n<p>I'll be glad to help to fix the issues. But I absolutely has no idea what's going on here. Can anybody help to fix Windows compilation please? Currently here is no build for Windows with AVX, AVX2 support in the whole world!</p>", "body_text": "Can't compile tensorflow revision 1.3 using Bazel (revision of the last successful nightly build using cmake). Error is the following:\nERROR: C:/tensorflow-1.3rc1/tensorflow/stream_executor/BUILD:39:1: C++ compilation of rule '//tensorflow/stream_executor:cuda_platform' failed (Exit 2): cl.exe failed: error executing command\n  cd C:/msys64/tmp/_bazel_dmitry/ehgyfc-k/execroot/org_tensorflow\n  SET CUDA_COMPUTE_CAPABILITIE=None\n    SET CUDA_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\n    SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\n    SET CUDNN_INSTALL_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10240.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\shared;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\winrt;\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.10240.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\lib\\winv6.3\\um\\x64;\n    SET NO_WHOLE_ARCHIVE_OPTION=1\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\WINDOWS\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;C:\\msys64\\mingw64\\bin;C:\\msys64\\usr\\local\\bin;C:\\msys64\\usr\\bin;C:\\msys64\\usr\\bin;C:\\Windows\\System32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\msys64\\usr\\bin\\site_perl;C:\\msys64\\usr\\bin\\vendor_perl;C:\\msys64\\usr\\bin\\core_perl;C:\\WINDOWS\\system32\n    SET PWD=/proc/self/cwd\n    SET PYTHON_BIN_PATH=C:/Users/Dmitry/AppData/Local/Programs/Python/Python36/python.exe\n    SET PYTHON_LIB_PATH=C:/Users/Dmitry/AppData/Local/Programs/Python/Python36/lib/site-packages\n    SET TEMP=C:\\Users\\Dmitry\\AppData\\Local\\Temp\n    SET TF_CUDA_CLANG=0\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.5,5.2\n    SET TF_CUDA_VERSION=8.0\n    SET TF_CUDNN_VERSION=6\n    SET TF_NEED_CUDA=1\n    SET TF_NEED_OPENCL=0\n    SET TMP=C:\\Users\\Dmitry\\AppData\\Local\\Temp\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 -march=native -march=native /nologo /I. /Ibazel-out/msvc_x64-py3-opt/genfiles /Iexternal/bazel_tools /Ibazel-out/msvc_x64-py3-opt/genfiles/external/bazel_tools /Iexternal/protobuf /Ibazel-out/msvc_x64-py3-opt/genfiles/external/protobuf /Iexternal/eigen_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_sycl /Iexternal/gif_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/gif_archive /Iexternal/jpeg /Ibazel-out/msvc_x64-py3-opt/genfiles/external/jpeg /Iexternal/com_googlesource_code_re2 /Ibazel-out/msvc_x64-py3-opt/genfiles/external/com_googlesource_code_re2 /Iexternal/farmhash_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/farmhash_archive /Iexternal/fft2d /Ibazel-out/msvc_x64-py3-opt/genfiles/external/fft2d /Iexternal/highwayhash /Ibazel-out/msvc_x64-py3-opt/genfiles/external/highwayhash /Iexternal/png_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/png_archive /Iexternal/zlib_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/zlib_archive /Iexternal/snappy /Ibazel-out/msvc_x64-py3-opt/genfiles/external/snappy /Iexternal/local_config_cuda /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_cuda /Iexternal/bazel_tools/tools/cpp/gcc3 /Iexternal/protobuf/src /Ibazel-out/msvc_x64-py3-opt/genfiles/external/protobuf/src /Iexternal/eigen_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/eigen_archive /Iexternal/gif_archive/lib /Ibazel-out/msvc_x64-py3-opt/genfiles/external/gif_archive/lib /Iexternal/gif_archive/windows /Ibazel-out/msvc_x64-py3-opt/genfiles/external/gif_archive/windows /Iexternal/farmhash_archive/src /Ibazel-out/msvc_x64-py3-opt/genfiles/external/farmhash_archive/src /Iexternal/png_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/png_archive /Iexternal/zlib_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/zlib_archive /Iexternal/local_config_cuda/cuda /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_cuda/cuda/cuda/include /showIncludes /DEIGEN_MPL2_ONLY /DSNAPPY /MT /O2 /c tensorflow/stream_executor/cuda/cuda_gpu_executor.cc /Fobazel-out/msvc_x64-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_gpu_executor.o.\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(274): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(274): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(289): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(289): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(372): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(372): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(620): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(620): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(639): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(639): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(666): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(666): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(680): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(680): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(694): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(694): error C2059: syntax error: '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(708): error C2589: 'constant': illegal token on right side of '::'\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(708): error C2059: syntax error: '::'\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\n____Building complete.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n____Elapsed time: 216.281s, Critical Path: 141.66s\n\nIf you try to compile master revision then compilation even won't start with the error:\nERROR: C:/tensorflow/tensorflow/core/kernels/BUILD:1932:1: C++ compilation of rule '//tensorflow/core/kernels:resize_bilinear_op_gpu' failed (Exit 2).\n.\\tensorflow/core/util/cuda_kernel_helper.h(359): error C3861: 'atomicAdd': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(360): error C3861: 'atomicAdd': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(361): error C3861: 'atomicAdd': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(362): error C3861: 'atomicAdd': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(365): error C3861: 'atomicMax': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(366): error C3861: 'atomicMax': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(378): error C3861: 'max': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(378): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(394): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(394): error C3861: '__double_as_longlong': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(393): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(399): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(445): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(462): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(498): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(507): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(516): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(527): error C3861: '__int_as_float': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(527): error C3861: '__float_as_int': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(526): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(529): error C3861: '__int_as_float': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(538): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(538): error C3861: '__double_as_longlong': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(537): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(540): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(548): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(557): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(566): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(577): error C3861: '__int_as_float': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(577): error C3861: '__float_as_int': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(576): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(579): error C3861: '__int_as_float': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(588): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(588): error C3861: '__double_as_longlong': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(587): error C3861: 'atomicCAS': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(590): error C3861: '__longlong_as_double': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(617): error C2065: 'warpSize': undeclared identifier\n.\\tensorflow/core/util/cuda_kernel_helper.h(619): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(620): error C3861: '__shfl': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(621): error C3861: '__shfl': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(622): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(637): error C2065: 'warpSize': undeclared identifier\n.\\tensorflow/core/util/cuda_kernel_helper.h(639): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(640): error C3861: '__shfl_up': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(641): error C3861: '__shfl_up': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(642): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(657): error C2065: 'warpSize': undeclared identifier\n.\\tensorflow/core/util/cuda_kernel_helper.h(659): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(660): error C3861: '__shfl_down': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(661): error C3861: '__shfl_down': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(662): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(677): error C2065: 'warpSize': undeclared identifier\n.\\tensorflow/core/util/cuda_kernel_helper.h(679): error C2059: syntax error: 'volatile'\n.\\tensorflow/core/util/cuda_kernel_helper.h(680): error C3861: '__shfl_xor': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(681): error C3861: '__shfl_xor': identifier not found\n.\\tensorflow/core/util/cuda_kernel_helper.h(682): error C2059: syntax error: 'volatile'\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\ncl : Command line warning D9002 : ignoring unknown option '-x'\ncl : Command line warning D9002 : ignoring unknown option '-nvcc_options=relaxed-constexpr'\ncl : Command line warning D9002 : ignoring unknown option '-nvcc_options=ftz=true'\ncl : Command line warning D9024 : unrecognized source file type 'cuda', object file assumed\ncl : Command line warning D9027 : source file 'cuda' ignored\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\n____Elapsed time: 3817.327s, Critical Path: 143.61s\n\nI'll be glad to help to fix the issues. But I absolutely has no idea what's going on here. Can anybody help to fix Windows compilation please? Currently here is no build for Windows with AVX, AVX2 support in the whole world!", "body": "Can't compile tensorflow revision 1.3 using Bazel (revision of the last successful nightly build using cmake). Error is the following:\r\n\r\n```\r\nERROR: C:/tensorflow-1.3rc1/tensorflow/stream_executor/BUILD:39:1: C++ compilation of rule '//tensorflow/stream_executor:cuda_platform' failed (Exit 2): cl.exe failed: error executing command\r\n  cd C:/msys64/tmp/_bazel_dmitry/ehgyfc-k/execroot/org_tensorflow\r\n  SET CUDA_COMPUTE_CAPABILITIE=None\r\n    SET CUDA_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\r\n    SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\r\n    SET CUDNN_INSTALL_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10240.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\shared;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\winrt;\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.10240.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\lib\\winv6.3\\um\\x64;\r\n    SET NO_WHOLE_ARCHIVE_OPTION=1\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\WINDOWS\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;C:\\msys64\\mingw64\\bin;C:\\msys64\\usr\\local\\bin;C:\\msys64\\usr\\bin;C:\\msys64\\usr\\bin;C:\\Windows\\System32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\msys64\\usr\\bin\\site_perl;C:\\msys64\\usr\\bin\\vendor_perl;C:\\msys64\\usr\\bin\\core_perl;C:\\WINDOWS\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/Users/Dmitry/AppData/Local/Programs/Python/Python36/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Users/Dmitry/AppData/Local/Programs/Python/Python36/lib/site-packages\r\n    SET TEMP=C:\\Users\\Dmitry\\AppData\\Local\\Temp\r\n    SET TF_CUDA_CLANG=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.5,5.2\r\n    SET TF_CUDA_VERSION=8.0\r\n    SET TF_CUDNN_VERSION=6\r\n    SET TF_NEED_CUDA=1\r\n    SET TF_NEED_OPENCL=0\r\n    SET TMP=C:\\Users\\Dmitry\\AppData\\Local\\Temp\r\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 -march=native -march=native /nologo /I. /Ibazel-out/msvc_x64-py3-opt/genfiles /Iexternal/bazel_tools /Ibazel-out/msvc_x64-py3-opt/genfiles/external/bazel_tools /Iexternal/protobuf /Ibazel-out/msvc_x64-py3-opt/genfiles/external/protobuf /Iexternal/eigen_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_sycl /Iexternal/gif_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/gif_archive /Iexternal/jpeg /Ibazel-out/msvc_x64-py3-opt/genfiles/external/jpeg /Iexternal/com_googlesource_code_re2 /Ibazel-out/msvc_x64-py3-opt/genfiles/external/com_googlesource_code_re2 /Iexternal/farmhash_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/farmhash_archive /Iexternal/fft2d /Ibazel-out/msvc_x64-py3-opt/genfiles/external/fft2d /Iexternal/highwayhash /Ibazel-out/msvc_x64-py3-opt/genfiles/external/highwayhash /Iexternal/png_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/png_archive /Iexternal/zlib_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/zlib_archive /Iexternal/snappy /Ibazel-out/msvc_x64-py3-opt/genfiles/external/snappy /Iexternal/local_config_cuda /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_cuda /Iexternal/bazel_tools/tools/cpp/gcc3 /Iexternal/protobuf/src /Ibazel-out/msvc_x64-py3-opt/genfiles/external/protobuf/src /Iexternal/eigen_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/eigen_archive /Iexternal/gif_archive/lib /Ibazel-out/msvc_x64-py3-opt/genfiles/external/gif_archive/lib /Iexternal/gif_archive/windows /Ibazel-out/msvc_x64-py3-opt/genfiles/external/gif_archive/windows /Iexternal/farmhash_archive/src /Ibazel-out/msvc_x64-py3-opt/genfiles/external/farmhash_archive/src /Iexternal/png_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/png_archive /Iexternal/zlib_archive /Ibazel-out/msvc_x64-py3-opt/genfiles/external/zlib_archive /Iexternal/local_config_cuda/cuda /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/msvc_x64-py3-opt/genfiles/external/local_config_cuda/cuda/cuda/include /showIncludes /DEIGEN_MPL2_ONLY /DSNAPPY /MT /O2 /c tensorflow/stream_executor/cuda/cuda_gpu_executor.cc /Fobazel-out/msvc_x64-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_gpu_executor.o.\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(274): error C2589: 'constant': illegal token on right side of '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(274): error C2059: syntax error: '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(289): error C2589: 'constant': illegal token on right side of '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(289): error C2059: syntax error: '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(372): error C2589: 'constant': illegal token on right side of '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(372): error C2059: syntax error: '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(620): error C2589: 'constant': illegal token on right side of '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(620): error C2059: syntax error: '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(639): error C2589: 'constant': illegal token on right side of '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(639): error C2059: syntax error: '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(666): error C2589: 'constant': illegal token on right side of '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(666): error C2059: syntax error: '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(680): error C2589: 'constant': illegal token on right side of '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(680): error C2059: syntax error: '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(694): error C2589: 'constant': illegal token on right side of '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(694): error C2059: syntax error: '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(708): error C2589: 'constant': illegal token on right side of '::'\r\ntensorflow/stream_executor/cuda/cuda_gpu_executor.cc(708): error C2059: syntax error: '::'\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\n____Building complete.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n____Elapsed time: 216.281s, Critical Path: 141.66s\r\n```\r\n\r\nIf you try to compile master revision then compilation even won't start with the error:\r\n\r\n```\r\nERROR: C:/tensorflow/tensorflow/core/kernels/BUILD:1932:1: C++ compilation of rule '//tensorflow/core/kernels:resize_bilinear_op_gpu' failed (Exit 2).\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(359): error C3861: 'atomicAdd': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(360): error C3861: 'atomicAdd': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(361): error C3861: 'atomicAdd': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(362): error C3861: 'atomicAdd': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(365): error C3861: 'atomicMax': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(366): error C3861: 'atomicMax': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(378): error C3861: 'max': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(378): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(394): error C3861: '__longlong_as_double': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(394): error C3861: '__double_as_longlong': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(393): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(399): error C3861: '__longlong_as_double': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(445): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(462): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(498): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(507): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(516): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(527): error C3861: '__int_as_float': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(527): error C3861: '__float_as_int': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(526): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(529): error C3861: '__int_as_float': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(538): error C3861: '__longlong_as_double': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(538): error C3861: '__double_as_longlong': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(537): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(540): error C3861: '__longlong_as_double': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(548): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(557): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(566): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(577): error C3861: '__int_as_float': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(577): error C3861: '__float_as_int': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(576): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(579): error C3861: '__int_as_float': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(588): error C3861: '__longlong_as_double': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(588): error C3861: '__double_as_longlong': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(587): error C3861: 'atomicCAS': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(590): error C3861: '__longlong_as_double': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(617): error C2065: 'warpSize': undeclared identifier\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(619): error C2059: syntax error: 'volatile'\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(620): error C3861: '__shfl': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(621): error C3861: '__shfl': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(622): error C2059: syntax error: 'volatile'\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(637): error C2065: 'warpSize': undeclared identifier\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(639): error C2059: syntax error: 'volatile'\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(640): error C3861: '__shfl_up': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(641): error C3861: '__shfl_up': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(642): error C2059: syntax error: 'volatile'\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(657): error C2065: 'warpSize': undeclared identifier\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(659): error C2059: syntax error: 'volatile'\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(660): error C3861: '__shfl_down': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(661): error C3861: '__shfl_down': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(662): error C2059: syntax error: 'volatile'\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(677): error C2065: 'warpSize': undeclared identifier\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(679): error C2059: syntax error: 'volatile'\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(680): error C3861: '__shfl_xor': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(681): error C3861: '__shfl_xor': identifier not found\r\n.\\tensorflow/core/util/cuda_kernel_helper.h(682): error C2059: syntax error: 'volatile'\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\ncl : Command line warning D9002 : ignoring unknown option '-x'\r\ncl : Command line warning D9002 : ignoring unknown option '-nvcc_options=relaxed-constexpr'\r\ncl : Command line warning D9002 : ignoring unknown option '-nvcc_options=ftz=true'\r\ncl : Command line warning D9024 : unrecognized source file type 'cuda', object file assumed\r\ncl : Command line warning D9027 : source file 'cuda' ignored\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\n____Elapsed time: 3817.327s, Critical Path: 143.61s\r\n```\r\n\r\nI'll be glad to help to fix the issues. But I absolutely has no idea what's going on here. Can anybody help to fix Windows compilation please? Currently here is no build for Windows with AVX, AVX2 support in the whole world!"}
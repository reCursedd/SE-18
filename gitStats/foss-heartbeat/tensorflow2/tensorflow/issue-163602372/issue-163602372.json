{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3176", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3176/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3176/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3176/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3176", "id": 163602372, "node_id": "MDU6SXNzdWUxNjM2MDIzNzI=", "number": 3176, "title": "Mutability of TF_NewTensor\u2019s arguments", "user": {"login": "IvanUkhov", "id": 57440, "node_id": "MDQ6VXNlcjU3NDQw", "avatar_url": "https://avatars1.githubusercontent.com/u/57440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IvanUkhov", "html_url": "https://github.com/IvanUkhov", "followers_url": "https://api.github.com/users/IvanUkhov/followers", "following_url": "https://api.github.com/users/IvanUkhov/following{/other_user}", "gists_url": "https://api.github.com/users/IvanUkhov/gists{/gist_id}", "starred_url": "https://api.github.com/users/IvanUkhov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IvanUkhov/subscriptions", "organizations_url": "https://api.github.com/users/IvanUkhov/orgs", "repos_url": "https://api.github.com/users/IvanUkhov/repos", "events_url": "https://api.github.com/users/IvanUkhov/events{/privacy}", "received_events_url": "https://api.github.com/users/IvanUkhov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "josh11b", "id": 15258583, "node_id": "MDQ6VXNlcjE1MjU4NTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/15258583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josh11b", "html_url": "https://github.com/josh11b", "followers_url": "https://api.github.com/users/josh11b/followers", "following_url": "https://api.github.com/users/josh11b/following{/other_user}", "gists_url": "https://api.github.com/users/josh11b/gists{/gist_id}", "starred_url": "https://api.github.com/users/josh11b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josh11b/subscriptions", "organizations_url": "https://api.github.com/users/josh11b/orgs", "repos_url": "https://api.github.com/users/josh11b/repos", "events_url": "https://api.github.com/users/josh11b/events{/privacy}", "received_events_url": "https://api.github.com/users/josh11b/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "josh11b", "id": 15258583, "node_id": "MDQ6VXNlcjE1MjU4NTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/15258583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josh11b", "html_url": "https://github.com/josh11b", "followers_url": "https://api.github.com/users/josh11b/followers", "following_url": "https://api.github.com/users/josh11b/following{/other_user}", "gists_url": "https://api.github.com/users/josh11b/gists{/gist_id}", "starred_url": "https://api.github.com/users/josh11b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josh11b/subscriptions", "organizations_url": "https://api.github.com/users/josh11b/orgs", "repos_url": "https://api.github.com/users/josh11b/repos", "events_url": "https://api.github.com/users/josh11b/events{/privacy}", "received_events_url": "https://api.github.com/users/josh11b/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-07-04T04:49:37Z", "updated_at": "2016-07-09T04:09:29Z", "closed_at": "2016-07-09T04:09:29Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The C API provides the <a href=\"https://github.com/tensorflow/tensorflow/blob/v0.9.0/tensorflow/core/public/tensor_c_api.h#L195\">following function</a> for creating tensors:</p>\n<div class=\"highlight highlight-source-c\"><pre><span class=\"pl-k\">extern</span> TF_Tensor* <span class=\"pl-en\">TF_NewTensor</span>(TF_DataType, <span class=\"pl-k\">long</span> <span class=\"pl-k\">long</span>* dims, <span class=\"pl-k\">int</span> num_dims,\n                               <span class=\"pl-k\">void</span>* data, <span class=\"pl-c1\">size_t</span> len,\n                               <span class=\"pl-en\">void</span> (*deallocator)(<span class=\"pl-k\">void</span>* data, <span class=\"pl-c1\">size_t</span> len,\n                                                   <span class=\"pl-k\">void</span>* arg),\n                               void* deallocator_arg);</pre></div>\n<p>Based on what the function does conceptually and on how it is <a href=\"https://github.com/tensorflow/tensorflow/blob/v0.9.0/tensorflow/core/client/tensor_c_api.cc#L122\">implemented</a>, it doesn\u2019t seem to be reasonable that <code>dims</code> is required to be a pointer to mutable data. This makes the usage of the function a bit inconvenient, especially when developing bindings for other languages. If it\u2019s OK to change the signature of the function, I can submit a pull request. Thanks!</p>\n<p>Regards,<br>\nIvan</p>", "body_text": "The C API provides the following function for creating tensors:\nextern TF_Tensor* TF_NewTensor(TF_DataType, long long* dims, int num_dims,\n                               void* data, size_t len,\n                               void (*deallocator)(void* data, size_t len,\n                                                   void* arg),\n                               void* deallocator_arg);\nBased on what the function does conceptually and on how it is implemented, it doesn\u2019t seem to be reasonable that dims is required to be a pointer to mutable data. This makes the usage of the function a bit inconvenient, especially when developing bindings for other languages. If it\u2019s OK to change the signature of the function, I can submit a pull request. Thanks!\nRegards,\nIvan", "body": "The C API provides the [following function](https://github.com/tensorflow/tensorflow/blob/v0.9.0/tensorflow/core/public/tensor_c_api.h#L195) for creating tensors:\n\n``` c\nextern TF_Tensor* TF_NewTensor(TF_DataType, long long* dims, int num_dims,\n                               void* data, size_t len,\n                               void (*deallocator)(void* data, size_t len,\n                                                   void* arg),\n                               void* deallocator_arg);\n```\n\nBased on what the function does conceptually and on how it is [implemented](https://github.com/tensorflow/tensorflow/blob/v0.9.0/tensorflow/core/client/tensor_c_api.cc#L122), it doesn\u2019t seem to be reasonable that `dims` is required to be a pointer to mutable data. This makes the usage of the function a bit inconvenient, especially when developing bindings for other languages. If it\u2019s OK to change the signature of the function, I can submit a pull request. Thanks!\n\nRegards,\nIvan\n"}
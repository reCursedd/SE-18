{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14360", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14360/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14360/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14360/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14360", "id": 272184002, "node_id": "MDU6SXNzdWUyNzIxODQwMDI=", "number": 14360, "title": "Cannot build TF 1.4 with CUDNN 1.4", "user": {"login": "wichtounet", "id": 196746, "node_id": "MDQ6VXNlcjE5Njc0Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/196746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wichtounet", "html_url": "https://github.com/wichtounet", "followers_url": "https://api.github.com/users/wichtounet/followers", "following_url": "https://api.github.com/users/wichtounet/following{/other_user}", "gists_url": "https://api.github.com/users/wichtounet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wichtounet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wichtounet/subscriptions", "organizations_url": "https://api.github.com/users/wichtounet/orgs", "repos_url": "https://api.github.com/users/wichtounet/repos", "events_url": "https://api.github.com/users/wichtounet/events{/privacy}", "received_events_url": "https://api.github.com/users/wichtounet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-08T12:39:26Z", "updated_at": "2017-11-09T06:33:45Z", "closed_at": "2017-11-08T18:26:44Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Centos 7</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4</li>\n<li><strong>Python version</strong>: 3.4.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.7.0- (@non-git)</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: 4.9</li>\n<li><strong>CUDA/cuDNN version</strong>: 8.0/5.0.5</li>\n<li><strong>GPU model and memory</strong>: Tesla K80</li>\n<li><strong>Exact command to reproduce</strong>: bazel build --config=opt --config=cuda --config=mkl //tensorflow/tools/pip_package:build_pip_packag</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I'm trying to install Tensorflow 1.4 from sources with CUDA 8.0 and CUDNN 5.0.5. It's indicated in the documentation that it should work with CUDNN 3 and higher.</p>\n<p>Unfortunately, it doesn't work and ends up with an error that seems to indicate that CUDNN v6 is needed (I may be wrong on the cause of the error).</p>\n<p>Here is the error:</p>\n<pre><code>ERROR: /home/localuser/tensorflow/tensorflow/stream_executor/BUILD:52:1: C++ compilation of rule '//tensorflow/stream_executor:cuda_platform' failed (Exit 1).\ntensorflow/stream_executor/cuda/cuda_dnn.cc: In member function 'cudnnStatus_t perftools::gputools::cuda::wrap::WrapperShim__cudnnSetRNNDescriptor_v6::operator()(perftools::gputools::cuda::CUDAExecutor*, Args ...)':\ntensorflow/stream_executor/cuda/cuda_dnn.cc:140:30: error: '::cudnnSetRNNDescriptor_v6' has not been declared\n       cudnnStatus_t retval = ::__name(args...);                    \\\n                              ^\ntensorflow/stream_executor/cuda/cuda_dnn.cc:235:3: note: in expansion of macro 'PERFTOOLS_GPUTOOLS_CUDNN_WRAP'\n   __macro(cudnnSetRNNDescriptor_v6)                           \\\n   ^\ntensorflow/stream_executor/cuda/cuda_dnn.cc:240:1: note: in expansion of macro 'CUDNN_DNN_ROUTINE_EACH_R5'\n CUDNN_DNN_ROUTINE_EACH_R5(PERFTOOLS_GPUTOOLS_CUDNN_WRAP)\n</code></pre>\n<p>Is there anything I can do to install TF 1.4 using CUDNN 5 ?</p>\n<p>Thanks</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Centos 7\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 1.4\nPython version: 3.4.5\nBazel version (if compiling from source): 0.7.0- (@non-git)\nGCC/Compiler version (if compiling from source): 4.9\nCUDA/cuDNN version: 8.0/5.0.5\nGPU model and memory: Tesla K80\nExact command to reproduce: bazel build --config=opt --config=cuda --config=mkl //tensorflow/tools/pip_package:build_pip_packag\n\nDescribe the problem\nI'm trying to install Tensorflow 1.4 from sources with CUDA 8.0 and CUDNN 5.0.5. It's indicated in the documentation that it should work with CUDNN 3 and higher.\nUnfortunately, it doesn't work and ends up with an error that seems to indicate that CUDNN v6 is needed (I may be wrong on the cause of the error).\nHere is the error:\nERROR: /home/localuser/tensorflow/tensorflow/stream_executor/BUILD:52:1: C++ compilation of rule '//tensorflow/stream_executor:cuda_platform' failed (Exit 1).\ntensorflow/stream_executor/cuda/cuda_dnn.cc: In member function 'cudnnStatus_t perftools::gputools::cuda::wrap::WrapperShim__cudnnSetRNNDescriptor_v6::operator()(perftools::gputools::cuda::CUDAExecutor*, Args ...)':\ntensorflow/stream_executor/cuda/cuda_dnn.cc:140:30: error: '::cudnnSetRNNDescriptor_v6' has not been declared\n       cudnnStatus_t retval = ::__name(args...);                    \\\n                              ^\ntensorflow/stream_executor/cuda/cuda_dnn.cc:235:3: note: in expansion of macro 'PERFTOOLS_GPUTOOLS_CUDNN_WRAP'\n   __macro(cudnnSetRNNDescriptor_v6)                           \\\n   ^\ntensorflow/stream_executor/cuda/cuda_dnn.cc:240:1: note: in expansion of macro 'CUDNN_DNN_ROUTINE_EACH_R5'\n CUDNN_DNN_ROUTINE_EACH_R5(PERFTOOLS_GPUTOOLS_CUDNN_WRAP)\n\nIs there anything I can do to install TF 1.4 using CUDNN 5 ?\nThanks", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Centos 7\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.4\r\n- **Python version**: 3.4.5 \r\n- **Bazel version (if compiling from source)**: 0.7.0- (@non-git)\r\n- **GCC/Compiler version (if compiling from source)**: 4.9\r\n- **CUDA/cuDNN version**: 8.0/5.0.5\r\n- **GPU model and memory**: Tesla K80\r\n- **Exact command to reproduce**: bazel build --config=opt --config=cuda --config=mkl //tensorflow/tools/pip_package:build_pip_packag\r\n\r\n### Describe the problem\r\n\r\nI'm trying to install Tensorflow 1.4 from sources with CUDA 8.0 and CUDNN 5.0.5. It's indicated in the documentation that it should work with CUDNN 3 and higher. \r\n\r\nUnfortunately, it doesn't work and ends up with an error that seems to indicate that CUDNN v6 is needed (I may be wrong on the cause of the error). \r\n\r\nHere is the error:\r\n\r\n```\r\nERROR: /home/localuser/tensorflow/tensorflow/stream_executor/BUILD:52:1: C++ compilation of rule '//tensorflow/stream_executor:cuda_platform' failed (Exit 1).\r\ntensorflow/stream_executor/cuda/cuda_dnn.cc: In member function 'cudnnStatus_t perftools::gputools::cuda::wrap::WrapperShim__cudnnSetRNNDescriptor_v6::operator()(perftools::gputools::cuda::CUDAExecutor*, Args ...)':\r\ntensorflow/stream_executor/cuda/cuda_dnn.cc:140:30: error: '::cudnnSetRNNDescriptor_v6' has not been declared\r\n       cudnnStatus_t retval = ::__name(args...);                    \\\r\n                              ^\r\ntensorflow/stream_executor/cuda/cuda_dnn.cc:235:3: note: in expansion of macro 'PERFTOOLS_GPUTOOLS_CUDNN_WRAP'\r\n   __macro(cudnnSetRNNDescriptor_v6)                           \\\r\n   ^\r\ntensorflow/stream_executor/cuda/cuda_dnn.cc:240:1: note: in expansion of macro 'CUDNN_DNN_ROUTINE_EACH_R5'\r\n CUDNN_DNN_ROUTINE_EACH_R5(PERFTOOLS_GPUTOOLS_CUDNN_WRAP)\r\n```\r\n\r\nIs there anything I can do to install TF 1.4 using CUDNN 5 ?\r\n\r\nThanks"}
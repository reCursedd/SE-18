{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19180", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19180/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19180/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19180/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19180", "id": 321559784, "node_id": "MDU6SXNzdWUzMjE1NTk3ODQ=", "number": 19180, "title": "tf.constant() processes float16 100 times slower than float32", "user": {"login": "OVPavlov", "id": 3896819, "node_id": "MDQ6VXNlcjM4OTY4MTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/3896819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OVPavlov", "html_url": "https://github.com/OVPavlov", "followers_url": "https://api.github.com/users/OVPavlov/followers", "following_url": "https://api.github.com/users/OVPavlov/following{/other_user}", "gists_url": "https://api.github.com/users/OVPavlov/gists{/gist_id}", "starred_url": "https://api.github.com/users/OVPavlov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OVPavlov/subscriptions", "organizations_url": "https://api.github.com/users/OVPavlov/orgs", "repos_url": "https://api.github.com/users/OVPavlov/repos", "events_url": "https://api.github.com/users/OVPavlov/events{/privacy}", "received_events_url": "https://api.github.com/users/OVPavlov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-05-09T12:58:24Z", "updated_at": "2018-06-02T20:19:00Z", "closed_at": "2018-06-02T20:19:00Z", "author_association": "NONE", "body_html": "<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">import</span> numpy <span class=\"pl-k\">as</span> np\n<span class=\"pl-k\">import</span> time\n\nimages <span class=\"pl-k\">=</span> tf.keras.datasets.mnist.load_data()[<span class=\"pl-c1\">0</span>][<span class=\"pl-c1\">0</span>]\n\nimagesFloat16 <span class=\"pl-k\">=</span> images.astype(np.float16)<span class=\"pl-bu\">;</span>\nimagesFloat32 <span class=\"pl-k\">=</span> images.astype(np.float32)<span class=\"pl-bu\">;</span>\n\nstart <span class=\"pl-k\">=</span> time.time()\ntf.data.Dataset.from_tensor_slices(imagesFloat32)\nend <span class=\"pl-k\">=</span> time.time()\n<span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>float32: <span class=\"pl-c1\">{0<span class=\"pl-k\">:.4f</span>}</span> sec<span class=\"pl-pds\">\"</span></span>.format(end <span class=\"pl-k\">-</span> start)) <span class=\"pl-c\"><span class=\"pl-c\">#</span> float32: 1.2561 sec</span>\n\nstart <span class=\"pl-k\">=</span> time.time()\ntf.data.Dataset.from_tensor_slices(imagesFloat16)\nend <span class=\"pl-k\">=</span> time.time()\n<span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>float16: <span class=\"pl-c1\">{0<span class=\"pl-k\">:.4f</span>}</span> sec<span class=\"pl-pds\">\"</span></span>.format(end <span class=\"pl-k\">-</span> start)) <span class=\"pl-c\"><span class=\"pl-c\">#</span> float16: 110.0273 sec</span></pre></div>\n<blockquote>\n<p>float32: 1.2561 sec<br>\nfloat16: 110.0273 sec</p>\n</blockquote>", "body_text": "import tensorflow as tf\nimport numpy as np\nimport time\n\nimages = tf.keras.datasets.mnist.load_data()[0][0]\n\nimagesFloat16 = images.astype(np.float16);\nimagesFloat32 = images.astype(np.float32);\n\nstart = time.time()\ntf.data.Dataset.from_tensor_slices(imagesFloat32)\nend = time.time()\nprint(\"float32: {0:.4f} sec\".format(end - start)) # float32: 1.2561 sec\n\nstart = time.time()\ntf.data.Dataset.from_tensor_slices(imagesFloat16)\nend = time.time()\nprint(\"float16: {0:.4f} sec\".format(end - start)) # float16: 110.0273 sec\n\nfloat32: 1.2561 sec\nfloat16: 110.0273 sec", "body": "```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nimport time\r\n\r\nimages = tf.keras.datasets.mnist.load_data()[0][0]\r\n\r\nimagesFloat16 = images.astype(np.float16);\r\nimagesFloat32 = images.astype(np.float32);\r\n\r\nstart = time.time()\r\ntf.data.Dataset.from_tensor_slices(imagesFloat32)\r\nend = time.time()\r\nprint(\"float32: {0:.4f} sec\".format(end - start)) # float32: 1.2561 sec\r\n\r\nstart = time.time()\r\ntf.data.Dataset.from_tensor_slices(imagesFloat16)\r\nend = time.time()\r\nprint(\"float16: {0:.4f} sec\".format(end - start)) # float16: 110.0273 sec\r\n```\r\n\r\n> float32: 1.2561 sec\r\n> float16: 110.0273 sec"}
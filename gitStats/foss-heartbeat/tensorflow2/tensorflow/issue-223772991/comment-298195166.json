{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/298195166", "html_url": "https://github.com/tensorflow/tensorflow/issues/9412#issuecomment-298195166", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9412", "id": 298195166, "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODE5NTE2Ng==", "user": {"login": "anonym24", "id": 8851301, "node_id": "MDQ6VXNlcjg4NTEzMDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8851301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anonym24", "html_url": "https://github.com/anonym24", "followers_url": "https://api.github.com/users/anonym24/followers", "following_url": "https://api.github.com/users/anonym24/following{/other_user}", "gists_url": "https://api.github.com/users/anonym24/gists{/gist_id}", "starred_url": "https://api.github.com/users/anonym24/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anonym24/subscriptions", "organizations_url": "https://api.github.com/users/anonym24/orgs", "repos_url": "https://api.github.com/users/anonym24/repos", "events_url": "https://api.github.com/users/anonym24/events{/privacy}", "received_events_url": "https://api.github.com/users/anonym24/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-29T21:17:22Z", "updated_at": "2017-04-29T21:20:37Z", "author_association": "NONE", "body_html": "<p>I tried to force rotation in the different part of code.<br>\nRects on the main view looks better now (I guess it shows normal width/height of every detected car now),<br>\nbut they are still at the wrong position..</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/src/org/tensorflow/demo/DetectorActivity.java#L297\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/src/org/tensorflow/demo/DetectorActivity.java#L297</a></p>\n<pre><code>rgbFrameBitmap.setPixels(rgbBytes, 0, previewWidth, 0, 0, previewWidth, previewHeight);\n    final Canvas canvas = new Canvas(croppedBitmap);\n    canvas.drawBitmap(rgbFrameBitmap, frameToCropTransform, null);\n    croppedBitmap = rotateBitmap(croppedBitmap, -90); // here forced rotation\n</code></pre>\n<pre><code>public static Bitmap rotateBitmap(Bitmap source, float angle) {\n    Matrix matrix = new Matrix();\n    matrix.postRotate(angle);\n    return Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(), matrix, true);\n  }\n</code></pre>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/8851301/25558969/4dc2dfec-2d3a-11e7-8f00-2349713fefa0.png\"><img src=\"https://cloud.githubusercontent.com/assets/8851301/25558969/4dc2dfec-2d3a-11e7-8f00-2349713fefa0.png\" alt=\"screenshot_2017-04-30-00-01-16-782_org tensorflow demo\" style=\"max-width:100%;\"></a></p>", "body_text": "I tried to force rotation in the different part of code.\nRects on the main view looks better now (I guess it shows normal width/height of every detected car now),\nbut they are still at the wrong position..\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/src/org/tensorflow/demo/DetectorActivity.java#L297\nrgbFrameBitmap.setPixels(rgbBytes, 0, previewWidth, 0, 0, previewWidth, previewHeight);\n    final Canvas canvas = new Canvas(croppedBitmap);\n    canvas.drawBitmap(rgbFrameBitmap, frameToCropTransform, null);\n    croppedBitmap = rotateBitmap(croppedBitmap, -90); // here forced rotation\n\npublic static Bitmap rotateBitmap(Bitmap source, float angle) {\n    Matrix matrix = new Matrix();\n    matrix.postRotate(angle);\n    return Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(), matrix, true);\n  }", "body": "I tried to force rotation in the different part of code.\r\nRects on the main view looks better now (I guess it shows normal width/height of every detected car now),\r\nbut they are still at the wrong position..\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/src/org/tensorflow/demo/DetectorActivity.java#L297\r\n```\r\nrgbFrameBitmap.setPixels(rgbBytes, 0, previewWidth, 0, 0, previewWidth, previewHeight);\r\n    final Canvas canvas = new Canvas(croppedBitmap);\r\n    canvas.drawBitmap(rgbFrameBitmap, frameToCropTransform, null);\r\n    croppedBitmap = rotateBitmap(croppedBitmap, -90); // here forced rotation\r\n```\r\n\r\n```\r\npublic static Bitmap rotateBitmap(Bitmap source, float angle) {\r\n    Matrix matrix = new Matrix();\r\n    matrix.postRotate(angle);\r\n    return Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(), matrix, true);\r\n  }\r\n```\r\n![screenshot_2017-04-30-00-01-16-782_org tensorflow demo](https://cloud.githubusercontent.com/assets/8851301/25558969/4dc2dfec-2d3a-11e7-8f00-2349713fefa0.png)"}
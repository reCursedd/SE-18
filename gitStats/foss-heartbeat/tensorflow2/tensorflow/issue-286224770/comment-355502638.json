{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/355502638", "html_url": "https://github.com/tensorflow/tensorflow/issues/15871#issuecomment-355502638", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15871", "id": 355502638, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTUwMjYzOA==", "user": {"login": "qjivy", "id": 24410810, "node_id": "MDQ6VXNlcjI0NDEwODEw", "avatar_url": "https://avatars2.githubusercontent.com/u/24410810?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qjivy", "html_url": "https://github.com/qjivy", "followers_url": "https://api.github.com/users/qjivy/followers", "following_url": "https://api.github.com/users/qjivy/following{/other_user}", "gists_url": "https://api.github.com/users/qjivy/gists{/gist_id}", "starred_url": "https://api.github.com/users/qjivy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qjivy/subscriptions", "organizations_url": "https://api.github.com/users/qjivy/orgs", "repos_url": "https://api.github.com/users/qjivy/repos", "events_url": "https://api.github.com/users/qjivy/events{/privacy}", "received_events_url": "https://api.github.com/users/qjivy/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-05T08:50:10Z", "updated_at": "2018-01-05T08:50:10Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Following the hint from the output log, the \"--default_ranges_min=\" and \"default_ranges_max=\" was add but the transform still failed:</p>\n<p>Command:</p>\n<p>/root/TF/new/out/toco/execroot/org_tensorflow/bazel-out/local-opt/bin/tensorflow/contrib/lite/toco/toco --input_file=incept_8wn_gt.pb --output_file=incept_8wn_gt.tflite --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --inference_type=QUANTIZED_UINT8 --input_shape=1,299,299,3 --input_array=\"Mul\"  --output_array=\"softmax\" --default_ranges_min=-0.5 --default_ranges_max=0.5</p>\n<p>Part of the output log:</p>\n<p>2018-01-05 08:47:29.145793: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1122] Converting unsupported operation: RequantizationRange<br>\n2018-01-05 08:47:29.145805: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1122] Converting unsupported operation: Requantize<br>\n2018-01-05 08:47:29.145816: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1122] Converting unsupported operation: Dequantize<br>\n2018-01-05 08:47:29.192635: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1080 operators, 3039 arrays (0 quantized)<br>\n2018-01-05 08:47:29.269051: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 793 operators, 2752 arrays (1 quantized)<br>\n2018-01-05 08:47:29.346738: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 793 operators, 2752 arrays (1 quantized)<br>\n2018-01-05 08:47:29.424110: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 793 operators, 2752 arrays (1 quantized)<br>\n2018-01-05 08:47:29.477262: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 793 operators, 2752 arrays (1 quantized)<br>\n2018-01-05 08:47:29.544994: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before default min-max range propagation graph transformations: 793 operators, 2752 arrays (1 quantized)<br>\n2018-01-05 08:47:29.597833: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before quantization graph transformations: 793 operators, 2752 arrays (1 quantized)<br>\n2018-01-05 08:47:29.597859: F tensorflow/contrib/lite/toco/graph_transformations/quantize.cc:354] Unimplemented: this graph contains an operator of type (Unsupported TensorFlow op: QuantizeV2) for which the quantized form is not yet implemented. Sorry, and patches welcome (that's a relatively fun patch to write, mostly providing the actual quantized arithmetic code for this op).<br>\nAborted (core dumped)</p>", "body_text": "Following the hint from the output log, the \"--default_ranges_min=\" and \"default_ranges_max=\" was add but the transform still failed:\nCommand:\n/root/TF/new/out/toco/execroot/org_tensorflow/bazel-out/local-opt/bin/tensorflow/contrib/lite/toco/toco --input_file=incept_8wn_gt.pb --output_file=incept_8wn_gt.tflite --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --inference_type=QUANTIZED_UINT8 --input_shape=1,299,299,3 --input_array=\"Mul\"  --output_array=\"softmax\" --default_ranges_min=-0.5 --default_ranges_max=0.5\nPart of the output log:\n2018-01-05 08:47:29.145793: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1122] Converting unsupported operation: RequantizationRange\n2018-01-05 08:47:29.145805: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1122] Converting unsupported operation: Requantize\n2018-01-05 08:47:29.145816: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1122] Converting unsupported operation: Dequantize\n2018-01-05 08:47:29.192635: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1080 operators, 3039 arrays (0 quantized)\n2018-01-05 08:47:29.269051: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 793 operators, 2752 arrays (1 quantized)\n2018-01-05 08:47:29.346738: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 793 operators, 2752 arrays (1 quantized)\n2018-01-05 08:47:29.424110: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 793 operators, 2752 arrays (1 quantized)\n2018-01-05 08:47:29.477262: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 793 operators, 2752 arrays (1 quantized)\n2018-01-05 08:47:29.544994: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before default min-max range propagation graph transformations: 793 operators, 2752 arrays (1 quantized)\n2018-01-05 08:47:29.597833: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before quantization graph transformations: 793 operators, 2752 arrays (1 quantized)\n2018-01-05 08:47:29.597859: F tensorflow/contrib/lite/toco/graph_transformations/quantize.cc:354] Unimplemented: this graph contains an operator of type (Unsupported TensorFlow op: QuantizeV2) for which the quantized form is not yet implemented. Sorry, and patches welcome (that's a relatively fun patch to write, mostly providing the actual quantized arithmetic code for this op).\nAborted (core dumped)", "body": "Following the hint from the output log, the \"--default_ranges_min=\" and \"default_ranges_max=\" was add but the transform still failed:\r\n\r\nCommand:\r\n\r\n/root/TF/new/out/toco/execroot/org_tensorflow/bazel-out/local-opt/bin/tensorflow/contrib/lite/toco/toco --input_file=incept_8wn_gt.pb --output_file=incept_8wn_gt.tflite --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --inference_type=QUANTIZED_UINT8 --input_shape=1,299,299,3 --input_array=\"Mul\"  --output_array=\"softmax\" --default_ranges_min=-0.5 --default_ranges_max=0.5 \r\n\r\n\r\nPart of the output log:\r\n\r\n2018-01-05 08:47:29.145793: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1122] Converting unsupported operation: RequantizationRange\r\n2018-01-05 08:47:29.145805: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1122] Converting unsupported operation: Requantize\r\n2018-01-05 08:47:29.145816: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1122] Converting unsupported operation: Dequantize\r\n2018-01-05 08:47:29.192635: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1080 operators, 3039 arrays (0 quantized)\r\n2018-01-05 08:47:29.269051: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 793 operators, 2752 arrays (1 quantized)\r\n2018-01-05 08:47:29.346738: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 793 operators, 2752 arrays (1 quantized)\r\n2018-01-05 08:47:29.424110: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 793 operators, 2752 arrays (1 quantized)\r\n2018-01-05 08:47:29.477262: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 793 operators, 2752 arrays (1 quantized)\r\n2018-01-05 08:47:29.544994: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before default min-max range propagation graph transformations: 793 operators, 2752 arrays (1 quantized)\r\n2018-01-05 08:47:29.597833: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before quantization graph transformations: 793 operators, 2752 arrays (1 quantized)\r\n2018-01-05 08:47:29.597859: F tensorflow/contrib/lite/toco/graph_transformations/quantize.cc:354] Unimplemented: this graph contains an operator of type (Unsupported TensorFlow op: QuantizeV2) for which the quantized form is not yet implemented. Sorry, and patches welcome (that's a relatively fun patch to write, mostly providing the actual quantized arithmetic code for this op).\r\nAborted (core dumped)\r\n"}
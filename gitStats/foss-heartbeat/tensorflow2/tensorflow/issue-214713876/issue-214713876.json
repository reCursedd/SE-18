{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8469", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8469/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8469/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8469/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8469", "id": 214713876, "node_id": "MDU6SXNzdWUyMTQ3MTM4NzY=", "number": 8469, "title": "misleading comments", "user": {"login": "chkap", "id": 7592610, "node_id": "MDQ6VXNlcjc1OTI2MTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/7592610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chkap", "html_url": "https://github.com/chkap", "followers_url": "https://api.github.com/users/chkap/followers", "following_url": "https://api.github.com/users/chkap/following{/other_user}", "gists_url": "https://api.github.com/users/chkap/gists{/gist_id}", "starred_url": "https://api.github.com/users/chkap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chkap/subscriptions", "organizations_url": "https://api.github.com/users/chkap/orgs", "repos_url": "https://api.github.com/users/chkap/repos", "events_url": "https://api.github.com/users/chkap/events{/privacy}", "received_events_url": "https://api.github.com/users/chkap/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-16T14:02:29Z", "updated_at": "2017-03-17T10:10:44Z", "closed_at": "2017-03-17T10:10:44Z", "author_association": "NONE", "body_html": "<p>The comments for the function <code>def _linear(args, output_size, bias, bias_start=0.0):</code> in tensorflow/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py says:</p>\n<pre><code>def _linear(args, output_size, bias, bias_start=0.0):\n  \"\"\"Linear map: sum_i(args[i] * W[i]), where W[i] is a variable.\n  Args:\n    args: a 2D Tensor or a list of 2D, batch x n, Tensors.\n    output_size: int, second dimension of W[i].\n    bias: boolean, whether to add a bias term or not.\n    bias_start: starting value to initialize the bias; 0 by default.\n</code></pre>\n<p>However, the function is not implemented as <code>sum_i(args[i] * W[i])</code>.<br>\nThe key parts in the implementation in line 894-897:</p>\n<pre><code>    if len(args) == 1:\n      res = math_ops.matmul(args[0], weights)\n    else:\n      res = math_ops.matmul(array_ops.concat(args, 1), weights)\n</code></pre>\n<p>The <code>args</code> list is firstly concatenated, then <code>matmul</code> with the weights tensor. This is totally different from what said in the comments that <code>Linear map: sum_i(args[i] * W[i]), where W[i] is a variable</code>.<br>\nSo, the comments should probably be rewritten like <code>Linear map: first, concatenate the args if it is a list, then matmul with a weight tensor</code>.</p>", "body_text": "The comments for the function def _linear(args, output_size, bias, bias_start=0.0): in tensorflow/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py says:\ndef _linear(args, output_size, bias, bias_start=0.0):\n  \"\"\"Linear map: sum_i(args[i] * W[i]), where W[i] is a variable.\n  Args:\n    args: a 2D Tensor or a list of 2D, batch x n, Tensors.\n    output_size: int, second dimension of W[i].\n    bias: boolean, whether to add a bias term or not.\n    bias_start: starting value to initialize the bias; 0 by default.\n\nHowever, the function is not implemented as sum_i(args[i] * W[i]).\nThe key parts in the implementation in line 894-897:\n    if len(args) == 1:\n      res = math_ops.matmul(args[0], weights)\n    else:\n      res = math_ops.matmul(array_ops.concat(args, 1), weights)\n\nThe args list is firstly concatenated, then matmul with the weights tensor. This is totally different from what said in the comments that Linear map: sum_i(args[i] * W[i]), where W[i] is a variable.\nSo, the comments should probably be rewritten like Linear map: first, concatenate the args if it is a list, then matmul with a weight tensor.", "body": "The comments for the function `def _linear(args, output_size, bias, bias_start=0.0):` in tensorflow/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py says:\r\n\r\n```\r\ndef _linear(args, output_size, bias, bias_start=0.0):\r\n  \"\"\"Linear map: sum_i(args[i] * W[i]), where W[i] is a variable.\r\n  Args:\r\n    args: a 2D Tensor or a list of 2D, batch x n, Tensors.\r\n    output_size: int, second dimension of W[i].\r\n    bias: boolean, whether to add a bias term or not.\r\n    bias_start: starting value to initialize the bias; 0 by default.\r\n```\r\nHowever, the function is not implemented as `sum_i(args[i] * W[i])`. \r\nThe key parts in the implementation in line 894-897:\r\n```\r\n    if len(args) == 1:\r\n      res = math_ops.matmul(args[0], weights)\r\n    else:\r\n      res = math_ops.matmul(array_ops.concat(args, 1), weights)\r\n```\r\nThe `args` list is firstly concatenated, then `matmul` with the weights tensor. This is totally different from what said in the comments that `Linear map: sum_i(args[i] * W[i]), where W[i] is a variable`. \r\nSo, the comments should probably be rewritten like `Linear map: first, concatenate the args if it is a list, then matmul with a weight tensor`."}
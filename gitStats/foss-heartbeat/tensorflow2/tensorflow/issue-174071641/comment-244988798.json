{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/244988798", "html_url": "https://github.com/tensorflow/tensorflow/issues/4103#issuecomment-244988798", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4103", "id": 244988798, "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDk4ODc5OA==", "user": {"login": "xu1985129", "id": 15973005, "node_id": "MDQ6VXNlcjE1OTczMDA1", "avatar_url": "https://avatars1.githubusercontent.com/u/15973005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xu1985129", "html_url": "https://github.com/xu1985129", "followers_url": "https://api.github.com/users/xu1985129/followers", "following_url": "https://api.github.com/users/xu1985129/following{/other_user}", "gists_url": "https://api.github.com/users/xu1985129/gists{/gist_id}", "starred_url": "https://api.github.com/users/xu1985129/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xu1985129/subscriptions", "organizations_url": "https://api.github.com/users/xu1985129/orgs", "repos_url": "https://api.github.com/users/xu1985129/repos", "events_url": "https://api.github.com/users/xu1985129/events{/privacy}", "received_events_url": "https://api.github.com/users/xu1985129/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-06T15:28:38Z", "updated_at": "2016-09-06T15:31:22Z", "author_association": "NONE", "body_html": "<p>Well, first time post on github. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=476135\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mkolod\">@mkolod</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=577277\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/martinwicke\">@martinwicke</a> the problem may be solved by 'sed -i \"s/nvccopts = ''/nvccopts = '-D_FORCE_INLINES '/g\" './third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl'', which replaces the empty nvccopts with a starting flag '-D_FORCE_INLINES ' from tensorflow root.</p>\n<p>I successfully compiled tensorflow with this solution.</p>\n<p>However, my environment differences are<br>\nCUDA 7.5<br>\nGCC 4.9.4<br>\nPython 3.5.2 :: Anaconda 4.1.1 (64-bit)</p>\n<p>another theoretical solution may be<br>\n'bazel build -c opt --config=cuda --verbose_failures //tensorflow/tools/pip_package:build_pip_package --per_file_copt=//tensorflow/.*.cu.cc@-D_FORCE_INLINES', which does roughly similar thing as above. However, I haven't checked this solution.<br>\nAnyway, the point is to add an extra flag of '-D_FORCE_INLINES' to nvcc compiler</p>", "body_text": "Well, first time post on github. @mkolod @martinwicke the problem may be solved by 'sed -i \"s/nvccopts = ''/nvccopts = '-D_FORCE_INLINES '/g\" './third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl'', which replaces the empty nvccopts with a starting flag '-D_FORCE_INLINES ' from tensorflow root.\nI successfully compiled tensorflow with this solution.\nHowever, my environment differences are\nCUDA 7.5\nGCC 4.9.4\nPython 3.5.2 :: Anaconda 4.1.1 (64-bit)\nanother theoretical solution may be\n'bazel build -c opt --config=cuda --verbose_failures //tensorflow/tools/pip_package:build_pip_package --per_file_copt=//tensorflow/.*.cu.cc@-D_FORCE_INLINES', which does roughly similar thing as above. However, I haven't checked this solution.\nAnyway, the point is to add an extra flag of '-D_FORCE_INLINES' to nvcc compiler", "body": "Well, first time post on github. @mkolod @martinwicke the problem may be solved by 'sed -i \"s/nvccopts = ''/nvccopts = '-D_FORCE_INLINES '/g\" './third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl'', which replaces the empty nvccopts with a starting flag '-D_FORCE_INLINES ' from tensorflow root.\n\nI successfully compiled tensorflow with this solution.\n\nHowever, my environment differences are \nCUDA 7.5\nGCC 4.9.4\nPython 3.5.2 :: Anaconda 4.1.1 (64-bit)\n\nanother theoretical solution may be \n'bazel build -c opt --config=cuda --verbose_failures //tensorflow/tools/pip_package:build_pip_package --per_file_copt=//tensorflow/.*.cu.cc@-D_FORCE_INLINES', which does roughly similar thing as above. However, I haven't checked this solution.\nAnyway, the point is to add an extra flag of '-D_FORCE_INLINES' to nvcc compiler\n"}
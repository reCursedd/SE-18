{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10869", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10869/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10869/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10869/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10869", "id": 237360010, "node_id": "MDU6SXNzdWUyMzczNjAwMTA=", "number": 10869, "title": "GPU option allow_growth and CUDA_ERROR_OUT_OF_MEMORY", "user": {"login": "CY-dev", "id": 9917093, "node_id": "MDQ6VXNlcjk5MTcwOTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/9917093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CY-dev", "html_url": "https://github.com/CY-dev", "followers_url": "https://api.github.com/users/CY-dev/followers", "following_url": "https://api.github.com/users/CY-dev/following{/other_user}", "gists_url": "https://api.github.com/users/CY-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/CY-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CY-dev/subscriptions", "organizations_url": "https://api.github.com/users/CY-dev/orgs", "repos_url": "https://api.github.com/users/CY-dev/repos", "events_url": "https://api.github.com/users/CY-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/CY-dev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-20T22:09:57Z", "updated_at": "2017-06-21T00:24:57Z", "closed_at": "2017-06-21T00:24:57Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>I tried to build a LSTM model on 30G data with a aws machine p2.xlarge with 60G memory and a gpu with 12G memory. The performance is inconsistent. Sometimes we get it to work but sometimes we encounter CUDA_ERROR_OUT_OF_MEMORY. The answer at <a href=\"https://stackoverflow.com/questions/39465503/cuda-error-out-of-memory-in-tensorflow\" rel=\"nofollow\">https://stackoverflow.com/questions/39465503/cuda-error-out-of-memory-in-tensorflow</a> suggests setting a gpu option allow_growth to False. It refers to the source code where the change could be made:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/r0.10/tensorflow/core/protobuf/config.proto\">https://github.com/tensorflow/tensorflow/blob/r0.10/tensorflow/core/protobuf/config.proto</a></p>\n<p>But in the code I notice the only line containing \"allow_growth\" is this:<br>\nbool allow_growth = 4;<br>\nIt looks strange to me. Could you explain why allow_growth is assigned a integer value 4?</p>", "body_text": "Hi,\nI tried to build a LSTM model on 30G data with a aws machine p2.xlarge with 60G memory and a gpu with 12G memory. The performance is inconsistent. Sometimes we get it to work but sometimes we encounter CUDA_ERROR_OUT_OF_MEMORY. The answer at https://stackoverflow.com/questions/39465503/cuda-error-out-of-memory-in-tensorflow suggests setting a gpu option allow_growth to False. It refers to the source code where the change could be made:\nhttps://github.com/tensorflow/tensorflow/blob/r0.10/tensorflow/core/protobuf/config.proto\nBut in the code I notice the only line containing \"allow_growth\" is this:\nbool allow_growth = 4;\nIt looks strange to me. Could you explain why allow_growth is assigned a integer value 4?", "body": "Hi,\r\n\r\nI tried to build a LSTM model on 30G data with a aws machine p2.xlarge with 60G memory and a gpu with 12G memory. The performance is inconsistent. Sometimes we get it to work but sometimes we encounter CUDA_ERROR_OUT_OF_MEMORY. The answer at https://stackoverflow.com/questions/39465503/cuda-error-out-of-memory-in-tensorflow suggests setting a gpu option allow_growth to False. It refers to the source code where the change could be made:\r\nhttps://github.com/tensorflow/tensorflow/blob/r0.10/tensorflow/core/protobuf/config.proto\r\n\r\nBut in the code I notice the only line containing \"allow_growth\" is this:\r\n  bool allow_growth = 4;\r\nIt looks strange to me. Could you explain why allow_growth is assigned a integer value 4? "}
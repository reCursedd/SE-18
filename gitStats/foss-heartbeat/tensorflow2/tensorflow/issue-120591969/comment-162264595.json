{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/162264595", "html_url": "https://github.com/tensorflow/tensorflow/issues/419#issuecomment-162264595", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/419", "id": 162264595, "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjI2NDU5NQ==", "user": {"login": "hamidb", "id": 4418982, "node_id": "MDQ6VXNlcjQ0MTg5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4418982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hamidb", "html_url": "https://github.com/hamidb", "followers_url": "https://api.github.com/users/hamidb/followers", "following_url": "https://api.github.com/users/hamidb/following{/other_user}", "gists_url": "https://api.github.com/users/hamidb/gists{/gist_id}", "starred_url": "https://api.github.com/users/hamidb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hamidb/subscriptions", "organizations_url": "https://api.github.com/users/hamidb/orgs", "repos_url": "https://api.github.com/users/hamidb/repos", "events_url": "https://api.github.com/users/hamidb/events{/privacy}", "received_events_url": "https://api.github.com/users/hamidb/received_events", "type": "User", "site_admin": false}, "created_at": "2015-12-06T02:32:35Z", "updated_at": "2015-12-06T02:36:24Z", "author_association": "NONE", "body_html": "<p>First I should  mention that there is no issue when trying the app on a Android 5.0 device. The problem happens when using KitKat device.<br>\nI followed your instruction. Still no success.<br>\nFollowing is my steps:</p>\n<h3>1- changed google/protobuf/BUILD</h3>\n<pre><code>// [\"\"] returns bazel error\nLINK_OPTS = []\n</code></pre>\n<h3>2- changed tensorflow/examples/android/BUILD</h3>\n<pre><code>cc_library(\n    name = \"tensorflow_native_libs\",\n    srcs = glob([\"jni/**/*.cc\"]),\n    hdrs = glob([\"jni/**/*.h\"]),\n    copts = [\n        \"-std=c++11\",\n        \"-mfpu=neon\",\n        \"-O2\",\n    ],\n    linkopts = [\"-llog -landroid -lm -ljnigraphics\"],\n    tags = [\n        \"manual\",\n        \"notap\",\n    ],\n    deps = [\n    #    \":dummy_pthread\", // commented\n        \"//tensorflow/core:android_tensorflow_lib\",\n    ],\n)\n</code></pre>\n<h3>3- My workspace looks:</h3>\n<pre><code>android_sdk_repository(\n    name = \"androidsdk\",\n    api_level = 20,\n    build_tools_version = \"20.0.0\",\n    # Replace with path to Android SDK on your system\n    path = \"/hamidb/software/TADP/android-sdk-linux\",\n)\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/hamidb/software/TADP/android-ndk-r10c\",\n    api_level=21)\n</code></pre>\n<h3>4- I issued (I also tried without android_arm)</h3>\n<p>bazel build --verbose_failures //tensorflow/examples/android:tensorflow_demo --config=android_arm</p>\n<h3>After running the apk file my logcat logs:</h3>\n<blockquote>\n<p>--------- beginning of /dev/log/main<br>\nD/Raydium_ts_main(  242): ## Report rate in 10 seconds =1213<br>\nI/art     ( 1219): GcCauseBackground partial concurrent mark sweep GC freed 6011(335KB) AllocSpace objects, 27(1351KB) LOS objects, 12% free, 6MB/7MB, paused 5.823ms total 48.435ms<br>\n--------- beginning of /dev/log/system<br>\nI/ActivityManager(  904): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=org.tensorflow.demo/.CameraActivity bnds=[984,1381][1176,1573]} from pid 1219<br>\nW/art     (  166): Could not get current activity<br>\nI/ActivityManager(  904): Start proc org.tensorflow.demo for activity org.tensorflow.demo/.CameraActivity: pid=11918 uid=10073 gids={50073, 1028, 1015}<br>\nW/NvAppProfileService(  904): App Profiles: Enabled<br>\nI/PowerServiceCient(  904): Successfully bound to service<br>\n<strong>_<code>E/art     (11918): dlopen(\"/data/app-lib/org.tensorflow.demo-1/libtensorflow_demo.so\", RTLD_LAZY) failed: dlopen failed: cannot locate symbol \"getpagesize\" referenced by \"libtensorflow_demo.so\"...</code></strong>_<br>\nD/AndroidRuntime(11918): Shutting down VM<br>\nE/AndroidRuntime(11918): FATAL EXCEPTION: main<br>\nE/AndroidRuntime(11918): Process: org.tensorflow.demo, PID: 11918<br>\n<strong><code>E/AndroidRuntime(11918): java.lang.UnsatisfiedLinkError: dlopen failed: cannot locate symbol \"getpagesize\" referenced by \"libtensorflow_demo.so\"...</code></strong><br>\nE/AndroidRuntime(11918):    at java.lang.Runtime.loadLibrary(Runtime.java:364)<br>\nE/AndroidRuntime(11918):    at java.lang.System.loadLibrary(System.java:526)<br>\nE/AndroidRuntime(11918):    at org.tensorflow.demo.TensorflowClassifier.(TensorflowClassifier.java:46)<br>\nE/AndroidRuntime(11918):    at org.tensorflow.demo.TensorflowImageListener.(TensorflowImageListener.java:51)<br>\nE/AndroidRuntime(11918):    at org.tensorflow.demo.CameraConnectionFragment.(CameraConnectionFragment.java:212)<br>\nE/AndroidRuntime(11918):    at org.tensorflow.demo.CameraConnectionFragment.newInstance(CameraConnectionFragment.java:91)<br>\nE/AndroidRuntime(11918):    at org.tensorflow.demo.CameraActivity.onCreate(CameraActivity.java:30)<br>\nE/AndroidRuntime(11918):    at android.app.Activity.performCreate(Activity.java:5231)<br>\nE/AndroidRuntime(11918):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)<br>\nE/AndroidRuntime(11918):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2160)<br>\nE/AndroidRuntime(11918):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2246)<br>\nE/AndroidRuntime(11918):    at android.app.ActivityThread.access$800(ActivityThread.java:136)<br>\nE/AndroidRuntime(11918):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)<br>\nE/AndroidRuntime(11918):    at android.os.Handler.dispatchMessage(Handler.java:102)<br>\nE/AndroidRuntime(11918):    at android.os.Looper.loop(Looper.java:136)<br>\nE/AndroidRuntime(11918):    at android.app.ActivityThread.main(ActivityThread.java:5030)<br>\nE/AndroidRuntime(11918):    at java.lang.reflect.Method.invoke(Native Method)<br>\nE/AndroidRuntime(11918):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)<br>\nE/AndroidRuntime(11918):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:609)<br>\nW/ActivityManager(  904):   Force finishing activity org.tensorflow.demo/.CameraActivity<br>\nW/ActivityManager(  904): Activity pause timeout for ActivityRecord{65595fd8 u0 org.tensorflow.demo/.CameraActivity t73 f}<br>\nI/Process (11918): Sending signal. PID: 11918 SIG: 9<br>\nW/InputMethodManagerService(  904): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@65367aa0 attribute=null, token = android.os.BinderProxy@651cfa98<br>\nI/ActivityManager(  904): Process org.tensorflow.demo (pid 11918) has died.<br>\nD/Raydium_ts_main(  242): ## Report rate in 10 seconds =1038</p>\n</blockquote>", "body_text": "First I should  mention that there is no issue when trying the app on a Android 5.0 device. The problem happens when using KitKat device.\nI followed your instruction. Still no success.\nFollowing is my steps:\n1- changed google/protobuf/BUILD\n// [\"\"] returns bazel error\nLINK_OPTS = []\n\n2- changed tensorflow/examples/android/BUILD\ncc_library(\n    name = \"tensorflow_native_libs\",\n    srcs = glob([\"jni/**/*.cc\"]),\n    hdrs = glob([\"jni/**/*.h\"]),\n    copts = [\n        \"-std=c++11\",\n        \"-mfpu=neon\",\n        \"-O2\",\n    ],\n    linkopts = [\"-llog -landroid -lm -ljnigraphics\"],\n    tags = [\n        \"manual\",\n        \"notap\",\n    ],\n    deps = [\n    #    \":dummy_pthread\", // commented\n        \"//tensorflow/core:android_tensorflow_lib\",\n    ],\n)\n\n3- My workspace looks:\nandroid_sdk_repository(\n    name = \"androidsdk\",\n    api_level = 20,\n    build_tools_version = \"20.0.0\",\n    # Replace with path to Android SDK on your system\n    path = \"/hamidb/software/TADP/android-sdk-linux\",\n)\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/hamidb/software/TADP/android-ndk-r10c\",\n    api_level=21)\n\n4- I issued (I also tried without android_arm)\nbazel build --verbose_failures //tensorflow/examples/android:tensorflow_demo --config=android_arm\nAfter running the apk file my logcat logs:\n\n--------- beginning of /dev/log/main\nD/Raydium_ts_main(  242): ## Report rate in 10 seconds =1213\nI/art     ( 1219): GcCauseBackground partial concurrent mark sweep GC freed 6011(335KB) AllocSpace objects, 27(1351KB) LOS objects, 12% free, 6MB/7MB, paused 5.823ms total 48.435ms\n--------- beginning of /dev/log/system\nI/ActivityManager(  904): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=org.tensorflow.demo/.CameraActivity bnds=[984,1381][1176,1573]} from pid 1219\nW/art     (  166): Could not get current activity\nI/ActivityManager(  904): Start proc org.tensorflow.demo for activity org.tensorflow.demo/.CameraActivity: pid=11918 uid=10073 gids={50073, 1028, 1015}\nW/NvAppProfileService(  904): App Profiles: Enabled\nI/PowerServiceCient(  904): Successfully bound to service\n_E/art     (11918): dlopen(\"/data/app-lib/org.tensorflow.demo-1/libtensorflow_demo.so\", RTLD_LAZY) failed: dlopen failed: cannot locate symbol \"getpagesize\" referenced by \"libtensorflow_demo.so\"..._\nD/AndroidRuntime(11918): Shutting down VM\nE/AndroidRuntime(11918): FATAL EXCEPTION: main\nE/AndroidRuntime(11918): Process: org.tensorflow.demo, PID: 11918\nE/AndroidRuntime(11918): java.lang.UnsatisfiedLinkError: dlopen failed: cannot locate symbol \"getpagesize\" referenced by \"libtensorflow_demo.so\"...\nE/AndroidRuntime(11918):    at java.lang.Runtime.loadLibrary(Runtime.java:364)\nE/AndroidRuntime(11918):    at java.lang.System.loadLibrary(System.java:526)\nE/AndroidRuntime(11918):    at org.tensorflow.demo.TensorflowClassifier.(TensorflowClassifier.java:46)\nE/AndroidRuntime(11918):    at org.tensorflow.demo.TensorflowImageListener.(TensorflowImageListener.java:51)\nE/AndroidRuntime(11918):    at org.tensorflow.demo.CameraConnectionFragment.(CameraConnectionFragment.java:212)\nE/AndroidRuntime(11918):    at org.tensorflow.demo.CameraConnectionFragment.newInstance(CameraConnectionFragment.java:91)\nE/AndroidRuntime(11918):    at org.tensorflow.demo.CameraActivity.onCreate(CameraActivity.java:30)\nE/AndroidRuntime(11918):    at android.app.Activity.performCreate(Activity.java:5231)\nE/AndroidRuntime(11918):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)\nE/AndroidRuntime(11918):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2160)\nE/AndroidRuntime(11918):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2246)\nE/AndroidRuntime(11918):    at android.app.ActivityThread.access$800(ActivityThread.java:136)\nE/AndroidRuntime(11918):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)\nE/AndroidRuntime(11918):    at android.os.Handler.dispatchMessage(Handler.java:102)\nE/AndroidRuntime(11918):    at android.os.Looper.loop(Looper.java:136)\nE/AndroidRuntime(11918):    at android.app.ActivityThread.main(ActivityThread.java:5030)\nE/AndroidRuntime(11918):    at java.lang.reflect.Method.invoke(Native Method)\nE/AndroidRuntime(11918):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)\nE/AndroidRuntime(11918):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:609)\nW/ActivityManager(  904):   Force finishing activity org.tensorflow.demo/.CameraActivity\nW/ActivityManager(  904): Activity pause timeout for ActivityRecord{65595fd8 u0 org.tensorflow.demo/.CameraActivity t73 f}\nI/Process (11918): Sending signal. PID: 11918 SIG: 9\nW/InputMethodManagerService(  904): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@65367aa0 attribute=null, token = android.os.BinderProxy@651cfa98\nI/ActivityManager(  904): Process org.tensorflow.demo (pid 11918) has died.\nD/Raydium_ts_main(  242): ## Report rate in 10 seconds =1038", "body": "First I should  mention that there is no issue when trying the app on a Android 5.0 device. The problem happens when using KitKat device.\nI followed your instruction. Still no success.\nFollowing is my steps:\n\n### 1- changed google/protobuf/BUILD\n\n```\n// [\"\"] returns bazel error\nLINK_OPTS = []\n```\n\n### 2- changed tensorflow/examples/android/BUILD\n\n```\ncc_library(\n    name = \"tensorflow_native_libs\",\n    srcs = glob([\"jni/**/*.cc\"]),\n    hdrs = glob([\"jni/**/*.h\"]),\n    copts = [\n        \"-std=c++11\",\n        \"-mfpu=neon\",\n        \"-O2\",\n    ],\n    linkopts = [\"-llog -landroid -lm -ljnigraphics\"],\n    tags = [\n        \"manual\",\n        \"notap\",\n    ],\n    deps = [\n    #    \":dummy_pthread\", // commented\n        \"//tensorflow/core:android_tensorflow_lib\",\n    ],\n)\n```\n\n### 3- My workspace looks:\n\n```\nandroid_sdk_repository(\n    name = \"androidsdk\",\n    api_level = 20,\n    build_tools_version = \"20.0.0\",\n    # Replace with path to Android SDK on your system\n    path = \"/hamidb/software/TADP/android-sdk-linux\",\n)\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/hamidb/software/TADP/android-ndk-r10c\",\n    api_level=21)\n```\n\n### 4- I issued (I also tried without android_arm)\n\nbazel build --verbose_failures //tensorflow/examples/android:tensorflow_demo --config=android_arm\n\n### After running the apk file my logcat logs:\n\n> --------- beginning of /dev/log/main\n> D/Raydium_ts_main(  242): ## Report rate in 10 seconds =1213 \n> I/art     ( 1219): GcCauseBackground partial concurrent mark sweep GC freed 6011(335KB) AllocSpace objects, 27(1351KB) LOS objects, 12% free, 6MB/7MB, paused 5.823ms total 48.435ms\n> --------- beginning of /dev/log/system\n> I/ActivityManager(  904): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=org.tensorflow.demo/.CameraActivity bnds=[984,1381][1176,1573]} from pid 1219\n> W/art     (  166): Could not get current activity\n> I/ActivityManager(  904): Start proc org.tensorflow.demo for activity org.tensorflow.demo/.CameraActivity: pid=11918 uid=10073 gids={50073, 1028, 1015}\n> W/NvAppProfileService(  904): App Profiles: Enabled\n> I/PowerServiceCient(  904): Successfully bound to service\n> **_`E/art     (11918): dlopen(\"/data/app-lib/org.tensorflow.demo-1/libtensorflow_demo.so\", RTLD_LAZY) failed: dlopen failed: cannot locate symbol \"getpagesize\" referenced by \"libtensorflow_demo.so\"...`**_\n> D/AndroidRuntime(11918): Shutting down VM\n> E/AndroidRuntime(11918): FATAL EXCEPTION: main\n> E/AndroidRuntime(11918): Process: org.tensorflow.demo, PID: 11918\n> **`E/AndroidRuntime(11918): java.lang.UnsatisfiedLinkError: dlopen failed: cannot locate symbol \"getpagesize\" referenced by \"libtensorflow_demo.so\"...`**\n> E/AndroidRuntime(11918):    at java.lang.Runtime.loadLibrary(Runtime.java:364)\n> E/AndroidRuntime(11918):    at java.lang.System.loadLibrary(System.java:526)\n> E/AndroidRuntime(11918):    at org.tensorflow.demo.TensorflowClassifier.<clinit>(TensorflowClassifier.java:46)\n> E/AndroidRuntime(11918):    at org.tensorflow.demo.TensorflowImageListener.<init>(TensorflowImageListener.java:51)\n> E/AndroidRuntime(11918):    at org.tensorflow.demo.CameraConnectionFragment.<init>(CameraConnectionFragment.java:212)\n> E/AndroidRuntime(11918):    at org.tensorflow.demo.CameraConnectionFragment.newInstance(CameraConnectionFragment.java:91)\n> E/AndroidRuntime(11918):    at org.tensorflow.demo.CameraActivity.onCreate(CameraActivity.java:30)\n> E/AndroidRuntime(11918):    at android.app.Activity.performCreate(Activity.java:5231)\n> E/AndroidRuntime(11918):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)\n> E/AndroidRuntime(11918):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2160)\n> E/AndroidRuntime(11918):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2246)\n> E/AndroidRuntime(11918):    at android.app.ActivityThread.access$800(ActivityThread.java:136)\n> E/AndroidRuntime(11918):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)\n> E/AndroidRuntime(11918):    at android.os.Handler.dispatchMessage(Handler.java:102)\n> E/AndroidRuntime(11918):    at android.os.Looper.loop(Looper.java:136)\n> E/AndroidRuntime(11918):    at android.app.ActivityThread.main(ActivityThread.java:5030)\n> E/AndroidRuntime(11918):    at java.lang.reflect.Method.invoke(Native Method)\n> E/AndroidRuntime(11918):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)\n> E/AndroidRuntime(11918):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:609)\n> W/ActivityManager(  904):   Force finishing activity org.tensorflow.demo/.CameraActivity\n> W/ActivityManager(  904): Activity pause timeout for ActivityRecord{65595fd8 u0 org.tensorflow.demo/.CameraActivity t73 f}\n> I/Process (11918): Sending signal. PID: 11918 SIG: 9\n> W/InputMethodManagerService(  904): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@65367aa0 attribute=null, token = android.os.BinderProxy@651cfa98\n> I/ActivityManager(  904): Process org.tensorflow.demo (pid 11918) has died.\n> D/Raydium_ts_main(  242): ## Report rate in 10 seconds =1038 \n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2046", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2046/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2046/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2046/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2046", "id": 149941385, "node_id": "MDU6SXNzdWUxNDk5NDEzODU=", "number": 2046, "title": "Segment fault after upgrade the protobuf for >64MB limit", "user": {"login": "doubler", "id": 1324660, "node_id": "MDQ6VXNlcjEzMjQ2NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1324660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doubler", "html_url": "https://github.com/doubler", "followers_url": "https://api.github.com/users/doubler/followers", "following_url": "https://api.github.com/users/doubler/following{/other_user}", "gists_url": "https://api.github.com/users/doubler/gists{/gist_id}", "starred_url": "https://api.github.com/users/doubler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doubler/subscriptions", "organizations_url": "https://api.github.com/users/doubler/orgs", "repos_url": "https://api.github.com/users/doubler/repos", "events_url": "https://api.github.com/users/doubler/events{/privacy}", "received_events_url": "https://api.github.com/users/doubler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2016-04-21T02:33:06Z", "updated_at": "2016-08-20T10:18:26Z", "closed_at": "2016-08-15T23:21:37Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System:  CentOS Linux release 7.2.1511 (Core)</p>\n<p>Installed version of CUDA and cuDNN:</p>\n<pre><code>-rw-r--r--. 1 root root   322936 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx. 1 root root       16 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart.so -&gt; libcudart.so.7.5\nlrwxrwxrwx. 1 root root       19 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart.so.7.5 -&gt; libcudart.so.7.5.18\n-rwxr-xr-x. 1 root root   383336 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r--. 1 root root   720192 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x. 1 root root 61453024 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x. 1 root root 61453024 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.4\n-rwxr-xr-x. 1 root root 61453024 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.4.0.7\n-rwxr-xr-x. 1 root root 11172416 4\u6708  12 01:12 /usr/local/cuda/lib64/libcudnn.so.6.5\n-rwxr-xr-x. 1 root root 11172416 4\u6708  12 01:12 /usr/local/cuda/lib64/libcudnn.so.6.5.48\n-rwxr-xr-x. 1 root root 48217000 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.7.0\n-rwxr-xr-x. 1 root root 48217000 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.7.0.64\n-rw-r--r--. 1 root root 62025862 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn_static.a\n\n</code></pre>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Install the tensorflow 0.8.0rc0<br>\npip install --upgrade <a href=\"https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0rc0-cp27-none-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0rc0-cp27-none-linux_x86_64.whl</a></li>\n<li>Upgrade the protobuf<br>\npip install --upgrade <a href=\"https://storage.googleapis.com/tensorflow/linux/cpu/protobuf-3.0.0b2.post2-cp27-none-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/cpu/protobuf-3.0.0b2.post2-cp27-none-linux_x86_64.whl</a></li>\n<li>\"import tensorflow\" will have segment fault<br>\nNo segment fault if not upgrade the protobuf.</li>\n</ol>\n<p>The core info is:<br>\n`(gdb) bt<br>\n#0  0x00007f9606e2a2f1 in std::__detail::_Map_base&lt;google::protobuf::Descriptor const*, std::pair&lt;google::protobuf::Descriptor const* const, google::protobuf::DynamicMessage::TypeInfo const*&gt;, std::allocator&lt;std::pair&lt;google::protobuf::Descriptor const* const, google::protobuf::DynamicMessage::TypeInfo const*&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;google::protobuf::Descriptor const*&gt;, google::protobuf::hash&lt;google::protobuf::Descriptor const*&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;true, false, true&gt;, true&gt;::operator[](google::protobuf::Descriptor const* const&amp;) () from /usr/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a>  0x00007f9606e2a3d3 in google::protobuf::DynamicMessageFactory::GetPrototypeNoLock(google::protobuf::Descriptor const*) ()</p>\n<p>from /usr/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115894138\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/2\">#2</a>  0x00007f9606e2b02a in google::protobuf::DynamicMessageFactory::GetPrototype(google::protobuf::Descriptor const*) () from /usr/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115896656\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/3\">#3</a>  0x00007f95ee4f5129 in google::protobuf::python::cmessage::New (cls=, unused_args=, unused_kwargs=) at google/protobuf/pyext/message.cc:1255<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115898449\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4\">#4</a>  0x00007f9618131d23 in type_call () from /lib64/libpython2.7.so.1.0<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115910900\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/5/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/5\">#5</a>  0x00007f96180dc0b3 in PyObject_Call () from /lib64/libpython2.7.so.1.0<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115911735\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/6\">#6</a>  0x00007f961817025c in PyEval_EvalFrameEx () from /lib64/libpython2.7.so.1.0<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115912111\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7\">#7</a>  0x00007f96181740bd in PyEval_EvalCodeEx () from /lib64/libpython2.7.so.1.0<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115914495\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/8\">#8</a>  0x00007f96181741c2 in PyEval_EvalCode () from /lib64/libpython2.7.so.1.0<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115914691\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/9\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/9/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/9\">#9</a>  0x00007f9618183fac in PyImport_ExecCodeModuleEx () from /lib64/libpython2.7.so.1.0<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115914766\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/10\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/10/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/10\">#10</a> 0x00007f9618184228 in load_source_module () from /lib64/libpython2.7.so.1.0`</p>\n<p>I also reported the problem here: <a href=\"https://github.com/tensorflow/serving/issues/24\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/serving/issues/24/hovercard\">tensorflow_serving issue</a></p>", "body_text": "Environment info\nOperating System:  CentOS Linux release 7.2.1511 (Core)\nInstalled version of CUDA and cuDNN:\n-rw-r--r--. 1 root root   322936 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx. 1 root root       16 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx. 1 root root       19 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x. 1 root root   383336 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r--. 1 root root   720192 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x. 1 root root 61453024 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x. 1 root root 61453024 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.4\n-rwxr-xr-x. 1 root root 61453024 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.4.0.7\n-rwxr-xr-x. 1 root root 11172416 4\u6708  12 01:12 /usr/local/cuda/lib64/libcudnn.so.6.5\n-rwxr-xr-x. 1 root root 11172416 4\u6708  12 01:12 /usr/local/cuda/lib64/libcudnn.so.6.5.48\n-rwxr-xr-x. 1 root root 48217000 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.7.0\n-rwxr-xr-x. 1 root root 48217000 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.7.0.64\n-rw-r--r--. 1 root root 62025862 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn_static.a\n\n\nSteps to reproduce\n\nInstall the tensorflow 0.8.0rc0\npip install --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0rc0-cp27-none-linux_x86_64.whl\nUpgrade the protobuf\npip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/protobuf-3.0.0b2.post2-cp27-none-linux_x86_64.whl\n\"import tensorflow\" will have segment fault\nNo segment fault if not upgrade the protobuf.\n\nThe core info is:\n`(gdb) bt\n#0  0x00007f9606e2a2f1 in std::__detail::_Map_base<google::protobuf::Descriptor const*, std::pair<google::protobuf::Descriptor const* const, google::protobuf::DynamicMessage::TypeInfo const*>, std::allocator<std::pair<google::protobuf::Descriptor const* const, google::protobuf::DynamicMessage::TypeInfo const*> >, std::__detail::_Select1st, std::equal_to<google::protobuf::Descriptor const*>, google::protobuf::hash<google::protobuf::Descriptor const*>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<true, false, true>, true>::operator[](google::protobuf::Descriptor const* const&) () from /usr/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#1  0x00007f9606e2a3d3 in google::protobuf::DynamicMessageFactory::GetPrototypeNoLock(google::protobuf::Descriptor const*) ()\nfrom /usr/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#2  0x00007f9606e2b02a in google::protobuf::DynamicMessageFactory::GetPrototype(google::protobuf::Descriptor const*) () from /usr/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#3  0x00007f95ee4f5129 in google::protobuf::python::cmessage::New (cls=, unused_args=, unused_kwargs=) at google/protobuf/pyext/message.cc:1255\n#4  0x00007f9618131d23 in type_call () from /lib64/libpython2.7.so.1.0\n#5  0x00007f96180dc0b3 in PyObject_Call () from /lib64/libpython2.7.so.1.0\n#6  0x00007f961817025c in PyEval_EvalFrameEx () from /lib64/libpython2.7.so.1.0\n#7  0x00007f96181740bd in PyEval_EvalCodeEx () from /lib64/libpython2.7.so.1.0\n#8  0x00007f96181741c2 in PyEval_EvalCode () from /lib64/libpython2.7.so.1.0\n#9  0x00007f9618183fac in PyImport_ExecCodeModuleEx () from /lib64/libpython2.7.so.1.0\n#10 0x00007f9618184228 in load_source_module () from /lib64/libpython2.7.so.1.0`\nI also reported the problem here: tensorflow_serving issue", "body": "### Environment info\n\nOperating System:  CentOS Linux release 7.2.1511 (Core)\n\nInstalled version of CUDA and cuDNN: \n\n```\n-rw-r--r--. 1 root root   322936 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx. 1 root root       16 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx. 1 root root       19 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x. 1 root root   383336 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r--. 1 root root   720192 4\u6708   5 01:42 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x. 1 root root 61453024 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x. 1 root root 61453024 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.4\n-rwxr-xr-x. 1 root root 61453024 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.4.0.7\n-rwxr-xr-x. 1 root root 11172416 4\u6708  12 01:12 /usr/local/cuda/lib64/libcudnn.so.6.5\n-rwxr-xr-x. 1 root root 11172416 4\u6708  12 01:12 /usr/local/cuda/lib64/libcudnn.so.6.5.48\n-rwxr-xr-x. 1 root root 48217000 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.7.0\n-rwxr-xr-x. 1 root root 48217000 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn.so.7.0.64\n-rw-r--r--. 1 root root 62025862 4\u6708  19 05:36 /usr/local/cuda/lib64/libcudnn_static.a\n\n```\n### Steps to reproduce\n1. Install the tensorflow 0.8.0rc0\n   pip install --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0rc0-cp27-none-linux_x86_64.whl\n2. Upgrade the protobuf\n   pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/protobuf-3.0.0b2.post2-cp27-none-linux_x86_64.whl\n3. \"import tensorflow\" will have segment fault\n   No segment fault if not upgrade the protobuf.\n\nThe core info is:\n`(gdb) bt\n#0  0x00007f9606e2a2f1 in std::__detail::_Map_base<google::protobuf::Descriptor const*, std::pair<google::protobuf::Descriptor const* const, google::protobuf::DynamicMessage::TypeInfo const*>, std::allocator<std::pair<google::protobuf::Descriptor const* const, google::protobuf::DynamicMessage::TypeInfo const*> >, std::__detail::_Select1st, std::equal_to<google::protobuf::Descriptor const*>, google::protobuf::hash<google::protobuf::Descriptor const*>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<true, false, true>, true>::operator[](google::protobuf::Descriptor const* const&) () from /usr/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#1  0x00007f9606e2a3d3 in google::protobuf::DynamicMessageFactory::GetPrototypeNoLock(google::protobuf::Descriptor const*) ()\n\n   from /usr/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#2  0x00007f9606e2b02a in google::protobuf::DynamicMessageFactory::GetPrototype(google::protobuf::Descriptor const*) () from /usr/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow.so\n#3  0x00007f95ee4f5129 in google::protobuf::python::cmessage::New (cls=<optimized out>, unused_args=<optimized out>, unused_kwargs=<optimized out>) at google/protobuf/pyext/message.cc:1255\n#4  0x00007f9618131d23 in type_call () from /lib64/libpython2.7.so.1.0\n#5  0x00007f96180dc0b3 in PyObject_Call () from /lib64/libpython2.7.so.1.0\n#6  0x00007f961817025c in PyEval_EvalFrameEx () from /lib64/libpython2.7.so.1.0\n#7  0x00007f96181740bd in PyEval_EvalCodeEx () from /lib64/libpython2.7.so.1.0\n#8  0x00007f96181741c2 in PyEval_EvalCode () from /lib64/libpython2.7.so.1.0\n#9  0x00007f9618183fac in PyImport_ExecCodeModuleEx () from /lib64/libpython2.7.so.1.0\n#10 0x00007f9618184228 in load_source_module () from /lib64/libpython2.7.so.1.0`\n\nI also reported the problem here: [tensorflow_serving issue](https://github.com/tensorflow/serving/issues/24)\n"}
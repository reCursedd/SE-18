{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23581", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23581/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23581/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23581/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23581", "id": 378185724, "node_id": "MDU6SXNzdWUzNzgxODU3MjQ=", "number": 23581, "title": "Simplest WindowDataset usage not working even for the documented examples", "user": {"login": "antifriz", "id": 6382271, "node_id": "MDQ6VXNlcjYzODIyNzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6382271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antifriz", "html_url": "https://github.com/antifriz", "followers_url": "https://api.github.com/users/antifriz/followers", "following_url": "https://api.github.com/users/antifriz/following{/other_user}", "gists_url": "https://api.github.com/users/antifriz/gists{/gist_id}", "starred_url": "https://api.github.com/users/antifriz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antifriz/subscriptions", "organizations_url": "https://api.github.com/users/antifriz/orgs", "repos_url": "https://api.github.com/users/antifriz/repos", "events_url": "https://api.github.com/users/antifriz/events{/privacy}", "received_events_url": "https://api.github.com/users/antifriz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-11-07T08:25:37Z", "updated_at": "2018-11-15T23:27:53Z", "closed_at": null, "author_association": "NONE", "body_html": "<p><strong>System information</strong></p>\n<ul>\n<li>Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no</li>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04): tensorflow/tensorflow:1.12.0 docker image, macOS 10.14</li>\n<li>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: no</li>\n<li>TensorFlow installed from (source or binary): binary</li>\n<li>TensorFlow version (use command below): 1.12.0</li>\n<li>Python version: 2.7</li>\n<li>Bazel version (if compiling from source): no</li>\n<li>GCC/Compiler version (if compiling from source): no</li>\n<li>CUDA/cuDNN version: no</li>\n<li>GPU model and memory: no</li>\n</ul>\n<p><strong>Describe the current behavior</strong></p>\n<p><code>Dataset.window</code> documentation has a few examples of which all crash in the process of graph construction (i.e. this example <code>tf.data.Dataset.range(7).window(2)</code>).</p>\n<p><strong>Describe the expected behavior</strong></p>\n<p>I would like it not to crash.</p>\n<p><strong>Code to reproduce the issue</strong></p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-c1\">__future__</span> <span class=\"pl-k\">import</span> absolute_import, division, print_function\n\n<span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\ntf.enable_eager_execution()\n\ndataset <span class=\"pl-k\">=</span> tf.data.Dataset.range(<span class=\"pl-c1\">7</span>).window(<span class=\"pl-c1\">2</span>)\n\nit <span class=\"pl-k\">=</span> dataset.make_one_shot_iterator()\n</pre></div>\n<p>The same error occurs when eager execution is disabled.</p>\n<p><strong>Other info / logs</strong></p>\n<pre><code>---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-2-4495120d82f9&gt; in &lt;module&gt;()\n      7 dataset = tf.data.Dataset.range(7).window(2)\n      8 \n----&gt; 9 it = dataset.make_one_shot_iterator()\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/data/ops/dataset_ops.pyc in make_one_shot_iterator(self)\n    178     \"\"\"\n    179     if context.executing_eagerly():\n--&gt; 180       return iterator_ops.EagerIterator(self)\n    181     # NOTE(mrry): We capture by value here to ensure that `_make_dataset()` is\n    182     # a 0-argument function.\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/data/ops/iterator_ops.pyc in __init__(self, dataset)\n    531         self._resource = gen_dataset_ops.anonymous_iterator(\n    532             output_types=self._flat_output_types,\n--&gt; 533             output_shapes=self._flat_output_shapes)\n    534         gen_dataset_ops.make_iterator(ds_variant, self._resource)\n    535         # Delete the resource when this object is deleted\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_dataset_ops.pyc in anonymous_iterator(output_types, output_shapes, name)\n     71       return anonymous_iterator_eager_fallback(\n     72           output_types=output_types, output_shapes=output_shapes, name=name,\n---&gt; 73           ctx=_ctx)\n     74     except _core._NotOkStatusException as e:\n     75       if name is not None:\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_dataset_ops.pyc in anonymous_iterator_eager_fallback(output_types, output_shapes, name, ctx)\n     89         \"Expected list for 'output_types' argument to \"\n     90         \"'anonymous_iterator' Op, not %r.\" % output_types)\n---&gt; 91   output_types = [_execute.make_type(_t, \"output_types\") for _t in output_types]\n     92   if not isinstance(output_shapes, (list, tuple)):\n     93     raise TypeError(\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/execute.pyc in make_type(v, arg_name)\n    124   except TypeError:\n    125     raise TypeError(\"Expected DataType for argument '%s' not %s.\" %\n--&gt; 126                     (arg_name, repr(v)))\n    127   i = v.as_datatype_enum\n    128   return i\n\nTypeError: Expected DataType for argument 'output_types' not &lt;tensorflow.python.data.ops.dataset_ops._NestedDatasetComponent object at 0x7feadf71f9d0&gt;.\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): tensorflow/tensorflow:1.12.0 docker image, macOS 10.14\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: no\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): 1.12.0\nPython version: 2.7\nBazel version (if compiling from source): no\nGCC/Compiler version (if compiling from source): no\nCUDA/cuDNN version: no\nGPU model and memory: no\n\nDescribe the current behavior\nDataset.window documentation has a few examples of which all crash in the process of graph construction (i.e. this example tf.data.Dataset.range(7).window(2)).\nDescribe the expected behavior\nI would like it not to crash.\nCode to reproduce the issue\nfrom __future__ import absolute_import, division, print_function\n\nimport tensorflow as tf\n\ntf.enable_eager_execution()\n\ndataset = tf.data.Dataset.range(7).window(2)\n\nit = dataset.make_one_shot_iterator()\n\nThe same error occurs when eager execution is disabled.\nOther info / logs\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-2-4495120d82f9> in <module>()\n      7 dataset = tf.data.Dataset.range(7).window(2)\n      8 \n----> 9 it = dataset.make_one_shot_iterator()\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/data/ops/dataset_ops.pyc in make_one_shot_iterator(self)\n    178     \"\"\"\n    179     if context.executing_eagerly():\n--> 180       return iterator_ops.EagerIterator(self)\n    181     # NOTE(mrry): We capture by value here to ensure that `_make_dataset()` is\n    182     # a 0-argument function.\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/data/ops/iterator_ops.pyc in __init__(self, dataset)\n    531         self._resource = gen_dataset_ops.anonymous_iterator(\n    532             output_types=self._flat_output_types,\n--> 533             output_shapes=self._flat_output_shapes)\n    534         gen_dataset_ops.make_iterator(ds_variant, self._resource)\n    535         # Delete the resource when this object is deleted\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_dataset_ops.pyc in anonymous_iterator(output_types, output_shapes, name)\n     71       return anonymous_iterator_eager_fallback(\n     72           output_types=output_types, output_shapes=output_shapes, name=name,\n---> 73           ctx=_ctx)\n     74     except _core._NotOkStatusException as e:\n     75       if name is not None:\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_dataset_ops.pyc in anonymous_iterator_eager_fallback(output_types, output_shapes, name, ctx)\n     89         \"Expected list for 'output_types' argument to \"\n     90         \"'anonymous_iterator' Op, not %r.\" % output_types)\n---> 91   output_types = [_execute.make_type(_t, \"output_types\") for _t in output_types]\n     92   if not isinstance(output_shapes, (list, tuple)):\n     93     raise TypeError(\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/execute.pyc in make_type(v, arg_name)\n    124   except TypeError:\n    125     raise TypeError(\"Expected DataType for argument '%s' not %s.\" %\n--> 126                     (arg_name, repr(v)))\n    127   i = v.as_datatype_enum\n    128   return i\n\nTypeError: Expected DataType for argument 'output_types' not <tensorflow.python.data.ops.dataset_ops._NestedDatasetComponent object at 0x7feadf71f9d0>.", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): tensorflow/tensorflow:1.12.0 docker image, macOS 10.14\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: no\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): no\r\n- GCC/Compiler version (if compiling from source): no\r\n- CUDA/cuDNN version: no\r\n- GPU model and memory: no\r\n\r\n**Describe the current behavior**\r\n\r\n`Dataset.window` documentation has a few examples of which all crash in the process of graph construction (i.e. this example `tf.data.Dataset.range(7).window(2)`).\r\n\r\n**Describe the expected behavior**\r\n\r\nI would like it not to crash.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\n\r\nfrom __future__ import absolute_import, division, print_function\r\n\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\n\r\ndataset = tf.data.Dataset.range(7).window(2)\r\n\r\nit = dataset.make_one_shot_iterator()\r\n\r\n```\r\n\r\nThe same error occurs when eager execution is disabled.\r\n\r\n**Other info / logs**\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-2-4495120d82f9> in <module>()\r\n      7 dataset = tf.data.Dataset.range(7).window(2)\r\n      8 \r\n----> 9 it = dataset.make_one_shot_iterator()\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/data/ops/dataset_ops.pyc in make_one_shot_iterator(self)\r\n    178     \"\"\"\r\n    179     if context.executing_eagerly():\r\n--> 180       return iterator_ops.EagerIterator(self)\r\n    181     # NOTE(mrry): We capture by value here to ensure that `_make_dataset()` is\r\n    182     # a 0-argument function.\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/data/ops/iterator_ops.pyc in __init__(self, dataset)\r\n    531         self._resource = gen_dataset_ops.anonymous_iterator(\r\n    532             output_types=self._flat_output_types,\r\n--> 533             output_shapes=self._flat_output_shapes)\r\n    534         gen_dataset_ops.make_iterator(ds_variant, self._resource)\r\n    535         # Delete the resource when this object is deleted\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_dataset_ops.pyc in anonymous_iterator(output_types, output_shapes, name)\r\n     71       return anonymous_iterator_eager_fallback(\r\n     72           output_types=output_types, output_shapes=output_shapes, name=name,\r\n---> 73           ctx=_ctx)\r\n     74     except _core._NotOkStatusException as e:\r\n     75       if name is not None:\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_dataset_ops.pyc in anonymous_iterator_eager_fallback(output_types, output_shapes, name, ctx)\r\n     89         \"Expected list for 'output_types' argument to \"\r\n     90         \"'anonymous_iterator' Op, not %r.\" % output_types)\r\n---> 91   output_types = [_execute.make_type(_t, \"output_types\") for _t in output_types]\r\n     92   if not isinstance(output_shapes, (list, tuple)):\r\n     93     raise TypeError(\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/execute.pyc in make_type(v, arg_name)\r\n    124   except TypeError:\r\n    125     raise TypeError(\"Expected DataType for argument '%s' not %s.\" %\r\n--> 126                     (arg_name, repr(v)))\r\n    127   i = v.as_datatype_enum\r\n    128   return i\r\n\r\nTypeError: Expected DataType for argument 'output_types' not <tensorflow.python.data.ops.dataset_ops._NestedDatasetComponent object at 0x7feadf71f9d0>.\r\n```"}
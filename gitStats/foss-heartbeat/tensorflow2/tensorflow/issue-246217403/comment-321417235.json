{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/321417235", "html_url": "https://github.com/tensorflow/tensorflow/issues/11839#issuecomment-321417235", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11839", "id": 321417235, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTQxNzIzNQ==", "user": {"login": "gauss-clb", "id": 11674304, "node_id": "MDQ6VXNlcjExNjc0MzA0", "avatar_url": "https://avatars2.githubusercontent.com/u/11674304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gauss-clb", "html_url": "https://github.com/gauss-clb", "followers_url": "https://api.github.com/users/gauss-clb/followers", "following_url": "https://api.github.com/users/gauss-clb/following{/other_user}", "gists_url": "https://api.github.com/users/gauss-clb/gists{/gist_id}", "starred_url": "https://api.github.com/users/gauss-clb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gauss-clb/subscriptions", "organizations_url": "https://api.github.com/users/gauss-clb/orgs", "repos_url": "https://api.github.com/users/gauss-clb/repos", "events_url": "https://api.github.com/users/gauss-clb/events{/privacy}", "received_events_url": "https://api.github.com/users/gauss-clb/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-10T00:28:51Z", "updated_at": "2017-08-10T00:33:44Z", "author_association": "NONE", "body_html": "<p>It is wrong if you use <code>saver = tf.train.Saver(variables_to_restore)</code>, because the shadow variables aren't saved in check point. And the <code>variables_to_restore</code> map shadow name to moving average variable(just mean in check point, <code>key=shadow_name, value=moving average variable</code>), so when you <code>restore(variables_to_restore)</code>, the moving average variables will be load by themselves, not their shadows. But our purpose is to load moving average variables  with their shadows.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1766524\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sguada\">@sguada</a></p>", "body_text": "It is wrong if you use saver = tf.train.Saver(variables_to_restore), because the shadow variables aren't saved in check point. And the variables_to_restore map shadow name to moving average variable(just mean in check point, key=shadow_name, value=moving average variable), so when you restore(variables_to_restore), the moving average variables will be load by themselves, not their shadows. But our purpose is to load moving average variables  with their shadows.\n@sguada", "body": "It is wrong if you use `saver = tf.train.Saver(variables_to_restore)`, because the shadow variables aren't saved in check point. And the `variables_to_restore` map shadow name to moving average variable(just mean in check point, `key=shadow_name, value=moving average variable`), so when you `restore(variables_to_restore)`, the moving average variables will be load by themselves, not their shadows. But our purpose is to load moving average variables  with their shadows.\r\n\r\n@sguada "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/320317077", "html_url": "https://github.com/tensorflow/tensorflow/pull/12044#issuecomment-320317077", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12044", "id": 320317077, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDMxNzA3Nw==", "user": {"login": "Mazecreator", "id": 18412448, "node_id": "MDQ6VXNlcjE4NDEyNDQ4", "avatar_url": "https://avatars2.githubusercontent.com/u/18412448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mazecreator", "html_url": "https://github.com/Mazecreator", "followers_url": "https://api.github.com/users/Mazecreator/followers", "following_url": "https://api.github.com/users/Mazecreator/following{/other_user}", "gists_url": "https://api.github.com/users/Mazecreator/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mazecreator/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mazecreator/subscriptions", "organizations_url": "https://api.github.com/users/Mazecreator/orgs", "repos_url": "https://api.github.com/users/Mazecreator/repos", "events_url": "https://api.github.com/users/Mazecreator/events{/privacy}", "received_events_url": "https://api.github.com/users/Mazecreator/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-04T18:11:00Z", "updated_at": "2017-08-04T18:11:00Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">This message was created automatically by mail delivery software.\n\nA message that you sent could not be delivered to one or more of its\nrecipients. This is a temporary error. The following address(es) deferred:\n\n  mazecreator@gmail.com\n    Domain mazecreator.com has exceeded the max emails per hour (29/25 (115%)) allowed.  Message will be reattempted later</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-signature-reply\">------- This is a copy of the message, including all the headers. ------\nReceived: from o11.sgmail.github.com ([167.89.101.202]:2958)\n\tby server2.lowesthostingrates.com with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)\n\t(Exim 4.89)\n\t(envelope-from &lt;bounces+848413-e6d9-mazecreator=mazecreator.com@sgmail.github.com&gt;)\n\tid 1ddgsG-0003QU-I7\n\tfor mazecreator@mazecreator.com; Fri, 04 Aug 2017 12:59:30 -0500\nDKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=github.com;\n\th=from:reply-to:to:cc:subject:mime-version:content-type:content-transfer-encoding:list-id:list-archive:list-post:list-unsubscribe;\n\ts=s20150108; bh=NvO5B3vmfojaNDd6C0u+AIQthRc=; b=aXJn+ZuGpg1OuPNN\n\tMx89X13fUEwaltVuCh+YjBGW3tn3J7/K24ZAOrjAZh95IHOpzccZPj+8xlaRmM85\n\tI2QWbhMR8dZev3cVcBH0swyxnGgNf15lVYB/Prl4N+VZmjJcznXjirFqrTb9VZ++\n\t3cx+MSW97rkJRUx0eTt5nfObVXk=\nReceived: by filter0553p1mdw1.sendgrid.net with SMTP id filter0553p1mdw1-3629-5984B867-4F\n        2017-08-04 18:09:43.709876163 +0000 UTC\nReceived: from github-smtp2a-ext-cp1-prd.iad.github.net (github-smtp2a-ext-cp1-prd.iad.github.net [192.30.253.16])\n\tby ismtpd0026p1mdw1.sendgrid.net (SG) with ESMTP id h2CLpfkzRRmoRQ6eG1yeaA\n\tfor &lt;mazecreator@mazecreator.com&gt;; Fri, 04 Aug 2017 18:09:43.653 +0000 (UTC)\nDate: Fri, 04 Aug 2017 18:09:43 +0000 (UTC)\nFrom: Niranjan Hasabnis &lt;notifications@github.com&gt;\nReply-To: tensorflow/tensorflow &lt;reply@reply.github.com&gt;\nTo: tensorflow/tensorflow &lt;tensorflow@noreply.github.com&gt;\nCc: Subscribed &lt;subscribed@noreply.github.com&gt;\nMessage-ID: &lt;tensorflow/tensorflow/pull/12044@github.com&gt;\nSubject: [tensorflow/tensorflow] Removing visited_node hash table - fixing\n multinode shape mismatch issue (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>)\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\nPrecedence: list\nX-GitHub-Sender: nhasabni\nX-GitHub-Recipient: Mazecreator\nX-GitHub-Reason: subscribed\nList-ID: tensorflow/tensorflow &lt;tensorflow.tensorflow.github.com&gt;\nList-Archive: <a href=\"https://github.com/tensorflow/tensorflow\">https://github.com/tensorflow/tensorflow</a>\nList-Post: &lt;mailto:reply@reply.github.com&gt;\nList-Unsubscribe: &lt;mailto:unsub+0118f3a01da1ab456eb0bf67c67bc4a63f8a4acf2ef3bf6492cf00000001159c7a6792a169ce0ec95e35@reply.github.com&gt;,\n &lt;<a href=\"https://github.com/notifications/unsubscribe/ARjzoKfhfsfeNTZVCM31sEd-FijKm9z2ks5sU15ngaJpZM4OuBZn\">https://github.com/notifications/unsubscribe/ARjzoKfhfsfeNTZVCM31sEd-FijKm9z2ks5sU15ngaJpZM4OuBZn</a>&gt;\nX-Auto-Response-Suppress: All\nX-GitHub-Recipient-Address: mazecreator@mazecreator.com\nX-SG-EID: BJ4qYjf5a3yL0lCrdDNghY4YYR+k1a+cluU6wEX1JqxAs5RoPBq771Vp5mLYI+BT7Eb8cdCYl8yOuw\n LEip2+5He0jxemwyUj29hbNqPf6VY1TgjAYLHWDMRdSqP1tMJMDgvD0ASLg+lEq7vcVv4jWEdtxQfT\n lGl15ehK4L7OKPEfsF4vU/7PaXE/DwcePVGo4eZ0pwpNZ4pWScNPvHRvwuldz1kMifjZuRN9GlFZnO\n RcucdT9kRjbncps95ECKKY\nX-Spam-Status: No, score=\nX-Spam-Score:\nX-Spam-Bar:\nX-Ham-Report:\nX-Spam-Flag: NO</div>\n<div class=\"email-signature-reply\">----==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\nThis PR fixes an issue that arises in multinode setup. MklLayoutRewritePass\nmaintains a hash table for visited nodes, and the hash table is part of the\npass and used for every graph being rewritten. But it looks like in multinode\nsetup, multiple graphs may be processed simulteneously leading to incorrect\nmodifications to the hash table. So removing the hash table as we do not\nreally need it.\nYou can view, comment on, or merge this pull request online at:\n\n  <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>\n</div>\n<div class=\"email-signature-reply\">-- Commit Summary --\n\n  * Removing visited_node hash table - fixing multinode shape mismatch issue</div>\n<div class=\"email-signature-reply\">-- File Changes --\n\n    M tensorflow/core/graph/mkl_layout_pass.cc (41)</div>\n<div class=\"email-signature-reply\">-- Patch Links --\n\n<a href=\"https://github.com/tensorflow/tensorflow/pull/12044.patch\">https://github.com/tensorflow/tensorflow/pull/12044.patch</a>\n<a href=\"https://github.com/tensorflow/tensorflow/pull/12044.diff\">https://github.com/tensorflow/tensorflow/pull/12044.diff</a>\n</div>\n<div class=\"email-signature-reply\">-- \nYou are receiving this because you are subscribed to this thread.\nReply to this email directly or view it on GitHub:\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>\n</div>\n<div class=\"email-signature-reply\">----==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n&lt;p&gt;This PR fixes an issue that arises in multinode setup. MklLayoutRewritePass&lt;br&gt;\nmaintains a hash table for visited nodes, and the hash table is part of the&lt;br&gt;\npass and used for every graph being rewritten. But it looks like in multinode&lt;br&gt;\nsetup, multiple graphs may be processed simulteneously leading to incorrect&lt;br&gt;\nmodifications to the hash table. So removing the hash table as we do not&lt;br&gt;\nreally need it.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;h4&gt;You can view, comment on, or merge this pull request online at:&lt;/h4&gt;\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&lt;a href='<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>'&gt;https://github.com/tensorflow/tensorflow/pull/12044&lt;/a&gt;&lt;/p&gt;\n\n&lt;h4&gt;Commit Summary&lt;/h4&gt;\n&lt;ul&gt;\n  &lt;li&gt;Removing visited_node hash table - fixing multinode shape mismatch issue&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h4&gt;File Changes&lt;/h4&gt;\n&lt;ul&gt;\n  &lt;li&gt;\n    &lt;strong&gt;M&lt;/strong&gt;\n    &lt;a href=\"<a href=\"https://github.com/tensorflow/tensorflow/pull/12044/files#diff-0%22&gt;tensorflow/core/graph/mkl_layout_pass.cc&lt;/a\">https://github.com/tensorflow/tensorflow/pull/12044/files#diff-0\"&gt;tensorflow/core/graph/mkl_layout_pass.cc&lt;/a</a>&gt;\n    (41)\n  &lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h4&gt;Patch Links:&lt;/h4&gt;\n&lt;ul&gt;\n  &lt;li&gt;&lt;a href='<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>.patch'&gt;https://github.com/tensorflow/tensorflow/pull/12044.patch&lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href='<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>.diff'&gt;https://github.com/tensorflow/tensorflow/pull/12044.diff&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p style=\"font-size:small;-webkit-text-size-adjust:none;color:<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"124581563\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/666\" href=\"https://github.com/tensorflow/tensorflow/issues/666\">#666</a>;\"&gt;&amp;mdash;&lt;br /&gt;You are receiving this because you are subscribed to this thread.&lt;br /&gt;Reply to this email directly, &lt;a href=\"<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>\"&gt;view it on GitHub&lt;/a&gt;, or &lt;a href=\"<a href=\"https://github.com/notifications/unsubscribe-auth/ARjzoAojCzqfYlGLwSgf9MHXS9rDWNuVks5sU15ngaJpZM4OuBZn%22&gt;mute\">https://github.com/notifications/unsubscribe-auth/ARjzoAojCzqfYlGLwSgf9MHXS9rDWNuVks5sU15ngaJpZM4OuBZn\"&gt;mute</a> the thread&lt;/a&gt;.&lt;img alt=\"\" height=\"1\" src=\"<a href=\"https://github.com/notifications/beacon/ARjzoOtzpCCLRFZcBc5U1eyxYRtV6xBIks5sU15ngaJpZM4OuBZn.gif\">https://github.com/notifications/beacon/ARjzoOtzpCCLRFZcBc5U1eyxYRtV6xBIks5sU15ngaJpZM4OuBZn.gif</a>\" width=\"1\" /&gt;&lt;/p&gt;\n&lt;div itemscope itemtype=\"<a href=\"http://schema.org/EmailMessage\">http://schema.org/EmailMessage</a>\"&gt;\n&lt;div itemprop=\"action\" itemscope itemtype=\"<a href=\"http://schema.org/ViewAction\">http://schema.org/ViewAction</a>\"&gt;\n  &lt;link itemprop=\"url\" href=\"<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>\"&gt;&lt;/link&gt;\n  &lt;meta itemprop=\"name\" content=\"View Pull Request\"&gt;&lt;/meta&gt;\n&lt;/div&gt;\n&lt;meta itemprop=\"description\" content=\"View this Pull Request on GitHub\"&gt;&lt;/meta&gt;\n&lt;/div&gt;\n\n&lt;script type=\"application/json\" data-scope=\"inboxmarkup\"&gt;{\"api_version\":\"1.0\",\"publisher\":{\"api_key\":\"05dde50f1d1a384dd78767c55493e4bb\",\"name\":\"GitHub\"},\"entity\":{\"external_key\":\"github/tensorflow/tensorflow\",\"title\":\"tensorflow/tensorflow\",\"subtitle\":\"GitHub repository\",\"main_image_url\":\"<a href=\"https://cloud.githubusercontent.com/assets/143418/17495839/a5054eac-5d88-11e6-95fc-7290892c7bb5.png%22,%22avatar_image_url%22:%22https://cloud.githubusercontent.com/assets/143418/15842166/7c72db34-2c0b-11e6-9aed-b52498112777.png%22,%22action%22:%7B%22name%22:%22Open\">https://cloud.githubusercontent.com/assets/143418/17495839/a5054eac-5d88-11e6-95fc-7290892c7bb5.png\",\"avatar_image_url\":\"https://cloud.githubusercontent.com/assets/143418/15842166/7c72db34-2c0b-11e6-9aed-b52498112777.png\",\"action\":{\"name\":\"Open</a> in GitHub\",\"url\":\"<a href=\"https://github.com/tensorflow/tensorflow%22%7D%7D,%22updates%22:%7B%22snippets%22:%5B%7B%22icon%22:%22DESCRIPTION%22,%22message%22:%22Removing\">https://github.com/tensorflow/tensorflow\"}},\"updates\":{\"snippets\":[{\"icon\":\"DESCRIPTION\",\"message\":\"Removing</a> visited_node hash table - fixing multinode shape mismatch issue (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>)\"}],\"action\":{\"name\":\"View Pull Request\",\"url\":\"<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"248077877\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12044\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\">#12044</a>\"}}}&lt;/script&gt;</div>\n<div class=\"email-signature-reply\">----==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d--</div>\n</div>", "body_text": "This message was created automatically by mail delivery software.\n\nA message that you sent could not be delivered to one or more of its\nrecipients. This is a temporary error. The following address(es) deferred:\n\n  mazecreator@gmail.com\n    Domain mazecreator.com has exceeded the max emails per hour (29/25 (115%)) allowed.  Message will be reattempted later\n\u2026\n------- This is a copy of the message, including all the headers. ------\nReceived: from o11.sgmail.github.com ([167.89.101.202]:2958)\n\tby server2.lowesthostingrates.com with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)\n\t(Exim 4.89)\n\t(envelope-from <bounces+848413-e6d9-mazecreator=mazecreator.com@sgmail.github.com>)\n\tid 1ddgsG-0003QU-I7\n\tfor mazecreator@mazecreator.com; Fri, 04 Aug 2017 12:59:30 -0500\nDKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=github.com;\n\th=from:reply-to:to:cc:subject:mime-version:content-type:content-transfer-encoding:list-id:list-archive:list-post:list-unsubscribe;\n\ts=s20150108; bh=NvO5B3vmfojaNDd6C0u+AIQthRc=; b=aXJn+ZuGpg1OuPNN\n\tMx89X13fUEwaltVuCh+YjBGW3tn3J7/K24ZAOrjAZh95IHOpzccZPj+8xlaRmM85\n\tI2QWbhMR8dZev3cVcBH0swyxnGgNf15lVYB/Prl4N+VZmjJcznXjirFqrTb9VZ++\n\t3cx+MSW97rkJRUx0eTt5nfObVXk=\nReceived: by filter0553p1mdw1.sendgrid.net with SMTP id filter0553p1mdw1-3629-5984B867-4F\n        2017-08-04 18:09:43.709876163 +0000 UTC\nReceived: from github-smtp2a-ext-cp1-prd.iad.github.net (github-smtp2a-ext-cp1-prd.iad.github.net [192.30.253.16])\n\tby ismtpd0026p1mdw1.sendgrid.net (SG) with ESMTP id h2CLpfkzRRmoRQ6eG1yeaA\n\tfor <mazecreator@mazecreator.com>; Fri, 04 Aug 2017 18:09:43.653 +0000 (UTC)\nDate: Fri, 04 Aug 2017 18:09:43 +0000 (UTC)\nFrom: Niranjan Hasabnis <notifications@github.com>\nReply-To: tensorflow/tensorflow <reply@reply.github.com>\nTo: tensorflow/tensorflow <tensorflow@noreply.github.com>\nCc: Subscribed <subscribed@noreply.github.com>\nMessage-ID: <tensorflow/tensorflow/pull/12044@github.com>\nSubject: [tensorflow/tensorflow] Removing visited_node hash table - fixing\n multinode shape mismatch issue (#12044)\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\nPrecedence: list\nX-GitHub-Sender: nhasabni\nX-GitHub-Recipient: Mazecreator\nX-GitHub-Reason: subscribed\nList-ID: tensorflow/tensorflow <tensorflow.tensorflow.github.com>\nList-Archive: https://github.com/tensorflow/tensorflow\nList-Post: <mailto:reply@reply.github.com>\nList-Unsubscribe: <mailto:unsub+0118f3a01da1ab456eb0bf67c67bc4a63f8a4acf2ef3bf6492cf00000001159c7a6792a169ce0ec95e35@reply.github.com>,\n <https://github.com/notifications/unsubscribe/ARjzoKfhfsfeNTZVCM31sEd-FijKm9z2ks5sU15ngaJpZM4OuBZn>\nX-Auto-Response-Suppress: All\nX-GitHub-Recipient-Address: mazecreator@mazecreator.com\nX-SG-EID: BJ4qYjf5a3yL0lCrdDNghY4YYR+k1a+cluU6wEX1JqxAs5RoPBq771Vp5mLYI+BT7Eb8cdCYl8yOuw\n LEip2+5He0jxemwyUj29hbNqPf6VY1TgjAYLHWDMRdSqP1tMJMDgvD0ASLg+lEq7vcVv4jWEdtxQfT\n lGl15ehK4L7OKPEfsF4vU/7PaXE/DwcePVGo4eZ0pwpNZ4pWScNPvHRvwuldz1kMifjZuRN9GlFZnO\n RcucdT9kRjbncps95ECKKY\nX-Spam-Status: No, score=\nX-Spam-Score:\nX-Spam-Bar:\nX-Ham-Report:\nX-Spam-Flag: NO\n----==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\nThis PR fixes an issue that arises in multinode setup. MklLayoutRewritePass\nmaintains a hash table for visited nodes, and the hash table is part of the\npass and used for every graph being rewritten. But it looks like in multinode\nsetup, multiple graphs may be processed simulteneously leading to incorrect\nmodifications to the hash table. So removing the hash table as we do not\nreally need it.\nYou can view, comment on, or merge this pull request online at:\n\n  #12044\n\n-- Commit Summary --\n\n  * Removing visited_node hash table - fixing multinode shape mismatch issue\n-- File Changes --\n\n    M tensorflow/core/graph/mkl_layout_pass.cc (41)\n-- Patch Links --\n\nhttps://github.com/tensorflow/tensorflow/pull/12044.patch\nhttps://github.com/tensorflow/tensorflow/pull/12044.diff\n\n-- \nYou are receiving this because you are subscribed to this thread.\nReply to this email directly or view it on GitHub:\n#12044\n\n----==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n<p>This PR fixes an issue that arises in multinode setup. MklLayoutRewritePass<br>\nmaintains a hash table for visited nodes, and the hash table is part of the<br>\npass and used for every graph being rewritten. But it looks like in multinode<br>\nsetup, multiple graphs may be processed simulteneously leading to incorrect<br>\nmodifications to the hash table. So removing the hash table as we do not<br>\nreally need it.</p>\n\n<hr>\n\n<h4>You can view, comment on, or merge this pull request online at:</h4>\n<p>&nbsp;&nbsp;<a href='#12044'>https://github.com/tensorflow/tensorflow/pull/12044</a></p>\n\n<h4>Commit Summary</h4>\n<ul>\n  <li>Removing visited_node hash table - fixing multinode shape mismatch issue</li>\n</ul>\n\n<h4>File Changes</h4>\n<ul>\n  <li>\n    <strong>M</strong>\n    <a href=\"https://github.com/tensorflow/tensorflow/pull/12044/files#diff-0\">tensorflow/core/graph/mkl_layout_pass.cc</a>\n    (41)\n  </li>\n</ul>\n\n<h4>Patch Links:</h4>\n<ul>\n  <li><a href='#12044.patch'>https://github.com/tensorflow/tensorflow/pull/12044.patch</a></li>\n  <li><a href='#12044.diff'>https://github.com/tensorflow/tensorflow/pull/12044.diff</a></li>\n</ul>\n\n<p style=\"font-size:small;-webkit-text-size-adjust:none;color:#666;\">&mdash;<br />You are receiving this because you are subscribed to this thread.<br />Reply to this email directly, <a href=\"#12044\">view it on GitHub</a>, or <a href=\"https://github.com/notifications/unsubscribe-auth/ARjzoAojCzqfYlGLwSgf9MHXS9rDWNuVks5sU15ngaJpZM4OuBZn\">mute the thread</a>.<img alt=\"\" height=\"1\" src=\"https://github.com/notifications/beacon/ARjzoOtzpCCLRFZcBc5U1eyxYRtV6xBIks5sU15ngaJpZM4OuBZn.gif\" width=\"1\" /></p>\n<div itemscope itemtype=\"http://schema.org/EmailMessage\">\n<div itemprop=\"action\" itemscope itemtype=\"http://schema.org/ViewAction\">\n  <link itemprop=\"url\" href=\"#12044\"></link>\n  <meta itemprop=\"name\" content=\"View Pull Request\"></meta>\n</div>\n<meta itemprop=\"description\" content=\"View this Pull Request on GitHub\"></meta>\n</div>\n\n<script type=\"application/json\" data-scope=\"inboxmarkup\">{\"api_version\":\"1.0\",\"publisher\":{\"api_key\":\"05dde50f1d1a384dd78767c55493e4bb\",\"name\":\"GitHub\"},\"entity\":{\"external_key\":\"github/tensorflow/tensorflow\",\"title\":\"tensorflow/tensorflow\",\"subtitle\":\"GitHub repository\",\"main_image_url\":\"https://cloud.githubusercontent.com/assets/143418/17495839/a5054eac-5d88-11e6-95fc-7290892c7bb5.png\",\"avatar_image_url\":\"https://cloud.githubusercontent.com/assets/143418/15842166/7c72db34-2c0b-11e6-9aed-b52498112777.png\",\"action\":{\"name\":\"Open in GitHub\",\"url\":\"https://github.com/tensorflow/tensorflow\"}},\"updates\":{\"snippets\":[{\"icon\":\"DESCRIPTION\",\"message\":\"Removing visited_node hash table - fixing multinode shape mismatch issue (#12044)\"}],\"action\":{\"name\":\"View Pull Request\",\"url\":\"#12044\"}}}</script>\n----==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d--", "body": "This message was created automatically by mail delivery software.\n\nA message that you sent could not be delivered to one or more of its\nrecipients. This is a temporary error. The following address(es) deferred:\n\n  mazecreator@gmail.com\n    Domain mazecreator.com has exceeded the max emails per hour (29/25 (115%)) allowed.  Message will be reattempted later\n\n------- This is a copy of the message, including all the headers. ------\nReceived: from o11.sgmail.github.com ([167.89.101.202]:2958)\n\tby server2.lowesthostingrates.com with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)\n\t(Exim 4.89)\n\t(envelope-from <bounces+848413-e6d9-mazecreator=mazecreator.com@sgmail.github.com>)\n\tid 1ddgsG-0003QU-I7\n\tfor mazecreator@mazecreator.com; Fri, 04 Aug 2017 12:59:30 -0500\nDKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=github.com; \n\th=from:reply-to:to:cc:subject:mime-version:content-type:content-transfer-encoding:list-id:list-archive:list-post:list-unsubscribe; \n\ts=s20150108; bh=NvO5B3vmfojaNDd6C0u+AIQthRc=; b=aXJn+ZuGpg1OuPNN\n\tMx89X13fUEwaltVuCh+YjBGW3tn3J7/K24ZAOrjAZh95IHOpzccZPj+8xlaRmM85\n\tI2QWbhMR8dZev3cVcBH0swyxnGgNf15lVYB/Prl4N+VZmjJcznXjirFqrTb9VZ++\n\t3cx+MSW97rkJRUx0eTt5nfObVXk=\nReceived: by filter0553p1mdw1.sendgrid.net with SMTP id filter0553p1mdw1-3629-5984B867-4F\n        2017-08-04 18:09:43.709876163 +0000 UTC\nReceived: from github-smtp2a-ext-cp1-prd.iad.github.net (github-smtp2a-ext-cp1-prd.iad.github.net [192.30.253.16])\n\tby ismtpd0026p1mdw1.sendgrid.net (SG) with ESMTP id h2CLpfkzRRmoRQ6eG1yeaA\n\tfor <mazecreator@mazecreator.com>; Fri, 04 Aug 2017 18:09:43.653 +0000 (UTC)\nDate: Fri, 04 Aug 2017 18:09:43 +0000 (UTC)\nFrom: Niranjan Hasabnis <notifications@github.com>\nReply-To: tensorflow/tensorflow <reply@reply.github.com>\nTo: tensorflow/tensorflow <tensorflow@noreply.github.com>\nCc: Subscribed <subscribed@noreply.github.com>\nMessage-ID: <tensorflow/tensorflow/pull/12044@github.com>\nSubject: [tensorflow/tensorflow] Removing visited_node hash table - fixing\n multinode shape mismatch issue (#12044)\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\nPrecedence: list\nX-GitHub-Sender: nhasabni\nX-GitHub-Recipient: Mazecreator\nX-GitHub-Reason: subscribed\nList-ID: tensorflow/tensorflow <tensorflow.tensorflow.github.com>\nList-Archive: https://github.com/tensorflow/tensorflow\nList-Post: <mailto:reply@reply.github.com>\nList-Unsubscribe: <mailto:unsub+0118f3a01da1ab456eb0bf67c67bc4a63f8a4acf2ef3bf6492cf00000001159c7a6792a169ce0ec95e35@reply.github.com>,\n <https://github.com/notifications/unsubscribe/ARjzoKfhfsfeNTZVCM31sEd-FijKm9z2ks5sU15ngaJpZM4OuBZn>\nX-Auto-Response-Suppress: All\nX-GitHub-Recipient-Address: mazecreator@mazecreator.com\nX-SG-EID: BJ4qYjf5a3yL0lCrdDNghY4YYR+k1a+cluU6wEX1JqxAs5RoPBq771Vp5mLYI+BT7Eb8cdCYl8yOuw\n LEip2+5He0jxemwyUj29hbNqPf6VY1TgjAYLHWDMRdSqP1tMJMDgvD0ASLg+lEq7vcVv4jWEdtxQfT\n lGl15ehK4L7OKPEfsF4vU/7PaXE/DwcePVGo4eZ0pwpNZ4pWScNPvHRvwuldz1kMifjZuRN9GlFZnO\n RcucdT9kRjbncps95ECKKY\nX-Spam-Status: No, score=\nX-Spam-Score:\nX-Spam-Bar:\nX-Ham-Report:\nX-Spam-Flag: NO\n\n----==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\nThis PR fixes an issue that arises in multinode setup. MklLayoutRewritePass\nmaintains a hash table for visited nodes, and the hash table is part of the\npass and used for every graph being rewritten. But it looks like in multinode\nsetup, multiple graphs may be processed simulteneously leading to incorrect\nmodifications to the hash table. So removing the hash table as we do not\nreally need it.\nYou can view, comment on, or merge this pull request online at:\n\n  https://github.com/tensorflow/tensorflow/pull/12044\n\n-- Commit Summary --\n\n  * Removing visited_node hash table - fixing multinode shape mismatch issue\n\n-- File Changes --\n\n    M tensorflow/core/graph/mkl_layout_pass.cc (41)\n\n-- Patch Links --\n\nhttps://github.com/tensorflow/tensorflow/pull/12044.patch\nhttps://github.com/tensorflow/tensorflow/pull/12044.diff\n\n-- \nYou are receiving this because you are subscribed to this thread.\nReply to this email directly or view it on GitHub:\nhttps://github.com/tensorflow/tensorflow/pull/12044\n\n----==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n<p>This PR fixes an issue that arises in multinode setup. MklLayoutRewritePass<br>\nmaintains a hash table for visited nodes, and the hash table is part of the<br>\npass and used for every graph being rewritten. But it looks like in multinode<br>\nsetup, multiple graphs may be processed simulteneously leading to incorrect<br>\nmodifications to the hash table. So removing the hash table as we do not<br>\nreally need it.</p>\n\n<hr>\n\n<h4>You can view, comment on, or merge this pull request online at:</h4>\n<p>&nbsp;&nbsp;<a href='https://github.com/tensorflow/tensorflow/pull/12044'>https://github.com/tensorflow/tensorflow/pull/12044</a></p>\n\n<h4>Commit Summary</h4>\n<ul>\n  <li>Removing visited_node hash table - fixing multinode shape mismatch issue</li>\n</ul>\n\n<h4>File Changes</h4>\n<ul>\n  <li>\n    <strong>M</strong>\n    <a href=\"https://github.com/tensorflow/tensorflow/pull/12044/files#diff-0\">tensorflow/core/graph/mkl_layout_pass.cc</a>\n    (41)\n  </li>\n</ul>\n\n<h4>Patch Links:</h4>\n<ul>\n  <li><a href='https://github.com/tensorflow/tensorflow/pull/12044.patch'>https://github.com/tensorflow/tensorflow/pull/12044.patch</a></li>\n  <li><a href='https://github.com/tensorflow/tensorflow/pull/12044.diff'>https://github.com/tensorflow/tensorflow/pull/12044.diff</a></li>\n</ul>\n\n<p style=\"font-size:small;-webkit-text-size-adjust:none;color:#666;\">&mdash;<br />You are receiving this because you are subscribed to this thread.<br />Reply to this email directly, <a href=\"https://github.com/tensorflow/tensorflow/pull/12044\">view it on GitHub</a>, or <a href=\"https://github.com/notifications/unsubscribe-auth/ARjzoAojCzqfYlGLwSgf9MHXS9rDWNuVks5sU15ngaJpZM4OuBZn\">mute the thread</a>.<img alt=\"\" height=\"1\" src=\"https://github.com/notifications/beacon/ARjzoOtzpCCLRFZcBc5U1eyxYRtV6xBIks5sU15ngaJpZM4OuBZn.gif\" width=\"1\" /></p>\n<div itemscope itemtype=\"http://schema.org/EmailMessage\">\n<div itemprop=\"action\" itemscope itemtype=\"http://schema.org/ViewAction\">\n  <link itemprop=\"url\" href=\"https://github.com/tensorflow/tensorflow/pull/12044\"></link>\n  <meta itemprop=\"name\" content=\"View Pull Request\"></meta>\n</div>\n<meta itemprop=\"description\" content=\"View this Pull Request on GitHub\"></meta>\n</div>\n\n<script type=\"application/json\" data-scope=\"inboxmarkup\">{\"api_version\":\"1.0\",\"publisher\":{\"api_key\":\"05dde50f1d1a384dd78767c55493e4bb\",\"name\":\"GitHub\"},\"entity\":{\"external_key\":\"github/tensorflow/tensorflow\",\"title\":\"tensorflow/tensorflow\",\"subtitle\":\"GitHub repository\",\"main_image_url\":\"https://cloud.githubusercontent.com/assets/143418/17495839/a5054eac-5d88-11e6-95fc-7290892c7bb5.png\",\"avatar_image_url\":\"https://cloud.githubusercontent.com/assets/143418/15842166/7c72db34-2c0b-11e6-9aed-b52498112777.png\",\"action\":{\"name\":\"Open in GitHub\",\"url\":\"https://github.com/tensorflow/tensorflow\"}},\"updates\":{\"snippets\":[{\"icon\":\"DESCRIPTION\",\"message\":\"Removing visited_node hash table - fixing multinode shape mismatch issue (#12044)\"}],\"action\":{\"name\":\"View Pull Request\",\"url\":\"https://github.com/tensorflow/tensorflow/pull/12044\"}}}</script>\n\n----==_mimepart_5984b8675f8cc_5f933fb873449c2c30804d--\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/270939221", "html_url": "https://github.com/tensorflow/tensorflow/pull/6615#issuecomment-270939221", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6615", "id": 270939221, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDkzOTIyMQ==", "user": {"login": "DavidNorman", "id": 606831, "node_id": "MDQ6VXNlcjYwNjgzMQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/606831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidNorman", "html_url": "https://github.com/DavidNorman", "followers_url": "https://api.github.com/users/DavidNorman/followers", "following_url": "https://api.github.com/users/DavidNorman/following{/other_user}", "gists_url": "https://api.github.com/users/DavidNorman/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidNorman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidNorman/subscriptions", "organizations_url": "https://api.github.com/users/DavidNorman/orgs", "repos_url": "https://api.github.com/users/DavidNorman/repos", "events_url": "https://api.github.com/users/DavidNorman/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidNorman/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-06T16:16:47Z", "updated_at": "2017-01-06T16:16:47Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I'm not sure i fully understand what is going on in the placer.  I have traced some of the state.</p>\n<pre><code>Graphdef : versions = producer: 20;\nconst1 = Const[dtype=DT_FLOAT, value=Tensor&lt;type: float shape: [] values: 1&gt;, _device=\"/device:CPU:0\"]();\nconst2 = Const[dtype=DT_FLOAT, value=Tensor&lt;type: float shape: [] values: 2&gt;, _device=\"/device:CPU:1\"]();\nadd = Add[T=DT_FLOAT, _device=\"/device:CPU:2\"](const1, const2);\nmul = Mul[T=DT_FLOAT, _device=\"/device:CPU:2\"](const1, const2);\nadd_1 = Add[T=DT_FLOAT, _device=\"/device:CPU:2\"](add, mul);\n\nNode const2 has assigned name \nNode const1 has assigned name \nNode mul has assigned name \nNode add has assigned name \nNode add_1 has assigned name \n.[u'/job:localhost/replica:0/task:0/cpu:1', u'/job:localhost/replica:0/task:0/cpu:0', u'/job:localhost/replica:0/task:0/cpu:2']\n</code></pre>\n<p>the first batch is the graphdef showing that the nodes in the testAnalysisAndAllocations test (of //tensorflow/python:timeline_test) know the explicit placements that have been made for them.  The 'Node const2 has assigned name' is saying that node-&gt;assigned_device_name() in simple_placer.cc has no value (is skipped in the test on line ~720).</p>\n<p>Why isn't the assigned name that is present in the graphdef present in the placer where it is deliberately skipping over things that are pre-placed?</p>", "body_text": "I'm not sure i fully understand what is going on in the placer.  I have traced some of the state.\nGraphdef : versions = producer: 20;\nconst1 = Const[dtype=DT_FLOAT, value=Tensor<type: float shape: [] values: 1>, _device=\"/device:CPU:0\"]();\nconst2 = Const[dtype=DT_FLOAT, value=Tensor<type: float shape: [] values: 2>, _device=\"/device:CPU:1\"]();\nadd = Add[T=DT_FLOAT, _device=\"/device:CPU:2\"](const1, const2);\nmul = Mul[T=DT_FLOAT, _device=\"/device:CPU:2\"](const1, const2);\nadd_1 = Add[T=DT_FLOAT, _device=\"/device:CPU:2\"](add, mul);\n\nNode const2 has assigned name \nNode const1 has assigned name \nNode mul has assigned name \nNode add has assigned name \nNode add_1 has assigned name \n.[u'/job:localhost/replica:0/task:0/cpu:1', u'/job:localhost/replica:0/task:0/cpu:0', u'/job:localhost/replica:0/task:0/cpu:2']\n\nthe first batch is the graphdef showing that the nodes in the testAnalysisAndAllocations test (of //tensorflow/python:timeline_test) know the explicit placements that have been made for them.  The 'Node const2 has assigned name' is saying that node->assigned_device_name() in simple_placer.cc has no value (is skipped in the test on line ~720).\nWhy isn't the assigned name that is present in the graphdef present in the placer where it is deliberately skipping over things that are pre-placed?", "body": "I'm not sure i fully understand what is going on in the placer.  I have traced some of the state.\r\n\r\n```\r\nGraphdef : versions = producer: 20;\r\nconst1 = Const[dtype=DT_FLOAT, value=Tensor<type: float shape: [] values: 1>, _device=\"/device:CPU:0\"]();\r\nconst2 = Const[dtype=DT_FLOAT, value=Tensor<type: float shape: [] values: 2>, _device=\"/device:CPU:1\"]();\r\nadd = Add[T=DT_FLOAT, _device=\"/device:CPU:2\"](const1, const2);\r\nmul = Mul[T=DT_FLOAT, _device=\"/device:CPU:2\"](const1, const2);\r\nadd_1 = Add[T=DT_FLOAT, _device=\"/device:CPU:2\"](add, mul);\r\n\r\nNode const2 has assigned name \r\nNode const1 has assigned name \r\nNode mul has assigned name \r\nNode add has assigned name \r\nNode add_1 has assigned name \r\n.[u'/job:localhost/replica:0/task:0/cpu:1', u'/job:localhost/replica:0/task:0/cpu:0', u'/job:localhost/replica:0/task:0/cpu:2']\r\n```\r\n\r\nthe first batch is the graphdef showing that the nodes in the testAnalysisAndAllocations test (of //tensorflow/python:timeline_test) know the explicit placements that have been made for them.  The 'Node const2 has assigned name' is saying that node->assigned_device_name() in simple_placer.cc has no value (is skipped in the test on line ~720).\r\n\r\nWhy isn't the assigned name that is present in the graphdef present in the placer where it is deliberately skipping over things that are pre-placed?\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/311887695", "html_url": "https://github.com/tensorflow/tensorflow/issues/11122#issuecomment-311887695", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11122", "id": 311887695, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTg4NzY5NQ==", "user": {"login": "mikowals", "id": 1331470, "node_id": "MDQ6VXNlcjEzMzE0NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1331470?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikowals", "html_url": "https://github.com/mikowals", "followers_url": "https://api.github.com/users/mikowals/followers", "following_url": "https://api.github.com/users/mikowals/following{/other_user}", "gists_url": "https://api.github.com/users/mikowals/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikowals/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikowals/subscriptions", "organizations_url": "https://api.github.com/users/mikowals/orgs", "repos_url": "https://api.github.com/users/mikowals/repos", "events_url": "https://api.github.com/users/mikowals/events{/privacy}", "received_events_url": "https://api.github.com/users/mikowals/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-29T07:39:12Z", "updated_at": "2017-06-29T07:39:12Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I encounter this also having built on MacOS.  I noticed that the error goes away if running in a  test block if that helps identify what is happening.</p>\n<p>This code does not error:</p>\n<pre><code>import tensorflow as tf\n\nclass BugTest(tf.test.TestCase):\n  def bug_test(self):\n\n    with tf.Session() as sess:  #this can also use self.test_session()\n\tx1 = tf.random_normal(shape=[64, 64, 32, 32], seed=1.)\n\tres = sess.run(x1)\n\nif __name__ == '__main__':\n  tf.test.main()\n</code></pre>\n<p>This code gives the error:</p>\n<pre><code>import tensorflow as tf\nwith tf.Session() as sess:\n   x1 = tf.random_normal(shape=[64, 64, 32, 32], seed=1.)\n   res = sess.run(x1)\n</code></pre>", "body_text": "I encounter this also having built on MacOS.  I noticed that the error goes away if running in a  test block if that helps identify what is happening.\nThis code does not error:\nimport tensorflow as tf\n\nclass BugTest(tf.test.TestCase):\n  def bug_test(self):\n\n    with tf.Session() as sess:  #this can also use self.test_session()\n\tx1 = tf.random_normal(shape=[64, 64, 32, 32], seed=1.)\n\tres = sess.run(x1)\n\nif __name__ == '__main__':\n  tf.test.main()\n\nThis code gives the error:\nimport tensorflow as tf\nwith tf.Session() as sess:\n   x1 = tf.random_normal(shape=[64, 64, 32, 32], seed=1.)\n   res = sess.run(x1)", "body": "I encounter this also having built on MacOS.  I noticed that the error goes away if running in a  test block if that helps identify what is happening.\r\n\r\nThis code does not error:\r\n\r\n    import tensorflow as tf\r\n\r\n    class BugTest(tf.test.TestCase):\r\n      def bug_test(self):\r\n  \r\n  \t    with tf.Session() as sess:  #this can also use self.test_session()\r\n\t\tx1 = tf.random_normal(shape=[64, 64, 32, 32], seed=1.)\r\n\t\tres = sess.run(x1)\r\n\r\n    if __name__ == '__main__':\r\n\t  tf.test.main()\r\n\r\nThis code gives the error:\r\n\r\n    import tensorflow as tf\r\n    with tf.Session() as sess:\r\n       x1 = tf.random_normal(shape=[64, 64, 32, 32], seed=1.)\r\n       res = sess.run(x1)\r\n\r\n"}
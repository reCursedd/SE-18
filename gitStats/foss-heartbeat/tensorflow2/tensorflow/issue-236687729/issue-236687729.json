{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10801", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10801/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10801/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10801/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10801", "id": 236687729, "node_id": "MDU6SXNzdWUyMzY2ODc3Mjk=", "number": 10801, "title": "tf.reshape fails for Tensor with valid shape parameter", "user": {"login": "RylanSchaeffer", "id": 8942987, "node_id": "MDQ6VXNlcjg5NDI5ODc=", "avatar_url": "https://avatars3.githubusercontent.com/u/8942987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RylanSchaeffer", "html_url": "https://github.com/RylanSchaeffer", "followers_url": "https://api.github.com/users/RylanSchaeffer/followers", "following_url": "https://api.github.com/users/RylanSchaeffer/following{/other_user}", "gists_url": "https://api.github.com/users/RylanSchaeffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/RylanSchaeffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RylanSchaeffer/subscriptions", "organizations_url": "https://api.github.com/users/RylanSchaeffer/orgs", "repos_url": "https://api.github.com/users/RylanSchaeffer/repos", "events_url": "https://api.github.com/users/RylanSchaeffer/events{/privacy}", "received_events_url": "https://api.github.com/users/RylanSchaeffer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-17T22:29:43Z", "updated_at": "2017-06-18T14:10:09Z", "closed_at": "2017-06-18T14:09:58Z", "author_association": "NONE", "body_html": "<p>I don't know if my problem is truly a bug with TensorFlow, but I think it is. My problem is that <code>tf.reshape(x, shape=(sequence_length, 4))</code> fails even when <code>x</code> is a tensor and the shape provided is valid. Reshape returns the following error: <code>TypeError: List of Tensors when single Tensor expected</code></p>\n<p>Some background: I have a number of CSVs that I converted to <code>SequenceExample</code>s and stored as <code>TFRecord</code>s to use to train dynamic RNNs. The length of each sequence can vary. I can successfully read the <code>SequenceExamples</code> using <code>parse_single_sequence_example</code>, which returns a tensor of shape <code>(?,)</code> for each of my four feature tensors and each of my four label tensors. I then stack the four feature tensors to create <code>x</code> with shape <code>(?, 4)</code> and type <code>&lt;class 'tensorflow.python.framework.ops.Tensor'&gt;</code>. I create a similar tensor of labels <code>y</code> with shape <code>(?, 4)</code> and type <code>&lt;class 'tensorflow.python.framework.ops.Tensor'&gt;</code>. Everything is good.</p>\n<p>Then, I'd like to create minibatches based on similar length sequences using <code>tf.contrib.training.bucket_by_sequence_length</code>, but if I pass in <code>input_length=x.shape[0]</code>, I receive the following error: <code>ValueError: Cannot convert an unknown Dimension to a Tensor: ?</code>. Since I know the sequence length when creating the <code>SequenceExample</code>s, I modified my code to add the sequence length (an integer) as a context feature. Then, when I read my features and labels, I try to reshape them as follows:</p>\n<pre><code>        sequence_length = context_parsed['length']\n        tf.reshape(x, shape=(sequence_length, 4))\n</code></pre>\n<p>where <code>sequence_length</code> has type <code>&lt;class 'tensorflow.python.framework.ops.Tensor'&gt;</code> and shape <code>()</code>. This raises the following error: <code>TypeError: List of Tensors when single Tensor expected</code>. However, <code>x</code> is a Tensor, not a list of Tensors. This is why I think there may be a bug in TensorFlow's <code>tf.reshape()</code> function.</p>\n<p>My TensorFlow version: TensorFlow version: v1.2.0-rc0-24-g94484aa 1.2.0-rc1</p>\n<p>If it helps, I could post one of my .tfrecord files and the code necessary to create this error.</p>", "body_text": "I don't know if my problem is truly a bug with TensorFlow, but I think it is. My problem is that tf.reshape(x, shape=(sequence_length, 4)) fails even when x is a tensor and the shape provided is valid. Reshape returns the following error: TypeError: List of Tensors when single Tensor expected\nSome background: I have a number of CSVs that I converted to SequenceExamples and stored as TFRecords to use to train dynamic RNNs. The length of each sequence can vary. I can successfully read the SequenceExamples using parse_single_sequence_example, which returns a tensor of shape (?,) for each of my four feature tensors and each of my four label tensors. I then stack the four feature tensors to create x with shape (?, 4) and type <class 'tensorflow.python.framework.ops.Tensor'>. I create a similar tensor of labels y with shape (?, 4) and type <class 'tensorflow.python.framework.ops.Tensor'>. Everything is good.\nThen, I'd like to create minibatches based on similar length sequences using tf.contrib.training.bucket_by_sequence_length, but if I pass in input_length=x.shape[0], I receive the following error: ValueError: Cannot convert an unknown Dimension to a Tensor: ?. Since I know the sequence length when creating the SequenceExamples, I modified my code to add the sequence length (an integer) as a context feature. Then, when I read my features and labels, I try to reshape them as follows:\n        sequence_length = context_parsed['length']\n        tf.reshape(x, shape=(sequence_length, 4))\n\nwhere sequence_length has type <class 'tensorflow.python.framework.ops.Tensor'> and shape (). This raises the following error: TypeError: List of Tensors when single Tensor expected. However, x is a Tensor, not a list of Tensors. This is why I think there may be a bug in TensorFlow's tf.reshape() function.\nMy TensorFlow version: TensorFlow version: v1.2.0-rc0-24-g94484aa 1.2.0-rc1\nIf it helps, I could post one of my .tfrecord files and the code necessary to create this error.", "body": "I don't know if my problem is truly a bug with TensorFlow, but I think it is. My problem is that `tf.reshape(x, shape=(sequence_length, 4))` fails even when `x` is a tensor and the shape provided is valid. Reshape returns the following error: `TypeError: List of Tensors when single Tensor expected`\r\n\r\nSome background: I have a number of CSVs that I converted to `SequenceExample`s and stored as `TFRecord`s to use to train dynamic RNNs. The length of each sequence can vary. I can successfully read the `SequenceExamples` using `parse_single_sequence_example`, which returns a tensor of shape `(?,)` for each of my four feature tensors and each of my four label tensors. I then stack the four feature tensors to create `x` with shape `(?, 4)` and type `<class 'tensorflow.python.framework.ops.Tensor'>`. I create a similar tensor of labels `y` with shape `(?, 4)` and type `<class 'tensorflow.python.framework.ops.Tensor'>`. Everything is good.\r\n\r\nThen, I'd like to create minibatches based on similar length sequences using `tf.contrib.training.bucket_by_sequence_length`, but if I pass in `input_length=x.shape[0]`, I receive the following error: `ValueError: Cannot convert an unknown Dimension to a Tensor: ?`. Since I know the sequence length when creating the `SequenceExample`s, I modified my code to add the sequence length (an integer) as a context feature. Then, when I read my features and labels, I try to reshape them as follows:\r\n\r\n```\r\n        sequence_length = context_parsed['length']\r\n        tf.reshape(x, shape=(sequence_length, 4))\r\n```\r\n\r\nwhere `sequence_length` has type `<class 'tensorflow.python.framework.ops.Tensor'>` and shape `()`. This raises the following error: `TypeError: List of Tensors when single Tensor expected`. However, `x` is a Tensor, not a list of Tensors. This is why I think there may be a bug in TensorFlow's `tf.reshape()` function.\r\n\r\nMy TensorFlow version: TensorFlow version: v1.2.0-rc0-24-g94484aa 1.2.0-rc1\r\n\r\nIf it helps, I could post one of my .tfrecord files and the code necessary to create this error.\r\n"}
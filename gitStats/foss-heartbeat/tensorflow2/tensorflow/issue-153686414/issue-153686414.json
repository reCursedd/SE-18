{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2278", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2278/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2278/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2278/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2278", "id": 153686414, "node_id": "MDU6SXNzdWUxNTM2ODY0MTQ=", "number": 2278, "title": "OS X segfault on import", "user": {"login": "pikeas", "id": 686573, "node_id": "MDQ6VXNlcjY4NjU3Mw==", "avatar_url": "https://avatars0.githubusercontent.com/u/686573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pikeas", "html_url": "https://github.com/pikeas", "followers_url": "https://api.github.com/users/pikeas/followers", "following_url": "https://api.github.com/users/pikeas/following{/other_user}", "gists_url": "https://api.github.com/users/pikeas/gists{/gist_id}", "starred_url": "https://api.github.com/users/pikeas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pikeas/subscriptions", "organizations_url": "https://api.github.com/users/pikeas/orgs", "repos_url": "https://api.github.com/users/pikeas/repos", "events_url": "https://api.github.com/users/pikeas/events{/privacy}", "received_events_url": "https://api.github.com/users/pikeas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2016-05-09T00:40:21Z", "updated_at": "2017-01-06T12:41:47Z", "closed_at": "2016-05-10T22:30:34Z", "author_association": "NONE", "body_html": "<p>OS X 10.11.2, with CUDA:</p>\n<pre><code>/Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib -&gt; libcudart.7.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\n/Developer/NVIDIA/CUDA-7.5/lib/libcudnn.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudnn.dylib -&gt; libcudnn.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudnn_static.a\n</code></pre>\n<p>Tensorflow built according to <a href=\"https://medium.com/@fabmilo/how-to-compile-tensorflow-with-cuda-support-on-osx-fd27108e27e1#.v8ibv617m\" rel=\"nofollow\">https://medium.com/@fabmilo/how-to-compile-tensorflow-with-cuda-support-on-osx-fd27108e27e1#.v8ibv617m</a>, main difference being that CUDA toolkit was installed from NVidia installer instead of via <code>brew cask install cuda</code>, and using homebrew Python 3.5 instead of Anaconda Python.</p>\n<p>In other words:</p>\n<ol>\n<li>Install CUDA toolkit.</li>\n<li>Download cudnn-7.5-osx-x64-v5.0-rc.tgz and move files to /Developer/NVIDIA/CUDA-7.5/{include,lib}</li>\n<li>Install bazel 0.2.1 via brew.</li>\n<li>Create Python 3.5 virtualenv, install numpy 1.11 into it so tensorflow can build against it(?).</li>\n<li>Clone tensorflow repo.</li>\n<li>Build with:</li>\n</ol>\n<pre><code>PYTHON_BIN_PATH=\"/Users/pikeas/.virtualenvs/hnn/bin/python\" CUDA_TOOLKIT_PATH=\"/Developer/NVIDIA/CUDA-7.5\" CUDNN_INSTALL_PATH=\"/Developer/NVIDIA/CUDA-7.5\" TF_UNOFFICIAL_SETTING=1 TF_NEED_CUDA=1 TF_CUDA_COMPUTE_CAPABILITIES=\"3.0\" TF_CUDNN_VERSION=\"5\" TF_CUDA_VERSION=\"7.5\" TF_CUDA_VERSION_TOOLKIT=7.5 ./configure\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\nbazel-bin/tensorflow/tools/pip_package/build_pip_package\n</code></pre>\n<ol start=\"7\">\n<li><code>export DYLD_LIBRARY_PATH=/Developer/NVIDIA/CUDA-7.5/lib</code></li>\n<li>Install built tensorflow-0.8.0-py3-none-any.whl into virtualenv.</li>\n<li><code>import tensorflow</code> fails with:</li>\n</ol>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\n[1]    78583 segmentation fault  python\n</code></pre>\n<p>I've tried removing scipy per the recent similar Linux issue, which didn't help.</p>", "body_text": "OS X 10.11.2, with CUDA:\n/Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib -> libcudart.7.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\n/Developer/NVIDIA/CUDA-7.5/lib/libcudnn.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudnn.dylib -> libcudnn.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudnn_static.a\n\nTensorflow built according to https://medium.com/@fabmilo/how-to-compile-tensorflow-with-cuda-support-on-osx-fd27108e27e1#.v8ibv617m, main difference being that CUDA toolkit was installed from NVidia installer instead of via brew cask install cuda, and using homebrew Python 3.5 instead of Anaconda Python.\nIn other words:\n\nInstall CUDA toolkit.\nDownload cudnn-7.5-osx-x64-v5.0-rc.tgz and move files to /Developer/NVIDIA/CUDA-7.5/{include,lib}\nInstall bazel 0.2.1 via brew.\nCreate Python 3.5 virtualenv, install numpy 1.11 into it so tensorflow can build against it(?).\nClone tensorflow repo.\nBuild with:\n\nPYTHON_BIN_PATH=\"/Users/pikeas/.virtualenvs/hnn/bin/python\" CUDA_TOOLKIT_PATH=\"/Developer/NVIDIA/CUDA-7.5\" CUDNN_INSTALL_PATH=\"/Developer/NVIDIA/CUDA-7.5\" TF_UNOFFICIAL_SETTING=1 TF_NEED_CUDA=1 TF_CUDA_COMPUTE_CAPABILITIES=\"3.0\" TF_CUDNN_VERSION=\"5\" TF_CUDA_VERSION=\"7.5\" TF_CUDA_VERSION_TOOLKIT=7.5 ./configure\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\nbazel-bin/tensorflow/tools/pip_package/build_pip_package\n\n\nexport DYLD_LIBRARY_PATH=/Developer/NVIDIA/CUDA-7.5/lib\nInstall built tensorflow-0.8.0-py3-none-any.whl into virtualenv.\nimport tensorflow fails with:\n\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\n[1]    78583 segmentation fault  python\n\nI've tried removing scipy per the recent similar Linux issue, which didn't help.", "body": "OS X 10.11.2, with CUDA:\n\n```\n/Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib -> libcudart.7.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\n/Developer/NVIDIA/CUDA-7.5/lib/libcudnn.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudnn.dylib -> libcudnn.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudnn_static.a\n```\n\nTensorflow built according to https://medium.com/@fabmilo/how-to-compile-tensorflow-with-cuda-support-on-osx-fd27108e27e1#.v8ibv617m, main difference being that CUDA toolkit was installed from NVidia installer instead of via `brew cask install cuda`, and using homebrew Python 3.5 instead of Anaconda Python.\n\nIn other words:\n\n1) Install CUDA toolkit.\n2) Download cudnn-7.5-osx-x64-v5.0-rc.tgz and move files to /Developer/NVIDIA/CUDA-7.5/{include,lib}\n3) Install bazel 0.2.1 via brew.\n4) Create Python 3.5 virtualenv, install numpy 1.11 into it so tensorflow can build against it(?).\n5) Clone tensorflow repo.\n6) Build with:\n\n```\nPYTHON_BIN_PATH=\"/Users/pikeas/.virtualenvs/hnn/bin/python\" CUDA_TOOLKIT_PATH=\"/Developer/NVIDIA/CUDA-7.5\" CUDNN_INSTALL_PATH=\"/Developer/NVIDIA/CUDA-7.5\" TF_UNOFFICIAL_SETTING=1 TF_NEED_CUDA=1 TF_CUDA_COMPUTE_CAPABILITIES=\"3.0\" TF_CUDNN_VERSION=\"5\" TF_CUDA_VERSION=\"7.5\" TF_CUDA_VERSION_TOOLKIT=7.5 ./configure\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\nbazel-bin/tensorflow/tools/pip_package/build_pip_package\n```\n\n7) `export DYLD_LIBRARY_PATH=/Developer/NVIDIA/CUDA-7.5/lib`\n8) Install built tensorflow-0.8.0-py3-none-any.whl into virtualenv.\n9) `import tensorflow` fails with:\n\n```\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\n[1]    78583 segmentation fault  python\n```\n\nI've tried removing scipy per the recent similar Linux issue, which didn't help.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9108", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9108/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9108/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9108/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9108", "id": 220712844, "node_id": "MDU6SXNzdWUyMjA3MTI4NDQ=", "number": 9108, "title": "tf.while_loop giving unexpected result when used with tf.assign() during run time", "user": {"login": "sibyjackgrove", "id": 25213730, "node_id": "MDQ6VXNlcjI1MjEzNzMw", "avatar_url": "https://avatars0.githubusercontent.com/u/25213730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sibyjackgrove", "html_url": "https://github.com/sibyjackgrove", "followers_url": "https://api.github.com/users/sibyjackgrove/followers", "following_url": "https://api.github.com/users/sibyjackgrove/following{/other_user}", "gists_url": "https://api.github.com/users/sibyjackgrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/sibyjackgrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sibyjackgrove/subscriptions", "organizations_url": "https://api.github.com/users/sibyjackgrove/orgs", "repos_url": "https://api.github.com/users/sibyjackgrove/repos", "events_url": "https://api.github.com/users/sibyjackgrove/events{/privacy}", "received_events_url": "https://api.github.com/users/sibyjackgrove/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-04-10T17:19:53Z", "updated_at": "2017-06-16T19:12:49Z", "closed_at": "2017-06-16T19:12:49Z", "author_association": "CONTRIBUTOR", "body_html": "<p>NOTE: Issues that are not bugs or feature requests will be closed. Please ask usage questions on StackOverflow.</p>\n<h3>You must complete this information or else your issue will be closed</h3>\n<ul>\n<li><em>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)?</em>: Yes</li>\n<li><em>TensorFlow installed from (source or binary)?</em>: binary</li>\n<li><em>TensorFlow version</em>: 1.0.0</li>\n<li><em>Bazel version (if compiling from source)</em>: NA</li>\n<li><em>CUDA/cuDNN version</em>:  NA</li>\n<li><em>GPU Model and Memory</em>: NA</li>\n<li><em>Exact command to reproduce</em>:</li>\n</ul>\n<h3>Describe the problem clearly</h3>\n<p>tf.while_loop with is not working as expected when used with tf.assign()</p>\n<p>In the below example code, the reset_x operation seems to be preventing the variable 'x' from updating as per per logic in loop1. if I print the output after loop1 has been run, I can see that x is still zero. However I I confirmed that the loop is working by printing output of loop1. It seems resent_x op is being used inside the tf.while_loop() during run time instead of only resetting x back to 0 after loop has finished. If I were to remove reset_x then the variable x is getting updated by the loop.</p>\n<p>body = lamda x: tf.assign_add(x,1)<br>\nloop1 = tf.while_loop(cond,body, [x])<br>\nx_op = tf.reduce_sum(tf.abs(x))<br>\nreset_x = tf.assign(x,[0])<br>\nwith tf.Session() as sess:<br>\n......<br>\n......<br>\nfor in range (100):<br>\nsess.run(loop1)<br>\nprint(sess.run(x))<br>\nsess.run(x_op)<br>\nsess.run(reset_x)</p>\n<h3>Source Code / Logs</h3>\n<p>Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full-traceback. Large logs and files should be attached. Try to reproducible test-case code the bare-minimum necessary to generate the problem</p>", "body_text": "NOTE: Issues that are not bugs or feature requests will be closed. Please ask usage questions on StackOverflow.\nYou must complete this information or else your issue will be closed\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow)?: Yes\nTensorFlow installed from (source or binary)?: binary\nTensorFlow version: 1.0.0\nBazel version (if compiling from source): NA\nCUDA/cuDNN version:  NA\nGPU Model and Memory: NA\nExact command to reproduce:\n\nDescribe the problem clearly\ntf.while_loop with is not working as expected when used with tf.assign()\nIn the below example code, the reset_x operation seems to be preventing the variable 'x' from updating as per per logic in loop1. if I print the output after loop1 has been run, I can see that x is still zero. However I I confirmed that the loop is working by printing output of loop1. It seems resent_x op is being used inside the tf.while_loop() during run time instead of only resetting x back to 0 after loop has finished. If I were to remove reset_x then the variable x is getting updated by the loop.\nbody = lamda x: tf.assign_add(x,1)\nloop1 = tf.while_loop(cond,body, [x])\nx_op = tf.reduce_sum(tf.abs(x))\nreset_x = tf.assign(x,[0])\nwith tf.Session() as sess:\n......\n......\nfor in range (100):\nsess.run(loop1)\nprint(sess.run(x))\nsess.run(x_op)\nsess.run(reset_x)\nSource Code / Logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full-traceback. Large logs and files should be attached. Try to reproducible test-case code the bare-minimum necessary to generate the problem", "body": "NOTE: Issues that are not bugs or feature requests will be closed. Please ask usage questions on StackOverflow.\r\n\r\n### You must complete this information or else your issue will be closed\r\n- *Have I written custom code (as opposed to using a stock example script provided in TensorFlow)?*: Yes\r\n- *TensorFlow installed from (source or binary)?*: binary\r\n- *TensorFlow version*: 1.0.0\r\n- *Bazel version (if compiling from source)*: NA\r\n- *CUDA/cuDNN version*:  NA\r\n- *GPU Model and Memory*: NA\r\n- *Exact command to reproduce*:\r\n\r\n\r\n### Describe the problem clearly\r\ntf.while_loop with is not working as expected when used with tf.assign()\r\n\r\nIn the below example code, the reset_x operation seems to be preventing the variable 'x' from updating as per per logic in loop1. if I print the output after loop1 has been run, I can see that x is still zero. However I I confirmed that the loop is working by printing output of loop1. It seems resent_x op is being used inside the tf.while_loop() during run time instead of only resetting x back to 0 after loop has finished. If I were to remove reset_x then the variable x is getting updated by the loop.\r\n\r\nbody = lamda x: tf.assign_add(x,1)\r\nloop1 = tf.while_loop(cond,body, [x])\r\nx_op = tf.reduce_sum(tf.abs(x))\r\nreset_x = tf.assign(x,[0])\r\nwith tf.Session() as sess:\r\n......\r\n......\r\n       for in range (100):\r\n              sess.run(loop1)\r\n              print(sess.run(x))\r\n              sess.run(x_op) \r\n              sess.run(reset_x)\r\n\r\n### Source Code / Logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full-traceback. Large logs and files should be attached. Try to reproducible test-case code the bare-minimum necessary to generate the problem\r\n"}
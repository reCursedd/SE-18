{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/391863707", "html_url": "https://github.com/tensorflow/tensorflow/issues/19466#issuecomment-391863707", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19466", "id": 391863707, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTg2MzcwNw==", "user": {"login": "maxwellc-dal", "id": 28496211, "node_id": "MDQ6VXNlcjI4NDk2MjEx", "avatar_url": "https://avatars0.githubusercontent.com/u/28496211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxwellc-dal", "html_url": "https://github.com/maxwellc-dal", "followers_url": "https://api.github.com/users/maxwellc-dal/followers", "following_url": "https://api.github.com/users/maxwellc-dal/following{/other_user}", "gists_url": "https://api.github.com/users/maxwellc-dal/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxwellc-dal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxwellc-dal/subscriptions", "organizations_url": "https://api.github.com/users/maxwellc-dal/orgs", "repos_url": "https://api.github.com/users/maxwellc-dal/repos", "events_url": "https://api.github.com/users/maxwellc-dal/events{/privacy}", "received_events_url": "https://api.github.com/users/maxwellc-dal/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-24T21:10:36Z", "updated_at": "2018-05-24T21:10:36Z", "author_association": "NONE", "body_html": "<p>Ok, so here are two quick-and-dirty patches that should make it go.   (It appeared to get TF 1.8 going, but I am still not sure because we wanted it for Magenta, and we do not yet have that going, so can't be sure the stuff underneath is not messed.)</p>\n<p>Version 1 replaces the glennrp git repo with my git repo having applied the minor patching.   However, after all my fiddling, I applied that patch via the existing patch anyway, so version 2 (\"gentler\") just pulls the libpng from glennrp and does the patch on the fly.   Version 1 is the current state of my build repo, but Version 2 should be sufficient, I have just not wiped my repo and built again.</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/2037085/tf-ppc64le.patch.txt\">tf-ppc64le.patch.txt</a><br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/2037088/tf-ppc64le-gentler.patch.txt\">tf-ppc64le-gentler.patch.txt</a></p>\n<p>I am still trying to figure out if there is a way of getting Bazel to do what configure and CMake can do where they decided what defines and files to include into the project depending on what platform we are on.   Until I can get that, I suspect we can not apply this to the main tree without breaking x64 compiles.</p>", "body_text": "Ok, so here are two quick-and-dirty patches that should make it go.   (It appeared to get TF 1.8 going, but I am still not sure because we wanted it for Magenta, and we do not yet have that going, so can't be sure the stuff underneath is not messed.)\nVersion 1 replaces the glennrp git repo with my git repo having applied the minor patching.   However, after all my fiddling, I applied that patch via the existing patch anyway, so version 2 (\"gentler\") just pulls the libpng from glennrp and does the patch on the fly.   Version 1 is the current state of my build repo, but Version 2 should be sufficient, I have just not wiped my repo and built again.\ntf-ppc64le.patch.txt\ntf-ppc64le-gentler.patch.txt\nI am still trying to figure out if there is a way of getting Bazel to do what configure and CMake can do where they decided what defines and files to include into the project depending on what platform we are on.   Until I can get that, I suspect we can not apply this to the main tree without breaking x64 compiles.", "body": "Ok, so here are two quick-and-dirty patches that should make it go.   (It appeared to get TF 1.8 going, but I am still not sure because we wanted it for Magenta, and we do not yet have that going, so can't be sure the stuff underneath is not messed.) \r\n\r\nVersion 1 replaces the glennrp git repo with my git repo having applied the minor patching.   However, after all my fiddling, I applied that patch via the existing patch anyway, so version 2 (\"gentler\") just pulls the libpng from glennrp and does the patch on the fly.   Version 1 is the current state of my build repo, but Version 2 should be sufficient, I have just not wiped my repo and built again.\r\n\r\n\r\n[tf-ppc64le.patch.txt](https://github.com/tensorflow/tensorflow/files/2037085/tf-ppc64le.patch.txt)\r\n[tf-ppc64le-gentler.patch.txt](https://github.com/tensorflow/tensorflow/files/2037088/tf-ppc64le-gentler.patch.txt)\r\n\r\nI am still trying to figure out if there is a way of getting Bazel to do what configure and CMake can do where they decided what defines and files to include into the project depending on what platform we are on.   Until I can get that, I suspect we can not apply this to the main tree without breaking x64 compiles."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11093", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11093/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11093/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11093/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11093", "id": 239013003, "node_id": "MDU6SXNzdWUyMzkwMTMwMDM=", "number": 11093, "title": "Python checkpoint to use with C++", "user": {"login": "hondaathma", "id": 26149657, "node_id": "MDQ6VXNlcjI2MTQ5NjU3", "avatar_url": "https://avatars0.githubusercontent.com/u/26149657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hondaathma", "html_url": "https://github.com/hondaathma", "followers_url": "https://api.github.com/users/hondaathma/followers", "following_url": "https://api.github.com/users/hondaathma/following{/other_user}", "gists_url": "https://api.github.com/users/hondaathma/gists{/gist_id}", "starred_url": "https://api.github.com/users/hondaathma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hondaathma/subscriptions", "organizations_url": "https://api.github.com/users/hondaathma/orgs", "repos_url": "https://api.github.com/users/hondaathma/repos", "events_url": "https://api.github.com/users/hondaathma/events{/privacy}", "received_events_url": "https://api.github.com/users/hondaathma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-27T23:37:02Z", "updated_at": "2017-09-28T01:42:14Z", "closed_at": "2017-09-28T01:42:04Z", "author_association": "NONE", "body_html": "<p>I have tried everything from freeze_graph.py to bazel  to try and use a python trained saved checkpoint of a model in c++.</p>\n<p>Why is it so complicated in TF?Caffe was so much easier.!!</p>\n<p>These are the steps that I follow:</p>\n<p>1)While training I added the following line just before saving each checkpoint :<br>\ntf.train.write_graph(sess.graph_def, 'modelsprototxt/', 'trainingmodel.pb', as_text=True)</p>\n<p>2)I used freeze_graphy.py to send in a trained checkpoint file,the written graph fle and the output graph file and I get the following error:</p>\n<p>Traceback (most recent call last):<br>\nFile \"/home/anarayanan/TenserflowPlayground/TF_DEEPLAB_UNTOUCHED/tensorflow-deeplab-resnet-master/freeze_graph.py\", line 175, in <br>\ntf.app.run()<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"/home/anarayanan/TenserflowPlayground/TF_DEEPLAB_UNTOUCHED/tensorflow-deeplab-resnet-master/freeze_graph.py\", line 172, in main<br>\nFLAGS.output_graph, FLAGS.clear_devices)<br>\nFile \"/home/anarayanan/TenserflowPlayground/TF_DEEPLAB_UNTOUCHED/tensorflow-deeplab-resnet-master/freeze_graph.py\", line 115, in freeze_graph<br>\ntext_format.Merge(f.read(), input_graph_def)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 476, in Merge<br>\ndescriptor_pool=descriptor_pool)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 526, in MergeLines<br>\nreturn parser.MergeLines(lines, message)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 559, in MergeLines<br>\nself._ParseOrMerge(lines, message)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 574, in _ParseOrMerge<br>\nself._MergeField(tokenizer, message)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 619, in _MergeField<br>\nname = tokenizer.ConsumeIdentifierOrNumber()<br>\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 1066, in ConsumeIdentifierOrNumber<br>\nraise self.ParseError('Expected identifier or number.')<br>\ngoogle.protobuf.text_format.ParseError: 2:1 : Expected identifier or number.</p>\n<p>Can someone please help me understand where the error is coming from?</p>", "body_text": "I have tried everything from freeze_graph.py to bazel  to try and use a python trained saved checkpoint of a model in c++.\nWhy is it so complicated in TF?Caffe was so much easier.!!\nThese are the steps that I follow:\n1)While training I added the following line just before saving each checkpoint :\ntf.train.write_graph(sess.graph_def, 'modelsprototxt/', 'trainingmodel.pb', as_text=True)\n2)I used freeze_graphy.py to send in a trained checkpoint file,the written graph fle and the output graph file and I get the following error:\nTraceback (most recent call last):\nFile \"/home/anarayanan/TenserflowPlayground/TF_DEEPLAB_UNTOUCHED/tensorflow-deeplab-resnet-master/freeze_graph.py\", line 175, in \ntf.app.run()\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"/home/anarayanan/TenserflowPlayground/TF_DEEPLAB_UNTOUCHED/tensorflow-deeplab-resnet-master/freeze_graph.py\", line 172, in main\nFLAGS.output_graph, FLAGS.clear_devices)\nFile \"/home/anarayanan/TenserflowPlayground/TF_DEEPLAB_UNTOUCHED/tensorflow-deeplab-resnet-master/freeze_graph.py\", line 115, in freeze_graph\ntext_format.Merge(f.read(), input_graph_def)\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 476, in Merge\ndescriptor_pool=descriptor_pool)\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 526, in MergeLines\nreturn parser.MergeLines(lines, message)\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 559, in MergeLines\nself._ParseOrMerge(lines, message)\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 574, in _ParseOrMerge\nself._MergeField(tokenizer, message)\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 619, in _MergeField\nname = tokenizer.ConsumeIdentifierOrNumber()\nFile \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 1066, in ConsumeIdentifierOrNumber\nraise self.ParseError('Expected identifier or number.')\ngoogle.protobuf.text_format.ParseError: 2:1 : Expected identifier or number.\nCan someone please help me understand where the error is coming from?", "body": "I have tried everything from freeze_graph.py to bazel  to try and use a python trained saved checkpoint of a model in c++.\r\n\r\nWhy is it so complicated in TF?Caffe was so much easier.!!\r\n\r\nThese are the steps that I follow:\r\n\r\n1)While training I added the following line just before saving each checkpoint :  \r\ntf.train.write_graph(sess.graph_def, 'modelsprototxt/', 'trainingmodel.pb', as_text=True)\r\n\r\n2)I used freeze_graphy.py to send in a trained checkpoint file,the written graph fle and the output graph file and I get the following error:\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/anarayanan/TenserflowPlayground/TF_DEEPLAB_UNTOUCHED/tensorflow-deeplab-resnet-master/freeze_graph.py\", line 175, in <module>\r\n    tf.app.run()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/home/anarayanan/TenserflowPlayground/TF_DEEPLAB_UNTOUCHED/tensorflow-deeplab-resnet-master/freeze_graph.py\", line 172, in main\r\n    FLAGS.output_graph, FLAGS.clear_devices)\r\n  File \"/home/anarayanan/TenserflowPlayground/TF_DEEPLAB_UNTOUCHED/tensorflow-deeplab-resnet-master/freeze_graph.py\", line 115, in freeze_graph\r\n    text_format.Merge(f.read(), input_graph_def)\r\n  File \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 476, in Merge\r\n    descriptor_pool=descriptor_pool)\r\n  File \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 526, in MergeLines\r\n    return parser.MergeLines(lines, message)\r\n  File \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 559, in MergeLines\r\n    self._ParseOrMerge(lines, message)\r\n  File \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 574, in _ParseOrMerge\r\n    self._MergeField(tokenizer, message)\r\n  File \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 619, in _MergeField\r\n    name = tokenizer.ConsumeIdentifierOrNumber()\r\n  File \"/usr/local/lib/python2.7/dist-packages/google/protobuf/text_format.py\", line 1066, in ConsumeIdentifierOrNumber\r\n    raise self.ParseError('Expected identifier or number.')\r\ngoogle.protobuf.text_format.ParseError: 2:1 : Expected identifier or number.\r\n\r\nCan someone please help me understand where the error is coming from?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17961", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17961/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17961/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17961/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/17961", "id": 308122876, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc3MTQwOTk0", "number": 17961, "title": "CUDNN grouped convolutions + depthwise convolution", "user": {"login": "wendazhou", "id": 1628990, "node_id": "MDQ6VXNlcjE2Mjg5OTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1628990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wendazhou", "html_url": "https://github.com/wendazhou", "followers_url": "https://api.github.com/users/wendazhou/followers", "following_url": "https://api.github.com/users/wendazhou/following{/other_user}", "gists_url": "https://api.github.com/users/wendazhou/gists{/gist_id}", "starred_url": "https://api.github.com/users/wendazhou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wendazhou/subscriptions", "organizations_url": "https://api.github.com/users/wendazhou/orgs", "repos_url": "https://api.github.com/users/wendazhou/repos", "events_url": "https://api.github.com/users/wendazhou/events{/privacy}", "received_events_url": "https://api.github.com/users/wendazhou/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "benoitsteiner", "id": 6969686, "node_id": "MDQ6VXNlcjY5Njk2ODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6969686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benoitsteiner", "html_url": "https://github.com/benoitsteiner", "followers_url": "https://api.github.com/users/benoitsteiner/followers", "following_url": "https://api.github.com/users/benoitsteiner/following{/other_user}", "gists_url": "https://api.github.com/users/benoitsteiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/benoitsteiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benoitsteiner/subscriptions", "organizations_url": "https://api.github.com/users/benoitsteiner/orgs", "repos_url": "https://api.github.com/users/benoitsteiner/repos", "events_url": "https://api.github.com/users/benoitsteiner/events{/privacy}", "received_events_url": "https://api.github.com/users/benoitsteiner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benoitsteiner", "id": 6969686, "node_id": "MDQ6VXNlcjY5Njk2ODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6969686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benoitsteiner", "html_url": "https://github.com/benoitsteiner", "followers_url": "https://api.github.com/users/benoitsteiner/followers", "following_url": "https://api.github.com/users/benoitsteiner/following{/other_user}", "gists_url": "https://api.github.com/users/benoitsteiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/benoitsteiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benoitsteiner/subscriptions", "organizations_url": "https://api.github.com/users/benoitsteiner/orgs", "repos_url": "https://api.github.com/users/benoitsteiner/repos", "events_url": "https://api.github.com/users/benoitsteiner/events{/privacy}", "received_events_url": "https://api.github.com/users/benoitsteiner/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-03-23T17:45:21Z", "updated_at": "2018-05-29T12:49:32Z", "closed_at": "2018-04-14T19:05:06Z", "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17961", "html_url": "https://github.com/tensorflow/tensorflow/pull/17961", "diff_url": "https://github.com/tensorflow/tensorflow/pull/17961.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/17961.patch"}, "body_html": "<p>This pull request implements grouped convolutions backed by the <a href=\"http://docs.nvidia.com/deeplearning/sdk/cudnn-release-notes/Chunk1484074616.html#rel_7\" rel=\"nofollow\">CUDNN 7</a> convolution groups feature.</p>\n<p>The feature is exposed in the DNN support class and the Conv2d ops launchers, but no API / operations are created to instantiate grouped convolutions directly.</p>\n<p>This pull request also implements dispatching the DepthwiseNativeConv2d (and the corresponding backpropagation operations) to these new grouped convolution kernels. This feature is gated behind a feature flag TF_DEPTHWISE_CONV_USE_GROUPED_CONV which is disabled by default. This increases performance slightly for training Mobilenet in single precision (about 5% on Volta), but also paves the way for float16 training (which is very slow with the current implementation).</p>\n<p>Todo: (need advice / directions):</p>\n<ul>\n<li>add tests for the new DepthwiseNativeConv2d path (probably duplicate existing tests but will also need to set the environment variable - how to do this?)</li>\n<li>the feature flag may not be completely satisfactory at the moment: users compiling on CUDNN 6 and setting the feature flag will face a somewhat cryptic error that \"no algorithms are found\" as the shapes will be incorrect for the conv2d kernels.</li>\n</ul>", "body_text": "This pull request implements grouped convolutions backed by the CUDNN 7 convolution groups feature.\nThe feature is exposed in the DNN support class and the Conv2d ops launchers, but no API / operations are created to instantiate grouped convolutions directly.\nThis pull request also implements dispatching the DepthwiseNativeConv2d (and the corresponding backpropagation operations) to these new grouped convolution kernels. This feature is gated behind a feature flag TF_DEPTHWISE_CONV_USE_GROUPED_CONV which is disabled by default. This increases performance slightly for training Mobilenet in single precision (about 5% on Volta), but also paves the way for float16 training (which is very slow with the current implementation).\nTodo: (need advice / directions):\n\nadd tests for the new DepthwiseNativeConv2d path (probably duplicate existing tests but will also need to set the environment variable - how to do this?)\nthe feature flag may not be completely satisfactory at the moment: users compiling on CUDNN 6 and setting the feature flag will face a somewhat cryptic error that \"no algorithms are found\" as the shapes will be incorrect for the conv2d kernels.", "body": "This pull request implements grouped convolutions backed by the [CUDNN 7](http://docs.nvidia.com/deeplearning/sdk/cudnn-release-notes/Chunk1484074616.html#rel_7) convolution groups feature.\r\n\r\nThe feature is exposed in the DNN support class and the Conv2d ops launchers, but no API / operations are created to instantiate grouped convolutions directly.\r\n\r\nThis pull request also implements dispatching the DepthwiseNativeConv2d (and the corresponding backpropagation operations) to these new grouped convolution kernels. This feature is gated behind a feature flag TF_DEPTHWISE_CONV_USE_GROUPED_CONV which is disabled by default. This increases performance slightly for training Mobilenet in single precision (about 5% on Volta), but also paves the way for float16 training (which is very slow with the current implementation).\r\n\r\nTodo: (need advice / directions):\r\n- add tests for the new DepthwiseNativeConv2d path (probably duplicate existing tests but will also need to set the environment variable - how to do this?)\r\n- the feature flag may not be completely satisfactory at the moment: users compiling on CUDNN 6 and setting the feature flag will face a somewhat cryptic error that \"no algorithms are found\" as the shapes will be incorrect for the conv2d kernels."}
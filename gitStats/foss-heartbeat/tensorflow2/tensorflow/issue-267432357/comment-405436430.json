{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/405436430", "html_url": "https://github.com/tensorflow/tensorflow/issues/13895#issuecomment-405436430", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13895", "id": 405436430, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTQzNjQzMA==", "user": {"login": "chenbohua3", "id": 19526090, "node_id": "MDQ6VXNlcjE5NTI2MDkw", "avatar_url": "https://avatars3.githubusercontent.com/u/19526090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenbohua3", "html_url": "https://github.com/chenbohua3", "followers_url": "https://api.github.com/users/chenbohua3/followers", "following_url": "https://api.github.com/users/chenbohua3/following{/other_user}", "gists_url": "https://api.github.com/users/chenbohua3/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenbohua3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenbohua3/subscriptions", "organizations_url": "https://api.github.com/users/chenbohua3/orgs", "repos_url": "https://api.github.com/users/chenbohua3/repos", "events_url": "https://api.github.com/users/chenbohua3/events{/privacy}", "received_events_url": "https://api.github.com/users/chenbohua3/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-17T02:08:51Z", "updated_at": "2018-07-17T02:08:51Z", "author_association": "NONE", "body_html": "<p>Hi guys, any suggestions about different post-process input size with estimator? Here is my case:<br>\nI use different batch size\uff0832 and 1\uff09 in train and evaluation with estimator and use a subclass of tf.train.SessionRunHook to achieve the purpose for validating during training.</p>\n<p>In input_fn i use tf.cond to judge the mode(EVAL or TRAIN) and apply different codes respectively. But it seems that when execute estimator.train \uff0ctraining data with batch size 32 will flow through the codes for validation set\uff08with batch size 1) (i think it is caused by tf.cond)</p>\n<p>So i wonder if there are ways to allow data with different size flow through different codes under different mode(TRAIN and EVAL) in input_fn</p>\n<p>Thank you ~</p>", "body_text": "Hi guys, any suggestions about different post-process input size with estimator? Here is my case:\nI use different batch size\uff0832 and 1\uff09 in train and evaluation with estimator and use a subclass of tf.train.SessionRunHook to achieve the purpose for validating during training.\nIn input_fn i use tf.cond to judge the mode(EVAL or TRAIN) and apply different codes respectively. But it seems that when execute estimator.train \uff0ctraining data with batch size 32 will flow through the codes for validation set\uff08with batch size 1) (i think it is caused by tf.cond)\nSo i wonder if there are ways to allow data with different size flow through different codes under different mode(TRAIN and EVAL) in input_fn\nThank you ~", "body": "Hi guys, any suggestions about different post-process input size with estimator? Here is my case:\r\nI use different batch size\uff0832 and 1\uff09 in train and evaluation with estimator and use a subclass of tf.train.SessionRunHook to achieve the purpose for validating during training.\r\n\r\nIn input_fn i use tf.cond to judge the mode(EVAL or TRAIN) and apply different codes respectively. But it seems that when execute estimator.train \uff0ctraining data with batch size 32 will flow through the codes for validation set\uff08with batch size 1) (i think it is caused by tf.cond)  \r\n\r\nSo i wonder if there are ways to allow data with different size flow through different codes under different mode(TRAIN and EVAL) in input_fn\r\n\r\nThank you ~"}
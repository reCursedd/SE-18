{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5585", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5585/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5585/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5585/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5585", "id": 188980801, "node_id": "MDU6SXNzdWUxODg5ODA4MDE=", "number": 5585, "title": "Reshape Op not the same as tensorflow.reshape", "user": {"login": "leslietso", "id": 12133211, "node_id": "MDQ6VXNlcjEyMTMzMjEx", "avatar_url": "https://avatars2.githubusercontent.com/u/12133211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leslietso", "html_url": "https://github.com/leslietso", "followers_url": "https://api.github.com/users/leslietso/followers", "following_url": "https://api.github.com/users/leslietso/following{/other_user}", "gists_url": "https://api.github.com/users/leslietso/gists{/gist_id}", "starred_url": "https://api.github.com/users/leslietso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leslietso/subscriptions", "organizations_url": "https://api.github.com/users/leslietso/orgs", "repos_url": "https://api.github.com/users/leslietso/repos", "events_url": "https://api.github.com/users/leslietso/events{/privacy}", "received_events_url": "https://api.github.com/users/leslietso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-11-13T16:55:15Z", "updated_at": "2016-11-17T06:16:04Z", "closed_at": "2016-11-14T20:39:13Z", "author_association": "NONE", "body_html": "<p>I am getting the error <code>Invalid argument: NodeDef mentions attr 'Tshape' not in Op&lt;name=Reshape; signature=tensor:T, shape:int32 -&gt; output:T; attr=T:type&gt;; NodeDef: Y_GroundTruth = Reshape[T=DT_FLOAT, Tshape=DT_INT32](LOut_Add, Y_GroundTruth/shape)</code> when attempting to load the file on Android using <code>tensorflow::Status s = session-&gt;Create(graph_def);</code>.</p>\n<p>People with similar problems have mentioned that upgrading to Tensorflow 0.9.0rc0 fixed their problems. However, I am already using the most current Tensorflow build in my jni-build.</p>\n<p>Could this be a problem with the variables declared when generating the protobuf file?</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"161811347\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3002\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3002/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/3002\">#3002</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"141326477\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1528\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1528/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1528\">#1528</a></p>\n<h3>Environment info</h3>\n<p>Operating System:<br>\nMac OS 10.12<br>\nAndroid Cyanogenmod 12<br>\nTensorflow 0.10.0 on Jupyter</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p><strong>Snippet</strong></p>\n<pre><code>    def reg_perceptron(t, weights, biases):\n        t = tf.nn.relu(tf.add(tf.matmul(t, weights['h1']), biases['b1']), name = \"layer_1\")\n        t = tf.nn.sigmoid(tf.add(tf.matmul(t, weights['h2']), biases['b2']), name = \"layer_2\")\n        t = tf.add(tf.matmul(t, weights['hOut'], name=\"LOut_MatMul\"), biases['bOut'], name=\"LOut_Add\")\n\n        return tf.reshape(t, [-1], name=\"Y_GroundTruth\")\n\n    g = tf.Graph()\n    with g.as_default():\n       ...\n       rg_weights = {\n        'h1': vs.get_variable(\"weights0\", [n_input, n_hidden_1], initializer=tf.contrib.layers.xavier_initializer()),\n        'h2': vs.get_variable(\"weights1\", [n_hidden_1, n_hidden_2], initializer=tf.contrib.layers.xavier_initializer()),\n        'hOut': vs.get_variable(\"weightsOut\", [n_hidden_2, 1], initializer=tf.contrib.layers.xavier_initializer())\n        }\n\n\n        rg_biases = {\n        'b1': vs.get_variable(\"bias0\", [n_hidden_1], initializer=init_ops.constant_initializer(bias_start)),\n        'b2': vs.get_variable(\"bias1\", [n_hidden_2], initializer=init_ops.constant_initializer(bias_start)),\n        'bOut': vs.get_variable(\"biasOut\", [1], initializer=init_ops.constant_initializer(bias_start))\n        }\n        \n        #output node\n        pred = reg_perceptron(_x, rg_weights, rg_biases)\n        ...\n    ...\n\n    g_2 = tf.Graph()\n    with g_2.as_default():\n        ...\n        rg_weights_2 = {\n        'h1': vs.get_variable(\"weights0\", [n_input, n_hidden_1], initializer=tf.contrib.layers.xavier_initializer()),\n        'h2': vs.get_variable(\"weights1\", [n_hidden_1, n_hidden_2], initializer=tf.contrib.layers.xavier_initializer()),\n        'hOut': vs.get_variable(\"weightsOut\", [n_hidden_2, 1], initializer=tf.contrib.layers.xavier_initializer())\n        }\n\n        rg_biases_2 = {\n        'b1': vs.get_variable(\"bias0\", [n_hidden_1], initializer=init_ops.constant_initializer(bias_start)),\n        'b2': vs.get_variable(\"bias1\", [n_hidden_2], initializer=init_ops.constant_initializer(bias_start)),\n        'bOut': vs.get_variable(\"biasOut\", [1], initializer=init_ops.constant_initializer(bias_start))\n        }\n    \n        pred_2 = reg_perceptron(_x_2, rg_weights_2, rg_biases_2)\n        ...\n</code></pre>\n<h3>What other attempted solutions have you tried?</h3>\n<p>I will double check the Tensorflow version tomorrow and make sure that it is the same as the version I am using in the jni-build.</p>\n<p>I also attempted to strip the graph using</p>\n<pre><code>#!/bin/bash\nbazel-bin/tensorflow/python/tools/strip_unused --input_graph=/Users/leslie/Downloads/trained_model6.pb --output_graph=/Users/leslie/Downloads/stripped_graph.pb --input_node_names=X_Input --output_node_names=Y_GroundTruth --input_binary=true\n</code></pre>\n<p>but the output is simply</p>\n<pre><code>6\n\nY_GroundTruth\ufffd\ufffdPlaceholder*\ufffd\n\ufffddtype\ufffd\ufffd0\ufffd*\ufffd\n\ufffdshape\ufffd\ufffd:\n</code></pre>\n<p>and attempting to freeze the graph with</p>\n<pre><code>#!/bin/bash\nbazel-bin/tensorflow/python/tools/freeze_graph \\\n--input_graph=/Users/leslie/Downloads/trained_model6.pb \\\n--input_checkpoint=/Users/leslie/Downloads/Y6_1476978999 \\\n--output_graph=/Users/leslie/Downloads/frozen_graph.pb --output_node_names=Y_GroundTruth\n</code></pre>\n<p>gives the error</p>\n<pre><code>File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused.py\", line 77, in &lt;module&gt;\n    tf.app.run()\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused.py\", line 74, in main\n    FLAGS.placeholder_type_enum)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused_lib.py\", line 89, in strip_unused_from_files\n    placeholder_type_enum)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused_lib.py\", line 62, in strip_unused\n    output_node_names)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/framework/graph_util.py\", line 158, in extract_sub_graph\n    assert d in name_to_node_map, \"%s is not in graph\" % d\nAssertionError: Y_GroundTruth is not in graph\nleslie@MacBook-Pro tensorflow-master $ ./stripunused.sh\n1 ops in the final graph.\nleslie@MacBook-Pro tensorflow-master $ ./freezegraph.sh\nTraceback (most recent call last):\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in &lt;module&gt;\n    tf.app.run()\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\n    FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 98, in freeze_graph\n    text_format.Merge(f.read().decode(\"utf-8\"), input_graph_def)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py\", line 16, in decode\n    return codecs.utf_8_decode(input, errors, True)\nUnicodeDecodeError: 'utf8' codec can't decode byte 0x80 in position 278: invalid start byte\n</code></pre>\n<h3>Logs or other output that would be helpful</h3>\n<p>To stop the post from being too cluttered, I have uploaded my code to generate the .PB-file and my model to create the model on Pastebin.</p>\n<p>Surprisingly enough, the code used to test the model with the graph used to generate the .PB-file  (lines 154 and 155) does not return any errors (still in the process of checking the outputs).<br>\n<a href=\"http://pastebin.com/6rv1rWV7\" rel=\"nofollow\">PBFileGeneration</a></p>\n<p><a href=\"http://pastebin.com/8DJx1kmL\" rel=\"nofollow\">Model</a></p>", "body_text": "I am getting the error Invalid argument: NodeDef mentions attr 'Tshape' not in Op<name=Reshape; signature=tensor:T, shape:int32 -> output:T; attr=T:type>; NodeDef: Y_GroundTruth = Reshape[T=DT_FLOAT, Tshape=DT_INT32](LOut_Add, Y_GroundTruth/shape) when attempting to load the file on Android using tensorflow::Status s = session->Create(graph_def);.\nPeople with similar problems have mentioned that upgrading to Tensorflow 0.9.0rc0 fixed their problems. However, I am already using the most current Tensorflow build in my jni-build.\nCould this be a problem with the variables declared when generating the protobuf file?\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n#3002\n#1528\nEnvironment info\nOperating System:\nMac OS 10.12\nAndroid Cyanogenmod 12\nTensorflow 0.10.0 on Jupyter\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nSnippet\n    def reg_perceptron(t, weights, biases):\n        t = tf.nn.relu(tf.add(tf.matmul(t, weights['h1']), biases['b1']), name = \"layer_1\")\n        t = tf.nn.sigmoid(tf.add(tf.matmul(t, weights['h2']), biases['b2']), name = \"layer_2\")\n        t = tf.add(tf.matmul(t, weights['hOut'], name=\"LOut_MatMul\"), biases['bOut'], name=\"LOut_Add\")\n\n        return tf.reshape(t, [-1], name=\"Y_GroundTruth\")\n\n    g = tf.Graph()\n    with g.as_default():\n       ...\n       rg_weights = {\n        'h1': vs.get_variable(\"weights0\", [n_input, n_hidden_1], initializer=tf.contrib.layers.xavier_initializer()),\n        'h2': vs.get_variable(\"weights1\", [n_hidden_1, n_hidden_2], initializer=tf.contrib.layers.xavier_initializer()),\n        'hOut': vs.get_variable(\"weightsOut\", [n_hidden_2, 1], initializer=tf.contrib.layers.xavier_initializer())\n        }\n\n\n        rg_biases = {\n        'b1': vs.get_variable(\"bias0\", [n_hidden_1], initializer=init_ops.constant_initializer(bias_start)),\n        'b2': vs.get_variable(\"bias1\", [n_hidden_2], initializer=init_ops.constant_initializer(bias_start)),\n        'bOut': vs.get_variable(\"biasOut\", [1], initializer=init_ops.constant_initializer(bias_start))\n        }\n        \n        #output node\n        pred = reg_perceptron(_x, rg_weights, rg_biases)\n        ...\n    ...\n\n    g_2 = tf.Graph()\n    with g_2.as_default():\n        ...\n        rg_weights_2 = {\n        'h1': vs.get_variable(\"weights0\", [n_input, n_hidden_1], initializer=tf.contrib.layers.xavier_initializer()),\n        'h2': vs.get_variable(\"weights1\", [n_hidden_1, n_hidden_2], initializer=tf.contrib.layers.xavier_initializer()),\n        'hOut': vs.get_variable(\"weightsOut\", [n_hidden_2, 1], initializer=tf.contrib.layers.xavier_initializer())\n        }\n\n        rg_biases_2 = {\n        'b1': vs.get_variable(\"bias0\", [n_hidden_1], initializer=init_ops.constant_initializer(bias_start)),\n        'b2': vs.get_variable(\"bias1\", [n_hidden_2], initializer=init_ops.constant_initializer(bias_start)),\n        'bOut': vs.get_variable(\"biasOut\", [1], initializer=init_ops.constant_initializer(bias_start))\n        }\n    \n        pred_2 = reg_perceptron(_x_2, rg_weights_2, rg_biases_2)\n        ...\n\nWhat other attempted solutions have you tried?\nI will double check the Tensorflow version tomorrow and make sure that it is the same as the version I am using in the jni-build.\nI also attempted to strip the graph using\n#!/bin/bash\nbazel-bin/tensorflow/python/tools/strip_unused --input_graph=/Users/leslie/Downloads/trained_model6.pb --output_graph=/Users/leslie/Downloads/stripped_graph.pb --input_node_names=X_Input --output_node_names=Y_GroundTruth --input_binary=true\n\nbut the output is simply\n6\n\nY_GroundTruth\ufffd\ufffdPlaceholder*\ufffd\n\ufffddtype\ufffd\ufffd0\ufffd*\ufffd\n\ufffdshape\ufffd\ufffd:\n\nand attempting to freeze the graph with\n#!/bin/bash\nbazel-bin/tensorflow/python/tools/freeze_graph \\\n--input_graph=/Users/leslie/Downloads/trained_model6.pb \\\n--input_checkpoint=/Users/leslie/Downloads/Y6_1476978999 \\\n--output_graph=/Users/leslie/Downloads/frozen_graph.pb --output_node_names=Y_GroundTruth\n\ngives the error\nFile \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused.py\", line 77, in <module>\n    tf.app.run()\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused.py\", line 74, in main\n    FLAGS.placeholder_type_enum)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused_lib.py\", line 89, in strip_unused_from_files\n    placeholder_type_enum)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused_lib.py\", line 62, in strip_unused\n    output_node_names)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/framework/graph_util.py\", line 158, in extract_sub_graph\n    assert d in name_to_node_map, \"%s is not in graph\" % d\nAssertionError: Y_GroundTruth is not in graph\nleslie@MacBook-Pro tensorflow-master $ ./stripunused.sh\n1 ops in the final graph.\nleslie@MacBook-Pro tensorflow-master $ ./freezegraph.sh\nTraceback (most recent call last):\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <module>\n    tf.app.run()\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\n    FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 98, in freeze_graph\n    text_format.Merge(f.read().decode(\"utf-8\"), input_graph_def)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py\", line 16, in decode\n    return codecs.utf_8_decode(input, errors, True)\nUnicodeDecodeError: 'utf8' codec can't decode byte 0x80 in position 278: invalid start byte\n\nLogs or other output that would be helpful\nTo stop the post from being too cluttered, I have uploaded my code to generate the .PB-file and my model to create the model on Pastebin.\nSurprisingly enough, the code used to test the model with the graph used to generate the .PB-file  (lines 154 and 155) does not return any errors (still in the process of checking the outputs).\nPBFileGeneration\nModel", "body": "I am getting the error `Invalid argument: NodeDef mentions attr 'Tshape' not in Op<name=Reshape; signature=tensor:T, shape:int32 -> output:T; attr=T:type>; NodeDef: Y_GroundTruth = Reshape[T=DT_FLOAT, Tshape=DT_INT32](LOut_Add, Y_GroundTruth/shape)` when attempting to load the file on Android using `tensorflow::Status s = session->Create(graph_def);`.\r\n\r\nPeople with similar problems have mentioned that upgrading to Tensorflow 0.9.0rc0 fixed their problems. However, I am already using the most current Tensorflow build in my jni-build.\r\n\r\nCould this be a problem with the variables declared when generating the protobuf file?\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nhttps://github.com/tensorflow/tensorflow/issues/3002\r\nhttps://github.com/tensorflow/tensorflow/issues/1528\r\n\r\n### Environment info\r\nOperating System:\r\nMac OS 10.12\r\nAndroid Cyanogenmod 12\r\nTensorflow 0.10.0 on Jupyter\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n\r\n**Snippet**\r\n```    \r\n    def reg_perceptron(t, weights, biases):\r\n        t = tf.nn.relu(tf.add(tf.matmul(t, weights['h1']), biases['b1']), name = \"layer_1\")\r\n        t = tf.nn.sigmoid(tf.add(tf.matmul(t, weights['h2']), biases['b2']), name = \"layer_2\")\r\n        t = tf.add(tf.matmul(t, weights['hOut'], name=\"LOut_MatMul\"), biases['bOut'], name=\"LOut_Add\")\r\n\r\n        return tf.reshape(t, [-1], name=\"Y_GroundTruth\")\r\n\r\n    g = tf.Graph()\r\n    with g.as_default():\r\n       ...\r\n       rg_weights = {\r\n        'h1': vs.get_variable(\"weights0\", [n_input, n_hidden_1], initializer=tf.contrib.layers.xavier_initializer()),\r\n        'h2': vs.get_variable(\"weights1\", [n_hidden_1, n_hidden_2], initializer=tf.contrib.layers.xavier_initializer()),\r\n        'hOut': vs.get_variable(\"weightsOut\", [n_hidden_2, 1], initializer=tf.contrib.layers.xavier_initializer())\r\n        }\r\n\r\n\r\n        rg_biases = {\r\n        'b1': vs.get_variable(\"bias0\", [n_hidden_1], initializer=init_ops.constant_initializer(bias_start)),\r\n        'b2': vs.get_variable(\"bias1\", [n_hidden_2], initializer=init_ops.constant_initializer(bias_start)),\r\n        'bOut': vs.get_variable(\"biasOut\", [1], initializer=init_ops.constant_initializer(bias_start))\r\n        }\r\n        \r\n        #output node\r\n        pred = reg_perceptron(_x, rg_weights, rg_biases)\r\n        ...\r\n    ...\r\n\r\n    g_2 = tf.Graph()\r\n    with g_2.as_default():\r\n        ...\r\n        rg_weights_2 = {\r\n        'h1': vs.get_variable(\"weights0\", [n_input, n_hidden_1], initializer=tf.contrib.layers.xavier_initializer()),\r\n        'h2': vs.get_variable(\"weights1\", [n_hidden_1, n_hidden_2], initializer=tf.contrib.layers.xavier_initializer()),\r\n        'hOut': vs.get_variable(\"weightsOut\", [n_hidden_2, 1], initializer=tf.contrib.layers.xavier_initializer())\r\n        }\r\n\r\n        rg_biases_2 = {\r\n        'b1': vs.get_variable(\"bias0\", [n_hidden_1], initializer=init_ops.constant_initializer(bias_start)),\r\n        'b2': vs.get_variable(\"bias1\", [n_hidden_2], initializer=init_ops.constant_initializer(bias_start)),\r\n        'bOut': vs.get_variable(\"biasOut\", [1], initializer=init_ops.constant_initializer(bias_start))\r\n        }\r\n    \r\n        pred_2 = reg_perceptron(_x_2, rg_weights_2, rg_biases_2)\r\n        ...\r\n```\r\n\r\n### What other attempted solutions have you tried?\r\nI will double check the Tensorflow version tomorrow and make sure that it is the same as the version I am using in the jni-build.\r\n\r\nI also attempted to strip the graph using\r\n```\r\n#!/bin/bash\r\nbazel-bin/tensorflow/python/tools/strip_unused --input_graph=/Users/leslie/Downloads/trained_model6.pb --output_graph=/Users/leslie/Downloads/stripped_graph.pb --input_node_names=X_Input --output_node_names=Y_GroundTruth --input_binary=true\r\n```\r\n\r\nbut the output is simply\r\n```\r\n6\r\n\r\nY_GroundTruth\u0012\u000bPlaceholder*\u000b\r\n\u0005dtype\u0012\u00020\u0001*\u000b\r\n\u0005shape\u0012\u0002:\r\n```\r\n\r\nand attempting to freeze the graph with\r\n\r\n```\r\n#!/bin/bash\r\nbazel-bin/tensorflow/python/tools/freeze_graph \\\r\n--input_graph=/Users/leslie/Downloads/trained_model6.pb \\\r\n--input_checkpoint=/Users/leslie/Downloads/Y6_1476978999 \\\r\n--output_graph=/Users/leslie/Downloads/frozen_graph.pb --output_node_names=Y_GroundTruth\r\n```\r\n\r\ngives the error\r\n```\r\nFile \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused.py\", line 77, in <module>\r\n    tf.app.run()\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused.py\", line 74, in main\r\n    FLAGS.placeholder_type_enum)\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused_lib.py\", line 89, in strip_unused_from_files\r\n    placeholder_type_enum)\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/tools/strip_unused_lib.py\", line 62, in strip_unused\r\n    output_node_names)\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/strip_unused.runfiles/org_tensorflow/tensorflow/python/framework/graph_util.py\", line 158, in extract_sub_graph\r\n    assert d in name_to_node_map, \"%s is not in graph\" % d\r\nAssertionError: Y_GroundTruth is not in graph\r\nleslie@MacBook-Pro tensorflow-master $ ./stripunused.sh\r\n1 ops in the final graph.\r\nleslie@MacBook-Pro tensorflow-master $ ./freezegraph.sh\r\nTraceback (most recent call last):\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <module>\r\n    tf.app.run()\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\r\n    FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 98, in freeze_graph\r\n    text_format.Merge(f.read().decode(\"utf-8\"), input_graph_def)\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py\", line 16, in decode\r\n    return codecs.utf_8_decode(input, errors, True)\r\nUnicodeDecodeError: 'utf8' codec can't decode byte 0x80 in position 278: invalid start byte\r\n```\r\n### Logs or other output that would be helpful\r\nTo stop the post from being too cluttered, I have uploaded my code to generate the .PB-file and my model to create the model on Pastebin.\r\n\r\nSurprisingly enough, the code used to test the model with the graph used to generate the .PB-file  (lines 154 and 155) does not return any errors (still in the process of checking the outputs).\r\n[PBFileGeneration](http://pastebin.com/6rv1rWV7)\r\n\r\n[Model](http://pastebin.com/8DJx1kmL)\r\n"}
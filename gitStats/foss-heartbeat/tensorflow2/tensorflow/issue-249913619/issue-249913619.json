{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12254", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12254/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12254/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12254/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12254", "id": 249913619, "node_id": "MDU6SXNzdWUyNDk5MTM2MTk=", "number": 12254, "title": "Principle of setting 'hash_bucket_size' parameter ?", "user": {"login": "gaoisbest", "id": 8468901, "node_id": "MDQ6VXNlcjg0Njg5MDE=", "avatar_url": "https://avatars0.githubusercontent.com/u/8468901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gaoisbest", "html_url": "https://github.com/gaoisbest", "followers_url": "https://api.github.com/users/gaoisbest/followers", "following_url": "https://api.github.com/users/gaoisbest/following{/other_user}", "gists_url": "https://api.github.com/users/gaoisbest/gists{/gist_id}", "starred_url": "https://api.github.com/users/gaoisbest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaoisbest/subscriptions", "organizations_url": "https://api.github.com/users/gaoisbest/orgs", "repos_url": "https://api.github.com/users/gaoisbest/repos", "events_url": "https://api.github.com/users/gaoisbest/events{/privacy}", "received_events_url": "https://api.github.com/users/gaoisbest/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-14T01:33:59Z", "updated_at": "2017-08-14T14:34:39Z", "closed_at": "2017-08-14T14:34:39Z", "author_association": "NONE", "body_html": "<p>Question 1:<br>\nIn <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/learn/wide_n_deep_tutorial.py\"><code>wide_n_deep_tutorial.py</code>,</a> there is a hyper-parameter named <code>hash_bucket_size</code> for both <code>tf.feature_column.categorical_column_with_hash_bucket</code> and <code>tf.feature_column.crossed_column</code> methods,  and the value is <code>hash_bucket_size=1000</code>.</p>\n<p>But why <code>1000</code>? How to set this parameter ?</p>\n<p>Question 2:<br>\nThe second question about <code>crossed_columns </code>, that is,<br>\n<code>crossed_columns = [ tf.feature_column.crossed_column( [\"education\", \"occupation\"], hash_bucket_size=1000), tf.feature_column.crossed_column( [age_buckets, \"education\", \"occupation\"], hash_bucket_size=1000), tf.feature_column.crossed_column( [\"native_country\", \"occupation\"], hash_bucket_size=1000) ] </code> in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/learn/wide_n_deep_tutorial.py\"><code>wide_n_deep_tutorial.py</code>,</a></p>\n<p>Why choose <code>[\"education\", \"occupation\"]</code>, <code>[age_buckets, \"education\", \"occupation\"]</code> and <code>[\"native_country\", \"occupation\"]</code> as crossed_columns , are there any rule of thumb ?</p>", "body_text": "Question 1:\nIn wide_n_deep_tutorial.py, there is a hyper-parameter named hash_bucket_size for both tf.feature_column.categorical_column_with_hash_bucket and tf.feature_column.crossed_column methods,  and the value is hash_bucket_size=1000.\nBut why 1000? How to set this parameter ?\nQuestion 2:\nThe second question about crossed_columns , that is,\ncrossed_columns = [ tf.feature_column.crossed_column( [\"education\", \"occupation\"], hash_bucket_size=1000), tf.feature_column.crossed_column( [age_buckets, \"education\", \"occupation\"], hash_bucket_size=1000), tf.feature_column.crossed_column( [\"native_country\", \"occupation\"], hash_bucket_size=1000) ]  in wide_n_deep_tutorial.py,\nWhy choose [\"education\", \"occupation\"], [age_buckets, \"education\", \"occupation\"] and [\"native_country\", \"occupation\"] as crossed_columns , are there any rule of thumb ?", "body": "Question 1: \r\nIn [`wide_n_deep_tutorial.py`,](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/learn/wide_n_deep_tutorial.py) there is a hyper-parameter named `hash_bucket_size` for both `tf.feature_column.categorical_column_with_hash_bucket` and `tf.feature_column.crossed_column` methods,  and the value is `hash_bucket_size=1000`.\r\n\r\nBut why `1000`? How to set this parameter ?\r\n\r\n\r\n\r\nQuestion 2:\r\nThe second question about `crossed_columns `, that is,\r\n`crossed_columns = [\r\n    tf.feature_column.crossed_column(\r\n        [\"education\", \"occupation\"], hash_bucket_size=1000),\r\n    tf.feature_column.crossed_column(\r\n        [age_buckets, \"education\", \"occupation\"], hash_bucket_size=1000),\r\n    tf.feature_column.crossed_column(\r\n        [\"native_country\", \"occupation\"], hash_bucket_size=1000)\r\n]\r\n` in [`wide_n_deep_tutorial.py`,](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/learn/wide_n_deep_tutorial.py)\r\n\r\nWhy choose `[\"education\", \"occupation\"]`, `[age_buckets, \"education\", \"occupation\"]` and `[\"native_country\", \"occupation\"]` as crossed_columns , are there any rule of thumb ?\r\n\r\n"}
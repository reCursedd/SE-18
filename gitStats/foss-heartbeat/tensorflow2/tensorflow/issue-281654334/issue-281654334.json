{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15332", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15332/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15332/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15332/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15332", "id": 281654334, "node_id": "MDU6SXNzdWUyODE2NTQzMzQ=", "number": 15332, "title": "Allow tf.Estimator.evaluate() to return summary protos / add tooling to produce useful eval image summaries", "user": {"login": "Rikorose", "id": 16517898, "node_id": "MDQ6VXNlcjE2NTE3ODk4", "avatar_url": "https://avatars0.githubusercontent.com/u/16517898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rikorose", "html_url": "https://github.com/Rikorose", "followers_url": "https://api.github.com/users/Rikorose/followers", "following_url": "https://api.github.com/users/Rikorose/following{/other_user}", "gists_url": "https://api.github.com/users/Rikorose/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rikorose/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rikorose/subscriptions", "organizations_url": "https://api.github.com/users/Rikorose/orgs", "repos_url": "https://api.github.com/users/Rikorose/repos", "events_url": "https://api.github.com/users/Rikorose/events{/privacy}", "received_events_url": "https://api.github.com/users/Rikorose/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-12-13T07:50:00Z", "updated_at": "2018-08-08T21:26:28Z", "closed_at": "2018-08-08T21:26:28Z", "author_association": "NONE", "body_html": "<p>Related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"269224059\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14042\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/14042/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/14042\">#14042</a>.</p>\n<p><code>tf.Estimator.train()</code> writes a summary of all defined summaries (scalar, img) in the given <code>model_fn</code> when calling <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/estimator/estimator.py#L801\">MonitoredTrainingSession</a> (<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/monitored_session.py#L366\">here</a>).</p>\n<p><code>tf.Estimator.evaluate()</code> does not write summaries defined somewhere in the <code>model_fn</code>. A workaround is defining <code>SummarySaverHook</code> inside the <code>model_fn</code>, which I think is not ideal since the Estimator has all the relevant information for saving summaries (steps, save directory, etc.).</p>\n<p>A possible solution would be adding a <code>SummarySaverHook</code> during evaluation, (e.g. <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/evaluation.py#L206\">here</a>) or create a new function <code>MonitoredEvaluationSession()</code> in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/monitored_session.py\">monitored_session.py</a> that creates such a hook.</p>\n<p>cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19293677\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ispirmustafa\">@ispirmustafa</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=577277\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/martinwicke\">@martinwicke</a></p>", "body_text": "Related to #14042.\ntf.Estimator.train() writes a summary of all defined summaries (scalar, img) in the given model_fn when calling MonitoredTrainingSession (here).\ntf.Estimator.evaluate() does not write summaries defined somewhere in the model_fn. A workaround is defining SummarySaverHook inside the model_fn, which I think is not ideal since the Estimator has all the relevant information for saving summaries (steps, save directory, etc.).\nA possible solution would be adding a SummarySaverHook during evaluation, (e.g. here) or create a new function MonitoredEvaluationSession() in monitored_session.py that creates such a hook.\ncc @ispirmustafa @martinwicke", "body": "Related to #14042.\r\n\r\n`tf.Estimator.train()` writes a summary of all defined summaries (scalar, img) in the given `model_fn` when calling [MonitoredTrainingSession](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/estimator/estimator.py#L801) ([here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/monitored_session.py#L366)).\r\n\r\n`tf.Estimator.evaluate()` does not write summaries defined somewhere in the `model_fn`. A workaround is defining `SummarySaverHook` inside the `model_fn`, which I think is not ideal since the Estimator has all the relevant information for saving summaries (steps, save directory, etc.).\r\n\r\nA possible solution would be adding a `SummarySaverHook` during evaluation, (e.g. [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/evaluation.py#L206)) or create a new function `MonitoredEvaluationSession()` in [monitored_session.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/monitored_session.py) that creates such a hook.\r\n\r\ncc @ispirmustafa @martinwicke\r\n"}
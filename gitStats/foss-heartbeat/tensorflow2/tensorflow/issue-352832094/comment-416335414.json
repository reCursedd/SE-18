{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/416335414", "html_url": "https://github.com/tensorflow/tensorflow/issues/21787#issuecomment-416335414", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21787", "id": 416335414, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjMzNTQxNA==", "user": {"login": "shashishekhar", "id": 1162712, "node_id": "MDQ6VXNlcjExNjI3MTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1162712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shashishekhar", "html_url": "https://github.com/shashishekhar", "followers_url": "https://api.github.com/users/shashishekhar/followers", "following_url": "https://api.github.com/users/shashishekhar/following{/other_user}", "gists_url": "https://api.github.com/users/shashishekhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/shashishekhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shashishekhar/subscriptions", "organizations_url": "https://api.github.com/users/shashishekhar/orgs", "repos_url": "https://api.github.com/users/shashishekhar/repos", "events_url": "https://api.github.com/users/shashishekhar/events{/privacy}", "received_events_url": "https://api.github.com/users/shashishekhar/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-27T19:11:30Z", "updated_at": "2018-08-27T19:11:30Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=12405578\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jiarenyf\">@jiarenyf</a> : Thanks, I ran a few preliminary benchmarks using the <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite/tools/benchmark\">benchmark tool</a>, on Pixel 2 TFLite<br>\ncnn+ctc8.tflite was<br>\nnum_threads= 1, average: 258.86 ms<br>\nnum_threads = 4: average: 105 ms.</p>\n<p>I compiled with arm64, how are you benchmarking, are you building arm64 for TFLite?.</p>\n<p>Looking at the numbers for floating point, looks like the Fully connected op takes some time, I doubt reshape op is slower.<br>\nOne other thing to note, Tensorflow mobile benchmark by default uses multiple threads, whereas TFLite uses a single thread. Make sure you are explicitly passing the number of threads for both benchmarks.</p>", "body_text": "@jiarenyf : Thanks, I ran a few preliminary benchmarks using the benchmark tool, on Pixel 2 TFLite\ncnn+ctc8.tflite was\nnum_threads= 1, average: 258.86 ms\nnum_threads = 4: average: 105 ms.\nI compiled with arm64, how are you benchmarking, are you building arm64 for TFLite?.\nLooking at the numbers for floating point, looks like the Fully connected op takes some time, I doubt reshape op is slower.\nOne other thing to note, Tensorflow mobile benchmark by default uses multiple threads, whereas TFLite uses a single thread. Make sure you are explicitly passing the number of threads for both benchmarks.", "body": "@jiarenyf : Thanks, I ran a few preliminary benchmarks using the [benchmark tool](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite/tools/benchmark), on Pixel 2 TFLite \r\ncnn+ctc8.tflite was \r\nnum_threads= 1, average: 258.86 ms\r\nnum_threads = 4: average: 105 ms.\r\n\r\nI compiled with arm64, how are you benchmarking, are you building arm64 for TFLite?.\r\n\r\nLooking at the numbers for floating point, looks like the Fully connected op takes some time, I doubt reshape op is slower.\r\nOne other thing to note, Tensorflow mobile benchmark by default uses multiple threads, whereas TFLite uses a single thread. Make sure you are explicitly passing the number of threads for both benchmarks."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13762", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13762/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13762/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13762/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13762", "id": 265945706, "node_id": "MDU6SXNzdWUyNjU5NDU3MDY=", "number": 13762, "title": "How are threads bound to physical cores in TensorFlow runtime and inter/intra threadpools?", "user": {"login": "Jiawen1991", "id": 11548424, "node_id": "MDQ6VXNlcjExNTQ4NDI0", "avatar_url": "https://avatars2.githubusercontent.com/u/11548424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jiawen1991", "html_url": "https://github.com/Jiawen1991", "followers_url": "https://api.github.com/users/Jiawen1991/followers", "following_url": "https://api.github.com/users/Jiawen1991/following{/other_user}", "gists_url": "https://api.github.com/users/Jiawen1991/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jiawen1991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jiawen1991/subscriptions", "organizations_url": "https://api.github.com/users/Jiawen1991/orgs", "repos_url": "https://api.github.com/users/Jiawen1991/repos", "events_url": "https://api.github.com/users/Jiawen1991/events{/privacy}", "received_events_url": "https://api.github.com/users/Jiawen1991/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-16T23:20:52Z", "updated_at": "2017-10-17T14:46:13Z", "closed_at": "2017-10-17T14:46:13Z", "author_association": "NONE", "body_html": "<p>Hi all,</p>\n<p>If one CPU has 8 cores and each core has two threads, does TF runtime use the OS threads scheduler to match the logical cores and threads to the physical cores and threads? Or does it has its own policy to match the threads and cores? Does TF only recognize cores and but not the whole device(CPU) like the system does? (The OS only knows the number/id of cores and sockets and doesn't know how many CPU devices) Does the \"device\" in TF correspond to the physical core, e.g., TF recognizes 8 devices in the above CPU?</p>\n<p>I found out that there are inter/intra global and local threadpools in /tensorflow/core/common_runtime/local_device.cc and /tensorflow/core/common_runtime/dirrect_session.cc. Does that mean each device (or core?) have its own local inter/intra threadpool and there is only one inter/intra global threadpool in the whole TF runtime?</p>\n<p>Thank you for your time.</p>", "body_text": "Hi all,\nIf one CPU has 8 cores and each core has two threads, does TF runtime use the OS threads scheduler to match the logical cores and threads to the physical cores and threads? Or does it has its own policy to match the threads and cores? Does TF only recognize cores and but not the whole device(CPU) like the system does? (The OS only knows the number/id of cores and sockets and doesn't know how many CPU devices) Does the \"device\" in TF correspond to the physical core, e.g., TF recognizes 8 devices in the above CPU?\nI found out that there are inter/intra global and local threadpools in /tensorflow/core/common_runtime/local_device.cc and /tensorflow/core/common_runtime/dirrect_session.cc. Does that mean each device (or core?) have its own local inter/intra threadpool and there is only one inter/intra global threadpool in the whole TF runtime?\nThank you for your time.", "body": "Hi all,\r\n\r\nIf one CPU has 8 cores and each core has two threads, does TF runtime use the OS threads scheduler to match the logical cores and threads to the physical cores and threads? Or does it has its own policy to match the threads and cores? Does TF only recognize cores and but not the whole device(CPU) like the system does? (The OS only knows the number/id of cores and sockets and doesn't know how many CPU devices) Does the \"device\" in TF correspond to the physical core, e.g., TF recognizes 8 devices in the above CPU?\r\n\r\nI found out that there are inter/intra global and local threadpools in /tensorflow/core/common_runtime/local_device.cc and /tensorflow/core/common_runtime/dirrect_session.cc. Does that mean each device (or core?) have its own local inter/intra threadpool and there is only one inter/intra global threadpool in the whole TF runtime?\r\n\r\nThank you for your time."}
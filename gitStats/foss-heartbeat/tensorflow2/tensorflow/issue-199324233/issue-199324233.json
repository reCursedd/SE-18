{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6706", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6706/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6706/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6706/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6706", "id": 199324233, "node_id": "MDU6SXNzdWUxOTkzMjQyMzM=", "number": 6706, "title": "Bazel problem when using Tensorflow as an external dependency.", "user": {"login": "raraujosc", "id": 23160674, "node_id": "MDQ6VXNlcjIzMTYwNjc0", "avatar_url": "https://avatars0.githubusercontent.com/u/23160674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raraujosc", "html_url": "https://github.com/raraujosc", "followers_url": "https://api.github.com/users/raraujosc/followers", "following_url": "https://api.github.com/users/raraujosc/following{/other_user}", "gists_url": "https://api.github.com/users/raraujosc/gists{/gist_id}", "starred_url": "https://api.github.com/users/raraujosc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raraujosc/subscriptions", "organizations_url": "https://api.github.com/users/raraujosc/orgs", "repos_url": "https://api.github.com/users/raraujosc/repos", "events_url": "https://api.github.com/users/raraujosc/events{/privacy}", "received_events_url": "https://api.github.com/users/raraujosc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 29, "created_at": "2017-01-07T00:31:34Z", "updated_at": "2017-11-07T21:58:51Z", "closed_at": "2017-04-14T18:24:57Z", "author_association": "NONE", "body_html": "<p>When using the HEAD version of Tensorflow as an external Bazel dependency (like tensorflow_serving does), we run into an issue in the line:</p>\n<p><code>load(\"@//third_party:common.bzl\", \"template_rule\")</code></p>\n<p>inside</p>\n<p><code>tensorflow/third_party/jpeg/jpeg.BUILD</code></p>\n<p>That line assumes that Tensorflow is the main repository. But when Tensorflow is included in another project the main repository is the main project so that common.bzl file is not found. I think that line needs to read:</p>\n<p><code>load(\"@org_tensorflow//third_party:common.bzl\", \"template_rule\")</code></p>", "body_text": "When using the HEAD version of Tensorflow as an external Bazel dependency (like tensorflow_serving does), we run into an issue in the line:\nload(\"@//third_party:common.bzl\", \"template_rule\")\ninside\ntensorflow/third_party/jpeg/jpeg.BUILD\nThat line assumes that Tensorflow is the main repository. But when Tensorflow is included in another project the main repository is the main project so that common.bzl file is not found. I think that line needs to read:\nload(\"@org_tensorflow//third_party:common.bzl\", \"template_rule\")", "body": "When using the HEAD version of Tensorflow as an external Bazel dependency (like tensorflow_serving does), we run into an issue in the line:\r\n\r\n`load(\"@//third_party:common.bzl\", \"template_rule\")`\r\n\r\ninside\r\n\r\n`tensorflow/third_party/jpeg/jpeg.BUILD`\r\n\r\nThat line assumes that Tensorflow is the main repository. But when Tensorflow is included in another project the main repository is the main project so that common.bzl file is not found. I think that line needs to read:\r\n\r\n`load(\"@org_tensorflow//third_party:common.bzl\", \"template_rule\")`"}
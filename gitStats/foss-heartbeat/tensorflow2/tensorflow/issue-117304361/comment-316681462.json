{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/316681462", "html_url": "https://github.com/tensorflow/tensorflow/issues/252#issuecomment-316681462", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/252", "id": 316681462, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjY4MTQ2Mg==", "user": {"login": "standy66", "id": 1818586, "node_id": "MDQ6VXNlcjE4MTg1ODY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1818586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/standy66", "html_url": "https://github.com/standy66", "followers_url": "https://api.github.com/users/standy66/followers", "following_url": "https://api.github.com/users/standy66/following{/other_user}", "gists_url": "https://api.github.com/users/standy66/gists{/gist_id}", "starred_url": "https://api.github.com/users/standy66/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/standy66/subscriptions", "organizations_url": "https://api.github.com/users/standy66/orgs", "repos_url": "https://api.github.com/users/standy66/repos", "events_url": "https://api.github.com/users/standy66/events{/privacy}", "received_events_url": "https://api.github.com/users/standy66/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-20T11:57:45Z", "updated_at": "2017-07-20T13:26:37Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I was able to reproduce <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=731387\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/classner\">@classner</a> steps for tensorflow 1.2 with CUDA for pypy3 version 5.8.0-beta0 (Python 3.5.3). In order to do this, <code>_pywrap_tensorflow_internal.so</code> library in <code>site-packages/tensorflow/python</code> needs to be renamed to <code>_pywrap_tensorflow_internal.pypy3-58-x86_64-linux-gnu.so</code>. I am getting a slightly different error during <code>sess.run</code>:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ LD_LIBRARY_PATH=/usr/local/cuda/lib64 pypy3.5\n\nPython 3.5.3 (a37ecfe5f142bc971a86d17305cc5d1d70abec64, Jun 08 2017, 19:43:54)\n[PyPy 5.8.0-beta0 with GCC 6.3.0] on linux\n\n&gt;&gt;&gt;&gt; import tensorflow as tf\n&gt;&gt;&gt;&gt; x = tf.constant(1)\n&gt;&gt;&gt;&gt; y = tf.constant(2)\n&gt;&gt;&gt;&gt; z = x <span class=\"pl-k\">*</span> y\n&gt;&gt;&gt;&gt; with <span class=\"pl-en\">tf.Session</span>() as sess:\n....     sess.run(z)\n....     \n2017-07-20 14:43:47.795964: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:893] successful NUMA node <span class=\"pl-c1\">read</span> from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-07-20 14:43:47.796979: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: \nname: GeForce GTX 1080\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.936\npciBusID 0000:01:00.0\nTotal memory: 7.92GiB\nFree memory: 7.67GiB\n2017-07-20 14:43:47.796992: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 \n2017-07-20 14:43:47.796995: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y \n2017-07-20 14:43:47.797003: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -<span class=\"pl-k\">&gt;</span> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0)\nTraceback (most recent call last):\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>&lt;stdin&gt;<span class=\"pl-pds\">\"</span></span>, line 2, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/andrew/.virtualenvs/tensorflow_pypy/site-packages/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line 780, <span class=\"pl-k\">in</span> run\n    run_metadata_ptr = <span class=\"pl-en\">tf_session.TF_NewBuffer</span>()\nTypeError: argument after <span class=\"pl-k\">*</span> must be an iterable, not NoneType</pre></div>\n<p>It seems that <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/client/session.py#L780\">the first line</a> in <code>session.run</code> fails to execute.</p>", "body_text": "I was able to reproduce @classner steps for tensorflow 1.2 with CUDA for pypy3 version 5.8.0-beta0 (Python 3.5.3). In order to do this, _pywrap_tensorflow_internal.so library in site-packages/tensorflow/python needs to be renamed to _pywrap_tensorflow_internal.pypy3-58-x86_64-linux-gnu.so. I am getting a slightly different error during sess.run:\n$ LD_LIBRARY_PATH=/usr/local/cuda/lib64 pypy3.5\n\nPython 3.5.3 (a37ecfe5f142bc971a86d17305cc5d1d70abec64, Jun 08 2017, 19:43:54)\n[PyPy 5.8.0-beta0 with GCC 6.3.0] on linux\n\n>>>> import tensorflow as tf\n>>>> x = tf.constant(1)\n>>>> y = tf.constant(2)\n>>>> z = x * y\n>>>> with tf.Session() as sess:\n....     sess.run(z)\n....     \n2017-07-20 14:43:47.795964: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:893] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-07-20 14:43:47.796979: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: \nname: GeForce GTX 1080\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.936\npciBusID 0000:01:00.0\nTotal memory: 7.92GiB\nFree memory: 7.67GiB\n2017-07-20 14:43:47.796992: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 \n2017-07-20 14:43:47.796995: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y \n2017-07-20 14:43:47.797003: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0)\nTraceback (most recent call last):\n  File \"<stdin>\", line 2, in <module>\n  File \"/home/andrew/.virtualenvs/tensorflow_pypy/site-packages/tensorflow/python/client/session.py\", line 780, in run\n    run_metadata_ptr = tf_session.TF_NewBuffer()\nTypeError: argument after * must be an iterable, not NoneType\nIt seems that the first line in session.run fails to execute.", "body": "I was able to reproduce @classner steps for tensorflow 1.2 with CUDA for pypy3 version 5.8.0-beta0 (Python 3.5.3). In order to do this, `_pywrap_tensorflow_internal.so` library in `site-packages/tensorflow/python` needs to be renamed to `_pywrap_tensorflow_internal.pypy3-58-x86_64-linux-gnu.so`. I am getting a slightly different error during `sess.run`:\r\n\r\n```bash\r\n$ LD_LIBRARY_PATH=/usr/local/cuda/lib64 pypy3.5\r\n\r\nPython 3.5.3 (a37ecfe5f142bc971a86d17305cc5d1d70abec64, Jun 08 2017, 19:43:54)\r\n[PyPy 5.8.0-beta0 with GCC 6.3.0] on linux\r\n\r\n>>>> import tensorflow as tf\r\n>>>> x = tf.constant(1)\r\n>>>> y = tf.constant(2)\r\n>>>> z = x * y\r\n>>>> with tf.Session() as sess:\r\n....     sess.run(z)\r\n....     \r\n2017-07-20 14:43:47.795964: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:893] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2017-07-20 14:43:47.796979: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: \r\nname: GeForce GTX 1080\r\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.936\r\npciBusID 0000:01:00.0\r\nTotal memory: 7.92GiB\r\nFree memory: 7.67GiB\r\n2017-07-20 14:43:47.796992: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 \r\n2017-07-20 14:43:47.796995: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y \r\n2017-07-20 14:43:47.797003: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\n  File \"/home/andrew/.virtualenvs/tensorflow_pypy/site-packages/tensorflow/python/client/session.py\", line 780, in run\r\n    run_metadata_ptr = tf_session.TF_NewBuffer()\r\nTypeError: argument after * must be an iterable, not NoneType\r\n```\r\n\r\nIt seems that [the first line](https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/client/session.py#L780) in `session.run` fails to execute."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18748", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18748/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18748/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18748/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18748", "id": 316446770, "node_id": "MDU6SXNzdWUzMTY0NDY3NzA=", "number": 18748, "title": "build_all_android.sh x86 abi build issue", "user": {"login": "gpx1000", "id": 3833955, "node_id": "MDQ6VXNlcjM4MzM5NTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3833955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gpx1000", "html_url": "https://github.com/gpx1000", "followers_url": "https://api.github.com/users/gpx1000/followers", "following_url": "https://api.github.com/users/gpx1000/following{/other_user}", "gists_url": "https://api.github.com/users/gpx1000/gists{/gist_id}", "starred_url": "https://api.github.com/users/gpx1000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gpx1000/subscriptions", "organizations_url": "https://api.github.com/users/gpx1000/orgs", "repos_url": "https://api.github.com/users/gpx1000/repos", "events_url": "https://api.github.com/users/gpx1000/events{/privacy}", "received_events_url": "https://api.github.com/users/gpx1000/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-04-21T00:40:58Z", "updated_at": "2018-11-22T18:55:52Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>It took a bit of effort to get the build_all_android.sh script to work.  The effort was primarily due to the same issues encountered here: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"270658556\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14186\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/14186/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/14186\">#14186</a><br>\nArmed with the work around outlined there, I modified compile_nsync.sh to have<br>\nAR := ${NDK_ROOT}/toolchains/'\"$toolchain\"'/prebuilt/'\"$android_os_arch\"'/bin/'\"$bin_prefix\"'-ar<br>\nThis does result in being able to build the arm variants (armeabi, armeabi-v7a and arm64-v8a) as well as the x86_64 variant.  However, x86 variant fails with:<br>\n/Users/swinston/Downloads/android-ndk-r12b/platforms/android-21/arch-x86/usr/lib/crtend_android.o<br>\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'<br>\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'<br>\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'<br>\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'<br>\ncollect2: error: ld returned 1 exit status</p>\n<p>This is a OSX build host and using ndk r12b.</p>\n<p>NB: count me amongst those eager for r16/r17 ndk support!</p>", "body_text": "It took a bit of effort to get the build_all_android.sh script to work.  The effort was primarily due to the same issues encountered here: #14186\nArmed with the work around outlined there, I modified compile_nsync.sh to have\nAR := ${NDK_ROOT}/toolchains/'\"$toolchain\"'/prebuilt/'\"$android_os_arch\"'/bin/'\"$bin_prefix\"'-ar\nThis does result in being able to build the arm variants (armeabi, armeabi-v7a and arm64-v8a) as well as the x86_64 variant.  However, x86 variant fails with:\n/Users/swinston/Downloads/android-ndk-r12b/platforms/android-21/arch-x86/usr/lib/crtend_android.o\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'\ncollect2: error: ld returned 1 exit status\nThis is a OSX build host and using ndk r12b.\nNB: count me amongst those eager for r16/r17 ndk support!", "body": "It took a bit of effort to get the build_all_android.sh script to work.  The effort was primarily due to the same issues encountered here: https://github.com/tensorflow/tensorflow/issues/14186\r\nArmed with the work around outlined there, I modified compile_nsync.sh to have \r\nAR := ${NDK_ROOT}/toolchains/'\"$toolchain\"'/prebuilt/'\"$android_os_arch\"'/bin/'\"$bin_prefix\"'-ar\r\nThis does result in being able to build the arm variants (armeabi, armeabi-v7a and arm64-v8a) as well as the x86_64 variant.  However, x86 variant fails with:\r\n/Users/swinston/Downloads/android-ndk-r12b/platforms/android-21/arch-x86/usr/lib/crtend_android.o\r\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'\r\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'\r\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'\r\n/tmp/77a95b0085967f7191ad958665724b6f/sysroot/usr/include/unistd.h:173: error: undefined reference to '__page_size'\r\ncollect2: error: ld returned 1 exit status\r\n\r\nThis is a OSX build host and using ndk r12b.\r\n\r\nNB: count me amongst those eager for r16/r17 ndk support!\r\n\r\n"}
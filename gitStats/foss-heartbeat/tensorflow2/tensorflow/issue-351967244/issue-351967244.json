{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21725", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21725/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21725/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21725/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21725", "id": 351967244, "node_id": "MDU6SXNzdWUzNTE5NjcyNDQ=", "number": 21725, "title": "Quantize model: does not have MinMax information, and is not a constant array when quantize the concat op layer", "user": {"login": "1icas", "id": 20149552, "node_id": "MDQ6VXNlcjIwMTQ5NTUy", "avatar_url": "https://avatars2.githubusercontent.com/u/20149552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1icas", "html_url": "https://github.com/1icas", "followers_url": "https://api.github.com/users/1icas/followers", "following_url": "https://api.github.com/users/1icas/following{/other_user}", "gists_url": "https://api.github.com/users/1icas/gists{/gist_id}", "starred_url": "https://api.github.com/users/1icas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1icas/subscriptions", "organizations_url": "https://api.github.com/users/1icas/orgs", "repos_url": "https://api.github.com/users/1icas/repos", "events_url": "https://api.github.com/users/1icas/events{/privacy}", "received_events_url": "https://api.github.com/users/1icas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-08-20T02:52:40Z", "updated_at": "2018-11-19T23:26:33Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>tensorflow verison: 1.10<br>\nproblem:I will describle this problem in two cases(one can quantize succeed, the other can not success).<br>\ntf.concat(<br>\nvalues,<br>\naxis,<br>\nname='concat'<br>\n). This's the concat api.</p>\n<p>1.if i use concat like this\uff1a tf.concat(values=['t1', 't2'], axis=3). My model can quantize succeed.<br>\n2.if i use concat like this\uff1a tf.concat(values=['t1'], axis=3).some errors occured: concat does not have MinMax information, and is not a constant array. Cannot proceed with quantization.<br>\nt1 and t2 are the layer name.</p>\n<p>I quantize my model like this:<br>\nbazel-bin/tensorflow/contrib/lite/toco/toco <br>\n--input_file=/home/admin_pc/model_test/output_qt1.pb <br>\n--output_file=/home/admin_pc/model_test/mobilenet_qg.tflite <br>\n--input_fromat=TENSORFLOW_GRAPHDEF <br>\n--output_format=TFLITE <br>\n--inference_type=QUANTIZED_UINT8 <br>\n--input_array=image <br>\n--output_array=Pose/concat_stage7 <br>\n--input_shape=1,224,224,3 <br>\n--change_concat_input_ranges=false</p>", "body_text": "tensorflow verison: 1.10\nproblem:I will describle this problem in two cases(one can quantize succeed, the other can not success).\ntf.concat(\nvalues,\naxis,\nname='concat'\n). This's the concat api.\n1.if i use concat like this\uff1a tf.concat(values=['t1', 't2'], axis=3). My model can quantize succeed.\n2.if i use concat like this\uff1a tf.concat(values=['t1'], axis=3).some errors occured: concat does not have MinMax information, and is not a constant array. Cannot proceed with quantization.\nt1 and t2 are the layer name.\nI quantize my model like this:\nbazel-bin/tensorflow/contrib/lite/toco/toco \n--input_file=/home/admin_pc/model_test/output_qt1.pb \n--output_file=/home/admin_pc/model_test/mobilenet_qg.tflite \n--input_fromat=TENSORFLOW_GRAPHDEF \n--output_format=TFLITE \n--inference_type=QUANTIZED_UINT8 \n--input_array=image \n--output_array=Pose/concat_stage7 \n--input_shape=1,224,224,3 \n--change_concat_input_ranges=false", "body": "tensorflow verison: 1.10\r\nproblem:I will describle this problem in two cases(one can quantize succeed, the other can not success).\r\ntf.concat(\r\n    values,\r\n    axis,\r\n    name='concat'\r\n). This's the concat api.\r\n\r\n1.if i use concat like this\uff1a tf.concat(values=['t1', 't2'], axis=3). My model can quantize succeed.\r\n2.if i use concat like this\uff1a tf.concat(values=['t1'], axis=3).some errors occured: concat does not have MinMax information, and is not a constant array. Cannot proceed with quantization.\r\nt1 and t2 are the layer name.\r\n\r\nI quantize my model like this:\r\nbazel-bin/tensorflow/contrib/lite/toco/toco \\\r\n--input_file=/home/admin_pc/model_test/output_qt1.pb \\\r\n--output_file=/home/admin_pc/model_test/mobilenet_qg.tflite \\\r\n--input_fromat=TENSORFLOW_GRAPHDEF \\\r\n--output_format=TFLITE \\\r\n--inference_type=QUANTIZED_UINT8 \\\r\n--input_array=image \\\r\n--output_array=Pose/concat_stage7 \\\r\n--input_shape=1,224,224,3 \\\r\n--change_concat_input_ranges=false"}
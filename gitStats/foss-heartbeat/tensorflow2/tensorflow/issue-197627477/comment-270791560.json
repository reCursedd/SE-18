{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/270791560", "html_url": "https://github.com/tensorflow/tensorflow/issues/6509#issuecomment-270791560", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6509", "id": 270791560, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDc5MTU2MA==", "user": {"login": "guschmue", "id": 22941064, "node_id": "MDQ6VXNlcjIyOTQxMDY0", "avatar_url": "https://avatars3.githubusercontent.com/u/22941064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guschmue", "html_url": "https://github.com/guschmue", "followers_url": "https://api.github.com/users/guschmue/followers", "following_url": "https://api.github.com/users/guschmue/following{/other_user}", "gists_url": "https://api.github.com/users/guschmue/gists{/gist_id}", "starred_url": "https://api.github.com/users/guschmue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guschmue/subscriptions", "organizations_url": "https://api.github.com/users/guschmue/orgs", "repos_url": "https://api.github.com/users/guschmue/repos", "events_url": "https://api.github.com/users/guschmue/events{/privacy}", "received_events_url": "https://api.github.com/users/guschmue/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-05T23:47:36Z", "updated_at": "2017-01-05T23:47:36Z", "author_association": "CONTRIBUTOR", "body_html": "<h2>a simple repro case attached (only happens on windows/gpu).<br>\nI'm think this showed only for uint8 in the past but now I see it also for int32.</h2>\n<p>import tensorflow as tf<br>\nimport numpy as np</p>\n<p>data = np.zeros(shape=(3, 5), dtype='int32')<br>\ninput = tf.placeholder(tf.int32, data.shape, name=\"input\")<br>\none_hot_op = tf.one_hot(input, depth=3, dtype=tf.float32)</p>\n<p>init = tf.initialize_all_variables()</p>\n<p>with tf.Session() as sess:<br>\nsess.run(init)<br>\nprint(sess.run(one_hot_op, feed_dict = {input : data}))</p>", "body_text": "a simple repro case attached (only happens on windows/gpu).\nI'm think this showed only for uint8 in the past but now I see it also for int32.\nimport tensorflow as tf\nimport numpy as np\ndata = np.zeros(shape=(3, 5), dtype='int32')\ninput = tf.placeholder(tf.int32, data.shape, name=\"input\")\none_hot_op = tf.one_hot(input, depth=3, dtype=tf.float32)\ninit = tf.initialize_all_variables()\nwith tf.Session() as sess:\nsess.run(init)\nprint(sess.run(one_hot_op, feed_dict = {input : data}))", "body": "a simple repro case attached (only happens on windows/gpu).\r\nI'm think this showed only for uint8 in the past but now I see it also for int32.\r\n--\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ndata = np.zeros(shape=(3, 5), dtype='int32')\r\ninput = tf.placeholder(tf.int32, data.shape, name=\"input\")\r\none_hot_op = tf.one_hot(input, depth=3, dtype=tf.float32)\r\n\r\ninit = tf.initialize_all_variables()\r\n\r\nwith tf.Session() as sess:\r\n    sess.run(init)\r\n    print(sess.run(one_hot_op, feed_dict = {input : data})) "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/307788951", "html_url": "https://github.com/tensorflow/tensorflow/issues/10492#issuecomment-307788951", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10492", "id": 307788951, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzc4ODk1MQ==", "user": {"login": "hgffly", "id": 20164141, "node_id": "MDQ6VXNlcjIwMTY0MTQx", "avatar_url": "https://avatars3.githubusercontent.com/u/20164141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hgffly", "html_url": "https://github.com/hgffly", "followers_url": "https://api.github.com/users/hgffly/followers", "following_url": "https://api.github.com/users/hgffly/following{/other_user}", "gists_url": "https://api.github.com/users/hgffly/gists{/gist_id}", "starred_url": "https://api.github.com/users/hgffly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hgffly/subscriptions", "organizations_url": "https://api.github.com/users/hgffly/orgs", "repos_url": "https://api.github.com/users/hgffly/repos", "events_url": "https://api.github.com/users/hgffly/events{/privacy}", "received_events_url": "https://api.github.com/users/hgffly/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-12T13:28:08Z", "updated_at": "2017-06-12T13:28:08Z", "author_association": "NONE", "body_html": "<p>baodingge, thanks for response so much.<br>\nAfter reading and trying your codes, I just found what's the problem with my codes,<br>\nMy modified codes are listed as below:</p>\n<pre><code>def read_and_decode(filename, img_size=-1, distorted=True, get_float_img=True):\n\nfilename_queue = tf.train.string_input_producer([filename])  # specifying parameter \"num_epochs\" would raised an error, which I don't know how to resolve yet\n\nreader = tf.TFRecordReader()\n\n_, serialized_example = reader.read(filename_queue)\n\nfeatures = tf.parse_single_example(serialized_example,\n                                   features={\n                                       'img_h': tf.FixedLenFeature([], tf.int64),\n                                       'img_w': tf.FixedLenFeature([], tf.int64),\n                                       'img_lbl': tf.FixedLenFeature([], tf.int64),\n                                       'img_raw': tf.FixedLenFeature([], tf.string)\n                                   })\n\nimg_h = tf.cast(features['img_h'], tf.int32)\nimg_w = tf.cast(features['img_w'], tf.int32)\nimg = tf.decode_raw(features['img_raw'], tf.uint8)\n\nimg = tf.reshape(img, [img_h, img_w, 3])  # reshape to a 2-D image\nlabel = tf.cast(features['img_lbl'], tf.int32)\n\nimg = tf.random_crop(img, [20, 20, 3])  &lt;==  After reshaping the tensor, I need to add this line to get images with specific size\n\nreturn img, label\n</code></pre>\n<p>Thanks so much!!!</p>", "body_text": "baodingge, thanks for response so much.\nAfter reading and trying your codes, I just found what's the problem with my codes,\nMy modified codes are listed as below:\ndef read_and_decode(filename, img_size=-1, distorted=True, get_float_img=True):\n\nfilename_queue = tf.train.string_input_producer([filename])  # specifying parameter \"num_epochs\" would raised an error, which I don't know how to resolve yet\n\nreader = tf.TFRecordReader()\n\n_, serialized_example = reader.read(filename_queue)\n\nfeatures = tf.parse_single_example(serialized_example,\n                                   features={\n                                       'img_h': tf.FixedLenFeature([], tf.int64),\n                                       'img_w': tf.FixedLenFeature([], tf.int64),\n                                       'img_lbl': tf.FixedLenFeature([], tf.int64),\n                                       'img_raw': tf.FixedLenFeature([], tf.string)\n                                   })\n\nimg_h = tf.cast(features['img_h'], tf.int32)\nimg_w = tf.cast(features['img_w'], tf.int32)\nimg = tf.decode_raw(features['img_raw'], tf.uint8)\n\nimg = tf.reshape(img, [img_h, img_w, 3])  # reshape to a 2-D image\nlabel = tf.cast(features['img_lbl'], tf.int32)\n\nimg = tf.random_crop(img, [20, 20, 3])  <==  After reshaping the tensor, I need to add this line to get images with specific size\n\nreturn img, label\n\nThanks so much!!!", "body": "baodingge, thanks for response so much.\r\nAfter reading and trying your codes, I just found what's the problem with my codes, \r\nMy modified codes are listed as below:\r\n\r\n    def read_and_decode(filename, img_size=-1, distorted=True, get_float_img=True):\r\n\r\n    filename_queue = tf.train.string_input_producer([filename])  # specifying parameter \"num_epochs\" would raised an error, which I don't know how to resolve yet\r\n\r\n    reader = tf.TFRecordReader()\r\n\r\n    _, serialized_example = reader.read(filename_queue)\r\n\r\n    features = tf.parse_single_example(serialized_example,\r\n                                       features={\r\n                                           'img_h': tf.FixedLenFeature([], tf.int64),\r\n                                           'img_w': tf.FixedLenFeature([], tf.int64),\r\n                                           'img_lbl': tf.FixedLenFeature([], tf.int64),\r\n                                           'img_raw': tf.FixedLenFeature([], tf.string)\r\n                                       })\r\n\r\n    img_h = tf.cast(features['img_h'], tf.int32)\r\n    img_w = tf.cast(features['img_w'], tf.int32)\r\n    img = tf.decode_raw(features['img_raw'], tf.uint8)\r\n\r\n    img = tf.reshape(img, [img_h, img_w, 3])  # reshape to a 2-D image\r\n    label = tf.cast(features['img_lbl'], tf.int32)\r\n\r\n    img = tf.random_crop(img, [20, 20, 3])  <==  After reshaping the tensor, I need to add this line to get images with specific size\r\n\r\n    return img, label\r\n\r\nThanks so much!!!"}
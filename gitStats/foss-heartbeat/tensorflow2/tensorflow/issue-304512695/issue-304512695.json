{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17654", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17654/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17654/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17654/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17654", "id": 304512695, "node_id": "MDU6SXNzdWUzMDQ1MTI2OTU=", "number": 17654, "title": "2D tf.nn.convolution() output is inconsistent between inputs 1x1 and 2x2 with kernel=3x3, strides=2, padding='SAME'.", "user": {"login": "ozabluda", "id": 14060629, "node_id": "MDQ6VXNlcjE0MDYwNjI5", "avatar_url": "https://avatars3.githubusercontent.com/u/14060629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ozabluda", "html_url": "https://github.com/ozabluda", "followers_url": "https://api.github.com/users/ozabluda/followers", "following_url": "https://api.github.com/users/ozabluda/following{/other_user}", "gists_url": "https://api.github.com/users/ozabluda/gists{/gist_id}", "starred_url": "https://api.github.com/users/ozabluda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ozabluda/subscriptions", "organizations_url": "https://api.github.com/users/ozabluda/orgs", "repos_url": "https://api.github.com/users/ozabluda/repos", "events_url": "https://api.github.com/users/ozabluda/events{/privacy}", "received_events_url": "https://api.github.com/users/ozabluda/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-03-12T19:40:40Z", "updated_at": "2018-03-13T00:56:41Z", "closed_at": "2018-03-13T00:56:41Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Output of Keras <code>Conv2D()</code>, which is a passthrough to <code>tf.nn.convolution()</code>, is inconsistent between inputs 1x1 and 2x2 with kernel=3x3, strides=2, padding='SAME'.</p>\n<p>The following code with 2x2 input produces wrong output <code>8.</code>, which is inconsistent with correct output <code>4.</code> if the input is 1x1.</p>\n<pre><code>import numpy as np\nfrom keras.layers import Conv2D\nfrom keras.models import Sequential\n\nw = np.arange(3*3*1*1).reshape(3, 3, 1, 1)\n\nmodel = Sequential()\nmodel.add(Conv2D(1, kernel_size=3, strides=2, input_shape=(2, 2, 1),\n                 padding='SAME', use_bias=False))\nmodel.set_weights([w])\nprint(model.predict(np.ones((1, 2, 2, 1))))\n</code></pre>", "body_text": "Output of Keras Conv2D(), which is a passthrough to tf.nn.convolution(), is inconsistent between inputs 1x1 and 2x2 with kernel=3x3, strides=2, padding='SAME'.\nThe following code with 2x2 input produces wrong output 8., which is inconsistent with correct output 4. if the input is 1x1.\nimport numpy as np\nfrom keras.layers import Conv2D\nfrom keras.models import Sequential\n\nw = np.arange(3*3*1*1).reshape(3, 3, 1, 1)\n\nmodel = Sequential()\nmodel.add(Conv2D(1, kernel_size=3, strides=2, input_shape=(2, 2, 1),\n                 padding='SAME', use_bias=False))\nmodel.set_weights([w])\nprint(model.predict(np.ones((1, 2, 2, 1))))", "body": "Output of Keras `Conv2D()`, which is a passthrough to `tf.nn.convolution()`, is inconsistent between inputs 1x1 and 2x2 with kernel=3x3, strides=2, padding='SAME'.\r\n\r\nThe following code with 2x2 input produces wrong output `8.`, which is inconsistent with correct output `4.` if the input is 1x1. \r\n```\r\nimport numpy as np\r\nfrom keras.layers import Conv2D\r\nfrom keras.models import Sequential\r\n\r\nw = np.arange(3*3*1*1).reshape(3, 3, 1, 1)\r\n\r\nmodel = Sequential()\r\nmodel.add(Conv2D(1, kernel_size=3, strides=2, input_shape=(2, 2, 1),\r\n                 padding='SAME', use_bias=False))\r\nmodel.set_weights([w])\r\nprint(model.predict(np.ones((1, 2, 2, 1))))\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4631", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4631/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4631/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4631/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/4631", "id": 179816484, "node_id": "MDExOlB1bGxSZXF1ZXN0ODcxNTA3MTA=", "number": 4631, "title": "GridRNN cell uses tuples for output and states", "user": {"login": "phvu", "id": 1087992, "node_id": "MDQ6VXNlcjEwODc5OTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1087992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phvu", "html_url": "https://github.com/phvu", "followers_url": "https://api.github.com/users/phvu/followers", "following_url": "https://api.github.com/users/phvu/following{/other_user}", "gists_url": "https://api.github.com/users/phvu/gists{/gist_id}", "starred_url": "https://api.github.com/users/phvu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phvu/subscriptions", "organizations_url": "https://api.github.com/users/phvu/orgs", "repos_url": "https://api.github.com/users/phvu/repos", "events_url": "https://api.github.com/users/phvu/events{/privacy}", "received_events_url": "https://api.github.com/users/phvu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "fef2c0", "default": false}, {"id": 300136613, "node_id": "MDU6TGFiZWwzMDAxMzY2MTM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20no", "name": "cla: no", "color": "eb6420", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2016-09-28T16:06:54Z", "updated_at": "2016-11-07T10:25:13Z", "closed_at": "2016-11-07T10:25:13Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4631", "html_url": "https://github.com/tensorflow/tensorflow/pull/4631", "diff_url": "https://github.com/tensorflow/tensorflow/pull/4631.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/4631.patch"}, "body_html": "<p>In response to this (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"157346581\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2560\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2560/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/2560\">#2560</a>) and recent changes in LSTMCell, this PR added <code>state_is_tuple=True</code> and <code>output_is_tuple=True</code> into the constructor of GridRNNCell:</p>\n<pre><code>&gt; cell = tf.contrib.grid_rnn.Grid2LSTMCell(3, use_peepholes=True)\n&gt; cell.state_size\n       (LSTMStateTuple(c=3, h=3), LSTMStateTuple(c=3, h=3))\n&gt; cell.output_size\n       (3,)\n</code></pre>\n<p>This means there are 2 LSTM cells in the grid, and the state of each cell has size of <code>(c=3, h=3)</code>. There is only one output dimension, whose size is 3.</p>\n<p>In contrast:</p>\n<pre><code>&gt; cell = tf.contrib.grid_rnn.Grid2BasicRNNCell(3)\n&gt; cell.state_size\n     (3, 3)\n&gt; cell.output_size\n     (3,)\n</code></pre>\n<p>This means there are 2 BasicRNN cell in the grid, and the state of each cell has size of 3. There is only one output dimension, whose size is 3.</p>\n<p>Previous behaviour is maintained by using <code>state_is_tuple=False, output_is_tuple=False</code> when creating the cell.</p>\n<pre><code>&gt; cell = tf.contrib.grid_rnn.Grid2LSTMCell(3, use_peepholes=True, state_is_tuple=False, output_is_tuple=False)\n    WARNING:tensorflow:&lt;tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2LSTMCell object at 0x10de68f50&gt;: Using a concatenated state is slower and will soon be deprecated.  Use state_is_tuple=True.\n    WARNING:tensorflow:&lt;tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2LSTMCell** object at 0x10de68f50&gt;: Using a concatenated output is slower and will soon be deprecated.  Use output_is_tuple=True.\n\n&gt; cell.state_size\n    12\n&gt; cell.output_size\n    3\n\n&gt; cell = tf.contrib.grid_rnn.Grid2BasicRNNCell(3, state_is_tuple=False, output_is_tuple=False)\n    WARNING:tensorflow:&lt;tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2BasicRNNCell object at 0x10de4b950&gt;: Using a concatenated state is slower and will soon be deprecated.  Use state_is_tuple=True.\n    WARNING:tensorflow:&lt;tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2BasicRNNCell object at 0x10de4b950&gt;: Using a concatenated output is slower and will soon be deprecated.  Use output_is_tuple=True.\n\n&gt; cell.state_size\n   6\n&gt; cell.output_size\n   3\n</code></pre>\n<p>This also <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #4296.\">fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"175994966\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4296\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4296/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4296\">#4296</a></p>", "body_text": "In response to this (#2560) and recent changes in LSTMCell, this PR added state_is_tuple=True and output_is_tuple=True into the constructor of GridRNNCell:\n> cell = tf.contrib.grid_rnn.Grid2LSTMCell(3, use_peepholes=True)\n> cell.state_size\n       (LSTMStateTuple(c=3, h=3), LSTMStateTuple(c=3, h=3))\n> cell.output_size\n       (3,)\n\nThis means there are 2 LSTM cells in the grid, and the state of each cell has size of (c=3, h=3). There is only one output dimension, whose size is 3.\nIn contrast:\n> cell = tf.contrib.grid_rnn.Grid2BasicRNNCell(3)\n> cell.state_size\n     (3, 3)\n> cell.output_size\n     (3,)\n\nThis means there are 2 BasicRNN cell in the grid, and the state of each cell has size of 3. There is only one output dimension, whose size is 3.\nPrevious behaviour is maintained by using state_is_tuple=False, output_is_tuple=False when creating the cell.\n> cell = tf.contrib.grid_rnn.Grid2LSTMCell(3, use_peepholes=True, state_is_tuple=False, output_is_tuple=False)\n    WARNING:tensorflow:<tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2LSTMCell object at 0x10de68f50>: Using a concatenated state is slower and will soon be deprecated.  Use state_is_tuple=True.\n    WARNING:tensorflow:<tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2LSTMCell** object at 0x10de68f50>: Using a concatenated output is slower and will soon be deprecated.  Use output_is_tuple=True.\n\n> cell.state_size\n    12\n> cell.output_size\n    3\n\n> cell = tf.contrib.grid_rnn.Grid2BasicRNNCell(3, state_is_tuple=False, output_is_tuple=False)\n    WARNING:tensorflow:<tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2BasicRNNCell object at 0x10de4b950>: Using a concatenated state is slower and will soon be deprecated.  Use state_is_tuple=True.\n    WARNING:tensorflow:<tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2BasicRNNCell object at 0x10de4b950>: Using a concatenated output is slower and will soon be deprecated.  Use output_is_tuple=True.\n\n> cell.state_size\n   6\n> cell.output_size\n   3\n\nThis also fixes #4296", "body": "In response to this (https://github.com/tensorflow/tensorflow/issues/2560) and recent changes in LSTMCell, this PR added `state_is_tuple=True` and `output_is_tuple=True` into the constructor of GridRNNCell:\n\n```\n> cell = tf.contrib.grid_rnn.Grid2LSTMCell(3, use_peepholes=True)\n> cell.state_size\n       (LSTMStateTuple(c=3, h=3), LSTMStateTuple(c=3, h=3))\n> cell.output_size\n       (3,)\n```\n\nThis means there are 2 LSTM cells in the grid, and the state of each cell has size of `(c=3, h=3)`. There is only one output dimension, whose size is 3.\n\nIn contrast:\n\n```\n> cell = tf.contrib.grid_rnn.Grid2BasicRNNCell(3)\n> cell.state_size\n     (3, 3)\n> cell.output_size\n     (3,)\n```\n\nThis means there are 2 BasicRNN cell in the grid, and the state of each cell has size of 3. There is only one output dimension, whose size is 3.\n\nPrevious behaviour is maintained by using `state_is_tuple=False, output_is_tuple=False` when creating the cell.\n\n```\n> cell = tf.contrib.grid_rnn.Grid2LSTMCell(3, use_peepholes=True, state_is_tuple=False, output_is_tuple=False)\n    WARNING:tensorflow:<tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2LSTMCell object at 0x10de68f50>: Using a concatenated state is slower and will soon be deprecated.  Use state_is_tuple=True.\n    WARNING:tensorflow:<tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2LSTMCell** object at 0x10de68f50>: Using a concatenated output is slower and will soon be deprecated.  Use output_is_tuple=True.\n\n> cell.state_size\n    12\n> cell.output_size\n    3\n\n> cell = tf.contrib.grid_rnn.Grid2BasicRNNCell(3, state_is_tuple=False, output_is_tuple=False)\n    WARNING:tensorflow:<tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2BasicRNNCell object at 0x10de4b950>: Using a concatenated state is slower and will soon be deprecated.  Use state_is_tuple=True.\n    WARNING:tensorflow:<tensorflow.contrib.grid_rnn.python.ops.grid_rnn_cell.Grid2BasicRNNCell object at 0x10de4b950>: Using a concatenated output is slower and will soon be deprecated.  Use output_is_tuple=True.\n\n> cell.state_size\n   6\n> cell.output_size\n   3\n```\n\nThis also fixes https://github.com/tensorflow/tensorflow/issues/4296\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12236", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12236/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12236/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12236/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12236", "id": 249811400, "node_id": "MDU6SXNzdWUyNDk4MTE0MDA=", "number": 12236, "title": "\"/gpu:0/stream\" not showing up on timeline", "user": {"login": "bowang", "id": 425637, "node_id": "MDQ6VXNlcjQyNTYzNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/425637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bowang", "html_url": "https://github.com/bowang", "followers_url": "https://api.github.com/users/bowang/followers", "following_url": "https://api.github.com/users/bowang/following{/other_user}", "gists_url": "https://api.github.com/users/bowang/gists{/gist_id}", "starred_url": "https://api.github.com/users/bowang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bowang/subscriptions", "organizations_url": "https://api.github.com/users/bowang/orgs", "repos_url": "https://api.github.com/users/bowang/repos", "events_url": "https://api.github.com/users/bowang/events{/privacy}", "received_events_url": "https://api.github.com/users/bowang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-12T13:12:10Z", "updated_at": "2017-12-20T02:30:43Z", "closed_at": "2017-12-20T02:30:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I am generating timeline with TensorFlow r1.3.<br>\nI can only see <code>/job:localhost/replica:0/task:0/cpu:0</code> and <code>/job:localhost/replica:0/task:0/gpu:0</code>.<br>\nBut I can't find <code>/gpu:0/stream</code></p>\n<p>Any idea?</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/425637/29240963-bb7047dc-7f24-11e7-9cd3-2422c97487b0.png\"><img src=\"https://user-images.githubusercontent.com/425637/29240963-bb7047dc-7f24-11e7-9cd3-2422c97487b0.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>\n<p>My code to regenerate the timeline.</p>\n<pre><code>import os\nimport tensorflow as tf\nfrom tensorflow.python.client import timeline\n\ndim = 6000\nn = 5\n\nwith tf.device('/gpu:0'):\n    X, Y, Z, _X, _Y = [], [], [], [], []\n    for i in range(n):\n        X.append(tf.random_uniform([dim, dim], 0, 10, name='X' + str(i)))\n        Y.append(tf.random_uniform([dim, dim], 0, 10, name='Y' + str(i)))\n        _X.append(tf.placeholder(dtype=tf.float32, shape=[dim, dim]))\n        _Y.append(tf.placeholder(dtype=tf.float32, shape=[dim, dim]))\n        Z.append(tf.matmul(_X[i], _Y[i]))\n    W = tf.ones([dim, dim])\n    for i in range(n):\n        W = tf.matmul(W, Z[i])\n\nsess = tf.Session(config=tf.ConfigProto(\n                      graph_options=tf.GraphOptions(build_cost_model=1),\n                      gpu_options=tf.GPUOptions(allow_growth=True)))\nsess.run(tf.global_variables_initializer())\nX_, Y_ = sess.run([X, Y])\n\nrun_metadata = tf.RunMetadata()\nrun_options = tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE)\n\nW_ = sess.run(W,\n              {_i: i_ for _i, i_ in zip(_X + _Y, X_ + Y_)},\n              options=run_options,\n              run_metadata=run_metadata)\n\ntf.profiler.profile(\n    tf.get_default_graph(),\n    run_meta=run_metadata,\n    options=(tf.profiler.ProfileOptionBuilder(\n        tf.profiler.ProfileOptionBuilder.time_and_memory()\n    ).build()))\n\ntl = timeline.Timeline(run_metadata.step_stats)\nwith open('/tmp/timeline.json', 'w') as f:\n    f.write(tl.generate_chrome_trace_format(show_dataflow=True,\n                                            show_memory=True))\n</code></pre>", "body_text": "I am generating timeline with TensorFlow r1.3.\nI can only see /job:localhost/replica:0/task:0/cpu:0 and /job:localhost/replica:0/task:0/gpu:0.\nBut I can't find /gpu:0/stream\nAny idea?\n\nMy code to regenerate the timeline.\nimport os\nimport tensorflow as tf\nfrom tensorflow.python.client import timeline\n\ndim = 6000\nn = 5\n\nwith tf.device('/gpu:0'):\n    X, Y, Z, _X, _Y = [], [], [], [], []\n    for i in range(n):\n        X.append(tf.random_uniform([dim, dim], 0, 10, name='X' + str(i)))\n        Y.append(tf.random_uniform([dim, dim], 0, 10, name='Y' + str(i)))\n        _X.append(tf.placeholder(dtype=tf.float32, shape=[dim, dim]))\n        _Y.append(tf.placeholder(dtype=tf.float32, shape=[dim, dim]))\n        Z.append(tf.matmul(_X[i], _Y[i]))\n    W = tf.ones([dim, dim])\n    for i in range(n):\n        W = tf.matmul(W, Z[i])\n\nsess = tf.Session(config=tf.ConfigProto(\n                      graph_options=tf.GraphOptions(build_cost_model=1),\n                      gpu_options=tf.GPUOptions(allow_growth=True)))\nsess.run(tf.global_variables_initializer())\nX_, Y_ = sess.run([X, Y])\n\nrun_metadata = tf.RunMetadata()\nrun_options = tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE)\n\nW_ = sess.run(W,\n              {_i: i_ for _i, i_ in zip(_X + _Y, X_ + Y_)},\n              options=run_options,\n              run_metadata=run_metadata)\n\ntf.profiler.profile(\n    tf.get_default_graph(),\n    run_meta=run_metadata,\n    options=(tf.profiler.ProfileOptionBuilder(\n        tf.profiler.ProfileOptionBuilder.time_and_memory()\n    ).build()))\n\ntl = timeline.Timeline(run_metadata.step_stats)\nwith open('/tmp/timeline.json', 'w') as f:\n    f.write(tl.generate_chrome_trace_format(show_dataflow=True,\n                                            show_memory=True))", "body": "I am generating timeline with TensorFlow r1.3.\r\nI can only see `/job:localhost/replica:0/task:0/cpu:0` and `/job:localhost/replica:0/task:0/gpu:0`.\r\nBut I can't find `/gpu:0/stream`\r\n\r\nAny idea?\r\n\r\n![image](https://user-images.githubusercontent.com/425637/29240963-bb7047dc-7f24-11e7-9cd3-2422c97487b0.png)\r\n\r\nMy code to regenerate the timeline.\r\n```\r\nimport os\r\nimport tensorflow as tf\r\nfrom tensorflow.python.client import timeline\r\n\r\ndim = 6000\r\nn = 5\r\n\r\nwith tf.device('/gpu:0'):\r\n    X, Y, Z, _X, _Y = [], [], [], [], []\r\n    for i in range(n):\r\n        X.append(tf.random_uniform([dim, dim], 0, 10, name='X' + str(i)))\r\n        Y.append(tf.random_uniform([dim, dim], 0, 10, name='Y' + str(i)))\r\n        _X.append(tf.placeholder(dtype=tf.float32, shape=[dim, dim]))\r\n        _Y.append(tf.placeholder(dtype=tf.float32, shape=[dim, dim]))\r\n        Z.append(tf.matmul(_X[i], _Y[i]))\r\n    W = tf.ones([dim, dim])\r\n    for i in range(n):\r\n        W = tf.matmul(W, Z[i])\r\n\r\nsess = tf.Session(config=tf.ConfigProto(\r\n                      graph_options=tf.GraphOptions(build_cost_model=1),\r\n                      gpu_options=tf.GPUOptions(allow_growth=True)))\r\nsess.run(tf.global_variables_initializer())\r\nX_, Y_ = sess.run([X, Y])\r\n\r\nrun_metadata = tf.RunMetadata()\r\nrun_options = tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE)\r\n\r\nW_ = sess.run(W,\r\n              {_i: i_ for _i, i_ in zip(_X + _Y, X_ + Y_)},\r\n              options=run_options,\r\n              run_metadata=run_metadata)\r\n\r\ntf.profiler.profile(\r\n    tf.get_default_graph(),\r\n    run_meta=run_metadata,\r\n    options=(tf.profiler.ProfileOptionBuilder(\r\n        tf.profiler.ProfileOptionBuilder.time_and_memory()\r\n    ).build()))\r\n\r\ntl = timeline.Timeline(run_metadata.step_stats)\r\nwith open('/tmp/timeline.json', 'w') as f:\r\n    f.write(tl.generate_chrome_trace_format(show_dataflow=True,\r\n                                            show_memory=True))\r\n```"}
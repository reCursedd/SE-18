{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6762", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6762/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6762/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6762/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6762", "id": 199781849, "node_id": "MDU6SXNzdWUxOTk3ODE4NDk=", "number": 6762, "title": "configure assumes ldconfig can be called and that CuDNN is installed in a system library location", "user": {"login": "jowagner", "id": 5215253, "node_id": "MDQ6VXNlcjUyMTUyNTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/5215253?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jowagner", "html_url": "https://github.com/jowagner", "followers_url": "https://api.github.com/users/jowagner/followers", "following_url": "https://api.github.com/users/jowagner/following{/other_user}", "gists_url": "https://api.github.com/users/jowagner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jowagner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jowagner/subscriptions", "organizations_url": "https://api.github.com/users/jowagner/orgs", "repos_url": "https://api.github.com/users/jowagner/repos", "events_url": "https://api.github.com/users/jowagner/events{/privacy}", "received_events_url": "https://api.github.com/users/jowagner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-01-10T10:18:04Z", "updated_at": "2017-02-15T01:07:36Z", "closed_at": "2017-02-15T01:07:36Z", "author_association": "NONE", "body_html": "<p>The configure script calls \"ldconfig\" to locate the CuDNN library but this makes 2 assumptions that can be wrong:</p>\n<ol>\n<li>It assumes that \"ldconfig\" can be called. However, on some GNU/Linux systems such as openSUSE Leap 42.1, only root has it in their path. (On Leap 42.1, normal users get the desired output from \"/sbin/ldconfig -p\".)</li>\n<li>It assumes that the CuDNN library is installed in a system library location that is searched by ldconfig. However, users may install it in their home directory and use LD_LIBRARY_PATH to load it for various reasons. I, for example, was not fully satisfied from reading the licence terms that I am allowed to share the library with other users of the system and therefore did not install it system-wide as root.</li>\n</ol>\n<p>Severity is low as normally the CuDNN library location should be auto-detected from the CuDNN library path before \"ldconfig\" is tried.</p>\n<p>How to reproduce:</p>\n<ol>\n<li>git clone this repo on a system with ldconfig not in your PATH</li>\n<li>cd tensorflow and run ./configure</li>\n<li>when asked for the CuDNN path, enter a valid and readable path (to avoid other errors), for example /usr/bin, that does not contain CuDNN</li>\n<li>Error message: ./configure: line 337: ldconfig: command not found</li>\n</ol>\n<p>Workaround options:</p>\n<ul>\n<li>First double check the CuDNN library path (the default path suggests that the last component \"lib64\" or \"lib\" should be omitted) and verify that standard folder names are used under this location for library and header files, for example \"lib64\" and \"include\".</li>\n<li>If you can call /sbin/ldconfig and if CuDNN is in a standard system library location the user can temporarily add /sbin to their PATH before running \"./configure\"</li>\n<li>Edit the \"configure\" script to provide the location manually, for example CUDNN_PATH_FROM_LDCONFIG=\"$HOME/local/cuda/lib64/libcudnn.so\"</li>\n</ul>\n<p>A fix should test whether \"ldconfig\" can be called before trying to call it. Also try /sbin/ldocnfig. Given that the library should normally be found already earlier in the code using the user-provided CuDNN path, a simple solution may be to set CUDNN_PATH_FROM_LDCONFIG to the empty string if ldconfig cannot be called.</p>\n<p>If you like to automate the locating of the library as much as possible, you could furthermore check all locations in LD_LIBRARY_PATH.</p>", "body_text": "The configure script calls \"ldconfig\" to locate the CuDNN library but this makes 2 assumptions that can be wrong:\n\nIt assumes that \"ldconfig\" can be called. However, on some GNU/Linux systems such as openSUSE Leap 42.1, only root has it in their path. (On Leap 42.1, normal users get the desired output from \"/sbin/ldconfig -p\".)\nIt assumes that the CuDNN library is installed in a system library location that is searched by ldconfig. However, users may install it in their home directory and use LD_LIBRARY_PATH to load it for various reasons. I, for example, was not fully satisfied from reading the licence terms that I am allowed to share the library with other users of the system and therefore did not install it system-wide as root.\n\nSeverity is low as normally the CuDNN library location should be auto-detected from the CuDNN library path before \"ldconfig\" is tried.\nHow to reproduce:\n\ngit clone this repo on a system with ldconfig not in your PATH\ncd tensorflow and run ./configure\nwhen asked for the CuDNN path, enter a valid and readable path (to avoid other errors), for example /usr/bin, that does not contain CuDNN\nError message: ./configure: line 337: ldconfig: command not found\n\nWorkaround options:\n\nFirst double check the CuDNN library path (the default path suggests that the last component \"lib64\" or \"lib\" should be omitted) and verify that standard folder names are used under this location for library and header files, for example \"lib64\" and \"include\".\nIf you can call /sbin/ldconfig and if CuDNN is in a standard system library location the user can temporarily add /sbin to their PATH before running \"./configure\"\nEdit the \"configure\" script to provide the location manually, for example CUDNN_PATH_FROM_LDCONFIG=\"$HOME/local/cuda/lib64/libcudnn.so\"\n\nA fix should test whether \"ldconfig\" can be called before trying to call it. Also try /sbin/ldocnfig. Given that the library should normally be found already earlier in the code using the user-provided CuDNN path, a simple solution may be to set CUDNN_PATH_FROM_LDCONFIG to the empty string if ldconfig cannot be called.\nIf you like to automate the locating of the library as much as possible, you could furthermore check all locations in LD_LIBRARY_PATH.", "body": "The configure script calls \"ldconfig\" to locate the CuDNN library but this makes 2 assumptions that can be wrong: \r\n1. It assumes that \"ldconfig\" can be called. However, on some GNU/Linux systems such as openSUSE Leap 42.1, only root has it in their path. (On Leap 42.1, normal users get the desired output from \"/sbin/ldconfig -p\".)\r\n2. It assumes that the CuDNN library is installed in a system library location that is searched by ldconfig. However, users may install it in their home directory and use LD_LIBRARY_PATH to load it for various reasons. I, for example, was not fully satisfied from reading the licence terms that I am allowed to share the library with other users of the system and therefore did not install it system-wide as root.\r\n\r\nSeverity is low as normally the CuDNN library location should be auto-detected from the CuDNN library path before \"ldconfig\" is tried.\r\n\r\nHow to reproduce:\r\n1. git clone this repo on a system with ldconfig not in your PATH\r\n2. cd tensorflow and run ./configure\r\n3. when asked for the CuDNN path, enter a valid and readable path (to avoid other errors), for example /usr/bin, that does not contain CuDNN\r\n4. Error message: ./configure: line 337: ldconfig: command not found\r\n\r\nWorkaround options:\r\n- First double check the CuDNN library path (the default path suggests that the last component \"lib64\" or \"lib\" should be omitted) and verify that standard folder names are used under this location for library and header files, for example \"lib64\" and \"include\".\r\n- If you can call /sbin/ldconfig and if CuDNN is in a standard system library location the user can temporarily add /sbin to their PATH before running \"./configure\"\r\n- Edit the \"configure\" script to provide the location manually, for example CUDNN_PATH_FROM_LDCONFIG=\"$HOME/local/cuda/lib64/libcudnn.so\"\r\n\r\nA fix should test whether \"ldconfig\" can be called before trying to call it. Also try /sbin/ldocnfig. Given that the library should normally be found already earlier in the code using the user-provided CuDNN path, a simple solution may be to set CUDNN_PATH_FROM_LDCONFIG to the empty string if ldconfig cannot be called.\r\n\r\nIf you like to automate the locating of the library as much as possible, you could furthermore check all locations in LD_LIBRARY_PATH."}
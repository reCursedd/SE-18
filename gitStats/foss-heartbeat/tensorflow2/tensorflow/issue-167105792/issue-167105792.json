{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3469", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3469/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3469/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3469/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3469", "id": 167105792, "node_id": "MDU6SXNzdWUxNjcxMDU3OTI=", "number": 3469, "title": "Raspberry Pi Bazel Build \"Define appropriate PLATFORM macro\" error", "user": {"login": "samjabrahams", "id": 11607205, "node_id": "MDQ6VXNlcjExNjA3MjA1", "avatar_url": "https://avatars0.githubusercontent.com/u/11607205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samjabrahams", "html_url": "https://github.com/samjabrahams", "followers_url": "https://api.github.com/users/samjabrahams/followers", "following_url": "https://api.github.com/users/samjabrahams/following{/other_user}", "gists_url": "https://api.github.com/users/samjabrahams/gists{/gist_id}", "starred_url": "https://api.github.com/users/samjabrahams/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samjabrahams/subscriptions", "organizations_url": "https://api.github.com/users/samjabrahams/orgs", "repos_url": "https://api.github.com/users/samjabrahams/repos", "events_url": "https://api.github.com/users/samjabrahams/events{/privacy}", "received_events_url": "https://api.github.com/users/samjabrahams/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2016-07-22T18:35:18Z", "updated_at": "2017-07-25T10:08:50Z", "closed_at": "2017-01-23T23:01:20Z", "author_association": "CONTRIBUTOR", "body_html": "<p>When building TensorFlow on Raspberry Pi with Bazel, the pre-compiler end up throwing this error:</p>\n<pre><code>Define the appropriate PLATFORM_&lt;foo&gt; macro for this platform\n</code></pre>\n<p>From what I've been able to gather, here's the cause of the issue:</p>\n<ol>\n<li>Because Raspberry Pi uses an ARM CPU, the <code>IS_MOBILE_PLATFORM</code> macro is defined <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/platform.h#L45\">in `tensorflow/core/platform/platform.h</a></li>\n<li>Later, when trying to compile <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/png.h#L23-L26\">png.h</a>, <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/gif.h\">gif.h</a>, or <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/jpeg.h\">jpeg.h</a>, the if/else statements fall through, leaving with the default option to throw an error.</li>\n</ol>\n<h3>Environment info</h3>\n<p>Operating System: Raspbian GNU/Linux, version 8.0</p>\n<p>Installed version of CUDA and cuDNN: N/A</p>\n<p>Installed from source.</p>\n<ol>\n<li>The commit hash : <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/e95f4e760c6b6713b6b686ebeff9a1586a5831dd/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/e95f4e760c6b6713b6b686ebeff9a1586a5831dd\"><tt>e95f4e7</tt></a></li>\n<li>The output of <code>bazel version</code> :</li>\n</ol>\n<pre><code>Build label: 0.2.1-2016-06-13 (@447f7f3)\nBuild target: bazel-out/local_linux-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Mon Jun 13 19:05:24 2016 (1465844724)\nBuild timestamp: 1465844724\nBuild timestamp as int: 1465844724\n</code></pre>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Build TensorFlow from source on Raspberry Pi <a href=\"https://github.com/samjabrahams/tensorflow-on-raspberry-pi/blob/master/GUIDE.md\">as described in this guide</a> <em>without</em> deleting <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/platform.h#L45\">this line from <code>tensorflow/core/platform/platform.h</code></a>, which defines <code>IS_MOBILE_PLATFORM</code> when compiling on ARM devices.</li>\n</ol>\n<h3>What have you tried?</h3>\n<ol>\n<li>Deleted the line mentioned above, which fixes the problem for local builds</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/378789/define_macro_error.txt\">define_macro_error.txt</a></p>", "body_text": "When building TensorFlow on Raspberry Pi with Bazel, the pre-compiler end up throwing this error:\nDefine the appropriate PLATFORM_<foo> macro for this platform\n\nFrom what I've been able to gather, here's the cause of the issue:\n\nBecause Raspberry Pi uses an ARM CPU, the IS_MOBILE_PLATFORM macro is defined in `tensorflow/core/platform/platform.h\nLater, when trying to compile png.h, gif.h, or jpeg.h, the if/else statements fall through, leaving with the default option to throw an error.\n\nEnvironment info\nOperating System: Raspbian GNU/Linux, version 8.0\nInstalled version of CUDA and cuDNN: N/A\nInstalled from source.\n\nThe commit hash : e95f4e7\nThe output of bazel version :\n\nBuild label: 0.2.1-2016-06-13 (@447f7f3)\nBuild target: bazel-out/local_linux-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Mon Jun 13 19:05:24 2016 (1465844724)\nBuild timestamp: 1465844724\nBuild timestamp as int: 1465844724\n\nSteps to reproduce\n\nBuild TensorFlow from source on Raspberry Pi as described in this guide without deleting this line from tensorflow/core/platform/platform.h, which defines IS_MOBILE_PLATFORM when compiling on ARM devices.\n\nWhat have you tried?\n\nDeleted the line mentioned above, which fixes the problem for local builds\n\nLogs or other output that would be helpful\ndefine_macro_error.txt", "body": "When building TensorFlow on Raspberry Pi with Bazel, the pre-compiler end up throwing this error:\n\n```\nDefine the appropriate PLATFORM_<foo> macro for this platform\n```\n\nFrom what I've been able to gather, here's the cause of the issue:\n1. Because Raspberry Pi uses an ARM CPU, the `IS_MOBILE_PLATFORM` macro is defined [in `tensorflow/core/platform/platform.h](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/platform.h#L45)\n2. Later, when trying to compile [png.h](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/png.h#L23-L26), [gif.h](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/gif.h), or [jpeg.h](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/jpeg.h), the if/else statements fall through, leaving with the default option to throw an error.\n### Environment info\n\nOperating System: Raspbian GNU/Linux, version 8.0\n\nInstalled version of CUDA and cuDNN: N/A\n\nInstalled from source.\n1. The commit hash : e95f4e760c6b6713b6b686ebeff9a1586a5831dd\n2. The output of `bazel version` : \n\n```\nBuild label: 0.2.1-2016-06-13 (@447f7f3)\nBuild target: bazel-out/local_linux-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Mon Jun 13 19:05:24 2016 (1465844724)\nBuild timestamp: 1465844724\nBuild timestamp as int: 1465844724\n```\n### Steps to reproduce\n1. Build TensorFlow from source on Raspberry Pi [as described in this guide](https://github.com/samjabrahams/tensorflow-on-raspberry-pi/blob/master/GUIDE.md) _without_ deleting [this line from `tensorflow/core/platform/platform.h`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/platform.h#L45), which defines `IS_MOBILE_PLATFORM` when compiling on ARM devices.\n### What have you tried?\n1. Deleted the line mentioned above, which fixes the problem for local builds\n### Logs or other output that would be helpful\n\n[define_macro_error.txt](https://github.com/tensorflow/tensorflow/files/378789/define_macro_error.txt)\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10389", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10389/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10389/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10389/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10389", "id": 233114838, "node_id": "MDU6SXNzdWUyMzMxMTQ4Mzg=", "number": 10389, "title": "slim.conv2d Error: Input has undefined `axis` dimension.", "user": {"login": "sleepfin", "id": 7370869, "node_id": "MDQ6VXNlcjczNzA4Njk=", "avatar_url": "https://avatars1.githubusercontent.com/u/7370869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleepfin", "html_url": "https://github.com/sleepfin", "followers_url": "https://api.github.com/users/sleepfin/followers", "following_url": "https://api.github.com/users/sleepfin/following{/other_user}", "gists_url": "https://api.github.com/users/sleepfin/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleepfin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleepfin/subscriptions", "organizations_url": "https://api.github.com/users/sleepfin/orgs", "repos_url": "https://api.github.com/users/sleepfin/repos", "events_url": "https://api.github.com/users/sleepfin/events{/privacy}", "received_events_url": "https://api.github.com/users/sleepfin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "sguada", "id": 1766524, "node_id": "MDQ6VXNlcjE3NjY1MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sguada", "html_url": "https://github.com/sguada", "followers_url": "https://api.github.com/users/sguada/followers", "following_url": "https://api.github.com/users/sguada/following{/other_user}", "gists_url": "https://api.github.com/users/sguada/gists{/gist_id}", "starred_url": "https://api.github.com/users/sguada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sguada/subscriptions", "organizations_url": "https://api.github.com/users/sguada/orgs", "repos_url": "https://api.github.com/users/sguada/repos", "events_url": "https://api.github.com/users/sguada/events{/privacy}", "received_events_url": "https://api.github.com/users/sguada/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sguada", "id": 1766524, "node_id": "MDQ6VXNlcjE3NjY1MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sguada", "html_url": "https://github.com/sguada", "followers_url": "https://api.github.com/users/sguada/followers", "following_url": "https://api.github.com/users/sguada/following{/other_user}", "gists_url": "https://api.github.com/users/sguada/gists{/gist_id}", "starred_url": "https://api.github.com/users/sguada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sguada/subscriptions", "organizations_url": "https://api.github.com/users/sguada/orgs", "repos_url": "https://api.github.com/users/sguada/repos", "events_url": "https://api.github.com/users/sguada/events{/privacy}", "received_events_url": "https://api.github.com/users/sguada/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2017-06-02T08:41:20Z", "updated_at": "2018-02-18T20:29:38Z", "closed_at": "2018-02-18T20:29:38Z", "author_association": "NONE", "body_html": "<p>Here is my code:</p>\n<pre><code>import tensorflow as tf\nslim = tf.contrib.slim\ndata_format='NCHW'\n\ninput = tf.placeholder(dtype=tf.float32, shape=[2, 4, None, None])\nwith slim.arg_scope([slim.batch_norm], data_format=data_format):\n    net = slim.conv2d(input, 4, kernel_size=3, stride=1, padding='SAME', rate=2,\n                      data_format=data_format, normalizer_fn=slim.batch_norm)\n</code></pre>\n<p>Here is the logs:</p>\n<pre><code>Traceback (most recent call last):\n  File \"/home/zzy/workspace/tf-models/mind_slim/examples/test.py\", line 9, in &lt;module&gt;\n    net = slim.conv2d(input, 4, kernel_size=3, stride=1, padding='SAME', rate=2, data_format=data_format, normalizer_fn=slim.batch_norm)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 181, in func_with_args\n    return func(*args, **current_args)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 927, in convolution\n    outputs = normalizer_fn(outputs, **normalizer_params)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 181, in func_with_args\n    return func(*args, **current_args)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 528, in batch_norm\n    outputs = layer.apply(inputs, training=is_training)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 320, in apply\n    return self.__call__(inputs, **kwargs)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 286, in __call__\n    self.build(input_shapes[0])\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/python/layers/normalization.py\", line 118, in build\n    input_shape)\nValueError: ('Input has undefined `axis` dimension. Input shape: ', TensorShape([Dimension(2), Dimension(None), Dimension(None), Dimension(None)]))\n</code></pre>\n<p>When I change the rate to 1<br>\nOr I change the data_format to 'NHWC' and input to [2, None, None, 4]<br>\nIt works without any error.<br>\nMy tensorflow version: 1.1</p>", "body_text": "Here is my code:\nimport tensorflow as tf\nslim = tf.contrib.slim\ndata_format='NCHW'\n\ninput = tf.placeholder(dtype=tf.float32, shape=[2, 4, None, None])\nwith slim.arg_scope([slim.batch_norm], data_format=data_format):\n    net = slim.conv2d(input, 4, kernel_size=3, stride=1, padding='SAME', rate=2,\n                      data_format=data_format, normalizer_fn=slim.batch_norm)\n\nHere is the logs:\nTraceback (most recent call last):\n  File \"/home/zzy/workspace/tf-models/mind_slim/examples/test.py\", line 9, in <module>\n    net = slim.conv2d(input, 4, kernel_size=3, stride=1, padding='SAME', rate=2, data_format=data_format, normalizer_fn=slim.batch_norm)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 181, in func_with_args\n    return func(*args, **current_args)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 927, in convolution\n    outputs = normalizer_fn(outputs, **normalizer_params)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 181, in func_with_args\n    return func(*args, **current_args)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 528, in batch_norm\n    outputs = layer.apply(inputs, training=is_training)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 320, in apply\n    return self.__call__(inputs, **kwargs)\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 286, in __call__\n    self.build(input_shapes[0])\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/python/layers/normalization.py\", line 118, in build\n    input_shape)\nValueError: ('Input has undefined `axis` dimension. Input shape: ', TensorShape([Dimension(2), Dimension(None), Dimension(None), Dimension(None)]))\n\nWhen I change the rate to 1\nOr I change the data_format to 'NHWC' and input to [2, None, None, 4]\nIt works without any error.\nMy tensorflow version: 1.1", "body": "Here is my code:\r\n```\r\nimport tensorflow as tf\r\nslim = tf.contrib.slim\r\ndata_format='NCHW'\r\n\r\ninput = tf.placeholder(dtype=tf.float32, shape=[2, 4, None, None])\r\nwith slim.arg_scope([slim.batch_norm], data_format=data_format):\r\n    net = slim.conv2d(input, 4, kernel_size=3, stride=1, padding='SAME', rate=2,\r\n                      data_format=data_format, normalizer_fn=slim.batch_norm)\r\n```\r\n\r\nHere is the logs:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/zzy/workspace/tf-models/mind_slim/examples/test.py\", line 9, in <module>\r\n    net = slim.conv2d(input, 4, kernel_size=3, stride=1, padding='SAME', rate=2, data_format=data_format, normalizer_fn=slim.batch_norm)\r\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 181, in func_with_args\r\n    return func(*args, **current_args)\r\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 927, in convolution\r\n    outputs = normalizer_fn(outputs, **normalizer_params)\r\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 181, in func_with_args\r\n    return func(*args, **current_args)\r\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 528, in batch_norm\r\n    outputs = layer.apply(inputs, training=is_training)\r\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 320, in apply\r\n    return self.__call__(inputs, **kwargs)\r\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 286, in __call__\r\n    self.build(input_shapes[0])\r\n  File \"/home/zzy/anaconda2/envs/tf-gpu-py27-source/lib/python2.7/site-packages/tensorflow/python/layers/normalization.py\", line 118, in build\r\n    input_shape)\r\nValueError: ('Input has undefined `axis` dimension. Input shape: ', TensorShape([Dimension(2), Dimension(None), Dimension(None), Dimension(None)]))\r\n```\r\n\r\nWhen I change the rate to 1\r\nOr I change the data_format to 'NHWC' and input to [2, None, None, 4]\r\nIt works without any error.\r\nMy tensorflow version: 1.1"}
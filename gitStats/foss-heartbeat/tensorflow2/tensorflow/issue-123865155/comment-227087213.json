{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/227087213", "html_url": "https://github.com/tensorflow/tensorflow/issues/616#issuecomment-227087213", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/616", "id": 227087213, "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzA4NzIxMw==", "user": {"login": "qemb01", "id": 8786921, "node_id": "MDQ6VXNlcjg3ODY5MjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/8786921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qemb01", "html_url": "https://github.com/qemb01", "followers_url": "https://api.github.com/users/qemb01/followers", "following_url": "https://api.github.com/users/qemb01/following{/other_user}", "gists_url": "https://api.github.com/users/qemb01/gists{/gist_id}", "starred_url": "https://api.github.com/users/qemb01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qemb01/subscriptions", "organizations_url": "https://api.github.com/users/qemb01/orgs", "repos_url": "https://api.github.com/users/qemb01/repos", "events_url": "https://api.github.com/users/qemb01/events{/privacy}", "received_events_url": "https://api.github.com/users/qemb01/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-20T09:01:47Z", "updated_at": "2016-06-20T09:01:47Z", "author_association": "NONE", "body_html": "<p>I have the same problem as <a href=\"http://stackoverflow.com/questions/34343259/is-there-an-example-on-how-to-generate-protobuf-files-holding-trained-tensorflow/34343517#34343517\" rel=\"nofollow\">http://stackoverflow.com/questions/34343259/is-there-an-example-on-how-to-generate-protobuf-files-holding-trained-tensorflow/34343517#34343517</a></p>\n<p>I followed some of the instructions of <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> and <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1000100\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/po0ya\">@po0ya</a> 's code, and get the .pb file.<br>\nThen I replace the tensorflow_inception_graph.pb, whice is from <a href=\"https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip\" rel=\"nofollow\">https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip</a> and used in tensorflow_android_camera, with the new .pb file from the cifar10 model of tensorflow.</p>\n<p>I run the tensorflow_android_camera app but there is no output. The error in log is:<br>\nError during inference: Not found: FeedInputs: unable to find feed output input:0</p>\n<p>Here is my code:<br>\ndef save_graph():<br>\ng = tf.Graph()<br>\nvars = {}<br>\nwith g.as_default():<br>\nwith tf.Session() as sess:<br>\nd = np.ones([1,24,24,3],dtype=np.float32)<br>\nimages, labels = cifar10.distorted_inputs()<br>\nlogits = cifar10.inference(images)<br>\ninit = tf.initialize_all_variables()<br>\nsess.run(init)<br>\nsaver = tf.train.Saver(tf.trainable_variables(),max_to_keep=0)<br>\nsaver.restore(sess,os.path.join(FLAGS.train_dir, 'model.ckpt'))<br>\nprint (sess.run(logits,{images:d}))<br>\nfor v in tf.trainable_variables():<br>\nvars[v.value().name] = sess.run(v)</p>\n<p>g2 = tf.Graph()<br>\nconsts = {}<br>\nwith g2.as_default():<br>\nwith tf.Session() as sess:<br>\nfor k in vars.keys():<br>\nconsts[k] = tf.constant(vars[k])<br>\ntf.import_graph_def(g.as_graph_def(),input_map={name:consts[name] for name in consts.keys()})<br>\ntf.train.write_graph(sess.graph_def,'/home/eli/Documents/TensorflowProjetos/ProtobufFiles','graph.pb',False)</p>\n<p>return os.path.join('/home/eli/Documents/TensorflowProjetos/ProtobufFiles','graph.pb')</p>\n<p>Please help me ,thank you!</p>", "body_text": "I have the same problem as http://stackoverflow.com/questions/34343259/is-there-an-example-on-how-to-generate-protobuf-files-holding-trained-tensorflow/34343517#34343517\nI followed some of the instructions of @mrry and @po0ya 's code, and get the .pb file.\nThen I replace the tensorflow_inception_graph.pb, whice is from https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip and used in tensorflow_android_camera, with the new .pb file from the cifar10 model of tensorflow.\nI run the tensorflow_android_camera app but there is no output. The error in log is:\nError during inference: Not found: FeedInputs: unable to find feed output input:0\nHere is my code:\ndef save_graph():\ng = tf.Graph()\nvars = {}\nwith g.as_default():\nwith tf.Session() as sess:\nd = np.ones([1,24,24,3],dtype=np.float32)\nimages, labels = cifar10.distorted_inputs()\nlogits = cifar10.inference(images)\ninit = tf.initialize_all_variables()\nsess.run(init)\nsaver = tf.train.Saver(tf.trainable_variables(),max_to_keep=0)\nsaver.restore(sess,os.path.join(FLAGS.train_dir, 'model.ckpt'))\nprint (sess.run(logits,{images:d}))\nfor v in tf.trainable_variables():\nvars[v.value().name] = sess.run(v)\ng2 = tf.Graph()\nconsts = {}\nwith g2.as_default():\nwith tf.Session() as sess:\nfor k in vars.keys():\nconsts[k] = tf.constant(vars[k])\ntf.import_graph_def(g.as_graph_def(),input_map={name:consts[name] for name in consts.keys()})\ntf.train.write_graph(sess.graph_def,'/home/eli/Documents/TensorflowProjetos/ProtobufFiles','graph.pb',False)\nreturn os.path.join('/home/eli/Documents/TensorflowProjetos/ProtobufFiles','graph.pb')\nPlease help me ,thank you!", "body": "I have the same problem as http://stackoverflow.com/questions/34343259/is-there-an-example-on-how-to-generate-protobuf-files-holding-trained-tensorflow/34343517#34343517 \n\nI followed some of the instructions of @mrry and @po0ya 's code, and get the .pb file. \nThen I replace the tensorflow_inception_graph.pb, whice is from https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip and used in tensorflow_android_camera, with the new .pb file from the cifar10 model of tensorflow. \n\nI run the tensorflow_android_camera app but there is no output. The error in log is: \n Error during inference: Not found: FeedInputs: unable to find feed output input:0\n\nHere is my code:\ndef save_graph():\ng = tf.Graph()\nvars = {}\nwith g.as_default():\n    with tf.Session() as sess:\n        d = np.ones([1,24,24,3],dtype=np.float32)\n        images, labels = cifar10.distorted_inputs()\n        logits = cifar10.inference(images)\n        init = tf.initialize_all_variables()\n        sess.run(init)\n        saver = tf.train.Saver(tf.trainable_variables(),max_to_keep=0)\n        saver.restore(sess,os.path.join(FLAGS.train_dir, 'model.ckpt'))\n        print (sess.run(logits,{images:d}))\n        for v in tf.trainable_variables():\n            vars[v.value().name] = sess.run(v)\n\ng2 = tf.Graph()\nconsts = {}\nwith g2.as_default():\n    with tf.Session() as sess:\n        for k in vars.keys():\n            consts[k] = tf.constant(vars[k])\n        tf.import_graph_def(g.as_graph_def(),input_map={name:consts[name] for name in consts.keys()})\n        tf.train.write_graph(sess.graph_def,'/home/eli/Documents/TensorflowProjetos/ProtobufFiles','graph.pb',False)\n\nreturn os.path.join('/home/eli/Documents/TensorflowProjetos/ProtobufFiles','graph.pb')\n\nPlease help me ,thank you!\n"}
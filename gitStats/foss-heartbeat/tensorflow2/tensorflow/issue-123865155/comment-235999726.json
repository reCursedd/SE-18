{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/235999726", "html_url": "https://github.com/tensorflow/tensorflow/issues/616#issuecomment-235999726", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/616", "id": 235999726, "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTk5OTcyNg==", "user": {"login": "axeltidemann", "id": 6352118, "node_id": "MDQ6VXNlcjYzNTIxMTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/6352118?v=4", "gravatar_id": "", "url": "https://api.github.com/users/axeltidemann", "html_url": "https://github.com/axeltidemann", "followers_url": "https://api.github.com/users/axeltidemann/followers", "following_url": "https://api.github.com/users/axeltidemann/following{/other_user}", "gists_url": "https://api.github.com/users/axeltidemann/gists{/gist_id}", "starred_url": "https://api.github.com/users/axeltidemann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/axeltidemann/subscriptions", "organizations_url": "https://api.github.com/users/axeltidemann/orgs", "repos_url": "https://api.github.com/users/axeltidemann/repos", "events_url": "https://api.github.com/users/axeltidemann/events{/privacy}", "received_events_url": "https://api.github.com/users/axeltidemann/received_events", "type": "User", "site_admin": false}, "created_at": "2016-07-28T19:28:37Z", "updated_at": "2016-07-28T19:28:37Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=705652\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/lilac\">@lilac</a> I see a similar error when saving a graph that has a batch normalization layer. Tried this with both <code>0.9</code> and  <code>0.10.0rc0</code>. When loading the saved graph, I get an error:</p>\n<pre><code>ValueError: graph_def is invalid at node u'BatchNorm/cond/AssignMovingAvg/Switch': Input tensor 'BatchNorm/moving_mean:0' Cannot convert a tensor of type float32 to an input of type float32_ref.\n</code></pre>\n<p>Without the batch normalization layer (i.e. <code>tensorflow.contrib.layers.python.layers.batch_norm</code>) this error is not thrown. Seems related to your problem, as this also contains a moving average.</p>", "body_text": "@lilac I see a similar error when saving a graph that has a batch normalization layer. Tried this with both 0.9 and  0.10.0rc0. When loading the saved graph, I get an error:\nValueError: graph_def is invalid at node u'BatchNorm/cond/AssignMovingAvg/Switch': Input tensor 'BatchNorm/moving_mean:0' Cannot convert a tensor of type float32 to an input of type float32_ref.\n\nWithout the batch normalization layer (i.e. tensorflow.contrib.layers.python.layers.batch_norm) this error is not thrown. Seems related to your problem, as this also contains a moving average.", "body": "@lilac I see a similar error when saving a graph that has a batch normalization layer. Tried this with both `0.9` and  `0.10.0rc0`. When loading the saved graph, I get an error: \n\n```\nValueError: graph_def is invalid at node u'BatchNorm/cond/AssignMovingAvg/Switch': Input tensor 'BatchNorm/moving_mean:0' Cannot convert a tensor of type float32 to an input of type float32_ref.\n```\n\nWithout the batch normalization layer (i.e. `tensorflow.contrib.layers.python.layers.batch_norm`) this error is not thrown. Seems related to your problem, as this also contains a moving average.\n"}
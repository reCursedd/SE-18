{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18361", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18361/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18361/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18361/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18361", "id": 312698383, "node_id": "MDU6SXNzdWUzMTI2OTgzODM=", "number": 18361, "title": "Android: Not a valid TensorFlow Graph serialization: Invalid GraphDef", "user": {"login": "dkhmelenko", "id": 4306809, "node_id": "MDQ6VXNlcjQzMDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/4306809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkhmelenko", "html_url": "https://github.com/dkhmelenko", "followers_url": "https://api.github.com/users/dkhmelenko/followers", "following_url": "https://api.github.com/users/dkhmelenko/following{/other_user}", "gists_url": "https://api.github.com/users/dkhmelenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkhmelenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkhmelenko/subscriptions", "organizations_url": "https://api.github.com/users/dkhmelenko/orgs", "repos_url": "https://api.github.com/users/dkhmelenko/repos", "events_url": "https://api.github.com/users/dkhmelenko/events{/privacy}", "received_events_url": "https://api.github.com/users/dkhmelenko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-04-09T21:43:26Z", "updated_at": "2018-04-14T20:37:22Z", "closed_at": "2018-04-13T17:12:27Z", "author_association": "NONE", "body_html": "<p>I have an issue with loading custom model into Android app.<br>\nI'm using <code>LinearClassifier</code> and the function <code>export_savedmodel()</code> for saving the model.<br>\nIt looks like this</p>\n<pre><code>model_path = model.export_savedmodel(export_dir_base=\"model\", serving_input_receiver_fn=serving_input_fn)\n</code></pre>\n<p>Then from the path, I'm getting the file <code>saved_model.pb</code> and put it into the <code>assets</code> folder of the Android app. Then I try to load the model</p>\n<pre><code>val inferenceInterface = TensorFlowInferenceInterface(assets, \"saved_model.pb\")\n</code></pre>\n<p>However, at runtime IOException is thrown:</p>\n<pre><code>Failed to load model from 'saved_model.pb'\n...\nAndroid: Not a valid TensorFlow Graph serialization: Invalid GraphDef\n</code></pre>\n<p>Does anybody know what can be the issue? Seems like either the model is exported wrong or the issue with the implementation of <code>TensorFlowInferenceInterface</code>. Did somebody have experience loading models in Android app?</p>\n<p>Model export is located <a href=\"https://github.com/dkhmelenko/fitness-ml/blob/master/simple/Fitness%20Classification.ipynb\">here</a></p>", "body_text": "I have an issue with loading custom model into Android app.\nI'm using LinearClassifier and the function export_savedmodel() for saving the model.\nIt looks like this\nmodel_path = model.export_savedmodel(export_dir_base=\"model\", serving_input_receiver_fn=serving_input_fn)\n\nThen from the path, I'm getting the file saved_model.pb and put it into the assets folder of the Android app. Then I try to load the model\nval inferenceInterface = TensorFlowInferenceInterface(assets, \"saved_model.pb\")\n\nHowever, at runtime IOException is thrown:\nFailed to load model from 'saved_model.pb'\n...\nAndroid: Not a valid TensorFlow Graph serialization: Invalid GraphDef\n\nDoes anybody know what can be the issue? Seems like either the model is exported wrong or the issue with the implementation of TensorFlowInferenceInterface. Did somebody have experience loading models in Android app?\nModel export is located here", "body": "I have an issue with loading custom model into Android app. \r\nI'm using `LinearClassifier` and the function `export_savedmodel()` for saving the model.\r\nIt looks like this\r\n```\r\nmodel_path = model.export_savedmodel(export_dir_base=\"model\", serving_input_receiver_fn=serving_input_fn)\r\n```\r\n\r\nThen from the path, I'm getting the file `saved_model.pb` and put it into the `assets` folder of the Android app. Then I try to load the model\r\n```\r\nval inferenceInterface = TensorFlowInferenceInterface(assets, \"saved_model.pb\")\r\n```\r\nHowever, at runtime IOException is thrown:\r\n```\r\nFailed to load model from 'saved_model.pb'\r\n...\r\nAndroid: Not a valid TensorFlow Graph serialization: Invalid GraphDef\r\n```\r\n\r\nDoes anybody know what can be the issue? Seems like either the model is exported wrong or the issue with the implementation of `TensorFlowInferenceInterface`. Did somebody have experience loading models in Android app?\r\n\r\nModel export is located [here](https://github.com/dkhmelenko/fitness-ml/blob/master/simple/Fitness%20Classification.ipynb)"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/365820311", "html_url": "https://github.com/tensorflow/tensorflow/pull/16885#issuecomment-365820311", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16885", "id": 365820311, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTgyMDMxMQ==", "user": {"login": "rayanelleuch", "id": 10159876, "node_id": "MDQ6VXNlcjEwMTU5ODc2", "avatar_url": "https://avatars2.githubusercontent.com/u/10159876?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rayanelleuch", "html_url": "https://github.com/rayanelleuch", "followers_url": "https://api.github.com/users/rayanelleuch/followers", "following_url": "https://api.github.com/users/rayanelleuch/following{/other_user}", "gists_url": "https://api.github.com/users/rayanelleuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/rayanelleuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rayanelleuch/subscriptions", "organizations_url": "https://api.github.com/users/rayanelleuch/orgs", "repos_url": "https://api.github.com/users/rayanelleuch/repos", "events_url": "https://api.github.com/users/rayanelleuch/events{/privacy}", "received_events_url": "https://api.github.com/users/rayanelleuch/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-15T04:08:55Z", "updated_at": "2018-02-15T04:16:16Z", "author_association": "NONE", "body_html": "<p>It is true that it does not have states. So is there an other place where it would fit better than in layers?<br>\nBut I want to point the fact that max_pooling, average_pooling  do not have states and are present in layers.</p>\n<p>No it is not as repeat.<br>\nunpool serve to resize features map after it have been pooled by tf.nn.max_pool_with_argmax.<br>\nThe max indices are then used to map the resizing. The other pixels are left at 0. Only the place where the max appeared during the max_pooling will be filled.</p>\n<p>Example taken from the paper \"Learning Deconvolution Network for Semantic Segmentation\"<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/10159876/36239559-fdd4b1e6-124d-11e8-8f55-adf9463491bc.png\"><img src=\"https://user-images.githubusercontent.com/10159876/36239559-fdd4b1e6-124d-11e8-8f55-adf9463491bc.png\" alt=\"screenshot from 2018-02-15 12-43-37\" style=\"max-width:100%;\"></a></p>\n<p>An other more numerical example:</p>\n<pre><code>image = tf.placeholder(tf.float32, [None, 4, 4, 1])\npooled, ind = tf.nn.max_pool_with_argmax(image,[1,2,2,1],[1,2,2,1],\"SAME\")\nunpooled = unpool(pooled, ind, ksize=[1, 2, 2, 1])\n</code></pre>\n<p>image -&gt;</p>\n<pre><code>[[4.17022005e-01 7.20324493e-01 1.14374817e-04 3.02332573e-01]\n [1.46755891e-01 9.23385948e-02 1.86260211e-01 3.45560727e-01]\n [3.96767474e-01 5.38816734e-01 4.19194514e-01 6.85219500e-01]\n [2.04452250e-01 8.78117436e-01 2.73875932e-02 6.70467510e-01]]\n</code></pre>\n<p>pooled-&gt;</p>\n<pre><code>[[0.7203245  0.34556073]\n [0.87811744 0.6852195 ]]\n</code></pre>\n<p>unpooled-&gt;</p>\n<pre><code>[[0.         0.7203245  0.         0.        ]\n [0.         0.         0.         0.34556073]\n [0.         0.         0.         0.6852195 ]\n [0.         0.87811744 0.         0.        ]]\n</code></pre>", "body_text": "It is true that it does not have states. So is there an other place where it would fit better than in layers?\nBut I want to point the fact that max_pooling, average_pooling  do not have states and are present in layers.\nNo it is not as repeat.\nunpool serve to resize features map after it have been pooled by tf.nn.max_pool_with_argmax.\nThe max indices are then used to map the resizing. The other pixels are left at 0. Only the place where the max appeared during the max_pooling will be filled.\nExample taken from the paper \"Learning Deconvolution Network for Semantic Segmentation\"\n\nAn other more numerical example:\nimage = tf.placeholder(tf.float32, [None, 4, 4, 1])\npooled, ind = tf.nn.max_pool_with_argmax(image,[1,2,2,1],[1,2,2,1],\"SAME\")\nunpooled = unpool(pooled, ind, ksize=[1, 2, 2, 1])\n\nimage ->\n[[4.17022005e-01 7.20324493e-01 1.14374817e-04 3.02332573e-01]\n [1.46755891e-01 9.23385948e-02 1.86260211e-01 3.45560727e-01]\n [3.96767474e-01 5.38816734e-01 4.19194514e-01 6.85219500e-01]\n [2.04452250e-01 8.78117436e-01 2.73875932e-02 6.70467510e-01]]\n\npooled->\n[[0.7203245  0.34556073]\n [0.87811744 0.6852195 ]]\n\nunpooled->\n[[0.         0.7203245  0.         0.        ]\n [0.         0.         0.         0.34556073]\n [0.         0.         0.         0.6852195 ]\n [0.         0.87811744 0.         0.        ]]", "body": "It is true that it does not have states. So is there an other place where it would fit better than in layers?\r\nBut I want to point the fact that max_pooling, average_pooling  do not have states and are present in layers.\r\n\r\nNo it is not as repeat.\r\nunpool serve to resize features map after it have been pooled by tf.nn.max_pool_with_argmax.\r\nThe max indices are then used to map the resizing. The other pixels are left at 0. Only the place where the max appeared during the max_pooling will be filled.\r\n\r\nExample taken from the paper \"Learning Deconvolution Network for Semantic Segmentation\"\r\n![screenshot from 2018-02-15 12-43-37](https://user-images.githubusercontent.com/10159876/36239559-fdd4b1e6-124d-11e8-8f55-adf9463491bc.png)\r\n\r\nAn other more numerical example:\r\n\r\n```\r\nimage = tf.placeholder(tf.float32, [None, 4, 4, 1])\r\npooled, ind = tf.nn.max_pool_with_argmax(image,[1,2,2,1],[1,2,2,1],\"SAME\")\r\nunpooled = unpool(pooled, ind, ksize=[1, 2, 2, 1])\r\n```\r\n\r\nimage ->\r\n```\r\n[[4.17022005e-01 7.20324493e-01 1.14374817e-04 3.02332573e-01]\r\n [1.46755891e-01 9.23385948e-02 1.86260211e-01 3.45560727e-01]\r\n [3.96767474e-01 5.38816734e-01 4.19194514e-01 6.85219500e-01]\r\n [2.04452250e-01 8.78117436e-01 2.73875932e-02 6.70467510e-01]]\r\n```\r\n\r\npooled->\r\n```\r\n[[0.7203245  0.34556073]\r\n [0.87811744 0.6852195 ]]\r\n```\r\n\r\nunpooled->\r\n```\r\n[[0.         0.7203245  0.         0.        ]\r\n [0.         0.         0.         0.34556073]\r\n [0.         0.         0.         0.6852195 ]\r\n [0.         0.87811744 0.         0.        ]]\r\n```"}
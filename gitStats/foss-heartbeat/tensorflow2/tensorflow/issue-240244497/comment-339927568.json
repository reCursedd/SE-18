{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/339927568", "html_url": "https://github.com/tensorflow/tensorflow/issues/11250#issuecomment-339927568", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11250", "id": 339927568, "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTkyNzU2OA==", "user": {"login": "webschik", "id": 1665314, "node_id": "MDQ6VXNlcjE2NjUzMTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1665314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webschik", "html_url": "https://github.com/webschik", "followers_url": "https://api.github.com/users/webschik/followers", "following_url": "https://api.github.com/users/webschik/following{/other_user}", "gists_url": "https://api.github.com/users/webschik/gists{/gist_id}", "starred_url": "https://api.github.com/users/webschik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webschik/subscriptions", "organizations_url": "https://api.github.com/users/webschik/orgs", "repos_url": "https://api.github.com/users/webschik/repos", "events_url": "https://api.github.com/users/webschik/events{/privacy}", "received_events_url": "https://api.github.com/users/webschik/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-27T09:52:57Z", "updated_at": "2017-10-27T09:52:57Z", "author_association": "NONE", "body_html": "<p>Hello <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=161459\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/petewarden\">@petewarden</a>!<br>\nMay you suggest how to fix the next issue:</p>\n<ol>\n<li>I've retrained my own model according to the <a href=\"https://www.tensorflow.org/tutorials/image_retraining\" rel=\"nofollow\">Tensorflow guideline</a>:</li>\n</ol>\n<div class=\"highlight highlight-source-shell\"><pre>python tensorflow/examples/image_retraining/retrain.py --image-dir ../flower_photos --architecture mobilenet_1.0_224</pre></div>\n<p>where <em>flower_photos</em> is an unarchived flowers set from <a href=\"http://download.tensorflow.org/example_images/flower_photos.tgz\" rel=\"nofollow\">http://download.tensorflow.org/example_images/flower_photos.tgz</a></p>\n<p>This script produces 2 files <em>/tmp/output_graph.pb</em> and <em>/tmp/output_labels.txt</em></p>\n<ol start=\"2\">\n<li>Then I tried to recognize some random image:</li>\n</ol>\n<div class=\"highlight highlight-source-shell\"><pre>python tensorflow/examples/image_retraining/label_image.py --graph=/tmp/output_graph.pb --labels=/tmp/output_labels.txt --image=../flower_photos/daisy/54377391_15648e8d18.jpg</pre></div>\n<p>But I got  the error:</p>\n<div class=\"highlight highlight-source-shell\"><pre>Traceback (most recent call last):\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tensorflow/examples/image_retraining/label_image.py<span class=\"pl-pds\">\"</span></span>, line 147, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n    tf.app.run(main=main, argv=sys.argv[:1]+unparsed)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/Library/Python/2.7/site-packages/tensorflow/python/platform/app.py<span class=\"pl-pds\">\"</span></span>, line 48, <span class=\"pl-k\">in</span> run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tensorflow/examples/image_retraining/label_image.py<span class=\"pl-pds\">\"</span></span>, line 142, <span class=\"pl-k\">in</span> main\n    FLAGS.num_top_predictions)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tensorflow/examples/image_retraining/label_image.py<span class=\"pl-pds\">\"</span></span>, line 106, <span class=\"pl-k\">in</span> run_graph\n    predictions, = sess.run(softmax_tensor, {input_layer_name: image_data})\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/Library/Python/2.7/site-packages/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line 895, <span class=\"pl-k\">in</span> run\n    run_metadata_ptr)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/Library/Python/2.7/site-packages/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line 1071, <span class=\"pl-k\">in</span> _run\n    + e.args[0])\nTypeError: Cannot interpret feed_dict key as Tensor: The name <span class=\"pl-s\"><span class=\"pl-pds\">'</span>DecodeJpeg/contents:0<span class=\"pl-pds\">'</span></span> refers to a Tensor which does not exist. The operation, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>DecodeJpeg/contents<span class=\"pl-pds\">'</span></span>, does not exist <span class=\"pl-k\">in</span> the graph.</pre></div>\n<p>With default architecture (without <em>--architecture</em> flag on the step 1) everything works correctly. I've tried to find a solution on SO and in the Tensorflow documentation, but I still have no success.</p>", "body_text": "Hello @petewarden!\nMay you suggest how to fix the next issue:\n\nI've retrained my own model according to the Tensorflow guideline:\n\npython tensorflow/examples/image_retraining/retrain.py --image-dir ../flower_photos --architecture mobilenet_1.0_224\nwhere flower_photos is an unarchived flowers set from http://download.tensorflow.org/example_images/flower_photos.tgz\nThis script produces 2 files /tmp/output_graph.pb and /tmp/output_labels.txt\n\nThen I tried to recognize some random image:\n\npython tensorflow/examples/image_retraining/label_image.py --graph=/tmp/output_graph.pb --labels=/tmp/output_labels.txt --image=../flower_photos/daisy/54377391_15648e8d18.jpg\nBut I got  the error:\nTraceback (most recent call last):\n  File \"tensorflow/examples/image_retraining/label_image.py\", line 147, in <module>\n    tf.app.run(main=main, argv=sys.argv[:1]+unparsed)\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"tensorflow/examples/image_retraining/label_image.py\", line 142, in main\n    FLAGS.num_top_predictions)\n  File \"tensorflow/examples/image_retraining/label_image.py\", line 106, in run_graph\n    predictions, = sess.run(softmax_tensor, {input_layer_name: image_data})\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 895, in run\n    run_metadata_ptr)\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 1071, in _run\n    + e.args[0])\nTypeError: Cannot interpret feed_dict key as Tensor: The name 'DecodeJpeg/contents:0' refers to a Tensor which does not exist. The operation, 'DecodeJpeg/contents', does not exist in the graph.\nWith default architecture (without --architecture flag on the step 1) everything works correctly. I've tried to find a solution on SO and in the Tensorflow documentation, but I still have no success.", "body": "Hello @petewarden! \r\nMay you suggest how to fix the next issue:\r\n\r\n1) I've retrained my own model according to the [Tensorflow guideline](https://www.tensorflow.org/tutorials/image_retraining):\r\n\r\n```shell\r\npython tensorflow/examples/image_retraining/retrain.py --image-dir ../flower_photos --architecture mobilenet_1.0_224\r\n```\r\n\r\nwhere _flower_photos_ is an unarchived flowers set from http://download.tensorflow.org/example_images/flower_photos.tgz\r\n\r\nThis script produces 2 files _/tmp/output_graph.pb_ and _/tmp/output_labels.txt_\r\n\r\n2) Then I tried to recognize some random image:\r\n\r\n```shell\r\npython tensorflow/examples/image_retraining/label_image.py --graph=/tmp/output_graph.pb --labels=/tmp/output_labels.txt --image=../flower_photos/daisy/54377391_15648e8d18.jpg\r\n```\r\n\r\nBut I got  the error: \r\n\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"tensorflow/examples/image_retraining/label_image.py\", line 147, in <module>\r\n    tf.app.run(main=main, argv=sys.argv[:1]+unparsed)\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"tensorflow/examples/image_retraining/label_image.py\", line 142, in main\r\n    FLAGS.num_top_predictions)\r\n  File \"tensorflow/examples/image_retraining/label_image.py\", line 106, in run_graph\r\n    predictions, = sess.run(softmax_tensor, {input_layer_name: image_data})\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 895, in run\r\n    run_metadata_ptr)\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 1071, in _run\r\n    + e.args[0])\r\nTypeError: Cannot interpret feed_dict key as Tensor: The name 'DecodeJpeg/contents:0' refers to a Tensor which does not exist. The operation, 'DecodeJpeg/contents', does not exist in the graph.\r\n```\r\n\r\nWith default architecture (without _--architecture_ flag on the step 1) everything works correctly. I've tried to find a solution on SO and in the Tensorflow documentation, but I still have no success.\r\n\r\n"}
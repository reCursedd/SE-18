{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/320021881", "html_url": "https://github.com/tensorflow/tensorflow/issues/11250#issuecomment-320021881", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11250", "id": 320021881, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDAyMTg4MQ==", "user": {"login": "StephaneZFR", "id": 29947801, "node_id": "MDQ6VXNlcjI5OTQ3ODAx", "avatar_url": "https://avatars2.githubusercontent.com/u/29947801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StephaneZFR", "html_url": "https://github.com/StephaneZFR", "followers_url": "https://api.github.com/users/StephaneZFR/followers", "following_url": "https://api.github.com/users/StephaneZFR/following{/other_user}", "gists_url": "https://api.github.com/users/StephaneZFR/gists{/gist_id}", "starred_url": "https://api.github.com/users/StephaneZFR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StephaneZFR/subscriptions", "organizations_url": "https://api.github.com/users/StephaneZFR/orgs", "repos_url": "https://api.github.com/users/StephaneZFR/repos", "events_url": "https://api.github.com/users/StephaneZFR/events{/privacy}", "received_events_url": "https://api.github.com/users/StephaneZFR/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-03T16:31:18Z", "updated_at": "2017-08-03T16:31:18Z", "author_association": "NONE", "body_html": "<p>Hi, I'm facing the same kind of problem.<br>\nI fine-tuned MobileNetV1_224 on flowers dataset using procedure in <a href=\"url\">https://www.tensorflow.org/tutorials/image_retraining</a>. It seems to works as it generated an output_graph.pb and output_labels.txt as expected. but when I try my fine-tuned model with label_image, it fails (but it works well with a fine-tuned inception v3).<br>\nI tried the suggestion made by  petewarden but it did not work. I had the following error:<br>\n<code>ValueError: The name 'MobilenetV1/Predictions/Reshape_1' looks like an (invalid) Operation name, not a Tensor. Tensor names must be of the form \"&lt;op_name&gt;:&lt;output_index&gt;\".</code></p>\n<p>So I tested summarize_graph on my model and it found 1 possible input (name=input) and one possible output (name=final_result). when I put these values as input_layer and output_layer, I have this:<br>\n<code>Traceback (most recent call last): File \"label_image_mobilenet.py\", line 149, in &lt;module&gt; tf.app.run(main=main, argv=sys.argv[:1]+unparsed) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 48, in run _sys.exit(main(_sys.argv[:1] + flags_passthrough)) File \"label_image_mobilenet.py\", line 145, in main FLAGS.num_top_predictions) File \"label_image_mobilenet.py\", line 107, in run_graph predictions, = sess.run(softmax_tensor, {input_layer_name: image_data}) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 789, in run run_metadata_ptr) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 968, in _run np_val = np.asarray(subfeed_val, dtype=subfeed_dtype) File \"/usr/local/lib/python2.7/dist-packages/numpy/core/numeric.py\", line 531, in asarray return array(a, dtype, copy=False, order=order) ValueError: could not convert string to float: \ufffd\ufffd\ufffd\ufffd</code></p>\n<p>I really don't understand what is going on.<br>\nDo you have any idea? Thanks in advance for your help.</p>\n<p>Regards,<br>\nStephane</p>", "body_text": "Hi, I'm facing the same kind of problem.\nI fine-tuned MobileNetV1_224 on flowers dataset using procedure in https://www.tensorflow.org/tutorials/image_retraining. It seems to works as it generated an output_graph.pb and output_labels.txt as expected. but when I try my fine-tuned model with label_image, it fails (but it works well with a fine-tuned inception v3).\nI tried the suggestion made by  petewarden but it did not work. I had the following error:\nValueError: The name 'MobilenetV1/Predictions/Reshape_1' looks like an (invalid) Operation name, not a Tensor. Tensor names must be of the form \"<op_name>:<output_index>\".\nSo I tested summarize_graph on my model and it found 1 possible input (name=input) and one possible output (name=final_result). when I put these values as input_layer and output_layer, I have this:\nTraceback (most recent call last): File \"label_image_mobilenet.py\", line 149, in <module> tf.app.run(main=main, argv=sys.argv[:1]+unparsed) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 48, in run _sys.exit(main(_sys.argv[:1] + flags_passthrough)) File \"label_image_mobilenet.py\", line 145, in main FLAGS.num_top_predictions) File \"label_image_mobilenet.py\", line 107, in run_graph predictions, = sess.run(softmax_tensor, {input_layer_name: image_data}) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 789, in run run_metadata_ptr) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 968, in _run np_val = np.asarray(subfeed_val, dtype=subfeed_dtype) File \"/usr/local/lib/python2.7/dist-packages/numpy/core/numeric.py\", line 531, in asarray return array(a, dtype, copy=False, order=order) ValueError: could not convert string to float: \ufffd\ufffd\ufffd\ufffd\nI really don't understand what is going on.\nDo you have any idea? Thanks in advance for your help.\nRegards,\nStephane", "body": "Hi, I'm facing the same kind of problem.\r\nI fine-tuned MobileNetV1_224 on flowers dataset using procedure in [https://www.tensorflow.org/tutorials/image_retraining](url). It seems to works as it generated an output_graph.pb and output_labels.txt as expected. but when I try my fine-tuned model with label_image, it fails (but it works well with a fine-tuned inception v3).\r\nI tried the suggestion made by  petewarden but it did not work. I had the following error:\r\n `ValueError: The name 'MobilenetV1/Predictions/Reshape_1' looks like an (invalid) Operation name, not a Tensor. Tensor names must be of the form \"<op_name>:<output_index>\".`\r\n\r\nSo I tested summarize_graph on my model and it found 1 possible input (name=input) and one possible output (name=final_result). when I put these values as input_layer and output_layer, I have this:\r\n`Traceback (most recent call last):\r\n  File \"label_image_mobilenet.py\", line 149, in <module>\r\n    tf.app.run(main=main, argv=sys.argv[:1]+unparsed)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"label_image_mobilenet.py\", line 145, in main\r\n    FLAGS.num_top_predictions)\r\n  File \"label_image_mobilenet.py\", line 107, in run_graph\r\n    predictions, = sess.run(softmax_tensor, {input_layer_name: image_data})\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 789, in run\r\n    run_metadata_ptr)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 968, in _run\r\n    np_val = np.asarray(subfeed_val, dtype=subfeed_dtype)\r\n  File \"/usr/local/lib/python2.7/dist-packages/numpy/core/numeric.py\", line 531, in asarray\r\n    return array(a, dtype, copy=False, order=order)\r\nValueError: could not convert string to float: \ufffd\ufffd\ufffd\ufffd`\r\n\r\nI really don't understand what is going on.\r\nDo you have any idea? Thanks in advance for your help.\r\n\r\nRegards,\r\nStephane"}
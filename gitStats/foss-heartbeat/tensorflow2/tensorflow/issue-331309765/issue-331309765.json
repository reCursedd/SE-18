{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19913", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19913/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19913/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19913/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19913", "id": 331309765, "node_id": "MDU6SXNzdWUzMzEzMDk3NjU=", "number": 19913, "title": "ValueError: Could not interpret optimizer identifier (tf.keras)", "user": {"login": "isaacsultan", "id": 16841500, "node_id": "MDQ6VXNlcjE2ODQxNTAw", "avatar_url": "https://avatars1.githubusercontent.com/u/16841500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/isaacsultan", "html_url": "https://github.com/isaacsultan", "followers_url": "https://api.github.com/users/isaacsultan/followers", "following_url": "https://api.github.com/users/isaacsultan/following{/other_user}", "gists_url": "https://api.github.com/users/isaacsultan/gists{/gist_id}", "starred_url": "https://api.github.com/users/isaacsultan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/isaacsultan/subscriptions", "organizations_url": "https://api.github.com/users/isaacsultan/orgs", "repos_url": "https://api.github.com/users/isaacsultan/repos", "events_url": "https://api.github.com/users/isaacsultan/events{/privacy}", "received_events_url": "https://api.github.com/users/isaacsultan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, {"login": "anj-s", "id": 32556631, "node_id": "MDQ6VXNlcjMyNTU2NjMx", "avatar_url": "https://avatars1.githubusercontent.com/u/32556631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anj-s", "html_url": "https://github.com/anj-s", "followers_url": "https://api.github.com/users/anj-s/followers", "following_url": "https://api.github.com/users/anj-s/following{/other_user}", "gists_url": "https://api.github.com/users/anj-s/gists{/gist_id}", "starred_url": "https://api.github.com/users/anj-s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anj-s/subscriptions", "organizations_url": "https://api.github.com/users/anj-s/orgs", "repos_url": "https://api.github.com/users/anj-s/repos", "events_url": "https://api.github.com/users/anj-s/events{/privacy}", "received_events_url": "https://api.github.com/users/anj-s/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-06-11T18:58:56Z", "updated_at": "2018-07-10T20:45:51Z", "closed_at": "2018-07-10T20:45:51Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nWindows 10</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nbinary</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.8.0</li>\n<li><strong>Python version</strong>:<br>\n3.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\n8.0/6.0</li>\n<li><strong>GPU model and memory</strong>:<br>\nNvidia</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nmodel.compile(optimizer=tf.keras.optimizers.Adadelta() ...)</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Passing in keras optimizers into a tf.keras model causes a value error, unless they are passed as strings i.e. \"Adadelta\" instead of Adadelta( ). This prevents arguments from being passed to the optimizer. Please note that when the optimizer is imported from vanilla Keras i.e. <code>keras.optimizers.Adadelta(rho=0.9)</code> there is no such issue.</p>\n<h3>Source code / logs</h3>\n<p>``<br>\nimport tensorflow as tf<br>\nfrom tensorflow.python.keras.optimizers import Adadelta, Adam</p>\n<pre><code>model = deepshading.get_model()\nmodel.compile(optimizer=tf.keras.optimizers.Adadelta(rho=0.9),\n              loss=DSSIMObjective(k1=0.0001, k2=0.001, kernel_size=8),\n              metrics=[DSSIMObjective(k1=0.0001, k2=0.001, kernel_size=8)])\n</code></pre>\n<p>``</p>\n<p>Returns trace-back<br>\n<code>identifier=identifier.__class__.__name__)) Traceback (most recent call last): File \"C:/Users/isultan/PycharmProjects/deep-shading/run.py\", line 69, in &lt;module&gt; train() File \"C:/Users/isultan/PycharmProjects/deep-shading/run.py\", line 35, in train metrics=[DSSIMObjective(k1=0.0001, k2=0.001, kernel_size=8)]) File \"C:\\Users\\isultan\\AppData\\Local\\Continuum\\miniconda3\\envs\\tf\\lib\\site-packages\\keras\\engine\\training.py\", line 604, in compile self.optimizer = optimizers.get(optimizer) File \"C:\\Users\\isultan\\AppData\\Local\\Continuum\\miniconda3\\envs\\tf\\lib\\site-packages\\keras\\optimizers.py\", line 768, in get str(identifier)) ValueError: Could not interpret optimizer identifier: &lt;tensorflow.python.keras._impl.keras.optimizers.Adadelta object at 0x000001E563508860&gt;</code></p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nWindows 10\nTensorFlow installed from (source or binary):\nbinary\nTensorFlow version (use command below):\n1.8.0\nPython version:\n3.5\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source):\nCUDA/cuDNN version:\n8.0/6.0\nGPU model and memory:\nNvidia\nExact command to reproduce:\nmodel.compile(optimizer=tf.keras.optimizers.Adadelta() ...)\n\nDescribe the problem\nPassing in keras optimizers into a tf.keras model causes a value error, unless they are passed as strings i.e. \"Adadelta\" instead of Adadelta( ). This prevents arguments from being passed to the optimizer. Please note that when the optimizer is imported from vanilla Keras i.e. keras.optimizers.Adadelta(rho=0.9) there is no such issue.\nSource code / logs\n``\nimport tensorflow as tf\nfrom tensorflow.python.keras.optimizers import Adadelta, Adam\nmodel = deepshading.get_model()\nmodel.compile(optimizer=tf.keras.optimizers.Adadelta(rho=0.9),\n              loss=DSSIMObjective(k1=0.0001, k2=0.001, kernel_size=8),\n              metrics=[DSSIMObjective(k1=0.0001, k2=0.001, kernel_size=8)])\n\n``\nReturns trace-back\nidentifier=identifier.__class__.__name__)) Traceback (most recent call last): File \"C:/Users/isultan/PycharmProjects/deep-shading/run.py\", line 69, in <module> train() File \"C:/Users/isultan/PycharmProjects/deep-shading/run.py\", line 35, in train metrics=[DSSIMObjective(k1=0.0001, k2=0.001, kernel_size=8)]) File \"C:\\Users\\isultan\\AppData\\Local\\Continuum\\miniconda3\\envs\\tf\\lib\\site-packages\\keras\\engine\\training.py\", line 604, in compile self.optimizer = optimizers.get(optimizer) File \"C:\\Users\\isultan\\AppData\\Local\\Continuum\\miniconda3\\envs\\tf\\lib\\site-packages\\keras\\optimizers.py\", line 768, in get str(identifier)) ValueError: Could not interpret optimizer identifier: <tensorflow.python.keras._impl.keras.optimizers.Adadelta object at 0x000001E563508860>", "body": "\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nWindows 10\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary\r\n- **TensorFlow version (use command below)**:\r\n1.8.0\r\n- **Python version**: \r\n3.5\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\n8.0/6.0\r\n- **GPU model and memory**:\r\nNvidia\r\n- **Exact command to reproduce**:\r\nmodel.compile(optimizer=tf.keras.optimizers.Adadelta() ...)\r\n\r\n### Describe the problem\r\nPassing in keras optimizers into a tf.keras model causes a value error, unless they are passed as strings i.e. \"Adadelta\" instead of Adadelta( ). This prevents arguments from being passed to the optimizer. Please note that when the optimizer is imported from vanilla Keras i.e. `keras.optimizers.Adadelta(rho=0.9)` there is no such issue. \r\n\r\n### Source code / logs\r\n\r\n``\r\n    import tensorflow as tf\r\n    from tensorflow.python.keras.optimizers import Adadelta, Adam\r\n\r\n    model = deepshading.get_model()\r\n    model.compile(optimizer=tf.keras.optimizers.Adadelta(rho=0.9),\r\n                  loss=DSSIMObjective(k1=0.0001, k2=0.001, kernel_size=8),\r\n                  metrics=[DSSIMObjective(k1=0.0001, k2=0.001, kernel_size=8)])\r\n``\r\n\r\nReturns trace-back\r\n``\r\nidentifier=identifier.__class__.__name__))\r\nTraceback (most recent call last):\r\n  File \"C:/Users/isultan/PycharmProjects/deep-shading/run.py\", line 69, in <module>\r\n    train()\r\n  File \"C:/Users/isultan/PycharmProjects/deep-shading/run.py\", line 35, in train\r\n    metrics=[DSSIMObjective(k1=0.0001, k2=0.001, kernel_size=8)])\r\n  File \"C:\\Users\\isultan\\AppData\\Local\\Continuum\\miniconda3\\envs\\tf\\lib\\site-packages\\keras\\engine\\training.py\", line 604, in compile\r\n    self.optimizer = optimizers.get(optimizer)\r\n  File \"C:\\Users\\isultan\\AppData\\Local\\Continuum\\miniconda3\\envs\\tf\\lib\\site-packages\\keras\\optimizers.py\", line 768, in get\r\n    str(identifier))\r\nValueError: Could not interpret optimizer identifier: <tensorflow.python.keras._impl.keras.optimizers.Adadelta object at 0x000001E563508860>\r\n``"}
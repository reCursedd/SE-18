{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13497", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13497/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13497/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13497/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/13497", "id": 262982422, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ0ODEzODc4", "number": 13497, "title": "Fix documentation error in tf.reverse docstring (#1)", "user": {"login": "craffel", "id": 417568, "node_id": "MDQ6VXNlcjQxNzU2OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/417568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craffel", "html_url": "https://github.com/craffel", "followers_url": "https://api.github.com/users/craffel/followers", "following_url": "https://api.github.com/users/craffel/following{/other_user}", "gists_url": "https://api.github.com/users/craffel/gists{/gist_id}", "starred_url": "https://api.github.com/users/craffel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craffel/subscriptions", "organizations_url": "https://api.github.com/users/craffel/orgs", "repos_url": "https://api.github.com/users/craffel/repos", "events_url": "https://api.github.com/users/craffel/events{/privacy}", "received_events_url": "https://api.github.com/users/craffel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136613, "node_id": "MDU6TGFiZWwzMDAxMzY2MTM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20no", "name": "cla: no", "color": "eb6420", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-10-05T01:52:58Z", "updated_at": "2017-10-13T13:31:47Z", "closed_at": "2017-10-13T13:31:47Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13497", "html_url": "https://github.com/tensorflow/tensorflow/pull/13497", "diff_url": "https://github.com/tensorflow/tensorflow/pull/13497.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/13497.patch"}, "body_html": "<p>The first example in the tf.reverse docstring causes a ValueError, as shown below.  <code>tf.reverse</code> requires <code>axis</code> to be 1D; -1 is not 1D, it's 0D; it should be [-1].</p>\n<div class=\"highlight highlight-source-python\"><pre>In [<span class=\"pl-c1\">1</span>]: <span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\nIn [<span class=\"pl-c1\">2</span>]: t <span class=\"pl-k\">=</span> tf.constant([[[[ <span class=\"pl-c1\">0</span>,  <span class=\"pl-c1\">1</span>,  <span class=\"pl-c1\">2</span>,  <span class=\"pl-c1\">3</span>], [ <span class=\"pl-c1\">4</span>,  <span class=\"pl-c1\">5</span>,  <span class=\"pl-c1\">6</span>,  <span class=\"pl-c1\">7</span>], [ <span class=\"pl-c1\">8</span>,  <span class=\"pl-c1\">9</span>, <span class=\"pl-c1\">10</span>, <span class=\"pl-c1\">11</span>]], [[<span class=\"pl-c1\">12</span>, <span class=\"pl-c1\">13</span>, <span class=\"pl-c1\">14</span>, <span class=\"pl-c1\">15</span>], [<span class=\"pl-c1\">16</span>, <span class=\"pl-c1\">17</span>, <span class=\"pl-c1\">18</span>, <span class=\"pl-c1\">19</span>], [<span class=\"pl-c1\">20</span>, <span class=\"pl-c1\">21</span>, <span class=\"pl-c1\">22</span>, <span class=\"pl-c1\">23</span>]]]])\nIn [<span class=\"pl-c1\">3</span>]: dims <span class=\"pl-k\">=</span> <span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>\nIn [<span class=\"pl-c1\">4</span>]: sess <span class=\"pl-k\">=</span> tf.InteractiveSession()\nIn [<span class=\"pl-c1\">5</span>]: tf.reverse(t, dims).eval()\n<span class=\"pl-ii\">--------------------------------------------------------------------------</span><span class=\"pl-k\">-</span>\n<span class=\"pl-c1\">ValueError</span>                                Traceback (most recent call last)\n<span class=\"pl-k\">&lt;</span>ipython<span class=\"pl-k\">-</span><span class=\"pl-c1\">input</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">6</span><span class=\"pl-k\">-</span><span class=\"pl-ii\">7752813cc8a9</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>()\n<span class=\"pl-ii\">----</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">1</span> tf.reverse(t, dims).eval()\n\n<span class=\"pl-k\">/</span>Users<span class=\"pl-k\">/</span>craffel<span class=\"pl-k\">/</span>.pyenv<span class=\"pl-k\">/</span>versions<span class=\"pl-k\">/</span><span class=\"pl-c1\">2.7</span>.13<span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python2.7<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>ops<span class=\"pl-k\">/</span>array_ops.pyc <span class=\"pl-k\">in</span> reverse(tensor, axis, name)\n   <span class=\"pl-c1\">2332</span>\n   <span class=\"pl-c1\">2333</span> <span class=\"pl-k\">def</span> <span class=\"pl-en\">reverse</span>(<span class=\"pl-smi\">tensor</span>, <span class=\"pl-smi\">axis</span>, <span class=\"pl-smi\">name</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">None</span>):\n<span class=\"pl-ii\">-&gt;</span> <span class=\"pl-c1\">2334</span>   <span class=\"pl-k\">return</span> gen_array_ops.reverse_v2(tensor, axis, name)\n   <span class=\"pl-c1\">2335</span> reverse.<span class=\"pl-c1\">__doc__</span> <span class=\"pl-k\">=</span> gen_array_ops.reverse_v2.<span class=\"pl-c1\">__doc__</span>\n   <span class=\"pl-c1\">2336</span>\n\n<span class=\"pl-k\">/</span>Users<span class=\"pl-k\">/</span>craffel<span class=\"pl-k\">/</span>.pyenv<span class=\"pl-k\">/</span>versions<span class=\"pl-k\">/</span><span class=\"pl-c1\">2.7</span>.13<span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python2.7<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>ops<span class=\"pl-k\">/</span>gen_array_ops.pyc <span class=\"pl-k\">in</span> reverse_v2(tensor, axis, name)\n   <span class=\"pl-c1\">2697</span>   <span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span></span>\n<span class=\"pl-s\">   2698   result = _op_def_lib.apply_op(\"ReverseV2\", tensor=tensor, axis=axis,</span>\n<span class=\"pl-s\">-&gt; 2699                                 name=name)</span>\n<span class=\"pl-s\">   2700   return result</span>\n<span class=\"pl-s\">   2701</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.pyc in apply_op(self, op_type_name, name, **keywords)</span>\n<span class=\"pl-s\">    765         op = g.create_op(op_type_name, inputs, output_types, name=scope,</span>\n<span class=\"pl-s\">    766                          input_types=input_types, attrs=attr_protos,</span>\n<span class=\"pl-s\">--&gt; 767                          op_def=op_def)</span>\n<span class=\"pl-s\">    768         if output_structure:</span>\n<span class=\"pl-s\">    769           outputs = op.outputs</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in create_op(self, op_type, inputs, dtypes, input_types, name, attrs, op_def, compute_shapes, compute_device)</span>\n<span class=\"pl-s\">   2506                     original_op=self._default_original_op, op_def=op_def)</span>\n<span class=\"pl-s\">   2507     if compute_shapes:</span>\n<span class=\"pl-s\">-&gt; 2508       set_shapes_for_outputs(ret)</span>\n<span class=\"pl-s\">   2509     self._add_op(ret)</span>\n<span class=\"pl-s\">   2510     self._record_op_seen_by_control_dependencies(ret)</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in set_shapes_for_outputs(op)</span>\n<span class=\"pl-s\">   1871       shape_func = _call_cpp_shape_fn_and_require_op</span>\n<span class=\"pl-s\">   1872</span>\n<span class=\"pl-s\">-&gt; 1873   shapes = shape_func(op)</span>\n<span class=\"pl-s\">   1874   if shapes is None:</span>\n<span class=\"pl-s\">   1875     raise RuntimeError(</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in call_with_requiring(op)</span>\n<span class=\"pl-s\">   1821</span>\n<span class=\"pl-s\">   1822   def call_with_requiring(op):</span>\n<span class=\"pl-s\">-&gt; 1823     return call_cpp_shape_fn(op, require_shape_fn=True)</span>\n<span class=\"pl-s\">   1824</span>\n<span class=\"pl-s\">   1825   _call_cpp_shape_fn_and_require_op = call_with_requiring</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/common_shapes.pyc in call_cpp_shape_fn(op, input_tensors_needed, input_tensors_as_shapes_needed, debug_python_shape_fn, require_shape_fn)</span>\n<span class=\"pl-s\">    608     res = _call_cpp_shape_fn_impl(op, input_tensors_needed,</span>\n<span class=\"pl-s\">    609                                   input_tensors_as_shapes_needed,</span>\n<span class=\"pl-s\">--&gt; 610                                   debug_python_shape_fn, require_shape_fn)</span>\n<span class=\"pl-s\">    611     if not isinstance(res, dict):</span>\n<span class=\"pl-s\">    612       # Handles the case where _call_cpp_shape_fn_impl calls unknown_shape(op).</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/common_shapes.pyc in _call_cpp_shape_fn_impl(op, input_tensors_needed, input_tensors_as_shapes_needed, debug_python_shape_fn, require_shape_fn)</span>\n<span class=\"pl-s\">    674       missing_shape_fn = True</span>\n<span class=\"pl-s\">    675     else:</span>\n<span class=\"pl-s\">--&gt; 676       raise ValueError(err.message)</span>\n<span class=\"pl-s\">    677</span>\n<span class=\"pl-s\">    678   if missing_shape_fn:</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">ValueError: Shape must be rank 1 but is rank 0 for 'ReverseV2' (op: 'ReverseV2') with input shapes: [1,2,3,4], [].</span></pre></div>", "body_text": "The first example in the tf.reverse docstring causes a ValueError, as shown below.  tf.reverse requires axis to be 1D; -1 is not 1D, it's 0D; it should be [-1].\nIn [1]: import tensorflow as tf\nIn [2]: t = tf.constant([[[[ 0,  1,  2,  3], [ 4,  5,  6,  7], [ 8,  9, 10, 11]], [[12, 13, 14, 15], [16, 17, 18, 19], [20, 21, 22, 23]]]])\nIn [3]: dims = -1\nIn [4]: sess = tf.InteractiveSession()\nIn [5]: tf.reverse(t, dims).eval()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-6-7752813cc8a9> in <module>()\n----> 1 tf.reverse(t, dims).eval()\n\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.pyc in reverse(tensor, axis, name)\n   2332\n   2333 def reverse(tensor, axis, name=None):\n-> 2334   return gen_array_ops.reverse_v2(tensor, axis, name)\n   2335 reverse.__doc__ = gen_array_ops.reverse_v2.__doc__\n   2336\n\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.pyc in reverse_v2(tensor, axis, name)\n   2697   \"\"\"\n   2698   result = _op_def_lib.apply_op(\"ReverseV2\", tensor=tensor, axis=axis,\n-> 2699                                 name=name)\n   2700   return result\n   2701\n\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.pyc in apply_op(self, op_type_name, name, **keywords)\n    765         op = g.create_op(op_type_name, inputs, output_types, name=scope,\n    766                          input_types=input_types, attrs=attr_protos,\n--> 767                          op_def=op_def)\n    768         if output_structure:\n    769           outputs = op.outputs\n\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in create_op(self, op_type, inputs, dtypes, input_types, name, attrs, op_def, compute_shapes, compute_device)\n   2506                     original_op=self._default_original_op, op_def=op_def)\n   2507     if compute_shapes:\n-> 2508       set_shapes_for_outputs(ret)\n   2509     self._add_op(ret)\n   2510     self._record_op_seen_by_control_dependencies(ret)\n\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in set_shapes_for_outputs(op)\n   1871       shape_func = _call_cpp_shape_fn_and_require_op\n   1872\n-> 1873   shapes = shape_func(op)\n   1874   if shapes is None:\n   1875     raise RuntimeError(\n\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in call_with_requiring(op)\n   1821\n   1822   def call_with_requiring(op):\n-> 1823     return call_cpp_shape_fn(op, require_shape_fn=True)\n   1824\n   1825   _call_cpp_shape_fn_and_require_op = call_with_requiring\n\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/common_shapes.pyc in call_cpp_shape_fn(op, input_tensors_needed, input_tensors_as_shapes_needed, debug_python_shape_fn, require_shape_fn)\n    608     res = _call_cpp_shape_fn_impl(op, input_tensors_needed,\n    609                                   input_tensors_as_shapes_needed,\n--> 610                                   debug_python_shape_fn, require_shape_fn)\n    611     if not isinstance(res, dict):\n    612       # Handles the case where _call_cpp_shape_fn_impl calls unknown_shape(op).\n\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/common_shapes.pyc in _call_cpp_shape_fn_impl(op, input_tensors_needed, input_tensors_as_shapes_needed, debug_python_shape_fn, require_shape_fn)\n    674       missing_shape_fn = True\n    675     else:\n--> 676       raise ValueError(err.message)\n    677\n    678   if missing_shape_fn:\n\nValueError: Shape must be rank 1 but is rank 0 for 'ReverseV2' (op: 'ReverseV2') with input shapes: [1,2,3,4], [].", "body": "The first example in the tf.reverse docstring causes a ValueError, as shown below.  `tf.reverse` requires `axis` to be 1D; -1 is not 1D, it's 0D; it should be [-1].\r\n\r\n```Python\r\nIn [1]: import tensorflow as tf\r\nIn [2]: t = tf.constant([[[[ 0,  1,  2,  3], [ 4,  5,  6,  7], [ 8,  9, 10, 11]], [[12, 13, 14, 15], [16, 17, 18, 19], [20, 21, 22, 23]]]])\r\nIn [3]: dims = -1\r\nIn [4]: sess = tf.InteractiveSession()\r\nIn [5]: tf.reverse(t, dims).eval()\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-6-7752813cc8a9> in <module>()\r\n----> 1 tf.reverse(t, dims).eval()\r\n\r\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.pyc in reverse(tensor, axis, name)\r\n   2332\r\n   2333 def reverse(tensor, axis, name=None):\r\n-> 2334   return gen_array_ops.reverse_v2(tensor, axis, name)\r\n   2335 reverse.__doc__ = gen_array_ops.reverse_v2.__doc__\r\n   2336\r\n\r\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.pyc in reverse_v2(tensor, axis, name)\r\n   2697   \"\"\"\r\n   2698   result = _op_def_lib.apply_op(\"ReverseV2\", tensor=tensor, axis=axis,\r\n-> 2699                                 name=name)\r\n   2700   return result\r\n   2701\r\n\r\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.pyc in apply_op(self, op_type_name, name, **keywords)\r\n    765         op = g.create_op(op_type_name, inputs, output_types, name=scope,\r\n    766                          input_types=input_types, attrs=attr_protos,\r\n--> 767                          op_def=op_def)\r\n    768         if output_structure:\r\n    769           outputs = op.outputs\r\n\r\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in create_op(self, op_type, inputs, dtypes, input_types, name, attrs, op_def, compute_shapes, compute_device)\r\n   2506                     original_op=self._default_original_op, op_def=op_def)\r\n   2507     if compute_shapes:\r\n-> 2508       set_shapes_for_outputs(ret)\r\n   2509     self._add_op(ret)\r\n   2510     self._record_op_seen_by_control_dependencies(ret)\r\n\r\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in set_shapes_for_outputs(op)\r\n   1871       shape_func = _call_cpp_shape_fn_and_require_op\r\n   1872\r\n-> 1873   shapes = shape_func(op)\r\n   1874   if shapes is None:\r\n   1875     raise RuntimeError(\r\n\r\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in call_with_requiring(op)\r\n   1821\r\n   1822   def call_with_requiring(op):\r\n-> 1823     return call_cpp_shape_fn(op, require_shape_fn=True)\r\n   1824\r\n   1825   _call_cpp_shape_fn_and_require_op = call_with_requiring\r\n\r\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/common_shapes.pyc in call_cpp_shape_fn(op, input_tensors_needed, input_tensors_as_shapes_needed, debug_python_shape_fn, require_shape_fn)\r\n    608     res = _call_cpp_shape_fn_impl(op, input_tensors_needed,\r\n    609                                   input_tensors_as_shapes_needed,\r\n--> 610                                   debug_python_shape_fn, require_shape_fn)\r\n    611     if not isinstance(res, dict):\r\n    612       # Handles the case where _call_cpp_shape_fn_impl calls unknown_shape(op).\r\n\r\n/Users/craffel/.pyenv/versions/2.7.13/lib/python2.7/site-packages/tensorflow/python/framework/common_shapes.pyc in _call_cpp_shape_fn_impl(op, input_tensors_needed, input_tensors_as_shapes_needed, debug_python_shape_fn, require_shape_fn)\r\n    674       missing_shape_fn = True\r\n    675     else:\r\n--> 676       raise ValueError(err.message)\r\n    677\r\n    678   if missing_shape_fn:\r\n\r\nValueError: Shape must be rank 1 but is rank 0 for 'ReverseV2' (op: 'ReverseV2') with input shapes: [1,2,3,4], [].\r\n```"}
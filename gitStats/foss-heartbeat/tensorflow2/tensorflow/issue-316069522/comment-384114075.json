{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/384114075", "html_url": "https://github.com/tensorflow/tensorflow/issues/18708#issuecomment-384114075", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18708", "id": 384114075, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDExNDA3NQ==", "user": {"login": "michaelisard", "id": 5376757, "node_id": "MDQ6VXNlcjUzNzY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5376757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelisard", "html_url": "https://github.com/michaelisard", "followers_url": "https://api.github.com/users/michaelisard/followers", "following_url": "https://api.github.com/users/michaelisard/following{/other_user}", "gists_url": "https://api.github.com/users/michaelisard/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelisard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelisard/subscriptions", "organizations_url": "https://api.github.com/users/michaelisard/orgs", "repos_url": "https://api.github.com/users/michaelisard/repos", "events_url": "https://api.github.com/users/michaelisard/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelisard/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-24T23:40:34Z", "updated_at": "2018-04-24T23:40:34Z", "author_association": "MEMBER", "body_html": "<p>Sorry, but I'm not completely sure what you are asking. I think it is the intended behavior that the two branches of a conditional may return differently-shaped tensors. This is in general supported in TF control flow, for example loop-carried state may be of a different shape every time around a loop, e.g., a loop may add a row to a tensor each time around.</p>\n<p>I think the shape inference is working as expected, in that given the two placeholders, the 'merge' of their shapes constraints is the constraint that the output is rank 2.</p>\n<p>If you build a conditional with branches outputting different shapes, then shape checking becomes a dynamic property that the TensorFlow interpreter will enforce, not something that is checked before the graph is run.</p>\n<p>Does that make sense? What are you hoping for here?</p>", "body_text": "Sorry, but I'm not completely sure what you are asking. I think it is the intended behavior that the two branches of a conditional may return differently-shaped tensors. This is in general supported in TF control flow, for example loop-carried state may be of a different shape every time around a loop, e.g., a loop may add a row to a tensor each time around.\nI think the shape inference is working as expected, in that given the two placeholders, the 'merge' of their shapes constraints is the constraint that the output is rank 2.\nIf you build a conditional with branches outputting different shapes, then shape checking becomes a dynamic property that the TensorFlow interpreter will enforce, not something that is checked before the graph is run.\nDoes that make sense? What are you hoping for here?", "body": "Sorry, but I'm not completely sure what you are asking. I think it is the intended behavior that the two branches of a conditional may return differently-shaped tensors. This is in general supported in TF control flow, for example loop-carried state may be of a different shape every time around a loop, e.g., a loop may add a row to a tensor each time around.\r\n\r\nI think the shape inference is working as expected, in that given the two placeholders, the 'merge' of their shapes constraints is the constraint that the output is rank 2.\r\n\r\nIf you build a conditional with branches outputting different shapes, then shape checking becomes a dynamic property that the TensorFlow interpreter will enforce, not something that is checked before the graph is run.\r\n\r\nDoes that make sense? What are you hoping for here?"}
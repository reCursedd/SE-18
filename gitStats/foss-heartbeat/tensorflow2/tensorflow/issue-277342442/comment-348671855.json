{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/348671855", "html_url": "https://github.com/tensorflow/tensorflow/issues/14933#issuecomment-348671855", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14933", "id": 348671855, "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODY3MTg1NQ==", "user": {"login": "szpssky", "id": 5045936, "node_id": "MDQ6VXNlcjUwNDU5MzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/5045936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szpssky", "html_url": "https://github.com/szpssky", "followers_url": "https://api.github.com/users/szpssky/followers", "following_url": "https://api.github.com/users/szpssky/following{/other_user}", "gists_url": "https://api.github.com/users/szpssky/gists{/gist_id}", "starred_url": "https://api.github.com/users/szpssky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szpssky/subscriptions", "organizations_url": "https://api.github.com/users/szpssky/orgs", "repos_url": "https://api.github.com/users/szpssky/repos", "events_url": "https://api.github.com/users/szpssky/events{/privacy}", "received_events_url": "https://api.github.com/users/szpssky/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-02T06:17:19Z", "updated_at": "2017-12-02T06:29:09Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1112263\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/facaiy\">@facaiy</a><br>\nI tested your PR on master branch, it looks work well. However, if input shape is (None,None,1) such as the first layer is LSTM, it will have an error:<br>\n<code>  File \"/Users/szp/anaconda3/envs/tf-latest/lib/python3.6/site-packages/tensorflow/python/layers/convolutional.py\", line 358, in shape_fn input_list[1] += left_pad TypeError: unsupported operand type(s) for +=: 'NoneType' and 'int'</code></p>\n<p>But it doesn't seem to be your problem.  fchollet/keras LSTM layer output is a exact shape, such as (None, 30, 1), but the <code>tf.keras.layers.LSTM</code> output shape becomes (None, None, 1).<br>\nA simple test code:<br>\n<a href=\"https://gist.github.com/szpssky/3a54239a0044363abb53ef5c69a80056\">https://gist.github.com/szpssky/3a54239a0044363abb53ef5c69a80056</a></p>", "body_text": "@facaiy\nI tested your PR on master branch, it looks work well. However, if input shape is (None,None,1) such as the first layer is LSTM, it will have an error:\n  File \"/Users/szp/anaconda3/envs/tf-latest/lib/python3.6/site-packages/tensorflow/python/layers/convolutional.py\", line 358, in shape_fn input_list[1] += left_pad TypeError: unsupported operand type(s) for +=: 'NoneType' and 'int'\nBut it doesn't seem to be your problem.  fchollet/keras LSTM layer output is a exact shape, such as (None, 30, 1), but the tf.keras.layers.LSTM output shape becomes (None, None, 1).\nA simple test code:\nhttps://gist.github.com/szpssky/3a54239a0044363abb53ef5c69a80056", "body": "@facaiy \r\nI tested your PR on master branch, it looks work well. However, if input shape is (None,None,1) such as the first layer is LSTM, it will have an error:\r\n`  File \"/Users/szp/anaconda3/envs/tf-latest/lib/python3.6/site-packages/tensorflow/python/layers/convolutional.py\", line 358, in shape_fn\r\n    input_list[1] += left_pad\r\nTypeError: unsupported operand type(s) for +=: 'NoneType' and 'int'`\r\n\r\nBut it doesn't seem to be your problem.  fchollet/keras LSTM layer output is a exact shape, such as (None, 30, 1), but the `tf.keras.layers.LSTM` output shape becomes (None, None, 1). \r\nA simple test code:\r\nhttps://gist.github.com/szpssky/3a54239a0044363abb53ef5c69a80056\r\n"}
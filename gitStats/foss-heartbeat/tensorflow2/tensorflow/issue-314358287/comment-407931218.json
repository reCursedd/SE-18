{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/407931218", "html_url": "https://github.com/tensorflow/tensorflow/issues/18523#issuecomment-407931218", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18523", "id": 407931218, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzkzMTIxOA==", "user": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-25T23:46:56Z", "updated_at": "2018-07-25T23:46:56Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4306809\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dkhmelenko\">@dkhmelenko</a> I looked into the issue further and there seem to be some alternative ways that you can run the code using your SavedModel.</p>\n<ol>\n<li>\n<p>If you intend to run your code through TensorFlow Lite then you can use either <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/python_api.md#basic-savedmodel\"><code>TocoConverter</code></a> (Python API) or <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#savedmodel\"><code>tflite_convert</code></a> (command line tool) with your SavedModel. This should be working starting from TensorFlow 1.9. If not, it works on the nightly build. However, this results in the error mentioned above indicating there are some operators that aren't supported. The solution to that error is mentioned in the comment below.</p>\n</li>\n<li>\n<p>If you just want to run <code>freeze_graph.py</code> then you should be able to run it with a SavedModel. The current error you are getting is coming from the code that loads the checkpoints. The command line below should work with your code. The values for <code>output_node_names</code> came from the SignatureDef within your SavedModel.</p>\n</li>\n</ol>\n<pre><code>python freeze_graph.py \\\n--input_saved_model_dir=SAVED_MODEL_DIR \\\n--output_node_names=linear/head/Tile,linear/head/predictions/probabilities \\\n--output_graph=/tmp/frozen_graph.pb\n</code></pre>\n<p>Let me know if one of these solutions suffices. In the meantime I'm looking for a solution to fix the problem in <code>freeze_graph.py</code>.</p>", "body_text": "@dkhmelenko I looked into the issue further and there seem to be some alternative ways that you can run the code using your SavedModel.\n\n\nIf you intend to run your code through TensorFlow Lite then you can use either TocoConverter (Python API) or tflite_convert (command line tool) with your SavedModel. This should be working starting from TensorFlow 1.9. If not, it works on the nightly build. However, this results in the error mentioned above indicating there are some operators that aren't supported. The solution to that error is mentioned in the comment below.\n\n\nIf you just want to run freeze_graph.py then you should be able to run it with a SavedModel. The current error you are getting is coming from the code that loads the checkpoints. The command line below should work with your code. The values for output_node_names came from the SignatureDef within your SavedModel.\n\n\npython freeze_graph.py \\\n--input_saved_model_dir=SAVED_MODEL_DIR \\\n--output_node_names=linear/head/Tile,linear/head/predictions/probabilities \\\n--output_graph=/tmp/frozen_graph.pb\n\nLet me know if one of these solutions suffices. In the meantime I'm looking for a solution to fix the problem in freeze_graph.py.", "body": "@dkhmelenko I looked into the issue further and there seem to be some alternative ways that you can run the code using your SavedModel.\r\n\r\n1. If you intend to run your code through TensorFlow Lite then you can use either [`TocoConverter`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/python_api.md#basic-savedmodel) (Python API) or [`tflite_convert`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#savedmodel) (command line tool) with your SavedModel. This should be working starting from TensorFlow 1.9. If not, it works on the nightly build. However, this results in the error mentioned above indicating there are some operators that aren't supported. The solution to that error is mentioned in the comment below.\r\n\r\n2. If you just want to run `freeze_graph.py` then you should be able to run it with a SavedModel. The current error you are getting is coming from the code that loads the checkpoints. The command line below should work with your code. The values for `output_node_names` came from the SignatureDef within your SavedModel.\r\n\r\n```\r\npython freeze_graph.py \\\r\n--input_saved_model_dir=SAVED_MODEL_DIR \\\r\n--output_node_names=linear/head/Tile,linear/head/predictions/probabilities \\\r\n--output_graph=/tmp/frozen_graph.pb\r\n```\r\n\r\nLet me know if one of these solutions suffices. In the meantime I'm looking for a solution to fix the problem in `freeze_graph.py`."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/381745372", "html_url": "https://github.com/tensorflow/tensorflow/issues/18523#issuecomment-381745372", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18523", "id": 381745372, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTc0NTM3Mg==", "user": {"login": "dkhmelenko", "id": 4306809, "node_id": "MDQ6VXNlcjQzMDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/4306809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkhmelenko", "html_url": "https://github.com/dkhmelenko", "followers_url": "https://api.github.com/users/dkhmelenko/followers", "following_url": "https://api.github.com/users/dkhmelenko/following{/other_user}", "gists_url": "https://api.github.com/users/dkhmelenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkhmelenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkhmelenko/subscriptions", "organizations_url": "https://api.github.com/users/dkhmelenko/orgs", "repos_url": "https://api.github.com/users/dkhmelenko/repos", "events_url": "https://api.github.com/users/dkhmelenko/events{/privacy}", "received_events_url": "https://api.github.com/users/dkhmelenko/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-16T20:52:26Z", "updated_at": "2018-04-16T20:52:26Z", "author_association": "NONE", "body_html": "<p>I'm using the following command for freezing the graph</p>\n<pre><code> C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\Lib\\site-packages\\tensorflow\\python\\tools&gt;python freeze_graph.py --input_graph=export/graph.pbtxt --input_binary=false --input_checkpoint=export/model.ckpt-100 --output_graph=model/frozen_graph.pb --output_node_names=output_node\n</code></pre>\n<p>And the output is the following</p>\n<pre><code>2018-04-16 22:52:21.381508: I C:\\tf_jenkins\\home\\workspace\\rel-win\\M\\windows\\PY\\35\\tensorflow\\core\\platform\\cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX\nTraceback (most recent call last):\n  File \"freeze_graph.py\", line 350, in &lt;module&gt;\n    app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"freeze_graph.py\", line 249, in main\n    FLAGS.saved_model_tags)\n  File \"freeze_graph.py\", line 239, in freeze_graph\n    input_meta_graph_def, input_saved_model_dir, saved_model_tags.split(\",\"))\n  File \"freeze_graph.py\", line 127, in freeze_graph_with_def_protos\n    saver = saver_lib.Saver(var_list=var_list)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1218, in __init__\n    self.build()\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1227, in build\n    self._build(self._filename, build_save=True, build_restore=True)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1263, in _build\n    build_save=build_save, build_restore=build_restore)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 729, in _build_internal\n    saveables = self._ValidateAndSliceInputs(names_to_saveables)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 632, in _ValidateAndSliceInputs\n    variable)\nTypeError: names_to_saveables must be a dict mapping string names to Tensors/Variables. Not a variable: Tensor(\"linear/linear_model/bias_weights:0\", shape=(18,), dtype=float32)\n\n(tensorflow) C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\Lib\\site-packages\\tensorflow\\python\\tools&gt;\n</code></pre>\n<p>The files <code>graph.pbtxt</code> and <code>model.ckpt-100</code> are in attachment.<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1917237/checkpoint.zip\">checkpoint.zip</a></p>", "body_text": "I'm using the following command for freezing the graph\n C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\Lib\\site-packages\\tensorflow\\python\\tools>python freeze_graph.py --input_graph=export/graph.pbtxt --input_binary=false --input_checkpoint=export/model.ckpt-100 --output_graph=model/frozen_graph.pb --output_node_names=output_node\n\nAnd the output is the following\n2018-04-16 22:52:21.381508: I C:\\tf_jenkins\\home\\workspace\\rel-win\\M\\windows\\PY\\35\\tensorflow\\core\\platform\\cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX\nTraceback (most recent call last):\n  File \"freeze_graph.py\", line 350, in <module>\n    app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"freeze_graph.py\", line 249, in main\n    FLAGS.saved_model_tags)\n  File \"freeze_graph.py\", line 239, in freeze_graph\n    input_meta_graph_def, input_saved_model_dir, saved_model_tags.split(\",\"))\n  File \"freeze_graph.py\", line 127, in freeze_graph_with_def_protos\n    saver = saver_lib.Saver(var_list=var_list)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1218, in __init__\n    self.build()\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1227, in build\n    self._build(self._filename, build_save=True, build_restore=True)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1263, in _build\n    build_save=build_save, build_restore=build_restore)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 729, in _build_internal\n    saveables = self._ValidateAndSliceInputs(names_to_saveables)\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 632, in _ValidateAndSliceInputs\n    variable)\nTypeError: names_to_saveables must be a dict mapping string names to Tensors/Variables. Not a variable: Tensor(\"linear/linear_model/bias_weights:0\", shape=(18,), dtype=float32)\n\n(tensorflow) C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\Lib\\site-packages\\tensorflow\\python\\tools>\n\nThe files graph.pbtxt and model.ckpt-100 are in attachment.\ncheckpoint.zip", "body": "I'm using the following command for freezing the graph\r\n```\r\n C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\Lib\\site-packages\\tensorflow\\python\\tools>python freeze_graph.py --input_graph=export/graph.pbtxt --input_binary=false --input_checkpoint=export/model.ckpt-100 --output_graph=model/frozen_graph.pb --output_node_names=output_node\r\n```\r\nAnd the output is the following\r\n```\r\n2018-04-16 22:52:21.381508: I C:\\tf_jenkins\\home\\workspace\\rel-win\\M\\windows\\PY\\35\\tensorflow\\core\\platform\\cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX\r\nTraceback (most recent call last):\r\n  File \"freeze_graph.py\", line 350, in <module>\r\n    app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"freeze_graph.py\", line 249, in main\r\n    FLAGS.saved_model_tags)\r\n  File \"freeze_graph.py\", line 239, in freeze_graph\r\n    input_meta_graph_def, input_saved_model_dir, saved_model_tags.split(\",\"))\r\n  File \"freeze_graph.py\", line 127, in freeze_graph_with_def_protos\r\n    saver = saver_lib.Saver(var_list=var_list)\r\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1218, in __init__\r\n    self.build()\r\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1227, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1263, in _build\r\n    build_save=build_save, build_restore=build_restore)\r\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 729, in _build_internal\r\n    saveables = self._ValidateAndSliceInputs(names_to_saveables)\r\n  File \"C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 632, in _ValidateAndSliceInputs\r\n    variable)\r\nTypeError: names_to_saveables must be a dict mapping string names to Tensors/Variables. Not a variable: Tensor(\"linear/linear_model/bias_weights:0\", shape=(18,), dtype=float32)\r\n\r\n(tensorflow) C:\\Users\\Dima\\Anaconda3\\envs\\tensorflow\\Lib\\site-packages\\tensorflow\\python\\tools>\r\n```\r\n\r\nThe files `graph.pbtxt` and `model.ckpt-100` are in attachment.\r\n[checkpoint.zip](https://github.com/tensorflow/tensorflow/files/1917237/checkpoint.zip)\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/399435249", "html_url": "https://github.com/tensorflow/tensorflow/issues/4018#issuecomment-399435249", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4018", "id": 399435249, "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTQzNTI0OQ==", "user": {"login": "Mte90", "id": 403283, "node_id": "MDQ6VXNlcjQwMzI4Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/403283?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mte90", "html_url": "https://github.com/Mte90", "followers_url": "https://api.github.com/users/Mte90/followers", "following_url": "https://api.github.com/users/Mte90/following{/other_user}", "gists_url": "https://api.github.com/users/Mte90/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mte90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mte90/subscriptions", "organizations_url": "https://api.github.com/users/Mte90/orgs", "repos_url": "https://api.github.com/users/Mte90/repos", "events_url": "https://api.github.com/users/Mte90/events{/privacy}", "received_events_url": "https://api.github.com/users/Mte90/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-22T13:03:14Z", "updated_at": "2018-06-22T13:04:34Z", "author_association": "NONE", "body_html": "<p>I can confirm the issue.<br>\nI hacked a little bit the <code>.tf_configure.bazelrc</code> file with the debian path:</p>\n<pre><code>build --action_env PYTHON_BIN_PATH=\"/usr/bin/python3\"\nbuild --action_env PYTHON_LIB_PATH=\"/usr/lib/python3/dist-packages\"\nbuild --force_python=py3\nbuild --host_force_python=py3\nbuild --python_path=\"/usr/bin/python3\"\nbuild --define with_jemalloc=true\nbuild:gcp --define with_gcp_support=true\nbuild:hdfs --define with_hdfs_support=true\nbuild:s3 --define with_s3_support=true\nbuild:kafka --define with_kafka_support=true\nbuild --define with_xla_support=true\nbuild --define with_gdr_support=true\nbuild --define with_verbs_support=true\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\nbuild --action_env TF_NEED_CUDA=\"1\"\nbuild --action_env CUDA_TOOLKIT_PATH=\"/usr/include/\"\nbuild --action_env TF_CUDA_VERSION=\"9.1\"\nbuild --action_env CUDNN_INSTALL_PATH=\"/usr/lib/x86_64-linux-gnu/\"\nbuild --action_env TF_CUDNN_VERSION=\"7\"\nbuild --action_env TF_NCCL_VERSION=\"1\"\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"\nbuild --action_env TF_CUDA_CLANG=\"1\"\nbuild --action_env TF_DOWNLOAD_CLANG=\"0\"\nbuild --action_env CLANG_CUDA_COMPILER_PATH=\"/usr/bin/clang\"\nbuild --config=cuda_clang\ntest --config=cuda_clang\nbuild --define grpc_no_ares=true\nbuild:opt --copt=-march=native\nbuild:opt --host_copt=-march=native\nbuild:opt --define with_default_optimizations=true\nbuild --copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\nbuild --host_copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\n</code></pre>\n<p>I get when I try bazel:</p>\n<pre><code>ERROR: Skipping '//tensorflow/tools/pip_package:build_pip_package': error loading package 'tensorflow/tools/pip_package': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1142\n                _create_local_cuda_repository(repository_ctx)\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 997, in _create_local_cuda_repository\n                _find_cuda_include_path(repository_ctx, cuda_config)\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 688, in _find_cuda_include_path\n                auto_configure_fail((\"Cannot find cuda.h under %s\" %...))\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 210, in auto_configure_fail\n                fail((\"\\n%sCuda Configuration Error:%...)))\n\nCuda Configuration Error: Cannot find cuda.h under /usr/include\nWARNING: Target pattern parsing failed.\nERROR: error loading package 'tensorflow/tools/pip_package': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1142\n                _create_local_cuda_repository(repository_ctx)\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 997, in _create_local_cuda_repository\n                _find_cuda_include_path(repository_ctx, cuda_config)\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 688, in _find_cuda_include_path\n                auto_configure_fail((\"Cannot find cuda.h under %s\" %...))\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 210, in auto_configure_fail\n                fail((\"\\n%sCuda Configuration Error:%...)))\n\nCuda Configuration Error: Cannot find cuda.h under /usr/include\nINFO: Elapsed time: 0.168s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (0 packages loaded)\n    currently loading: tensorflow/tools/pip_package\n</code></pre>\n<p>Useless to say that the file <code>/usr/include/cuda.h</code> exist but for bazel seems not...</p>", "body_text": "I can confirm the issue.\nI hacked a little bit the .tf_configure.bazelrc file with the debian path:\nbuild --action_env PYTHON_BIN_PATH=\"/usr/bin/python3\"\nbuild --action_env PYTHON_LIB_PATH=\"/usr/lib/python3/dist-packages\"\nbuild --force_python=py3\nbuild --host_force_python=py3\nbuild --python_path=\"/usr/bin/python3\"\nbuild --define with_jemalloc=true\nbuild:gcp --define with_gcp_support=true\nbuild:hdfs --define with_hdfs_support=true\nbuild:s3 --define with_s3_support=true\nbuild:kafka --define with_kafka_support=true\nbuild --define with_xla_support=true\nbuild --define with_gdr_support=true\nbuild --define with_verbs_support=true\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\nbuild --action_env TF_NEED_CUDA=\"1\"\nbuild --action_env CUDA_TOOLKIT_PATH=\"/usr/include/\"\nbuild --action_env TF_CUDA_VERSION=\"9.1\"\nbuild --action_env CUDNN_INSTALL_PATH=\"/usr/lib/x86_64-linux-gnu/\"\nbuild --action_env TF_CUDNN_VERSION=\"7\"\nbuild --action_env TF_NCCL_VERSION=\"1\"\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"\nbuild --action_env TF_CUDA_CLANG=\"1\"\nbuild --action_env TF_DOWNLOAD_CLANG=\"0\"\nbuild --action_env CLANG_CUDA_COMPILER_PATH=\"/usr/bin/clang\"\nbuild --config=cuda_clang\ntest --config=cuda_clang\nbuild --define grpc_no_ares=true\nbuild:opt --copt=-march=native\nbuild:opt --host_copt=-march=native\nbuild:opt --define with_default_optimizations=true\nbuild --copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\nbuild --host_copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\n\nI get when I try bazel:\nERROR: Skipping '//tensorflow/tools/pip_package:build_pip_package': error loading package 'tensorflow/tools/pip_package': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1142\n                _create_local_cuda_repository(repository_ctx)\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 997, in _create_local_cuda_repository\n                _find_cuda_include_path(repository_ctx, cuda_config)\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 688, in _find_cuda_include_path\n                auto_configure_fail((\"Cannot find cuda.h under %s\" %...))\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 210, in auto_configure_fail\n                fail((\"\\n%sCuda Configuration Error:%...)))\n\nCuda Configuration Error: Cannot find cuda.h under /usr/include\nWARNING: Target pattern parsing failed.\nERROR: error loading package 'tensorflow/tools/pip_package': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1142\n                _create_local_cuda_repository(repository_ctx)\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 997, in _create_local_cuda_repository\n                _find_cuda_include_path(repository_ctx, cuda_config)\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 688, in _find_cuda_include_path\n                auto_configure_fail((\"Cannot find cuda.h under %s\" %...))\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 210, in auto_configure_fail\n                fail((\"\\n%sCuda Configuration Error:%...)))\n\nCuda Configuration Error: Cannot find cuda.h under /usr/include\nINFO: Elapsed time: 0.168s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (0 packages loaded)\n    currently loading: tensorflow/tools/pip_package\n\nUseless to say that the file /usr/include/cuda.h exist but for bazel seems not...", "body": "I can confirm the issue.\r\nI hacked a little bit the `.tf_configure.bazelrc` file with the debian path:\r\n\r\n```\r\nbuild --action_env PYTHON_BIN_PATH=\"/usr/bin/python3\"\r\nbuild --action_env PYTHON_LIB_PATH=\"/usr/lib/python3/dist-packages\"\r\nbuild --force_python=py3\r\nbuild --host_force_python=py3\r\nbuild --python_path=\"/usr/bin/python3\"\r\nbuild --define with_jemalloc=true\r\nbuild:gcp --define with_gcp_support=true\r\nbuild:hdfs --define with_hdfs_support=true\r\nbuild:s3 --define with_s3_support=true\r\nbuild:kafka --define with_kafka_support=true\r\nbuild --define with_xla_support=true\r\nbuild --define with_gdr_support=true\r\nbuild --define with_verbs_support=true\r\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\r\nbuild --action_env TF_NEED_CUDA=\"1\"\r\nbuild --action_env CUDA_TOOLKIT_PATH=\"/usr/include/\"\r\nbuild --action_env TF_CUDA_VERSION=\"9.1\"\r\nbuild --action_env CUDNN_INSTALL_PATH=\"/usr/lib/x86_64-linux-gnu/\"\r\nbuild --action_env TF_CUDNN_VERSION=\"7\"\r\nbuild --action_env TF_NCCL_VERSION=\"1\"\r\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"\r\nbuild --action_env TF_CUDA_CLANG=\"1\"\r\nbuild --action_env TF_DOWNLOAD_CLANG=\"0\"\r\nbuild --action_env CLANG_CUDA_COMPILER_PATH=\"/usr/bin/clang\"\r\nbuild --config=cuda_clang\r\ntest --config=cuda_clang\r\nbuild --define grpc_no_ares=true\r\nbuild:opt --copt=-march=native\r\nbuild:opt --host_copt=-march=native\r\nbuild:opt --define with_default_optimizations=true\r\nbuild --copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\r\nbuild --host_copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\r\n```\r\n\r\nI get when I try bazel:\r\n```\r\nERROR: Skipping '//tensorflow/tools/pip_package:build_pip_package': error loading package 'tensorflow/tools/pip_package': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\r\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1142\r\n                _create_local_cuda_repository(repository_ctx)\r\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 997, in _create_local_cuda_repository\r\n                _find_cuda_include_path(repository_ctx, cuda_config)\r\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 688, in _find_cuda_include_path\r\n                auto_configure_fail((\"Cannot find cuda.h under %s\" %...))\r\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 210, in auto_configure_fail\r\n                fail((\"\\n%sCuda Configuration Error:%...)))\r\n\r\nCuda Configuration Error: Cannot find cuda.h under /usr/include\r\nWARNING: Target pattern parsing failed.\r\nERROR: error loading package 'tensorflow/tools/pip_package': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\r\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1142\r\n                _create_local_cuda_repository(repository_ctx)\r\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 997, in _create_local_cuda_repository\r\n                _find_cuda_include_path(repository_ctx, cuda_config)\r\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 688, in _find_cuda_include_path\r\n                auto_configure_fail((\"Cannot find cuda.h under %s\" %...))\r\n        File \"/home/mte90/Desktop/kde/tensorflow/third_party/gpus/cuda_configure.bzl\", line 210, in auto_configure_fail\r\n                fail((\"\\n%sCuda Configuration Error:%...)))\r\n\r\nCuda Configuration Error: Cannot find cuda.h under /usr/include\r\nINFO: Elapsed time: 0.168s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\n    currently loading: tensorflow/tools/pip_package\r\n```\r\n\r\nUseless to say that the file `/usr/include/cuda.h` exist but for bazel seems not..."}
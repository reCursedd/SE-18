{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21881", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21881/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21881/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21881/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21881", "id": 354080209, "node_id": "MDU6SXNzdWUzNTQwODAyMDk=", "number": 21881, "title": "Tensorflow nearly 2 times slower than Pytorch in training!", "user": {"login": "Coderx7", "id": 5382892, "node_id": "MDQ6VXNlcjUzODI4OTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/5382892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Coderx7", "html_url": "https://github.com/Coderx7", "followers_url": "https://api.github.com/users/Coderx7/followers", "following_url": "https://api.github.com/users/Coderx7/following{/other_user}", "gists_url": "https://api.github.com/users/Coderx7/gists{/gist_id}", "starred_url": "https://api.github.com/users/Coderx7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Coderx7/subscriptions", "organizations_url": "https://api.github.com/users/Coderx7/orgs", "repos_url": "https://api.github.com/users/Coderx7/repos", "events_url": "https://api.github.com/users/Coderx7/events{/privacy}", "received_events_url": "https://api.github.com/users/Coderx7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "tfboyd", "id": 23486130, "node_id": "MDQ6VXNlcjIzNDg2MTMw", "avatar_url": "https://avatars1.githubusercontent.com/u/23486130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tfboyd", "html_url": "https://github.com/tfboyd", "followers_url": "https://api.github.com/users/tfboyd/followers", "following_url": "https://api.github.com/users/tfboyd/following{/other_user}", "gists_url": "https://api.github.com/users/tfboyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tfboyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tfboyd/subscriptions", "organizations_url": "https://api.github.com/users/tfboyd/orgs", "repos_url": "https://api.github.com/users/tfboyd/repos", "events_url": "https://api.github.com/users/tfboyd/events{/privacy}", "received_events_url": "https://api.github.com/users/tfboyd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tfboyd", "id": 23486130, "node_id": "MDQ6VXNlcjIzNDg2MTMw", "avatar_url": "https://avatars1.githubusercontent.com/u/23486130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tfboyd", "html_url": "https://github.com/tfboyd", "followers_url": "https://api.github.com/users/tfboyd/followers", "following_url": "https://api.github.com/users/tfboyd/following{/other_user}", "gists_url": "https://api.github.com/users/tfboyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tfboyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tfboyd/subscriptions", "organizations_url": "https://api.github.com/users/tfboyd/orgs", "repos_url": "https://api.github.com/users/tfboyd/repos", "events_url": "https://api.github.com/users/tfboyd/events{/privacy}", "received_events_url": "https://api.github.com/users/tfboyd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2018-08-26T09:26:46Z", "updated_at": "2018-11-22T18:58:16Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 16.04</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>: -</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.7.0 and 1.10.1</li>\n<li><strong>Python version</strong>: 3.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>:-</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:-</li>\n<li><strong>CUDA/cuDNN version</strong>:9.0/7.0 and 7.1</li>\n<li><strong>GPU model and memory</strong>: GTX1080/8Gig</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I was trying to train the same network on both <code>Tensorflow</code> and <code>Pytorch</code> frameworks and noticed <code>Tensorflow</code> is nearly <strong>2x slower</strong> than <code>Pytorch</code>!<br>\nWhile each epoch in <code>Pytorch</code> takes roughly about <strong>50</strong> seconds, in <code>Tensorflow</code> it takes <strong>90</strong> seconds!<br>\nI initially tried Stackoverflow, but after seeing a similar issue (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"204598482\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7187\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7187/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7187\">#7187</a> around a year ago, which reported the same performance issues and ultimately got solved, I changed my mind and thought it should be a bug.<br>\nI uploaded the code snippets regarding Tensorflow (which are taken from <a href=\"https://github.com/tensorflow/models/tree/master/official/resnet\">official TF model repository-resnet </a> and changed to be used with the new architecture(nearly everything is intact except minor changes needed to use the new architecture (simpleNet, which is a very simple convolutional architecture)).<br>\nIt should be noted that, the points in the previous similar issue that solved the performance discrepancy are not valid in this one. since the code base is changed and has been updated according to the latest improvements in TF.<br>\nThings such as not using feed_dict, or offloading the input on to the CPU instead of GPU and setting <code>TF_ENABLE_WINOGRAD_NONFUSED </code>flags are already addressed in the new example which is used for this case, however the performance issue still persists.</p>\n<h3>Source code / logs</h3>\n<p>Here are the code snippets :</p>\n<blockquote>\n<p><a href=\"https://paste.ee/p/pN07i#s=2\" rel=\"nofollow\">simple_model.py</a><br>\n<a href=\"https://paste.ee/p/pN07i#section0\" rel=\"nofollow\">cifar10_main.py</a><br>\n<a href=\"https://paste.ee/p/pN07i#s=1\" rel=\"nofollow\">simplenet_run_loop.py</a></p>\n</blockquote>\n<p>Here are the logs for Pytorch and tensorflow respectively :</p>\n<p><strong>Pytorch (v0.4)</strong> :</p>\n<pre><code>==&gt;&gt;[2018-08-19 00:00:26] [Epoch=000/450] [Need: 00:00:00] [learning_rate=0.100000] [Best : Accuracy=0.00, Error=100.00]\n  Epoch: [000][000/500]   Time 1.345 (1.345)   Data 0.089 (0.089)   Loss 4.8846 (4.8846)   Prec@1 0.000 (0.000)   Prec@5 4.000 (4.000)   [2018-08-19 00:00:28]\n  Epoch: [000][200/500]   Time 0.089 (0.096)   Data 0.000 (0.001)   Loss 4.0047 (4.3586)   Prec@1 6.000 (3.771)   Prec@5 28.000 (14.930)   [2018-08-19 00:00:46]\n  Epoch: [000][400/500]   Time 0.089 (0.093)   Data 0.000 (0.000)   Loss 3.9328 (4.1781)   Prec@1 9.000 (5.519)   Prec@5 26.000 (20.142)   [2018-08-19 00:01:04]\n  **Train** Prec@1 6.352 Prec@5 22.334 Error@1 93.648\n  **Test** Prec@1 8.520 Prec@5 31.600 Error@1 91.480\n\n==&gt;&gt;[2018-08-19 00:01:17] [Epoch=001/450] [Need: 06:07:54] [learning_rate=0.100000] [Best : Accuracy=8.52, Error=91.48]\n  Epoch: [001][000/500]   Time 0.128 (0.128)   Data 0.086 (0.086)   Loss 3.7810 (3.7810)   Prec@1 9.000 (9.000)   Prec@5 34.000 (34.000)   [2018-08-19 00:01:17]\n  Epoch: [001][200/500]   Time 0.090 (0.090)   Data 0.000 (0.001)   Loss 3.5385 (3.7109)   Prec@1 18.000 (11.517)   Prec@5 39.000 (34.861)   [2018-08-19 00:01:35]\n  Epoch: [001][400/500]   Time 0.088 (0.090)   Data 0.000 (0.000)   Loss 3.6088 (3.6151)   Prec@1 11.000 (13.274)   Prec@5 34.000 (38.102)   [2018-08-19 00:01:54]\n  **Train** Prec@1 14.048 Prec@5 39.416 Error@1 85.952\n  **Test** Prec@1 19.110 Prec@5 45.950 Error@1 80.890\n\n==&gt;&gt;[2018-08-19 00:02:07] [Epoch=002/450] [Need: 06:10:38] [learning_rate=0.100000] [Best : Accuracy=19.11, Error=80.89]\n  Epoch: [002][000/500]   Time 0.133 (0.133)   Data 0.086 (0.086)   Loss 3.4438 (3.4438)   Prec@1 17.000 (17.000)   Prec@5 45.000 (45.000)   [2018-08-19 00:02:07]\n  Epoch: [002][200/500]   Time 0.089 (0.091)   Data 0.000 (0.001)   Loss 3.1025 (3.2688)   Prec@1 26.000 (19.721)   Prec@5 56.000 (48.085)   [2018-08-19 00:02:26]\n  Epoch: [002][400/500]   Time 0.092 (0.091)   Data 0.000 (0.000)   Loss 2.9271 (3.1983)   Prec@1 24.000 (20.998)   Prec@5 57.000 (50.125)   [2018-08-19 00:02:44]\n  **Train** Prec@1 21.658 Prec@5 50.980 Error@1 78.342\n  **Test** Prec@1 26.430 Prec@5 56.030 Error@1 73.570\n\n==&gt;&gt;[2018-08-19 00:02:57] [Epoch=003/450] [Need: 06:10:40] [learning_rate=0.100000] [Best : Accuracy=26.43, Error=73.57]\n  Epoch: [003][000/500]   Time 0.136 (0.136)   Data 0.087 (0.087)   Loss 2.8432 (2.8432)   Prec@1 23.000 (23.000)   Prec@5 55.000 (55.000)   [2018-08-19 00:02:57]\n  Epoch: [003][200/500]   Time 0.092 (0.091)   Data 0.000 (0.001)   Loss 2.8233 (2.8715)   Prec@1 33.000 (26.567)   Prec@5 62.000 (58.433)   [2018-08-19 00:03:16]\n  Epoch: [003][400/500]   Time 0.092 (0.091)   Data 0.000 (0.000)   Loss 2.6975 (2.8040)   Prec@1 29.000 (28.047)   Prec@5 58.000 (60.125)   [2018-08-19 00:03:34]\n  **Train** Prec@1 28.784 Prec@5 60.932 Error@1 71.216\n  **Test** Prec@1 30.960 Prec@5 61.810 Error@1 69.040\n</code></pre>\n<p><strong>Tensorflow( v1.7.0)</strong> :</p>\n<pre><code>totalMemory: 7.93GiB freeMemory: 7.38GiB\n2018-08-26 09:06:38.766280: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:06:38.929447: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:06:38.929480: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:06:38.929484: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:06:38.929650: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/device:GPU:0 with 7131 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Benchmark run: {'model_name': 'simpnet', 'machine_config': {'cpu_info': {'num_cores': 8, 'cpu_info': 'Intel(R) Core(TM) i7-4790K CPU @ 4.00GHz', 'mhz_per_cpu': 4000.0}, 'gpu_info': {'count': 1, 'model': 'GeForce GTX 1080'}, 'memory_total': 20986626048, 'memory_available': 14860541952}, 'run_date': '2018-08-26T04:36:38.596702Z', 'tensorflow_version': {'version': '1.7.0', 'git_hash': 'v1.7.0-3-g024aecf414'}, 'tensorflow_environment_variables': [{'name': 'TF_ENABLE_WINOGRAD_NONFUSED', 'value': '1'}]}\nINFO:tensorflow:Starting a training cycle: 0/250\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Create CheckpointSaverHook.\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:06:40.685552: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:06:40.685610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:06:40.685617: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:06:40.685630: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:06:40.685744: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Saving checkpoints for 1 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 7.7181897, train_accuracy = 0.09\nINFO:tensorflow:loss = 20.531982, step = 0\nINFO:tensorflow:global_step/sec: 5.5106\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.26069, train_accuracy = 0.105 (18.147 sec)\nINFO:tensorflow:loss = 13.960868, step = 100 (18.147 sec)\nINFO:tensorflow:global_step/sec: 5.42846\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.291137, train_accuracy = 0.10666667 (18.421 sec)\nINFO:tensorflow:loss = 12.874262, step = 200 (18.421 sec)\nINFO:tensorflow:global_step/sec: 5.62853\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.1555672, train_accuracy = 0.1175 (17.767 sec)\nINFO:tensorflow:loss = 11.73109, step = 300 (17.767 sec)\nINFO:tensorflow:global_step/sec: 5.45977\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.0706115, train_accuracy = 0.122 (18.316 sec)\nINFO:tensorflow:loss = 10.739094, step = 400 (18.316 sec)\nINFO:tensorflow:Saving checkpoints for 500 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:Loss for final step: 9.72249.\nINFO:tensorflow:Starting to evaluate.\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Starting evaluation at 2018-08-26-04:38:16\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:08:16.838937: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:08:16.838968: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:08:16.838986: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:08:16.838989: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:08:16.839099: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-500\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Finished evaluation at 2018-08-26-04:38:22\nINFO:tensorflow:Saving dict for global step 500: accuracy = 0.2181, global_step = 500, loss = 9.815871\nINFO:tensorflow:Benchmark metric: Name accuracy, value 0, unit None, global_step 500, extras []\nINFO:tensorflow:Benchmark metric: Name loss, value 9, unit None, global_step 500, extras []\nINFO:tensorflow:Starting a training cycle: 1/250\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Create CheckpointSaverHook.\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:08:23.994577: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:08:23.994610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:08:23.994625: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:08:23.994630: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:08:23.994726: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-500\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Saving checkpoints for 501 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.831348, train_accuracy = 0.23\nINFO:tensorflow:loss = 9.679985, step = 500\nINFO:tensorflow:global_step/sec: 5.3539\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.8214886, train_accuracy = 0.25 (18.678 sec)\nINFO:tensorflow:loss = 8.9299, step = 600 (18.678 sec)\nINFO:tensorflow:global_step/sec: 5.49204\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.7747709, train_accuracy = 0.26666668 (18.208 sec)\nINFO:tensorflow:loss = 8.215595, step = 700 (18.208 sec)\nINFO:tensorflow:global_step/sec: 5.48954\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.7076583, train_accuracy = 0.275 (18.216 sec)\nINFO:tensorflow:loss = 7.5460052, step = 800 (18.216 sec)\nINFO:tensorflow:global_step/sec: 5.65214\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.6106825, train_accuracy = 0.286 (17.692 sec)\nINFO:tensorflow:loss = 6.904671, step = 900 (17.692 sec)\nINFO:tensorflow:Saving checkpoints for 1000 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:Loss for final step: 6.5854077.\nINFO:tensorflow:Starting to evaluate.\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Starting evaluation at 2018-08-26-04:39:57\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:09:57.431671: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:09:57.431702: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:09:57.431718: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:09:57.431722: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:09:57.431814: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-1000\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Finished evaluation at 2018-08-26-04:40:02\nINFO:tensorflow:Saving dict for global step 1000: accuracy = 0.264, global_step = 1000, loss = 6.684446\nINFO:tensorflow:Benchmark metric: Name accuracy, value 0, unit None, global_step 1000, extras []\nINFO:tensorflow:Benchmark metric: Name loss, value 6, unit None, global_step 1000, extras []\nINFO:tensorflow:Starting a training cycle: 2/250\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Create CheckpointSaverHook.\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:10:04.247883: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:10:04.247914: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:10:04.247930: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:10:04.247934: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:10:04.248028: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-1000\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Saving checkpoints for 1001 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.7071365, train_accuracy = 0.32\nINFO:tensorflow:loss = 6.5100193, step = 1000\nINFO:tensorflow:global_step/sec: 5.54579\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.5869155, train_accuracy = 0.335 (18.032 sec)\nINFO:tensorflow:loss = 5.9459677, step = 1100 (18.032 sec)\nINFO:tensorflow:global_step/sec: 5.69552\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.754588, train_accuracy = 0.31 (17.558 sec)\nINFO:tensorflow:loss = 5.7136836, step = 1200 (17.558 sec)\nINFO:tensorflow:global_step/sec: 5.69235\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.6495434, train_accuracy = 0.3225 (17.568 sec)\nINFO:tensorflow:loss = 5.2463627, step = 1300 (17.568 sec)\nINFO:tensorflow:global_step/sec: 5.60754\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.6227012, train_accuracy = 0.326 (17.833 sec)\nINFO:tensorflow:loss = 4.8923674, step = 1400 (17.833 sec)\nINFO:tensorflow:Saving checkpoints for 1500 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:Loss for final step: 4.7713437.\nINFO:tensorflow:Starting to evaluate.\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Starting evaluation at 2018-08-26-04:41:36\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:11:36.521245: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:11:36.521277: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:11:36.521285: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:11:36.521290: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:11:36.521385: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-1500\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Finished evaluation at 2018-08-26-04:41:41\nINFO:tensorflow:Saving dict for global step 1500: accuracy = 0.3168, global_step = 1500, loss = 4.7169304\nINFO:tensorflow:Benchmark metric: Name accuracy, value 0, unit None, global_step 1500, extras []\nINFO:tensorflow:Benchmark metric: Name loss, value 4, unit None, global_step 1500, extras []\nINFO:tensorflow:Starting a training cycle: 3/250\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Create CheckpointSaverHook.\nINFO:tensorflow:Graph was finalized.\n</code></pre>\n<p><strong>Extra info</strong> :<br>\nOs: Ubuntu 16.04<br>\nGPU: GTX1080<br>\nCPU: Intel 4790K<br>\nRAM : 20Gig<br>\nGPU Utilization : 99%</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: -\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): 1.7.0 and 1.10.1\nPython version: 3.6\nBazel version (if compiling from source):-\nGCC/Compiler version (if compiling from source):-\nCUDA/cuDNN version:9.0/7.0 and 7.1\nGPU model and memory: GTX1080/8Gig\nExact command to reproduce:\n\nDescribe the problem\nI was trying to train the same network on both Tensorflow and Pytorch frameworks and noticed Tensorflow is nearly 2x slower than Pytorch!\nWhile each epoch in Pytorch takes roughly about 50 seconds, in Tensorflow it takes 90 seconds!\nI initially tried Stackoverflow, but after seeing a similar issue (#7187 around a year ago, which reported the same performance issues and ultimately got solved, I changed my mind and thought it should be a bug.\nI uploaded the code snippets regarding Tensorflow (which are taken from official TF model repository-resnet  and changed to be used with the new architecture(nearly everything is intact except minor changes needed to use the new architecture (simpleNet, which is a very simple convolutional architecture)).\nIt should be noted that, the points in the previous similar issue that solved the performance discrepancy are not valid in this one. since the code base is changed and has been updated according to the latest improvements in TF.\nThings such as not using feed_dict, or offloading the input on to the CPU instead of GPU and setting TF_ENABLE_WINOGRAD_NONFUSED flags are already addressed in the new example which is used for this case, however the performance issue still persists.\nSource code / logs\nHere are the code snippets :\n\nsimple_model.py\ncifar10_main.py\nsimplenet_run_loop.py\n\nHere are the logs for Pytorch and tensorflow respectively :\nPytorch (v0.4) :\n==>>[2018-08-19 00:00:26] [Epoch=000/450] [Need: 00:00:00] [learning_rate=0.100000] [Best : Accuracy=0.00, Error=100.00]\n  Epoch: [000][000/500]   Time 1.345 (1.345)   Data 0.089 (0.089)   Loss 4.8846 (4.8846)   Prec@1 0.000 (0.000)   Prec@5 4.000 (4.000)   [2018-08-19 00:00:28]\n  Epoch: [000][200/500]   Time 0.089 (0.096)   Data 0.000 (0.001)   Loss 4.0047 (4.3586)   Prec@1 6.000 (3.771)   Prec@5 28.000 (14.930)   [2018-08-19 00:00:46]\n  Epoch: [000][400/500]   Time 0.089 (0.093)   Data 0.000 (0.000)   Loss 3.9328 (4.1781)   Prec@1 9.000 (5.519)   Prec@5 26.000 (20.142)   [2018-08-19 00:01:04]\n  **Train** Prec@1 6.352 Prec@5 22.334 Error@1 93.648\n  **Test** Prec@1 8.520 Prec@5 31.600 Error@1 91.480\n\n==>>[2018-08-19 00:01:17] [Epoch=001/450] [Need: 06:07:54] [learning_rate=0.100000] [Best : Accuracy=8.52, Error=91.48]\n  Epoch: [001][000/500]   Time 0.128 (0.128)   Data 0.086 (0.086)   Loss 3.7810 (3.7810)   Prec@1 9.000 (9.000)   Prec@5 34.000 (34.000)   [2018-08-19 00:01:17]\n  Epoch: [001][200/500]   Time 0.090 (0.090)   Data 0.000 (0.001)   Loss 3.5385 (3.7109)   Prec@1 18.000 (11.517)   Prec@5 39.000 (34.861)   [2018-08-19 00:01:35]\n  Epoch: [001][400/500]   Time 0.088 (0.090)   Data 0.000 (0.000)   Loss 3.6088 (3.6151)   Prec@1 11.000 (13.274)   Prec@5 34.000 (38.102)   [2018-08-19 00:01:54]\n  **Train** Prec@1 14.048 Prec@5 39.416 Error@1 85.952\n  **Test** Prec@1 19.110 Prec@5 45.950 Error@1 80.890\n\n==>>[2018-08-19 00:02:07] [Epoch=002/450] [Need: 06:10:38] [learning_rate=0.100000] [Best : Accuracy=19.11, Error=80.89]\n  Epoch: [002][000/500]   Time 0.133 (0.133)   Data 0.086 (0.086)   Loss 3.4438 (3.4438)   Prec@1 17.000 (17.000)   Prec@5 45.000 (45.000)   [2018-08-19 00:02:07]\n  Epoch: [002][200/500]   Time 0.089 (0.091)   Data 0.000 (0.001)   Loss 3.1025 (3.2688)   Prec@1 26.000 (19.721)   Prec@5 56.000 (48.085)   [2018-08-19 00:02:26]\n  Epoch: [002][400/500]   Time 0.092 (0.091)   Data 0.000 (0.000)   Loss 2.9271 (3.1983)   Prec@1 24.000 (20.998)   Prec@5 57.000 (50.125)   [2018-08-19 00:02:44]\n  **Train** Prec@1 21.658 Prec@5 50.980 Error@1 78.342\n  **Test** Prec@1 26.430 Prec@5 56.030 Error@1 73.570\n\n==>>[2018-08-19 00:02:57] [Epoch=003/450] [Need: 06:10:40] [learning_rate=0.100000] [Best : Accuracy=26.43, Error=73.57]\n  Epoch: [003][000/500]   Time 0.136 (0.136)   Data 0.087 (0.087)   Loss 2.8432 (2.8432)   Prec@1 23.000 (23.000)   Prec@5 55.000 (55.000)   [2018-08-19 00:02:57]\n  Epoch: [003][200/500]   Time 0.092 (0.091)   Data 0.000 (0.001)   Loss 2.8233 (2.8715)   Prec@1 33.000 (26.567)   Prec@5 62.000 (58.433)   [2018-08-19 00:03:16]\n  Epoch: [003][400/500]   Time 0.092 (0.091)   Data 0.000 (0.000)   Loss 2.6975 (2.8040)   Prec@1 29.000 (28.047)   Prec@5 58.000 (60.125)   [2018-08-19 00:03:34]\n  **Train** Prec@1 28.784 Prec@5 60.932 Error@1 71.216\n  **Test** Prec@1 30.960 Prec@5 61.810 Error@1 69.040\n\nTensorflow( v1.7.0) :\ntotalMemory: 7.93GiB freeMemory: 7.38GiB\n2018-08-26 09:06:38.766280: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:06:38.929447: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:06:38.929480: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:06:38.929484: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:06:38.929650: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Benchmark run: {'model_name': 'simpnet', 'machine_config': {'cpu_info': {'num_cores': 8, 'cpu_info': 'Intel(R) Core(TM) i7-4790K CPU @ 4.00GHz', 'mhz_per_cpu': 4000.0}, 'gpu_info': {'count': 1, 'model': 'GeForce GTX 1080'}, 'memory_total': 20986626048, 'memory_available': 14860541952}, 'run_date': '2018-08-26T04:36:38.596702Z', 'tensorflow_version': {'version': '1.7.0', 'git_hash': 'v1.7.0-3-g024aecf414'}, 'tensorflow_environment_variables': [{'name': 'TF_ENABLE_WINOGRAD_NONFUSED', 'value': '1'}]}\nINFO:tensorflow:Starting a training cycle: 0/250\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Create CheckpointSaverHook.\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:06:40.685552: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:06:40.685610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:06:40.685617: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:06:40.685630: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:06:40.685744: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Saving checkpoints for 1 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 7.7181897, train_accuracy = 0.09\nINFO:tensorflow:loss = 20.531982, step = 0\nINFO:tensorflow:global_step/sec: 5.5106\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.26069, train_accuracy = 0.105 (18.147 sec)\nINFO:tensorflow:loss = 13.960868, step = 100 (18.147 sec)\nINFO:tensorflow:global_step/sec: 5.42846\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.291137, train_accuracy = 0.10666667 (18.421 sec)\nINFO:tensorflow:loss = 12.874262, step = 200 (18.421 sec)\nINFO:tensorflow:global_step/sec: 5.62853\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.1555672, train_accuracy = 0.1175 (17.767 sec)\nINFO:tensorflow:loss = 11.73109, step = 300 (17.767 sec)\nINFO:tensorflow:global_step/sec: 5.45977\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.0706115, train_accuracy = 0.122 (18.316 sec)\nINFO:tensorflow:loss = 10.739094, step = 400 (18.316 sec)\nINFO:tensorflow:Saving checkpoints for 500 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:Loss for final step: 9.72249.\nINFO:tensorflow:Starting to evaluate.\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Starting evaluation at 2018-08-26-04:38:16\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:08:16.838937: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:08:16.838968: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:08:16.838986: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:08:16.838989: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:08:16.839099: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-500\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Finished evaluation at 2018-08-26-04:38:22\nINFO:tensorflow:Saving dict for global step 500: accuracy = 0.2181, global_step = 500, loss = 9.815871\nINFO:tensorflow:Benchmark metric: Name accuracy, value 0, unit None, global_step 500, extras []\nINFO:tensorflow:Benchmark metric: Name loss, value 9, unit None, global_step 500, extras []\nINFO:tensorflow:Starting a training cycle: 1/250\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Create CheckpointSaverHook.\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:08:23.994577: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:08:23.994610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:08:23.994625: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:08:23.994630: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:08:23.994726: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-500\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Saving checkpoints for 501 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.831348, train_accuracy = 0.23\nINFO:tensorflow:loss = 9.679985, step = 500\nINFO:tensorflow:global_step/sec: 5.3539\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.8214886, train_accuracy = 0.25 (18.678 sec)\nINFO:tensorflow:loss = 8.9299, step = 600 (18.678 sec)\nINFO:tensorflow:global_step/sec: 5.49204\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.7747709, train_accuracy = 0.26666668 (18.208 sec)\nINFO:tensorflow:loss = 8.215595, step = 700 (18.208 sec)\nINFO:tensorflow:global_step/sec: 5.48954\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.7076583, train_accuracy = 0.275 (18.216 sec)\nINFO:tensorflow:loss = 7.5460052, step = 800 (18.216 sec)\nINFO:tensorflow:global_step/sec: 5.65214\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.6106825, train_accuracy = 0.286 (17.692 sec)\nINFO:tensorflow:loss = 6.904671, step = 900 (17.692 sec)\nINFO:tensorflow:Saving checkpoints for 1000 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:Loss for final step: 6.5854077.\nINFO:tensorflow:Starting to evaluate.\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Starting evaluation at 2018-08-26-04:39:57\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:09:57.431671: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:09:57.431702: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:09:57.431718: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:09:57.431722: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:09:57.431814: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-1000\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Finished evaluation at 2018-08-26-04:40:02\nINFO:tensorflow:Saving dict for global step 1000: accuracy = 0.264, global_step = 1000, loss = 6.684446\nINFO:tensorflow:Benchmark metric: Name accuracy, value 0, unit None, global_step 1000, extras []\nINFO:tensorflow:Benchmark metric: Name loss, value 6, unit None, global_step 1000, extras []\nINFO:tensorflow:Starting a training cycle: 2/250\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Create CheckpointSaverHook.\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:10:04.247883: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:10:04.247914: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:10:04.247930: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:10:04.247934: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:10:04.248028: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-1000\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Saving checkpoints for 1001 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.7071365, train_accuracy = 0.32\nINFO:tensorflow:loss = 6.5100193, step = 1000\nINFO:tensorflow:global_step/sec: 5.54579\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.5869155, train_accuracy = 0.335 (18.032 sec)\nINFO:tensorflow:loss = 5.9459677, step = 1100 (18.032 sec)\nINFO:tensorflow:global_step/sec: 5.69552\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.754588, train_accuracy = 0.31 (17.558 sec)\nINFO:tensorflow:loss = 5.7136836, step = 1200 (17.558 sec)\nINFO:tensorflow:global_step/sec: 5.69235\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.6495434, train_accuracy = 0.3225 (17.568 sec)\nINFO:tensorflow:loss = 5.2463627, step = 1300 (17.568 sec)\nINFO:tensorflow:global_step/sec: 5.60754\nINFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.6227012, train_accuracy = 0.326 (17.833 sec)\nINFO:tensorflow:loss = 4.8923674, step = 1400 (17.833 sec)\nINFO:tensorflow:Saving checkpoints for 1500 into /tmp/cifar10_model/model.ckpt.\nINFO:tensorflow:Loss for final step: 4.7713437.\nINFO:tensorflow:Starting to evaluate.\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Starting evaluation at 2018-08-26-04:41:36\nINFO:tensorflow:Graph was finalized.\n2018-08-26 09:11:36.521245: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\n2018-08-26 09:11:36.521277: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-08-26 09:11:36.521285: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \n2018-08-26 09:11:36.521290: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \n2018-08-26 09:11:36.521385: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nINFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-1500\nINFO:tensorflow:Running local_init_op.\nINFO:tensorflow:Done running local_init_op.\nINFO:tensorflow:Finished evaluation at 2018-08-26-04:41:41\nINFO:tensorflow:Saving dict for global step 1500: accuracy = 0.3168, global_step = 1500, loss = 4.7169304\nINFO:tensorflow:Benchmark metric: Name accuracy, value 0, unit None, global_step 1500, extras []\nINFO:tensorflow:Benchmark metric: Name loss, value 4, unit None, global_step 1500, extras []\nINFO:tensorflow:Starting a training cycle: 3/250\nINFO:tensorflow:Calling model_fn.\ndata_format:  channels_first\nINFO:tensorflow:Done calling model_fn.\nINFO:tensorflow:Create CheckpointSaverHook.\nINFO:tensorflow:Graph was finalized.\n\nExtra info :\nOs: Ubuntu 16.04\nGPU: GTX1080\nCPU: Intel 4790K\nRAM : 20Gig\nGPU Utilization : 99%", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: -\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.7.0 and 1.10.1\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**:-\r\n- **GCC/Compiler version (if compiling from source)**:-\r\n- **CUDA/cuDNN version**:9.0/7.0 and 7.1\r\n- **GPU model and memory**: GTX1080/8Gig\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nI was trying to train the same network on both `Tensorflow` and `Pytorch` frameworks and noticed `Tensorflow` is nearly **2x slower** than `Pytorch`!  \r\nWhile each epoch in `Pytorch` takes roughly about **50** seconds, in `Tensorflow` it takes **90** seconds!     \r\nI initially tried Stackoverflow, but after seeing a similar issue (https://github.com/tensorflow/tensorflow/issues/7187)from around a year ago, which reported the same performance issues and ultimately got solved, I changed my mind and thought it should be a bug.  \r\nI uploaded the code snippets regarding Tensorflow (which are taken from [official TF model repository-resnet ][1] and changed to be used with the new architecture(nearly everything is intact except minor changes needed to use the new architecture (simpleNet, which is a very simple convolutional architecture)).  \r\nIt should be noted that, the points in the previous similar issue that solved the performance discrepancy are not valid in this one. since the code base is changed and has been updated according to the latest improvements in TF. \r\nThings such as not using feed_dict, or offloading the input on to the CPU instead of GPU and setting `TF_ENABLE_WINOGRAD_NONFUSED `flags are already addressed in the new example which is used for this case, however the performance issue still persists. \r\n\r\n### Source code / logs \r\n\r\nHere are the code snippets :     \r\n\r\n> [simple_model.py][2]   \r\n> [cifar10_main.py][3]      \r\n> [simplenet_run_loop.py][4]\r\n\r\nHere are the logs for Pytorch and tensorflow respectively :\r\n\r\n**Pytorch (v0.4)** :\r\n\r\n    ==>>[2018-08-19 00:00:26] [Epoch=000/450] [Need: 00:00:00] [learning_rate=0.100000] [Best : Accuracy=0.00, Error=100.00]\r\n      Epoch: [000][000/500]   Time 1.345 (1.345)   Data 0.089 (0.089)   Loss 4.8846 (4.8846)   Prec@1 0.000 (0.000)   Prec@5 4.000 (4.000)   [2018-08-19 00:00:28]\r\n      Epoch: [000][200/500]   Time 0.089 (0.096)   Data 0.000 (0.001)   Loss 4.0047 (4.3586)   Prec@1 6.000 (3.771)   Prec@5 28.000 (14.930)   [2018-08-19 00:00:46]\r\n      Epoch: [000][400/500]   Time 0.089 (0.093)   Data 0.000 (0.000)   Loss 3.9328 (4.1781)   Prec@1 9.000 (5.519)   Prec@5 26.000 (20.142)   [2018-08-19 00:01:04]\r\n      **Train** Prec@1 6.352 Prec@5 22.334 Error@1 93.648\r\n      **Test** Prec@1 8.520 Prec@5 31.600 Error@1 91.480\r\n    \r\n    ==>>[2018-08-19 00:01:17] [Epoch=001/450] [Need: 06:07:54] [learning_rate=0.100000] [Best : Accuracy=8.52, Error=91.48]\r\n      Epoch: [001][000/500]   Time 0.128 (0.128)   Data 0.086 (0.086)   Loss 3.7810 (3.7810)   Prec@1 9.000 (9.000)   Prec@5 34.000 (34.000)   [2018-08-19 00:01:17]\r\n      Epoch: [001][200/500]   Time 0.090 (0.090)   Data 0.000 (0.001)   Loss 3.5385 (3.7109)   Prec@1 18.000 (11.517)   Prec@5 39.000 (34.861)   [2018-08-19 00:01:35]\r\n      Epoch: [001][400/500]   Time 0.088 (0.090)   Data 0.000 (0.000)   Loss 3.6088 (3.6151)   Prec@1 11.000 (13.274)   Prec@5 34.000 (38.102)   [2018-08-19 00:01:54]\r\n      **Train** Prec@1 14.048 Prec@5 39.416 Error@1 85.952\r\n      **Test** Prec@1 19.110 Prec@5 45.950 Error@1 80.890\r\n    \r\n    ==>>[2018-08-19 00:02:07] [Epoch=002/450] [Need: 06:10:38] [learning_rate=0.100000] [Best : Accuracy=19.11, Error=80.89]\r\n      Epoch: [002][000/500]   Time 0.133 (0.133)   Data 0.086 (0.086)   Loss 3.4438 (3.4438)   Prec@1 17.000 (17.000)   Prec@5 45.000 (45.000)   [2018-08-19 00:02:07]\r\n      Epoch: [002][200/500]   Time 0.089 (0.091)   Data 0.000 (0.001)   Loss 3.1025 (3.2688)   Prec@1 26.000 (19.721)   Prec@5 56.000 (48.085)   [2018-08-19 00:02:26]\r\n      Epoch: [002][400/500]   Time 0.092 (0.091)   Data 0.000 (0.000)   Loss 2.9271 (3.1983)   Prec@1 24.000 (20.998)   Prec@5 57.000 (50.125)   [2018-08-19 00:02:44]\r\n      **Train** Prec@1 21.658 Prec@5 50.980 Error@1 78.342\r\n      **Test** Prec@1 26.430 Prec@5 56.030 Error@1 73.570\r\n    \r\n    ==>>[2018-08-19 00:02:57] [Epoch=003/450] [Need: 06:10:40] [learning_rate=0.100000] [Best : Accuracy=26.43, Error=73.57]\r\n      Epoch: [003][000/500]   Time 0.136 (0.136)   Data 0.087 (0.087)   Loss 2.8432 (2.8432)   Prec@1 23.000 (23.000)   Prec@5 55.000 (55.000)   [2018-08-19 00:02:57]\r\n      Epoch: [003][200/500]   Time 0.092 (0.091)   Data 0.000 (0.001)   Loss 2.8233 (2.8715)   Prec@1 33.000 (26.567)   Prec@5 62.000 (58.433)   [2018-08-19 00:03:16]\r\n      Epoch: [003][400/500]   Time 0.092 (0.091)   Data 0.000 (0.000)   Loss 2.6975 (2.8040)   Prec@1 29.000 (28.047)   Prec@5 58.000 (60.125)   [2018-08-19 00:03:34]\r\n      **Train** Prec@1 28.784 Prec@5 60.932 Error@1 71.216\r\n      **Test** Prec@1 30.960 Prec@5 61.810 Error@1 69.040\r\n\r\n\r\n\r\n**Tensorflow( v1.7.0)** :\r\n\r\n    totalMemory: 7.93GiB freeMemory: 7.38GiB\r\n    2018-08-26 09:06:38.766280: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\r\n    2018-08-26 09:06:38.929447: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n    2018-08-26 09:06:38.929480: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \r\n    2018-08-26 09:06:38.929484: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \r\n    2018-08-26 09:06:38.929650: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n    INFO:tensorflow:Benchmark run: {'model_name': 'simpnet', 'machine_config': {'cpu_info': {'num_cores': 8, 'cpu_info': 'Intel(R) Core(TM) i7-4790K CPU @ 4.00GHz', 'mhz_per_cpu': 4000.0}, 'gpu_info': {'count': 1, 'model': 'GeForce GTX 1080'}, 'memory_total': 20986626048, 'memory_available': 14860541952}, 'run_date': '2018-08-26T04:36:38.596702Z', 'tensorflow_version': {'version': '1.7.0', 'git_hash': 'v1.7.0-3-g024aecf414'}, 'tensorflow_environment_variables': [{'name': 'TF_ENABLE_WINOGRAD_NONFUSED', 'value': '1'}]}\r\n    INFO:tensorflow:Starting a training cycle: 0/250\r\n    INFO:tensorflow:Calling model_fn.\r\n    data_format:  channels_first\r\n    INFO:tensorflow:Done calling model_fn.\r\n    INFO:tensorflow:Create CheckpointSaverHook.\r\n    INFO:tensorflow:Graph was finalized.\r\n    2018-08-26 09:06:40.685552: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\r\n    2018-08-26 09:06:40.685610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n    2018-08-26 09:06:40.685617: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \r\n    2018-08-26 09:06:40.685630: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \r\n    2018-08-26 09:06:40.685744: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n    INFO:tensorflow:Running local_init_op.\r\n    INFO:tensorflow:Done running local_init_op.\r\n    INFO:tensorflow:Saving checkpoints for 1 into /tmp/cifar10_model/model.ckpt.\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 7.7181897, train_accuracy = 0.09\r\n    INFO:tensorflow:loss = 20.531982, step = 0\r\n    INFO:tensorflow:global_step/sec: 5.5106\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.26069, train_accuracy = 0.105 (18.147 sec)\r\n    INFO:tensorflow:loss = 13.960868, step = 100 (18.147 sec)\r\n    INFO:tensorflow:global_step/sec: 5.42846\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.291137, train_accuracy = 0.10666667 (18.421 sec)\r\n    INFO:tensorflow:loss = 12.874262, step = 200 (18.421 sec)\r\n    INFO:tensorflow:global_step/sec: 5.62853\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.1555672, train_accuracy = 0.1175 (17.767 sec)\r\n    INFO:tensorflow:loss = 11.73109, step = 300 (17.767 sec)\r\n    INFO:tensorflow:global_step/sec: 5.45977\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 2.0706115, train_accuracy = 0.122 (18.316 sec)\r\n    INFO:tensorflow:loss = 10.739094, step = 400 (18.316 sec)\r\n    INFO:tensorflow:Saving checkpoints for 500 into /tmp/cifar10_model/model.ckpt.\r\n    INFO:tensorflow:Loss for final step: 9.72249.\r\n    INFO:tensorflow:Starting to evaluate.\r\n    INFO:tensorflow:Calling model_fn.\r\n    data_format:  channels_first\r\n    INFO:tensorflow:Done calling model_fn.\r\n    INFO:tensorflow:Starting evaluation at 2018-08-26-04:38:16\r\n    INFO:tensorflow:Graph was finalized.\r\n    2018-08-26 09:08:16.838937: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\r\n    2018-08-26 09:08:16.838968: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n    2018-08-26 09:08:16.838986: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \r\n    2018-08-26 09:08:16.838989: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \r\n    2018-08-26 09:08:16.839099: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n    INFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-500\r\n    INFO:tensorflow:Running local_init_op.\r\n    INFO:tensorflow:Done running local_init_op.\r\n    INFO:tensorflow:Finished evaluation at 2018-08-26-04:38:22\r\n    INFO:tensorflow:Saving dict for global step 500: accuracy = 0.2181, global_step = 500, loss = 9.815871\r\n    INFO:tensorflow:Benchmark metric: Name accuracy, value 0, unit None, global_step 500, extras []\r\n    INFO:tensorflow:Benchmark metric: Name loss, value 9, unit None, global_step 500, extras []\r\n    INFO:tensorflow:Starting a training cycle: 1/250\r\n    INFO:tensorflow:Calling model_fn.\r\n    data_format:  channels_first\r\n    INFO:tensorflow:Done calling model_fn.\r\n    INFO:tensorflow:Create CheckpointSaverHook.\r\n    INFO:tensorflow:Graph was finalized.\r\n    2018-08-26 09:08:23.994577: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\r\n    2018-08-26 09:08:23.994610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n    2018-08-26 09:08:23.994625: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \r\n    2018-08-26 09:08:23.994630: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \r\n    2018-08-26 09:08:23.994726: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n    INFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-500\r\n    INFO:tensorflow:Running local_init_op.\r\n    INFO:tensorflow:Done running local_init_op.\r\n    INFO:tensorflow:Saving checkpoints for 501 into /tmp/cifar10_model/model.ckpt.\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.831348, train_accuracy = 0.23\r\n    INFO:tensorflow:loss = 9.679985, step = 500\r\n    INFO:tensorflow:global_step/sec: 5.3539\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.8214886, train_accuracy = 0.25 (18.678 sec)\r\n    INFO:tensorflow:loss = 8.9299, step = 600 (18.678 sec)\r\n    INFO:tensorflow:global_step/sec: 5.49204\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.7747709, train_accuracy = 0.26666668 (18.208 sec)\r\n    INFO:tensorflow:loss = 8.215595, step = 700 (18.208 sec)\r\n    INFO:tensorflow:global_step/sec: 5.48954\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.7076583, train_accuracy = 0.275 (18.216 sec)\r\n    INFO:tensorflow:loss = 7.5460052, step = 800 (18.216 sec)\r\n    INFO:tensorflow:global_step/sec: 5.65214\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.6106825, train_accuracy = 0.286 (17.692 sec)\r\n    INFO:tensorflow:loss = 6.904671, step = 900 (17.692 sec)\r\n    INFO:tensorflow:Saving checkpoints for 1000 into /tmp/cifar10_model/model.ckpt.\r\n    INFO:tensorflow:Loss for final step: 6.5854077.\r\n    INFO:tensorflow:Starting to evaluate.\r\n    INFO:tensorflow:Calling model_fn.\r\n    data_format:  channels_first\r\n    INFO:tensorflow:Done calling model_fn.\r\n    INFO:tensorflow:Starting evaluation at 2018-08-26-04:39:57\r\n    INFO:tensorflow:Graph was finalized.\r\n    2018-08-26 09:09:57.431671: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\r\n    2018-08-26 09:09:57.431702: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n    2018-08-26 09:09:57.431718: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \r\n    2018-08-26 09:09:57.431722: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \r\n    2018-08-26 09:09:57.431814: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n    INFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-1000\r\n    INFO:tensorflow:Running local_init_op.\r\n    INFO:tensorflow:Done running local_init_op.\r\n    INFO:tensorflow:Finished evaluation at 2018-08-26-04:40:02\r\n    INFO:tensorflow:Saving dict for global step 1000: accuracy = 0.264, global_step = 1000, loss = 6.684446\r\n    INFO:tensorflow:Benchmark metric: Name accuracy, value 0, unit None, global_step 1000, extras []\r\n    INFO:tensorflow:Benchmark metric: Name loss, value 6, unit None, global_step 1000, extras []\r\n    INFO:tensorflow:Starting a training cycle: 2/250\r\n    INFO:tensorflow:Calling model_fn.\r\n    data_format:  channels_first\r\n    INFO:tensorflow:Done calling model_fn.\r\n    INFO:tensorflow:Create CheckpointSaverHook.\r\n    INFO:tensorflow:Graph was finalized.\r\n    2018-08-26 09:10:04.247883: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\r\n    2018-08-26 09:10:04.247914: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n    2018-08-26 09:10:04.247930: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \r\n    2018-08-26 09:10:04.247934: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \r\n    2018-08-26 09:10:04.248028: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n    INFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-1000\r\n    INFO:tensorflow:Running local_init_op.\r\n    INFO:tensorflow:Done running local_init_op.\r\n    INFO:tensorflow:Saving checkpoints for 1001 into /tmp/cifar10_model/model.ckpt.\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.7071365, train_accuracy = 0.32\r\n    INFO:tensorflow:loss = 6.5100193, step = 1000\r\n    INFO:tensorflow:global_step/sec: 5.54579\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.5869155, train_accuracy = 0.335 (18.032 sec)\r\n    INFO:tensorflow:loss = 5.9459677, step = 1100 (18.032 sec)\r\n    INFO:tensorflow:global_step/sec: 5.69552\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.754588, train_accuracy = 0.31 (17.558 sec)\r\n    INFO:tensorflow:loss = 5.7136836, step = 1200 (17.558 sec)\r\n    INFO:tensorflow:global_step/sec: 5.69235\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.6495434, train_accuracy = 0.3225 (17.568 sec)\r\n    INFO:tensorflow:loss = 5.2463627, step = 1300 (17.568 sec)\r\n    INFO:tensorflow:global_step/sec: 5.60754\r\n    INFO:tensorflow:learning_rate = 0.1, cross_entropy = 1.6227012, train_accuracy = 0.326 (17.833 sec)\r\n    INFO:tensorflow:loss = 4.8923674, step = 1400 (17.833 sec)\r\n    INFO:tensorflow:Saving checkpoints for 1500 into /tmp/cifar10_model/model.ckpt.\r\n    INFO:tensorflow:Loss for final step: 4.7713437.\r\n    INFO:tensorflow:Starting to evaluate.\r\n    INFO:tensorflow:Calling model_fn.\r\n    data_format:  channels_first\r\n    INFO:tensorflow:Done calling model_fn.\r\n    INFO:tensorflow:Starting evaluation at 2018-08-26-04:41:36\r\n    INFO:tensorflow:Graph was finalized.\r\n    2018-08-26 09:11:36.521245: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\r\n    2018-08-26 09:11:36.521277: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n    2018-08-26 09:11:36.521285: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \r\n    2018-08-26 09:11:36.521290: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \r\n    2018-08-26 09:11:36.521385: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7131 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n    INFO:tensorflow:Restoring parameters from /tmp/cifar10_model/model.ckpt-1500\r\n    INFO:tensorflow:Running local_init_op.\r\n    INFO:tensorflow:Done running local_init_op.\r\n    INFO:tensorflow:Finished evaluation at 2018-08-26-04:41:41\r\n    INFO:tensorflow:Saving dict for global step 1500: accuracy = 0.3168, global_step = 1500, loss = 4.7169304\r\n    INFO:tensorflow:Benchmark metric: Name accuracy, value 0, unit None, global_step 1500, extras []\r\n    INFO:tensorflow:Benchmark metric: Name loss, value 4, unit None, global_step 1500, extras []\r\n    INFO:tensorflow:Starting a training cycle: 3/250\r\n    INFO:tensorflow:Calling model_fn.\r\n    data_format:  channels_first\r\n    INFO:tensorflow:Done calling model_fn.\r\n    INFO:tensorflow:Create CheckpointSaverHook.\r\n    INFO:tensorflow:Graph was finalized.\r\n\r\n**Extra info** :  \r\nOs: Ubuntu 16.04  \r\nGPU: GTX1080  \r\nCPU: Intel 4790K  \r\nRAM : 20Gig  \r\nGPU Utilization : 99%    \r\n\r\n  [1]: https://github.com/tensorflow/models/tree/master/official/resnet\r\n  [2]: https://paste.ee/p/pN07i#s=2\r\n  [3]: https://paste.ee/p/pN07i#section0\r\n  [4]: https://paste.ee/p/pN07i#s=1"}
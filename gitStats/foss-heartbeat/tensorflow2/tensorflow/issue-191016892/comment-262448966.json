{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/262448966", "html_url": "https://github.com/tensorflow/tensorflow/issues/5785#issuecomment-262448966", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5785", "id": 262448966, "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjQ0ODk2Ng==", "user": {"login": "shaolinkhoa", "id": 12138158, "node_id": "MDQ6VXNlcjEyMTM4MTU4", "avatar_url": "https://avatars2.githubusercontent.com/u/12138158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shaolinkhoa", "html_url": "https://github.com/shaolinkhoa", "followers_url": "https://api.github.com/users/shaolinkhoa/followers", "following_url": "https://api.github.com/users/shaolinkhoa/following{/other_user}", "gists_url": "https://api.github.com/users/shaolinkhoa/gists{/gist_id}", "starred_url": "https://api.github.com/users/shaolinkhoa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shaolinkhoa/subscriptions", "organizations_url": "https://api.github.com/users/shaolinkhoa/orgs", "repos_url": "https://api.github.com/users/shaolinkhoa/repos", "events_url": "https://api.github.com/users/shaolinkhoa/events{/privacy}", "received_events_url": "https://api.github.com/users/shaolinkhoa/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-23T07:31:47Z", "updated_at": "2016-11-23T07:36:41Z", "author_association": "NONE", "body_html": "<p>I already asked <a href=\"http://stackoverflow.com/questions/40705203/tensorflow-label-image-recognize-so-slow?noredirect=1#comment68687966_40705203\" rel=\"nofollow\">this question</a> on stackoverflow but It seems no one knows.</p>\n<p><strong>Operating System:</strong><br>\nLaptop : Ubuntu 14.04 LTS<br>\nRaspberry pi 2 : \"Raspbian GNU/Linux 8 (jessie)\"</p>\n<p><strong>Installed version of tensorflow:</strong>   0.10.0</p>\n<p>My project is OCR. I used <strong>image_retraining</strong>(v0.10.0) to recognize letters.</p>\n<p>I train it with pictures size 128x128</p>\n<p>After that I use my <a href=\"https://github.com/shaolinkhoa/tensorflow/blob/master/OCR_image.py\">code.py</a> to input several letter pictures (1306 pictures) which I segmented from a page of document</p>\n<p>The code run so slow.</p>\n<pre><code>It took 3 seconds to recognize 1 letter and near 30 minutes to finish 1306 pictures on my laptop.\n\nIt took 38 seconds to recognize 1 letter and near 6 hours to finish 1306 pictures on pi 2\n</code></pre>\n<p>I don't know why it run so slow. My C++ code use SVM on QT just took 5 seconds to do that ( It uses picture size 32x24).</p>\n<p>So I think It's because I use picture too large or python run slower than C++</p>\n<p>Update <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a>: The picture size is not the problem. I tried with the small picture size 20x20 but it's still slow.<br>\nFollow the <a href=\"https://github.com/shaolinkhoa/tensorflow/blob/master/time_chart.txt\">time_chart</a>.</p>\n<pre><code>  ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1309    0.029    0.000  990.377    0.757 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:599(run)\n     1309    0.134    0.000  990.333    0.757 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:835(_run)\n     1309    0.010    0.000  989.609    0.756 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:916(_do_run)\n     1309    0.004    0.000  989.599    0.756 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:963(_do_call)\n     1309    0.040    0.000  989.595    0.756 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:940(_run_fn)\n    1309 988.335    0.755  988.335    0.755 {_pywrap_tensorflow.TF_Run}\n     2646     56.390 0.021  56.390      0.021 {posix.system}\n</code></pre>\n<p>It seems the code slow because of this command</p>\n<p>predictions = sess.run(softmax_tensor, <br>\n{'DecodeJpeg/contents:0': image_data})</p>\n<p>Would you mind giving me advices to make it run faster</p>", "body_text": "I already asked this question on stackoverflow but It seems no one knows.\nOperating System:\nLaptop : Ubuntu 14.04 LTS\nRaspberry pi 2 : \"Raspbian GNU/Linux 8 (jessie)\"\nInstalled version of tensorflow:   0.10.0\nMy project is OCR. I used image_retraining(v0.10.0) to recognize letters.\nI train it with pictures size 128x128\nAfter that I use my code.py to input several letter pictures (1306 pictures) which I segmented from a page of document\nThe code run so slow.\nIt took 3 seconds to recognize 1 letter and near 30 minutes to finish 1306 pictures on my laptop.\n\nIt took 38 seconds to recognize 1 letter and near 6 hours to finish 1306 pictures on pi 2\n\nI don't know why it run so slow. My C++ code use SVM on QT just took 5 seconds to do that ( It uses picture size 32x24).\nSo I think It's because I use picture too large or python run slower than C++\nUpdate #1: The picture size is not the problem. I tried with the small picture size 20x20 but it's still slow.\nFollow the time_chart.\n  ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1309    0.029    0.000  990.377    0.757 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:599(run)\n     1309    0.134    0.000  990.333    0.757 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:835(_run)\n     1309    0.010    0.000  989.609    0.756 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:916(_do_run)\n     1309    0.004    0.000  989.599    0.756 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:963(_do_call)\n     1309    0.040    0.000  989.595    0.756 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:940(_run_fn)\n    1309 988.335    0.755  988.335    0.755 {_pywrap_tensorflow.TF_Run}\n     2646     56.390 0.021  56.390      0.021 {posix.system}\n\nIt seems the code slow because of this command\npredictions = sess.run(softmax_tensor, \n{'DecodeJpeg/contents:0': image_data})\nWould you mind giving me advices to make it run faster", "body": "I already asked [this question](http://stackoverflow.com/questions/40705203/tensorflow-label-image-recognize-so-slow?noredirect=1#comment68687966_40705203) on stackoverflow but It seems no one knows.\r\n\r\n**Operating System:** \r\nLaptop : Ubuntu 14.04 LTS  \r\nRaspberry pi 2 : \"Raspbian GNU/Linux 8 (jessie)\"\r\n\r\n**Installed version of tensorflow:**   0.10.0\r\n\r\nMy project is OCR. I used **image_retraining**(v0.10.0) to recognize letters.\r\n\r\nI train it with pictures size 128x128\r\n\r\nAfter that I use my [code.py](https://github.com/shaolinkhoa/tensorflow/blob/master/OCR_image.py) to input several letter pictures (1306 pictures) which I segmented from a page of document\r\n\r\nThe code run so slow.\r\n\r\n    It took 3 seconds to recognize 1 letter and near 30 minutes to finish 1306 pictures on my laptop.\r\n\r\n    It took 38 seconds to recognize 1 letter and near 6 hours to finish 1306 pictures on pi 2\r\n\r\nI don't know why it run so slow. My C++ code use SVM on QT just took 5 seconds to do that ( It uses picture size 32x24).\r\n\r\nSo I think It's because I use picture too large or python run slower than C++ \r\n\r\nUpdate #1: The picture size is not the problem. I tried with the small picture size 20x20 but it's still slow. \r\nFollow the [time_chart](https://github.com/shaolinkhoa/tensorflow/blob/master/time_chart.txt). \r\n```\r\n  ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n     1309    0.029    0.000  990.377    0.757 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:599(run)\r\n     1309    0.134    0.000  990.333    0.757 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:835(_run)\r\n     1309    0.010    0.000  989.609    0.756 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:916(_do_run)\r\n     1309    0.004    0.000  989.599    0.756 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:963(_do_call)\r\n     1309    0.040    0.000  989.595    0.756 /home/khoa/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py:940(_run_fn)\r\n    1309 988.335    0.755  988.335    0.755 {_pywrap_tensorflow.TF_Run}\r\n     2646     56.390 0.021  56.390      0.021 {posix.system}\r\n```\r\n\r\nIt seems the code slow because of this command\r\n\r\npredictions = sess.run(softmax_tensor, \\\r\n        {'DecodeJpeg/contents:0': image_data})\r\n\r\nWould you mind giving me advices to make it run faster"}
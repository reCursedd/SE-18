{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20111", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20111/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20111/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20111/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20111", "id": 333508266, "node_id": "MDU6SXNzdWUzMzM1MDgyNjY=", "number": 20111, "title": "ResnetV2 quantization", "user": {"login": "mynameischaos", "id": 9084403, "node_id": "MDQ6VXNlcjkwODQ0MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9084403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mynameischaos", "html_url": "https://github.com/mynameischaos", "followers_url": "https://api.github.com/users/mynameischaos/followers", "following_url": "https://api.github.com/users/mynameischaos/following{/other_user}", "gists_url": "https://api.github.com/users/mynameischaos/gists{/gist_id}", "starred_url": "https://api.github.com/users/mynameischaos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mynameischaos/subscriptions", "organizations_url": "https://api.github.com/users/mynameischaos/orgs", "repos_url": "https://api.github.com/users/mynameischaos/repos", "events_url": "https://api.github.com/users/mynameischaos/events{/privacy}", "received_events_url": "https://api.github.com/users/mynameischaos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, {"login": "raghuraman-k", "id": 34699873, "node_id": "MDQ6VXNlcjM0Njk5ODcz", "avatar_url": "https://avatars2.githubusercontent.com/u/34699873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raghuraman-k", "html_url": "https://github.com/raghuraman-k", "followers_url": "https://api.github.com/users/raghuraman-k/followers", "following_url": "https://api.github.com/users/raghuraman-k/following{/other_user}", "gists_url": "https://api.github.com/users/raghuraman-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/raghuraman-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raghuraman-k/subscriptions", "organizations_url": "https://api.github.com/users/raghuraman-k/orgs", "repos_url": "https://api.github.com/users/raghuraman-k/repos", "events_url": "https://api.github.com/users/raghuraman-k/events{/privacy}", "received_events_url": "https://api.github.com/users/raghuraman-k/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-06-19T03:38:38Z", "updated_at": "2018-07-06T18:54:21Z", "closed_at": "2018-07-06T18:54:21Z", "author_association": "NONE", "body_html": "<h2>System information</h2>\n<p>Have I written custom code (as opposed to using a stock example script provided in TensorFlow):no<br>\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):CentOS Linux release 7.2<br>\nTensorFlow installed from (source or binary):Anaconda python 3.6.5(conda install)<br>\nTensorFlow version (use command below):1.8.0<br>\nPython version: 3.6.5<br>\nBazel version (if compiling from source): 0.7.0<br>\nGCC/Compiler version (if compiling from source): 4.8.5<br>\nCUDA/cuDNN version:cuda-9.0<br>\nGPU model and memory: P40<br>\nPhone: N/A</p>\n<h2>Describe the problem</h2>\n<p>Hi ~</p>\n<p>When I used API 'tf.contrib.quantize.experimental_create_training_graph' to add quantization nodes, it will match some layers**(not all convs layers)** to add quantization nodes. This will lead to some layers using float32, but some with float8(quantization bit is 8). When I use 'toco_convert', it just support inference_type: Currently must be {FLOAT, QUANTIZED_UINT8}. I think it need all layers to be FLOAT or QUANTIZED_UINT8. So it will raise this errors.</p>\n<h2>Error log</h2>\n<p>F tensorflow/contrib/lite/toco/tooling_util.cc:1445] Array model/resnet_model/Relu, which is an input to the Conv operator producing the output array model/resnet_model/conv2d_1/Conv2D, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass --default_ranges_min= and --default_ranges_max= if you do not care about the accuracy of results.\\n'</p>\n<p>So I think <strong>it is contradictory in the API</strong>. pls help me, thank you.</p>\n<h2>Network</h2>\n<p>Network: ResNet20</p>\n<p>TF version: r1.8(I find it dose not support --default_ranges_min and --default_ranges_max in the python api of r1.8. But in r1.9 it supports)</p>", "body_text": "System information\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):CentOS Linux release 7.2\nTensorFlow installed from (source or binary):Anaconda python 3.6.5(conda install)\nTensorFlow version (use command below):1.8.0\nPython version: 3.6.5\nBazel version (if compiling from source): 0.7.0\nGCC/Compiler version (if compiling from source): 4.8.5\nCUDA/cuDNN version:cuda-9.0\nGPU model and memory: P40\nPhone: N/A\nDescribe the problem\nHi ~\nWhen I used API 'tf.contrib.quantize.experimental_create_training_graph' to add quantization nodes, it will match some layers**(not all convs layers)** to add quantization nodes. This will lead to some layers using float32, but some with float8(quantization bit is 8). When I use 'toco_convert', it just support inference_type: Currently must be {FLOAT, QUANTIZED_UINT8}. I think it need all layers to be FLOAT or QUANTIZED_UINT8. So it will raise this errors.\nError log\nF tensorflow/contrib/lite/toco/tooling_util.cc:1445] Array model/resnet_model/Relu, which is an input to the Conv operator producing the output array model/resnet_model/conv2d_1/Conv2D, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass --default_ranges_min= and --default_ranges_max= if you do not care about the accuracy of results.\\n'\nSo I think it is contradictory in the API. pls help me, thank you.\nNetwork\nNetwork: ResNet20\nTF version: r1.8(I find it dose not support --default_ranges_min and --default_ranges_max in the python api of r1.8. But in r1.9 it supports)", "body": "System information\r\n------------------------------------------\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):no\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):CentOS Linux release 7.2\r\nTensorFlow installed from (source or binary):Anaconda python 3.6.5(conda install)\r\nTensorFlow version (use command below):1.8.0\r\nPython version: 3.6.5\r\nBazel version (if compiling from source): 0.7.0\r\nGCC/Compiler version (if compiling from source): 4.8.5\r\nCUDA/cuDNN version:cuda-9.0\r\nGPU model and memory: P40\r\nPhone: N/A\r\n\r\nDescribe the problem\r\n-----------------------------\r\nHi ~\r\n\r\nWhen I used API 'tf.contrib.quantize.experimental_create_training_graph' to add quantization nodes, it will match some layers**(not all convs layers)** to add quantization nodes. This will lead to some layers using float32, but some with float8(quantization bit is 8). When I use 'toco_convert', it just support inference_type: Currently must be {FLOAT, QUANTIZED_UINT8}. I think it need all layers to be FLOAT or QUANTIZED_UINT8. So it will raise this errors.\r\n\r\nError log\r\n------------------------\r\nF tensorflow/contrib/lite/toco/tooling_util.cc:1445] Array model/resnet_model/Relu, which is an input to the Conv operator producing the output array model/resnet_model/conv2d_1/Conv2D, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass --default_ranges_min= and --default_ranges_max= if you do not care about the accuracy of results.\\n'\r\n\r\nSo I think **it is contradictory in the API**. pls help me, thank you.\r\n\r\nNetwork\r\n-----------------\r\nNetwork: ResNet20 \r\n\r\nTF version: r1.8(I find it dose not support --default_ranges_min and --default_ranges_max in the python api of r1.8. But in r1.9 it supports)"}
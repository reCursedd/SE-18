{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1277", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1277/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1277/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1277/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1277", "id": 136149303, "node_id": "MDU6SXNzdWUxMzYxNDkzMDM=", "number": 1277, "title": "Cifar breaking", "user": {"login": "saonim", "id": 6721079, "node_id": "MDQ6VXNlcjY3MjEwNzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/6721079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saonim", "html_url": "https://github.com/saonim", "followers_url": "https://api.github.com/users/saonim/followers", "following_url": "https://api.github.com/users/saonim/following{/other_user}", "gists_url": "https://api.github.com/users/saonim/gists{/gist_id}", "starred_url": "https://api.github.com/users/saonim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saonim/subscriptions", "organizations_url": "https://api.github.com/users/saonim/orgs", "repos_url": "https://api.github.com/users/saonim/repos", "events_url": "https://api.github.com/users/saonim/events{/privacy}", "received_events_url": "https://api.github.com/users/saonim/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "sherrym", "id": 12770037, "node_id": "MDQ6VXNlcjEyNzcwMDM3", "avatar_url": "https://avatars0.githubusercontent.com/u/12770037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sherrym", "html_url": "https://github.com/sherrym", "followers_url": "https://api.github.com/users/sherrym/followers", "following_url": "https://api.github.com/users/sherrym/following{/other_user}", "gists_url": "https://api.github.com/users/sherrym/gists{/gist_id}", "starred_url": "https://api.github.com/users/sherrym/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sherrym/subscriptions", "organizations_url": "https://api.github.com/users/sherrym/orgs", "repos_url": "https://api.github.com/users/sherrym/repos", "events_url": "https://api.github.com/users/sherrym/events{/privacy}", "received_events_url": "https://api.github.com/users/sherrym/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sherrym", "id": 12770037, "node_id": "MDQ6VXNlcjEyNzcwMDM3", "avatar_url": "https://avatars0.githubusercontent.com/u/12770037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sherrym", "html_url": "https://github.com/sherrym", "followers_url": "https://api.github.com/users/sherrym/followers", "following_url": "https://api.github.com/users/sherrym/following{/other_user}", "gists_url": "https://api.github.com/users/sherrym/gists{/gist_id}", "starred_url": "https://api.github.com/users/sherrym/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sherrym/subscriptions", "organizations_url": "https://api.github.com/users/sherrym/orgs", "repos_url": "https://api.github.com/users/sherrym/repos", "events_url": "https://api.github.com/users/sherrym/events{/privacy}", "received_events_url": "https://api.github.com/users/sherrym/received_events", "type": "User", "site_admin": false}, {"login": "shlens", "id": 13385191, "node_id": "MDQ6VXNlcjEzMzg1MTkx", "avatar_url": "https://avatars1.githubusercontent.com/u/13385191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shlens", "html_url": "https://github.com/shlens", "followers_url": "https://api.github.com/users/shlens/followers", "following_url": "https://api.github.com/users/shlens/following{/other_user}", "gists_url": "https://api.github.com/users/shlens/gists{/gist_id}", "starred_url": "https://api.github.com/users/shlens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shlens/subscriptions", "organizations_url": "https://api.github.com/users/shlens/orgs", "repos_url": "https://api.github.com/users/shlens/repos", "events_url": "https://api.github.com/users/shlens/events{/privacy}", "received_events_url": "https://api.github.com/users/shlens/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2016-02-24T18:37:44Z", "updated_at": "2016-12-23T07:25:30Z", "closed_at": "2016-12-23T07:25:30Z", "author_association": "NONE", "body_html": "<p>I am running cifar multiGPU example with different batch sizes and number of GPUs. The code is breaking this way:</p>\n<p>tensorflow.python.framework.errors.OutOfRangeError: RandomShuffleQueue '_1_tower_0/shuffle_batch/random_shuffle_queue' is closed and has insufficient elements (requested 128, current size 0)<br>\n[[Node: tower_0/shuffle_batch = QueueDequeueMany[component_types=[DT_FLOAT, DT_INT32], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](tower_0/shuffle_batch/random_shuffle_queue, tower_0/shuffle_batch/n/_775)]]<br>\n[[Node: tower_1/shuffle_batch/n/_664 = _HostSend<a href=\"tower_1/shuffle_batch/n\">T=DT_INT32, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:1\", send_device_incarnation=1, tensor_name=\"edge_170_tower_1/shuffle_batch/n\", _device=\"/job:localhost/replica:0/task:0/gpu:1\"</a>]]<br>\nCaused by op u'tower_0/shuffle_batch', defined at:<br>\nFile \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 224, in <br>\ntf.app.run()<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/default/_app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 222, in main<br>\ntrain()<br>\nFile \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 150, in train<br>\nloss = tower_loss(scope)<br>\nFile \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 65, in tower_loss<br>\nimages, labels = cifar10.distorted_inputs()<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10.py\", line 119, in distorted_inputs<br>\nbatch_size=FLAGS.batch_size)<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_input.py\", line 153, in distorted_inputs<br>\nmin_queue_examples, batch_size)<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_input.py\", line 104, in _generate_image_and_label_batch<br>\nmin_after_dequeue=min_queue_examples)<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 496, in shuffle_batch<br>\nreturn queue.dequeue_many(batch_size, name=name)<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 287, in dequeue_many<br>\nself._queue_ref, n, self._dtypes, name=name)<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 319, in _queue_dequeue_many<br>\ntimeout_ms=timeout_ms, name=name)<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 664, in apply_op<br>\nop_def=op_def)<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1834, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1043, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>The values that are passed to shuffle_batch():</p>\n<pre><code> images, label_batch = tf.train.shuffle_batch(\n      [image, label],\n      batch_size=batch_size,\n      num_threads=num_preprocess_threads,\n      capacity=min_queue_examples + 3 * batch_size,\n      min_after_dequeue=min_queue_examples)\n</code></pre>\n<p>are:<br>\nbatch size 128, num_threads 16, capacity 20384, min_after_deque 20000</p>", "body_text": "I am running cifar multiGPU example with different batch sizes and number of GPUs. The code is breaking this way:\ntensorflow.python.framework.errors.OutOfRangeError: RandomShuffleQueue '_1_tower_0/shuffle_batch/random_shuffle_queue' is closed and has insufficient elements (requested 128, current size 0)\n[[Node: tower_0/shuffle_batch = QueueDequeueMany[component_types=[DT_FLOAT, DT_INT32], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](tower_0/shuffle_batch/random_shuffle_queue, tower_0/shuffle_batch/n/_775)]]\n[[Node: tower_1/shuffle_batch/n/_664 = _HostSendT=DT_INT32, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:1\", send_device_incarnation=1, tensor_name=\"edge_170_tower_1/shuffle_batch/n\", _device=\"/job:localhost/replica:0/task:0/gpu:1\"]]\nCaused by op u'tower_0/shuffle_batch', defined at:\nFile \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 224, in \ntf.app.run()\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 222, in main\ntrain()\nFile \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 150, in train\nloss = tower_loss(scope)\nFile \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 65, in tower_loss\nimages, labels = cifar10.distorted_inputs()\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10.py\", line 119, in distorted_inputs\nbatch_size=FLAGS.batch_size)\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_input.py\", line 153, in distorted_inputs\nmin_queue_examples, batch_size)\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_input.py\", line 104, in _generate_image_and_label_batch\nmin_after_dequeue=min_queue_examples)\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 496, in shuffle_batch\nreturn queue.dequeue_many(batch_size, name=name)\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 287, in dequeue_many\nself._queue_ref, n, self._dtypes, name=name)\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 319, in _queue_dequeue_many\ntimeout_ms=timeout_ms, name=name)\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 664, in apply_op\nop_def=op_def)\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1834, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1043, in init\nself._traceback = _extract_stack()\nThe values that are passed to shuffle_batch():\n images, label_batch = tf.train.shuffle_batch(\n      [image, label],\n      batch_size=batch_size,\n      num_threads=num_preprocess_threads,\n      capacity=min_queue_examples + 3 * batch_size,\n      min_after_dequeue=min_queue_examples)\n\nare:\nbatch size 128, num_threads 16, capacity 20384, min_after_deque 20000", "body": "I am running cifar multiGPU example with different batch sizes and number of GPUs. The code is breaking this way:\n\ntensorflow.python.framework.errors.OutOfRangeError: RandomShuffleQueue '_1_tower_0/shuffle_batch/random_shuffle_queue' is closed and has insufficient elements (requested 128, current size 0)\n     [[Node: tower_0/shuffle_batch = QueueDequeueMany[component_types=[DT_FLOAT, DT_INT32], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](tower_0/shuffle_batch/random_shuffle_queue, tower_0/shuffle_batch/n/_775)]]\n     [[Node: tower_1/shuffle_batch/n/_664 = _HostSend[T=DT_INT32, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:1\", send_device_incarnation=1, tensor_name=\"edge_170_tower_1/shuffle_batch/n\", _device=\"/job:localhost/replica:0/task:0/gpu:1\"](tower_1/shuffle_batch/n)]]\nCaused by op u'tower_0/shuffle_batch', defined at:\n  File \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 224, in <module>\n    tf.app.run()\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 222, in main\n    train()\n  File \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 150, in train\n    loss = tower_loss(scope)\n  File \"lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_multi-gpu_train.py\", line 65, in tower_loss\n    images, labels = cifar10.distorted_inputs()\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10.py\", line 119, in distorted_inputs\n    batch_size=FLAGS.batch_size)\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_input.py\", line 153, in distorted_inputs\n    min_queue_examples, batch_size)\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/models/image/cifar10/cifar10_input.py\", line 104, in _generate_image_and_label_batch\n    min_after_dequeue=min_queue_examples)\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 496, in shuffle_batch\n    return queue.dequeue_many(batch_size, name=name)\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 287, in dequeue_many\n    self._queue_ref, n, self._dtypes, name=name)\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 319, in _queue_dequeue_many\n    timeout_ms=timeout_ms, name=name)\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 664, in apply_op\n    op_def=op_def)\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1834, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/saoni.m/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1043, in __init__\n    self._traceback = _extract_stack()\n\nThe values that are passed to shuffle_batch():\n\n```\n images, label_batch = tf.train.shuffle_batch(\n      [image, label],\n      batch_size=batch_size,\n      num_threads=num_preprocess_threads,\n      capacity=min_queue_examples + 3 * batch_size,\n      min_after_dequeue=min_queue_examples)\n```\n\nare:\nbatch size 128, num_threads 16, capacity 20384, min_after_deque 20000\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5720", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5720/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5720/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5720/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5720", "id": 190509942, "node_id": "MDU6SXNzdWUxOTA1MDk5NDI=", "number": 5720, "title": "freeze_graph not working as expected", "user": {"login": "leslietso", "id": 12133211, "node_id": "MDQ6VXNlcjEyMTMzMjEx", "avatar_url": "https://avatars2.githubusercontent.com/u/12133211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leslietso", "html_url": "https://github.com/leslietso", "followers_url": "https://api.github.com/users/leslietso/followers", "following_url": "https://api.github.com/users/leslietso/following{/other_user}", "gists_url": "https://api.github.com/users/leslietso/gists{/gist_id}", "starred_url": "https://api.github.com/users/leslietso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leslietso/subscriptions", "organizations_url": "https://api.github.com/users/leslietso/orgs", "repos_url": "https://api.github.com/users/leslietso/repos", "events_url": "https://api.github.com/users/leslietso/events{/privacy}", "received_events_url": "https://api.github.com/users/leslietso/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-11-19T17:52:53Z", "updated_at": "2017-06-16T17:30:40Z", "closed_at": "2017-06-16T17:30:40Z", "author_association": "NONE", "body_html": "<p>I am currently attempting to export a protobuf file to Android. To do that, I generated a .pbtxt file using <a href=\"http://pastebin.com/HcWA0xMQ\" rel=\"nofollow\">http://pastebin.com/HcWA0xMQ</a> to run freeze_graph on. I saved the protobuf file as text because when I try to save it as binary and run it with freeze_graph, I get the following error:</p>\n<pre><code>Traceback (most recent call last):\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in &lt;module&gt;\n    tf.app.run()\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\n    FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 98, in freeze_graph\n    text_format.Merge(f.read().decode(\"utf-8\"), input_graph_def)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py\", line 16, in decode\n    return codecs.utf_8_decode(input, errors, True)\nUnicodeDecodeError: 'utf8' codec can't decode byte 0x96 in position 331: invalid start byte\n</code></pre>\n<p>After generating the frozen graph with the .pbtxt file, I tried to run it on Android but for some reason am getting the same output every time regardless of the input. I also noticed, that the frozen graph is actually smaller than the checkpoint file even though it's supposed to be bigger according to the pre-release documentation I got (<a href=\"https://github.com/tensorflow/tensorflow/files/601596/deploying.txt\">deploying.txt</a>).</p>\n<h3>Environment info</h3>\n<p>Operating System:<br>\nMac OS 10.12<br>\nTensorflow 0.11.0<br>\nAndroid Cyanogenmod 12</p>\n<p>Code to create .pb file for <code>freeze_graph</code>: <a href=\"http://pastebin.com/HcWA0xMQ\" rel=\"nofollow\">http://pastebin.com/HcWA0xMQ</a><br>\nMy checkpoint file: <a href=\"https://github.com/tensorflow/tensorflow/files/601598/Y6_1476978999.zip\">Y6_1476978999.zip</a></p>", "body_text": "I am currently attempting to export a protobuf file to Android. To do that, I generated a .pbtxt file using http://pastebin.com/HcWA0xMQ to run freeze_graph on. I saved the protobuf file as text because when I try to save it as binary and run it with freeze_graph, I get the following error:\nTraceback (most recent call last):\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <module>\n    tf.app.run()\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\n    FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 98, in freeze_graph\n    text_format.Merge(f.read().decode(\"utf-8\"), input_graph_def)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py\", line 16, in decode\n    return codecs.utf_8_decode(input, errors, True)\nUnicodeDecodeError: 'utf8' codec can't decode byte 0x96 in position 331: invalid start byte\n\nAfter generating the frozen graph with the .pbtxt file, I tried to run it on Android but for some reason am getting the same output every time regardless of the input. I also noticed, that the frozen graph is actually smaller than the checkpoint file even though it's supposed to be bigger according to the pre-release documentation I got (deploying.txt).\nEnvironment info\nOperating System:\nMac OS 10.12\nTensorflow 0.11.0\nAndroid Cyanogenmod 12\nCode to create .pb file for freeze_graph: http://pastebin.com/HcWA0xMQ\nMy checkpoint file: Y6_1476978999.zip", "body": "I am currently attempting to export a protobuf file to Android. To do that, I generated a .pbtxt file using http://pastebin.com/HcWA0xMQ to run freeze_graph on. I saved the protobuf file as text because when I try to save it as binary and run it with freeze_graph, I get the following error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <module>\r\n    tf.app.run()\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\r\n    FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\r\n  File \"/Users/leslie/tensorflow-master/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 98, in freeze_graph\r\n    text_format.Merge(f.read().decode(\"utf-8\"), input_graph_def)\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py\", line 16, in decode\r\n    return codecs.utf_8_decode(input, errors, True)\r\nUnicodeDecodeError: 'utf8' codec can't decode byte 0x96 in position 331: invalid start byte\r\n```\r\n\r\nAfter generating the frozen graph with the .pbtxt file, I tried to run it on Android but for some reason am getting the same output every time regardless of the input. I also noticed, that the frozen graph is actually smaller than the checkpoint file even though it's supposed to be bigger according to the pre-release documentation I got ([deploying.txt](https://github.com/tensorflow/tensorflow/files/601596/deploying.txt)).\r\n\r\n### Environment info\r\nOperating System:\r\nMac OS 10.12\r\nTensorflow 0.11.0\r\nAndroid Cyanogenmod 12\r\n\r\nCode to create .pb file for `freeze_graph`: http://pastebin.com/HcWA0xMQ\r\nMy checkpoint file: [Y6_1476978999.zip](https://github.com/tensorflow/tensorflow/files/601598/Y6_1476978999.zip)\r\n\r\n\r\n"}
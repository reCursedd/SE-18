{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14580", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14580/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14580/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14580/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14580", "id": 274098561, "node_id": "MDU6SXNzdWUyNzQwOTg1NjE=", "number": 14580, "title": "freeze_graph \"No variables to save\"", "user": {"login": "jasminezz", "id": 16434016, "node_id": "MDQ6VXNlcjE2NDM0MDE2", "avatar_url": "https://avatars0.githubusercontent.com/u/16434016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasminezz", "html_url": "https://github.com/jasminezz", "followers_url": "https://api.github.com/users/jasminezz/followers", "following_url": "https://api.github.com/users/jasminezz/following{/other_user}", "gists_url": "https://api.github.com/users/jasminezz/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasminezz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasminezz/subscriptions", "organizations_url": "https://api.github.com/users/jasminezz/orgs", "repos_url": "https://api.github.com/users/jasminezz/repos", "events_url": "https://api.github.com/users/jasminezz/events{/privacy}", "received_events_url": "https://api.github.com/users/jasminezz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 19, "created_at": "2017-11-15T10:04:09Z", "updated_at": "2018-11-10T18:48:33Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nI do not modify any of the source code</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nLinux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nbinary</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.4.0</li>\n<li><strong>Python version</strong>:<br>\n3.5<br>\n_ **Bazel version<br>\nN<br>\n_ **CUDA/cuDNN version<br>\nN<br>\n_ **GPU model and memory<br>\nN</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>First, I download mobilenet_v1_0.25_224 pretrained model from <a href=\"http://download.tensorflow.org/models/mobilenet_v1_0.25_224_2017_06_14.tar.gz\" rel=\"nofollow\">here</a></p>\n<p>Then,Exporting the Inference Graph, I use the commond:<br>\npython export_inference_graph.py <br>\n--alsologtostderr <br>\n--model_name=mobilenet_v1_025 <br>\n--image_size=224 <br>\n--output_file=/tmp/mobilenet_v1_025_224.pb</p>\n<p>Next, freeze graph, I use the command:<br>\npython tensorflow/python/tools/freeze_graph.py --input_graph= tmp/mobilenet_v1_025_224.pb --input_checkpoint=tmp/mobilenet_v1_0.25_224.ckpt --input_binary=true --output_graph=tmp/frozen_mobilenet_v1_025_224.pb --output_node_names=MobileNetV1/Predictions/Reshape_1</p>\n<p>Finally, I got the error:<br>\nI tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA<br>\nTraceback (most recent call last):<br>\nFile \"tensorflow/python/tools/freeze_graph.py\", line 350, in <br>\napp.run(main=main, argv=[sys.argv[0]] + unparsed)<br>\nFile \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"tensorflow/python/tools/freeze_graph.py\", line 249, in main<br>\nFLAGS.saved_model_tags)<br>\nFile \"tensorflow/python/tools/freeze_graph.py\", line 239, in freeze_graph<br>\ninput_meta_graph_def, input_saved_model_dir, saved_model_tags.split(\",\"))<br>\nFile \"tensorflow/python/tools/freeze_graph.py\", line 127, in freeze_graph_with_def_protos<br>\nsaver = saver_lib.Saver(var_list=var_list)<br>\nFile \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1218, in <strong>init</strong><br>\nself.build()<br>\nFile \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1227, in build<br>\nself._build(self._filename, build_save=True, build_restore=True)<br>\nFile \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1251, in _build<br>\nraise ValueError(\"No variables to save\")<br>\nValueError: No variables to save</p>\n<p>Another machine:<br>\nwindows 7<br>\ntensorflow 1.4.0<br>\npython 3.6</p>\n<p>Using the same operations, I can get the frozen .pb file successfully.</p>\n<p>All source code are not modified.I also  changed the other models to test, and get the same error, need your help?</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nI do not modify any of the source code\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nLinux Ubuntu 16.04\nTensorFlow installed from (source or binary):\nbinary\nTensorFlow version (use command below):\n1.4.0\nPython version:\n3.5\n_ **Bazel version\nN\n_ **CUDA/cuDNN version\nN\n_ **GPU model and memory\nN\n\nDescribe the problem\nFirst, I download mobilenet_v1_0.25_224 pretrained model from here\nThen,Exporting the Inference Graph, I use the commond:\npython export_inference_graph.py \n--alsologtostderr \n--model_name=mobilenet_v1_025 \n--image_size=224 \n--output_file=/tmp/mobilenet_v1_025_224.pb\nNext, freeze graph, I use the command:\npython tensorflow/python/tools/freeze_graph.py --input_graph= tmp/mobilenet_v1_025_224.pb --input_checkpoint=tmp/mobilenet_v1_0.25_224.ckpt --input_binary=true --output_graph=tmp/frozen_mobilenet_v1_025_224.pb --output_node_names=MobileNetV1/Predictions/Reshape_1\nFinally, I got the error:\nI tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\nTraceback (most recent call last):\nFile \"tensorflow/python/tools/freeze_graph.py\", line 350, in \napp.run(main=main, argv=[sys.argv[0]] + unparsed)\nFile \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"tensorflow/python/tools/freeze_graph.py\", line 249, in main\nFLAGS.saved_model_tags)\nFile \"tensorflow/python/tools/freeze_graph.py\", line 239, in freeze_graph\ninput_meta_graph_def, input_saved_model_dir, saved_model_tags.split(\",\"))\nFile \"tensorflow/python/tools/freeze_graph.py\", line 127, in freeze_graph_with_def_protos\nsaver = saver_lib.Saver(var_list=var_list)\nFile \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1218, in init\nself.build()\nFile \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1227, in build\nself._build(self._filename, build_save=True, build_restore=True)\nFile \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1251, in _build\nraise ValueError(\"No variables to save\")\nValueError: No variables to save\nAnother machine:\nwindows 7\ntensorflow 1.4.0\npython 3.6\nUsing the same operations, I can get the frozen .pb file successfully.\nAll source code are not modified.I also  changed the other models to test, and get the same error, need your help?", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nI do not modify any of the source code\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nLinux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary\r\n- **TensorFlow version (use command below)**:\r\n1.4.0\r\n- **Python version**: \r\n3.5\r\n_ **Bazel version\r\nN\r\n_ **CUDA/cuDNN version\r\nN\r\n_ **GPU model and memory\r\nN\r\n\r\n### Describe the problem\r\nFirst, I download mobilenet_v1_0.25_224 pretrained model from [here](http://download.tensorflow.org/models/mobilenet_v1_0.25_224_2017_06_14.tar.gz)\r\n\r\nThen,Exporting the Inference Graph, I use the commond:\r\npython export_inference_graph.py \\\r\n  --alsologtostderr \\\r\n  --model_name=mobilenet_v1_025 \\\r\n  --image_size=224 \\\r\n  --output_file=/tmp/mobilenet_v1_025_224.pb\r\n\r\nNext, freeze graph, I use the command:\r\npython tensorflow/python/tools/freeze_graph.py --input_graph= tmp/mobilenet_v1_025_224.pb --input_checkpoint=tmp/mobilenet_v1_0.25_224.ckpt --input_binary=true --output_graph=tmp/frozen_mobilenet_v1_025_224.pb --output_node_names=MobileNetV1/Predictions/Reshape_1\r\n\r\nFinally, I got the error:\r\n I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\r\nTraceback (most recent call last):\r\n  File \"tensorflow/python/tools/freeze_graph.py\", line 350, in <module>\r\n    app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"tensorflow/python/tools/freeze_graph.py\", line 249, in main\r\n    FLAGS.saved_model_tags)\r\n  File \"tensorflow/python/tools/freeze_graph.py\", line 239, in freeze_graph\r\n    input_meta_graph_def, input_saved_model_dir, saved_model_tags.split(\",\"))\r\n  File \"tensorflow/python/tools/freeze_graph.py\", line 127, in freeze_graph_with_def_protos\r\n    saver = saver_lib.Saver(var_list=var_list)\r\n  File \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1218, in __init__\r\n    self.build()\r\n  File \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1227, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"/home/libs/anaconda3/envs/python35/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1251, in _build\r\n    raise ValueError(\"No variables to save\")\r\nValueError: No variables to save\r\n\r\nAnother machine:\r\nwindows 7\r\ntensorflow 1.4.0\r\npython 3.6\r\n\r\nUsing the same operations, I can get the frozen .pb file successfully.\r\n\r\nAll source code are not modified.I also  changed the other models to test, and get the same error, need your help?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15630", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15630/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15630/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15630/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15630", "id": 284464089, "node_id": "MDU6SXNzdWUyODQ0NjQwODk=", "number": 15630, "title": "tf.name_scope does not work with tf.layers", "user": {"login": "aybberk", "id": 23614188, "node_id": "MDQ6VXNlcjIzNjE0MTg4", "avatar_url": "https://avatars0.githubusercontent.com/u/23614188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aybberk", "html_url": "https://github.com/aybberk", "followers_url": "https://api.github.com/users/aybberk/followers", "following_url": "https://api.github.com/users/aybberk/following{/other_user}", "gists_url": "https://api.github.com/users/aybberk/gists{/gist_id}", "starred_url": "https://api.github.com/users/aybberk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aybberk/subscriptions", "organizations_url": "https://api.github.com/users/aybberk/orgs", "repos_url": "https://api.github.com/users/aybberk/repos", "events_url": "https://api.github.com/users/aybberk/events{/privacy}", "received_events_url": "https://api.github.com/users/aybberk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-12-25T18:39:45Z", "updated_at": "2018-01-10T19:45:32Z", "closed_at": "2017-12-26T18:06:27Z", "author_association": "NONE", "body_html": "<p>When I define a layer with</p>\n<pre><code>with tf.name_scope(\"MY_SCOPE\"):\n    layer1 = tf.layers.dense(inputs = X,\n                             units = 100,\n                             kernel_initializer = he_init,\n                             activation = tf.nn.elu,\n                             name = \"layer1\")\n\n\n</code></pre>\n<p>and try to get its variables with</p>\n<p><code>tf.global_variables(scope=\"MY_SCOPE\")</code></p>\n<p>it returns nothing because name scope did not apply to the layers from tf.layers</p>\n<p>Shouldn't their name be</p>\n<p>[&lt;tf.Variable 'MY_SCOPE/layer1/kernel:0' shape=(784, 100) dtype=float32_ref&gt;,<br>\n&lt;tf.Variable 'MY_SCOPE/layer1/bias:0' shape=(100,) dtype=float32_ref&gt;]</p>\n<p>instead of</p>\n<p>[&lt;tf.Variable 'layer1/kernel:0' shape=(784, 100) dtype=float32_ref&gt;,<br>\n&lt;tf.Variable 'layer1/bias:0' shape=(100,) dtype=float32_ref&gt;]</p>\n<p>so that I can use my scope to reach my layers? This works with everything but tf.layers module.</p>", "body_text": "When I define a layer with\nwith tf.name_scope(\"MY_SCOPE\"):\n    layer1 = tf.layers.dense(inputs = X,\n                             units = 100,\n                             kernel_initializer = he_init,\n                             activation = tf.nn.elu,\n                             name = \"layer1\")\n\n\n\nand try to get its variables with\ntf.global_variables(scope=\"MY_SCOPE\")\nit returns nothing because name scope did not apply to the layers from tf.layers\nShouldn't their name be\n[<tf.Variable 'MY_SCOPE/layer1/kernel:0' shape=(784, 100) dtype=float32_ref>,\n<tf.Variable 'MY_SCOPE/layer1/bias:0' shape=(100,) dtype=float32_ref>]\ninstead of\n[<tf.Variable 'layer1/kernel:0' shape=(784, 100) dtype=float32_ref>,\n<tf.Variable 'layer1/bias:0' shape=(100,) dtype=float32_ref>]\nso that I can use my scope to reach my layers? This works with everything but tf.layers module.", "body": "When I define a layer with\r\n```\r\nwith tf.name_scope(\"MY_SCOPE\"):\r\n    layer1 = tf.layers.dense(inputs = X,\r\n                             units = 100,\r\n                             kernel_initializer = he_init,\r\n                             activation = tf.nn.elu,\r\n                             name = \"layer1\")\r\n\r\n\r\n```\r\n\r\nand try to get its variables with\r\n\r\n`tf.global_variables(scope=\"MY_SCOPE\")`\r\n\r\nit returns nothing because name scope did not apply to the layers from tf.layers\r\n\r\nShouldn't their name be\r\n\r\n[<tf.Variable 'MY_SCOPE/layer1/kernel:0' shape=(784, 100) dtype=float32_ref>,\r\n <tf.Variable 'MY_SCOPE/layer1/bias:0' shape=(100,) dtype=float32_ref>]\r\n\r\ninstead of\r\n\r\n[<tf.Variable 'layer1/kernel:0' shape=(784, 100) dtype=float32_ref>,\r\n <tf.Variable 'layer1/bias:0' shape=(100,) dtype=float32_ref>]\r\n\r\nso that I can use my scope to reach my layers? This works with everything but tf.layers module."}
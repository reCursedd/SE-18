{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/159730003", "html_url": "https://github.com/tensorflow/tensorflow/issues/352#issuecomment-159730003", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/352", "id": 159730003, "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTczMDAwMw==", "user": {"login": "NickShahML", "id": 14891677, "node_id": "MDQ6VXNlcjE0ODkxNjc3", "avatar_url": "https://avatars2.githubusercontent.com/u/14891677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NickShahML", "html_url": "https://github.com/NickShahML", "followers_url": "https://api.github.com/users/NickShahML/followers", "following_url": "https://api.github.com/users/NickShahML/following{/other_user}", "gists_url": "https://api.github.com/users/NickShahML/gists{/gist_id}", "starred_url": "https://api.github.com/users/NickShahML/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NickShahML/subscriptions", "organizations_url": "https://api.github.com/users/NickShahML/orgs", "repos_url": "https://api.github.com/users/NickShahML/repos", "events_url": "https://api.github.com/users/NickShahML/events{/privacy}", "received_events_url": "https://api.github.com/users/NickShahML/received_events", "type": "User", "site_admin": false}, "created_at": "2015-11-25T20:57:47Z", "updated_at": "2015-11-25T20:57:47Z", "author_association": "NONE", "body_html": "<p>Sure! Here is the pool allocation when it <em>does</em> work -- GRU with 1024 cells at batch size 2:</p>\n<pre><code>W tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 7923 get requests, put_count=3499 evicted_count=1000 eviction_rate=0.285796 and unsatisfied allocation rate=0.697211\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 100 to 110\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 4623 get requests, put_count=2605 evicted_count=1000 eviction_rate=0.383877 and unsatisfied allocation rate=0.656284\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 176 to 193\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 6 get requests, put_count=2029 evicted_count=2000 eviction_rate=0.985707 and unsatisfied allocation rate=0\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 4 get requests, put_count=1034 evicted_count=1000 eviction_rate=0.967118 and unsatisfied allocation rate=0\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 4 get requests, put_count=1044 evicted_count=1000 eviction_rate=0.957854 and unsatisfied allocation rate=0\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 0 get requests, put_count=1054 evicted_count=1000 eviction_rate=0.948767 and unsatisfied allocation rate=-nan\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 0 get requests, put_count=1087 evicted_count=1000 eviction_rate=0.919963 and unsatisfied allocation rate=-nan\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 7337 get requests, put_count=6254 evicted_count=2000 eviction_rate=0.319795 and unsatisfied allocation rate=0.437509\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 1400 to 1540\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 12607 get requests, put_count=10862 evicted_count=1000 eviction_rate=0.0920641 and unsatisfied allocation rate=0.235583\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 2478 to 2725\n</code></pre>\n<p>Here is 2 GRU layers of 1024 batch size of 2. When it runs out of memory, the error message keeps repeating over and over again. I've included the print out right as it is about to compute. You can see that it starts to allocate and pool data but then it simply runs out:</p>\n<pre><code>I tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 256 (256B) Pool: chunks: 2048 free: 247 cumulative malloc: 10736 cumulative freed: 8935\nNumber of chunks: 2048, in_use chunks: 1801\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 512 (512B) Pool: chunks: 64 free: 64 cumulative malloc: 360 cumulative freed: 360\nNumber of chunks: 64, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1024 (1.0KiB) Pool: chunks: 64 free: 62 cumulative malloc: 352 cumulative freed: 350\nNumber of chunks: 64, in_use chunks: 2\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2048 (2.0KiB) Pool: chunks: 128 free: 128 cumulative malloc: 414 cumulative freed: 414\nNumber of chunks: 128, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4096 (4.0KiB) Pool: chunks: 256 free: 2 cumulative malloc: 963 cumulative freed: 709\nNumber of chunks: 256, in_use chunks: 254\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8192 (8.0KiB) Pool: chunks: 128 free: 63 cumulative malloc: 1052 cumulative freed: 987\nNumber of chunks: 128, in_use chunks: 65\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 16384 (16.0KiB) Pool: chunks: 1344 free: 709 cumulative malloc: 14046 cumulative freed: 13411\nNumber of chunks: 1344, in_use chunks: 635\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 32768 (32.0KiB) Pool: chunks: 384 free: 247 cumulative malloc: 2187 cumulative freed: 2050\nNumber of chunks: 384, in_use chunks: 137\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 65536 (64.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 9 cumulative freed: 9\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 131072 (128.0KiB) Pool: chunks: 2 free: 1 cumulative malloc: 2 cumulative freed: 1\nNumber of chunks: 2, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 229376 (224.0KiB) Pool: chunks: 44 free: 44 cumulative malloc: 242 cumulative freed: 242\nNumber of chunks: 44, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 327680 (320.0KiB) Pool: chunks: 4 free: 3 cumulative malloc: 4 cumulative freed: 3\nNumber of chunks: 4, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 425984 (416.0KiB) Pool: chunks: 68 free: 68 cumulative malloc: 796 cumulative freed: 796\nNumber of chunks: 68, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 524288 (512.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 6 cumulative freed: 6\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1048576 (1.00MiB) Pool: chunks: 190 free: 69 cumulative malloc: 768 cumulative freed: 647\nNumber of chunks: 190, in_use chunks: 121\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2228224 (2.12MiB) Pool: chunks: 119 free: 119 cumulative malloc: 276 cumulative freed: 276\nNumber of chunks: 119, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4456448 (4.25MiB) Pool: chunks: 62 free: 0 cumulative malloc: 164 cumulative freed: 102\nNumber of chunks: 62, in_use chunks: 61\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8912896 (8.50MiB) Pool: chunks: 123 free: 0 cumulative malloc: 529 cumulative freed: 406\nNumber of chunks: 123, in_use chunks: 122\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 17825792 (17.00MiB) Pool: chunks: 61 free: 0 cumulative malloc: 226 cumulative freed: 165\nNumber of chunks: 61, in_use chunks: 60\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 41943040 (40.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 67108864 (64.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2 cumulative freed: 2\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 134217728 (128.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 335544320 (320.00MiB) Pool: chunks: 7 free: 3 cumulative malloc: 22 cumulative freed: 18\nNumber of chunks: 7, in_use chunks: 4\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:345] Aggregate Region Memory: 5596086272 (5.21GiB)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:347] Aggregate Chunk Memory: 5595824128 (5.21GiB)\nW tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:89] Out of GPU memory, see memory state dump above\nW tensorflow/core/kernels/matmul_op.cc:143] Resource exhausted: OOM when allocating tensor with shapedim { size: 2048 } dim { size: 1024 }\nW tensorflow/core/common_runtime/executor.cc:1027] 0x58dae900 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 2048 } dim { size: 1024 }\n     [[Node: gradients_3/model_with_buckets/embedding_attention_seq2seq_3/embedding_attention_decoder/attention_decoder/GRUCell_4/Candidate/Linear/MatMul_grad/MatMul_1 = MatMul[T=DT_FLOAT, transpose_a=true, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](model_with_buckets/embedding_attention_seq2seq_3/embedding_attention_decoder/attention_decoder/GRUCell_4/Candidate/Linear/concat, gradients_3/model_with_buckets/embedding_attention_seq2seq_3/embedding_attention_decoder/attention_decoder/GRUCell_4/Candidate/add_grad/Reshape)]]\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 256 (256B) Pool: chunks: 2048 free: 247 cumulative malloc: 10736 cumulative freed: 8935\nNumber of chunks: 2048, in_use chunks: 1801\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 512 (512B) Pool: chunks: 64 free: 64 cumulative malloc: 360 cumulative freed: 360\nNumber of chunks: 64, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1024 (1.0KiB) Pool: chunks: 64 free: 62 cumulative malloc: 352 cumulative freed: 350\nNumber of chunks: 64, in_use chunks: 2\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2048 (2.0KiB) Pool: chunks: 128 free: 128 cumulative malloc: 414 cumulative freed: 414\nNumber of chunks: 128, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4096 (4.0KiB) Pool: chunks: 256 free: 2 cumulative malloc: 963 cumulative freed: 709\nNumber of chunks: 256, in_use chunks: 254\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8192 (8.0KiB) Pool: chunks: 128 free: 63 cumulative malloc: 1052 cumulative freed: 987\nNumber of chunks: 128, in_use chunks: 65\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 16384 (16.0KiB) Pool: chunks: 1344 free: 710 cumulative malloc: 14046 cumulative freed: 13412\nNumber of chunks: 1344, in_use chunks: 634\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 32768 (32.0KiB) Pool: chunks: 384 free: 248 cumulative malloc: 2187 cumulative freed: 2051\nNumber of chunks: 384, in_use chunks: 136\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 65536 (64.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 9 cumulative freed: 9\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 131072 (128.0KiB) Pool: chunks: 2 free: 1 cumulative malloc: 2 cumulative freed: 1\nNumber of chunks: 2, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 229376 (224.0KiB) Pool: chunks: 44 free: 44 cumulative malloc: 242 cumulative freed: 242\nNumber of chunks: 44, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 327680 (320.0KiB) Pool: chunks: 4 free: 3 cumulative malloc: 4 cumulative freed: 3\nNumber of chunks: 4, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 425984 (416.0KiB) Pool: chunks: 68 free: 68 cumulative malloc: 796 cumulative freed: 796\nNumber of chunks: 68, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 524288 (512.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 6 cumulative freed: 6\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1048576 (1.00MiB) Pool: chunks: 190 free: 69 cumulative malloc: 768 cumulative freed: 647\nNumber of chunks: 190, in_use chunks: 121\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2228224 (2.12MiB) Pool: chunks: 119 free: 119 cumulative malloc: 276 cumulative freed: 276\nNumber of chunks: 119, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4456448 (4.25MiB) Pool: chunks: 62 free: 0 cumulative malloc: 164 cumulative freed: 102\nNumber of chunks: 62, in_use chunks: 61\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8912896 (8.50MiB) Pool: chunks: 123 free: 0 cumulative malloc: 529 cumulative freed: 406\nNumber of chunks: 123, in_use chunks: 122\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 17825792 (17.00MiB) Pool: chunks: 61 free: 0 cumulative malloc: 226 cumulative freed: 165\nNumber of chunks: 61, in_use chunks: 60\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 41943040 (40.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 67108864 (64.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2 cumulative freed: 2\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 134217728 (128.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 335544320 (320.00MiB) Pool: chunks: 7 free: 3 cumulative malloc: 22 cumulative freed: 18\nNumber of chunks: 7, in_use chunks: 4\n</code></pre>\n<p>It will keep repeating this over and over again.</p>\n<p>Has anyone had similar problems? It just doesn't seem right that a 1024 GRU should barely fit on 5gb of memory. I am purely doing text to text (50 words input and 50 words output), so the input data shouldn't be that heavy. Any help would be <strong>immensely</strong> appreciated!</p>", "body_text": "Sure! Here is the pool allocation when it does work -- GRU with 1024 cells at batch size 2:\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 7923 get requests, put_count=3499 evicted_count=1000 eviction_rate=0.285796 and unsatisfied allocation rate=0.697211\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 100 to 110\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 4623 get requests, put_count=2605 evicted_count=1000 eviction_rate=0.383877 and unsatisfied allocation rate=0.656284\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 176 to 193\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 6 get requests, put_count=2029 evicted_count=2000 eviction_rate=0.985707 and unsatisfied allocation rate=0\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 4 get requests, put_count=1034 evicted_count=1000 eviction_rate=0.967118 and unsatisfied allocation rate=0\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 4 get requests, put_count=1044 evicted_count=1000 eviction_rate=0.957854 and unsatisfied allocation rate=0\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 0 get requests, put_count=1054 evicted_count=1000 eviction_rate=0.948767 and unsatisfied allocation rate=-nan\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 0 get requests, put_count=1087 evicted_count=1000 eviction_rate=0.919963 and unsatisfied allocation rate=-nan\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 7337 get requests, put_count=6254 evicted_count=2000 eviction_rate=0.319795 and unsatisfied allocation rate=0.437509\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 1400 to 1540\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 12607 get requests, put_count=10862 evicted_count=1000 eviction_rate=0.0920641 and unsatisfied allocation rate=0.235583\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 2478 to 2725\n\nHere is 2 GRU layers of 1024 batch size of 2. When it runs out of memory, the error message keeps repeating over and over again. I've included the print out right as it is about to compute. You can see that it starts to allocate and pool data but then it simply runs out:\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 256 (256B) Pool: chunks: 2048 free: 247 cumulative malloc: 10736 cumulative freed: 8935\nNumber of chunks: 2048, in_use chunks: 1801\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 512 (512B) Pool: chunks: 64 free: 64 cumulative malloc: 360 cumulative freed: 360\nNumber of chunks: 64, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1024 (1.0KiB) Pool: chunks: 64 free: 62 cumulative malloc: 352 cumulative freed: 350\nNumber of chunks: 64, in_use chunks: 2\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2048 (2.0KiB) Pool: chunks: 128 free: 128 cumulative malloc: 414 cumulative freed: 414\nNumber of chunks: 128, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4096 (4.0KiB) Pool: chunks: 256 free: 2 cumulative malloc: 963 cumulative freed: 709\nNumber of chunks: 256, in_use chunks: 254\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8192 (8.0KiB) Pool: chunks: 128 free: 63 cumulative malloc: 1052 cumulative freed: 987\nNumber of chunks: 128, in_use chunks: 65\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 16384 (16.0KiB) Pool: chunks: 1344 free: 709 cumulative malloc: 14046 cumulative freed: 13411\nNumber of chunks: 1344, in_use chunks: 635\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 32768 (32.0KiB) Pool: chunks: 384 free: 247 cumulative malloc: 2187 cumulative freed: 2050\nNumber of chunks: 384, in_use chunks: 137\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 65536 (64.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 9 cumulative freed: 9\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 131072 (128.0KiB) Pool: chunks: 2 free: 1 cumulative malloc: 2 cumulative freed: 1\nNumber of chunks: 2, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 229376 (224.0KiB) Pool: chunks: 44 free: 44 cumulative malloc: 242 cumulative freed: 242\nNumber of chunks: 44, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 327680 (320.0KiB) Pool: chunks: 4 free: 3 cumulative malloc: 4 cumulative freed: 3\nNumber of chunks: 4, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 425984 (416.0KiB) Pool: chunks: 68 free: 68 cumulative malloc: 796 cumulative freed: 796\nNumber of chunks: 68, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 524288 (512.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 6 cumulative freed: 6\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1048576 (1.00MiB) Pool: chunks: 190 free: 69 cumulative malloc: 768 cumulative freed: 647\nNumber of chunks: 190, in_use chunks: 121\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2228224 (2.12MiB) Pool: chunks: 119 free: 119 cumulative malloc: 276 cumulative freed: 276\nNumber of chunks: 119, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4456448 (4.25MiB) Pool: chunks: 62 free: 0 cumulative malloc: 164 cumulative freed: 102\nNumber of chunks: 62, in_use chunks: 61\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8912896 (8.50MiB) Pool: chunks: 123 free: 0 cumulative malloc: 529 cumulative freed: 406\nNumber of chunks: 123, in_use chunks: 122\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 17825792 (17.00MiB) Pool: chunks: 61 free: 0 cumulative malloc: 226 cumulative freed: 165\nNumber of chunks: 61, in_use chunks: 60\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 41943040 (40.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 67108864 (64.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2 cumulative freed: 2\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 134217728 (128.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 335544320 (320.00MiB) Pool: chunks: 7 free: 3 cumulative malloc: 22 cumulative freed: 18\nNumber of chunks: 7, in_use chunks: 4\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:345] Aggregate Region Memory: 5596086272 (5.21GiB)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:347] Aggregate Chunk Memory: 5595824128 (5.21GiB)\nW tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:89] Out of GPU memory, see memory state dump above\nW tensorflow/core/kernels/matmul_op.cc:143] Resource exhausted: OOM when allocating tensor with shapedim { size: 2048 } dim { size: 1024 }\nW tensorflow/core/common_runtime/executor.cc:1027] 0x58dae900 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 2048 } dim { size: 1024 }\n     [[Node: gradients_3/model_with_buckets/embedding_attention_seq2seq_3/embedding_attention_decoder/attention_decoder/GRUCell_4/Candidate/Linear/MatMul_grad/MatMul_1 = MatMul[T=DT_FLOAT, transpose_a=true, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](model_with_buckets/embedding_attention_seq2seq_3/embedding_attention_decoder/attention_decoder/GRUCell_4/Candidate/Linear/concat, gradients_3/model_with_buckets/embedding_attention_seq2seq_3/embedding_attention_decoder/attention_decoder/GRUCell_4/Candidate/add_grad/Reshape)]]\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 256 (256B) Pool: chunks: 2048 free: 247 cumulative malloc: 10736 cumulative freed: 8935\nNumber of chunks: 2048, in_use chunks: 1801\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 512 (512B) Pool: chunks: 64 free: 64 cumulative malloc: 360 cumulative freed: 360\nNumber of chunks: 64, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1024 (1.0KiB) Pool: chunks: 64 free: 62 cumulative malloc: 352 cumulative freed: 350\nNumber of chunks: 64, in_use chunks: 2\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2048 (2.0KiB) Pool: chunks: 128 free: 128 cumulative malloc: 414 cumulative freed: 414\nNumber of chunks: 128, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4096 (4.0KiB) Pool: chunks: 256 free: 2 cumulative malloc: 963 cumulative freed: 709\nNumber of chunks: 256, in_use chunks: 254\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8192 (8.0KiB) Pool: chunks: 128 free: 63 cumulative malloc: 1052 cumulative freed: 987\nNumber of chunks: 128, in_use chunks: 65\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 16384 (16.0KiB) Pool: chunks: 1344 free: 710 cumulative malloc: 14046 cumulative freed: 13412\nNumber of chunks: 1344, in_use chunks: 634\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 32768 (32.0KiB) Pool: chunks: 384 free: 248 cumulative malloc: 2187 cumulative freed: 2051\nNumber of chunks: 384, in_use chunks: 136\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 65536 (64.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 9 cumulative freed: 9\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 131072 (128.0KiB) Pool: chunks: 2 free: 1 cumulative malloc: 2 cumulative freed: 1\nNumber of chunks: 2, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 229376 (224.0KiB) Pool: chunks: 44 free: 44 cumulative malloc: 242 cumulative freed: 242\nNumber of chunks: 44, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 327680 (320.0KiB) Pool: chunks: 4 free: 3 cumulative malloc: 4 cumulative freed: 3\nNumber of chunks: 4, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 425984 (416.0KiB) Pool: chunks: 68 free: 68 cumulative malloc: 796 cumulative freed: 796\nNumber of chunks: 68, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 524288 (512.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 6 cumulative freed: 6\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1048576 (1.00MiB) Pool: chunks: 190 free: 69 cumulative malloc: 768 cumulative freed: 647\nNumber of chunks: 190, in_use chunks: 121\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2228224 (2.12MiB) Pool: chunks: 119 free: 119 cumulative malloc: 276 cumulative freed: 276\nNumber of chunks: 119, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4456448 (4.25MiB) Pool: chunks: 62 free: 0 cumulative malloc: 164 cumulative freed: 102\nNumber of chunks: 62, in_use chunks: 61\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8912896 (8.50MiB) Pool: chunks: 123 free: 0 cumulative malloc: 529 cumulative freed: 406\nNumber of chunks: 123, in_use chunks: 122\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 17825792 (17.00MiB) Pool: chunks: 61 free: 0 cumulative malloc: 226 cumulative freed: 165\nNumber of chunks: 61, in_use chunks: 60\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 41943040 (40.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 67108864 (64.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2 cumulative freed: 2\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 134217728 (128.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 335544320 (320.00MiB) Pool: chunks: 7 free: 3 cumulative malloc: 22 cumulative freed: 18\nNumber of chunks: 7, in_use chunks: 4\n\nIt will keep repeating this over and over again.\nHas anyone had similar problems? It just doesn't seem right that a 1024 GRU should barely fit on 5gb of memory. I am purely doing text to text (50 words input and 50 words output), so the input data shouldn't be that heavy. Any help would be immensely appreciated!", "body": "Sure! Here is the pool allocation when it _does_ work -- GRU with 1024 cells at batch size 2:\n\n```\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 7923 get requests, put_count=3499 evicted_count=1000 eviction_rate=0.285796 and unsatisfied allocation rate=0.697211\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 100 to 110\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 4623 get requests, put_count=2605 evicted_count=1000 eviction_rate=0.383877 and unsatisfied allocation rate=0.656284\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 176 to 193\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 6 get requests, put_count=2029 evicted_count=2000 eviction_rate=0.985707 and unsatisfied allocation rate=0\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 4 get requests, put_count=1034 evicted_count=1000 eviction_rate=0.967118 and unsatisfied allocation rate=0\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 4 get requests, put_count=1044 evicted_count=1000 eviction_rate=0.957854 and unsatisfied allocation rate=0\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 0 get requests, put_count=1054 evicted_count=1000 eviction_rate=0.948767 and unsatisfied allocation rate=-nan\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 0 get requests, put_count=1087 evicted_count=1000 eviction_rate=0.919963 and unsatisfied allocation rate=-nan\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 7337 get requests, put_count=6254 evicted_count=2000 eviction_rate=0.319795 and unsatisfied allocation rate=0.437509\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 1400 to 1540\nW tensorflow/core/common_runtime/gpu/pool_allocator.cc:227] PoolAllocator: After 12607 get requests, put_count=10862 evicted_count=1000 eviction_rate=0.0920641 and unsatisfied allocation rate=0.235583\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:239] Raising pool_size_limit_ from 2478 to 2725\n```\n\nHere is 2 GRU layers of 1024 batch size of 2. When it runs out of memory, the error message keeps repeating over and over again. I've included the print out right as it is about to compute. You can see that it starts to allocate and pool data but then it simply runs out:\n\n```\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 256 (256B) Pool: chunks: 2048 free: 247 cumulative malloc: 10736 cumulative freed: 8935\nNumber of chunks: 2048, in_use chunks: 1801\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 512 (512B) Pool: chunks: 64 free: 64 cumulative malloc: 360 cumulative freed: 360\nNumber of chunks: 64, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1024 (1.0KiB) Pool: chunks: 64 free: 62 cumulative malloc: 352 cumulative freed: 350\nNumber of chunks: 64, in_use chunks: 2\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2048 (2.0KiB) Pool: chunks: 128 free: 128 cumulative malloc: 414 cumulative freed: 414\nNumber of chunks: 128, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4096 (4.0KiB) Pool: chunks: 256 free: 2 cumulative malloc: 963 cumulative freed: 709\nNumber of chunks: 256, in_use chunks: 254\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8192 (8.0KiB) Pool: chunks: 128 free: 63 cumulative malloc: 1052 cumulative freed: 987\nNumber of chunks: 128, in_use chunks: 65\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 16384 (16.0KiB) Pool: chunks: 1344 free: 709 cumulative malloc: 14046 cumulative freed: 13411\nNumber of chunks: 1344, in_use chunks: 635\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 32768 (32.0KiB) Pool: chunks: 384 free: 247 cumulative malloc: 2187 cumulative freed: 2050\nNumber of chunks: 384, in_use chunks: 137\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 65536 (64.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 9 cumulative freed: 9\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 131072 (128.0KiB) Pool: chunks: 2 free: 1 cumulative malloc: 2 cumulative freed: 1\nNumber of chunks: 2, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 229376 (224.0KiB) Pool: chunks: 44 free: 44 cumulative malloc: 242 cumulative freed: 242\nNumber of chunks: 44, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 327680 (320.0KiB) Pool: chunks: 4 free: 3 cumulative malloc: 4 cumulative freed: 3\nNumber of chunks: 4, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 425984 (416.0KiB) Pool: chunks: 68 free: 68 cumulative malloc: 796 cumulative freed: 796\nNumber of chunks: 68, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 524288 (512.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 6 cumulative freed: 6\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1048576 (1.00MiB) Pool: chunks: 190 free: 69 cumulative malloc: 768 cumulative freed: 647\nNumber of chunks: 190, in_use chunks: 121\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2228224 (2.12MiB) Pool: chunks: 119 free: 119 cumulative malloc: 276 cumulative freed: 276\nNumber of chunks: 119, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4456448 (4.25MiB) Pool: chunks: 62 free: 0 cumulative malloc: 164 cumulative freed: 102\nNumber of chunks: 62, in_use chunks: 61\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8912896 (8.50MiB) Pool: chunks: 123 free: 0 cumulative malloc: 529 cumulative freed: 406\nNumber of chunks: 123, in_use chunks: 122\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 17825792 (17.00MiB) Pool: chunks: 61 free: 0 cumulative malloc: 226 cumulative freed: 165\nNumber of chunks: 61, in_use chunks: 60\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 41943040 (40.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 67108864 (64.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2 cumulative freed: 2\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 134217728 (128.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 335544320 (320.00MiB) Pool: chunks: 7 free: 3 cumulative malloc: 22 cumulative freed: 18\nNumber of chunks: 7, in_use chunks: 4\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:345] Aggregate Region Memory: 5596086272 (5.21GiB)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:347] Aggregate Chunk Memory: 5595824128 (5.21GiB)\nW tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:89] Out of GPU memory, see memory state dump above\nW tensorflow/core/kernels/matmul_op.cc:143] Resource exhausted: OOM when allocating tensor with shapedim { size: 2048 } dim { size: 1024 }\nW tensorflow/core/common_runtime/executor.cc:1027] 0x58dae900 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 2048 } dim { size: 1024 }\n     [[Node: gradients_3/model_with_buckets/embedding_attention_seq2seq_3/embedding_attention_decoder/attention_decoder/GRUCell_4/Candidate/Linear/MatMul_grad/MatMul_1 = MatMul[T=DT_FLOAT, transpose_a=true, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](model_with_buckets/embedding_attention_seq2seq_3/embedding_attention_decoder/attention_decoder/GRUCell_4/Candidate/Linear/concat, gradients_3/model_with_buckets/embedding_attention_seq2seq_3/embedding_attention_decoder/attention_decoder/GRUCell_4/Candidate/add_grad/Reshape)]]\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 256 (256B) Pool: chunks: 2048 free: 247 cumulative malloc: 10736 cumulative freed: 8935\nNumber of chunks: 2048, in_use chunks: 1801\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 512 (512B) Pool: chunks: 64 free: 64 cumulative malloc: 360 cumulative freed: 360\nNumber of chunks: 64, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1024 (1.0KiB) Pool: chunks: 64 free: 62 cumulative malloc: 352 cumulative freed: 350\nNumber of chunks: 64, in_use chunks: 2\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2048 (2.0KiB) Pool: chunks: 128 free: 128 cumulative malloc: 414 cumulative freed: 414\nNumber of chunks: 128, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4096 (4.0KiB) Pool: chunks: 256 free: 2 cumulative malloc: 963 cumulative freed: 709\nNumber of chunks: 256, in_use chunks: 254\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8192 (8.0KiB) Pool: chunks: 128 free: 63 cumulative malloc: 1052 cumulative freed: 987\nNumber of chunks: 128, in_use chunks: 65\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 16384 (16.0KiB) Pool: chunks: 1344 free: 710 cumulative malloc: 14046 cumulative freed: 13412\nNumber of chunks: 1344, in_use chunks: 634\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 32768 (32.0KiB) Pool: chunks: 384 free: 248 cumulative malloc: 2187 cumulative freed: 2051\nNumber of chunks: 384, in_use chunks: 136\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 65536 (64.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 9 cumulative freed: 9\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 131072 (128.0KiB) Pool: chunks: 2 free: 1 cumulative malloc: 2 cumulative freed: 1\nNumber of chunks: 2, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 229376 (224.0KiB) Pool: chunks: 44 free: 44 cumulative malloc: 242 cumulative freed: 242\nNumber of chunks: 44, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 327680 (320.0KiB) Pool: chunks: 4 free: 3 cumulative malloc: 4 cumulative freed: 3\nNumber of chunks: 4, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 425984 (416.0KiB) Pool: chunks: 68 free: 68 cumulative malloc: 796 cumulative freed: 796\nNumber of chunks: 68, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 524288 (512.0KiB) Pool: chunks: 2 free: 2 cumulative malloc: 6 cumulative freed: 6\nNumber of chunks: 2, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1048576 (1.00MiB) Pool: chunks: 190 free: 69 cumulative malloc: 768 cumulative freed: 647\nNumber of chunks: 190, in_use chunks: 121\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2228224 (2.12MiB) Pool: chunks: 119 free: 119 cumulative malloc: 276 cumulative freed: 276\nNumber of chunks: 119, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4456448 (4.25MiB) Pool: chunks: 62 free: 0 cumulative malloc: 164 cumulative freed: 102\nNumber of chunks: 62, in_use chunks: 61\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 8912896 (8.50MiB) Pool: chunks: 123 free: 0 cumulative malloc: 529 cumulative freed: 406\nNumber of chunks: 123, in_use chunks: 122\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 17825792 (17.00MiB) Pool: chunks: 61 free: 0 cumulative malloc: 226 cumulative freed: 165\nNumber of chunks: 61, in_use chunks: 60\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 41943040 (40.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 67108864 (64.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2 cumulative freed: 2\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 134217728 (128.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 335544320 (320.00MiB) Pool: chunks: 7 free: 3 cumulative malloc: 22 cumulative freed: 18\nNumber of chunks: 7, in_use chunks: 4\n```\n\nIt will keep repeating this over and over again.\n\nHas anyone had similar problems? It just doesn't seem right that a 1024 GRU should barely fit on 5gb of memory. I am purely doing text to text (50 words input and 50 words output), so the input data shouldn't be that heavy. Any help would be **immensely** appreciated! \n"}
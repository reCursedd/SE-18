{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/925", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/925/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/925/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/925/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/925", "id": 129701026, "node_id": "MDU6SXNzdWUxMjk3MDEwMjY=", "number": 925, "title": "Android demo crashes on Android 6 devices", "user": {"login": "thagikura", "id": 796361, "node_id": "MDQ6VXNlcjc5NjM2MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/796361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thagikura", "html_url": "https://github.com/thagikura", "followers_url": "https://api.github.com/users/thagikura/followers", "following_url": "https://api.github.com/users/thagikura/following{/other_user}", "gists_url": "https://api.github.com/users/thagikura/gists{/gist_id}", "starred_url": "https://api.github.com/users/thagikura/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thagikura/subscriptions", "organizations_url": "https://api.github.com/users/thagikura/orgs", "repos_url": "https://api.github.com/users/thagikura/repos", "events_url": "https://api.github.com/users/thagikura/events{/privacy}", "received_events_url": "https://api.github.com/users/thagikura/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-01-29T08:29:15Z", "updated_at": "2016-02-02T08:00:14Z", "closed_at": "2016-02-02T08:00:14Z", "author_association": "CONTRIBUTOR", "body_html": "<p>When I tried to run the Android demo, it instantly crashed when I opened the app.<br>\nThe CameraConnectionFragment doesn't handle the runtime permission for camera.</p>\n<p>The code needs to handle the runtime permission.</p>\n<pre><code>01-29 17:23:43.694 15962-15962/org.tensorflow.demo E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: org.tensorflow.demo, PID: 15962\njava.lang.SecurityException\n    at android.os.BinderProxy.transactNative(Native Method)\n    at android.os.BinderProxy.transact(Binder.java:503)\n    at android.hardware.ICameraService$Stub$Proxy.connectDevice(ICameraService.java:364)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at android.hardware.camera2.utils.Decorator.invoke(Decorator.java:80)\n    at java.lang.reflect.Proxy.invoke(Proxy.java:393)\n    at $Proxy0.connectDevice(Unknown Source)\n    at android.hardware.camera2.CameraManager.openCameraDeviceUserAsync(CameraManager.java:321)\n    at android.hardware.camera2.CameraManager.openCamera(CameraManager.java:457)\n    at org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:380)\n    at org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:63)\n    at org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:96)\n    at android.view.TextureView.getHardwareLayer(TextureView.java:368)\n    at android.view.View.updateDisplayListIfDirty(View.java:15151)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.updateDisplayListIfDirty(View.java:15169)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.draw(View.java:16181)\n    at android.view.View.updateDisplayListIfDirty(View.java:15174)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.updateDisplayListIfDirty(View.java:15169)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.updateDisplayListIfDirty(View.java:15169)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.draw(View.java:16181)\n    at com.android.internal.policy.PhoneWindow$DecorView.draw(PhoneWindow.java:2690)\n    at android.view.View.updateDisplayListIfDirty(View.java:15174)\n    at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:281)\n    at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:287)\n    at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:322)\n    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2615)\n    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2434)\n    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2067)\n    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1107)\n    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6013)\n    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:858)\n    at android.view.Choreographer.doCallbacks(Choreographer.java:670)\n    at android.view.Choreographer.doFrame(Choreographer.java:606)\n    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:844)\n    at android.os.Handler.handleCallback(Handler.java:739)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:148)\n    at android.app.ActivityThread.main(ActivityThread.java:5417)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n</code></pre>", "body_text": "When I tried to run the Android demo, it instantly crashed when I opened the app.\nThe CameraConnectionFragment doesn't handle the runtime permission for camera.\nThe code needs to handle the runtime permission.\n01-29 17:23:43.694 15962-15962/org.tensorflow.demo E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: org.tensorflow.demo, PID: 15962\njava.lang.SecurityException\n    at android.os.BinderProxy.transactNative(Native Method)\n    at android.os.BinderProxy.transact(Binder.java:503)\n    at android.hardware.ICameraService$Stub$Proxy.connectDevice(ICameraService.java:364)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at android.hardware.camera2.utils.Decorator.invoke(Decorator.java:80)\n    at java.lang.reflect.Proxy.invoke(Proxy.java:393)\n    at $Proxy0.connectDevice(Unknown Source)\n    at android.hardware.camera2.CameraManager.openCameraDeviceUserAsync(CameraManager.java:321)\n    at android.hardware.camera2.CameraManager.openCamera(CameraManager.java:457)\n    at org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:380)\n    at org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:63)\n    at org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:96)\n    at android.view.TextureView.getHardwareLayer(TextureView.java:368)\n    at android.view.View.updateDisplayListIfDirty(View.java:15151)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.updateDisplayListIfDirty(View.java:15169)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.draw(View.java:16181)\n    at android.view.View.updateDisplayListIfDirty(View.java:15174)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.updateDisplayListIfDirty(View.java:15169)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.updateDisplayListIfDirty(View.java:15169)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.draw(View.java:16181)\n    at com.android.internal.policy.PhoneWindow$DecorView.draw(PhoneWindow.java:2690)\n    at android.view.View.updateDisplayListIfDirty(View.java:15174)\n    at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:281)\n    at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:287)\n    at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:322)\n    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2615)\n    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2434)\n    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2067)\n    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1107)\n    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6013)\n    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:858)\n    at android.view.Choreographer.doCallbacks(Choreographer.java:670)\n    at android.view.Choreographer.doFrame(Choreographer.java:606)\n    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:844)\n    at android.os.Handler.handleCallback(Handler.java:739)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:148)\n    at android.app.ActivityThread.main(ActivityThread.java:5417)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)", "body": "When I tried to run the Android demo, it instantly crashed when I opened the app.\nThe CameraConnectionFragment doesn't handle the runtime permission for camera.\n\nThe code needs to handle the runtime permission.\n\n```\n01-29 17:23:43.694 15962-15962/org.tensorflow.demo E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: org.tensorflow.demo, PID: 15962\njava.lang.SecurityException\n    at android.os.BinderProxy.transactNative(Native Method)\n    at android.os.BinderProxy.transact(Binder.java:503)\n    at android.hardware.ICameraService$Stub$Proxy.connectDevice(ICameraService.java:364)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at android.hardware.camera2.utils.Decorator.invoke(Decorator.java:80)\n    at java.lang.reflect.Proxy.invoke(Proxy.java:393)\n    at $Proxy0.connectDevice(Unknown Source)\n    at android.hardware.camera2.CameraManager.openCameraDeviceUserAsync(CameraManager.java:321)\n    at android.hardware.camera2.CameraManager.openCamera(CameraManager.java:457)\n    at org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:380)\n    at org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:63)\n    at org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:96)\n    at android.view.TextureView.getHardwareLayer(TextureView.java:368)\n    at android.view.View.updateDisplayListIfDirty(View.java:15151)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.updateDisplayListIfDirty(View.java:15169)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.draw(View.java:16181)\n    at android.view.View.updateDisplayListIfDirty(View.java:15174)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.updateDisplayListIfDirty(View.java:15169)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.updateDisplayListIfDirty(View.java:15169)\n    at android.view.View.draw(View.java:15948)\n    at android.view.ViewGroup.drawChild(ViewGroup.java:3609)\n    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3399)\n    at android.view.View.draw(View.java:16181)\n    at com.android.internal.policy.PhoneWindow$DecorView.draw(PhoneWindow.java:2690)\n    at android.view.View.updateDisplayListIfDirty(View.java:15174)\n    at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:281)\n    at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:287)\n    at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:322)\n    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2615)\n    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2434)\n    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2067)\n    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1107)\n    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6013)\n    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:858)\n    at android.view.Choreographer.doCallbacks(Choreographer.java:670)\n    at android.view.Choreographer.doFrame(Choreographer.java:606)\n    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:844)\n    at android.os.Handler.handleCallback(Handler.java:739)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:148)\n    at android.app.ActivityThread.main(ActivityThread.java:5417)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17461", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17461/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17461/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17461/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17461", "id": 302537484, "node_id": "MDU6SXNzdWUzMDI1Mzc0ODQ=", "number": 17461, "title": "Operators not supported: ExpandDims, Prod, Slice.", "user": {"login": "BKZero", "id": 18680778, "node_id": "MDQ6VXNlcjE4NjgwNzc4", "avatar_url": "https://avatars2.githubusercontent.com/u/18680778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BKZero", "html_url": "https://github.com/BKZero", "followers_url": "https://api.github.com/users/BKZero/followers", "following_url": "https://api.github.com/users/BKZero/following{/other_user}", "gists_url": "https://api.github.com/users/BKZero/gists{/gist_id}", "starred_url": "https://api.github.com/users/BKZero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BKZero/subscriptions", "organizations_url": "https://api.github.com/users/BKZero/orgs", "repos_url": "https://api.github.com/users/BKZero/repos", "events_url": "https://api.github.com/users/BKZero/events{/privacy}", "received_events_url": "https://api.github.com/users/BKZero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2018-03-06T02:14:29Z", "updated_at": "2018-08-10T15:51:06Z", "closed_at": "2018-07-12T22:51:23Z", "author_association": "NONE", "body_html": "<p><strong>System information</strong></p>\n<p>OS Platform and Distribution (Linux Ubuntu 14.04):<br>\nTensorFlow installed from (build from source):<br>\nTensorFlow version (1.5):<br>\nBazel version(0.8.1)<br>\nCPU mode</p>\n<p><strong>Describe the problem</strong><br>\ni use an concat operator when i am training my own model, but when i convert it to .tflite by using toco tools, i got this error:<br>\nF tensorflow/contrib/lite/toco/tflite/export.cc:303] Some of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need custom implementations: ExpandDims, Prod, Slice.<br>\nAborted (core dumped)<br>\ni do not use the operators it lists.<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1783288/models.zip\">models.zip</a></p>\n<p>there are three models definition in the zip file, the model2 adn model3 works, but model1 does not. The only difference between them is model1 use:</p>\n<pre><code>feature = tf.concat([flat1,flat2], 1)\n</code></pre>\n<p>to make it more clear, i quote the code block:</p>\n<pre><code>with tf.variable_scope(scope, 'lite_v1', [images, num_classes]):\n\n    images_input = tf.placeholder_with_default(images, shape=[None, 35, 35, 1], name='InputPlaceholder')\n\n    net = slim.conv2d(images_input, 12, [4, 4], padding='VALID', scope='conv1')\n    end_points['conv1'] = net\n\n    net = slim.max_pool2d(net, [2, 2], 2, scope='pool4')\n    end_points['pool4'] = net\n    \n    flat2 = slim.flatten(net)\n\n    net = slim.conv2d(net, 64, [2, 2], padding='VALID', scope='conv5')\n    end_points['conv5'] = net\n    print(\"conv5\")\n    print(net)\n    flat1 = slim.flatten(net)\n\n    feature = flat2\n    # feature = tf.concat([flat1,flat2], 1)\n\n    with tf.variable_scope('Logits'):\n\n      net = slim.fully_connected(feature, 100, scope='fc3')\n      \n      logits = slim.fully_connected(net, num_classes,\n                                  biases_initializer=tf.zeros_initializer(),\n                                  weights_regularizer=None,\n                                  activation_fn=None,\n                                  scope='logits')\n      end_points['Logits'] = logits\n    output = tf.multiply(logits, 1, name=\"Output\")\n    end_points['Output'] = output\n\n  return logits, end_points\nlite_v1.default_image_size = 35\n</code></pre>", "body_text": "System information\nOS Platform and Distribution (Linux Ubuntu 14.04):\nTensorFlow installed from (build from source):\nTensorFlow version (1.5):\nBazel version(0.8.1)\nCPU mode\nDescribe the problem\ni use an concat operator when i am training my own model, but when i convert it to .tflite by using toco tools, i got this error:\nF tensorflow/contrib/lite/toco/tflite/export.cc:303] Some of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need custom implementations: ExpandDims, Prod, Slice.\nAborted (core dumped)\ni do not use the operators it lists.\nmodels.zip\nthere are three models definition in the zip file, the model2 adn model3 works, but model1 does not. The only difference between them is model1 use:\nfeature = tf.concat([flat1,flat2], 1)\n\nto make it more clear, i quote the code block:\nwith tf.variable_scope(scope, 'lite_v1', [images, num_classes]):\n\n    images_input = tf.placeholder_with_default(images, shape=[None, 35, 35, 1], name='InputPlaceholder')\n\n    net = slim.conv2d(images_input, 12, [4, 4], padding='VALID', scope='conv1')\n    end_points['conv1'] = net\n\n    net = slim.max_pool2d(net, [2, 2], 2, scope='pool4')\n    end_points['pool4'] = net\n    \n    flat2 = slim.flatten(net)\n\n    net = slim.conv2d(net, 64, [2, 2], padding='VALID', scope='conv5')\n    end_points['conv5'] = net\n    print(\"conv5\")\n    print(net)\n    flat1 = slim.flatten(net)\n\n    feature = flat2\n    # feature = tf.concat([flat1,flat2], 1)\n\n    with tf.variable_scope('Logits'):\n\n      net = slim.fully_connected(feature, 100, scope='fc3')\n      \n      logits = slim.fully_connected(net, num_classes,\n                                  biases_initializer=tf.zeros_initializer(),\n                                  weights_regularizer=None,\n                                  activation_fn=None,\n                                  scope='logits')\n      end_points['Logits'] = logits\n    output = tf.multiply(logits, 1, name=\"Output\")\n    end_points['Output'] = output\n\n  return logits, end_points\nlite_v1.default_image_size = 35", "body": "**System information**\r\n\r\nOS Platform and Distribution (Linux Ubuntu 14.04):\r\nTensorFlow installed from (build from source):\r\nTensorFlow version (1.5):\r\nBazel version(0.8.1)\r\nCPU mode\r\n\r\n**Describe the problem**\r\ni use an concat operator when i am training my own model, but when i convert it to .tflite by using toco tools, i got this error:\r\nF tensorflow/contrib/lite/toco/tflite/export.cc:303] Some of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need custom implementations: ExpandDims, Prod, Slice.\r\nAborted (core dumped)\r\ni do not use the operators it lists.\r\n[models.zip](https://github.com/tensorflow/tensorflow/files/1783288/models.zip)\r\n\r\nthere are three models definition in the zip file, the model2 adn model3 works, but model1 does not. The only difference between them is model1 use: \r\n```\r\nfeature = tf.concat([flat1,flat2], 1)\r\n```\r\n\r\nto make it more clear, i quote the code block:\r\n```\r\nwith tf.variable_scope(scope, 'lite_v1', [images, num_classes]):\r\n\r\n    images_input = tf.placeholder_with_default(images, shape=[None, 35, 35, 1], name='InputPlaceholder')\r\n\r\n    net = slim.conv2d(images_input, 12, [4, 4], padding='VALID', scope='conv1')\r\n    end_points['conv1'] = net\r\n\r\n    net = slim.max_pool2d(net, [2, 2], 2, scope='pool4')\r\n    end_points['pool4'] = net\r\n    \r\n    flat2 = slim.flatten(net)\r\n\r\n    net = slim.conv2d(net, 64, [2, 2], padding='VALID', scope='conv5')\r\n    end_points['conv5'] = net\r\n    print(\"conv5\")\r\n    print(net)\r\n    flat1 = slim.flatten(net)\r\n\r\n    feature = flat2\r\n    # feature = tf.concat([flat1,flat2], 1)\r\n\r\n    with tf.variable_scope('Logits'):\r\n\r\n      net = slim.fully_connected(feature, 100, scope='fc3')\r\n      \r\n      logits = slim.fully_connected(net, num_classes,\r\n                                  biases_initializer=tf.zeros_initializer(),\r\n                                  weights_regularizer=None,\r\n                                  activation_fn=None,\r\n                                  scope='logits')\r\n      end_points['Logits'] = logits\r\n    output = tf.multiply(logits, 1, name=\"Output\")\r\n    end_points['Output'] = output\r\n\r\n  return logits, end_points\r\nlite_v1.default_image_size = 35\r\n```\r\n\r\n\r\n\r\n"}
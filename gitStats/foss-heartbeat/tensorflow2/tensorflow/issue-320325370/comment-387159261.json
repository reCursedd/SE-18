{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/387159261", "html_url": "https://github.com/tensorflow/tensorflow/issues/19086#issuecomment-387159261", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19086", "id": 387159261, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzE1OTI2MQ==", "user": {"login": "KineticCookie", "id": 2300703, "node_id": "MDQ6VXNlcjIzMDA3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2300703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KineticCookie", "html_url": "https://github.com/KineticCookie", "followers_url": "https://api.github.com/users/KineticCookie/followers", "following_url": "https://api.github.com/users/KineticCookie/following{/other_user}", "gists_url": "https://api.github.com/users/KineticCookie/gists{/gist_id}", "starred_url": "https://api.github.com/users/KineticCookie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KineticCookie/subscriptions", "organizations_url": "https://api.github.com/users/KineticCookie/orgs", "repos_url": "https://api.github.com/users/KineticCookie/repos", "events_url": "https://api.github.com/users/KineticCookie/events{/privacy}", "received_events_url": "https://api.github.com/users/KineticCookie/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-07T18:30:42Z", "updated_at": "2018-05-07T18:30:58Z", "author_association": "NONE", "body_html": "<p>Hmm. So it defaults to all collections. It's weird, because I ran this snipped of code</p>\n<div class=\"highlight highlight-source-python\"><pre>a <span class=\"pl-k\">=</span> tf.placeholder(<span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float32)\nb <span class=\"pl-k\">=</span> tf.placeholder(<span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float32)\ns <span class=\"pl-k\">=</span> a <span class=\"pl-k\">+</span> b\nsess.graph.add_to_collection(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>TEAM_AB<span class=\"pl-pds\">\"</span></span>, a)\nsess.graph.add_to_collection(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>TEAM_AB<span class=\"pl-pds\">\"</span></span>, b)\nbuilder <span class=\"pl-k\">=</span> tf.saved_model.builder.SavedModelBuilder(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>./model_other<span class=\"pl-pds\">\"</span></span>)\nbuilder.add_meta_graph_and_variables(sess, <span class=\"pl-c1\">...</span>)\nbuilder.save(<span class=\"pl-v\">as_text</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>)</pre></div>\n<p>and I couldn't find any of the <code>collection_def</code> fields.</p>\n<p>But now I checked it again but in other environment, and it works pretty good!</p>\n<pre><code>collection_def {\n    key: \"TEAM_AB\"\n    value {\n      node_list {\n        value: \"Placeholder:0\"\n        value: \"Placeholder_1:0\"\n      }\n    }\n}\n</code></pre>\n<p>Well, that's awkward. I think we could close this FR. Thanks for the help <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3731025\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/allenlavoie\">@allenlavoie</a> !</p>", "body_text": "Hmm. So it defaults to all collections. It's weird, because I ran this snipped of code\na = tf.placeholder(dtype=tf.float32)\nb = tf.placeholder(dtype=tf.float32)\ns = a + b\nsess.graph.add_to_collection(\"TEAM_AB\", a)\nsess.graph.add_to_collection(\"TEAM_AB\", b)\nbuilder = tf.saved_model.builder.SavedModelBuilder(\"./model_other\")\nbuilder.add_meta_graph_and_variables(sess, ...)\nbuilder.save(as_text=True)\nand I couldn't find any of the collection_def fields.\nBut now I checked it again but in other environment, and it works pretty good!\ncollection_def {\n    key: \"TEAM_AB\"\n    value {\n      node_list {\n        value: \"Placeholder:0\"\n        value: \"Placeholder_1:0\"\n      }\n    }\n}\n\nWell, that's awkward. I think we could close this FR. Thanks for the help @allenlavoie !", "body": "Hmm. So it defaults to all collections. It's weird, because I ran this snipped of code\r\n``` python\r\na = tf.placeholder(dtype=tf.float32)\r\nb = tf.placeholder(dtype=tf.float32)\r\ns = a + b\r\nsess.graph.add_to_collection(\"TEAM_AB\", a)\r\nsess.graph.add_to_collection(\"TEAM_AB\", b)\r\nbuilder = tf.saved_model.builder.SavedModelBuilder(\"./model_other\")\r\nbuilder.add_meta_graph_and_variables(sess, ...)\r\nbuilder.save(as_text=True)\r\n```\r\nand I couldn't find any of the `collection_def` fields. \r\n\r\nBut now I checked it again but in other environment, and it works pretty good! \r\n```\r\ncollection_def {\r\n    key: \"TEAM_AB\"\r\n    value {\r\n      node_list {\r\n        value: \"Placeholder:0\"\r\n        value: \"Placeholder_1:0\"\r\n      }\r\n    }\r\n}\r\n```\r\n\r\nWell, that's awkward. I think we could close this FR. Thanks for the help @allenlavoie !"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/262417054", "html_url": "https://github.com/tensorflow/tensorflow/issues/5780#issuecomment-262417054", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5780", "id": 262417054, "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjQxNzA1NA==", "user": {"login": "MikeChenfu", "id": 17817768, "node_id": "MDQ6VXNlcjE3ODE3NzY4", "avatar_url": "https://avatars0.githubusercontent.com/u/17817768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MikeChenfu", "html_url": "https://github.com/MikeChenfu", "followers_url": "https://api.github.com/users/MikeChenfu/followers", "following_url": "https://api.github.com/users/MikeChenfu/following{/other_user}", "gists_url": "https://api.github.com/users/MikeChenfu/gists{/gist_id}", "starred_url": "https://api.github.com/users/MikeChenfu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MikeChenfu/subscriptions", "organizations_url": "https://api.github.com/users/MikeChenfu/orgs", "repos_url": "https://api.github.com/users/MikeChenfu/repos", "events_url": "https://api.github.com/users/MikeChenfu/events{/privacy}", "received_events_url": "https://api.github.com/users/MikeChenfu/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-23T01:44:29Z", "updated_at": "2016-11-23T01:44:29Z", "author_association": "NONE", "body_html": "<p>I have the same problem. I try exporting a protobuf file to Android using</p>\n<p><strong>bazel build tensorflow/python/tools:freeze_graph &amp;&amp;  bazel-bin/tensorflow/python/tools/freeze_graph --input_graph=trainGraph/train.pbtxt --input_checkpoint=trainGraph/checkpoint.ckpt  --output_graph=frozen_graph.pb --output_node_names=softmax.</strong></p>\n<p>To do that, I generated a .pbtxt file using \"<strong>tf.train.write_graph(sess.graph_def,'tarinGraph','train2.pbtxt',False)</strong>\"<br>\nto run freeze_graph on. I saved the protobuf file as binary and run it with freeze_graph, I get the following error:</p>\n<p>Traceback (most recent call last):<br>\nFile \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <br>\ntf.app.run()<br>\nFile \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run<br>\nsys.exit(main(sys.argv[:1] + flags_passthrough))<br>\nFile \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in man<br>\nFLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)<br>\nFile \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 98, in freze_graph<br>\ntext_format.Merge(f.read().decode(\"utf-8\"), input_graph_def)<br>\nFile \"/usr/lib/python2.7/encodings/utf_8.py\", line 16, in decode<br>\nreturn codecs.utf_8_decode(input, errors, True)<br>\nUnicodeDecodeError: 'utf8' codec can't decode byte 0x80 in position 59: invalidstart byte</p>\n<p>Environment info</p>\n<p>Operating System:<br>\nUbuntu 14.04<br>\nTensorflow 0.11.0<br>\nInstallation method : Installing from github sources</p>\n<p>Thanks in advance</p>", "body_text": "I have the same problem. I try exporting a protobuf file to Android using\nbazel build tensorflow/python/tools:freeze_graph &&  bazel-bin/tensorflow/python/tools/freeze_graph --input_graph=trainGraph/train.pbtxt --input_checkpoint=trainGraph/checkpoint.ckpt  --output_graph=frozen_graph.pb --output_node_names=softmax.\nTo do that, I generated a .pbtxt file using \"tf.train.write_graph(sess.graph_def,'tarinGraph','train2.pbtxt',False)\"\nto run freeze_graph on. I saved the protobuf file as binary and run it with freeze_graph, I get the following error:\nTraceback (most recent call last):\nFile \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in \ntf.app.run()\nFile \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\nsys.exit(main(sys.argv[:1] + flags_passthrough))\nFile \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in man\nFLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\nFile \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 98, in freze_graph\ntext_format.Merge(f.read().decode(\"utf-8\"), input_graph_def)\nFile \"/usr/lib/python2.7/encodings/utf_8.py\", line 16, in decode\nreturn codecs.utf_8_decode(input, errors, True)\nUnicodeDecodeError: 'utf8' codec can't decode byte 0x80 in position 59: invalidstart byte\nEnvironment info\nOperating System:\nUbuntu 14.04\nTensorflow 0.11.0\nInstallation method : Installing from github sources\nThanks in advance", "body": "I have the same problem. I try exporting a protobuf file to Android using\r\n\r\n **bazel build tensorflow/python/tools:freeze_graph &&  bazel-bin/tensorflow/python/tools/freeze_graph --input_graph=trainGraph/train.pbtxt --input_checkpoint=trainGraph/checkpoint.ckpt  --output_graph=frozen_graph.pb --output_node_names=softmax.** \r\n\r\nTo do that, I generated a .pbtxt file using \"**tf.train.write_graph(sess.graph_def,'tarinGraph','train2.pbtxt',False)**\"\r\n to run freeze_graph on. I saved the protobuf file as binary and run it with freeze_graph, I get the following error:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <mdule>\r\n    tf.app.run()\r\n  File \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in man\r\n    FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\r\n  File \"/home/user/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.rnfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 98, in freze_graph\r\n    text_format.Merge(f.read().decode(\"utf-8\"), input_graph_def)\r\n  File \"/usr/lib/python2.7/encodings/utf_8.py\", line 16, in decode\r\n    return codecs.utf_8_decode(input, errors, True)\r\nUnicodeDecodeError: 'utf8' codec can't decode byte 0x80 in position 59: invalidstart byte\r\n\r\nEnvironment info\r\n\r\nOperating System:\r\nUbuntu 14.04\r\nTensorflow 0.11.0\r\nInstallation method : Installing from github sources\r\n\r\nThanks in advance"}
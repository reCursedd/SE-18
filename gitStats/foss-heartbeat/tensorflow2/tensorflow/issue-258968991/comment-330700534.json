{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/330700534", "html_url": "https://github.com/tensorflow/tensorflow/issues/13163#issuecomment-330700534", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13163", "id": 330700534, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDcwMDUzNA==", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-19T23:18:23Z", "updated_at": "2017-09-19T23:18:23Z", "author_association": "MEMBER", "body_html": "<p>I tried the most recent HEAD and it seems to be fine?</p>\n<div class=\"highlight highlight-source-python\"><pre>ubuntu<span class=\"pl-k\">@</span>ubuntu<span class=\"pl-k\">~</span><span class=\"pl-ii\">$</span> python\nPython <span class=\"pl-c1\">2.7</span>.12 (default, Nov <span class=\"pl-c1\">19</span> <span class=\"pl-c1\">2016</span>, <span class=\"pl-c1\">0<span class=\"pl-ii\">6</span></span>:<span class=\"pl-c1\">48</span>:<span class=\"pl-c1\">10</span>) \n[<span class=\"pl-c1\">GCC</span> <span class=\"pl-c1\">5.4</span>.0 <span class=\"pl-c1\">20160609</span>] on linux2\nType <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>help<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>copyright<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>credits<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">or</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>license<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">for</span> more information.\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">import</span> numpy <span class=\"pl-k\">as</span> np\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> \n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> key_num <span class=\"pl-k\">=</span> <span class=\"pl-c1\">5</span>\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> key_dim <span class=\"pl-k\">=</span> <span class=\"pl-c1\">2</span>\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> \n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/gpu:0<span class=\"pl-pds\">\"</span></span>):\n<span class=\"pl-c1\">...</span>     keys <span class=\"pl-k\">=</span> tf.tile(tf.expand_dims(tf.range(key_num, <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.int32), <span class=\"pl-c1\">1</span>), [<span class=\"pl-c1\">1</span>, key_dim])\n<span class=\"pl-c1\">...</span>     sess <span class=\"pl-k\">=</span> tf.Session()\n<span class=\"pl-c1\">...</span>     sess.run(tf.global_variables_initializer())\n<span class=\"pl-c1\">...</span>     <span class=\"pl-c1\">print</span>(sess.run(keys))\n<span class=\"pl-c1\">...</span> \n<span class=\"pl-c1\">2017</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">9</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">19</span> <span class=\"pl-c1\">23</span>:<span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">01.817318</span>: I tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>cuda<span class=\"pl-k\">/</span>cuda_gpu_executor.cc:<span class=\"pl-c1\">892</span>] successful <span class=\"pl-c1\">NUMA</span> node read <span class=\"pl-k\">from</span> SysFS had negative value (<span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>), but there must be at least one <span class=\"pl-c1\">NUMA</span> node, so returning <span class=\"pl-c1\">NUMA</span> node zero\n<span class=\"pl-c1\">2017</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">9</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">19</span> <span class=\"pl-c1\">23</span>:<span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">01.817531</span>: I tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_device.cc:<span class=\"pl-c1\">965</span>] Found device <span class=\"pl-c1\">0</span> <span class=\"pl-k\">with</span> properties: \nname: Tesla K80 major: <span class=\"pl-c1\">3</span> minor: <span class=\"pl-c1\">7</span> memoryClockRate(GHz): <span class=\"pl-c1\">0.8235</span>\npciBusID: <span class=\"pl-c1\">0000</span>:<span class=\"pl-c1\">00</span>:<span class=\"pl-ii\">1e</span>.0\ntotalMemory: <span class=\"pl-c1\">11.</span><span class=\"pl-ii\">17GiB</span> freeMemory: <span class=\"pl-c1\">478.</span><span class=\"pl-ii\">38MiB</span>\n<span class=\"pl-c1\">2017</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">9</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">19</span> <span class=\"pl-c1\">23</span>:<span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">01.817557</span>: I tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_device.cc:<span class=\"pl-c1\">1055</span>] Creating TensorFlow device (<span class=\"pl-k\">/</span>device:<span class=\"pl-c1\">GPU</span>:<span class=\"pl-c1\">0</span>) <span class=\"pl-ii\">-&gt;</span> (device: <span class=\"pl-c1\">0</span>, name: Tesla K80, pci bus <span class=\"pl-c1\">id</span>: <span class=\"pl-c1\">0000</span>:<span class=\"pl-c1\">00</span>:<span class=\"pl-ii\">1e</span>.0, compute capability: <span class=\"pl-c1\">3.7</span>)\n[[<span class=\"pl-c1\">0</span> <span class=\"pl-c1\">0</span>]\n [<span class=\"pl-c1\">1</span> <span class=\"pl-c1\">1</span>]\n [<span class=\"pl-c1\">2</span> <span class=\"pl-c1\">2</span>]\n [<span class=\"pl-c1\">3</span> <span class=\"pl-c1\">3</span>]\n [<span class=\"pl-c1\">4</span> <span class=\"pl-c1\">4</span>]]\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> </pre></div>", "body_text": "I tried the most recent HEAD and it seems to be fine?\nubuntu@ubuntu~$ python\nPython 2.7.12 (default, Nov 19 2016, 06:48:10) \n[GCC 5.4.0 20160609] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import tensorflow as tf\n>>> import numpy as np\n>>> \n>>> key_num = 5\n>>> key_dim = 2\n>>> \n>>> with tf.device(\"/gpu:0\"):\n...     keys = tf.tile(tf.expand_dims(tf.range(key_num, dtype=tf.int32), 1), [1, key_dim])\n...     sess = tf.Session()\n...     sess.run(tf.global_variables_initializer())\n...     print(sess.run(keys))\n... \n2017-09-19 23:17:01.817318: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-09-19 23:17:01.817531: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Found device 0 with properties: \nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\npciBusID: 0000:00:1e.0\ntotalMemory: 11.17GiB freeMemory: 478.38MiB\n2017-09-19 23:17:01.817557: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1055] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 0000:00:1e.0, compute capability: 3.7)\n[[0 0]\n [1 1]\n [2 2]\n [3 3]\n [4 4]]\n>>>", "body": "I tried the most recent HEAD and it seems to be fine?\r\n```python\r\nubuntu@ubuntu~$ python\r\nPython 2.7.12 (default, Nov 19 2016, 06:48:10) \r\n[GCC 5.4.0 20160609] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import tensorflow as tf\r\n>>> import numpy as np\r\n>>> \r\n>>> key_num = 5\r\n>>> key_dim = 2\r\n>>> \r\n>>> with tf.device(\"/gpu:0\"):\r\n...     keys = tf.tile(tf.expand_dims(tf.range(key_num, dtype=tf.int32), 1), [1, key_dim])\r\n...     sess = tf.Session()\r\n...     sess.run(tf.global_variables_initializer())\r\n...     print(sess.run(keys))\r\n... \r\n2017-09-19 23:17:01.817318: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2017-09-19 23:17:01.817531: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Found device 0 with properties: \r\nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\r\npciBusID: 0000:00:1e.0\r\ntotalMemory: 11.17GiB freeMemory: 478.38MiB\r\n2017-09-19 23:17:01.817557: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1055] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 0000:00:1e.0, compute capability: 3.7)\r\n[[0 0]\r\n [1 1]\r\n [2 2]\r\n [3 3]\r\n [4 4]]\r\n>>> \r\n```"}
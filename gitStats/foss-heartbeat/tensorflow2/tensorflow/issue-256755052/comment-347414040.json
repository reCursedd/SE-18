{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/347414040", "html_url": "https://github.com/tensorflow/tensorflow/issues/12968#issuecomment-347414040", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12968", "id": 347414040, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzQxNDA0MA==", "user": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-28T04:58:58Z", "updated_at": "2017-11-28T04:58:58Z", "author_association": "MEMBER", "body_html": "<div class=\"email-fragment\">Oh good, yes feel free to send the PR!\n\nOn Nov 28, 2017 12:51 PM, \"MtDersvan\" &lt;notifications@github.com&gt; wrote:\n\n<a class=\"user-mention\" href=\"https://github.com/drpngx\">@drpngx</a> &lt;<a href=\"https://github.com/drpngx\">https://github.com/drpngx</a>&gt; I think the order of parameters doesn't\nneed to be changed, num_true is always the first .attr, so switching it to\nan .input preserves the order. I have a simple working fix that leaves\nalmost everything intact here\n&lt;<a href=\"https://github.com/MtDersvan/tensorflow/tree/r1.4\">https://github.com/MtDersvan/tensorflow/tree/r1.4</a>&gt; onr1.4 branch. If\nyou're interested I can submit a PR.\nI did direct changes to core/ops and core/kernels instead of a contrib\nclone, due to the fact that it was too much of a hassle to replicate all\ncandidate_samplers and range_samplers.\nRight now ops take a single tensor instead of an int per batch.\n\nFuture Work:\nI haven't figured out yet how to make it to work with a list of tensors of\nshape batch_size, so each example in a batch can have it's own num_true.\nBecause rn it needs all items in a batch to have the same number of num_true,\nwhich is inefficient computationally. Also, I left out one check in\nComputeAccidentalHits - .SetShapeFn().\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n&lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"256755052\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12968\" href=\"https://github.com/tensorflow/tensorflow/issues/12968#issuecomment-347412520\">#12968 (comment)</a>&gt;,\nor mute the thread\n&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AT_SbcnvdiUCf0BnrXRhgvPhdDCdEm-bks5s65E_gaJpZM4PTY71\">https://github.com/notifications/unsubscribe-auth/AT_SbcnvdiUCf0BnrXRhgvPhdDCdEm-bks5s65E_gaJpZM4PTY71</a>&gt;\n.</div>", "body_text": "Oh good, yes feel free to send the PR!\n\nOn Nov 28, 2017 12:51 PM, \"MtDersvan\" <notifications@github.com> wrote:\n\n@drpngx <https://github.com/drpngx> I think the order of parameters doesn't\nneed to be changed, num_true is always the first .attr, so switching it to\nan .input preserves the order. I have a simple working fix that leaves\nalmost everything intact here\n<https://github.com/MtDersvan/tensorflow/tree/r1.4> onr1.4 branch. If\nyou're interested I can submit a PR.\nI did direct changes to core/ops and core/kernels instead of a contrib\nclone, due to the fact that it was too much of a hassle to replicate all\ncandidate_samplers and range_samplers.\nRight now ops take a single tensor instead of an int per batch.\n\nFuture Work:\nI haven't figured out yet how to make it to work with a list of tensors of\nshape batch_size, so each example in a batch can have it's own num_true.\nBecause rn it needs all items in a batch to have the same number of num_true,\nwhich is inefficient computationally. Also, I left out one check in\nComputeAccidentalHits - .SetShapeFn().\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n<#12968 (comment)>,\nor mute the thread\n<https://github.com/notifications/unsubscribe-auth/AT_SbcnvdiUCf0BnrXRhgvPhdDCdEm-bks5s65E_gaJpZM4PTY71>\n.", "body": "Oh good, yes feel free to send the PR!\n\nOn Nov 28, 2017 12:51 PM, \"MtDersvan\" <notifications@github.com> wrote:\n\n@drpngx <https://github.com/drpngx> I think the order of parameters doesn't\nneed to be changed, num_true is always the first .attr, so switching it to\nan .input preserves the order. I have a simple working fix that leaves\nalmost everything intact here\n<https://github.com/MtDersvan/tensorflow/tree/r1.4> onr1.4 branch. If\nyou're interested I can submit a PR.\nI did direct changes to core/ops and core/kernels instead of a contrib\nclone, due to the fact that it was too much of a hassle to replicate all\ncandidate_samplers and range_samplers.\nRight now ops take a single tensor instead of an int per batch.\n\nFuture Work:\nI haven't figured out yet how to make it to work with a list of tensors of\nshape batch_size, so each example in a batch can have it's own num_true.\nBecause rn it needs all items in a batch to have the same number of num_true,\nwhich is inefficient computationally. Also, I left out one check in\nComputeAccidentalHits - .SetShapeFn().\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n<https://github.com/tensorflow/tensorflow/issues/12968#issuecomment-347412520>,\nor mute the thread\n<https://github.com/notifications/unsubscribe-auth/AT_SbcnvdiUCf0BnrXRhgvPhdDCdEm-bks5s65E_gaJpZM4PTY71>\n.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/229072543", "html_url": "https://github.com/tensorflow/tensorflow/issues/2740#issuecomment-229072543", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2740", "id": 229072543, "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTA3MjU0Mw==", "user": {"login": "rafaljozefowicz", "id": 2983769, "node_id": "MDQ6VXNlcjI5ODM3Njk=", "avatar_url": "https://avatars1.githubusercontent.com/u/2983769?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rafaljozefowicz", "html_url": "https://github.com/rafaljozefowicz", "followers_url": "https://api.github.com/users/rafaljozefowicz/followers", "following_url": "https://api.github.com/users/rafaljozefowicz/following{/other_user}", "gists_url": "https://api.github.com/users/rafaljozefowicz/gists{/gist_id}", "starred_url": "https://api.github.com/users/rafaljozefowicz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rafaljozefowicz/subscriptions", "organizations_url": "https://api.github.com/users/rafaljozefowicz/orgs", "repos_url": "https://api.github.com/users/rafaljozefowicz/repos", "events_url": "https://api.github.com/users/rafaljozefowicz/events{/privacy}", "received_events_url": "https://api.github.com/users/rafaljozefowicz/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-28T14:48:40Z", "updated_at": "2016-06-28T14:48:40Z", "author_association": "NONE", "body_html": "<p>Isn't it true that ExponentialMovingAverage is used currently almost always outside any scopes? It shouldn't break (many) existing use cases. If I remember correctly, the class simply doesn't work well if the scope name is duplicated and users have to do manual hacking to fix the variable names.</p>\n<p>The workaround that I'm using currently is to wrap the class with</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">with</span> tf.name_scope(<span class=\"pl-c1\">None</span>):\n   ema <span class=\"pl-k\">=</span> tf.train.ExponentialMovingAverage(<span class=\"pl-c1\">...</span>)\n   <span class=\"pl-c\"><span class=\"pl-c\">#</span> [rest of the code]</span></pre></div>", "body_text": "Isn't it true that ExponentialMovingAverage is used currently almost always outside any scopes? It shouldn't break (many) existing use cases. If I remember correctly, the class simply doesn't work well if the scope name is duplicated and users have to do manual hacking to fix the variable names.\nThe workaround that I'm using currently is to wrap the class with\nwith tf.name_scope(None):\n   ema = tf.train.ExponentialMovingAverage(...)\n   # [rest of the code]", "body": "Isn't it true that ExponentialMovingAverage is used currently almost always outside any scopes? It shouldn't break (many) existing use cases. If I remember correctly, the class simply doesn't work well if the scope name is duplicated and users have to do manual hacking to fix the variable names.\n\nThe workaround that I'm using currently is to wrap the class with\n\n``` python\nwith tf.name_scope(None):\n   ema = tf.train.ExponentialMovingAverage(...)\n   # [rest of the code]\n```\n"}
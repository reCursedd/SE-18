{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/212562986", "pull_request_review_id": 149224062, "id": 212562986, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMjU2Mjk4Ng==", "diff_hunk": "@@ -186,22 +186,22 @@ class GdrMemoryManager : public RemoteMemoryManager {\n // TODO(byronyi): remove this class and its registration when the default\n // cpu_allocator() returns visitable allocator, or cpu_allocator() is no\n // longer in use.\n-class BFCRdmaAllocator : public BFCAllocator {\n+class BFCGdrAllocator : public BFCAllocator {\n  public:\n-  BFCRdmaAllocator()\n+  BFCGdrAllocator()\n       : BFCAllocator(new BasicCPUAllocator(port::kNUMANoAffinity), 1LL << 36,\n-                     true, \"cpu_rdma_bfc\") {}\n+                     true, \"cpu_gdr_bfc\") {}\n };\n-class BFCRdmaAllocatorFactory : public AllocatorFactory {\n+class BFCGdrAllocatorFactory : public AllocatorFactory {\n  public:\n-  Allocator* CreateAllocator() override { return new BFCRdmaAllocator; }\n+  Allocator* CreateAllocator() override { return new BFCGdrAllocator; }\n \n   virtual SubAllocator* CreateSubAllocator(int numa_node) {\n     return new BasicCPUAllocator(numa_node);\n   }\n };\n \n-REGISTER_MEM_ALLOCATOR(\"BFCRdmaAllocator\", 101, BFCRdmaAllocatorFactory);\n+REGISTER_MEM_ALLOCATOR(\"BFCGdrAllocator\", 101, BFCGdrAllocatorFactory);", "path": "tensorflow/contrib/gdr/gdr_memory_manager.cc", "position": null, "original_position": 25, "commit_id": "e634e74a1628d763bc826dc733a4167998edde32", "original_commit_id": "e1ca6dca575d58a7ab3264c8907ff05d98a6ddeb", "user": {"login": "byronyi", "id": 2613663, "node_id": "MDQ6VXNlcjI2MTM2NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2613663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/byronyi", "html_url": "https://github.com/byronyi", "followers_url": "https://api.github.com/users/byronyi/followers", "following_url": "https://api.github.com/users/byronyi/following{/other_user}", "gists_url": "https://api.github.com/users/byronyi/gists{/gist_id}", "starred_url": "https://api.github.com/users/byronyi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/byronyi/subscriptions", "organizations_url": "https://api.github.com/users/byronyi/orgs", "repos_url": "https://api.github.com/users/byronyi/repos", "events_url": "https://api.github.com/users/byronyi/events{/privacy}", "received_events_url": "https://api.github.com/users/byronyi/received_events", "type": "User", "site_admin": false}, "body": "Since both classes are just workarounds of non-visitable default cpu_allocator, I guess it does not matter as long as one of them is in effect. We could get rid of them once the default allocator is visitable.", "created_at": "2018-08-24T08:54:54Z", "updated_at": "2018-08-24T14:22:03Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/21766#discussion_r212562986", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21766", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/212562986"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/21766#discussion_r212562986"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21766"}}, "body_html": "<p>Since both classes are just workarounds of non-visitable default cpu_allocator, I guess it does not matter as long as one of them is in effect. We could get rid of them once the default allocator is visitable.</p>", "body_text": "Since both classes are just workarounds of non-visitable default cpu_allocator, I guess it does not matter as long as one of them is in effect. We could get rid of them once the default allocator is visitable.", "in_reply_to_id": 211743084}
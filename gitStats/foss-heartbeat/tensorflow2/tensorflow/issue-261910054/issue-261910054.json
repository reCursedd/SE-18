{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13430", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13430/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13430/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13430/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13430", "id": 261910054, "node_id": "MDU6SXNzdWUyNjE5MTAwNTQ=", "number": 13430, "title": "Unstable numerics in MvNormal KL", "user": {"login": "ferrine", "id": 11705326, "node_id": "MDQ6VXNlcjExNzA1MzI2", "avatar_url": "https://avatars0.githubusercontent.com/u/11705326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ferrine", "html_url": "https://github.com/ferrine", "followers_url": "https://api.github.com/users/ferrine/followers", "following_url": "https://api.github.com/users/ferrine/following{/other_user}", "gists_url": "https://api.github.com/users/ferrine/gists{/gist_id}", "starred_url": "https://api.github.com/users/ferrine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ferrine/subscriptions", "organizations_url": "https://api.github.com/users/ferrine/orgs", "repos_url": "https://api.github.com/users/ferrine/repos", "events_url": "https://api.github.com/users/ferrine/events{/privacy}", "received_events_url": "https://api.github.com/users/ferrine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-10-01T11:38:05Z", "updated_at": "2017-10-26T04:21:17Z", "closed_at": "2017-10-25T23:46:31Z", "author_association": "NONE", "body_html": "<p><a href=\"https://github.com/tensorflow/tensorflow/blame/0cfb16e025b3d20e8c8aca431fc0887814817c44/tensorflow/contrib/distributions/python/ops/mvn_linear_operator.py#L302\">https://github.com/tensorflow/tensorflow/blame/0cfb16e025b3d20e8c8aca431fc0887814817c44/tensorflow/contrib/distributions/python/ops/mvn_linear_operator.py#L302</a></p>\n<p>This line should look like this:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">squared_frobenius_norm</span>(<span class=\"pl-smi\">x</span>):                                          \n    <span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span>Helper to make KL calculation slightly more readable. And Stable!</span>\n<span class=\"pl-s\">    square(sqrt(sqnorm)) = sqnorm                                                 </span>\n<span class=\"pl-s\">    <span class=\"pl-pds\">\"\"\"</span></span>                                                                 \n    <span class=\"pl-c\"><span class=\"pl-c\">#</span> http://mathworld.wolfram.com/FrobeniusNorm.html                   </span>\n    <span class=\"pl-k\">return</span> tf.reduce_sum(x <span class=\"pl-k\">*</span> tf.conj(x), <span class=\"pl-v\">axis</span><span class=\"pl-k\">=</span>[<span class=\"pl-k\">-</span><span class=\"pl-c1\">2</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>], <span class=\"pl-v\">keep_dims</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>)</pre></div>\n<p>It yields NaN in grad KL(q||p) if q=p</p>", "body_text": "https://github.com/tensorflow/tensorflow/blame/0cfb16e025b3d20e8c8aca431fc0887814817c44/tensorflow/contrib/distributions/python/ops/mvn_linear_operator.py#L302\nThis line should look like this:\ndef squared_frobenius_norm(x):                                          \n    \"\"\"Helper to make KL calculation slightly more readable. And Stable!\n    square(sqrt(sqnorm)) = sqnorm                                                 \n    \"\"\"                                                                 \n    # http://mathworld.wolfram.com/FrobeniusNorm.html                   \n    return tf.reduce_sum(x * tf.conj(x), axis=[-2, -1], keep_dims=False)\nIt yields NaN in grad KL(q||p) if q=p", "body": "https://github.com/tensorflow/tensorflow/blame/0cfb16e025b3d20e8c8aca431fc0887814817c44/tensorflow/contrib/distributions/python/ops/mvn_linear_operator.py#L302\r\n\r\nThis line should look like this:\r\n\r\n```python\r\ndef squared_frobenius_norm(x):                                          \r\n    \"\"\"Helper to make KL calculation slightly more readable. And Stable!\r\n    square(sqrt(sqnorm)) = sqnorm                                                 \r\n    \"\"\"                                                                 \r\n    # http://mathworld.wolfram.com/FrobeniusNorm.html                   \r\n    return tf.reduce_sum(x * tf.conj(x), axis=[-2, -1], keep_dims=False)\r\n```\r\n\r\nIt yields NaN in grad KL(q||p) if q=p "}
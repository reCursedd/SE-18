{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/135633783", "pull_request_review_id": 59065325, "id": 135633783, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTYzMzc4Mw==", "diff_hunk": "@@ -318,15 +318,16 @@ def train(self, delay_secs=None):\n     # Otherwise, the servers will wait to connect to each other before starting\n     # to train. We might as well start as soon as we can.\n     config = self._estimator.config\n-    if (config.cluster_spec and config.master and\n-        config.environment == run_config.Environment.LOCAL):\n-      logging.warn(\"ClusterSpec and master are provided, but environment is \"\n-                   \"set to 'local'. Set environment to 'cloud' if you intend \"\n-                   \"to use the distributed runtime.\")\n-    if (config.environment != run_config.Environment.LOCAL and\n-        config.environment != run_config.Environment.GOOGLE and\n-        config.cluster_spec and config.master):\n-      self._start_server()\n+    if isinstance(config, run_config.RunConfig):\n+      if (config.cluster_spec and config.master and\n+          config.environment == run_config.Environment.LOCAL):\n+        logging.warn(\"ClusterSpec and master are provided, but environment is \"\n+                     \"set to 'local'. Set environment to 'cloud' if you intend \"\n+                     \"to use the distributed runtime.\")\n+      if (config.environment != run_config.Environment.LOCAL and\n+          config.environment != run_config.Environment.GOOGLE and\n+          config.cluster_spec and config.master):\n+        self._start_server()", "path": "tensorflow/contrib/learn/python/learn/experiment.py", "position": 22, "original_position": 22, "commit_id": "a3a212ae4043359943a2cabb08b205f55c1cdfd8", "original_commit_id": "c088a10635a757fc165d76f821f5be571f2a194a", "user": {"login": "xiejw", "id": 1184671, "node_id": "MDQ6VXNlcjExODQ2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1184671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiejw", "html_url": "https://github.com/xiejw", "followers_url": "https://api.github.com/users/xiejw/followers", "following_url": "https://api.github.com/users/xiejw/following{/other_user}", "gists_url": "https://api.github.com/users/xiejw/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiejw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiejw/subscriptions", "organizations_url": "https://api.github.com/users/xiejw/orgs", "repos_url": "https://api.github.com/users/xiejw/repos", "events_url": "https://api.github.com/users/xiejw/events{/privacy}", "received_events_url": "https://api.github.com/users/xiejw/received_events", "type": "User", "site_admin": false}, "body": "Second thought: we should error out in this case. I see no way core RunConfig can work in distributed env now.  i.e.,\r\n\r\nif isinstance(config, run_config.RunConfig):\r\n  _start_server_logic\r\nelif config.cluster_spec and config.master:\r\n  raise ValueError('For distributed runtime, Experiment class works with tf.contrib.learn.RunConfig only now, but provided <class_type>.')\r\n", "created_at": "2017-08-28T21:00:56Z", "updated_at": "2017-09-06T13:29:38Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/11385#discussion_r135633783", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/11385", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/135633783"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/11385#discussion_r135633783"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/11385"}}, "body_html": "<p>Second thought: we should error out in this case. I see no way core RunConfig can work in distributed env now.  i.e.,</p>\n<p>if isinstance(config, run_config.RunConfig):<br>\n_start_server_logic<br>\nelif config.cluster_spec and config.master:<br>\nraise ValueError('For distributed runtime, Experiment class works with tf.contrib.learn.RunConfig only now, but provided &lt;class_type&gt;.')</p>", "body_text": "Second thought: we should error out in this case. I see no way core RunConfig can work in distributed env now.  i.e.,\nif isinstance(config, run_config.RunConfig):\n_start_server_logic\nelif config.cluster_spec and config.master:\nraise ValueError('For distributed runtime, Experiment class works with tf.contrib.learn.RunConfig only now, but provided <class_type>.')", "in_reply_to_id": 135631850}
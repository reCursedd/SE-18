{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/353143718", "html_url": "https://github.com/tensorflow/tensorflow/issues/13221#issuecomment-353143718", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13221", "id": 353143718, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzE0MzcxOA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-20T18:25:25Z", "updated_at": "2017-12-20T18:25:25Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">tf.ones/tf.zeros is more efficient if you only create the graph once and\nrun it through the session many times.  if you're adding new tf.zeros each\ntime you call session.run, you're already slowing down your execution by\nmodifying the graph between executions - and that's a bigger problem.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Wed, Dec 20, 2017 at 10:16 AM, Yaroslav Bulatov ***@***.*** &gt; wrote:\n The summarize this bug -- there's memory leak because tf.ones/tf.zeros use\n tf.constant. tf.constant doesn't deallocate it's memory by design.\n Recommended fix is to move tf.ones/tf.zeros to always tf.fill instead.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"259649989\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/13221\" href=\"https://github.com/tensorflow/tensorflow/issues/13221#issuecomment-353141471\">#13221 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABtimwgw7uwpbdODbnLlh9IuvyBURQ8Pks5tCU8HgaJpZM4Pf_kL\">https://github.com/notifications/unsubscribe-auth/ABtimwgw7uwpbdODbnLlh9IuvyBURQ8Pks5tCU8HgaJpZM4Pf_kL</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "tf.ones/tf.zeros is more efficient if you only create the graph once and\nrun it through the session many times.  if you're adding new tf.zeros each\ntime you call session.run, you're already slowing down your execution by\nmodifying the graph between executions - and that's a bigger problem.\n\u2026\nOn Wed, Dec 20, 2017 at 10:16 AM, Yaroslav Bulatov ***@***.*** > wrote:\n The summarize this bug -- there's memory leak because tf.ones/tf.zeros use\n tf.constant. tf.constant doesn't deallocate it's memory by design.\n Recommended fix is to move tf.ones/tf.zeros to always tf.fill instead.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#13221 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABtimwgw7uwpbdODbnLlh9IuvyBURQ8Pks5tCU8HgaJpZM4Pf_kL>\n .", "body": "tf.ones/tf.zeros is more efficient if you only create the graph once and\nrun it through the session many times.  if you're adding new tf.zeros each\ntime you call session.run, you're already slowing down your execution by\nmodifying the graph between executions - and that's a bigger problem.\n\nOn Wed, Dec 20, 2017 at 10:16 AM, Yaroslav Bulatov <notifications@github.com\n> wrote:\n\n> The summarize this bug -- there's memory leak because tf.ones/tf.zeros use\n> tf.constant. tf.constant doesn't deallocate it's memory by design.\n> Recommended fix is to move tf.ones/tf.zeros to always tf.fill instead.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/13221#issuecomment-353141471>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtimwgw7uwpbdODbnLlh9IuvyBURQ8Pks5tCU8HgaJpZM4Pf_kL>\n> .\n>\n"}
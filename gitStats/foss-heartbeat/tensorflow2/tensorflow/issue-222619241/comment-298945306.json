{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/298945306", "html_url": "https://github.com/tensorflow/tensorflow/issues/9301#issuecomment-298945306", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9301", "id": 298945306, "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODk0NTMwNg==", "user": {"login": "andrehentz", "id": 25754898, "node_id": "MDQ6VXNlcjI1NzU0ODk4", "avatar_url": "https://avatars3.githubusercontent.com/u/25754898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrehentz", "html_url": "https://github.com/andrehentz", "followers_url": "https://api.github.com/users/andrehentz/followers", "following_url": "https://api.github.com/users/andrehentz/following{/other_user}", "gists_url": "https://api.github.com/users/andrehentz/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrehentz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrehentz/subscriptions", "organizations_url": "https://api.github.com/users/andrehentz/orgs", "repos_url": "https://api.github.com/users/andrehentz/repos", "events_url": "https://api.github.com/users/andrehentz/events{/privacy}", "received_events_url": "https://api.github.com/users/andrehentz/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-03T15:24:47Z", "updated_at": "2017-05-03T15:24:47Z", "author_association": "CONTRIBUTOR", "body_html": "<ol>\n<li>\n<p>Yes, please build the graph_transform tool with a fresh install. It is OK to keep both on your host machine, just download the fresh install to a separate directory.</p>\n</li>\n<li>\n<p>Be sure to use all the transforms for 8-bit calculations:</p>\n</li>\n</ol>\n<pre><code>bazel build tensorflow/tools/graph_transforms:transform_graph\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\n--in_graph=./frozen_model_inception_resnet_v2.pb \\\n--out_graph=./quantized_weights_and_nodes_inception_resnet_v2.pb \\\n--inputs='Placeholder_only' \\\n--outputs='InceptionResnetV2/Logits/Predictions' \\\n--transforms='\n  add_default_attributes\n  strip_unused_nodes(type=float, shape=\"1,299,299,3\")\n  remove_nodes(op=Identity, op=CheckNumerics)\n  fold_constants(ignore_errors=true)\n  fold_batch_norms\n  fold_old_batch_norms\n  quantize_weights\n  quantize_nodes\n  strip_unused_nodes\n  sort_by_execution_order'\n</code></pre>\n<ol start=\"3\">\n<li>Sorry I can't help with the Jetson's hack. As I said earlier, you can try applying the relevant changes manually.</li>\n</ol>", "body_text": "Yes, please build the graph_transform tool with a fresh install. It is OK to keep both on your host machine, just download the fresh install to a separate directory.\n\n\nBe sure to use all the transforms for 8-bit calculations:\n\n\nbazel build tensorflow/tools/graph_transforms:transform_graph\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\n--in_graph=./frozen_model_inception_resnet_v2.pb \\\n--out_graph=./quantized_weights_and_nodes_inception_resnet_v2.pb \\\n--inputs='Placeholder_only' \\\n--outputs='InceptionResnetV2/Logits/Predictions' \\\n--transforms='\n  add_default_attributes\n  strip_unused_nodes(type=float, shape=\"1,299,299,3\")\n  remove_nodes(op=Identity, op=CheckNumerics)\n  fold_constants(ignore_errors=true)\n  fold_batch_norms\n  fold_old_batch_norms\n  quantize_weights\n  quantize_nodes\n  strip_unused_nodes\n  sort_by_execution_order'\n\n\nSorry I can't help with the Jetson's hack. As I said earlier, you can try applying the relevant changes manually.", "body": "1) Yes, please build the graph_transform tool with a fresh install. It is OK to keep both on your host machine, just download the fresh install to a separate directory.\r\n\r\n2) Be sure to use all the transforms for 8-bit calculations:\r\n```\r\nbazel build tensorflow/tools/graph_transforms:transform_graph\r\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\r\n--in_graph=./frozen_model_inception_resnet_v2.pb \\\r\n--out_graph=./quantized_weights_and_nodes_inception_resnet_v2.pb \\\r\n--inputs='Placeholder_only' \\\r\n--outputs='InceptionResnetV2/Logits/Predictions' \\\r\n--transforms='\r\n  add_default_attributes\r\n  strip_unused_nodes(type=float, shape=\"1,299,299,3\")\r\n  remove_nodes(op=Identity, op=CheckNumerics)\r\n  fold_constants(ignore_errors=true)\r\n  fold_batch_norms\r\n  fold_old_batch_norms\r\n  quantize_weights\r\n  quantize_nodes\r\n  strip_unused_nodes\r\n  sort_by_execution_order'\r\n```\r\n\r\n3) Sorry I can't help with the Jetson's hack. As I said earlier, you can try applying the relevant changes manually."}
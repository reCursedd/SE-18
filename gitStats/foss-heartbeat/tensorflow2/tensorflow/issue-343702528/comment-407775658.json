{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/407775658", "html_url": "https://github.com/tensorflow/tensorflow/issues/21058#issuecomment-407775658", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21058", "id": 407775658, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzc3NTY1OA==", "user": {"login": "xiao1228", "id": 11752039, "node_id": "MDQ6VXNlcjExNzUyMDM5", "avatar_url": "https://avatars3.githubusercontent.com/u/11752039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiao1228", "html_url": "https://github.com/xiao1228", "followers_url": "https://api.github.com/users/xiao1228/followers", "following_url": "https://api.github.com/users/xiao1228/following{/other_user}", "gists_url": "https://api.github.com/users/xiao1228/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiao1228/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiao1228/subscriptions", "organizations_url": "https://api.github.com/users/xiao1228/orgs", "repos_url": "https://api.github.com/users/xiao1228/repos", "events_url": "https://api.github.com/users/xiao1228/events{/privacy}", "received_events_url": "https://api.github.com/users/xiao1228/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-25T14:32:34Z", "updated_at": "2018-07-25T14:32:34Z", "author_association": "NONE", "body_html": "<p>I have figured out issue is due to the slim.batch_norm, like other people was having the same problem as well (i.e. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"304011211\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/models/issues/3556\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/models/issues/3556/hovercard\" href=\"https://github.com/tensorflow/models/issues/3556\">tensorflow/models#3556</a>)<br>\nBUT in the mobilenet_v1 eval code, <code>scope = mobilenet_v1.mobilenet_v1_arg_scope(is_training=False,weight_decay=0.0)</code><br>\nif I set the is_training to True in eval, it outputs different predictions, if I set is_training to False (which I think I should) the predictions are the same for different images.</p>\n<p>I see other people are mention training using <code>slim.learning.create_train_op</code> can solve the prolem, this is what I am using. but I am still having the issue.</p>\n<p>So I am confused about the slim.batch_norm in mobilenetv1 now, should I set the is_training to True in eval? or is there anything else that I am missing?<br>\nThank you in advance.</p>", "body_text": "I have figured out issue is due to the slim.batch_norm, like other people was having the same problem as well (i.e. tensorflow/models#3556)\nBUT in the mobilenet_v1 eval code, scope = mobilenet_v1.mobilenet_v1_arg_scope(is_training=False,weight_decay=0.0)\nif I set the is_training to True in eval, it outputs different predictions, if I set is_training to False (which I think I should) the predictions are the same for different images.\nI see other people are mention training using slim.learning.create_train_op can solve the prolem, this is what I am using. but I am still having the issue.\nSo I am confused about the slim.batch_norm in mobilenetv1 now, should I set the is_training to True in eval? or is there anything else that I am missing?\nThank you in advance.", "body": "I have figured out issue is due to the slim.batch_norm, like other people was having the same problem as well (i.e. https://github.com/tensorflow/models/issues/3556) \r\nBUT in the mobilenet_v1 eval code, `scope = mobilenet_v1.mobilenet_v1_arg_scope(is_training=False,weight_decay=0.0)` \r\nif I set the is_training to True in eval, it outputs different predictions, if I set is_training to False (which I think I should) the predictions are the same for different images.\r\n\r\nI see other people are mention training using `slim.learning.create_train_op` can solve the prolem, this is what I am using. but I am still having the issue.\r\n\r\nSo I am confused about the slim.batch_norm in mobilenetv1 now, should I set the is_training to True in eval? or is there anything else that I am missing?\r\nThank you in advance."}
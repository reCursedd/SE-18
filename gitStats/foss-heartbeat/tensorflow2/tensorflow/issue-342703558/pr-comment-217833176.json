{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/217833176", "pull_request_review_id": 155649957, "id": 217833176, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNzgzMzE3Ng==", "diff_hunk": "@@ -2567,7 +2591,90 @@ ENTRY main {\n   Literal arg = LiteralUtil::CreateR1<bfloat16>(\n       {bfloat16(1.0f), bfloat16(3.0f), bfloat16(-2.0f), bfloat16(42.0f)});\n   Literal expected = LiteralUtil::CreateR0<bfloat16>(bfloat16(44.0f));\n-  EXPECT_TRUE(LiteralTestUtil::Equal(expected, Evaluate({&arg})));\n+  TF_ASSERT_OK_AND_ASSIGN(Literal result, Evaluate({&arg}));\n+  EXPECT_TRUE(LiteralTestUtil::Equal(expected, result));\n+}\n+\n+TEST_P(HloEvaluatorTest, DontFailOnCall) {\n+  // The following test used to trigger unimplemented error instead of returning\n+  // false. This was due to HandleCall in HloEvaluator using ConsumeValueOrDie\n+  // to get a literal value, however this is not possible with RNG.\n+  const string hlo_text = R\"(", "path": "tensorflow/compiler/xla/service/hlo_evaluator_test.cc", "position": 700, "original_position": 683, "commit_id": "79e843fcd6ae68783f05bc96c73dc9eb8a1c9808", "original_commit_id": "2a021c2628bc67ba8df669aeeb4ef74bf83c99cd", "user": {"login": "kayzhu", "id": 1530877, "node_id": "MDQ6VXNlcjE1MzA4Nzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1530877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kayzhu", "html_url": "https://github.com/kayzhu", "followers_url": "https://api.github.com/users/kayzhu/followers", "following_url": "https://api.github.com/users/kayzhu/following{/other_user}", "gists_url": "https://api.github.com/users/kayzhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/kayzhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kayzhu/subscriptions", "organizations_url": "https://api.github.com/users/kayzhu/orgs", "repos_url": "https://api.github.com/users/kayzhu/repos", "events_url": "https://api.github.com/users/kayzhu/events{/privacy}", "received_events_url": "https://api.github.com/users/kayzhu/received_events", "type": "User", "site_admin": false}, "body": "This comment is not describing the current state and could be confusing. Instead I wonder if just saying that \"RNG triggers unimplemented error within the Call, and we verify that the Evaluator does fail in such case\" would be better?\r\n\r\nSame for the comments for the test cases below as well.", "created_at": "2018-09-14T20:27:07Z", "updated_at": "2018-10-16T08:07:51Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/20967#discussion_r217833176", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/20967", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/217833176"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/20967#discussion_r217833176"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/20967"}}, "body_html": "<p>This comment is not describing the current state and could be confusing. Instead I wonder if just saying that \"RNG triggers unimplemented error within the Call, and we verify that the Evaluator does fail in such case\" would be better?</p>\n<p>Same for the comments for the test cases below as well.</p>", "body_text": "This comment is not describing the current state and could be confusing. Instead I wonder if just saying that \"RNG triggers unimplemented error within the Call, and we verify that the Evaluator does fail in such case\" would be better?\nSame for the comments for the test cases below as well."}
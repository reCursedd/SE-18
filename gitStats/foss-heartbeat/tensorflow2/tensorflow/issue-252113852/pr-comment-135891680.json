{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/135891680", "pull_request_review_id": 59351680, "id": 135891680, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTg5MTY4MA==", "diff_hunk": "@@ -583,6 +618,27 @@ class ScopedConvolutionDescriptor {\n       LOG(FATAL) << \"could not set cudnn convolution descriptor: \"\n                  << ToString(status);\n     }\n+    // NOTE(benbarsdell): This only applies if tensor op math is enabled\n+    //                      and algo selection is set to kDefaultAlgorithm.\n+    this->set_use_tensor_op_math(true);\n+  }\n+\n+  void set_use_tensor_op_math(bool use_tensor_op_math) {\n+#if CUDNN_VERSION >= 7000\n+    cudnnMathType_t math_type =\n+        (use_tensor_op_math ?\n+         CUDNN_TENSOR_OP_MATH :\n+         CUDNN_DEFAULT_MATH);\n+    if (TensorOpMath<true>::IsEnabled()) {", "path": "tensorflow/stream_executor/cuda/cuda_dnn.cc", "position": null, "original_position": 71, "commit_id": "8ddc5af4dc546baea4e075c153d834731b4487bf", "original_commit_id": "a8c1de381d99956d2f3b01f01537a76acdc51394", "user": {"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}, "body": "Out of curiosity, is there a legitimate reason why people don't want to use tensor_op when it is available? Since we have autotuning, it will never get slower. \r\n\r\nSo if the problem is functional, we might need to consider whether we should make the control op/subgraph level or globally? \r\n", "created_at": "2017-08-29T19:39:45Z", "updated_at": "2017-09-15T18:08:26Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/12503#discussion_r135891680", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12503", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/135891680"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/12503#discussion_r135891680"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12503"}}, "body_html": "<p>Out of curiosity, is there a legitimate reason why people don't want to use tensor_op when it is available? Since we have autotuning, it will never get slower.</p>\n<p>So if the problem is functional, we might need to consider whether we should make the control op/subgraph level or globally?</p>", "body_text": "Out of curiosity, is there a legitimate reason why people don't want to use tensor_op when it is available? Since we have autotuning, it will never get slower.\nSo if the problem is functional, we might need to consider whether we should make the control op/subgraph level or globally?"}
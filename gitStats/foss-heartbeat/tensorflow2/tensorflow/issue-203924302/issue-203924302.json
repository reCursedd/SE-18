{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7140", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7140/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7140/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7140/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7140", "id": 203924302, "node_id": "MDU6SXNzdWUyMDM5MjQzMDI=", "number": 7140, "title": "Invert bijector in tf.contrib.distributions fails to generate samples", "user": {"login": "dustinvtran", "id": 2569867, "node_id": "MDQ6VXNlcjI1Njk4Njc=", "avatar_url": "https://avatars1.githubusercontent.com/u/2569867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dustinvtran", "html_url": "https://github.com/dustinvtran", "followers_url": "https://api.github.com/users/dustinvtran/followers", "following_url": "https://api.github.com/users/dustinvtran/following{/other_user}", "gists_url": "https://api.github.com/users/dustinvtran/gists{/gist_id}", "starred_url": "https://api.github.com/users/dustinvtran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dustinvtran/subscriptions", "organizations_url": "https://api.github.com/users/dustinvtran/orgs", "repos_url": "https://api.github.com/users/dustinvtran/repos", "events_url": "https://api.github.com/users/dustinvtran/events{/privacy}", "received_events_url": "https://api.github.com/users/dustinvtran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "jvdillon", "id": 1137078, "node_id": "MDQ6VXNlcjExMzcwNzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1137078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvdillon", "html_url": "https://github.com/jvdillon", "followers_url": "https://api.github.com/users/jvdillon/followers", "following_url": "https://api.github.com/users/jvdillon/following{/other_user}", "gists_url": "https://api.github.com/users/jvdillon/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvdillon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvdillon/subscriptions", "organizations_url": "https://api.github.com/users/jvdillon/orgs", "repos_url": "https://api.github.com/users/jvdillon/repos", "events_url": "https://api.github.com/users/jvdillon/events{/privacy}", "received_events_url": "https://api.github.com/users/jvdillon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvdillon", "id": 1137078, "node_id": "MDQ6VXNlcjExMzcwNzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1137078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvdillon", "html_url": "https://github.com/jvdillon", "followers_url": "https://api.github.com/users/jvdillon/followers", "following_url": "https://api.github.com/users/jvdillon/following{/other_user}", "gists_url": "https://api.github.com/users/jvdillon/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvdillon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvdillon/subscriptions", "organizations_url": "https://api.github.com/users/jvdillon/orgs", "repos_url": "https://api.github.com/users/jvdillon/repos", "events_url": "https://api.github.com/users/jvdillon/events{/privacy}", "received_events_url": "https://api.github.com/users/jvdillon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2017-01-30T04:10:01Z", "updated_at": "2017-04-19T06:42:59Z", "closed_at": "2017-04-19T06:42:59Z", "author_association": "MEMBER", "body_html": "<p>Sampling from the example provided in the docstring fails with recursion errors.</p>\n<div class=\"highlight highlight-source-python\"><pre>ds <span class=\"pl-k\">=</span> tf.contrib.distributions\n\nexp_gamma <span class=\"pl-k\">=</span> ds.TransformedDistribution(\n  <span class=\"pl-v\">distribution</span><span class=\"pl-k\">=</span>ds.Gamma(<span class=\"pl-c1\">1.0</span>, <span class=\"pl-c1\">2.0</span>),\n  <span class=\"pl-v\">bijector</span><span class=\"pl-k\">=</span>ds.bijector.Invert(ds.bijector.Exp()))\n\nsess <span class=\"pl-k\">=</span> tf.Session()\nsess.run(exp_gamma.sample())\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/Users/dvt/Envs/venv/lib/python2.7/site-packages/tensorflow/contrib/distributions/python/ops/bijector.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">556</span>, <span class=\"pl-k\">in</span> _get_inverse_event_shape\n    <span class=\"pl-k\">return</span> <span class=\"pl-c1\">self</span>._get_inverse_event_shape(tensor_shape.TensorShape(output_shape))\n  ..\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/Users/dvt/Envs/venv/lib/python2.7/site-packages/tensorflow/contrib/distributions/python/ops/bijector.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">556</span>, <span class=\"pl-k\">in</span> _get_inverse_event_shape\n    <span class=\"pl-k\">return</span> <span class=\"pl-c1\">self</span>._get_inverse_event_shape(tensor_shape.TensorShape(output_shape))\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/Users/dvt/Envs/venv/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">436</span>, <span class=\"pl-k\">in</span> <span class=\"pl-c1\">__init__</span>\n    <span class=\"pl-k\">elif</span> <span class=\"pl-c1\">isinstance</span>(dims, compat.bytes_or_text_types):\n<span class=\"pl-c1\">RuntimeError</span>: maximum recursion depth exceeded <span class=\"pl-k\">while</span> calling a Python <span class=\"pl-c1\">object</span></pre></div>\n<p>I run into similar errors when using the Invert bijector for other distributions/bijectors.</p>\n<p>I am using TensorFlow v1.0.1 and Python 2.7.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1137078\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jvdillon\">@jvdillon</a></p>", "body_text": "Sampling from the example provided in the docstring fails with recursion errors.\nds = tf.contrib.distributions\n\nexp_gamma = ds.TransformedDistribution(\n  distribution=ds.Gamma(1.0, 2.0),\n  bijector=ds.bijector.Invert(ds.bijector.Exp()))\n\nsess = tf.Session()\nsess.run(exp_gamma.sample())\n  File \"/Users/dvt/Envs/venv/lib/python2.7/site-packages/tensorflow/contrib/distributions/python/ops/bijector.py\", line 556, in _get_inverse_event_shape\n    return self._get_inverse_event_shape(tensor_shape.TensorShape(output_shape))\n  ..\n  File \"/Users/dvt/Envs/venv/lib/python2.7/site-packages/tensorflow/contrib/distributions/python/ops/bijector.py\", line 556, in _get_inverse_event_shape\n    return self._get_inverse_event_shape(tensor_shape.TensorShape(output_shape))\n  File \"/Users/dvt/Envs/venv/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 436, in __init__\n    elif isinstance(dims, compat.bytes_or_text_types):\nRuntimeError: maximum recursion depth exceeded while calling a Python object\nI run into similar errors when using the Invert bijector for other distributions/bijectors.\nI am using TensorFlow v1.0.1 and Python 2.7.\n@jvdillon", "body": "Sampling from the example provided in the docstring fails with recursion errors.\r\n```python\r\nds = tf.contrib.distributions\r\n\r\nexp_gamma = ds.TransformedDistribution(\r\n  distribution=ds.Gamma(1.0, 2.0),\r\n  bijector=ds.bijector.Invert(ds.bijector.Exp()))\r\n\r\nsess = tf.Session()\r\nsess.run(exp_gamma.sample())\r\n  File \"/Users/dvt/Envs/venv/lib/python2.7/site-packages/tensorflow/contrib/distributions/python/ops/bijector.py\", line 556, in _get_inverse_event_shape\r\n    return self._get_inverse_event_shape(tensor_shape.TensorShape(output_shape))\r\n  ..\r\n  File \"/Users/dvt/Envs/venv/lib/python2.7/site-packages/tensorflow/contrib/distributions/python/ops/bijector.py\", line 556, in _get_inverse_event_shape\r\n    return self._get_inverse_event_shape(tensor_shape.TensorShape(output_shape))\r\n  File \"/Users/dvt/Envs/venv/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 436, in __init__\r\n    elif isinstance(dims, compat.bytes_or_text_types):\r\nRuntimeError: maximum recursion depth exceeded while calling a Python object\r\n```\r\nI run into similar errors when using the Invert bijector for other distributions/bijectors.\r\n\r\nI am using TensorFlow v1.0.1 and Python 2.7.\r\n\r\n@jvdillon"}
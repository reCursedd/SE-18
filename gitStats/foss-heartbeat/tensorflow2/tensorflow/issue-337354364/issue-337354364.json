{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20467", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20467/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20467/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20467/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20467", "id": 337354364, "node_id": "MDU6SXNzdWUzMzczNTQzNjQ=", "number": 20467, "title": "maybe a bug? different gradients of x**2 and x*x?", "user": {"login": "bojone", "id": 9159613, "node_id": "MDQ6VXNlcjkxNTk2MTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9159613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bojone", "html_url": "https://github.com/bojone", "followers_url": "https://api.github.com/users/bojone/followers", "following_url": "https://api.github.com/users/bojone/following{/other_user}", "gists_url": "https://api.github.com/users/bojone/gists{/gist_id}", "starred_url": "https://api.github.com/users/bojone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bojone/subscriptions", "organizations_url": "https://api.github.com/users/bojone/orgs", "repos_url": "https://api.github.com/users/bojone/repos", "events_url": "https://api.github.com/users/bojone/events{/privacy}", "received_events_url": "https://api.github.com/users/bojone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-07-02T03:03:33Z", "updated_at": "2018-08-21T02:45:58Z", "closed_at": "2018-08-21T02:45:58Z", "author_association": "NONE", "body_html": "<pre><code>import tensorflow as tf\n\nsess = tf.Session()\n\nlr = 0.1\n\nx = tf.Variable(1.)\ny = 0.5 * x * x\n# y = 0.5 * x**2\n\nP = tf.global_variables()\n\ngrads = tf.gradients(y, P)\n\nops = []\nfor p,g in zip(P, grads):\n    ops.append(tf.assign(p, p - lr * g))\n\nwith tf.control_dependencies(ops):\n    ops2 = []\n    grads = tf.gradients(y, P)\n    for p,g in zip(P, grads):\n        ops2.append(tf.assign(p, p - lr * g))\n\n\nsess.run(tf.global_variables_initializer())\n\nsess.run(ops2)\n</code></pre>\n<p>if <code>y = 0.5 * x * x</code> it return <code>[0.80499995] </code> but <code>y = 0.5 * x**2</code> return <code>[0.81]</code>, why?</p>\n<p>how can I do if I want to run two steps of GD in one sess.run ?</p>", "body_text": "import tensorflow as tf\n\nsess = tf.Session()\n\nlr = 0.1\n\nx = tf.Variable(1.)\ny = 0.5 * x * x\n# y = 0.5 * x**2\n\nP = tf.global_variables()\n\ngrads = tf.gradients(y, P)\n\nops = []\nfor p,g in zip(P, grads):\n    ops.append(tf.assign(p, p - lr * g))\n\nwith tf.control_dependencies(ops):\n    ops2 = []\n    grads = tf.gradients(y, P)\n    for p,g in zip(P, grads):\n        ops2.append(tf.assign(p, p - lr * g))\n\n\nsess.run(tf.global_variables_initializer())\n\nsess.run(ops2)\n\nif y = 0.5 * x * x it return [0.80499995]  but y = 0.5 * x**2 return [0.81], why?\nhow can I do if I want to run two steps of GD in one sess.run ?", "body": "```\r\nimport tensorflow as tf\r\n\r\nsess = tf.Session()\r\n\r\nlr = 0.1\r\n\r\nx = tf.Variable(1.)\r\ny = 0.5 * x * x\r\n# y = 0.5 * x**2\r\n\r\nP = tf.global_variables()\r\n\r\ngrads = tf.gradients(y, P)\r\n\r\nops = []\r\nfor p,g in zip(P, grads):\r\n    ops.append(tf.assign(p, p - lr * g))\r\n\r\nwith tf.control_dependencies(ops):\r\n    ops2 = []\r\n    grads = tf.gradients(y, P)\r\n    for p,g in zip(P, grads):\r\n        ops2.append(tf.assign(p, p - lr * g))\r\n\r\n\r\nsess.run(tf.global_variables_initializer())\r\n\r\nsess.run(ops2)\r\n```\r\n\r\nif `y = 0.5 * x * x` it return `[0.80499995] ` but `y = 0.5 * x**2` return `[0.81]`, why?\r\n\r\nhow can I do if I want to run two steps of GD in one sess.run ?"}
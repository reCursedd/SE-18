{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/421080096", "html_url": "https://github.com/tensorflow/tensorflow/pull/22247#issuecomment-421080096", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22247", "id": 421080096, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTA4MDA5Ng==", "user": {"login": "yashk2810", "id": 14262417, "node_id": "MDQ6VXNlcjE0MjYyNDE3", "avatar_url": "https://avatars1.githubusercontent.com/u/14262417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yashk2810", "html_url": "https://github.com/yashk2810", "followers_url": "https://api.github.com/users/yashk2810/followers", "following_url": "https://api.github.com/users/yashk2810/following{/other_user}", "gists_url": "https://api.github.com/users/yashk2810/gists{/gist_id}", "starred_url": "https://api.github.com/users/yashk2810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yashk2810/subscriptions", "organizations_url": "https://api.github.com/users/yashk2810/orgs", "repos_url": "https://api.github.com/users/yashk2810/repos", "events_url": "https://api.github.com/users/yashk2810/events{/privacy}", "received_events_url": "https://api.github.com/users/yashk2810/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-13T17:05:24Z", "updated_at": "2018-09-13T23:41:01Z", "author_association": "CONTRIBUTOR", "body_html": "<p>So, I tried out the change and for a single character start_string, the predictions shape is (1, 65). But if the start_string is a word like 'Queen', the shape of the first prediction is (5, 65). Hence we need to use the last character from the prediction to predict the next character, hence <code>predictions[-1]</code> makes sense there.</p>\n<p>This doesn't matter if the input is a single character. So changing to <code>predictions[-1]</code> will make the predictions right if the start_string is a word and it won't change anything if the start_string is a character.</p>\n<p>As far as temperature goes, it makes sense to remove it since tf.multinomial is not being used.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5744524\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/leondgarse\">@leondgarse</a> Can you also remove the comment above the predicted_id line which mentions tf.multinomial and change the text in the markdown above?</p>", "body_text": "So, I tried out the change and for a single character start_string, the predictions shape is (1, 65). But if the start_string is a word like 'Queen', the shape of the first prediction is (5, 65). Hence we need to use the last character from the prediction to predict the next character, hence predictions[-1] makes sense there.\nThis doesn't matter if the input is a single character. So changing to predictions[-1] will make the predictions right if the start_string is a word and it won't change anything if the start_string is a character.\nAs far as temperature goes, it makes sense to remove it since tf.multinomial is not being used.\n@leondgarse Can you also remove the comment above the predicted_id line which mentions tf.multinomial and change the text in the markdown above?", "body": "So, I tried out the change and for a single character start_string, the predictions shape is (1, 65). But if the start_string is a word like 'Queen', the shape of the first prediction is (5, 65). Hence we need to use the last character from the prediction to predict the next character, hence `predictions[-1]` makes sense there. \r\n\r\nThis doesn't matter if the input is a single character. So changing to `predictions[-1]` will make the predictions right if the start_string is a word and it won't change anything if the start_string is a character.\r\n\r\nAs far as temperature goes, it makes sense to remove it since tf.multinomial is not being used.\r\n\r\n@leondgarse Can you also remove the comment above the predicted_id line which mentions tf.multinomial and change the text in the markdown above?"}
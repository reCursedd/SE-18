{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285734109", "html_url": "https://github.com/tensorflow/tensorflow/issues/7970#issuecomment-285734109", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7970", "id": 285734109, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTczNDEwOQ==", "user": {"login": "volvador", "id": 15655730, "node_id": "MDQ6VXNlcjE1NjU1NzMw", "avatar_url": "https://avatars1.githubusercontent.com/u/15655730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/volvador", "html_url": "https://github.com/volvador", "followers_url": "https://api.github.com/users/volvador/followers", "following_url": "https://api.github.com/users/volvador/following{/other_user}", "gists_url": "https://api.github.com/users/volvador/gists{/gist_id}", "starred_url": "https://api.github.com/users/volvador/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/volvador/subscriptions", "organizations_url": "https://api.github.com/users/volvador/orgs", "repos_url": "https://api.github.com/users/volvador/repos", "events_url": "https://api.github.com/users/volvador/events{/privacy}", "received_events_url": "https://api.github.com/users/volvador/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-10T17:38:18Z", "updated_at": "2017-03-10T17:40:07Z", "author_association": "NONE", "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19293677\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ispirmustafa\">@ispirmustafa</a><br>\nI replaced my</p>\n<pre><code>sess = sv.prepare_or_wait_for_session(server.target)\n</code></pre>\n<p>By the code you suggested. It resulted in the following error:</p>\n<pre><code>Traceback (most recent call last):\nFile \"test.py\", line 127, in &lt;module&gt;\n  sync_replicas_hook = opt.make_session_run_hook(is_chief)\nFile \"../tensorflow-1.0.0/lib/tensorflow/python/training/sync_replicas_optimizer.py\", line 431, in make_session_run_hook\n  self.get_init_tokens_op(num_tokens))\nFile \"../tensorflow-1.0.0/lib/tensorflow/python/training/sync_replicas_optimizer.py\", line 418, in get_init_tokens_op\n  tokens = array_ops.fill([num_tokens], self._global_step)\nFile \"../tensorflow-1.0.0/lib/tensorflow/python/ops/gen_array_ops.py\", line 1318, in fill                                                                                                                                                                                                       \n  result = _op_def_lib.apply_op(\"Fill\", dims=dims, value=value, name=name)                                                                                                                                                                                                                                                 \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/op_def_library.py\", line 491, in apply_op                                                                                                                                                                                             \n  preferred_dtype=default_dtype)                                                                                                                                                                                                                                                                                           \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 716, in internal_convert_to_tensor                                                                                                                                                                                      \n  ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)                                                                                                                                                                                                                                                      \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function                                                                                                                                                                    \n  return constant(v, dtype=dtype, name=name)                                                                                                                                                                                                                                                                               \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/constant_op.py\", line 169, in constant                                                                                                                                                                                                \n  attrs={\"value\": tensor_value, \"dtype\": dtype_value}, name=name).outputs[0]                                                                                                                                                                                                                                               \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 2354, in create_op                                                                                                                                                                                                      \n  self._check_not_finalized()                                                                                                                                                                                                                                                                                              \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 2077, in _check_not_finalized                                                                                                                                                                                           \n  raise RuntimeError(\"Graph is finalized and cannot be modified.\")                                                                                                                                                                                                                                                         \nRuntimeError: Graph is finalized and cannot be modified.                                                      \n</code></pre>", "body_text": "Thanks @ispirmustafa\nI replaced my\nsess = sv.prepare_or_wait_for_session(server.target)\n\nBy the code you suggested. It resulted in the following error:\nTraceback (most recent call last):\nFile \"test.py\", line 127, in <module>\n  sync_replicas_hook = opt.make_session_run_hook(is_chief)\nFile \"../tensorflow-1.0.0/lib/tensorflow/python/training/sync_replicas_optimizer.py\", line 431, in make_session_run_hook\n  self.get_init_tokens_op(num_tokens))\nFile \"../tensorflow-1.0.0/lib/tensorflow/python/training/sync_replicas_optimizer.py\", line 418, in get_init_tokens_op\n  tokens = array_ops.fill([num_tokens], self._global_step)\nFile \"../tensorflow-1.0.0/lib/tensorflow/python/ops/gen_array_ops.py\", line 1318, in fill                                                                                                                                                                                                       \n  result = _op_def_lib.apply_op(\"Fill\", dims=dims, value=value, name=name)                                                                                                                                                                                                                                                 \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/op_def_library.py\", line 491, in apply_op                                                                                                                                                                                             \n  preferred_dtype=default_dtype)                                                                                                                                                                                                                                                                                           \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 716, in internal_convert_to_tensor                                                                                                                                                                                      \n  ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)                                                                                                                                                                                                                                                      \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function                                                                                                                                                                    \n  return constant(v, dtype=dtype, name=name)                                                                                                                                                                                                                                                                               \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/constant_op.py\", line 169, in constant                                                                                                                                                                                                \n  attrs={\"value\": tensor_value, \"dtype\": dtype_value}, name=name).outputs[0]                                                                                                                                                                                                                                               \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 2354, in create_op                                                                                                                                                                                                      \n  self._check_not_finalized()                                                                                                                                                                                                                                                                                              \nFile \"../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 2077, in _check_not_finalized                                                                                                                                                                                           \n  raise RuntimeError(\"Graph is finalized and cannot be modified.\")                                                                                                                                                                                                                                                         \nRuntimeError: Graph is finalized and cannot be modified.", "body": "Thanks @ispirmustafa \r\nI replaced my \r\n\r\n    sess = sv.prepare_or_wait_for_session(server.target)\r\n\r\nBy the code you suggested. It resulted in the following error:\r\n\r\n    Traceback (most recent call last):\r\n    File \"test.py\", line 127, in <module>\r\n      sync_replicas_hook = opt.make_session_run_hook(is_chief)\r\n    File \"../tensorflow-1.0.0/lib/tensorflow/python/training/sync_replicas_optimizer.py\", line 431, in make_session_run_hook\r\n      self.get_init_tokens_op(num_tokens))\r\n    File \"../tensorflow-1.0.0/lib/tensorflow/python/training/sync_replicas_optimizer.py\", line 418, in get_init_tokens_op\r\n      tokens = array_ops.fill([num_tokens], self._global_step)\r\n    File \"../tensorflow-1.0.0/lib/tensorflow/python/ops/gen_array_ops.py\", line 1318, in fill                                                                                                                                                                                                       \r\n      result = _op_def_lib.apply_op(\"Fill\", dims=dims, value=value, name=name)                                                                                                                                                                                                                                                 \r\n    File \"../tensorflow-1.0.0/lib/tensorflow/python/framework/op_def_library.py\", line 491, in apply_op                                                                                                                                                                                             \r\n      preferred_dtype=default_dtype)                                                                                                                                                                                                                                                                                           \r\n    File \"../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 716, in internal_convert_to_tensor                                                                                                                                                                                      \r\n      ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)                                                                                                                                                                                                                                                      \r\n    File \"../tensorflow-1.0.0/lib/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function                                                                                                                                                                    \r\n      return constant(v, dtype=dtype, name=name)                                                                                                                                                                                                                                                                               \r\n    File \"../tensorflow-1.0.0/lib/tensorflow/python/framework/constant_op.py\", line 169, in constant                                                                                                                                                                                                \r\n      attrs={\"value\": tensor_value, \"dtype\": dtype_value}, name=name).outputs[0]                                                                                                                                                                                                                                               \r\n    File \"../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 2354, in create_op                                                                                                                                                                                                      \r\n      self._check_not_finalized()                                                                                                                                                                                                                                                                                              \r\n    File \"../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 2077, in _check_not_finalized                                                                                                                                                                                           \r\n      raise RuntimeError(\"Graph is finalized and cannot be modified.\")                                                                                                                                                                                                                                                         \r\n    RuntimeError: Graph is finalized and cannot be modified.                                                      "}
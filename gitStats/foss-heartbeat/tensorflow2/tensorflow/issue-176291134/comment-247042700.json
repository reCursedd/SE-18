{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/247042700", "html_url": "https://github.com/tensorflow/tensorflow/issues/4330#issuecomment-247042700", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4330", "id": 247042700, "node_id": "MDEyOklzc3VlQ29tbWVudDI0NzA0MjcwMA==", "user": {"login": "andydavis1", "id": 15696327, "node_id": "MDQ6VXNlcjE1Njk2MzI3", "avatar_url": "https://avatars0.githubusercontent.com/u/15696327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andydavis1", "html_url": "https://github.com/andydavis1", "followers_url": "https://api.github.com/users/andydavis1/followers", "following_url": "https://api.github.com/users/andydavis1/following{/other_user}", "gists_url": "https://api.github.com/users/andydavis1/gists{/gist_id}", "starred_url": "https://api.github.com/users/andydavis1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andydavis1/subscriptions", "organizations_url": "https://api.github.com/users/andydavis1/orgs", "repos_url": "https://api.github.com/users/andydavis1/repos", "events_url": "https://api.github.com/users/andydavis1/events{/privacy}", "received_events_url": "https://api.github.com/users/andydavis1/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-14T15:02:27Z", "updated_at": "2016-09-14T15:02:27Z", "author_association": "MEMBER", "body_html": "<p>Yes. I worked out a back-of-the-envelope flop cost between separable and conventional convolutions:</p>\n<p>OR = out_rows<br>\nOC = out_cols<br>\nID = in_depth<br>\nDM = depth_multiplier<br>\nOD = out_depth<br>\nFR = filter_rows<br>\nFC = filter_cols</p>\n<p>separable_conv_cost = OR * OC * ID * DM * (FR * FC + OD)<br>\nconventional_conv_cost = OR * OC * ID * FR * FC * OD</p>\n<p>// So to save on flops we want:</p>\n<p>DM &lt; (FR * FC * OD) / (FR * FC + OD)</p>\n<p>// So plugging in your numbers from above (FR=FC=3, OD=192):</p>\n<p>DM &lt; 8.5</p>\n<p>So to save flops, we want DM &lt; 8.5, yet your DM = 3.  So perhaps (at least from a flops perspective), this check is too restrictive.  There may be other reasons for this restriction (perhaps expansion and reduction of parameters leads to training issues), but I'll let Vincent comment on that...</p>", "body_text": "Yes. I worked out a back-of-the-envelope flop cost between separable and conventional convolutions:\nOR = out_rows\nOC = out_cols\nID = in_depth\nDM = depth_multiplier\nOD = out_depth\nFR = filter_rows\nFC = filter_cols\nseparable_conv_cost = OR * OC * ID * DM * (FR * FC + OD)\nconventional_conv_cost = OR * OC * ID * FR * FC * OD\n// So to save on flops we want:\nDM < (FR * FC * OD) / (FR * FC + OD)\n// So plugging in your numbers from above (FR=FC=3, OD=192):\nDM < 8.5\nSo to save flops, we want DM < 8.5, yet your DM = 3.  So perhaps (at least from a flops perspective), this check is too restrictive.  There may be other reasons for this restriction (perhaps expansion and reduction of parameters leads to training issues), but I'll let Vincent comment on that...", "body": "Yes. I worked out a back-of-the-envelope flop cost between separable and conventional convolutions:\n\nOR = out_rows\nOC = out_cols\nID = in_depth\nDM = depth_multiplier\nOD = out_depth\nFR = filter_rows\nFC = filter_cols\n\nseparable_conv_cost = OR \\* OC \\* ID \\* DM \\* (FR \\* FC + OD)\nconventional_conv_cost = OR \\* OC \\* ID \\* FR \\* FC \\* OD\n\n// So to save on flops we want:\n\nDM < (FR \\* FC \\* OD) / (FR \\* FC + OD)\n\n// So plugging in your numbers from above (FR=FC=3, OD=192):\n\nDM < 8.5\n\nSo to save flops, we want DM < 8.5, yet your DM = 3.  So perhaps (at least from a flops perspective), this check is too restrictive.  There may be other reasons for this restriction (perhaps expansion and reduction of parameters leads to training issues), but I'll let Vincent comment on that... \n"}
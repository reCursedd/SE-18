{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/422373566", "html_url": "https://github.com/tensorflow/tensorflow/issues/18356#issuecomment-422373566", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18356", "id": 422373566, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjM3MzU2Ng==", "user": {"login": "eaigner", "id": 112197, "node_id": "MDQ6VXNlcjExMjE5Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/112197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaigner", "html_url": "https://github.com/eaigner", "followers_url": "https://api.github.com/users/eaigner/followers", "following_url": "https://api.github.com/users/eaigner/following{/other_user}", "gists_url": "https://api.github.com/users/eaigner/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaigner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaigner/subscriptions", "organizations_url": "https://api.github.com/users/eaigner/orgs", "repos_url": "https://api.github.com/users/eaigner/repos", "events_url": "https://api.github.com/users/eaigner/events{/privacy}", "received_events_url": "https://api.github.com/users/eaigner/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-18T12:33:41Z", "updated_at": "2018-09-18T13:02:22Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2762244\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sadlerjw\">@sadlerjw</a> 's fix doesn't seem to work anymore on TF 1.10. Getting the same error like <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5413843\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/robinqhuang\">@robinqhuang</a></p>\n<p>Specifically it's line 23 in <code>tensorflow/tensorflow/core/util/work_sharder.cc</code></p>\n<pre><code>/* ABSL_CONST_INIT */ thread_local int per_thread_max_parallism = 1000000;\n</code></pre>\n<p>I fixed it by replacing <code>thread_local</code> with <code>__thread</code> since it is defined as empty in <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2762244\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sadlerjw\">@sadlerjw</a> 's fix for i386 and that's what we want</p>\n<pre><code>/* ABSL_CONST_INIT */ __thread int per_thread_max_parallism = 1000000;\n</code></pre>", "body_text": "@sadlerjw 's fix doesn't seem to work anymore on TF 1.10. Getting the same error like @robinqhuang\nSpecifically it's line 23 in tensorflow/tensorflow/core/util/work_sharder.cc\n/* ABSL_CONST_INIT */ thread_local int per_thread_max_parallism = 1000000;\n\nI fixed it by replacing thread_local with __thread since it is defined as empty in @sadlerjw 's fix for i386 and that's what we want\n/* ABSL_CONST_INIT */ __thread int per_thread_max_parallism = 1000000;", "body": "@sadlerjw 's fix doesn't seem to work anymore on TF 1.10. Getting the same error like @robinqhuang \r\n\r\nSpecifically it's line 23 in `tensorflow/tensorflow/core/util/work_sharder.cc`\r\n\r\n```\r\n/* ABSL_CONST_INIT */ thread_local int per_thread_max_parallism = 1000000;\r\n```\r\n\r\nI fixed it by replacing `thread_local` with `__thread` since it is defined as empty in @sadlerjw 's fix for i386 and that's what we want\r\n\r\n```\r\n/* ABSL_CONST_INIT */ __thread int per_thread_max_parallism = 1000000;\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/308078066", "html_url": "https://github.com/tensorflow/tensorflow/pull/10522#issuecomment-308078066", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10522", "id": 308078066, "node_id": "MDEyOklzc3VlQ29tbWVudDMwODA3ODA2Ng==", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-13T10:44:20Z", "updated_at": "2017-06-14T06:13:57Z", "author_association": "CONTRIBUTOR", "body_html": "<p>For second (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/c63cebb80a26cb7eeaf0afe095886488f1a8ac8a/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/c63cebb80a26cb7eeaf0afe095886488f1a8ac8a\"><tt>c63cebb</tt></a>) commit details are as follows :</p>\n<p>This is regarding failure of test case //tensorflow/core:platform_profile_utils_cpu_utils_test in tensorflow/core/platform/profile_utils/cpu_utils_test.cc file.<br>\nOn ppc64le this test was failing for following two checks i.e. CHECK_GT(cpu_frequency, 0) and CHECK_NE(cpu_frequency, CpuUtils::INVALID_FREQUENCY) :</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/platform/profile_utils/cpu_utils_test.cc#L56-L57\">https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/platform/profile_utils/cpu_utils_test.cc#L56-L57</a></p>\n<pre><code>TEST_F(CpuUtilsTest, CheckCycleCounterFrequency) {\n  const int64 cpu_frequency = CpuUtils::GetCycleCounterFrequency();\n  CHECK_GT(cpu_frequency, 0);\n  CHECK_NE(cpu_frequency, CpuUtils::INVALID_FREQUENCY);\n  if (DBG) {\n    LOG(INFO) &lt;&lt; \"Cpu frequency = \" &lt;&lt; cpu_frequency;\n  }\n}\n</code></pre>\n<p>After investigation found that, \"int64 cpu_frequency\" value on x86 is \"unsigned\" by default whereas on ppc64le it is \"signed\" by default, that is why this test was failing on ppc64le, PFA for log details<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1071075/platform_profile_utils_cpu_utils_test.failure_log.txt\">platform_profile_utils_cpu_utils_test failure_log.txt</a></p>\n<p>To make the results compatible with x86, some code changes were required on ppc64le.<br>\nAfter code changes, I ran this test and now it is passing on ppc64le as well as on X86.</p>\n<p>Could someone please review this changes as well (along with first commit)?<br>\nThanks!</p>", "body_text": "For second (c63cebb) commit details are as follows :\nThis is regarding failure of test case //tensorflow/core:platform_profile_utils_cpu_utils_test in tensorflow/core/platform/profile_utils/cpu_utils_test.cc file.\nOn ppc64le this test was failing for following two checks i.e. CHECK_GT(cpu_frequency, 0) and CHECK_NE(cpu_frequency, CpuUtils::INVALID_FREQUENCY) :\nhttps://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/platform/profile_utils/cpu_utils_test.cc#L56-L57\nTEST_F(CpuUtilsTest, CheckCycleCounterFrequency) {\n  const int64 cpu_frequency = CpuUtils::GetCycleCounterFrequency();\n  CHECK_GT(cpu_frequency, 0);\n  CHECK_NE(cpu_frequency, CpuUtils::INVALID_FREQUENCY);\n  if (DBG) {\n    LOG(INFO) << \"Cpu frequency = \" << cpu_frequency;\n  }\n}\n\nAfter investigation found that, \"int64 cpu_frequency\" value on x86 is \"unsigned\" by default whereas on ppc64le it is \"signed\" by default, that is why this test was failing on ppc64le, PFA for log details\nplatform_profile_utils_cpu_utils_test failure_log.txt\nTo make the results compatible with x86, some code changes were required on ppc64le.\nAfter code changes, I ran this test and now it is passing on ppc64le as well as on X86.\nCould someone please review this changes as well (along with first commit)?\nThanks!", "body": "For second (https://github.com/tensorflow/tensorflow/pull/10522/commits/c63cebb80a26cb7eeaf0afe095886488f1a8ac8a) commit details are as follows :\r\n\r\nThis is regarding failure of test case //tensorflow/core:platform_profile_utils_cpu_utils_test in tensorflow/core/platform/profile_utils/cpu_utils_test.cc file.\r\nOn ppc64le this test was failing for following two checks i.e. CHECK_GT(cpu_frequency, 0) and CHECK_NE(cpu_frequency, CpuUtils::INVALID_FREQUENCY) :\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/platform/profile_utils/cpu_utils_test.cc#L56-L57\r\n\r\n```\r\nTEST_F(CpuUtilsTest, CheckCycleCounterFrequency) {\r\n  const int64 cpu_frequency = CpuUtils::GetCycleCounterFrequency();\r\n  CHECK_GT(cpu_frequency, 0);\r\n  CHECK_NE(cpu_frequency, CpuUtils::INVALID_FREQUENCY);\r\n  if (DBG) {\r\n    LOG(INFO) << \"Cpu frequency = \" << cpu_frequency;\r\n  }\r\n}\r\n```\r\n\r\nAfter investigation found that, \"int64 cpu_frequency\" value on x86 is \"unsigned\" by default whereas on ppc64le it is \"signed\" by default, that is why this test was failing on ppc64le, PFA for log details \r\n[platform_profile_utils_cpu_utils_test failure_log.txt](https://github.com/tensorflow/tensorflow/files/1071075/platform_profile_utils_cpu_utils_test.failure_log.txt)\r\n\r\n\r\nTo make the results compatible with x86, some code changes were required on ppc64le. \r\nAfter code changes, I ran this test and now it is passing on ppc64le as well as on X86.\r\n\r\nCould someone please review this changes as well (along with first commit)?\r\nThanks!\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/366641004", "html_url": "https://github.com/tensorflow/tensorflow/issues/16823#issuecomment-366641004", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16823", "id": 366641004, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjY0MTAwNA==", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-19T10:00:45Z", "updated_at": "2018-02-19T10:00:45Z", "author_association": "NONE", "body_html": "<p>I can confirm the issue with Bazel 0.10.1 and Tensorflow 1.5.</p>\n<p>Have I written custom code: NO<br>\nOS Platform and Distribution: Ubuntu 17.10<br>\nTensorFlow installed from: Source<br>\nTensorFlow version: 1.5<br>\nCUDA/cuDNN version: NA<br>\nGPU model and memory: NA<br>\nExact command to reproduce: bazel build --jobs 15 --config=opt //tensorflow/tools/pip_package:build_pip_package</p>\n<p>steven@desktop:~/opt/git/tensorflow$ ./configure<br>\nExtracting Bazel installation...<br>\nYou have bazel 0.10.1 installed.<br>\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3</p>\n<p>Found possible Python library paths:<br>\n/usr/lib/python3.6/dist-packages<br>\n/usr/lib/python3/dist-packages<br>\n/usr/local/lib/python3.6/dist-packages<br>\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3.6/dist-packages]<br>\n/usr/lib/python3/dist-packages<br>\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: Y<br>\njemalloc as malloc support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: n<br>\nNo Google Cloud Platform support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with Hadoop File System support? [Y/n]: n<br>\nNo Hadoop File System support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: n<br>\nNo Amazon S3 File System support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with XLA JIT support? [y/N]: N<br>\nNo XLA JIT support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with GDR support? [y/N]: N<br>\nNo GDR support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with VERBS support? [y/N]: N<br>\nNo VERBS support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with OpenCL SYCL support? [y/N]: N<br>\nNo OpenCL SYCL support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with CUDA support? [y/N]: N<br>\nNo CUDA support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with MPI support? [y/N]: N<br>\nNo MPI support will be enabled for TensorFlow.</p>\n<p>Please specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:</p>\n<p>Add \"--config=mkl\" to your bazel command to build with MKL support.<br>\nPlease note that MKL on MacOS or windows is still not supported.<br>\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.</p>\n<p>Would you like to interactively configure ./WORKSPACE for Android builds? [y/N]: N<br>\nNot configuring the WORKSPACE for Android builds.</p>\n<p>Configuration finished</p>\n<p>steven@desktop:~/opt/git/tensorflow$ bazel build --jobs 15 --config=opt //tensorflow/tools/pip_package:build_pip_package<br>\nERROR: /home/steven/opt/git/tensorflow/WORKSPACE:15:1: Traceback (most recent call last):<br>\nFile \"/home/steven/opt/git/tensorflow/WORKSPACE\", line 15<br>\nclosure_repositories()<br>\nFile \"/home/steven/.cache/bazel/_bazel_steven/50a548f93783a225d8430a085c4d5aab/external/io_bazel_rules_closure/closure/repositories.bzl\", line 69, in closure_repositories<br>\n_check_bazel_version(\"Closure Rules\", \"0.4.5\")<br>\nFile \"/home/steven/.cache/bazel/_bazel_steven/50a548f93783a225d8430a085c4d5aab/external/io_bazel_rules_closure/closure/repositories.bzl\", line 172, in _check_bazel_version<br>\nfail((\"%s requires Bazel &gt;=%s but was...)))<br>\nClosure Rules requires Bazel &gt;=0.4.5 but was 0.10.1<br>\nERROR: Error evaluating WORKSPACE file<br>\nERROR: /home/steven/opt/git/tensorflow/WORKSPACE:41:1: Traceback (most recent call last):<br>\nFile \"/home/steven/opt/git/tensorflow/WORKSPACE\", line 41<br>\ntf_workspace()<br>\nFile \"/home/steven/opt/git/tensorflow/tensorflow/workspace.bzl\", line 48, in tf_workspace<br>\ncheck_version(\"0.5.4\")<br>\nFile \"/home/steven/opt/git/tensorflow/tensorflow/workspace.bzl\", line 38, in check_version<br>\nfail(\"\\nCurrent Bazel version is {}, ...))</p>\n<p>Current Bazel version is 0.10.1, expected at least 0.5.4<br>\nERROR: Error evaluating WORKSPACE file<br>\nERROR: Skipping '//tensorflow/tools/pip_package:build_pip_package': error loading package 'external': Package 'external' contains errors<br>\nWARNING: Target pattern parsing failed.<br>\nERROR: error loading package 'external': Package 'external' contains errors<br>\nINFO: Elapsed time: 0.187s<br>\nFAILED: Build did NOT complete successfully (0 packages loaded)</p>", "body_text": "I can confirm the issue with Bazel 0.10.1 and Tensorflow 1.5.\nHave I written custom code: NO\nOS Platform and Distribution: Ubuntu 17.10\nTensorFlow installed from: Source\nTensorFlow version: 1.5\nCUDA/cuDNN version: NA\nGPU model and memory: NA\nExact command to reproduce: bazel build --jobs 15 --config=opt //tensorflow/tools/pip_package:build_pip_package\nsteven@desktop:~/opt/git/tensorflow$ ./configure\nExtracting Bazel installation...\nYou have bazel 0.10.1 installed.\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3\nFound possible Python library paths:\n/usr/lib/python3.6/dist-packages\n/usr/lib/python3/dist-packages\n/usr/local/lib/python3.6/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3.6/dist-packages]\n/usr/lib/python3/dist-packages\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: Y\njemalloc as malloc support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: n\nNo Google Cloud Platform support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: n\nNo Hadoop File System support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: n\nNo Amazon S3 File System support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: N\nNo XLA JIT support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with GDR support? [y/N]: N\nNo GDR support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with VERBS support? [y/N]: N\nNo VERBS support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: N\nNo OpenCL SYCL support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with CUDA support? [y/N]: N\nNo CUDA support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with MPI support? [y/N]: N\nNo MPI support will be enabled for TensorFlow.\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\nPlease note that MKL on MacOS or windows is still not supported.\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: N\nNot configuring the WORKSPACE for Android builds.\nConfiguration finished\nsteven@desktop:~/opt/git/tensorflow$ bazel build --jobs 15 --config=opt //tensorflow/tools/pip_package:build_pip_package\nERROR: /home/steven/opt/git/tensorflow/WORKSPACE:15:1: Traceback (most recent call last):\nFile \"/home/steven/opt/git/tensorflow/WORKSPACE\", line 15\nclosure_repositories()\nFile \"/home/steven/.cache/bazel/_bazel_steven/50a548f93783a225d8430a085c4d5aab/external/io_bazel_rules_closure/closure/repositories.bzl\", line 69, in closure_repositories\n_check_bazel_version(\"Closure Rules\", \"0.4.5\")\nFile \"/home/steven/.cache/bazel/_bazel_steven/50a548f93783a225d8430a085c4d5aab/external/io_bazel_rules_closure/closure/repositories.bzl\", line 172, in _check_bazel_version\nfail((\"%s requires Bazel >=%s but was...)))\nClosure Rules requires Bazel >=0.4.5 but was 0.10.1\nERROR: Error evaluating WORKSPACE file\nERROR: /home/steven/opt/git/tensorflow/WORKSPACE:41:1: Traceback (most recent call last):\nFile \"/home/steven/opt/git/tensorflow/WORKSPACE\", line 41\ntf_workspace()\nFile \"/home/steven/opt/git/tensorflow/tensorflow/workspace.bzl\", line 48, in tf_workspace\ncheck_version(\"0.5.4\")\nFile \"/home/steven/opt/git/tensorflow/tensorflow/workspace.bzl\", line 38, in check_version\nfail(\"\\nCurrent Bazel version is {}, ...))\nCurrent Bazel version is 0.10.1, expected at least 0.5.4\nERROR: Error evaluating WORKSPACE file\nERROR: Skipping '//tensorflow/tools/pip_package:build_pip_package': error loading package 'external': Package 'external' contains errors\nWARNING: Target pattern parsing failed.\nERROR: error loading package 'external': Package 'external' contains errors\nINFO: Elapsed time: 0.187s\nFAILED: Build did NOT complete successfully (0 packages loaded)", "body": "I can confirm the issue with Bazel 0.10.1 and Tensorflow 1.5.\r\n\r\nHave I written custom code: NO\r\nOS Platform and Distribution: Ubuntu 17.10\r\nTensorFlow installed from: Source\r\nTensorFlow version: 1.5\r\nCUDA/cuDNN version: NA\r\nGPU model and memory: NA\r\nExact command to reproduce: bazel build --jobs 15 --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\nsteven@desktop:~/opt/git/tensorflow$ ./configure\r\nExtracting Bazel installation...\r\nYou have bazel 0.10.1 installed.\r\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3\r\n\r\n\r\nFound possible Python library paths:\r\n  /usr/lib/python3.6/dist-packages\r\n  /usr/lib/python3/dist-packages\r\n  /usr/local/lib/python3.6/dist-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3.6/dist-packages]\r\n/usr/lib/python3/dist-packages\r\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: Y\r\njemalloc as malloc support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: n\r\nNo Google Cloud Platform support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: n\r\nNo Hadoop File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: n\r\nNo Amazon S3 File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: N\r\nNo XLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with GDR support? [y/N]: N\r\nNo GDR support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with VERBS support? [y/N]: N\r\nNo VERBS support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: N\r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: N\r\nNo CUDA support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: N\r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \r\n\r\n\r\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\r\nPlease note that MKL on MacOS or windows is still not supported.\r\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: N\r\nNot configuring the WORKSPACE for Android builds.\r\n\r\nConfiguration finished\r\n\r\n\r\nsteven@desktop:~/opt/git/tensorflow$ bazel build --jobs 15 --config=opt //tensorflow/tools/pip_package:build_pip_package\r\nERROR: /home/steven/opt/git/tensorflow/WORKSPACE:15:1: Traceback (most recent call last):\r\n\tFile \"/home/steven/opt/git/tensorflow/WORKSPACE\", line 15\r\n\t\tclosure_repositories()\r\n\tFile \"/home/steven/.cache/bazel/_bazel_steven/50a548f93783a225d8430a085c4d5aab/external/io_bazel_rules_closure/closure/repositories.bzl\", line 69, in closure_repositories\r\n\t\t_check_bazel_version(\"Closure Rules\", \"0.4.5\")\r\n\tFile \"/home/steven/.cache/bazel/_bazel_steven/50a548f93783a225d8430a085c4d5aab/external/io_bazel_rules_closure/closure/repositories.bzl\", line 172, in _check_bazel_version\r\n\t\tfail((\"%s requires Bazel >=%s but was...)))\r\nClosure Rules requires Bazel >=0.4.5 but was 0.10.1\r\nERROR: Error evaluating WORKSPACE file\r\nERROR: /home/steven/opt/git/tensorflow/WORKSPACE:41:1: Traceback (most recent call last):\r\n\tFile \"/home/steven/opt/git/tensorflow/WORKSPACE\", line 41\r\n\t\ttf_workspace()\r\n\tFile \"/home/steven/opt/git/tensorflow/tensorflow/workspace.bzl\", line 48, in tf_workspace\r\n\t\tcheck_version(\"0.5.4\")\r\n\tFile \"/home/steven/opt/git/tensorflow/tensorflow/workspace.bzl\", line 38, in check_version\r\n\t\tfail(\"\\nCurrent Bazel version is {}, ...))\r\n\r\nCurrent Bazel version is 0.10.1, expected at least 0.5.4\r\nERROR: Error evaluating WORKSPACE file\r\nERROR: Skipping '//tensorflow/tools/pip_package:build_pip_package': error loading package 'external': Package 'external' contains errors\r\nWARNING: Target pattern parsing failed.\r\nERROR: error loading package 'external': Package 'external' contains errors\r\nINFO: Elapsed time: 0.187s\r\nFAILED: Build did NOT complete successfully (0 packages loaded)"}
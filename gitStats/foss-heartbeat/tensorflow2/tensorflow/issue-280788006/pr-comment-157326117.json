{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/157326117", "pull_request_review_id": 83957567, "id": 157326117, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzMyNjExNw==", "diff_hunk": "@@ -473,6 +473,39 @@ Status AddNGrad(const Scope& scope, const Operation& op,\n }\n REGISTER_GRADIENT_OP(\"AddN\", AddNGrad);\n \n+Status PowGrad(const Scope& scope, const Operation& op,\n+               const std::vector<Output>& grad_inputs,\n+               std::vector<Output>* grad_outputs) {\n+  auto x = ConjugateHelper(scope, op.input(0));\n+  auto y = ConjugateHelper(scope, op.input(1));\n+  auto z = ConjugateHelper(scope, op.output(0));\n+  auto grad = grad_inputs[0];\n+  // grad * y * pow(x, y - 1)\n+  auto one = Cast(scope, Const(scope, 1.0), y.type());\n+  auto gx_1 = Mul(scope,\n+                  Mul(scope, grad, y),\n+                  Pow(scope, x, Sub(scope, y, one)));\n+  // Avoid false singularity at x = 0\n+  DataType x_dtype = x.type();\n+  auto zero = Cast(scope, Const(scope, 0.0), x_dtype);\n+#define RETURN(comp)  \\", "path": "tensorflow/cc/gradients/math_grad.cc", "position": null, "original_position": 19, "commit_id": "e6eed626b7882ebba0afb8f0d55ebf91e01cd062", "original_commit_id": "45d2f91438938bf20e27f127e2c3a9d082d48d49", "user": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "body": "I find this easier to read without the macro. I think its ok just to duplicate the code in each clause. thanks", "created_at": "2017-12-16T00:32:25Z", "updated_at": "2017-12-16T02:30:29Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/15245#discussion_r157326117", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/15245", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/157326117"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/15245#discussion_r157326117"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/15245"}}, "body_html": "<p>I find this easier to read without the macro. I think its ok just to duplicate the code in each clause. thanks</p>", "body_text": "I find this easier to read without the macro. I think its ok just to duplicate the code in each clause. thanks"}
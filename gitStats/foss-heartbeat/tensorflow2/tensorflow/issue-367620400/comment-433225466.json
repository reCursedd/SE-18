{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/433225466", "html_url": "https://github.com/tensorflow/tensorflow/issues/22810#issuecomment-433225466", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22810", "id": 433225466, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzIyNTQ2Ng==", "user": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-25T22:22:14Z", "updated_at": "2018-10-25T22:22:14Z", "author_association": "MEMBER", "body_html": "<p>I'm not familiar with OpenFX, but by \"normal\" dynamic linking I mean several shared objects (/plugins) each reference a \"libtensorflow_cc.so\" by name. When the second plugin shared object is loaded it sees that \"libtensorflow_cc.so\" is already loaded and re-uses it rather than running its static initializers again. Trying to load a shared object twice in the same program seems very strange to me.</p>\n<p>The other option is to statically link TensorFlow into each plugin, which should be doable.</p>\n<p>I don't see why an intermediate option between fully dynamic/shared and fully static would be useful, but please let me know if you disagree.</p>", "body_text": "I'm not familiar with OpenFX, but by \"normal\" dynamic linking I mean several shared objects (/plugins) each reference a \"libtensorflow_cc.so\" by name. When the second plugin shared object is loaded it sees that \"libtensorflow_cc.so\" is already loaded and re-uses it rather than running its static initializers again. Trying to load a shared object twice in the same program seems very strange to me.\nThe other option is to statically link TensorFlow into each plugin, which should be doable.\nI don't see why an intermediate option between fully dynamic/shared and fully static would be useful, but please let me know if you disagree.", "body": "I'm not familiar with OpenFX, but by \"normal\" dynamic linking I mean several shared objects (/plugins) each reference a \"libtensorflow_cc.so\" by name. When the second plugin shared object is loaded it sees that \"libtensorflow_cc.so\" is already loaded and re-uses it rather than running its static initializers again. Trying to load a shared object twice in the same program seems very strange to me.\r\n\r\nThe other option is to statically link TensorFlow into each plugin, which should be doable.\r\n\r\nI don't see why an intermediate option between fully dynamic/shared and fully static would be useful, but please let me know if you disagree."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3161", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3161/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3161/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3161/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3161", "id": 163541975, "node_id": "MDU6SXNzdWUxNjM1NDE5NzU=", "number": 3161, "title": "Sequence_Length for RNN Bug", "user": {"login": "danielmogilny", "id": 20261583, "node_id": "MDQ6VXNlcjIwMjYxNTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/20261583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielmogilny", "html_url": "https://github.com/danielmogilny", "followers_url": "https://api.github.com/users/danielmogilny/followers", "following_url": "https://api.github.com/users/danielmogilny/following{/other_user}", "gists_url": "https://api.github.com/users/danielmogilny/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielmogilny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielmogilny/subscriptions", "organizations_url": "https://api.github.com/users/danielmogilny/orgs", "repos_url": "https://api.github.com/users/danielmogilny/repos", "events_url": "https://api.github.com/users/danielmogilny/events{/privacy}", "received_events_url": "https://api.github.com/users/danielmogilny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-07-03T01:02:16Z", "updated_at": "2016-07-25T22:23:53Z", "closed_at": "2016-07-25T22:23:53Z", "author_association": "NONE", "body_html": "<p>I'm using the current up-to-date version of Tensorflow for Apple. For Long-Short Term Memory, there is an error which prevents me from specifying the sequence length [batch_size] Tensor. Code used to work until I updated Tensorflow:</p>\n<p><code>seq_len = tf.placeholder(\"int64\", [batch_size])</code></p>\n<p>...<br>\n...<br>\n...</p>\n<p><code>lstm_fw1_cell = rnn_cell.BasicLSTMCell(n_LSTM_input, forget_bias=1.0)</code></p>\n<p><code>state_fw1 = tf.fill([batch_size,2*n_LSTM_input], constant(0, dtype=tf.float32))</code></p>\n<p><code>outputs, states = rnn.rnn(lstm_fw1_cell, _X, initial_state=state_fw1, scope=\"LSTM1\", sequence_length=_seq_len)</code></p>\n<p>Error:<br>\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 112, in rnn<br>\nlambda: zero_output_state, output_state)<br>\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 642, in cond<br>\nres_f = context_f.BuildCondBranch(fn2)<br>\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 568, in BuildCondBranch<br>\nr = fn()<br>\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 107, in output_state<br>\nreturn cell(input_, state)<br>\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell.py\", line 190, in <strong>call</strong><br>\nconcat = linear([inputs, h], 4 * self._num_units, True)<br>\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell.py\", line 667, in linear<br>\nshapes = [a.get_shape().as_list() for a in args]<br>\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 722, in as_list<br>\nreturn [dim.value for dim in self._dims]<br>\nTypeError: 'NoneType' object is not iterable</p>", "body_text": "I'm using the current up-to-date version of Tensorflow for Apple. For Long-Short Term Memory, there is an error which prevents me from specifying the sequence length [batch_size] Tensor. Code used to work until I updated Tensorflow:\nseq_len = tf.placeholder(\"int64\", [batch_size])\n...\n...\n...\nlstm_fw1_cell = rnn_cell.BasicLSTMCell(n_LSTM_input, forget_bias=1.0)\nstate_fw1 = tf.fill([batch_size,2*n_LSTM_input], constant(0, dtype=tf.float32))\noutputs, states = rnn.rnn(lstm_fw1_cell, _X, initial_state=state_fw1, scope=\"LSTM1\", sequence_length=_seq_len)\nError:\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 112, in rnn\nlambda: zero_output_state, output_state)\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 642, in cond\nres_f = context_f.BuildCondBranch(fn2)\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 568, in BuildCondBranch\nr = fn()\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 107, in output_state\nreturn cell(input_, state)\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell.py\", line 190, in call\nconcat = linear([inputs, h], 4 * self._num_units, True)\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell.py\", line 667, in linear\nshapes = [a.get_shape().as_list() for a in args]\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 722, in as_list\nreturn [dim.value for dim in self._dims]\nTypeError: 'NoneType' object is not iterable", "body": "I'm using the current up-to-date version of Tensorflow for Apple. For Long-Short Term Memory, there is an error which prevents me from specifying the sequence length [batch_size] Tensor. Code used to work until I updated Tensorflow:\n\n`seq_len = tf.placeholder(\"int64\", [batch_size])`\n\n...\n...\n...\n\n`lstm_fw1_cell = rnn_cell.BasicLSTMCell(n_LSTM_input, forget_bias=1.0)`\n\n`state_fw1 = tf.fill([batch_size,2*n_LSTM_input], constant(0, dtype=tf.float32))`\n\n`outputs, states = rnn.rnn(lstm_fw1_cell, _X, initial_state=state_fw1, scope=\"LSTM1\", sequence_length=_seq_len)`\n\nError:\nFile \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 112, in rnn\n    lambda: zero_output_state, output_state)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 642, in cond\n    res_f = context_f.BuildCondBranch(fn2)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 568, in BuildCondBranch\n    r = fn()\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 107, in output_state\n    return cell(input_, state)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell.py\", line 190, in **call**\n    concat = linear([inputs, h], 4 \\* self._num_units, True)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell.py\", line 667, in linear\n    shapes = [a.get_shape().as_list() for a in args]\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 722, in as_list\n    return [dim.value for dim in self._dims]\nTypeError: 'NoneType' object is not iterable\n"}
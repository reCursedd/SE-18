{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4921", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4921/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4921/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4921/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4921", "id": 182612666, "node_id": "MDU6SXNzdWUxODI2MTI2NjY=", "number": 4921, "title": "FileSystem::GetMatchingPaths doesn't work for simple pattern", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2016-10-12T19:28:48Z", "updated_at": "2017-09-16T21:47:54Z", "closed_at": "2017-09-16T21:45:51Z", "author_association": "CONTRIBUTOR", "body_html": "<p>With latest tensorflow.</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ ls\n<span class=\"pl-c1\">test</span></pre></div>\n<div class=\"highlight highlight-source-c++\"><pre>std::vector&lt;string&gt; results;\n<span class=\"pl-k\">auto</span> ret = tensorflow::Env::Default()-&gt;<span class=\"pl-en\">GetMatchingPaths</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>te*<span class=\"pl-pds\">\"</span></span>, &amp;results);\ncout &lt;&lt; results.size() &lt;&lt; endl;  <span class=\"pl-c\"><span class=\"pl-c\">//</span> 0</span>\nret = tensorflow::Env::Default()-&gt;<span class=\"pl-en\">GetMatchingPaths</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>./te*<span class=\"pl-pds\">\"</span></span>, &amp;results);\ncout &lt;&lt; results.size() &lt;&lt; endl;  <span class=\"pl-c\"><span class=\"pl-c\">//</span> 1</span></pre></div>\n<p>Reason:<br>\nIn the implementation of <code>GetMatchingPaths</code> <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/file_system.cc#L94\">here</a>, when the pattern doesn't contain any directory, the prefix <code>.</code> is prepended to all elements in <code>all_files</code>, and then <code>MatchPath(\"./test\", \"te*\")</code> evals to false.</p>", "body_text": "With latest tensorflow.\n$ ls\ntest\nstd::vector<string> results;\nauto ret = tensorflow::Env::Default()->GetMatchingPaths(\"te*\", &results);\ncout << results.size() << endl;  // 0\nret = tensorflow::Env::Default()->GetMatchingPaths(\"./te*\", &results);\ncout << results.size() << endl;  // 1\nReason:\nIn the implementation of GetMatchingPaths here, when the pattern doesn't contain any directory, the prefix . is prepended to all elements in all_files, and then MatchPath(\"./test\", \"te*\") evals to false.", "body": "With latest tensorflow.\n\n``` bash\n$ ls\ntest\n```\n\n``` cpp\nstd::vector<string> results;\nauto ret = tensorflow::Env::Default()->GetMatchingPaths(\"te*\", &results);\ncout << results.size() << endl;  // 0\nret = tensorflow::Env::Default()->GetMatchingPaths(\"./te*\", &results);\ncout << results.size() << endl;  // 1\n```\n\nReason:\nIn the implementation of `GetMatchingPaths` [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/file_system.cc#L94), when the pattern doesn't contain any directory, the prefix `.` is prepended to all elements in `all_files`, and then `MatchPath(\"./test\", \"te*\")` evals to false.\n"}
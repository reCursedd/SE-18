{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/266896485", "html_url": "https://github.com/tensorflow/tensorflow/pull/5194#issuecomment-266896485", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5194", "id": 266896485, "node_id": "MDEyOklzc3VlQ29tbWVudDI2Njg5NjQ4NQ==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2016-12-13T23:34:51Z", "updated_at": "2016-12-13T23:34:51Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">You have merge_repeated=false in both cases for your beam search code. For\ngreedy decoder, the documentation isn't wrong, the code is. I'll look into\nthe beam search decoder in early January.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Dec 13, 2016 3:22 AM, \"saseptim\" ***@***.***&gt; wrote:\n I have run into several issues in the CTC decoding.\n\n    1. The greedy decoder seems to work right but has a problem with the\n    documentation (still). Documentation online still shows\n    A B B * B * B (where '*' is the blank label) becomes\n    A B if merge_repeated=True.\n    A B B B B B if merge_repeated=False.\n\n Both results are wrong.\n This should read:\n A B B B if merge_repeated=True.\n A B B B B if merge_repeated=False.\n\n    1. I had a problem with the beamsearch decoder. Running the code of\n    *igormq* above, but switching in the beamsearch decoder in place of\n    the greedy decoder via:\n    `merge = tf.sparse_tensor_to_dense(tf.nn.ctc_beam_search_decoder(abb_b_b,\n    seq_len, merge_repeated=False)[0][0]).eval()\n\n non_merge = tf.sparse_tensor_to_dense(tf.nn.ctc_beam_search_decoder(abb_b_b,\n seq_len, merge_repeated=False)[0][0]).eval()\n\n print(merge)\n print(non_merge)\n `\n\n the results for both are:\n [[0 1 0 1]] or A B A B\n\n which makes no sense.\n\n Additionally, I have also had the problem where the beamsearch decoder did\n not properly deal with repeated characters and had to switch merge_repeated\n to False.\n\n In summary, documentation problems in greedy decoder, code problems in\n beamsearch decoder.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"185138447\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5194\" href=\"https://github.com/tensorflow/tensorflow/pull/5194#issuecomment-266736700\">#5194 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABtimxvHCRCkf9gd3YMhAeF2t6nmSgdJks5rHpv8gaJpZM4KgErU\">https://github.com/notifications/unsubscribe-auth/ABtimxvHCRCkf9gd3YMhAeF2t6nmSgdJks5rHpv8gaJpZM4KgErU</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "You have merge_repeated=false in both cases for your beam search code. For\ngreedy decoder, the documentation isn't wrong, the code is. I'll look into\nthe beam search decoder in early January.\n\u2026\nOn Dec 13, 2016 3:22 AM, \"saseptim\" ***@***.***> wrote:\n I have run into several issues in the CTC decoding.\n\n    1. The greedy decoder seems to work right but has a problem with the\n    documentation (still). Documentation online still shows\n    A B B * B * B (where '*' is the blank label) becomes\n    A B if merge_repeated=True.\n    A B B B B B if merge_repeated=False.\n\n Both results are wrong.\n This should read:\n A B B B if merge_repeated=True.\n A B B B B if merge_repeated=False.\n\n    1. I had a problem with the beamsearch decoder. Running the code of\n    *igormq* above, but switching in the beamsearch decoder in place of\n    the greedy decoder via:\n    `merge = tf.sparse_tensor_to_dense(tf.nn.ctc_beam_search_decoder(abb_b_b,\n    seq_len, merge_repeated=False)[0][0]).eval()\n\n non_merge = tf.sparse_tensor_to_dense(tf.nn.ctc_beam_search_decoder(abb_b_b,\n seq_len, merge_repeated=False)[0][0]).eval()\n\n print(merge)\n print(non_merge)\n `\n\n the results for both are:\n [[0 1 0 1]] or A B A B\n\n which makes no sense.\n\n Additionally, I have also had the problem where the beamsearch decoder did\n not properly deal with repeated characters and had to switch merge_repeated\n to False.\n\n In summary, documentation problems in greedy decoder, code problems in\n beamsearch decoder.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#5194 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABtimxvHCRCkf9gd3YMhAeF2t6nmSgdJks5rHpv8gaJpZM4KgErU>\n .", "body": "You have merge_repeated=false in both cases for your beam search code. For\ngreedy decoder, the documentation isn't wrong, the code is. I'll look into\nthe beam search decoder in early January.\n\nOn Dec 13, 2016 3:22 AM, \"saseptim\" <notifications@github.com> wrote:\n\n> I have run into several issues in the CTC decoding.\n>\n>    1. The greedy decoder seems to work right but has a problem with the\n>    documentation (still). Documentation online still shows\n>    A B B * B * B (where '*' is the blank label) becomes\n>    A B if merge_repeated=True.\n>    A B B B B B if merge_repeated=False.\n>\n> Both results are wrong.\n> This should read:\n> A B B B if merge_repeated=True.\n> A B B B B if merge_repeated=False.\n>\n>    1. I had a problem with the beamsearch decoder. Running the code of\n>    *igormq* above, but switching in the beamsearch decoder in place of\n>    the greedy decoder via:\n>    `merge = tf.sparse_tensor_to_dense(tf.nn.ctc_beam_search_decoder(abb_b_b,\n>    seq_len, merge_repeated=False)[0][0]).eval()\n>\n> non_merge = tf.sparse_tensor_to_dense(tf.nn.ctc_beam_search_decoder(abb_b_b,\n> seq_len, merge_repeated=False)[0][0]).eval()\n>\n> print(merge)\n> print(non_merge)\n> `\n>\n> the results for both are:\n> [[0 1 0 1]] or A B A B\n>\n> which makes no sense.\n>\n> Additionally, I have also had the problem where the beamsearch decoder did\n> not properly deal with repeated characters and had to switch merge_repeated\n> to False.\n>\n> In summary, documentation problems in greedy decoder, code problems in\n> beamsearch decoder.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/pull/5194#issuecomment-266736700>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtimxvHCRCkf9gd3YMhAeF2t6nmSgdJks5rHpv8gaJpZM4KgErU>\n> .\n>\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12904", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12904/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12904/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12904/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12904", "id": 256195880, "node_id": "MDU6SXNzdWUyNTYxOTU4ODA=", "number": 12904, "title": "make \"build_all_ios.sh\"  occur error", "user": {"login": "yeshuanova", "id": 4150014, "node_id": "MDQ6VXNlcjQxNTAwMTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/4150014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yeshuanova", "html_url": "https://github.com/yeshuanova", "followers_url": "https://api.github.com/users/yeshuanova/followers", "following_url": "https://api.github.com/users/yeshuanova/following{/other_user}", "gists_url": "https://api.github.com/users/yeshuanova/gists{/gist_id}", "starred_url": "https://api.github.com/users/yeshuanova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yeshuanova/subscriptions", "organizations_url": "https://api.github.com/users/yeshuanova/orgs", "repos_url": "https://api.github.com/users/yeshuanova/repos", "events_url": "https://api.github.com/users/yeshuanova/events{/privacy}", "received_events_url": "https://api.github.com/users/yeshuanova/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2017-09-08T09:34:17Z", "updated_at": "2018-01-31T19:12:43Z", "closed_at": "2018-01-31T19:12:43Z", "author_association": "NONE", "body_html": "<p>I try to build tensorflow support at Android and iOS by makefile <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile\">tutorial</a> in current master branch <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/04c318b69c5b565436cfeeaab1cb7fd5419dde27/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/04c318b69c5b565436cfeeaab1cb7fd5419dde27\"><tt>04c318b</tt></a></p>\n<p>When running the build_all_ios.sh script, the below error message show</p>\n<pre><code>Undefined symbols for architecture x86_64:\n  \"nsync::nsync_mu_init(nsync::nsync_mu_s_*)\", referenced from:\n      tensorflow::mutex::mutex() in env.o\n      tensorflow::mutex::mutex() in random.o\n  \"nsync::nsync_mu_lock(nsync::nsync_mu_s_*)\", referenced from:\n      tensorflow::mutex::lock() in env.o\n      tensorflow::mutex::lock() in random.o\n      tensorflow::mutex::lock() in histogram.o\n  \"nsync::nsync_mu_unlock(nsync::nsync_mu_s_*)\", referenced from:\n      tensorflow::mutex::unlock() in env.o\n      tensorflow::mutex::unlock() in random.o\n      tensorflow::mutex::unlock() in histogram.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [/Users/CSL.Peter/tensorflow/tensorflow/tensorflow/contrib/makefile/gen/host_bin/proto_text] Error 1\n+ '[' 2 -ne 0 ']'\n+ echo 'armv7 compilation failed.'\narmv7 compilation failed.\n+ exit 1\n</code></pre>\n<p>The <code>download_dependencies.sh</code> and <code>compile_ios_protobuf.sh</code> run successfully but <code>compile_ios_tensorflow.sh</code> failed. I find same issues <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"163769328\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3191\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3191/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/3191\">#3191</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"175520820\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4252\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4252/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4252\">#4252</a> and seem to be fixed at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"175904236\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4287\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/4287/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/4287\">#4287</a>, but this problem still happen.</p>", "body_text": "I try to build tensorflow support at Android and iOS by makefile tutorial in current master branch 04c318b\nWhen running the build_all_ios.sh script, the below error message show\nUndefined symbols for architecture x86_64:\n  \"nsync::nsync_mu_init(nsync::nsync_mu_s_*)\", referenced from:\n      tensorflow::mutex::mutex() in env.o\n      tensorflow::mutex::mutex() in random.o\n  \"nsync::nsync_mu_lock(nsync::nsync_mu_s_*)\", referenced from:\n      tensorflow::mutex::lock() in env.o\n      tensorflow::mutex::lock() in random.o\n      tensorflow::mutex::lock() in histogram.o\n  \"nsync::nsync_mu_unlock(nsync::nsync_mu_s_*)\", referenced from:\n      tensorflow::mutex::unlock() in env.o\n      tensorflow::mutex::unlock() in random.o\n      tensorflow::mutex::unlock() in histogram.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [/Users/CSL.Peter/tensorflow/tensorflow/tensorflow/contrib/makefile/gen/host_bin/proto_text] Error 1\n+ '[' 2 -ne 0 ']'\n+ echo 'armv7 compilation failed.'\narmv7 compilation failed.\n+ exit 1\n\nThe download_dependencies.sh and compile_ios_protobuf.sh run successfully but compile_ios_tensorflow.sh failed. I find same issues #3191 and #4252 and seem to be fixed at #4287, but this problem still happen.", "body": "I try to build tensorflow support at Android and iOS by makefile [tutorial](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile\r\n) in current master branch 04c318b69c5b565436cfeeaab1cb7fd5419dde27\r\n\r\nWhen running the build_all_ios.sh script, the below error message show\r\n```\r\nUndefined symbols for architecture x86_64:\r\n  \"nsync::nsync_mu_init(nsync::nsync_mu_s_*)\", referenced from:\r\n      tensorflow::mutex::mutex() in env.o\r\n      tensorflow::mutex::mutex() in random.o\r\n  \"nsync::nsync_mu_lock(nsync::nsync_mu_s_*)\", referenced from:\r\n      tensorflow::mutex::lock() in env.o\r\n      tensorflow::mutex::lock() in random.o\r\n      tensorflow::mutex::lock() in histogram.o\r\n  \"nsync::nsync_mu_unlock(nsync::nsync_mu_s_*)\", referenced from:\r\n      tensorflow::mutex::unlock() in env.o\r\n      tensorflow::mutex::unlock() in random.o\r\n      tensorflow::mutex::unlock() in histogram.o\r\nld: symbol(s) not found for architecture x86_64\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\nmake: *** [/Users/CSL.Peter/tensorflow/tensorflow/tensorflow/contrib/makefile/gen/host_bin/proto_text] Error 1\r\n+ '[' 2 -ne 0 ']'\r\n+ echo 'armv7 compilation failed.'\r\narmv7 compilation failed.\r\n+ exit 1\r\n```\r\nThe `download_dependencies.sh` and `compile_ios_protobuf.sh` run successfully but `compile_ios_tensorflow.sh` failed. I find same issues #3191 and #4252 and seem to be fixed at #4287, but this problem still happen."}
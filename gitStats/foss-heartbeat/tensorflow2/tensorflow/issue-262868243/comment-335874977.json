{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/335874977", "html_url": "https://github.com/tensorflow/tensorflow/issues/13492#issuecomment-335874977", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13492", "id": 335874977, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTg3NDk3Nw==", "user": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-11T16:52:29Z", "updated_at": "2017-10-11T16:52:29Z", "author_association": "MEMBER", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23068\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yaroslavvb\">@yaroslavvb</a>, the problem is that the entire graph will be placed, not the pruned graph. This means that even when you're not attempting to run the diag op with the invalid device, it will still try to place it, causing the error. You can set place_pruned_graph to true in the ConfigOptions passed to a Session to avoid this, see <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.3/tensorflow/core/protobuf/config.proto#L153\">https://github.com/tensorflow/tensorflow/blob/r1.3/tensorflow/core/protobuf/config.proto#L153</a>. You can also use InteractiveSession, which sets this automatically.</p>", "body_text": "Hi @yaroslavvb, the problem is that the entire graph will be placed, not the pruned graph. This means that even when you're not attempting to run the diag op with the invalid device, it will still try to place it, causing the error. You can set place_pruned_graph to true in the ConfigOptions passed to a Session to avoid this, see https://github.com/tensorflow/tensorflow/blob/r1.3/tensorflow/core/protobuf/config.proto#L153. You can also use InteractiveSession, which sets this automatically.", "body": "Hi @yaroslavvb, the problem is that the entire graph will be placed, not the pruned graph. This means that even when you're not attempting to run the diag op with the invalid device, it will still try to place it, causing the error. You can set place_pruned_graph to true in the ConfigOptions passed to a Session to avoid this, see https://github.com/tensorflow/tensorflow/blob/r1.3/tensorflow/core/protobuf/config.proto#L153. You can also use InteractiveSession, which sets this automatically."}
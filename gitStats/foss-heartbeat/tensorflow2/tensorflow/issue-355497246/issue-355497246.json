{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21969", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21969/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21969/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21969/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21969", "id": 355497246, "node_id": "MDU6SXNzdWUzNTU0OTcyNDY=", "number": 21969, "title": "Python wheel doesn't work on some Intel Xeon CPU", "user": {"login": "gdetrez", "id": 38019, "node_id": "MDQ6VXNlcjM4MDE5", "avatar_url": "https://avatars2.githubusercontent.com/u/38019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gdetrez", "html_url": "https://github.com/gdetrez", "followers_url": "https://api.github.com/users/gdetrez/followers", "following_url": "https://api.github.com/users/gdetrez/following{/other_user}", "gists_url": "https://api.github.com/users/gdetrez/gists{/gist_id}", "starred_url": "https://api.github.com/users/gdetrez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gdetrez/subscriptions", "organizations_url": "https://api.github.com/users/gdetrez/orgs", "repos_url": "https://api.github.com/users/gdetrez/repos", "events_url": "https://api.github.com/users/gdetrez/events{/privacy}", "received_events_url": "https://api.github.com/users/gdetrez/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-30T09:19:35Z", "updated_at": "2018-08-30T09:54:54Z", "closed_at": "2018-08-30T09:54:54Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nNo</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nLinux simi 4.4.0-131-generic <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116444691\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/157\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/157/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/157\">#157</a>-Ubuntu SMP Thu Jul 12 15:51:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>:<br>\nn/a</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nbinary (pip install)</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\nI cannot run the suggested command (more bellow) but the version installed by pip is tensorflow-1.10.1.</li>\n<li><strong>Python version</strong>:<br>\n3.5.2</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\nn/a</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\nn/a</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nn/a</li>\n<li><strong>GPU model and memory</strong>:<br>\nn/a</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<pre><code>python -c 'import tensorflow'\n</code></pre>\n<h3>Describe the problem</h3>\n<p>I cannot even import the tensorflow module:</p>\n<pre><code>$ ./tfvenv/bin/python -c 'import tensorflow'\nIllegal instruction   \n</code></pre>\n<p>Digging through the system log, I found this line that seems to give more details on the problem:</p>\n<pre><code>aug 30 11:07:27 simi kernel: traps: python[6186] trap invalid opcode ip:7f989e396250 sp:7fff8959df80 error:0 in libtensorflow_framework.so[7f989df07000+c88000]\n</code></pre>\n<p>After some googling, my understanding is that the tf build uses instruction that are not available on my CPU.  Since it is a regular x86_64 architecture, I assume it is a bug but maybe not? Are there particular CPU requirements for tensorflow that I didn't manage to find?</p>\n<h3>Source code / logs</h3>\n<p>I'm pasting the output of <code>lshw -class cpu</code> from the machine where the issue occurs:</p>\n<pre><code>  *-cpu:0\n       description: CPU\n       product: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\n       vendor: Intel Corp.\n       physical id: 400\n       bus info: cpu@0\n       version: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\n       slot: CPU1\n       size: 2667MHz\n       capacity: 3600MHz\n       width: 64 bits\n       clock: 1333MHz\n       capabilities: x86-64 fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx constant_tsc arch_perfmon pebs bts rep_good nopl aperfmperf eagerfpu pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm dca sse4_1 xsave lahf_lm kaiser tpr_shadow vnmi flexpriority dtherm\n       configuration: cores=4 enabledcores=4 threads=4\n  *-cpu:1\n       description: CPU\n       product: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\n       vendor: Intel Corp.\n       physical id: 401\n       bus info: cpu@1\n       version: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\n       slot: CPU2\n       size: 2667MHz\n       capacity: 3600MHz\n       width: 64 bits\n       clock: 1333MHz\n       capabilities: x86-64 fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx constant_tsc arch_perfmon pebs bts rep_good nopl aperfmperf eagerfpu pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm dca sse4_1 xsave lahf_lm kaiser tpr_shadow vnmi flexpriority dtherm\n       configuration: cores=4 enabledcores=4 threads=4\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nNo\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nLinux simi 4.4.0-131-generic #157-Ubuntu SMP Thu Jul 12 15:51:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nn/a\nTensorFlow installed from (source or binary):\nbinary (pip install)\nTensorFlow version (use command below):\nI cannot run the suggested command (more bellow) but the version installed by pip is tensorflow-1.10.1.\nPython version:\n3.5.2\nBazel version (if compiling from source):\nn/a\nGCC/Compiler version (if compiling from source):\nn/a\nCUDA/cuDNN version:\nn/a\nGPU model and memory:\nn/a\nExact command to reproduce:\n\npython -c 'import tensorflow'\n\nDescribe the problem\nI cannot even import the tensorflow module:\n$ ./tfvenv/bin/python -c 'import tensorflow'\nIllegal instruction   \n\nDigging through the system log, I found this line that seems to give more details on the problem:\naug 30 11:07:27 simi kernel: traps: python[6186] trap invalid opcode ip:7f989e396250 sp:7fff8959df80 error:0 in libtensorflow_framework.so[7f989df07000+c88000]\n\nAfter some googling, my understanding is that the tf build uses instruction that are not available on my CPU.  Since it is a regular x86_64 architecture, I assume it is a bug but maybe not? Are there particular CPU requirements for tensorflow that I didn't manage to find?\nSource code / logs\nI'm pasting the output of lshw -class cpu from the machine where the issue occurs:\n  *-cpu:0\n       description: CPU\n       product: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\n       vendor: Intel Corp.\n       physical id: 400\n       bus info: cpu@0\n       version: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\n       slot: CPU1\n       size: 2667MHz\n       capacity: 3600MHz\n       width: 64 bits\n       clock: 1333MHz\n       capabilities: x86-64 fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx constant_tsc arch_perfmon pebs bts rep_good nopl aperfmperf eagerfpu pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm dca sse4_1 xsave lahf_lm kaiser tpr_shadow vnmi flexpriority dtherm\n       configuration: cores=4 enabledcores=4 threads=4\n  *-cpu:1\n       description: CPU\n       product: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\n       vendor: Intel Corp.\n       physical id: 401\n       bus info: cpu@1\n       version: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\n       slot: CPU2\n       size: 2667MHz\n       capacity: 3600MHz\n       width: 64 bits\n       clock: 1333MHz\n       capabilities: x86-64 fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx constant_tsc arch_perfmon pebs bts rep_good nopl aperfmperf eagerfpu pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm dca sse4_1 xsave lahf_lm kaiser tpr_shadow vnmi flexpriority dtherm\n       configuration: cores=4 enabledcores=4 threads=4", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nNo\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nLinux simi 4.4.0-131-generic #157-Ubuntu SMP Thu Jul 12 15:51:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\nn/a\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary (pip install)\r\n- **TensorFlow version (use command below)**:\r\nI cannot run the suggested command (more bellow) but the version installed by pip is tensorflow-1.10.1.\r\n- **Python version**:\r\n3.5.2\r\n- **Bazel version (if compiling from source)**:\r\nn/a\r\n- **GCC/Compiler version (if compiling from source)**:\r\nn/a\r\n- **CUDA/cuDNN version**:\r\nn/a\r\n- **GPU model and memory**:\r\nn/a\r\n- **Exact command to reproduce**:\r\n```\r\npython -c 'import tensorflow'\r\n```\r\n\r\n### Describe the problem\r\n\r\nI cannot even import the tensorflow module:\r\n```\r\n$ ./tfvenv/bin/python -c 'import tensorflow'\r\nIllegal instruction   \r\n```\r\nDigging through the system log, I found this line that seems to give more details on the problem:\r\n```\r\naug 30 11:07:27 simi kernel: traps: python[6186] trap invalid opcode ip:7f989e396250 sp:7fff8959df80 error:0 in libtensorflow_framework.so[7f989df07000+c88000]\r\n```\r\n\r\nAfter some googling, my understanding is that the tf build uses instruction that are not available on my CPU.  Since it is a regular x86_64 architecture, I assume it is a bug but maybe not? Are there particular CPU requirements for tensorflow that I didn't manage to find?\r\n\r\n### Source code / logs\r\nI'm pasting the output of `lshw -class cpu` from the machine where the issue occurs:\r\n```\r\n  *-cpu:0\r\n       description: CPU\r\n       product: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\r\n       vendor: Intel Corp.\r\n       physical id: 400\r\n       bus info: cpu@0\r\n       version: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\r\n       slot: CPU1\r\n       size: 2667MHz\r\n       capacity: 3600MHz\r\n       width: 64 bits\r\n       clock: 1333MHz\r\n       capabilities: x86-64 fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx constant_tsc arch_perfmon pebs bts rep_good nopl aperfmperf eagerfpu pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm dca sse4_1 xsave lahf_lm kaiser tpr_shadow vnmi flexpriority dtherm\r\n       configuration: cores=4 enabledcores=4 threads=4\r\n  *-cpu:1\r\n       description: CPU\r\n       product: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\r\n       vendor: Intel Corp.\r\n       physical id: 401\r\n       bus info: cpu@1\r\n       version: Intel(R) Xeon(R) CPU           E5430  @ 2.66GHz\r\n       slot: CPU2\r\n       size: 2667MHz\r\n       capacity: 3600MHz\r\n       width: 64 bits\r\n       clock: 1333MHz\r\n       capabilities: x86-64 fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx constant_tsc arch_perfmon pebs bts rep_good nopl aperfmperf eagerfpu pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm dca sse4_1 xsave lahf_lm kaiser tpr_shadow vnmi flexpriority dtherm\r\n       configuration: cores=4 enabledcores=4 threads=4\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11871", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11871/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11871/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11871/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11871", "id": 246532377, "node_id": "MDU6SXNzdWUyNDY1MzIzNzc=", "number": 11871, "title": "Error during compilation of tensorflow-GPU using bazel 0.5.3", "user": {"login": "feranick", "id": 35967, "node_id": "MDQ6VXNlcjM1OTY3", "avatar_url": "https://avatars1.githubusercontent.com/u/35967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feranick", "html_url": "https://github.com/feranick", "followers_url": "https://api.github.com/users/feranick/followers", "following_url": "https://api.github.com/users/feranick/following{/other_user}", "gists_url": "https://api.github.com/users/feranick/gists{/gist_id}", "starred_url": "https://api.github.com/users/feranick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feranick/subscriptions", "organizations_url": "https://api.github.com/users/feranick/orgs", "repos_url": "https://api.github.com/users/feranick/repos", "events_url": "https://api.github.com/users/feranick/events{/privacy}", "received_events_url": "https://api.github.com/users/feranick/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "av8ramit", "id": 5588272, "node_id": "MDQ6VXNlcjU1ODgyNzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5588272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/av8ramit", "html_url": "https://github.com/av8ramit", "followers_url": "https://api.github.com/users/av8ramit/followers", "following_url": "https://api.github.com/users/av8ramit/following{/other_user}", "gists_url": "https://api.github.com/users/av8ramit/gists{/gist_id}", "starred_url": "https://api.github.com/users/av8ramit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/av8ramit/subscriptions", "organizations_url": "https://api.github.com/users/av8ramit/orgs", "repos_url": "https://api.github.com/users/av8ramit/repos", "events_url": "https://api.github.com/users/av8ramit/events{/privacy}", "received_events_url": "https://api.github.com/users/av8ramit/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "av8ramit", "id": 5588272, "node_id": "MDQ6VXNlcjU1ODgyNzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5588272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/av8ramit", "html_url": "https://github.com/av8ramit", "followers_url": "https://api.github.com/users/av8ramit/followers", "following_url": "https://api.github.com/users/av8ramit/following{/other_user}", "gists_url": "https://api.github.com/users/av8ramit/gists{/gist_id}", "starred_url": "https://api.github.com/users/av8ramit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/av8ramit/subscriptions", "organizations_url": "https://api.github.com/users/av8ramit/orgs", "repos_url": "https://api.github.com/users/av8ramit/repos", "events_url": "https://api.github.com/users/av8ramit/events{/privacy}", "received_events_url": "https://api.github.com/users/av8ramit/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2017-07-29T16:54:10Z", "updated_at": "2017-10-16T21:16:40Z", "closed_at": "2017-10-16T21:16:40Z", "author_association": "NONE", "body_html": "<p>Using Bazel 0.5.3 (from installer, both sh and deb) on Ubuntu 16.04 to compile tensorflow-gpu, I get the following error that fails compilation:</p>\n<p><code> Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last): File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1039 _create_local_cuda_repository(repository_ctx) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 976, in _create_local_cuda_repository _host_compiler_includes(repository_ctx, cc) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 145, in _host_compiler_includes get_cxx_inc_directories(repository_ctx, cc) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 120, in get_cxx_inc_directories set(includes_cpp) depsets cannot contain mutable items WARNING: Target pattern parsing failed. ERROR: error loading package 'tensorflow/tools/pip_package': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last): File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1039 _create_local_cuda_repository(repository_ctx) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 976, in _create_local_cuda_repository _host_compiler_includes(repository_ctx, cc) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 145, in _host_compiler_includes get_cxx_inc_directories(repository_ctx, cc) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 120, in get_cxx_inc_directories set(includes_cpp)</code></p>\n<p>Compilation proceeds just fine using Bazel 0.5.2. Note: the error occurs when I try to compile ANY version of tensorflow (tested 1.2.1, 1.3rc0, 1.3rc1, git).</p>\n<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code</strong>: No</li>\n<li><strong>OS Platform and Distribution</strong>: Linux Ubuntu 16.04</li>\n<li>**TensorFlow installed from **: source</li>\n<li><strong>TensorFlow version</strong>: v1.2.0-2210-g49961e5 1.2.1, v.1.3 (rc0, rc1), HEAD</li>\n<li><strong>Python version</strong>: 3.5.2</li>\n<li><strong>Bazel version</strong>: (Both 0.5.2 and 0.5.3 from deb installer, and sh installer)</li>\n<li><strong>CUDA/cuDNN version</strong>: CUDA 8, CuDNN 6.1</li>\n<li><strong>GPU model and memory</strong>: GeForce 1050Ti - 4Gb</li>\n</ul>\n<h3>Describe the problem###</h3>\n<p>Make sure you clean the bazel cache.<br>\nInstall bazel 0.5.2 (from installer, deb or sh).<br>\nTry compilation of tensorflow-gpu. it should work fine.<br>\nRemove bazel 0.5.2 and clean its cache.<br>\nInstal bazel 0.5.3 (from installer, deb or sh)<br>\nRepeat compilation of tensorflow and the error appears, preventing the full compilation.</p>", "body_text": "Using Bazel 0.5.3 (from installer, both sh and deb) on Ubuntu 16.04 to compile tensorflow-gpu, I get the following error that fails compilation:\n Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last): File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1039 _create_local_cuda_repository(repository_ctx) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 976, in _create_local_cuda_repository _host_compiler_includes(repository_ctx, cc) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 145, in _host_compiler_includes get_cxx_inc_directories(repository_ctx, cc) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 120, in get_cxx_inc_directories set(includes_cpp) depsets cannot contain mutable items WARNING: Target pattern parsing failed. ERROR: error loading package 'tensorflow/tools/pip_package': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last): File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1039 _create_local_cuda_repository(repository_ctx) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 976, in _create_local_cuda_repository _host_compiler_includes(repository_ctx, cc) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 145, in _host_compiler_includes get_cxx_inc_directories(repository_ctx, cc) File \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 120, in get_cxx_inc_directories set(includes_cpp)\nCompilation proceeds just fine using Bazel 0.5.2. Note: the error occurs when I try to compile ANY version of tensorflow (tested 1.2.1, 1.3rc0, 1.3rc1, git).\n\nSystem information\n\nHave I written custom code: No\nOS Platform and Distribution: Linux Ubuntu 16.04\n**TensorFlow installed from **: source\nTensorFlow version: v1.2.0-2210-g49961e5 1.2.1, v.1.3 (rc0, rc1), HEAD\nPython version: 3.5.2\nBazel version: (Both 0.5.2 and 0.5.3 from deb installer, and sh installer)\nCUDA/cuDNN version: CUDA 8, CuDNN 6.1\nGPU model and memory: GeForce 1050Ti - 4Gb\n\nDescribe the problem###\nMake sure you clean the bazel cache.\nInstall bazel 0.5.2 (from installer, deb or sh).\nTry compilation of tensorflow-gpu. it should work fine.\nRemove bazel 0.5.2 and clean its cache.\nInstal bazel 0.5.3 (from installer, deb or sh)\nRepeat compilation of tensorflow and the error appears, preventing the full compilation.", "body": "Using Bazel 0.5.3 (from installer, both sh and deb) on Ubuntu 16.04 to compile tensorflow-gpu, I get the following error that fails compilation:\r\n\r\n` Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\r\n\tFile \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1039\r\n\t\t_create_local_cuda_repository(repository_ctx)\r\n\tFile \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 976, in _create_local_cuda_repository\r\n\t\t_host_compiler_includes(repository_ctx, cc)\r\n\tFile \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 145, in _host_compiler_includes\r\n\t\tget_cxx_inc_directories(repository_ctx, cc)\r\n\tFile \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 120, in get_cxx_inc_directories\r\n\t\tset(includes_cpp)\r\ndepsets cannot contain mutable items\r\nWARNING: Target pattern parsing failed.\r\nERROR: error loading package 'tensorflow/tools/pip_package': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\r\n\tFile \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1039\r\n\t\t_create_local_cuda_repository(repository_ctx)\r\n\tFile \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 976, in _create_local_cuda_repository\r\n\t\t_host_compiler_includes(repository_ctx, cc)\r\n\tFile \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 145, in _host_compiler_includes\r\n\t\tget_cxx_inc_directories(repository_ctx, cc)\r\n\tFile \"/home/nicola/Software/tensorflow/gpu/tensorflow/third_party/gpus/cuda_configure.bzl\", line 120, in get_cxx_inc_directories\r\n\t\tset(includes_cpp)`\r\n\r\nCompilation proceeds just fine using Bazel 0.5.2. Note: the error occurs when I try to compile ANY version of tensorflow (tested 1.2.1, 1.3rc0, 1.3rc1, git).\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code**: No\r\n- **OS Platform and Distribution**: Linux Ubuntu 16.04\r\n- **TensorFlow installed from **: source\r\n- **TensorFlow version**: v1.2.0-2210-g49961e5 1.2.1, v.1.3 (rc0, rc1), HEAD\r\n- **Python version**: 3.5.2\r\n- **Bazel version**: (Both 0.5.2 and 0.5.3 from deb installer, and sh installer)\r\n- **CUDA/cuDNN version**: CUDA 8, CuDNN 6.1\r\n- **GPU model and memory**: GeForce 1050Ti - 4Gb\r\n\r\n### Describe the problem###\r\nMake sure you clean the bazel cache. \r\nInstall bazel 0.5.2 (from installer, deb or sh).\r\nTry compilation of tensorflow-gpu. it should work fine. \r\nRemove bazel 0.5.2 and clean its cache. \r\nInstal bazel 0.5.3 (from installer, deb or sh)\r\nRepeat compilation of tensorflow and the error appears, preventing the full compilation.\r\n"}
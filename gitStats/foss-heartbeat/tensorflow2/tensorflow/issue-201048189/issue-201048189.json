{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6880", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6880/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6880/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6880/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6880", "id": 201048189, "node_id": "MDU6SXNzdWUyMDEwNDgxODk=", "number": 6880, "title": "tf.gfile.GFile issue on windows", "user": {"login": "happytian", "id": 992549, "node_id": "MDQ6VXNlcjk5MjU0OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/992549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/happytian", "html_url": "https://github.com/happytian", "followers_url": "https://api.github.com/users/happytian/followers", "following_url": "https://api.github.com/users/happytian/following{/other_user}", "gists_url": "https://api.github.com/users/happytian/gists{/gist_id}", "starred_url": "https://api.github.com/users/happytian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/happytian/subscriptions", "organizations_url": "https://api.github.com/users/happytian/orgs", "repos_url": "https://api.github.com/users/happytian/repos", "events_url": "https://api.github.com/users/happytian/events{/privacy}", "received_events_url": "https://api.github.com/users/happytian/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-16T15:28:28Z", "updated_at": "2017-01-17T19:13:10Z", "closed_at": "2017-01-17T19:13:10Z", "author_association": "NONE", "body_html": "<p>When I use tf.gfile.GFile and set mode='rb' to open a file on windows, it will read as 'str' instead of 'byte'. For example,</p>\n<p>f = tf.gfile.GFile(\"d2f42068.ini\", mode='rb')<br>\nf.readline()<br>\nThe result shows<br>\n'\\n'.<br>\nIt should be<br>\nb'\\n'</p>\n<p>I find the gfile.py replace the 'r' to empty.<br>\ndef <strong>init</strong>(self, name, mode='r'):<br>\nmode = mode.replace('b', '')<br>\nsuper(FastGFile, self).<strong>init</strong>(name=name, mode=mode)</p>\n<p>This issue will cause some error of data reading on windows.</p>\n<p>My OS is win10 x64. The version of tensorflow is r0.12.</p>", "body_text": "When I use tf.gfile.GFile and set mode='rb' to open a file on windows, it will read as 'str' instead of 'byte'. For example,\nf = tf.gfile.GFile(\"d2f42068.ini\", mode='rb')\nf.readline()\nThe result shows\n'\\n'.\nIt should be\nb'\\n'\nI find the gfile.py replace the 'r' to empty.\ndef init(self, name, mode='r'):\nmode = mode.replace('b', '')\nsuper(FastGFile, self).init(name=name, mode=mode)\nThis issue will cause some error of data reading on windows.\nMy OS is win10 x64. The version of tensorflow is r0.12.", "body": "When I use tf.gfile.GFile and set mode='rb' to open a file on windows, it will read as 'str' instead of 'byte'. For example,\r\n\r\nf = tf.gfile.GFile(\"d2f42068.ini\", mode='rb')\r\nf.readline()\r\nThe result shows\r\n'<KVList>\\n'.\r\nIt should be \r\nb'<KVList>\\n'\r\n\r\nI find the gfile.py replace the 'r' to empty.\r\ndef __init__(self, name, mode='r'):\r\n    mode = mode.replace('b', '')\r\n    super(FastGFile, self).__init__(name=name, mode=mode)\r\n\r\nThis issue will cause some error of data reading on windows.\r\n\r\nMy OS is win10 x64. The version of tensorflow is r0.12. "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/152149565", "pull_request_review_id": 77967290, "id": 152149565, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MjE0OTU2NQ==", "diff_hunk": "@@ -1,73 +1,39 @@\n-FROM ubuntu\n+FROM tensorflow/tensorflow:latest-devel\n \n LABEL maintainer=\"Clayne Robison<clayne.b.robison@intel.com>\"\n \n-# It is possible to override these for releases.\n+# These arguments are parameterized. Use --build-args to override.\n ARG TF_BRANCH=r1.4\n ARG BAZEL_VERSION=0.7.0\n ARG WHL_DIR=/whl\n \n RUN apt-get update && apt-get install -y --no-install-recommends \\\n-        build-essential \\\n-        curl \\\n-        git \\\n         golang \\\n-        libcurl3-dev \\\n-        libfreetype6-dev \\\n-        libzmq3-dev \\\n-        pkg-config \\\n-        python-dev \\\n-        python-pip \\\n-        rsync \\\n-        software-properties-common \\\n-        unzip \\\n-        zip \\\n-        zlib1g-dev \\\n-        openjdk-8-jdk \\\n-        openjdk-8-jre-headless \\\n-        wget \\\n-\tlocate \\\n-\tvim \\\n+        vim \\\n+        emacs \\\n         && \\\n     apt-get clean && \\\n     rm -rf /var/lib/apt/lists/*\n \n RUN pip --no-cache-dir install --upgrade \\\n         pip setuptools\n \n-RUN pip --no-cache-dir install \\\n-        ipykernel \\\n-        matplotlib \\\n-        numpy \\\n-        scipy \\\n-        sklearn \\\n-        pandas \\\n-        wheel \\\n-        && \\\n-    python -m ipykernel.kernelspec\n-\n-# Set up Bazel.\n+RUN pip --no-cache-dir install wheel \n \n-# Running bazel inside a `docker build` command causes trouble, cf:\n-#   https://github.com/bazelbuild/bazel/issues/134\n-# The easiest solution is to set up a bazelrc file forcing --batch.\n-RUN echo \"startup --batch\" >>/etc/bazel.bazelrc\n-# Similarly, we need to workaround sandboxing issues:\n-#   https://github.com/bazelbuild/bazel/issues/418\n-RUN echo \"build --spawn_strategy=standalone --genrule_strategy=standalone\" \\\n-    >>/etc/bazel.bazelrc\n+# Use the specified Bazel version\n WORKDIR /\n-RUN mkdir /bazel && \\\n-    cd /bazel && \\\n-    wget --quiet https://github.com/bazelbuild/bazel/releases/download/$BAZEL_VERSION/bazel-$BAZEL_VERSION-installer-linux-x86_64.sh && \\\n-    wget --quiet https://raw.githubusercontent.com/bazelbuild/bazel/master/LICENSE && \\\n+RUN cd /bazel && \\\n+    rm -rf * && \\\n+    curl -H \"User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\" -fSsL -O https://github.com/bazelbuild/bazel/releases/download/${BAZEL_VERSION}/bazel-${BAZEL_VERSION}-installer-linux-x86_64.sh && \\\n+    curl -H \"User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\" -fSsL -o /bazel/LICENSE.txt https://raw.githubusercontent.com/bazelbuild/bazel/master/LICENSE && \\", "path": "tensorflow/tools/docker/Dockerfile.devel-cpu-mkl", "position": null, "original_position": 73, "commit_id": "526802e472b371c8e68f4fdf97bfe41b97c84801", "original_commit_id": "054cb3f0a48fe65a4d6b025c3726fb620cb8066d", "user": {"login": "inc0", "id": 697528, "node_id": "MDQ6VXNlcjY5NzUyOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/697528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inc0", "html_url": "https://github.com/inc0", "followers_url": "https://api.github.com/users/inc0/followers", "following_url": "https://api.github.com/users/inc0/following{/other_user}", "gists_url": "https://api.github.com/users/inc0/gists{/gist_id}", "starred_url": "https://api.github.com/users/inc0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inc0/subscriptions", "organizations_url": "https://api.github.com/users/inc0/orgs", "repos_url": "https://api.github.com/users/inc0/repos", "events_url": "https://api.github.com/users/inc0/events{/privacy}", "received_events_url": "https://api.github.com/users/inc0/received_events", "type": "User", "site_admin": true}, "body": "why you need headers? looks strange...", "created_at": "2017-11-21T00:26:51Z", "updated_at": "2017-11-21T17:26:52Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/14468#discussion_r152149565", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14468", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/152149565"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/14468#discussion_r152149565"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14468"}}, "body_html": "<p>why you need headers? looks strange...</p>", "body_text": "why you need headers? looks strange..."}
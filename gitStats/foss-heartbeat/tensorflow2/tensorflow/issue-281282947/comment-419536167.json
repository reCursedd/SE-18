{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/419536167", "html_url": "https://github.com/tensorflow/tensorflow/pull/15299#issuecomment-419536167", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15299", "id": 419536167, "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTUzNjE2Nw==", "user": {"login": "ceballosiker", "id": 31108511, "node_id": "MDQ6VXNlcjMxMTA4NTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/31108511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ceballosiker", "html_url": "https://github.com/ceballosiker", "followers_url": "https://api.github.com/users/ceballosiker/followers", "following_url": "https://api.github.com/users/ceballosiker/following{/other_user}", "gists_url": "https://api.github.com/users/ceballosiker/gists{/gist_id}", "starred_url": "https://api.github.com/users/ceballosiker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ceballosiker/subscriptions", "organizations_url": "https://api.github.com/users/ceballosiker/orgs", "repos_url": "https://api.github.com/users/ceballosiker/repos", "events_url": "https://api.github.com/users/ceballosiker/events{/privacy}", "received_events_url": "https://api.github.com/users/ceballosiker/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-07T19:05:20Z", "updated_at": "2018-09-07T19:05:20Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=8096033\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jinxin0924\">@jinxin0924</a> ,</p>\n<p>I've been working with distributed tensorflow for a while and I found this contribution interesting. I've tried to make it work with a simple example on cifar-10, following this tutorial: <a href=\"https://www.tensorflow.org/tutorials/images/deep_cnn\" rel=\"nofollow\">https://www.tensorflow.org/tutorials/images/deep_cnn</a></p>\n<p>The code I wrote works perfectly with tf.train.SyncReplicasOptimizer, however I can't make it work with your custom optimizer. I always get a TypeError: _true_getter() got multiple values for argument 'shape'. <a href=\"https://github.com/Acuratio/distributed-tensorflow-tests/blob/master/model_average_classifier.py\">Model Average Test</a></p>\n<p>This error was being triggered by tf.train.get_or_create_global_step() and tf.train.ExponentialMovingAverage(), so I removed them. However I still get the same error at the definition of the ModelAverageOptimizer which I can't remove, so I can't make it work.</p>\n<p>Do you have any ideas as of why is this happening or how could I solve this? Any help would be much appreciated. Thanks!</p>", "body_text": "Hi @jinxin0924 ,\nI've been working with distributed tensorflow for a while and I found this contribution interesting. I've tried to make it work with a simple example on cifar-10, following this tutorial: https://www.tensorflow.org/tutorials/images/deep_cnn\nThe code I wrote works perfectly with tf.train.SyncReplicasOptimizer, however I can't make it work with your custom optimizer. I always get a TypeError: _true_getter() got multiple values for argument 'shape'. Model Average Test\nThis error was being triggered by tf.train.get_or_create_global_step() and tf.train.ExponentialMovingAverage(), so I removed them. However I still get the same error at the definition of the ModelAverageOptimizer which I can't remove, so I can't make it work.\nDo you have any ideas as of why is this happening or how could I solve this? Any help would be much appreciated. Thanks!", "body": "Hi @jinxin0924 ,\r\n\r\nI've been working with distributed tensorflow for a while and I found this contribution interesting. I've tried to make it work with a simple example on cifar-10, following this tutorial: https://www.tensorflow.org/tutorials/images/deep_cnn\r\n\r\nThe code I wrote works perfectly with tf.train.SyncReplicasOptimizer, however I can't make it work with your custom optimizer. I always get a TypeError: _true_getter() got multiple values for argument 'shape'. [Model Average Test](https://github.com/Acuratio/distributed-tensorflow-tests/blob/master/model_average_classifier.py)\r\n\r\nThis error was being triggered by tf.train.get_or_create_global_step() and tf.train.ExponentialMovingAverage(), so I removed them. However I still get the same error at the definition of the ModelAverageOptimizer which I can't remove, so I can't make it work.\r\n\r\nDo you have any ideas as of why is this happening or how could I solve this? Any help would be much appreciated. Thanks!"}
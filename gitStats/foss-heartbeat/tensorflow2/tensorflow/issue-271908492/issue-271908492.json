{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14324", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14324/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14324/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14324/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14324", "id": 271908492, "node_id": "MDU6SXNzdWUyNzE5MDg0OTI=", "number": 14324, "title": "input_dims not a constant expression in slice_op.cc ", "user": {"login": "ejls", "id": 10982331, "node_id": "MDQ6VXNlcjEwOTgyMzMx", "avatar_url": "https://avatars3.githubusercontent.com/u/10982331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ejls", "html_url": "https://github.com/ejls", "followers_url": "https://api.github.com/users/ejls/followers", "following_url": "https://api.github.com/users/ejls/following{/other_user}", "gists_url": "https://api.github.com/users/ejls/gists{/gist_id}", "starred_url": "https://api.github.com/users/ejls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ejls/subscriptions", "organizations_url": "https://api.github.com/users/ejls/orgs", "repos_url": "https://api.github.com/users/ejls/repos", "events_url": "https://api.github.com/users/ejls/events{/privacy}", "received_events_url": "https://api.github.com/users/ejls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-07T17:00:57Z", "updated_at": "2017-11-24T13:48:31Z", "closed_at": "2017-11-24T13:48:31Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: no</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Debian 9.0 (with a Gentoo Prefix)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/c81acfb025abe417d80ffa677edfe2dd1bcda58e/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/c81acfb025abe417d80ffa677edfe2dd1bcda58e\"><tt>c81acfb</tt></a> (15 hours old)</li>\n<li><strong>Python version</strong>: 3.6.3</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.6.1</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: 6.4.0</li>\n<li><strong>CUDA/cuDNN version</strong>: no CUDA</li>\n<li><strong>GPU model and memory</strong>: no GPU</li>\n<li><strong>Exact command to reproduce</strong>: bazel build --config=mkl --config=opt //tensorflow/tools/pip_package:build_pip_package</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>It seems that <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/8011eda4b70faac6025c6b0553c3d95474adb5fe/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/8011eda4b70faac6025c6b0553c3d95474adb5fe\"><tt>8011eda</tt></a> merged a C++ error in file <a href=\"https://github.com/tensorflow/tensorflow/blob/db430c4bb275e05ee65dc27c7f771f778bfcbcf2/tensorflow/core/kernels/slice_op.cc#L255\">tensorflow/core/kernels/slice_op.cc line 255</a>.<br>\nAs seen <a href=\"https://github.com/tensorflow/tensorflow/blob/db430c4bb275e05ee65dc27c7f771f778bfcbcf2/tensorflow/core/kernels/slice_op.cc#L232\">line 232</a>, input_dims is a constant (const), but is not a constant expression (constexpr), thus it should not be used as a template parameter.</p>\n<h3>Source code / logs</h3>\n<pre><code>ERROR: /local/esimon/prefix/usr/local/src/tensorflow/tensorflow/core/kernels/BUILD:780:1: C++ compilation of rule '//tensorflow/core/kernel$\n:slice_op' failed (Exit 1).\ntensorflow/core/kernels/slice_op.cc: In member function 'void tensorflow::MklSliceOp&lt;Device, T&gt;::Compute(tensorflow::OpKernelContext*)':\ntensorflow/core/kernels/slice_op.cc:255:35: error: the value of 'input_dims' is not usable in a constant expression\n         functor::Slice&lt;Device, T, input_dims&gt;()(\n                                   ^~~~~~~~~~\ntensorflow/core/kernels/slice_op.cc:232:15: note: 'input_dims' was not initialized with a constant expression\n     const int input_dims = input.dims();\n               ^~~~~~~~~~\ntensorflow/core/kernels/slice_op.cc:255:45: error: the value of 'input_dims' is not usable in a constant expression\n         functor::Slice&lt;Device, T, input_dims&gt;()(\n                                             ^\ntensorflow/core/kernels/slice_op.cc:232:15: note: 'input_dims' was not initialized with a constant expression\n     const int input_dims = input.dims();\n               ^~~~~~~~~~\ntensorflow/core/kernels/slice_op.cc:255:45: note: in template argument for type 'int'\n         functor::Slice&lt;Device, T, input_dims&gt;()(\n                                             ^\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian 9.0 (with a Gentoo Prefix)\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): c81acfb (15 hours old)\nPython version: 3.6.3\nBazel version (if compiling from source): 0.6.1\nGCC/Compiler version (if compiling from source): 6.4.0\nCUDA/cuDNN version: no CUDA\nGPU model and memory: no GPU\nExact command to reproduce: bazel build --config=mkl --config=opt //tensorflow/tools/pip_package:build_pip_package\n\nDescribe the problem\nIt seems that 8011eda merged a C++ error in file tensorflow/core/kernels/slice_op.cc line 255.\nAs seen line 232, input_dims is a constant (const), but is not a constant expression (constexpr), thus it should not be used as a template parameter.\nSource code / logs\nERROR: /local/esimon/prefix/usr/local/src/tensorflow/tensorflow/core/kernels/BUILD:780:1: C++ compilation of rule '//tensorflow/core/kernel$\n:slice_op' failed (Exit 1).\ntensorflow/core/kernels/slice_op.cc: In member function 'void tensorflow::MklSliceOp<Device, T>::Compute(tensorflow::OpKernelContext*)':\ntensorflow/core/kernels/slice_op.cc:255:35: error: the value of 'input_dims' is not usable in a constant expression\n         functor::Slice<Device, T, input_dims>()(\n                                   ^~~~~~~~~~\ntensorflow/core/kernels/slice_op.cc:232:15: note: 'input_dims' was not initialized with a constant expression\n     const int input_dims = input.dims();\n               ^~~~~~~~~~\ntensorflow/core/kernels/slice_op.cc:255:45: error: the value of 'input_dims' is not usable in a constant expression\n         functor::Slice<Device, T, input_dims>()(\n                                             ^\ntensorflow/core/kernels/slice_op.cc:232:15: note: 'input_dims' was not initialized with a constant expression\n     const int input_dims = input.dims();\n               ^~~~~~~~~~\ntensorflow/core/kernels/slice_op.cc:255:45: note: in template argument for type 'int'\n         functor::Slice<Device, T, input_dims>()(\n                                             ^", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Debian 9.0 (with a Gentoo Prefix)\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: c81acfb025abe417d80ffa677edfe2dd1bcda58e (15 hours old)\r\n- **Python version**: 3.6.3\r\n- **Bazel version (if compiling from source)**: 0.6.1\r\n- **GCC/Compiler version (if compiling from source)**: 6.4.0\r\n- **CUDA/cuDNN version**: no CUDA\r\n- **GPU model and memory**: no GPU\r\n- **Exact command to reproduce**: bazel build --config=mkl --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\n### Describe the problem\r\nIt seems that 8011eda4b7 merged a C++ error in file [tensorflow/core/kernels/slice_op.cc line 255](https://github.com/tensorflow/tensorflow/blob/db430c4bb275e05ee65dc27c7f771f778bfcbcf2/tensorflow/core/kernels/slice_op.cc#L255).\r\nAs seen [line 232](https://github.com/tensorflow/tensorflow/blob/db430c4bb275e05ee65dc27c7f771f778bfcbcf2/tensorflow/core/kernels/slice_op.cc#L232), input_dims is a constant (const), but is not a constant expression (constexpr), thus it should not be used as a template parameter.\r\n\r\n### Source code / logs\r\n```\r\nERROR: /local/esimon/prefix/usr/local/src/tensorflow/tensorflow/core/kernels/BUILD:780:1: C++ compilation of rule '//tensorflow/core/kernel$\r\n:slice_op' failed (Exit 1).\r\ntensorflow/core/kernels/slice_op.cc: In member function 'void tensorflow::MklSliceOp<Device, T>::Compute(tensorflow::OpKernelContext*)':\r\ntensorflow/core/kernels/slice_op.cc:255:35: error: the value of 'input_dims' is not usable in a constant expression\r\n         functor::Slice<Device, T, input_dims>()(\r\n                                   ^~~~~~~~~~\r\ntensorflow/core/kernels/slice_op.cc:232:15: note: 'input_dims' was not initialized with a constant expression\r\n     const int input_dims = input.dims();\r\n               ^~~~~~~~~~\r\ntensorflow/core/kernels/slice_op.cc:255:45: error: the value of 'input_dims' is not usable in a constant expression\r\n         functor::Slice<Device, T, input_dims>()(\r\n                                             ^\r\ntensorflow/core/kernels/slice_op.cc:232:15: note: 'input_dims' was not initialized with a constant expression\r\n     const int input_dims = input.dims();\r\n               ^~~~~~~~~~\r\ntensorflow/core/kernels/slice_op.cc:255:45: note: in template argument for type 'int'\r\n         functor::Slice<Device, T, input_dims>()(\r\n                                             ^\r\n```"}
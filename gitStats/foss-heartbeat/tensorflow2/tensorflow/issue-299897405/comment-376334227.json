{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/376334227", "html_url": "https://github.com/tensorflow/tensorflow/pull/17236#issuecomment-376334227", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17236", "id": 376334227, "node_id": "MDEyOklzc3VlQ29tbWVudDM3NjMzNDIyNw==", "user": {"login": "xiejw", "id": 1184671, "node_id": "MDQ6VXNlcjExODQ2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1184671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiejw", "html_url": "https://github.com/xiejw", "followers_url": "https://api.github.com/users/xiejw/followers", "following_url": "https://api.github.com/users/xiejw/following{/other_user}", "gists_url": "https://api.github.com/users/xiejw/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiejw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiejw/subscriptions", "organizations_url": "https://api.github.com/users/xiejw/orgs", "repos_url": "https://api.github.com/users/xiejw/repos", "events_url": "https://api.github.com/users/xiejw/events{/privacy}", "received_events_url": "https://api.github.com/users/xiejw/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-26T22:37:03Z", "updated_at": "2018-03-26T22:37:03Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Sorry the confusion. When I see the \"panda\", I am thinking pandas_input_fn [1].</p>\n<p>I re-read your code and figured out you were creating the input_fn by yourself. I have tested your scripted locally and found the following issues:</p>\n<ol>\n<li>scope name should not be int. It should be str. Of course, this is not user facing part as your repro example is using the number_column.</li>\n<li>tf.feature_column.numeric_column takes a string as key name [2]. Your repro example is passing int, which is not allowed.</li>\n</ol>\n<p>I do not think it is reasonable to hack all the framework code in order to support the unsupported \"int\" type here as most of APIs explicitly documented the argument should be string. Added <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19293677\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ispirmustafa\">@ispirmustafa</a><br>\nfor his insights.</p>\n<p>I think there are two ways to fix this</p>\n<ol>\n<li>\n<p>In your code, cast all the keys to string types. It should work. I have not tested by myself. You can either give explicit string column name to DataFrame or cast in the input_fn.</p>\n</li>\n<li>\n<p>You can also use the tf.estimator.inputs.pandas_input_fn. It needed a fix I mentioned in previous comment (converting the column name from int to str) -- which I can fix for you. See [3] for a working example.</p>\n</li>\n</ol>\n<p>I think item 1) by adding string column name is easiest for you. See [4]</p>\n<p>[1]  <a href=\"https://www.tensorflow.org/api_docs/python/tf/estimator/inputs/pandas_input_fn\" rel=\"nofollow\">https://www.tensorflow.org/api_docs/python/tf/estimator/inputs/pandas_input_fn</a></p>\n<p>[2] <a href=\"https://www.tensorflow.org/api_docs/python/tf/feature_column/numeric_column\" rel=\"nofollow\">https://www.tensorflow.org/api_docs/python/tf/feature_column/numeric_column</a></p>\n<p>[3] <a href=\"https://gist.github.com/xiejw/7b4c351beec41817c62f587ad90970ad\">https://gist.github.com/xiejw/7b4c351beec41817c62f587ad90970ad</a></p>\n<p>[4] <a href=\"https://gist.github.com/xiejw/329502f3726f139e6af85829bdad2720\">https://gist.github.com/xiejw/329502f3726f139e6af85829bdad2720</a></p>", "body_text": "Sorry the confusion. When I see the \"panda\", I am thinking pandas_input_fn [1].\nI re-read your code and figured out you were creating the input_fn by yourself. I have tested your scripted locally and found the following issues:\n\nscope name should not be int. It should be str. Of course, this is not user facing part as your repro example is using the number_column.\ntf.feature_column.numeric_column takes a string as key name [2]. Your repro example is passing int, which is not allowed.\n\nI do not think it is reasonable to hack all the framework code in order to support the unsupported \"int\" type here as most of APIs explicitly documented the argument should be string. Added @ispirmustafa\nfor his insights.\nI think there are two ways to fix this\n\n\nIn your code, cast all the keys to string types. It should work. I have not tested by myself. You can either give explicit string column name to DataFrame or cast in the input_fn.\n\n\nYou can also use the tf.estimator.inputs.pandas_input_fn. It needed a fix I mentioned in previous comment (converting the column name from int to str) -- which I can fix for you. See [3] for a working example.\n\n\nI think item 1) by adding string column name is easiest for you. See [4]\n[1]  https://www.tensorflow.org/api_docs/python/tf/estimator/inputs/pandas_input_fn\n[2] https://www.tensorflow.org/api_docs/python/tf/feature_column/numeric_column\n[3] https://gist.github.com/xiejw/7b4c351beec41817c62f587ad90970ad\n[4] https://gist.github.com/xiejw/329502f3726f139e6af85829bdad2720", "body": "Sorry the confusion. When I see the \"panda\", I am thinking pandas_input_fn [1].\r\n\r\nI re-read your code and figured out you were creating the input_fn by yourself. I have tested your scripted locally and found the following issues:\r\n1) scope name should not be int. It should be str. Of course, this is not user facing part as your repro example is using the number_column.\r\n2) tf.feature_column.numeric_column takes a string as key name [2]. Your repro example is passing int, which is not allowed. \r\n\r\nI do not think it is reasonable to hack all the framework code in order to support the unsupported \"int\" type here as most of APIs explicitly documented the argument should be string. Added @ispirmustafa \r\nfor his insights.\r\n\r\nI think there are two ways to fix this\r\n1) In your code, cast all the keys to string types. It should work. I have not tested by myself. You can either give explicit string column name to DataFrame or cast in the input_fn.\r\n\r\n2) You can also use the tf.estimator.inputs.pandas_input_fn. It needed a fix I mentioned in previous comment (converting the column name from int to str) -- which I can fix for you. See [3] for a working example. \r\n\r\nI think item 1) by adding string column name is easiest for you. See [4]\r\n\r\n\r\n[1]  https://www.tensorflow.org/api_docs/python/tf/estimator/inputs/pandas_input_fn\r\n\r\n[2] https://www.tensorflow.org/api_docs/python/tf/feature_column/numeric_column\r\n\r\n[3] https://gist.github.com/xiejw/7b4c351beec41817c62f587ad90970ad\r\n\r\n[4] https://gist.github.com/xiejw/329502f3726f139e6af85829bdad2720"}
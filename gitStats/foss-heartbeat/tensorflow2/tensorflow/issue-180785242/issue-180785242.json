{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4740", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4740/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4740/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4740/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4740", "id": 180785242, "node_id": "MDU6SXNzdWUxODA3ODUyNDI=", "number": 4740, "title": "fully_connected_preloaded_var.py unexpectedly slow", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-10-04T01:15:21Z", "updated_at": "2016-10-04T23:17:55Z", "closed_at": "2016-10-04T23:17:55Z", "author_association": "CONTRIBUTOR", "body_html": "<p>From <a href=\"http://stackoverflow.com/questions/39840323/benchmark-of-howto-reading-data\" rel=\"nofollow\">http://stackoverflow.com/questions/39840323/benchmark-of-howto-reading-data</a> -- <code>examples/tutorials/mnist/fully_connected_feed.py</code> runs roughly 10x faster per step (<code>feed_dict</code>) than <code>examples/tutorials/mnist/fully_connected_preloaded_var.py</code> (TF variable with <code>slice_input_producer</code>). Looking at Timeline (attached), it seems the training is bottlenecked on QueueDequeueMany which takes 13ms<br>\nwhich is about 100x slower than corresponding segment on <code>feed_dict</code> example timeline. Also, the timing taken by <code>QueueDequeueMany</code> scales linearly with batch-size. IE, increasing batch-size to 200 makes it take 22ms.</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/507476/timeline.var.json.zip\">timeline.var.json.zip</a></p>", "body_text": "From http://stackoverflow.com/questions/39840323/benchmark-of-howto-reading-data -- examples/tutorials/mnist/fully_connected_feed.py runs roughly 10x faster per step (feed_dict) than examples/tutorials/mnist/fully_connected_preloaded_var.py (TF variable with slice_input_producer). Looking at Timeline (attached), it seems the training is bottlenecked on QueueDequeueMany which takes 13ms\nwhich is about 100x slower than corresponding segment on feed_dict example timeline. Also, the timing taken by QueueDequeueMany scales linearly with batch-size. IE, increasing batch-size to 200 makes it take 22ms.\ntimeline.var.json.zip", "body": "From http://stackoverflow.com/questions/39840323/benchmark-of-howto-reading-data -- `examples/tutorials/mnist/fully_connected_feed.py` runs roughly 10x faster per step (`feed_dict`) than `examples/tutorials/mnist/fully_connected_preloaded_var.py` (TF variable with `slice_input_producer`). Looking at Timeline (attached), it seems the training is bottlenecked on QueueDequeueMany which takes 13ms\nwhich is about 100x slower than corresponding segment on `feed_dict` example [timeline](%28https://github.com/tensorflow/tensorflow/files/507483/timeline.feed.json.zip%29). Also, the timing taken by `QueueDequeueMany` scales linearly with batch-size. IE, increasing batch-size to 200 makes it take 22ms.\n\n[timeline.var.json.zip](https://github.com/tensorflow/tensorflow/files/507476/timeline.var.json.zip)\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/317837289", "html_url": "https://github.com/tensorflow/tensorflow/issues/11730#issuecomment-317837289", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11730", "id": 317837289, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzgzNzI4OQ==", "user": {"login": "villanuevab", "id": 3021974, "node_id": "MDQ6VXNlcjMwMjE5NzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/3021974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villanuevab", "html_url": "https://github.com/villanuevab", "followers_url": "https://api.github.com/users/villanuevab/followers", "following_url": "https://api.github.com/users/villanuevab/following{/other_user}", "gists_url": "https://api.github.com/users/villanuevab/gists{/gist_id}", "starred_url": "https://api.github.com/users/villanuevab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villanuevab/subscriptions", "organizations_url": "https://api.github.com/users/villanuevab/orgs", "repos_url": "https://api.github.com/users/villanuevab/repos", "events_url": "https://api.github.com/users/villanuevab/events{/privacy}", "received_events_url": "https://api.github.com/users/villanuevab/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-25T18:56:51Z", "updated_at": "2017-07-25T18:59:23Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=17731159\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/printdhruv\">@printdhruv</a>, doing so results in no CUDA OOM errors, but the process still mysteriously quits.</p>\n<pre><code># explicitly limit per_process_gpu_memory_fraction\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.3)\n# config to turn on XLA JIT compilation\nconfig = tf.ConfigProto(gpu_options=gpu_options)\nconfig.graph_options.optimizer_options.global_jit_level = \\\n    tf.OptimizerOptions.ON_1\n</code></pre>\n<p>See the error log below:</p>\n<pre lang=\"tensorflow/stream_executor/dso_loader.cc:135]\" data-meta=\"successfully opened CUDA library libcublas.so.8.0 locally\"><code>I tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:873] ARM has no NUMA node, hardcoding to return zero\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \nname: GP10B\nmajor: 6 minor: 2 memoryClockRate (GHz) 1.3005\npciBusID 0000:00:00.0\nTotal memory: 7.67GiB\nFree memory: 4.04GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GP10B, pci bus id: 0000:00:00.0)\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 1 visible devices\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 6 visible devices\nI tensorflow/compiler/xla/service/service.cc:180] XLA service executing computations on platform Host. Devices:\nI tensorflow/compiler/xla/service/service.cc:187]   StreamExecutor device (0): &lt;undefined&gt;, &lt;undefined&gt;\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 1 visible devices\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 6 visible devices\nI tensorflow/compiler/xla/service/service.cc:180] XLA service executing computations on platform CUDA. Devices:\nI tensorflow/compiler/xla/service/service.cc:187]   StreamExecutor device (0): GP10B, Compute Capability 6.2\nKilled\n</code></pre>", "body_text": "@printdhruv, doing so results in no CUDA OOM errors, but the process still mysteriously quits.\n# explicitly limit per_process_gpu_memory_fraction\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.3)\n# config to turn on XLA JIT compilation\nconfig = tf.ConfigProto(gpu_options=gpu_options)\nconfig.graph_options.optimizer_options.global_jit_level = \\\n    tf.OptimizerOptions.ON_1\n\nSee the error log below:\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:873] ARM has no NUMA node, hardcoding to return zero\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \nname: GP10B\nmajor: 6 minor: 2 memoryClockRate (GHz) 1.3005\npciBusID 0000:00:00.0\nTotal memory: 7.67GiB\nFree memory: 4.04GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GP10B, pci bus id: 0000:00:00.0)\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 1 visible devices\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 6 visible devices\nI tensorflow/compiler/xla/service/service.cc:180] XLA service executing computations on platform Host. Devices:\nI tensorflow/compiler/xla/service/service.cc:187]   StreamExecutor device (0): <undefined>, <undefined>\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 1 visible devices\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 6 visible devices\nI tensorflow/compiler/xla/service/service.cc:180] XLA service executing computations on platform CUDA. Devices:\nI tensorflow/compiler/xla/service/service.cc:187]   StreamExecutor device (0): GP10B, Compute Capability 6.2\nKilled", "body": "@printdhruv, doing so results in no CUDA OOM errors, but the process still mysteriously quits. \r\n```\r\n# explicitly limit per_process_gpu_memory_fraction\r\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.3)\r\n# config to turn on XLA JIT compilation\r\nconfig = tf.ConfigProto(gpu_options=gpu_options)\r\nconfig.graph_options.optimizer_options.global_jit_level = \\\r\n    tf.OptimizerOptions.ON_1\r\n```\r\nSee the error log below: \r\n``` tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library\r\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:873] ARM has no NUMA node, hardcoding to return zero\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \r\nname: GP10B\r\nmajor: 6 minor: 2 memoryClockRate (GHz) 1.3005\r\npciBusID 0000:00:00.0\r\nTotal memory: 7.67GiB\r\nFree memory: 4.04GiB\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GP10B, pci bus id: 0000:00:00.0)\r\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 1 visible devices\r\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 6 visible devices\r\nI tensorflow/compiler/xla/service/service.cc:180] XLA service executing computations on platform Host. Devices:\r\nI tensorflow/compiler/xla/service/service.cc:187]   StreamExecutor device (0): <undefined>, <undefined>\r\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 1 visible devices\r\nI tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 6 visible devices\r\nI tensorflow/compiler/xla/service/service.cc:180] XLA service executing computations on platform CUDA. Devices:\r\nI tensorflow/compiler/xla/service/service.cc:187]   StreamExecutor device (0): GP10B, Compute Capability 6.2\r\nKilled\r\n```"}
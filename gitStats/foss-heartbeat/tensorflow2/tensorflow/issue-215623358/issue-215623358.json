{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8571", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8571/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8571/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8571/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8571", "id": 215623358, "node_id": "MDU6SXNzdWUyMTU2MjMzNTg=", "number": 8571, "title": "shape of state in the output of dynamic_rnn is undetermined", "user": {"login": "zakizhou", "id": 19201532, "node_id": "MDQ6VXNlcjE5MjAxNTMy", "avatar_url": "https://avatars0.githubusercontent.com/u/19201532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zakizhou", "html_url": "https://github.com/zakizhou", "followers_url": "https://api.github.com/users/zakizhou/followers", "following_url": "https://api.github.com/users/zakizhou/following{/other_user}", "gists_url": "https://api.github.com/users/zakizhou/gists{/gist_id}", "starred_url": "https://api.github.com/users/zakizhou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zakizhou/subscriptions", "organizations_url": "https://api.github.com/users/zakizhou/orgs", "repos_url": "https://api.github.com/users/zakizhou/repos", "events_url": "https://api.github.com/users/zakizhou/events{/privacy}", "received_events_url": "https://api.github.com/users/zakizhou/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-03-21T04:02:58Z", "updated_at": "2017-09-05T04:09:07Z", "closed_at": "2017-09-05T04:09:07Z", "author_association": "NONE", "body_html": "<p>short code:</p>\n<pre><code>sequence_lengths, (sequences, labels) = bucket_by_sequence_length(\n                                              input_length=sequence_length,\n                                              tensors=[sequence, label],\n                                              batch_size=72,\n                                              bucket_boundaries=[80, 160, 240, 320, 400],\n                                              dynamic_pad=True)\nlstm_cell = core_rnn_cell.BasicLSTMCell(num_units=56)\nlookup = tf.nn.embedding_lookup(......)\n_, state = tf.nn.dynamic_rnn(\n                      cell=lstm_cell,\n                      inputs=lookup,\n                      sequence_length=sequence_lengths,\n                      dtype=tf.float32)\n</code></pre>\n<p>then <code>state.h</code> and <code>state.c</code> should be of shape <code>[72, 56]</code>, but actually the first dim(batch_size) is undetermined in program, is it a bug?</p>", "body_text": "short code:\nsequence_lengths, (sequences, labels) = bucket_by_sequence_length(\n                                              input_length=sequence_length,\n                                              tensors=[sequence, label],\n                                              batch_size=72,\n                                              bucket_boundaries=[80, 160, 240, 320, 400],\n                                              dynamic_pad=True)\nlstm_cell = core_rnn_cell.BasicLSTMCell(num_units=56)\nlookup = tf.nn.embedding_lookup(......)\n_, state = tf.nn.dynamic_rnn(\n                      cell=lstm_cell,\n                      inputs=lookup,\n                      sequence_length=sequence_lengths,\n                      dtype=tf.float32)\n\nthen state.h and state.c should be of shape [72, 56], but actually the first dim(batch_size) is undetermined in program, is it a bug?", "body": "short code:\r\n```\r\nsequence_lengths, (sequences, labels) = bucket_by_sequence_length(\r\n                                              input_length=sequence_length,\r\n                                              tensors=[sequence, label],\r\n                                              batch_size=72,\r\n                                              bucket_boundaries=[80, 160, 240, 320, 400],\r\n                                              dynamic_pad=True)\r\nlstm_cell = core_rnn_cell.BasicLSTMCell(num_units=56)\r\nlookup = tf.nn.embedding_lookup(......)\r\n_, state = tf.nn.dynamic_rnn(\r\n                      cell=lstm_cell,\r\n                      inputs=lookup,\r\n                      sequence_length=sequence_lengths,\r\n                      dtype=tf.float32)\r\n```\r\nthen `state.h` and `state.c` should be of shape `[72, 56]`, but actually the first dim(batch_size) is undetermined in program, is it a bug?"}
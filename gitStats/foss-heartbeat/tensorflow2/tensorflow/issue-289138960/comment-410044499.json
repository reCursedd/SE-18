{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/410044499", "html_url": "https://github.com/tensorflow/tensorflow/pull/16175#issuecomment-410044499", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16175", "id": 410044499, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDA0NDQ5OQ==", "user": {"login": "raziel", "id": 129535, "node_id": "MDQ6VXNlcjEyOTUzNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/129535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raziel", "html_url": "https://github.com/raziel", "followers_url": "https://api.github.com/users/raziel/followers", "following_url": "https://api.github.com/users/raziel/following{/other_user}", "gists_url": "https://api.github.com/users/raziel/gists{/gist_id}", "starred_url": "https://api.github.com/users/raziel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raziel/subscriptions", "organizations_url": "https://api.github.com/users/raziel/orgs", "repos_url": "https://api.github.com/users/raziel/repos", "events_url": "https://api.github.com/users/raziel/events{/privacy}", "received_events_url": "https://api.github.com/users/raziel/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-02T19:41:11Z", "updated_at": "2018-08-02T19:41:11Z", "author_association": "NONE", "body_html": "<p>Hi. This is my understanding of the issue:</p>\n<p>NEON is mandatory (always present) for aarch64 (arm64), so -mfpu and -mfloat are not only not needed but invalid as the aarch64 and arm backends are completely separate in gcc.<br>\nThey're needed for the arm 32 archs like armeabi-v7a, and armv7a though.<br>\nHaving said that, the -O3 option is still needed on both, so it's good it's the default here.</p>\n<p>I also can see how if you're compiling, the arm64-v8a would map to the arm target. But I also see how on a 32 bit arm it would also do the same (I haven't tried myself).</p>\n<p>So, can you try adding a more specific target:</p>\n<pre><code>\":arm64-v8a\": [\n    \"-O3\",\n],\n</code></pre>\n<p>Otherwise, by removing the arm target, there could be 32 bit cases that would not get the flags needed.</p>", "body_text": "Hi. This is my understanding of the issue:\nNEON is mandatory (always present) for aarch64 (arm64), so -mfpu and -mfloat are not only not needed but invalid as the aarch64 and arm backends are completely separate in gcc.\nThey're needed for the arm 32 archs like armeabi-v7a, and armv7a though.\nHaving said that, the -O3 option is still needed on both, so it's good it's the default here.\nI also can see how if you're compiling, the arm64-v8a would map to the arm target. But I also see how on a 32 bit arm it would also do the same (I haven't tried myself).\nSo, can you try adding a more specific target:\n\":arm64-v8a\": [\n    \"-O3\",\n],\n\nOtherwise, by removing the arm target, there could be 32 bit cases that would not get the flags needed.", "body": "Hi. This is my understanding of the issue:\r\n\r\nNEON is mandatory (always present) for aarch64 (arm64), so -mfpu and -mfloat are not only not needed but invalid as the aarch64 and arm backends are completely separate in gcc.\r\nThey're needed for the arm 32 archs like armeabi-v7a, and armv7a though.\r\nHaving said that, the -O3 option is still needed on both, so it's good it's the default here.\r\n\r\nI also can see how if you're compiling, the arm64-v8a would map to the arm target. But I also see how on a 32 bit arm it would also do the same (I haven't tried myself).\r\n\r\nSo, can you try adding a more specific target:\r\n\r\n    \":arm64-v8a\": [\r\n        \"-O3\",\r\n    ],\r\n\r\nOtherwise, by removing the arm target, there could be 32 bit cases that would not get the flags needed."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/420472599", "html_url": "https://github.com/tensorflow/tensorflow/issues/21891#issuecomment-420472599", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21891", "id": 420472599, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDQ3MjU5OQ==", "user": {"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-12T00:40:13Z", "updated_at": "2018-09-12T00:40:13Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2138696\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ToonTalk\">@ToonTalk</a> this seems to happen for any search input text at all (e.g. \"x\"), not just japanese or hindi inputs - does that match what you're seeing?</p>\n<p>I ran this through the debugger and it seems to be coming from this line triggered when <code>p.index</code> is 19999:<br>\n<a href=\"https://github.com/tensorflow/tensorboard/blob/1.10/tensorboard/plugins/projector/vz_projector/util.ts#L157\">https://github.com/tensorflow/tensorboard/blob/1.10/tensorboard/plugins/projector/vz_projector/util.ts#L157</a></p>\n<p>On loading the page, I noticed a message shows up saying: \"Number of tensors (20000) do not match the number of lines in metadata (19999).\"</p>\n<p>So I'm guessing the issue has something to do with that discrepancy, and the search predicate is being evaluated on a 20,000th tensor entry that has no corresponding metadata and as a result <code>p.metadata[fieldName]</code> returns undefined.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2294279\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dsmilkov\">@dsmilkov</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1100749\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nsthorat\">@nsthorat</a> does this diagnosis seem right?  Do you know where the right place would be to add the appropriate guarding logic?</p>", "body_text": "@ToonTalk this seems to happen for any search input text at all (e.g. \"x\"), not just japanese or hindi inputs - does that match what you're seeing?\nI ran this through the debugger and it seems to be coming from this line triggered when p.index is 19999:\nhttps://github.com/tensorflow/tensorboard/blob/1.10/tensorboard/plugins/projector/vz_projector/util.ts#L157\nOn loading the page, I noticed a message shows up saying: \"Number of tensors (20000) do not match the number of lines in metadata (19999).\"\nSo I'm guessing the issue has something to do with that discrepancy, and the search predicate is being evaluated on a 20,000th tensor entry that has no corresponding metadata and as a result p.metadata[fieldName] returns undefined.\n@dsmilkov @nsthorat does this diagnosis seem right?  Do you know where the right place would be to add the appropriate guarding logic?", "body": "@ToonTalk this seems to happen for any search input text at all (e.g. \"x\"), not just japanese or hindi inputs - does that match what you're seeing?\r\n\r\nI ran this through the debugger and it seems to be coming from this line triggered when `p.index` is 19999:\r\nhttps://github.com/tensorflow/tensorboard/blob/1.10/tensorboard/plugins/projector/vz_projector/util.ts#L157\r\n\r\nOn loading the page, I noticed a message shows up saying: \"Number of tensors (20000) do not match the number of lines in metadata (19999).\"\r\n\r\nSo I'm guessing the issue has something to do with that discrepancy, and the search predicate is being evaluated on a 20,000th tensor entry that has no corresponding metadata and as a result `p.metadata[fieldName]` returns undefined.\r\n\r\n@dsmilkov @nsthorat does this diagnosis seem right?  Do you know where the right place would be to add the appropriate guarding logic?\r\n\r\n"}
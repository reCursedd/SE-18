{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/133297410", "pull_request_review_id": 56462855, "id": 133297410, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMzI5NzQxMA==", "diff_hunk": "@@ -45,6 +45,27 @@ def getargspec(object):  # pylint: disable=redefined-builtin\n                if d.decorator_argspec is not None), _inspect.getargspec(target))\n \n \n+def getfullargspec(object):  # pylint: disable=redefined-builtin\n+  \"\"\"TFDecorator-aware replacement for inspect.getargspec.\n+\n+  Args:\n+    object: A callable, possibly decorated.\n+\n+  Returns:\n+    The `FullArgSpec` (Python 3) or `ArgSpec` (Python 2)", "path": "tensorflow/python/util/tf_inspect.py", "position": null, "original_position": 11, "commit_id": "30579aacc3bd974bfe1120bfffb7a6c1f0a3533a", "original_commit_id": "e3b2a99ae612e91d2cf503e9bc605a828ab66bf7", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "body": "@martinwicke They are not truly compatible as FullArgSpec has `varkw` while ArgSpec has `keywords`. For example, if `getfullargspec` is used, then in `tensorflow/python/util/deprecation.py`:\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/325fc2330f4e527b394456ce1d821f2c73b1e7a2/tensorflow/python/util/deprecation.py#L224-L229\r\n\r\nThe following has to be used:\r\n```\r\n# Cannot use arg_spec.keywords directory\r\ngetattr(arg_spec, \"keywords\", getattr(arg_spec, \"varkw\"))\r\n```\r\n\r\nFor that I try to use `util.getfullargspec` only for `estimator.Estimator`. For everything else, the original `util.getargspec` would be used.", "created_at": "2017-08-15T20:39:58Z", "updated_at": "2017-11-07T23:04:52Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/12276#discussion_r133297410", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12276", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/133297410"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/12276#discussion_r133297410"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12276"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=577277\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/martinwicke\">@martinwicke</a> They are not truly compatible as FullArgSpec has <code>varkw</code> while ArgSpec has <code>keywords</code>. For example, if <code>getfullargspec</code> is used, then in <code>tensorflow/python/util/deprecation.py</code>:</p>\n<p><div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/325fc2330f4e527b394456ce1d821f2c73b1e7a2/tensorflow/python/util/deprecation.py#L224-L229\">tensorflow/tensorflow/python/util/deprecation.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n        Lines 224 to 229\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/325fc2330f4e527b394456ce1d821f2c73b1e7a2\">325fc23</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L224\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"224\"></td>\n          <td id=\"LC224\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> arg_spec <span class=\"pl-k\">=</span> tf_inspect.getargspec(func) </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L225\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"225\"></td>\n          <td id=\"LC225\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> deprecated_positions <span class=\"pl-k\">=</span> _get_deprecated_positional_arguments( </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L226\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"226\"></td>\n          <td id=\"LC226\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">     deprecated_arg_names, arg_spec) </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L227\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"227\"></td>\n          <td id=\"LC227\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L228\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"228\"></td>\n          <td id=\"LC228\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> is_varargs_deprecated <span class=\"pl-k\">=</span> arg_spec.varargs <span class=\"pl-k\">in</span> deprecated_arg_names </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L229\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"229\"></td>\n          <td id=\"LC229\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> is_kwargs_deprecated <span class=\"pl-k\">=</span> arg_spec.keywords <span class=\"pl-k\">in</span> deprecated_arg_names </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>The following has to be used:</p>\n<pre><code># Cannot use arg_spec.keywords directory\ngetattr(arg_spec, \"keywords\", getattr(arg_spec, \"varkw\"))\n</code></pre>\n<p>For that I try to use <code>util.getfullargspec</code> only for <code>estimator.Estimator</code>. For everything else, the original <code>util.getargspec</code> would be used.</p>", "body_text": "@martinwicke They are not truly compatible as FullArgSpec has varkw while ArgSpec has keywords. For example, if getfullargspec is used, then in tensorflow/python/util/deprecation.py:\n\n  \n    \n      tensorflow/tensorflow/python/util/deprecation.py\n    \n    \n        Lines 224 to 229\n      in\n      325fc23\n    \n    \n    \n    \n\n        \n          \n           arg_spec = tf_inspect.getargspec(func) \n        \n\n        \n          \n           deprecated_positions = _get_deprecated_positional_arguments( \n        \n\n        \n          \n               deprecated_arg_names, arg_spec) \n        \n\n        \n          \n            \n        \n\n        \n          \n           is_varargs_deprecated = arg_spec.varargs in deprecated_arg_names \n        \n\n        \n          \n           is_kwargs_deprecated = arg_spec.keywords in deprecated_arg_names \n        \n    \n  \n\n\nThe following has to be used:\n# Cannot use arg_spec.keywords directory\ngetattr(arg_spec, \"keywords\", getattr(arg_spec, \"varkw\"))\n\nFor that I try to use util.getfullargspec only for estimator.Estimator. For everything else, the original util.getargspec would be used.", "in_reply_to_id": 133091740}
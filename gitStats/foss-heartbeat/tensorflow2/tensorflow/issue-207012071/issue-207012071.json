{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7444", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7444/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7444/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7444/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7444", "id": 207012071, "node_id": "MDU6SXNzdWUyMDcwMTIwNzE=", "number": 7444, "title": "tfprof model analyzer ignores scalar parameters", "user": {"login": "taion", "id": 3112159, "node_id": "MDQ6VXNlcjMxMTIxNTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/3112159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taion", "html_url": "https://github.com/taion", "followers_url": "https://api.github.com/users/taion/followers", "following_url": "https://api.github.com/users/taion/following{/other_user}", "gists_url": "https://api.github.com/users/taion/gists{/gist_id}", "starred_url": "https://api.github.com/users/taion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taion/subscriptions", "organizations_url": "https://api.github.com/users/taion/orgs", "repos_url": "https://api.github.com/users/taion/repos", "events_url": "https://api.github.com/users/taion/events{/privacy}", "received_events_url": "https://api.github.com/users/taion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "panyx0718", "id": 2887803, "node_id": "MDQ6VXNlcjI4ODc4MDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2887803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/panyx0718", "html_url": "https://github.com/panyx0718", "followers_url": "https://api.github.com/users/panyx0718/followers", "following_url": "https://api.github.com/users/panyx0718/following{/other_user}", "gists_url": "https://api.github.com/users/panyx0718/gists{/gist_id}", "starred_url": "https://api.github.com/users/panyx0718/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/panyx0718/subscriptions", "organizations_url": "https://api.github.com/users/panyx0718/orgs", "repos_url": "https://api.github.com/users/panyx0718/repos", "events_url": "https://api.github.com/users/panyx0718/events{/privacy}", "received_events_url": "https://api.github.com/users/panyx0718/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "panyx0718", "id": 2887803, "node_id": "MDQ6VXNlcjI4ODc4MDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2887803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/panyx0718", "html_url": "https://github.com/panyx0718", "followers_url": "https://api.github.com/users/panyx0718/followers", "following_url": "https://api.github.com/users/panyx0718/following{/other_user}", "gists_url": "https://api.github.com/users/panyx0718/gists{/gist_id}", "starred_url": "https://api.github.com/users/panyx0718/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/panyx0718/subscriptions", "organizations_url": "https://api.github.com/users/panyx0718/orgs", "repos_url": "https://api.github.com/users/panyx0718/repos", "events_url": "https://api.github.com/users/panyx0718/events{/privacy}", "received_events_url": "https://api.github.com/users/panyx0718/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2017-02-11T22:14:05Z", "updated_at": "2017-04-10T21:54:41Z", "closed_at": "2017-04-10T21:54:29Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>Searched issues for \"tfprof\"</p>\n<h3>Environment info</h3>\n<p>gcr.io/tensorflow/tensorflow:1.0.0-rc2-devel-gpu</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\nsess <span class=\"pl-k\">=</span> tf.InteractiveSession()\nv <span class=\"pl-k\">=</span> tf.Variable(<span class=\"pl-c1\">0</span>., <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float32, <span class=\"pl-v\">trainable</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>)\n\ntf.contrib.tfprof.model_analyzer.print_model_analysis(tf.get_default_graph())</pre></div>\n<p>This will show <code>total_parameters</code> of <code>0</code>, despite there being a parameter.</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>N/A</p>\n<h3>Logs or other output that would be helpful</h3>\n<pre><code>name: \"_TFProfRoot\"\nexec_micros: 0\nrequested_bytes: 0\ntotal_exec_micros: 0\ntotal_requested_bytes: 0\ntotal_parameters: 0\nchildren {\n  name: \"Variable\"\n  exec_micros: 0\n  requested_bytes: 0\n  total_exec_micros: 0\n  total_requested_bytes: 0\n  total_parameters: 0\n  float_ops: 0\n  total_float_ops: 0\n}\nfloat_ops: 0\ntotal_float_ops: 0\n</code></pre>\n<p>I believe this is coming from the logic here: <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.0.0-rc2/tensorflow/tools/tfprof/internal/tfprof_show.cc#L37\">https://github.com/tensorflow/tensorflow/blob/v1.0.0-rc2/tensorflow/tools/tfprof/internal/tfprof_show.cc#L37</a> which skips nodes with empty shapes, which includes scalars.</p>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nSearched issues for \"tfprof\"\nEnvironment info\ngcr.io/tensorflow/tensorflow:1.0.0-rc2-devel-gpu\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nimport tensorflow as tf\n\nsess = tf.InteractiveSession()\nv = tf.Variable(0., dtype=tf.float32, trainable=True)\n\ntf.contrib.tfprof.model_analyzer.print_model_analysis(tf.get_default_graph())\nThis will show total_parameters of 0, despite there being a parameter.\nWhat other attempted solutions have you tried?\nN/A\nLogs or other output that would be helpful\nname: \"_TFProfRoot\"\nexec_micros: 0\nrequested_bytes: 0\ntotal_exec_micros: 0\ntotal_requested_bytes: 0\ntotal_parameters: 0\nchildren {\n  name: \"Variable\"\n  exec_micros: 0\n  requested_bytes: 0\n  total_exec_micros: 0\n  total_requested_bytes: 0\n  total_parameters: 0\n  float_ops: 0\n  total_float_ops: 0\n}\nfloat_ops: 0\ntotal_float_ops: 0\n\nI believe this is coming from the logic here: https://github.com/tensorflow/tensorflow/blob/v1.0.0-rc2/tensorflow/tools/tfprof/internal/tfprof_show.cc#L37 which skips nodes with empty shapes, which includes scalars.", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nSearched issues for \"tfprof\"\r\n\r\n### Environment info\r\ngcr.io/tensorflow/tensorflow:1.0.0-rc2-devel-gpu\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n```python\r\nimport tensorflow as tf\r\n\r\nsess = tf.InteractiveSession()\r\nv = tf.Variable(0., dtype=tf.float32, trainable=True)\r\n\r\ntf.contrib.tfprof.model_analyzer.print_model_analysis(tf.get_default_graph())\r\n```\r\n\r\nThis will show `total_parameters` of `0`, despite there being a parameter.\r\n\r\n### What other attempted solutions have you tried?\r\nN/A\r\n\r\n### Logs or other output that would be helpful\r\n```\r\nname: \"_TFProfRoot\"\r\nexec_micros: 0\r\nrequested_bytes: 0\r\ntotal_exec_micros: 0\r\ntotal_requested_bytes: 0\r\ntotal_parameters: 0\r\nchildren {\r\n  name: \"Variable\"\r\n  exec_micros: 0\r\n  requested_bytes: 0\r\n  total_exec_micros: 0\r\n  total_requested_bytes: 0\r\n  total_parameters: 0\r\n  float_ops: 0\r\n  total_float_ops: 0\r\n}\r\nfloat_ops: 0\r\ntotal_float_ops: 0\r\n```\r\n\r\nI believe this is coming from the logic here: https://github.com/tensorflow/tensorflow/blob/v1.0.0-rc2/tensorflow/tools/tfprof/internal/tfprof_show.cc#L37 which skips nodes with empty shapes, which includes scalars."}
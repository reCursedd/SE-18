{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6775", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6775/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6775/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6775/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6775", "id": 199952199, "node_id": "MDU6SXNzdWUxOTk5NTIxOTk=", "number": 6775, "title": "Issue when using binary tensorflow shared library", "user": {"login": "maystroh", "id": 4221393, "node_id": "MDQ6VXNlcjQyMjEzOTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/4221393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maystroh", "html_url": "https://github.com/maystroh", "followers_url": "https://api.github.com/users/maystroh/followers", "following_url": "https://api.github.com/users/maystroh/following{/other_user}", "gists_url": "https://api.github.com/users/maystroh/gists{/gist_id}", "starred_url": "https://api.github.com/users/maystroh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maystroh/subscriptions", "organizations_url": "https://api.github.com/users/maystroh/orgs", "repos_url": "https://api.github.com/users/maystroh/repos", "events_url": "https://api.github.com/users/maystroh/events{/privacy}", "received_events_url": "https://api.github.com/users/maystroh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-10T22:32:29Z", "updated_at": "2017-01-11T05:13:53Z", "closed_at": "2017-01-11T05:13:53Z", "author_association": "NONE", "body_html": "<p>I generated a shared library of tensorflow using the following command:</p>\n<blockquote>\n<p>bazel build -c opt --config=cuda //tensorflow/cc:libtensorflow.so</p>\n</blockquote>\n<p>it was generated without any error and it's located in /usr/local/lib/libtensorflow.so.</p>\n<p>BUT, when I add its dependency to my CMake file:</p>\n<blockquote>\n<p>set(XXXX_DEPENDENCIES ${XXXX_DEPENDENCIES} ${Tensorflow_LIBRARIES} PARENT_SCOPE)</p>\n</blockquote>\n<p>and I try to build my project I got the following:</p>\n<pre><code>:-1: warning: libcudart.so.7.5, needed by /usr/local/lib/libtensorflow.so, not found (try using -rpath or -rpath-link)\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaMemcpyAsync'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaConfigureCall'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaGetDeviceCount'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `__cudaUnregisterFatBinary'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaStreamQuery'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaStreamAddCallback'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaSetupArgument'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaGetDeviceProperties'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaGetErrorString'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `__cudaRegisterFunction'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `__cudaRegisterFatBinary'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaLaunch'\n</code></pre>", "body_text": "I generated a shared library of tensorflow using the following command:\n\nbazel build -c opt --config=cuda //tensorflow/cc:libtensorflow.so\n\nit was generated without any error and it's located in /usr/local/lib/libtensorflow.so.\nBUT, when I add its dependency to my CMake file:\n\nset(XXXX_DEPENDENCIES ${XXXX_DEPENDENCIES} ${Tensorflow_LIBRARIES} PARENT_SCOPE)\n\nand I try to build my project I got the following:\n:-1: warning: libcudart.so.7.5, needed by /usr/local/lib/libtensorflow.so, not found (try using -rpath or -rpath-link)\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaMemcpyAsync'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaConfigureCall'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaGetDeviceCount'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `__cudaUnregisterFatBinary'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaStreamQuery'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaStreamAddCallback'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaSetupArgument'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaGetDeviceProperties'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaGetErrorString'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `__cudaRegisterFunction'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `__cudaRegisterFatBinary'\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaLaunch'", "body": "I generated a shared library of tensorflow using the following command:\r\n\r\n> bazel build -c opt --config=cuda //tensorflow/cc:libtensorflow.so\r\n\r\nit was generated without any error and it's located in /usr/local/lib/libtensorflow.so.\r\n\r\nBUT, when I add its dependency to my CMake file: \r\n\r\n> set(XXXX_DEPENDENCIES ${XXXX_DEPENDENCIES} ${Tensorflow_LIBRARIES} PARENT_SCOPE)\r\n\r\nand I try to build my project I got the following:\r\n```\r\n:-1: warning: libcudart.so.7.5, needed by /usr/local/lib/libtensorflow.so, not found (try using -rpath or -rpath-link)\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaMemcpyAsync'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaConfigureCall'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaGetDeviceCount'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `__cudaUnregisterFatBinary'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaStreamQuery'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaStreamAddCallback'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaSetupArgument'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaGetDeviceProperties'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaGetErrorString'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `__cudaRegisterFunction'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `__cudaRegisterFatBinary'\r\n/usr/local/lib/libtensorflow.so:-1: error: undefined reference to `cudaLaunch'\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21357", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21357/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21357/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21357/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21357", "id": 347295984, "node_id": "MDU6SXNzdWUzNDcyOTU5ODQ=", "number": 21357, "title": "dnn_dropout in DNNLinearCombinedClassifier doesn't  work", "user": {"login": "333caowei", "id": 4569055, "node_id": "MDQ6VXNlcjQ1NjkwNTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4569055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/333caowei", "html_url": "https://github.com/333caowei", "followers_url": "https://api.github.com/users/333caowei/followers", "following_url": "https://api.github.com/users/333caowei/following{/other_user}", "gists_url": "https://api.github.com/users/333caowei/gists{/gist_id}", "starred_url": "https://api.github.com/users/333caowei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/333caowei/subscriptions", "organizations_url": "https://api.github.com/users/333caowei/orgs", "repos_url": "https://api.github.com/users/333caowei/repos", "events_url": "https://api.github.com/users/333caowei/events{/privacy}", "received_events_url": "https://api.github.com/users/333caowei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-08-03T07:53:37Z", "updated_at": "2018-11-21T19:01:00Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>I use DNNLinearCombinedClassifier to train a wide &amp; deep model with dnn_dropout=0.5\u3002</p>\n<pre><code>m = tf.estimator.DNNLinearCombinedClassifier(\n    model_dir=model_dir,\n    linear_feature_columns=crossed_columns,\n    dnn_feature_columns=deep_columns,\n    dnn_dropout=0.5,\n    dnn_hidden_units=[512, 256, 256, 128])\n\nm.train(\n    input_fn=input_fn(train_file_name, num_epochs=None, shuffle=True, \n    is_eval=False,steps=train_steps, \n    hooks=[logger_hook])\n</code></pre>\n<p>Then I evaluate model as follow:</p>\n<pre><code>m = tf.estimator.DNNLinearCombinedClassifier(\n    model_dir=model_dir,\n    linear_feature_columns=crossed_columns,\n    dnn_feature_columns=deep_columns,\n    dnn_dropout=1.0,\n    dnn_hidden_units=[512, 256, 256, 128])\n\nresults = m.evaluate(\n    input_fn=input_fn(test_file_name, num_epochs=1, shuffle=False, is_eval=True),\n    steps=None)\n</code></pre>\n<p>I find no matter I set dnn_dropout=0.1 or dnn_dropout=1.0, the result are same. It seems that this parameter doesn't work.<br>\nMy version is 1.4</p>", "body_text": "I use DNNLinearCombinedClassifier to train a wide & deep model with dnn_dropout=0.5\u3002\nm = tf.estimator.DNNLinearCombinedClassifier(\n    model_dir=model_dir,\n    linear_feature_columns=crossed_columns,\n    dnn_feature_columns=deep_columns,\n    dnn_dropout=0.5,\n    dnn_hidden_units=[512, 256, 256, 128])\n\nm.train(\n    input_fn=input_fn(train_file_name, num_epochs=None, shuffle=True, \n    is_eval=False,steps=train_steps, \n    hooks=[logger_hook])\n\nThen I evaluate model as follow:\nm = tf.estimator.DNNLinearCombinedClassifier(\n    model_dir=model_dir,\n    linear_feature_columns=crossed_columns,\n    dnn_feature_columns=deep_columns,\n    dnn_dropout=1.0,\n    dnn_hidden_units=[512, 256, 256, 128])\n\nresults = m.evaluate(\n    input_fn=input_fn(test_file_name, num_epochs=1, shuffle=False, is_eval=True),\n    steps=None)\n\nI find no matter I set dnn_dropout=0.1 or dnn_dropout=1.0, the result are same. It seems that this parameter doesn't work.\nMy version is 1.4", "body": "I use DNNLinearCombinedClassifier to train a wide & deep model with dnn_dropout=0.5\u3002\r\n```\r\nm = tf.estimator.DNNLinearCombinedClassifier(\r\n    model_dir=model_dir,\r\n    linear_feature_columns=crossed_columns,\r\n    dnn_feature_columns=deep_columns,\r\n    dnn_dropout=0.5,\r\n    dnn_hidden_units=[512, 256, 256, 128])\r\n\r\nm.train(\r\n    input_fn=input_fn(train_file_name, num_epochs=None, shuffle=True, \r\n    is_eval=False,steps=train_steps, \r\n    hooks=[logger_hook])\r\n```\r\n\r\n Then I evaluate model as follow: \r\n```\r\nm = tf.estimator.DNNLinearCombinedClassifier(\r\n    model_dir=model_dir,\r\n    linear_feature_columns=crossed_columns,\r\n    dnn_feature_columns=deep_columns,\r\n    dnn_dropout=1.0,\r\n    dnn_hidden_units=[512, 256, 256, 128])\r\n\r\nresults = m.evaluate(\r\n    input_fn=input_fn(test_file_name, num_epochs=1, shuffle=False, is_eval=True),\r\n    steps=None)\r\n```\r\nI find no matter I set dnn_dropout=0.1 or dnn_dropout=1.0, the result are same. It seems that this parameter doesn't work.\r\nMy version is 1.4"}
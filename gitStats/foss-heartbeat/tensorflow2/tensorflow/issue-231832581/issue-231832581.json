{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10256", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10256/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10256/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10256/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10256", "id": 231832581, "node_id": "MDU6SXNzdWUyMzE4MzI1ODE=", "number": 10256, "title": "string_input_producer possible race while enqueuing", "user": {"login": "Utumno", "id": 1365079, "node_id": "MDQ6VXNlcjEzNjUwNzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1365079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Utumno", "html_url": "https://github.com/Utumno", "followers_url": "https://api.github.com/users/Utumno/followers", "following_url": "https://api.github.com/users/Utumno/following{/other_user}", "gists_url": "https://api.github.com/users/Utumno/gists{/gist_id}", "starred_url": "https://api.github.com/users/Utumno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Utumno/subscriptions", "organizations_url": "https://api.github.com/users/Utumno/orgs", "repos_url": "https://api.github.com/users/Utumno/repos", "events_url": "https://api.github.com/users/Utumno/events{/privacy}", "received_events_url": "https://api.github.com/users/Utumno/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-05-27T22:37:28Z", "updated_at": "2017-09-19T13:07:42Z", "closed_at": "2017-06-02T17:41:41Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Windows-7-6.1.7601-SP1</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: pip</li>\n<li><strong>TensorFlow version (use command below)</strong>: b'unknown' 1.0.1</li>\n</ul>\n<p>Python version <code>'3.5.2 (v3.5.2:4def2a2901a5, Jun 25 2016, 22:18:55) [MSC v.1900 64 bit (AMD64)]' </code></p>\n<h3>Describe the problem</h3>\n<p>When I run the script below in pycharm <em>most of the time</em> (hence race) I get</p>\n<blockquote>\n<p>ERROR:tensorflow:Exception in QueueRunner: Attempted to use a closed Session.</p>\n</blockquote>\n<p>Running directly from cmd (that's the same command pycharm uses):</p>\n<pre><code>C:\\...&gt;C:\\_\\Python35\\python.exe C:/Users/MrD/.PyCharm2017.1/config/scratches/scratch_40.py\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"BestSplits\" device_type: \"CPU\"') f\nor unknown op: BestSplits\n...\nb'C:\\\\Dropbox\\\\eclipse_workspaces\\\\python\\\\nn_nielsen\\\\resources\\\\tf_records_gap\\\\img_2013-01-01-00-02.tfrecords'\nb'C:\\\\Dropbox\\\\eclipse_workspaces\\\\python\\\\nn_nielsen\\\\resources\\\\tf_records_gap\\\\img_2013-01-01-00-01.tfrecords'\nb'C:\\\\Dropbox\\\\eclipse_workspaces\\\\python\\\\nn_nielsen\\\\resources\\\\tf_records_gap\\\\img_2013-01-01-00-00.tfrecords'\nW c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\kernels\\queue_base.cc:294] _0_input_producer: Skipping cancelled enqueue attem\npt with queue not closed\n</code></pre>\n<h3>Source code / logs</h3>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> os\n<span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\ndata_dir <span class=\"pl-k\">=</span> <span class=\"pl-sr\"><span class=\"pl-k\">r</span><span class=\"pl-pds\">\"</span>C:<span class=\"pl-cce\">\\.</span><span class=\"pl-c1\">..</span><span class=\"pl-pds\">\"</span></span>\nfilenames <span class=\"pl-k\">=</span> [os.path.join(data_dir, f) <span class=\"pl-k\">for</span> f <span class=\"pl-k\">in</span> os.listdir(data_dir)]\nqueue <span class=\"pl-k\">=</span> tf.train.string_input_producer(filenames)\n\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    sess.run(tf.global_variables_initializer())\n    tf.train.start_queue_runners(<span class=\"pl-v\">sess</span><span class=\"pl-k\">=</span>sess)\n    <span class=\"pl-k\">for</span> _ <span class=\"pl-k\">in</span> <span class=\"pl-c1\">range</span>(<span class=\"pl-c1\">len</span>(filenames)):\n        <span class=\"pl-c1\">print</span>(queue.dequeue().eval())</pre></div>\n<p>Running this as a test inside pycharm (using PyCharm 2017.1.3, Build #PY-171.4424.42) as in:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-en\">TestFileNameQueue</span>(<span class=\"pl-e\">unittest</span>.<span class=\"pl-e\">TestCase</span>):\n    <span class=\"pl-k\">def</span> <span class=\"pl-en\">test__get_filename_queue</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>):\n        data_dir <span class=\"pl-k\">=</span> <span class=\"pl-sr\"><span class=\"pl-k\">r</span><span class=\"pl-pds\">\"</span>C:<span class=\"pl-cce\">\\.</span><span class=\"pl-c1\">..</span><span class=\"pl-pds\">\"</span></span>\n        filenames <span class=\"pl-k\">=</span> [os.path.join(data_dir, f) <span class=\"pl-k\">for</span> f <span class=\"pl-k\">in</span> os.listdir(data_dir)]\n        queue <span class=\"pl-k\">=</span> tf.train.string_input_producer(filenames)\n        <span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n            sess.run(tf.global_variables_initializer())\n            tf.train.start_queue_runners(<span class=\"pl-v\">sess</span><span class=\"pl-k\">=</span>sess)\n            <span class=\"pl-k\">for</span> _ <span class=\"pl-k\">in</span> <span class=\"pl-c1\">range</span>(<span class=\"pl-c1\">len</span>(filenames)):\n                <span class=\"pl-c1\">print</span>(queue.dequeue().eval())</pre></div>\n<p>I get a more detailed traceback:</p>\n<pre><code>C:\\_\\Python35\\python.exe \"C:\\_\\JetBrains\\PyCharm 2016.3\\helpers\\pydev\\pydevd.py\" --multiproc --save-signatures --qt-support --client 127.0.0.1 --port 4524 --file \"C:\\_\\JetBrains\\PyCharm 2016.3\\helpers\\pycharm\\_jb_unittest_runner.py\" --target tf_test_sanity.TestFileNameQueue.test__get_filename_queue\nTesting started at 11:41 PM ...\nwarning: Debugger speedups using cython not found. Run '\"C:\\_\\Python35\\python.exe\" \"C:\\_\\JetBrains\\PyCharm 2016.3\\helpers\\pydev\\setup_cython.py\" build_ext --inplace' to build.\npydev debugger: process 6148 is connecting\n\nConnected to pydev debugger (build 171.4424.42)\nLaunching unittests with arguments python -m unittest tf_test_sanity.TestFileNameQueue.test__get_filename_queue in C:\\Dropbox\\eclipse_workspaces\\python\\nn_nielsen\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"BestSplits\" device_type: \"CPU\"') for unknown op: BestSplits\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"CountExtremelyRandomStats\" device_type: \"CPU\"') for unknown op: CountExtremelyRandomStats\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"FinishedNodes\" device_type: \"CPU\"') for unknown op: FinishedNodes\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"GrowTree\" device_type: \"CPU\"') for unknown op: GrowTree\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"ReinterpretStringToFloat\" device_type: \"CPU\"') for unknown op: ReinterpretStringToFloat\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"SampleInputs\" device_type: \"CPU\"') for unknown op: SampleInputs\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"ScatterAddNdim\" device_type: \"CPU\"') for unknown op: ScatterAddNdim\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"TopNInsert\" device_type: \"CPU\"') for unknown op: TopNInsert\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"TopNRemove\" device_type: \"CPU\"') for unknown op: TopNRemove\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"TreePredictions\" device_type: \"CPU\"') for unknown op: TreePredictions\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"UpdateFertileSlots\" device_type: \"CPU\"') for unknown op: UpdateFertileSlots\nERROR:tensorflow:Exception in QueueRunner: Attempted to use a closed Session.\n\n\nb'resources/tf_records_no_gap\\\\img_2013-01-01-00-00.tfrecords'\nb'resources/tf_records_no_gap\\\\img_2013-01-01-00-02.tfrecords'\nb'resources/tf_records_no_gap\\\\img_2013-01-01-00-01.tfrecords'\n\n\nRan 1 test in 255.837s\n\nOK\nException in thread Thread-7:\nTraceback (most recent call last):\n  File \"C:\\_\\Python35\\lib\\threading.py\", line 914, in _bootstrap_inner\n    self.run()\n  File \"C:\\_\\Python35\\lib\\threading.py\", line 862, in run\n    self._target(*self._args, **self._kwargs)\n  File \"C:\\_\\Python35\\lib\\site-packages\\tensorflow\\python\\training\\queue_runner_impl.py\", line 234, in _run\n    sess.run(enqueue_op)\n  File \"C:\\_\\Python35\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 767, in run\n    run_metadata_ptr)\n  File \"C:\\_\\Python35\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 903, in _run\n    raise RuntimeError('Attempted to use a closed Session.')\nRuntimeError: Attempted to use a closed Session.\n\n\nProcess finished with exit code 0\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows-7-6.1.7601-SP1\nTensorFlow installed from (source or binary): pip\nTensorFlow version (use command below): b'unknown' 1.0.1\n\nPython version '3.5.2 (v3.5.2:4def2a2901a5, Jun 25 2016, 22:18:55) [MSC v.1900 64 bit (AMD64)]' \nDescribe the problem\nWhen I run the script below in pycharm most of the time (hence race) I get\n\nERROR:tensorflow:Exception in QueueRunner: Attempted to use a closed Session.\n\nRunning directly from cmd (that's the same command pycharm uses):\nC:\\...>C:\\_\\Python35\\python.exe C:/Users/MrD/.PyCharm2017.1/config/scratches/scratch_40.py\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"BestSplits\" device_type: \"CPU\"') f\nor unknown op: BestSplits\n...\nb'C:\\\\Dropbox\\\\eclipse_workspaces\\\\python\\\\nn_nielsen\\\\resources\\\\tf_records_gap\\\\img_2013-01-01-00-02.tfrecords'\nb'C:\\\\Dropbox\\\\eclipse_workspaces\\\\python\\\\nn_nielsen\\\\resources\\\\tf_records_gap\\\\img_2013-01-01-00-01.tfrecords'\nb'C:\\\\Dropbox\\\\eclipse_workspaces\\\\python\\\\nn_nielsen\\\\resources\\\\tf_records_gap\\\\img_2013-01-01-00-00.tfrecords'\nW c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\kernels\\queue_base.cc:294] _0_input_producer: Skipping cancelled enqueue attem\npt with queue not closed\n\nSource code / logs\nimport os\nimport tensorflow as tf\n\ndata_dir = r\"C:\\...\"\nfilenames = [os.path.join(data_dir, f) for f in os.listdir(data_dir)]\nqueue = tf.train.string_input_producer(filenames)\n\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n    tf.train.start_queue_runners(sess=sess)\n    for _ in range(len(filenames)):\n        print(queue.dequeue().eval())\nRunning this as a test inside pycharm (using PyCharm 2017.1.3, Build #PY-171.4424.42) as in:\nclass TestFileNameQueue(unittest.TestCase):\n    def test__get_filename_queue(self):\n        data_dir = r\"C:\\...\"\n        filenames = [os.path.join(data_dir, f) for f in os.listdir(data_dir)]\n        queue = tf.train.string_input_producer(filenames)\n        with tf.Session() as sess:\n            sess.run(tf.global_variables_initializer())\n            tf.train.start_queue_runners(sess=sess)\n            for _ in range(len(filenames)):\n                print(queue.dequeue().eval())\nI get a more detailed traceback:\nC:\\_\\Python35\\python.exe \"C:\\_\\JetBrains\\PyCharm 2016.3\\helpers\\pydev\\pydevd.py\" --multiproc --save-signatures --qt-support --client 127.0.0.1 --port 4524 --file \"C:\\_\\JetBrains\\PyCharm 2016.3\\helpers\\pycharm\\_jb_unittest_runner.py\" --target tf_test_sanity.TestFileNameQueue.test__get_filename_queue\nTesting started at 11:41 PM ...\nwarning: Debugger speedups using cython not found. Run '\"C:\\_\\Python35\\python.exe\" \"C:\\_\\JetBrains\\PyCharm 2016.3\\helpers\\pydev\\setup_cython.py\" build_ext --inplace' to build.\npydev debugger: process 6148 is connecting\n\nConnected to pydev debugger (build 171.4424.42)\nLaunching unittests with arguments python -m unittest tf_test_sanity.TestFileNameQueue.test__get_filename_queue in C:\\Dropbox\\eclipse_workspaces\\python\\nn_nielsen\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"BestSplits\" device_type: \"CPU\"') for unknown op: BestSplits\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"CountExtremelyRandomStats\" device_type: \"CPU\"') for unknown op: CountExtremelyRandomStats\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"FinishedNodes\" device_type: \"CPU\"') for unknown op: FinishedNodes\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"GrowTree\" device_type: \"CPU\"') for unknown op: GrowTree\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"ReinterpretStringToFloat\" device_type: \"CPU\"') for unknown op: ReinterpretStringToFloat\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"SampleInputs\" device_type: \"CPU\"') for unknown op: SampleInputs\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"ScatterAddNdim\" device_type: \"CPU\"') for unknown op: ScatterAddNdim\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"TopNInsert\" device_type: \"CPU\"') for unknown op: TopNInsert\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"TopNRemove\" device_type: \"CPU\"') for unknown op: TopNRemove\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"TreePredictions\" device_type: \"CPU\"') for unknown op: TreePredictions\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"UpdateFertileSlots\" device_type: \"CPU\"') for unknown op: UpdateFertileSlots\nERROR:tensorflow:Exception in QueueRunner: Attempted to use a closed Session.\n\n\nb'resources/tf_records_no_gap\\\\img_2013-01-01-00-00.tfrecords'\nb'resources/tf_records_no_gap\\\\img_2013-01-01-00-02.tfrecords'\nb'resources/tf_records_no_gap\\\\img_2013-01-01-00-01.tfrecords'\n\n\nRan 1 test in 255.837s\n\nOK\nException in thread Thread-7:\nTraceback (most recent call last):\n  File \"C:\\_\\Python35\\lib\\threading.py\", line 914, in _bootstrap_inner\n    self.run()\n  File \"C:\\_\\Python35\\lib\\threading.py\", line 862, in run\n    self._target(*self._args, **self._kwargs)\n  File \"C:\\_\\Python35\\lib\\site-packages\\tensorflow\\python\\training\\queue_runner_impl.py\", line 234, in _run\n    sess.run(enqueue_op)\n  File \"C:\\_\\Python35\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 767, in run\n    run_metadata_ptr)\n  File \"C:\\_\\Python35\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 903, in _run\n    raise RuntimeError('Attempted to use a closed Session.')\nRuntimeError: Attempted to use a closed Session.\n\n\nProcess finished with exit code 0", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows-7-6.1.7601-SP1\r\n- **TensorFlow installed from (source or binary)**: pip\r\n- **TensorFlow version (use command below)**: b'unknown' 1.0.1\r\n\r\nPython version `'3.5.2 (v3.5.2:4def2a2901a5, Jun 25 2016, 22:18:55) [MSC v.1900 64 bit (AMD64)]'\r\n`\r\n\r\n### Describe the problem\r\nWhen I run the script below in pycharm _most of the time_ (hence race) I get \r\n\r\n> ERROR:tensorflow:Exception in QueueRunner: Attempted to use a closed Session.\r\n\r\nRunning directly from cmd (that's the same command pycharm uses):\r\n\r\n```\r\nC:\\...>C:\\_\\Python35\\python.exe C:/Users/MrD/.PyCharm2017.1/config/scratches/scratch_40.py\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"BestSplits\" device_type: \"CPU\"') f\r\nor unknown op: BestSplits\r\n...\r\nb'C:\\\\Dropbox\\\\eclipse_workspaces\\\\python\\\\nn_nielsen\\\\resources\\\\tf_records_gap\\\\img_2013-01-01-00-02.tfrecords'\r\nb'C:\\\\Dropbox\\\\eclipse_workspaces\\\\python\\\\nn_nielsen\\\\resources\\\\tf_records_gap\\\\img_2013-01-01-00-01.tfrecords'\r\nb'C:\\\\Dropbox\\\\eclipse_workspaces\\\\python\\\\nn_nielsen\\\\resources\\\\tf_records_gap\\\\img_2013-01-01-00-00.tfrecords'\r\nW c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\kernels\\queue_base.cc:294] _0_input_producer: Skipping cancelled enqueue attem\r\npt with queue not closed\r\n```\r\n\r\n### Source code / logs\r\n\r\n```python\r\nimport os\r\nimport tensorflow as tf\r\n\r\ndata_dir = r\"C:\\...\"\r\nfilenames = [os.path.join(data_dir, f) for f in os.listdir(data_dir)]\r\nqueue = tf.train.string_input_producer(filenames)\r\n\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    tf.train.start_queue_runners(sess=sess)\r\n    for _ in range(len(filenames)):\r\n        print(queue.dequeue().eval())\r\n```\r\n\r\nRunning this as a test inside pycharm (using PyCharm 2017.1.3, Build #PY-171.4424.42) as in:\r\n\r\n```python\r\n\r\nclass TestFileNameQueue(unittest.TestCase):\r\n    def test__get_filename_queue(self):\r\n        data_dir = r\"C:\\...\"\r\n        filenames = [os.path.join(data_dir, f) for f in os.listdir(data_dir)]\r\n        queue = tf.train.string_input_producer(filenames)\r\n        with tf.Session() as sess:\r\n            sess.run(tf.global_variables_initializer())\r\n            tf.train.start_queue_runners(sess=sess)\r\n            for _ in range(len(filenames)):\r\n                print(queue.dequeue().eval())\r\n```\r\n\r\nI get a more detailed traceback:\r\n\r\n```\r\nC:\\_\\Python35\\python.exe \"C:\\_\\JetBrains\\PyCharm 2016.3\\helpers\\pydev\\pydevd.py\" --multiproc --save-signatures --qt-support --client 127.0.0.1 --port 4524 --file \"C:\\_\\JetBrains\\PyCharm 2016.3\\helpers\\pycharm\\_jb_unittest_runner.py\" --target tf_test_sanity.TestFileNameQueue.test__get_filename_queue\r\nTesting started at 11:41 PM ...\r\nwarning: Debugger speedups using cython not found. Run '\"C:\\_\\Python35\\python.exe\" \"C:\\_\\JetBrains\\PyCharm 2016.3\\helpers\\pydev\\setup_cython.py\" build_ext --inplace' to build.\r\npydev debugger: process 6148 is connecting\r\n\r\nConnected to pydev debugger (build 171.4424.42)\r\nLaunching unittests with arguments python -m unittest tf_test_sanity.TestFileNameQueue.test__get_filename_queue in C:\\Dropbox\\eclipse_workspaces\\python\\nn_nielsen\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"BestSplits\" device_type: \"CPU\"') for unknown op: BestSplits\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"CountExtremelyRandomStats\" device_type: \"CPU\"') for unknown op: CountExtremelyRandomStats\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"FinishedNodes\" device_type: \"CPU\"') for unknown op: FinishedNodes\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"GrowTree\" device_type: \"CPU\"') for unknown op: GrowTree\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"ReinterpretStringToFloat\" device_type: \"CPU\"') for unknown op: ReinterpretStringToFloat\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"SampleInputs\" device_type: \"CPU\"') for unknown op: SampleInputs\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"ScatterAddNdim\" device_type: \"CPU\"') for unknown op: ScatterAddNdim\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"TopNInsert\" device_type: \"CPU\"') for unknown op: TopNInsert\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"TopNRemove\" device_type: \"CPU\"') for unknown op: TopNRemove\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"TreePredictions\" device_type: \"CPU\"') for unknown op: TreePredictions\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\cpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:943] OpKernel ('op: \"UpdateFertileSlots\" device_type: \"CPU\"') for unknown op: UpdateFertileSlots\r\nERROR:tensorflow:Exception in QueueRunner: Attempted to use a closed Session.\r\n\r\n\r\nb'resources/tf_records_no_gap\\\\img_2013-01-01-00-00.tfrecords'\r\nb'resources/tf_records_no_gap\\\\img_2013-01-01-00-02.tfrecords'\r\nb'resources/tf_records_no_gap\\\\img_2013-01-01-00-01.tfrecords'\r\n\r\n\r\nRan 1 test in 255.837s\r\n\r\nOK\r\nException in thread Thread-7:\r\nTraceback (most recent call last):\r\n  File \"C:\\_\\Python35\\lib\\threading.py\", line 914, in _bootstrap_inner\r\n    self.run()\r\n  File \"C:\\_\\Python35\\lib\\threading.py\", line 862, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"C:\\_\\Python35\\lib\\site-packages\\tensorflow\\python\\training\\queue_runner_impl.py\", line 234, in _run\r\n    sess.run(enqueue_op)\r\n  File \"C:\\_\\Python35\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 767, in run\r\n    run_metadata_ptr)\r\n  File \"C:\\_\\Python35\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 903, in _run\r\n    raise RuntimeError('Attempted to use a closed Session.')\r\nRuntimeError: Attempted to use a closed Session.\r\n\r\n\r\nProcess finished with exit code 0\r\n```"}
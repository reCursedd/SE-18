{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/335962500", "html_url": "https://github.com/tensorflow/tensorflow/pull/12922#issuecomment-335962500", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12922", "id": 335962500, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTk2MjUwMA==", "user": {"login": "cloudbank", "id": 2288294, "node_id": "MDQ6VXNlcjIyODgyOTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2288294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloudbank", "html_url": "https://github.com/cloudbank", "followers_url": "https://api.github.com/users/cloudbank/followers", "following_url": "https://api.github.com/users/cloudbank/following{/other_user}", "gists_url": "https://api.github.com/users/cloudbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloudbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloudbank/subscriptions", "organizations_url": "https://api.github.com/users/cloudbank/orgs", "repos_url": "https://api.github.com/users/cloudbank/repos", "events_url": "https://api.github.com/users/cloudbank/events{/privacy}", "received_events_url": "https://api.github.com/users/cloudbank/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-11T22:04:34Z", "updated_at": "2017-10-11T22:04:34Z", "author_association": "NONE", "body_html": "<div class=\"email-fragment\"><a class=\"user-mention\" href=\"https://github.com/andrewharp\">@andrewharp</a>\nI was just thinking to change it to detect compressed or not myself...great\nidea. I will change it over the next few days.\n\nBest regards,\n\nSabine G. Vogel</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Wed, Oct 11, 2017 at 1:16 PM, Andrew Harp ***@***.***&gt; wrote:\n <a class=\"user-mention\" href=\"https://github.com/cloudbank\">@cloudbank</a> &lt;<a href=\"https://github.com/cloudbank\">https://github.com/cloudbank</a>&gt; I'm not sure I understand why\n no compression leads to OOM. Where is the 100mb limit coming from? For a\n properly trained model, the entropy should be high enough that you won't\n get any significant compression gains anyway. For reference this is the\n unzip -v output for inception in tensorflow_demo.apk:\n\n  Length   Method    Size  Cmpr    Date    Time   CRC-32   Name\n --------  ------  ------- ---- ---------- ----- --------  ----\n  3771239  Stored  3771239   0% 1980-01-01 00:00 9225f2cc  assets/conv_actions_frozen.pb\n 29083865  Defl:X 25434578  13% 1980-01-01 00:00 ac57f5c3  assets/ssd_mobilenet_v1_android_export.pb\n   563897  Defl:X   257084  54% 1980-01-01 00:00 7d7f4ff3  assets/stylize_quantized.pb\n 53884595  Stored 53884595   0% 1980-01-01 00:00 6d3b8d15  assets/tensorflow_inception_graph.pb\n\n\n Compression was not deliberately turned off here, zip just decided it\n wasn't worth it for 2/4 graphs. The savings from the other two are very\n minimal overall.\n\n What I think might be ideal would be to have the res/raw path as you have\n it now, and also the assets/ path if the user has not chosen to compressed\n the pb file. Then the user automatically gets the improvement if they set\n things up the default way with assets (e.g. the default classifier demo\n will be improved), and get even more speed you've found if they take the\n time to move things to res/raw.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"256397719\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12922\" href=\"https://github.com/tensorflow/tensorflow/pull/12922#issuecomment-335933716\">#12922 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ACLqphn-f7Ie3UiuI1E-RHsH7bKFtUtJks5srSIKgaJpZM4PRzkg\">https://github.com/notifications/unsubscribe-auth/ACLqphn-f7Ie3UiuI1E-RHsH7bKFtUtJks5srSIKgaJpZM4PRzkg</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "@andrewharp\nI was just thinking to change it to detect compressed or not myself...great\nidea. I will change it over the next few days.\n\nBest regards,\n\nSabine G. Vogel\n\u2026\nOn Wed, Oct 11, 2017 at 1:16 PM, Andrew Harp ***@***.***> wrote:\n @cloudbank <https://github.com/cloudbank> I'm not sure I understand why\n no compression leads to OOM. Where is the 100mb limit coming from? For a\n properly trained model, the entropy should be high enough that you won't\n get any significant compression gains anyway. For reference this is the\n unzip -v output for inception in tensorflow_demo.apk:\n\n  Length   Method    Size  Cmpr    Date    Time   CRC-32   Name\n --------  ------  ------- ---- ---------- ----- --------  ----\n  3771239  Stored  3771239   0% 1980-01-01 00:00 9225f2cc  assets/conv_actions_frozen.pb\n 29083865  Defl:X 25434578  13% 1980-01-01 00:00 ac57f5c3  assets/ssd_mobilenet_v1_android_export.pb\n   563897  Defl:X   257084  54% 1980-01-01 00:00 7d7f4ff3  assets/stylize_quantized.pb\n 53884595  Stored 53884595   0% 1980-01-01 00:00 6d3b8d15  assets/tensorflow_inception_graph.pb\n\n\n Compression was not deliberately turned off here, zip just decided it\n wasn't worth it for 2/4 graphs. The savings from the other two are very\n minimal overall.\n\n What I think might be ideal would be to have the res/raw path as you have\n it now, and also the assets/ path if the user has not chosen to compressed\n the pb file. Then the user automatically gets the improvement if they set\n things up the default way with assets (e.g. the default classifier demo\n will be improved), and get even more speed you've found if they take the\n time to move things to res/raw.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#12922 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ACLqphn-f7Ie3UiuI1E-RHsH7bKFtUtJks5srSIKgaJpZM4PRzkg>\n .", "body": "@andrewharp\nI was just thinking to change it to detect compressed or not myself...great\nidea. I will change it over the next few days.\n\nBest regards,\n\nSabine G. Vogel\n\n\n\n\nOn Wed, Oct 11, 2017 at 1:16 PM, Andrew Harp <notifications@github.com>\nwrote:\n\n> @cloudbank <https://github.com/cloudbank> I'm not sure I understand why\n> no compression leads to OOM. Where is the 100mb limit coming from? For a\n> properly trained model, the entropy should be high enough that you won't\n> get any significant compression gains anyway. For reference this is the\n> unzip -v output for inception in tensorflow_demo.apk:\n>\n>  Length   Method    Size  Cmpr    Date    Time   CRC-32   Name\n> --------  ------  ------- ---- ---------- ----- --------  ----\n>  3771239  Stored  3771239   0% 1980-01-01 00:00 9225f2cc  assets/conv_actions_frozen.pb\n> 29083865  Defl:X 25434578  13% 1980-01-01 00:00 ac57f5c3  assets/ssd_mobilenet_v1_android_export.pb\n>   563897  Defl:X   257084  54% 1980-01-01 00:00 7d7f4ff3  assets/stylize_quantized.pb\n> 53884595  Stored 53884595   0% 1980-01-01 00:00 6d3b8d15  assets/tensorflow_inception_graph.pb\n>\n>\n> Compression was not deliberately turned off here, zip just decided it\n> wasn't worth it for 2/4 graphs. The savings from the other two are very\n> minimal overall.\n>\n> What I think might be ideal would be to have the res/raw path as you have\n> it now, and also the assets/ path if the user has not chosen to compressed\n> the pb file. Then the user automatically gets the improvement if they set\n> things up the default way with assets (e.g. the default classifier demo\n> will be improved), and get even more speed you've found if they take the\n> time to move things to res/raw.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/pull/12922#issuecomment-335933716>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ACLqphn-f7Ie3UiuI1E-RHsH7bKFtUtJks5srSIKgaJpZM4PRzkg>\n> .\n>\n"}
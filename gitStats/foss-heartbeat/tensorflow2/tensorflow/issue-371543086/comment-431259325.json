{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/431259325", "html_url": "https://github.com/tensorflow/tensorflow/issues/23075#issuecomment-431259325", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23075", "id": 431259325, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTI1OTMyNQ==", "user": {"login": "chenloveheimei", "id": 30176962, "node_id": "MDQ6VXNlcjMwMTc2OTYy", "avatar_url": "https://avatars2.githubusercontent.com/u/30176962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenloveheimei", "html_url": "https://github.com/chenloveheimei", "followers_url": "https://api.github.com/users/chenloveheimei/followers", "following_url": "https://api.github.com/users/chenloveheimei/following{/other_user}", "gists_url": "https://api.github.com/users/chenloveheimei/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenloveheimei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenloveheimei/subscriptions", "organizations_url": "https://api.github.com/users/chenloveheimei/orgs", "repos_url": "https://api.github.com/users/chenloveheimei/repos", "events_url": "https://api.github.com/users/chenloveheimei/events{/privacy}", "received_events_url": "https://api.github.com/users/chenloveheimei/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-19T06:32:50Z", "updated_at": "2018-10-19T10:59:38Z", "author_association": "NONE", "body_html": "<p>PB FIle:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/2494701/graph.pb.zip\">graph.pb.zip</a></p>\n<p>the pic of model:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/30176962/47214098-84880d80-d3cf-11e8-83ae-006838e8d3b0.jpeg\"><img src=\"https://user-images.githubusercontent.com/30176962/47214098-84880d80-d3cf-11e8-83ae-006838e8d3b0.jpeg\" alt=\"model\" style=\"max-width:100%;\"></a></p>\n<p>command:<br>\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph <br>\n--in_graph=model.pb <br>\n--out_graph=graph_opt1.pb <br>\n--inputs='image' <br>\n--outputs='Convolutional_Pose_Machine/stage_5_out' <br>\n--transforms='strip_unused_nodes(type=float, shape=\"256*64\") remove_nodes(op=Identity, op=CheckNumerics) fold_constants(ignore_errors=true) fold_batch_norms fold_old_batch_norms'</p>\n<p>the log of Error:<br>\n2018-10-19 17:27:50.254984: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying strip_unused_nodes<br>\n2018-10-19 17:27:50.286576: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying remove_nodes<br>\n2018-10-19 17:27:50.335090: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying fold_constants<br>\n2018-10-19 17:27:50.359307: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_up_pointwise/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](Conv2d_0/Relu6, MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_up_pointwise/weights)<br>\n2018-10-19 17:27:50.359760: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_pointwise/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_depthwise/Relu, MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_pointwise/weights)<br>\n2018-10-19 17:27:50.360079: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_2/MobilenetV2_part_0_2_up_pointwise/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_pointwise/BatchNorm/Relu6, MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_2/MobilenetV2_part_0_2_up_pointwise/weights)<br>\n.....<br>\n2018-10-19 17:27:50.397343: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying fold_batch_norms<br>\n2018-10-19 17:27:50.406738: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying fold_old_batch_norms</p>\n<p>Question:<br>\nwhether the comand I wrote is right or not?<br>\nBut it can generate new pb file.the size of origin file is 2.7M,the new one is 2.4M.</p>", "body_text": "PB FIle:\ngraph.pb.zip\nthe pic of model:\n\ncommand:\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \n--in_graph=model.pb \n--out_graph=graph_opt1.pb \n--inputs='image' \n--outputs='Convolutional_Pose_Machine/stage_5_out' \n--transforms='strip_unused_nodes(type=float, shape=\"256*64\") remove_nodes(op=Identity, op=CheckNumerics) fold_constants(ignore_errors=true) fold_batch_norms fold_old_batch_norms'\nthe log of Error:\n2018-10-19 17:27:50.254984: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying strip_unused_nodes\n2018-10-19 17:27:50.286576: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying remove_nodes\n2018-10-19 17:27:50.335090: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying fold_constants\n2018-10-19 17:27:50.359307: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_up_pointwise/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](Conv2d_0/Relu6, MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_up_pointwise/weights)\n2018-10-19 17:27:50.359760: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_pointwise/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_depthwise/Relu, MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_pointwise/weights)\n2018-10-19 17:27:50.360079: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_2/MobilenetV2_part_0_2_up_pointwise/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_pointwise/BatchNorm/Relu6, MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_2/MobilenetV2_part_0_2_up_pointwise/weights)\n.....\n2018-10-19 17:27:50.397343: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying fold_batch_norms\n2018-10-19 17:27:50.406738: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying fold_old_batch_norms\nQuestion:\nwhether the comand I wrote is right or not?\nBut it can generate new pb file.the size of origin file is 2.7M,the new one is 2.4M.", "body": "PB FIle:\r\n[graph.pb.zip](https://github.com/tensorflow/tensorflow/files/2494701/graph.pb.zip)\r\n\r\nthe pic of model:\r\n![model](https://user-images.githubusercontent.com/30176962/47214098-84880d80-d3cf-11e8-83ae-006838e8d3b0.jpeg)\r\n\r\ncommand:\r\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\r\n--in_graph=model.pb \\\r\n--out_graph=graph_opt1.pb \\\r\n--inputs='image' \\\r\n--outputs='Convolutional_Pose_Machine/stage_5_out' \\\r\n--transforms='strip_unused_nodes(type=float, shape=\"256*64\") remove_nodes(op=Identity, op=CheckNumerics) fold_constants(ignore_errors=true) fold_batch_norms fold_old_batch_norms'\r\n\r\nthe log of Error:\r\n2018-10-19 17:27:50.254984: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying strip_unused_nodes\r\n2018-10-19 17:27:50.286576: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying remove_nodes\r\n2018-10-19 17:27:50.335090: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying fold_constants\r\n2018-10-19 17:27:50.359307: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_up_pointwise/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](Conv2d_0/Relu6, MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_up_pointwise/weights)\r\n2018-10-19 17:27:50.359760: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_pointwise/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_depthwise/Relu, MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_pointwise/weights)\r\n2018-10-19 17:27:50.360079: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_2/MobilenetV2_part_0_2_up_pointwise/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_1/MobilenetV2_part_0_1_pointwise/BatchNorm/Relu6, MobilenetV2/MobilenetV2_part_0/inverted_bottleneck_MobilenetV2_part_0_2/MobilenetV2_part_0_2_up_pointwise/weights)\r\n.....\r\n2018-10-19 17:27:50.397343: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying fold_batch_norms\r\n2018-10-19 17:27:50.406738: I tensorflow/tools/graph_transforms/transform_graph.cc:317] Applying fold_old_batch_norms\r\n\r\nQuestion:\r\nwhether the comand I wrote is right or not?\r\nBut it can generate new pb file.the size of origin file is 2.7M,the new one is 2.4M."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/205281995", "pull_request_review_id": 140523680, "id": 205281995, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNTI4MTk5NQ==", "diff_hunk": "@@ -52,7 +52,8 @@ load(\n     \"//third_party/mkl:build_defs.bzl\",\n     \"if_mkl\",\n )\n-load(\"@local_config_cuda//cuda:build_defs.bzl\", \"if_cuda\")\n+load(\"@local_config_cuda//cuda:build_defs.bzl\", \"if_cuda\", \"if_cuda_is_configured\")\n+load(\"@local_config_rocm//rocm:build_defs.bzl\", \"if_rocm\", \"if_rocm_is_configured\")", "path": "tensorflow/core/kernels/BUILD", "position": null, "original_position": 6, "commit_id": "69d3b8faf41791834301a74a05e288964940427d", "original_commit_id": "4885f5e61c204ddc79d2a48cfe91c6c4b7688b18", "user": {"login": "Artem-B", "id": 526795, "node_id": "MDQ6VXNlcjUyNjc5NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/526795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Artem-B", "html_url": "https://github.com/Artem-B", "followers_url": "https://api.github.com/users/Artem-B/followers", "following_url": "https://api.github.com/users/Artem-B/following{/other_user}", "gists_url": "https://api.github.com/users/Artem-B/gists{/gist_id}", "starred_url": "https://api.github.com/users/Artem-B/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Artem-B/subscriptions", "organizations_url": "https://api.github.com/users/Artem-B/orgs", "repos_url": "https://api.github.com/users/Artem-B/repos", "events_url": "https://api.github.com/users/Artem-B/events{/privacy}", "received_events_url": "https://api.github.com/users/Artem-B/received_events", "type": "User", "site_admin": false}, "body": "That's the idea. User tells **what** needs to be built, bazel and whoever maintains the build files figure out **how**.\r\nAs for the tests, it should follow roughly the same path.\r\nWe currently have rules that automatically generate CPU and GPU test variants already (i.e we generate test_foo for CPU and test_foo_gpu for CUDA), so, in a way, tests should mostly do the right thing already. Running correct set of tests will be similar to what happens now, modulo new suffixes on test targets.", "created_at": "2018-07-25T22:31:22Z", "updated_at": "2018-09-06T00:48:23Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/20277#discussion_r205281995", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/20277", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/205281995"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/20277#discussion_r205281995"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/20277"}}, "body_html": "<p>That's the idea. User tells <strong>what</strong> needs to be built, bazel and whoever maintains the build files figure out <strong>how</strong>.<br>\nAs for the tests, it should follow roughly the same path.<br>\nWe currently have rules that automatically generate CPU and GPU test variants already (i.e we generate test_foo for CPU and test_foo_gpu for CUDA), so, in a way, tests should mostly do the right thing already. Running correct set of tests will be similar to what happens now, modulo new suffixes on test targets.</p>", "body_text": "That's the idea. User tells what needs to be built, bazel and whoever maintains the build files figure out how.\nAs for the tests, it should follow roughly the same path.\nWe currently have rules that automatically generate CPU and GPU test variants already (i.e we generate test_foo for CPU and test_foo_gpu for CUDA), so, in a way, tests should mostly do the right thing already. Running correct set of tests will be similar to what happens now, modulo new suffixes on test targets.", "in_reply_to_id": 202820055}
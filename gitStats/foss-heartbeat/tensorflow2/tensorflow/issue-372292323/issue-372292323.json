{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23146", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23146/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23146/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23146/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23146", "id": 372292323, "node_id": "MDU6SXNzdWUzNzIyOTIzMjM=", "number": 23146, "title": "The same code which is fine on Android 6.0.1, but an error(\"The model is not a valid Flatbuffer file\") is reported on Android 8.0.0", "user": {"login": "TXQGIT", "id": 40796349, "node_id": "MDQ6VXNlcjQwNzk2MzQ5", "avatar_url": "https://avatars0.githubusercontent.com/u/40796349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TXQGIT", "html_url": "https://github.com/TXQGIT", "followers_url": "https://api.github.com/users/TXQGIT/followers", "following_url": "https://api.github.com/users/TXQGIT/following{/other_user}", "gists_url": "https://api.github.com/users/TXQGIT/gists{/gist_id}", "starred_url": "https://api.github.com/users/TXQGIT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TXQGIT/subscriptions", "organizations_url": "https://api.github.com/users/TXQGIT/orgs", "repos_url": "https://api.github.com/users/TXQGIT/repos", "events_url": "https://api.github.com/users/TXQGIT/events{/privacy}", "received_events_url": "https://api.github.com/users/TXQGIT/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-10-21T08:39:22Z", "updated_at": "2018-11-22T18:59:48Z", "closed_at": null, "author_association": "NONE", "body_html": "<p><strong>OS Platform and Distribution</strong><br>\nWin 10<br>\nAndroid Studio 3.0.1<br>\nsdk version 26<br>\n<strong>TensorFlow installed from</strong><br>\nN/A<br>\n<strong>TensorFlow version</strong><br>\nN/A<br>\n<strong>Bazel version</strong><br>\nN/A<br>\n<strong>CUDA/cuDNN version</strong><br>\nN/A<br>\n<strong>GPU model and memory</strong><br>\nN/A<br>\n<strong>Exact command to reproduce</strong><br>\nN/A<br>\n<strong>Mobile devic</strong><br>\nHuawei Honor 8 &amp; Gome K1</p>\n<p><strong>Describe the problem</strong><br>\nI am using the TFLite demo for Android. Since there are two ways to initialize an Interpreter with a model file:<br>\nThe Interpreter can be initialized with a model file using the constructor:<br>\n<code>public Interpreter(@NotNull File modelFile);</code><br>\nor with a MappedByteBuffer:<br>\n<code>public Interpreter(@NotNull MappedByteBuffer mappedByteBuffer);</code><br>\nThe official TFLite demo uses the second way(MappedByteBuffer) to initialize an Interpreter. I change it to the first way(using File) and The modified code is as follows(the constructor of ImageClassifier):</p>\n<pre><code>//tflite = new Interpreter(loadModelFile(activity));  //official code. The second way to initialize.\nFile modelFile = new File(\"/storage/emulated/0/DCIM/\" + getModelPath());   //the first way\ntflite = new Interpreter(modelFile);            //the first way\n</code></pre>\n<p>When I run it on Gome K1 mobile phone(Android 6.0.1), it works fine. However, when I run it on Huawei Honor 8(Android 8.0.0), an error occurred:<br>\n<code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.tflite_pure/com.example.tflite_pure.MainActivity}: java.lang.IllegalArgumentException: Contents of /storage/emulated/0/DCIM/mobilenet_v1_1.0_224.tflite does not encode a valid TensorFlowLite model: Could not open '/storage/emulated/0/DCIM/mobilenet_v1_1.0_224.tflite'.The model is not a valid Flatbuffer file</code></p>\n<p>I am not sure if this problem is caused by different versions of Android(6.0.1 vs 8.0.0). So any help would grateful. Thanks.</p>", "body_text": "OS Platform and Distribution\nWin 10\nAndroid Studio 3.0.1\nsdk version 26\nTensorFlow installed from\nN/A\nTensorFlow version\nN/A\nBazel version\nN/A\nCUDA/cuDNN version\nN/A\nGPU model and memory\nN/A\nExact command to reproduce\nN/A\nMobile devic\nHuawei Honor 8 & Gome K1\nDescribe the problem\nI am using the TFLite demo for Android. Since there are two ways to initialize an Interpreter with a model file:\nThe Interpreter can be initialized with a model file using the constructor:\npublic Interpreter(@NotNull File modelFile);\nor with a MappedByteBuffer:\npublic Interpreter(@NotNull MappedByteBuffer mappedByteBuffer);\nThe official TFLite demo uses the second way(MappedByteBuffer) to initialize an Interpreter. I change it to the first way(using File) and The modified code is as follows(the constructor of ImageClassifier):\n//tflite = new Interpreter(loadModelFile(activity));  //official code. The second way to initialize.\nFile modelFile = new File(\"/storage/emulated/0/DCIM/\" + getModelPath());   //the first way\ntflite = new Interpreter(modelFile);            //the first way\n\nWhen I run it on Gome K1 mobile phone(Android 6.0.1), it works fine. However, when I run it on Huawei Honor 8(Android 8.0.0), an error occurred:\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.tflite_pure/com.example.tflite_pure.MainActivity}: java.lang.IllegalArgumentException: Contents of /storage/emulated/0/DCIM/mobilenet_v1_1.0_224.tflite does not encode a valid TensorFlowLite model: Could not open '/storage/emulated/0/DCIM/mobilenet_v1_1.0_224.tflite'.The model is not a valid Flatbuffer file\nI am not sure if this problem is caused by different versions of Android(6.0.1 vs 8.0.0). So any help would grateful. Thanks.", "body": "**OS Platform and Distribution**\r\nWin 10\r\nAndroid Studio 3.0.1\r\nsdk version 26\r\n**TensorFlow installed from**\r\nN/A\r\n**TensorFlow version**\r\nN/A\r\n**Bazel version**\r\nN/A\r\n**CUDA/cuDNN version**\r\nN/A\r\n**GPU model and memory**\r\nN/A\r\n**Exact command to reproduce**\r\nN/A\r\n**Mobile devic**\r\nHuawei Honor 8 & Gome K1\r\n\r\n**Describe the problem**\r\nI am using the TFLite demo for Android. Since there are two ways to initialize an Interpreter with a model file:\r\nThe Interpreter can be initialized with a model file using the constructor:\r\n`public Interpreter(@NotNull File modelFile);`\r\nor with a MappedByteBuffer:\r\n`public Interpreter(@NotNull MappedByteBuffer mappedByteBuffer);`\r\nThe official TFLite demo uses the second way(MappedByteBuffer) to initialize an Interpreter. I change it to the first way(using File) and The modified code is as follows(the constructor of ImageClassifier):\r\n```\r\n//tflite = new Interpreter(loadModelFile(activity));  //official code. The second way to initialize.\r\nFile modelFile = new File(\"/storage/emulated/0/DCIM/\" + getModelPath());   //the first way\r\ntflite = new Interpreter(modelFile);            //the first way\r\n```\r\nWhen I run it on Gome K1 mobile phone(Android 6.0.1), it works fine. However, when I run it on Huawei Honor 8(Android 8.0.0), an error occurred:\r\n`java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.tflite_pure/com.example.tflite_pure.MainActivity}: java.lang.IllegalArgumentException: Contents of /storage/emulated/0/DCIM/mobilenet_v1_1.0_224.tflite does not encode a valid TensorFlowLite model: Could not open '/storage/emulated/0/DCIM/mobilenet_v1_1.0_224.tflite'.The model is not a valid Flatbuffer file`\r\n\r\nI am not sure if this problem is caused by different versions of Android(6.0.1 vs 8.0.0). So any help would grateful. Thanks.\r\n"}
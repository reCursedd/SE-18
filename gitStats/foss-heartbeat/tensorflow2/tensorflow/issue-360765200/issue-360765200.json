{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22310", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22310/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22310/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22310/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22310", "id": 360765200, "node_id": "MDU6SXNzdWUzNjA3NjUyMDA=", "number": 22310, "title": "Tflite label_image resize bug", "user": {"login": "tataganesh95", "id": 39157533, "node_id": "MDQ6VXNlcjM5MTU3NTMz", "avatar_url": "https://avatars0.githubusercontent.com/u/39157533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tataganesh95", "html_url": "https://github.com/tataganesh95", "followers_url": "https://api.github.com/users/tataganesh95/followers", "following_url": "https://api.github.com/users/tataganesh95/following{/other_user}", "gists_url": "https://api.github.com/users/tataganesh95/gists{/gist_id}", "starred_url": "https://api.github.com/users/tataganesh95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tataganesh95/subscriptions", "organizations_url": "https://api.github.com/users/tataganesh95/orgs", "repos_url": "https://api.github.com/users/tataganesh95/repos", "events_url": "https://api.github.com/users/tataganesh95/events{/privacy}", "received_events_url": "https://api.github.com/users/tataganesh95/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-09-17T08:23:40Z", "updated_at": "2018-09-24T04:50:50Z", "closed_at": "2018-09-24T04:50:50Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nLinux</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>:<br>\nNA</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nSource</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.10</li>\n<li><strong>Python version</strong>:<br>\n3.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.15</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\nNA</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nNA</li>\n<li><strong>GPU model and memory</strong>:<br>\nNA</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nNA</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>In the <code>label_image.cc</code> example of TFlite, a resize function present in <code>bitmap_helpers_impl.h</code> is being called in line <a href=\"https://github.com/tensorflow/tensorflow/blob/4dcfddc5d12018a5a0fdca652b9221ed95e9eb23/tensorflow/contrib/lite/examples/label_image/label_image.cc#L171\">171</a> -<br>\n<code>   resize&lt;float&gt;(interpreter-&gt;typed_tensor&lt;float&gt;(input), in.data(),</code></p>\n<p>In the implementation of the function in <code>bitmap_helpers_impl.h</code>, the following <a href=\"https://github.com/tensorflow/tensorflow/blob/4dcfddc5d12018a5a0fdca652b9221ed95e9eb23/tensorflow/contrib/lite/examples/label_image/bitmap_helpers_impl.h#L90\">line</a></p>\n<pre><code>  auto output_number_of_pixels =\n      wanted_height * wanted_height * wanted_channels;\n</code></pre>\n<p>assumes that for the input image, the height and width must be the same. And this works for the mobilenet example since the input size is 224 x 224. But, this would cause issues for any network where the expected input size does not have the same width and height. It should instead be -</p>\n<pre><code>   auto output_number_of_pixels =\n      wanted_width * wanted_height * wanted_channels;\n</code></pre>\n<h3>Source code / logs</h3>\n<p>NA</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nLinux\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nNA\nTensorFlow installed from (source or binary):\nSource\nTensorFlow version (use command below):\n1.10\nPython version:\n3.5\nBazel version (if compiling from source):\n0.15\nGCC/Compiler version (if compiling from source):\nNA\nCUDA/cuDNN version:\nNA\nGPU model and memory:\nNA\nExact command to reproduce:\nNA\n\nDescribe the problem\nIn the label_image.cc example of TFlite, a resize function present in bitmap_helpers_impl.h is being called in line 171 -\n   resize<float>(interpreter->typed_tensor<float>(input), in.data(),\nIn the implementation of the function in bitmap_helpers_impl.h, the following line\n  auto output_number_of_pixels =\n      wanted_height * wanted_height * wanted_channels;\n\nassumes that for the input image, the height and width must be the same. And this works for the mobilenet example since the input size is 224 x 224. But, this would cause issues for any network where the expected input size does not have the same width and height. It should instead be -\n   auto output_number_of_pixels =\n      wanted_width * wanted_height * wanted_channels;\n\nSource code / logs\nNA", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nLinux\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\nNA\r\n- **TensorFlow installed from (source or binary)**:\r\nSource\r\n- **TensorFlow version (use command below)**:\r\n1.10\r\n- **Python version**:\r\n3.5\r\n- **Bazel version (if compiling from source)**:\r\n0.15\r\n- **GCC/Compiler version (if compiling from source)**:\r\nNA\r\n- **CUDA/cuDNN version**:\r\nNA\r\n- **GPU model and memory**:\r\nNA\r\n- **Exact command to reproduce**:\r\nNA\r\n\r\n### Describe the problem\r\nIn the `label_image.cc` example of TFlite, a resize function present in `bitmap_helpers_impl.h` is being called in line [171](https://github.com/tensorflow/tensorflow/blob/4dcfddc5d12018a5a0fdca652b9221ed95e9eb23/tensorflow/contrib/lite/examples/label_image/label_image.cc#L171) - \r\n`   resize<float>(interpreter->typed_tensor<float>(input), in.data(),`\r\n\r\nIn the implementation of the function in `bitmap_helpers_impl.h`, the following [line](https://github.com/tensorflow/tensorflow/blob/4dcfddc5d12018a5a0fdca652b9221ed95e9eb23/tensorflow/contrib/lite/examples/label_image/bitmap_helpers_impl.h#L90) \r\n```\r\n  auto output_number_of_pixels =\r\n      wanted_height * wanted_height * wanted_channels;\r\n```\r\nassumes that for the input image, the height and width must be the same. And this works for the mobilenet example since the input size is 224 x 224. But, this would cause issues for any network where the expected input size does not have the same width and height. It should instead be - \r\n```\r\n   auto output_number_of_pixels =\r\n      wanted_width * wanted_height * wanted_channels;\r\n```\r\n\r\n### Source code / logs\r\nNA\r\n"}
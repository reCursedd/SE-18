{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/347278066", "html_url": "https://github.com/tensorflow/tensorflow/issues/14913#issuecomment-347278066", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14913", "id": 347278066, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzI3ODA2Ng==", "user": {"login": "yilei", "id": 581947, "node_id": "MDQ6VXNlcjU4MTk0Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/581947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yilei", "html_url": "https://github.com/yilei", "followers_url": "https://api.github.com/users/yilei/followers", "following_url": "https://api.github.com/users/yilei/following{/other_user}", "gists_url": "https://api.github.com/users/yilei/gists{/gist_id}", "starred_url": "https://api.github.com/users/yilei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yilei/subscriptions", "organizations_url": "https://api.github.com/users/yilei/orgs", "repos_url": "https://api.github.com/users/yilei/repos", "events_url": "https://api.github.com/users/yilei/events{/privacy}", "received_events_url": "https://api.github.com/users/yilei/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-27T18:28:40Z", "updated_at": "2017-11-27T18:28:40Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Looks like <code>tf.app.run</code> needs to continue ignoring unknown flags (i.e. unfix <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"239903210\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/11195\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/11195/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/11195\">#11195</a>)</p>\n<p>However, does the example code work before the change? <code>tf.app.run</code> will call <code>main</code> with positional arguments, but here the <code>main</code> function has no arguments and it's called manually.</p>\n<p>Did you mean the following?</p>\n<pre><code>def main(argv):\n  parser = argparse.ArgumentParser(description='argsparse test for tensorflow nightly build')\n  parser.add_argument('--myarg', type=str, help='fizz or buzz', default='fizz')\n  args = parser.parse_args()\n\nif __name__ == '__main__':\n  tf.app.run()\n</code></pre>\n<p>I'm asking since I'm wondering if the positional arguments passed to <code>main</code> by <code>tf.app.run</code> is important or not. If it's not important, we can simply swallow the <code>absl.flags</code> parsing exception in <code>tf.app.run</code> and pass <code>sys.argv[:1]</code> to <code>main</code>. Otherwise we need to add an extra API to <code>absl.flags</code>.</p>", "body_text": "Looks like tf.app.run needs to continue ignoring unknown flags (i.e. unfix #11195)\nHowever, does the example code work before the change? tf.app.run will call main with positional arguments, but here the main function has no arguments and it's called manually.\nDid you mean the following?\ndef main(argv):\n  parser = argparse.ArgumentParser(description='argsparse test for tensorflow nightly build')\n  parser.add_argument('--myarg', type=str, help='fizz or buzz', default='fizz')\n  args = parser.parse_args()\n\nif __name__ == '__main__':\n  tf.app.run()\n\nI'm asking since I'm wondering if the positional arguments passed to main by tf.app.run is important or not. If it's not important, we can simply swallow the absl.flags parsing exception in tf.app.run and pass sys.argv[:1] to main. Otherwise we need to add an extra API to absl.flags.", "body": "Looks like `tf.app.run` needs to continue ignoring unknown flags (i.e. unfix #11195)\r\n\r\nHowever, does the example code work before the change? `tf.app.run` will call `main` with positional arguments, but here the `main` function has no arguments and it's called manually.\r\n\r\nDid you mean the following?\r\n\r\n    def main(argv):\r\n      parser = argparse.ArgumentParser(description='argsparse test for tensorflow nightly build')\r\n      parser.add_argument('--myarg', type=str, help='fizz or buzz', default='fizz')\r\n      args = parser.parse_args()\r\n\r\n    if __name__ == '__main__':\r\n      tf.app.run()\r\n\r\nI'm asking since I'm wondering if the positional arguments passed to `main` by `tf.app.run` is important or not. If it's not important, we can simply swallow the `absl.flags` parsing exception in `tf.app.run` and pass `sys.argv[:1]` to `main`. Otherwise we need to add an extra API to `absl.flags`."}
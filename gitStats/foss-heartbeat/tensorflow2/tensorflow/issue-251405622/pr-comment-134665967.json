{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/134665967", "pull_request_review_id": 57982578, "id": 134665967, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNDY2NTk2Nw==", "diff_hunk": "@@ -295,6 +295,7 @@ cc_library(\n         \"@llvm//:object\",\n         \"@llvm//:support\",\n         \"@llvm//:target\",\n+        \"@llvm//:polly\",", "path": "tensorflow/compiler/xla/service/cpu/BUILD", "position": null, "original_position": 4, "commit_id": "223d9af4d7df986f4143be66271d421881c0ffdb", "original_commit_id": "4e7d2bab49f56d7298f88387df6494e0002b4b93", "user": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "body": "To add a conditional take a look at how if_mkl works as an example.  Some links to help you get started:\r\n\r\n - Definition for if_mkl: https://github.com/tensorflow/tensorflow/blob/master/third_party/mkl/build_defs.bzl\r\n - The corresponding config_setting: https://github.com/tensorflow/tensorflow/blob/master/third_party/mkl/BUILD\r\n - Documentation for config_setting: https://docs.bazel.build/versions/master/be/general.html#config_setting\r\n\r\nHowever, before you go ahead and do a bunch of work, I think we should take a step back and reach agreement on whether Polly constitutes a supported configuration.  By \"supported configuration\" I mean that it is linked into TensorFlow by default and breaking a Polly test case is sufficient cause to revert a patch or to hold a push.  My perspective on this is that it isn't fair to ask Google and other TF developers to pay the cost of supporting Polly till we've shown a clear benefit (better runtime performance, basically) from Polly; and we should start off by designating the TF-with-Polly build as \"experimental\" -- it won't be built by default and the onus of keeping it working will fall on you.  Once we are able to demonstrate value from Polly, and have community support to address breakages and regressions in Polly, we can discuss enabling it by default as a supported configuration.", "created_at": "2017-08-23T06:23:15Z", "updated_at": "2018-01-29T10:53:40Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/12408#discussion_r134665967", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12408", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/134665967"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/12408#discussion_r134665967"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12408"}}, "body_html": "<p>To add a conditional take a look at how if_mkl works as an example.  Some links to help you get started:</p>\n<ul>\n<li>Definition for if_mkl: <a href=\"https://github.com/tensorflow/tensorflow/blob/master/third_party/mkl/build_defs.bzl\">https://github.com/tensorflow/tensorflow/blob/master/third_party/mkl/build_defs.bzl</a></li>\n<li>The corresponding config_setting: <a href=\"https://github.com/tensorflow/tensorflow/blob/master/third_party/mkl/BUILD\">https://github.com/tensorflow/tensorflow/blob/master/third_party/mkl/BUILD</a></li>\n<li>Documentation for config_setting: <a href=\"https://docs.bazel.build/versions/master/be/general.html#config_setting\" rel=\"nofollow\">https://docs.bazel.build/versions/master/be/general.html#config_setting</a></li>\n</ul>\n<p>However, before you go ahead and do a bunch of work, I think we should take a step back and reach agreement on whether Polly constitutes a supported configuration.  By \"supported configuration\" I mean that it is linked into TensorFlow by default and breaking a Polly test case is sufficient cause to revert a patch or to hold a push.  My perspective on this is that it isn't fair to ask Google and other TF developers to pay the cost of supporting Polly till we've shown a clear benefit (better runtime performance, basically) from Polly; and we should start off by designating the TF-with-Polly build as \"experimental\" -- it won't be built by default and the onus of keeping it working will fall on you.  Once we are able to demonstrate value from Polly, and have community support to address breakages and regressions in Polly, we can discuss enabling it by default as a supported configuration.</p>", "body_text": "To add a conditional take a look at how if_mkl works as an example.  Some links to help you get started:\n\nDefinition for if_mkl: https://github.com/tensorflow/tensorflow/blob/master/third_party/mkl/build_defs.bzl\nThe corresponding config_setting: https://github.com/tensorflow/tensorflow/blob/master/third_party/mkl/BUILD\nDocumentation for config_setting: https://docs.bazel.build/versions/master/be/general.html#config_setting\n\nHowever, before you go ahead and do a bunch of work, I think we should take a step back and reach agreement on whether Polly constitutes a supported configuration.  By \"supported configuration\" I mean that it is linked into TensorFlow by default and breaking a Polly test case is sufficient cause to revert a patch or to hold a push.  My perspective on this is that it isn't fair to ask Google and other TF developers to pay the cost of supporting Polly till we've shown a clear benefit (better runtime performance, basically) from Polly; and we should start off by designating the TF-with-Polly build as \"experimental\" -- it won't be built by default and the onus of keeping it working will fall on you.  Once we are able to demonstrate value from Polly, and have community support to address breakages and regressions in Polly, we can discuss enabling it by default as a supported configuration.", "in_reply_to_id": 134572245}
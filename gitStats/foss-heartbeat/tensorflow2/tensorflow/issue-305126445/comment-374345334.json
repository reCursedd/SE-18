{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/374345334", "html_url": "https://github.com/tensorflow/tensorflow/issues/17708#issuecomment-374345334", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17708", "id": 374345334, "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDM0NTMzNA==", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-19T19:45:12Z", "updated_at": "2018-03-19T19:48:03Z", "author_association": "MEMBER", "body_html": "<p>I'm tempted to avoid a finalizer. See <a href=\"http://www.informit.com/articles/article.aspx?p=1216151&amp;seqNum=7\" rel=\"nofollow\">\"Effective Java\", Item 7</a> for various reasons, but basically the performance and memory management costs may not be worth it, as the finalizer may make native memory usage unpredictable.</p>\n<p>The <code>Tensor</code> class <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.6/tensorflow/java/src/main/java/org/tensorflow/Tensor.java#L45\">implements the <code>AutoCloseable</code> interface</a>, which is one indication (often picked up by IDEs) that <code>close()</code> should be invoked. We <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/java/src/main/java/org/tensorflow/Tensor.java#L35\">mention this in the javadoc as well</a>.</p>\n<p>So, I'd not like to introduce a finalizer. However, I'm very open to suggestions on how to make this easier to discover/harder to mess up.</p>\n<p>Thanks!</p>", "body_text": "I'm tempted to avoid a finalizer. See \"Effective Java\", Item 7 for various reasons, but basically the performance and memory management costs may not be worth it, as the finalizer may make native memory usage unpredictable.\nThe Tensor class implements the AutoCloseable interface, which is one indication (often picked up by IDEs) that close() should be invoked. We mention this in the javadoc as well.\nSo, I'd not like to introduce a finalizer. However, I'm very open to suggestions on how to make this easier to discover/harder to mess up.\nThanks!", "body": "I'm tempted to avoid a finalizer. See [\"Effective Java\", Item 7](http://www.informit.com/articles/article.aspx?p=1216151&seqNum=7) for various reasons, but basically the performance and memory management costs may not be worth it, as the finalizer may make native memory usage unpredictable.\r\n\r\nThe `Tensor` class [implements the `AutoCloseable` interface](https://github.com/tensorflow/tensorflow/blob/r1.6/tensorflow/java/src/main/java/org/tensorflow/Tensor.java#L45), which is one indication (often picked up by IDEs) that `close()` should be invoked. We [mention this in the javadoc as well](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/java/src/main/java/org/tensorflow/Tensor.java#L35).\r\n\r\nSo, I'd not like to introduce a finalizer. However, I'm very open to suggestions on how to make this easier to discover/harder to mess up.\r\n\r\nThanks!"}
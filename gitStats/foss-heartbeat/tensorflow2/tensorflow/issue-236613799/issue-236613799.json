{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10784", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10784/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10784/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10784/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10784", "id": 236613799, "node_id": "MDU6SXNzdWUyMzY2MTM3OTk=", "number": 10784, "title": "build fails for r1.2 on linux", "user": {"login": "kshaeffer", "id": 29493577, "node_id": "MDQ6VXNlcjI5NDkzNTc3", "avatar_url": "https://avatars3.githubusercontent.com/u/29493577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kshaeffer", "html_url": "https://github.com/kshaeffer", "followers_url": "https://api.github.com/users/kshaeffer/followers", "following_url": "https://api.github.com/users/kshaeffer/following{/other_user}", "gists_url": "https://api.github.com/users/kshaeffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/kshaeffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kshaeffer/subscriptions", "organizations_url": "https://api.github.com/users/kshaeffer/orgs", "repos_url": "https://api.github.com/users/kshaeffer/repos", "events_url": "https://api.github.com/users/kshaeffer/events{/privacy}", "received_events_url": "https://api.github.com/users/kshaeffer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-16T22:31:59Z", "updated_at": "2017-06-17T01:14:25Z", "closed_at": "2017-06-17T01:14:25Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n</ul>\n<p>OS: Ubuntu 16.04.2 LTS<br>\nI have cloned tensorflow from github.<br>\nchecked out release r1.2</p>\n<p>I have rune the configure script:<br>\n$ ./configure<br>\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3<br>\nFound possible Python library paths:<br>\n/usr/lib/python3/dist-packages<br>\n/usr/local/lib/python3.5/dist-packages<br>\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3/dist-packages]<br>\n/usr/lib/python3/dist-packages<br>\nDo you wish to build TensorFlow with MKL support? [y/N] N<br>\nNo MKL support will be enabled for TensorFlow<br>\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: -march=native<br>\nDo you wish to use jemalloc as the malloc implementation? [Y/n] Y<br>\njemalloc enabled<br>\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] N<br>\nNo Google Cloud Platform support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] N<br>\nNo Hadoop File System support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] N<br>\nNo XLA JIT support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with VERBS support? [y/N] N<br>\nNo VERBS support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with OpenCL support? [y/N] N<br>\nNo OpenCL support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with CUDA support? [y/N] N<br>\nNo CUDA support will be enabled for TensorFlow<br>\n..................................................<br>\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.<br>\nConfiguration finished<br>\nshaeffer@ip-10-164-47-27:/srv/projects/c++/tfgit1.2$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package<br>\nERROR: /srv/projects/c++/tfgit1.2/third_party/py/python_configure.bzl:285:20: unexpected keyword 'environ' in call to repository_rule(implementation: function, *, attrs: dict or NoneType = None, local: bool = False).<br>\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Extension file 'third_party/py/python_configure.bzl' has errors.<br>\nINFO: Elapsed time: 3.281s</p>\n<p>The tensorflow r1.2 build fails as described directly above.</p>\n<ul>\n<li>\n<p><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:</p>\n</li>\n<li>\n<p><strong>TensorFlow installed from (source or binary)</strong>: GitHub clone of source code</p>\n</li>\n<li>\n<p><strong>TensorFlow version (use command below)</strong>: r1.2</p>\n</li>\n<li>\n<p><strong>Bazel version (if compiling from source)</strong>:</p>\n</li>\n</ul>\n<p>$ bazel version<br>\nBuild label: 0.4.4<br>\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Wed Feb 1 18:54:21 2017 (1485975261)<br>\nBuild timestamp: 1485975261<br>\nBuild timestamp as int: 1485975261</p>\n<ul>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\n\nOS: Ubuntu 16.04.2 LTS\nI have cloned tensorflow from github.\nchecked out release r1.2\nI have rune the configure script:\n$ ./configure\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3\nFound possible Python library paths:\n/usr/lib/python3/dist-packages\n/usr/local/lib/python3.5/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3/dist-packages]\n/usr/lib/python3/dist-packages\nDo you wish to build TensorFlow with MKL support? [y/N] N\nNo MKL support will be enabled for TensorFlow\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: -march=native\nDo you wish to use jemalloc as the malloc implementation? [Y/n] Y\njemalloc enabled\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] N\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] N\nNo Hadoop File System support will be enabled for TensorFlow\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] N\nNo XLA JIT support will be enabled for TensorFlow\nDo you wish to build TensorFlow with VERBS support? [y/N] N\nNo VERBS support will be enabled for TensorFlow\nDo you wish to build TensorFlow with OpenCL support? [y/N] N\nNo OpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N] N\nNo CUDA support will be enabled for TensorFlow\n..................................................\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\nConfiguration finished\nshaeffer@ip-10-164-47-27:/srv/projects/c++/tfgit1.2$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\nERROR: /srv/projects/c++/tfgit1.2/third_party/py/python_configure.bzl:285:20: unexpected keyword 'environ' in call to repository_rule(implementation: function, *, attrs: dict or NoneType = None, local: bool = False).\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Extension file 'third_party/py/python_configure.bzl' has errors.\nINFO: Elapsed time: 3.281s\nThe tensorflow r1.2 build fails as described directly above.\n\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\n\n\nTensorFlow installed from (source or binary): GitHub clone of source code\n\n\nTensorFlow version (use command below): r1.2\n\n\nBazel version (if compiling from source):\n\n\n$ bazel version\nBuild label: 0.4.4\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Feb 1 18:54:21 2017 (1485975261)\nBuild timestamp: 1485975261\nBuild timestamp as int: 1485975261\n\nExact command to reproduce:\n\n$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package", "body": "\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n\r\nOS: Ubuntu 16.04.2 LTS\r\nI have cloned tensorflow from github.\r\nchecked out release r1.2\r\n\r\nI have rune the configure script:\r\n$ ./configure\r\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3\r\nFound possible Python library paths:\r\n  /usr/lib/python3/dist-packages\r\n  /usr/local/lib/python3.5/dist-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3/dist-packages]\r\n/usr/lib/python3/dist-packages\r\nDo you wish to build TensorFlow with MKL support? [y/N] N\r\nNo MKL support will be enabled for TensorFlow\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: -march=native\r\nDo you wish to use jemalloc as the malloc implementation? [Y/n] Y\r\njemalloc enabled\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] N\r\nNo Google Cloud Platform support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] N\r\nNo Hadoop File System support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] N\r\nNo XLA JIT support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with VERBS support? [y/N] N\r\nNo VERBS support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with OpenCL support? [y/N] N\r\nNo OpenCL support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with CUDA support? [y/N] N\r\nNo CUDA support will be enabled for TensorFlow\r\n..................................................\r\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\r\nConfiguration finished\r\nshaeffer@ip-10-164-47-27:/srv/projects/c++/tfgit1.2$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\nERROR: /srv/projects/c++/tfgit1.2/third_party/py/python_configure.bzl:285:20: unexpected keyword 'environ' in call to repository_rule(implementation: function, *, attrs: dict or NoneType = None, local: bool = False).\r\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Extension file 'third_party/py/python_configure.bzl' has errors.\r\nINFO: Elapsed time: 3.281s\r\n\r\nThe tensorflow r1.2 build fails as described directly above.\r\n\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n- **TensorFlow installed from (source or binary)**: GitHub clone of source code\r\n- **TensorFlow version (use command below)**: r1.2\r\n\r\n- **Bazel version (if compiling from source)**:\r\n\r\n$ bazel version\r\nBuild label: 0.4.4\r\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed Feb 1 18:54:21 2017 (1485975261)\r\nBuild timestamp: 1485975261\r\nBuild timestamp as int: 1485975261\r\n\r\n- **Exact command to reproduce**:\r\n\r\n$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package"}
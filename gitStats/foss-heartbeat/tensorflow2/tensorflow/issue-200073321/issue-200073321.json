{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6787", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6787/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6787/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6787/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6787", "id": 200073321, "node_id": "MDU6SXNzdWUyMDAwNzMzMjE=", "number": 6787, "title": "could not find cuDevicePrimaryCtxSetFlags in libcuda DSO; dlerror: /usr/lib/libcuda.so.1: undefined symbol: cuDevicePrimaryCtxSetFlags", "user": {"login": "expenses", "id": 13566135, "node_id": "MDQ6VXNlcjEzNTY2MTM1", "avatar_url": "https://avatars1.githubusercontent.com/u/13566135?v=4", "gravatar_id": "", "url": "https://api.github.com/users/expenses", "html_url": "https://github.com/expenses", "followers_url": "https://api.github.com/users/expenses/followers", "following_url": "https://api.github.com/users/expenses/following{/other_user}", "gists_url": "https://api.github.com/users/expenses/gists{/gist_id}", "starred_url": "https://api.github.com/users/expenses/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/expenses/subscriptions", "organizations_url": "https://api.github.com/users/expenses/orgs", "repos_url": "https://api.github.com/users/expenses/repos", "events_url": "https://api.github.com/users/expenses/events{/privacy}", "received_events_url": "https://api.github.com/users/expenses/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-01-11T11:51:06Z", "updated_at": "2017-03-31T07:08:12Z", "closed_at": "2017-01-12T00:38:30Z", "author_association": "NONE", "body_html": "<p>Hi, when trying to get tensorflow on my Nvidia GPU, the output started with the following:</p>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so locally\nF tensorflow/stream_executor/cuda/cuda_driver.cc:94] Check failed: s.ok() could not find cuDevicePrimaryCtxSetFlags in libcuda DSO; dlerror: /usr/lib/libcuda.so.1: undefined symbol: cuDevicePrimaryCtxSetFlags\n</code></pre>\n<p>After which, it exits.</p>\n<p>I'm running with the following:</p>\n<p><code>uname -r</code>:</p>\n<pre><code>4.8.13-1-ARCH\n</code></pre>\n<p><code>lspci</code>:</p>\n<pre><code>VGA compatible controller: NVIDIA Corporation GM107 [GeForce GTX 750] (rev a2)\nSubsystem: Gigabyte Technology Co., Ltd Device 362e\nKernel driver in use: nvidia\n</code></pre>\n<p><code>cat /proc/driver/nvidia/version</code>:</p>\n<pre><code>NVRM version: NVIDIA UNIX x86_64 Kernel Module  340.101  Thu Dec  1 15:52:31 PST 2016\nGCC version:  gcc version 6.2.1 20160830 (GCC)\n</code></pre>\n<p><code>ls -l /usr/lib/libcuda*</code>:</p>\n<pre><code>lrwxrwxrwx 1 root root       12 Dec 16 01:18 /usr/lib/libcuda.so -&gt; libcuda.so.1*\nlrwxrwxrwx 1 root root       18 Dec 16 01:18 /usr/lib/libcuda.so.1 -&gt; libcuda.so.340.101*\n-rwxr-xr-x 1 root root 14011752 Dec 16 01:18 /usr/lib/libcuda.so.340.101*\n</code></pre>\n<p>Tensorflow version:</p>\n<pre><code>0.12.1\n</code></pre>\n<p><strong>Note:</strong> I <em>am</em> running tensorflow on Python 3.6 having changed 'cp35' to 'cp36' in the file name of the binary, but I presume that this does not matter considering that this is a cuda issue, and that the CPU version worked fine.</p>\n<p>The line that the error references is this one:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/stream_executor/cuda/cuda_driver.cc#L94\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/stream_executor/cuda/cuda_driver.cc#L94</a></p>\n<p>Whats going on here, and what can I do to fix this?</p>", "body_text": "Hi, when trying to get tensorflow on my Nvidia GPU, the output started with the following:\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so locally\nF tensorflow/stream_executor/cuda/cuda_driver.cc:94] Check failed: s.ok() could not find cuDevicePrimaryCtxSetFlags in libcuda DSO; dlerror: /usr/lib/libcuda.so.1: undefined symbol: cuDevicePrimaryCtxSetFlags\n\nAfter which, it exits.\nI'm running with the following:\nuname -r:\n4.8.13-1-ARCH\n\nlspci:\nVGA compatible controller: NVIDIA Corporation GM107 [GeForce GTX 750] (rev a2)\nSubsystem: Gigabyte Technology Co., Ltd Device 362e\nKernel driver in use: nvidia\n\ncat /proc/driver/nvidia/version:\nNVRM version: NVIDIA UNIX x86_64 Kernel Module  340.101  Thu Dec  1 15:52:31 PST 2016\nGCC version:  gcc version 6.2.1 20160830 (GCC)\n\nls -l /usr/lib/libcuda*:\nlrwxrwxrwx 1 root root       12 Dec 16 01:18 /usr/lib/libcuda.so -> libcuda.so.1*\nlrwxrwxrwx 1 root root       18 Dec 16 01:18 /usr/lib/libcuda.so.1 -> libcuda.so.340.101*\n-rwxr-xr-x 1 root root 14011752 Dec 16 01:18 /usr/lib/libcuda.so.340.101*\n\nTensorflow version:\n0.12.1\n\nNote: I am running tensorflow on Python 3.6 having changed 'cp35' to 'cp36' in the file name of the binary, but I presume that this does not matter considering that this is a cuda issue, and that the CPU version worked fine.\nThe line that the error references is this one:\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/stream_executor/cuda/cuda_driver.cc#L94\nWhats going on here, and what can I do to fix this?", "body": "Hi, when trying to get tensorflow on my Nvidia GPU, the output started with the following:\r\n\r\n    I tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so locally\r\n    I tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so locally\r\n    I tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so locally\r\n    I tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\r\n    I tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so locally\r\n    F tensorflow/stream_executor/cuda/cuda_driver.cc:94] Check failed: s.ok() could not find cuDevicePrimaryCtxSetFlags in libcuda DSO; dlerror: /usr/lib/libcuda.so.1: undefined symbol: cuDevicePrimaryCtxSetFlags\r\nAfter which, it exits.\r\n\r\nI'm running with the following:\r\n\r\n`uname -r`:\r\n    \r\n    4.8.13-1-ARCH\r\n\r\n\r\n`lspci`:\r\n    \r\n    VGA compatible controller: NVIDIA Corporation GM107 [GeForce GTX 750] (rev a2)\r\n    Subsystem: Gigabyte Technology Co., Ltd Device 362e\r\n    Kernel driver in use: nvidia\r\n\r\n`cat /proc/driver/nvidia/version`:\r\n\r\n    NVRM version: NVIDIA UNIX x86_64 Kernel Module  340.101  Thu Dec  1 15:52:31 PST 2016\r\n    GCC version:  gcc version 6.2.1 20160830 (GCC)\r\n\r\n`ls -l /usr/lib/libcuda*`:\r\n\r\n    lrwxrwxrwx 1 root root       12 Dec 16 01:18 /usr/lib/libcuda.so -> libcuda.so.1*\r\n    lrwxrwxrwx 1 root root       18 Dec 16 01:18 /usr/lib/libcuda.so.1 -> libcuda.so.340.101*\r\n    -rwxr-xr-x 1 root root 14011752 Dec 16 01:18 /usr/lib/libcuda.so.340.101*\r\n\r\nTensorflow version:\r\n    \r\n    0.12.1\r\n\r\n**Note:** I _am_ running tensorflow on Python 3.6 having changed 'cp35' to 'cp36' in the file name of the binary, but I presume that this does not matter considering that this is a cuda issue, and that the CPU version worked fine.\r\n\r\nThe line that the error references is this one:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/stream_executor/cuda/cuda_driver.cc#L94\r\n\r\nWhats going on here, and what can I do to fix this?"}
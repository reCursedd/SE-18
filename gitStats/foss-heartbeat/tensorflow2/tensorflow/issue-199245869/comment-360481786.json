{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/360481786", "html_url": "https://github.com/tensorflow/tensorflow/issues/6698#issuecomment-360481786", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6698", "id": 360481786, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDQ4MTc4Ng==", "user": {"login": "PabloMessina", "id": 6187545, "node_id": "MDQ6VXNlcjYxODc1NDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/6187545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PabloMessina", "html_url": "https://github.com/PabloMessina", "followers_url": "https://api.github.com/users/PabloMessina/followers", "following_url": "https://api.github.com/users/PabloMessina/following{/other_user}", "gists_url": "https://api.github.com/users/PabloMessina/gists{/gist_id}", "starred_url": "https://api.github.com/users/PabloMessina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PabloMessina/subscriptions", "organizations_url": "https://api.github.com/users/PabloMessina/orgs", "repos_url": "https://api.github.com/users/PabloMessina/repos", "events_url": "https://api.github.com/users/PabloMessina/events{/privacy}", "received_events_url": "https://api.github.com/users/PabloMessina/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-25T14:27:15Z", "updated_at": "2018-01-25T14:46:49Z", "author_association": "NONE", "body_html": "<p>Hi, I'm having the same problem and none of the suggestions so far has helped me to solve it.<br>\nI'm using an Asus Zenbook Pro laptop with Windows 10 with the following specs:</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35390462-571504bc-01ba-11e8-9fb9-647b218f9ae9.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35390462-571504bc-01ba-11e8-9fb9-647b218f9ae9.png\" alt=\"imagen\" style=\"max-width:100%;\"></a></p>\n<p>My GPU specs are the following:</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35390360-e6a49abc-01b9-11e8-8daa-4458a8e492b6.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35390360-e6a49abc-01b9-11e8-8daa-4458a8e492b6.png\" alt=\"imagen\" style=\"max-width:100%;\"></a></p>\n<p>I'm following this tutorial: <a href=\"https://www.tensorflow.org/get_started/mnist/pros\" rel=\"nofollow\">https://www.tensorflow.org/get_started/mnist/pros</a>, in which you have to implement and train 1) a softmax regression and 2) a multilayer CNN with the MNIST dataset.</p>\n<p>These are my codes: <a href=\"https://github.com/tensorflow/tensorflow/files/1664160/MNIST_Tutorial.zip\">MNIST_Tutorial.zip</a>. The zip has 2 files: MNIST_softmax_regression.py and MNIST_multilayer_CNN.py.</p>\n<ol>\n<li>\n<p>When I run MNIST_softmax_regression.py, it works fine:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35392138-ab475648-01bf-11e8-930b-65119023b363.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35392138-ab475648-01bf-11e8-930b-65119023b363.png\" alt=\"imagen\" style=\"max-width:100%;\"></a><br>\nAs you can see, the GPU is getting used and the final accuracy is about 92% as expected according to the tutorial.</p>\n</li>\n<li>\n<p>However, when I run MNIST_multilayer_CNN.py, python crashes:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35392589-2a6bad7e-01c1-11e8-8428-5872d0015023.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35392589-2a6bad7e-01c1-11e8-8428-5872d0015023.png\" alt=\"imagen\" style=\"max-width:100%;\"></a></p>\n</li>\n</ol>\n<p>I tried 2 workarounds based on previous suggestions:</p>\n<pre><code>config = tf.ConfigProto()\nconfig.gpu_options.allow_growth = True\nwith tf.Session(config=config) as sess:\n</code></pre>\n<p>and</p>\n<pre><code>config = tf.ConfigProto()\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.8\nwith tf.Session(config=config) as sess:\n</code></pre>\n<p>None of them worked, although the second one produces the following output:</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35392215-f4289412-01bf-11e8-8c08-bae791a6f334.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35392215-f4289412-01bf-11e8-8c08-bae791a6f334.png\" alt=\"imagen\" style=\"max-width:100%;\"></a></p>\n<p>as you can see, tensorflow first tries to allocate memory multiple times (CUBLAS_STATUS_ALLOC_FAILED) until it apparently succeeds but then the CUDNN_STATUS_NOT_INITIALIZED error appears and everything fails again.</p>\n<p>Btw, I installed tensorflow according to the alternative approach at the end of these instructions: <a href=\"http://www.python36.com/install-tensorflow-gpu-windows/\" rel=\"nofollow\">http://www.python36.com/install-tensorflow-gpu-windows/</a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35392828-d6b849fc-01c1-11e8-9918-c67bb0ad726f.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35392828-d6b849fc-01c1-11e8-9918-c67bb0ad726f.png\" alt=\"imagen\" style=\"max-width:100%;\"></a></p>\n<p>I used this CUDA installer:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35392911-24d21014-01c2-11e8-95fe-472639e57d6b.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35392911-24d21014-01c2-11e8-95fe-472639e57d6b.png\" alt=\"imagen\" style=\"max-width:100%;\"></a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35393565-102aafde-01c4-11e8-86ce-5551c496d233.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35393565-102aafde-01c4-11e8-86ce-5551c496d233.png\" alt=\"imagen\" style=\"max-width:100%;\"></a></p>\n<p>And used this .whl file to install tensorflow:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35393014-7f212b54-01c2-11e8-81ed-7070c2346d75.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35393014-7f212b54-01c2-11e8-81ed-7070c2346d75.png\" alt=\"imagen\" style=\"max-width:100%;\"></a></p>\n<p>Here some more info about python, pip and conda:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/6187545/35394028-6997dbf4-01c5-11e8-9be2-9a9bc4989733.png\"><img src=\"https://user-images.githubusercontent.com/6187545/35394028-6997dbf4-01c5-11e8-9be2-9a9bc4989733.png\" alt=\"imagen\" style=\"max-width:100%;\"></a></p>\n<p>Any help will be deeply appreciated.<br>\nThanks in advance.</p>", "body_text": "Hi, I'm having the same problem and none of the suggestions so far has helped me to solve it.\nI'm using an Asus Zenbook Pro laptop with Windows 10 with the following specs:\n\nMy GPU specs are the following:\n\nI'm following this tutorial: https://www.tensorflow.org/get_started/mnist/pros, in which you have to implement and train 1) a softmax regression and 2) a multilayer CNN with the MNIST dataset.\nThese are my codes: MNIST_Tutorial.zip. The zip has 2 files: MNIST_softmax_regression.py and MNIST_multilayer_CNN.py.\n\n\nWhen I run MNIST_softmax_regression.py, it works fine:\n\nAs you can see, the GPU is getting used and the final accuracy is about 92% as expected according to the tutorial.\n\n\nHowever, when I run MNIST_multilayer_CNN.py, python crashes:\n\n\n\nI tried 2 workarounds based on previous suggestions:\nconfig = tf.ConfigProto()\nconfig.gpu_options.allow_growth = True\nwith tf.Session(config=config) as sess:\n\nand\nconfig = tf.ConfigProto()\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.8\nwith tf.Session(config=config) as sess:\n\nNone of them worked, although the second one produces the following output:\n\nas you can see, tensorflow first tries to allocate memory multiple times (CUBLAS_STATUS_ALLOC_FAILED) until it apparently succeeds but then the CUDNN_STATUS_NOT_INITIALIZED error appears and everything fails again.\nBtw, I installed tensorflow according to the alternative approach at the end of these instructions: http://www.python36.com/install-tensorflow-gpu-windows/\n\nI used this CUDA installer:\n\n\nAnd used this .whl file to install tensorflow:\n\nHere some more info about python, pip and conda:\n\nAny help will be deeply appreciated.\nThanks in advance.", "body": "Hi, I'm having the same problem and none of the suggestions so far has helped me to solve it.\r\nI'm using an Asus Zenbook Pro laptop with Windows 10 with the following specs:\r\n\r\n![imagen](https://user-images.githubusercontent.com/6187545/35390462-571504bc-01ba-11e8-9fb9-647b218f9ae9.png)\r\n\r\nMy GPU specs are the following:\r\n\r\n![imagen](https://user-images.githubusercontent.com/6187545/35390360-e6a49abc-01b9-11e8-8daa-4458a8e492b6.png)\r\n\r\nI'm following this tutorial: https://www.tensorflow.org/get_started/mnist/pros, in which you have to implement and train 1) a softmax regression and 2) a multilayer CNN with the MNIST dataset.\r\n\r\nThese are my codes: [MNIST_Tutorial.zip](https://github.com/tensorflow/tensorflow/files/1664160/MNIST_Tutorial.zip). The zip has 2 files: MNIST_softmax_regression.py and MNIST_multilayer_CNN.py.\r\n\r\n1) When I run MNIST_softmax_regression.py, it works fine:\r\n![imagen](https://user-images.githubusercontent.com/6187545/35392138-ab475648-01bf-11e8-930b-65119023b363.png)\r\nAs you can see, the GPU is getting used and the final accuracy is about 92% as expected according to the tutorial.\r\n\r\n2) However, when I run MNIST_multilayer_CNN.py, python crashes:\r\n![imagen](https://user-images.githubusercontent.com/6187545/35392589-2a6bad7e-01c1-11e8-8428-5872d0015023.png)\r\n\r\nI tried 2 workarounds based on previous suggestions:\r\n```\r\nconfig = tf.ConfigProto()\r\nconfig.gpu_options.allow_growth = True\r\nwith tf.Session(config=config) as sess:\r\n```\r\nand\r\n\r\n```\r\nconfig = tf.ConfigProto()\r\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.8\r\nwith tf.Session(config=config) as sess:\r\n```\r\nNone of them worked, although the second one produces the following output:\r\n\r\n![imagen](https://user-images.githubusercontent.com/6187545/35392215-f4289412-01bf-11e8-8c08-bae791a6f334.png)\r\n\r\nas you can see, tensorflow first tries to allocate memory multiple times (CUBLAS_STATUS_ALLOC_FAILED) until it apparently succeeds but then the CUDNN_STATUS_NOT_INITIALIZED error appears and everything fails again.\r\n\r\nBtw, I installed tensorflow according to the alternative approach at the end of these instructions: http://www.python36.com/install-tensorflow-gpu-windows/\r\n![imagen](https://user-images.githubusercontent.com/6187545/35392828-d6b849fc-01c1-11e8-9918-c67bb0ad726f.png)\r\n\r\nI used this CUDA installer: \r\n![imagen](https://user-images.githubusercontent.com/6187545/35392911-24d21014-01c2-11e8-95fe-472639e57d6b.png)\r\n![imagen](https://user-images.githubusercontent.com/6187545/35393565-102aafde-01c4-11e8-86ce-5551c496d233.png)\r\n\r\nAnd used this .whl file to install tensorflow:\r\n![imagen](https://user-images.githubusercontent.com/6187545/35393014-7f212b54-01c2-11e8-81ed-7070c2346d75.png)\r\n\r\nHere some more info about python, pip and conda:\r\n![imagen](https://user-images.githubusercontent.com/6187545/35394028-6997dbf4-01c5-11e8-9be2-9a9bc4989733.png)\r\n\r\nAny help will be deeply appreciated.\r\nThanks in advance."}
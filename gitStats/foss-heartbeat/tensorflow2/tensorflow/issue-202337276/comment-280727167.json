{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/280727167", "html_url": "https://github.com/tensorflow/tensorflow/issues/6999#issuecomment-280727167", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6999", "id": 280727167, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDcyNzE2Nw==", "user": {"login": "pavelbulanov", "id": 14073667, "node_id": "MDQ6VXNlcjE0MDczNjY3", "avatar_url": "https://avatars0.githubusercontent.com/u/14073667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavelbulanov", "html_url": "https://github.com/pavelbulanov", "followers_url": "https://api.github.com/users/pavelbulanov/followers", "following_url": "https://api.github.com/users/pavelbulanov/following{/other_user}", "gists_url": "https://api.github.com/users/pavelbulanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavelbulanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavelbulanov/subscriptions", "organizations_url": "https://api.github.com/users/pavelbulanov/orgs", "repos_url": "https://api.github.com/users/pavelbulanov/repos", "events_url": "https://api.github.com/users/pavelbulanov/events{/privacy}", "received_events_url": "https://api.github.com/users/pavelbulanov/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-17T18:22:02Z", "updated_at": "2017-02-17T18:37:25Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=161459\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/petewarden\">@petewarden</a>, Shall I open a new issue?</p>\n<p>This is indeed a different setup, I'm using \"new\" Visual Studio Build Tools, which are related to Visual Studio 2017. They call it \"Build Tools for Visual Studio 2017 RC\" in the <a href=\"https://www.visualstudio.com/downloads/#build-tools-for-visual-studio-2017-rc\" rel=\"nofollow\">download</a> section. It's free.</p>\n<p>As for the issue, I see <a href=\"https://github.com/tensorflow/tensorflow/commit/a672cb166dae93ae955c1d38f3de8903dd242373\">commit</a> made that introduced usage of <code>__cpuidex</code> function. And based on <a href=\"https://msdn.microsoft.com/en-us/library/hskdteyh.aspx\" rel=\"nofollow\">this</a> MSDN link, I discovered that Header file <code>&lt;intrin.h&gt;</code> has to be included.  That's why I put it inside <code>cpu_info.h</code> (not sure if it's exactly perfect place).</p>\n<p>The second issue with <code>_mm256_extract_epi32</code> may be connected with the same reason, I don't know.<br>\nIn the meantime, <code>platform/windows/intrinsics_port.h</code> <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/windows/intrinsics_port.h#L22\">references</a> <code>immintrin.h</code>, but I don't see it's actually included anywhere. I assume it may correlate with <code>instrih.h</code> inclusion (based on <a href=\"https://msdn.microsoft.com/en-us/library/26td21ds.aspx\" rel=\"nofollow\">this</a> link). Meanwhile, <code>_mm256_extract_epi32 </code>can be found in <code>avxintrin.h</code> which may be is included by <code>immintrin.h</code>.</p>\n<blockquote>\n<p>// the following avx intrinsics are not defined on windows<br>\n// in immintrin.h so we define them here.</p>\n</blockquote>", "body_text": "@petewarden, Shall I open a new issue?\nThis is indeed a different setup, I'm using \"new\" Visual Studio Build Tools, which are related to Visual Studio 2017. They call it \"Build Tools for Visual Studio 2017 RC\" in the download section. It's free.\nAs for the issue, I see commit made that introduced usage of __cpuidex function. And based on this MSDN link, I discovered that Header file <intrin.h> has to be included.  That's why I put it inside cpu_info.h (not sure if it's exactly perfect place).\nThe second issue with _mm256_extract_epi32 may be connected with the same reason, I don't know.\nIn the meantime, platform/windows/intrinsics_port.h references immintrin.h, but I don't see it's actually included anywhere. I assume it may correlate with instrih.h inclusion (based on this link). Meanwhile, _mm256_extract_epi32 can be found in avxintrin.h which may be is included by immintrin.h.\n\n// the following avx intrinsics are not defined on windows\n// in immintrin.h so we define them here.", "body": "@petewarden, Shall I open a new issue?\r\n\r\nThis is indeed a different setup, I'm using \"new\" Visual Studio Build Tools, which are related to Visual Studio 2017. They call it \"Build Tools for Visual Studio 2017 RC\" in the [download](https://www.visualstudio.com/downloads/#build-tools-for-visual-studio-2017-rc) section. It's free.\r\n\r\nAs for the issue, I see [commit](https://github.com/tensorflow/tensorflow/commit/a672cb166dae93ae955c1d38f3de8903dd242373) made that introduced usage of `__cpuidex` function. And based on [this](https://msdn.microsoft.com/en-us/library/hskdteyh.aspx) MSDN link, I discovered that Header file `<intrin.h>` has to be included.  That's why I put it inside `cpu_info.h` (not sure if it's exactly perfect place).\r\n\r\nThe second issue with `_mm256_extract_epi32` may be connected with the same reason, I don't know. \r\nIn the meantime, `platform/windows/intrinsics_port.h` [references](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/windows/intrinsics_port.h#L22) `immintrin.h`, but I don't see it's actually included anywhere. I assume it may correlate with `instrih.h` inclusion (based on [this](https://msdn.microsoft.com/en-us/library/26td21ds.aspx) link). Meanwhile, `_mm256_extract_epi32 `can be found in `avxintrin.h` which may be is included by `immintrin.h`.\r\n\r\n> // the following avx intrinsics are not defined on windows\r\n> // in immintrin.h so we define them here."}
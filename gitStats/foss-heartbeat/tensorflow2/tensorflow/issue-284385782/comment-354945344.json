{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/354945344", "html_url": "https://github.com/tensorflow/tensorflow/issues/15618#issuecomment-354945344", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15618", "id": 354945344, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDk0NTM0NA==", "user": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-03T06:36:16Z", "updated_at": "2018-01-03T06:36:16Z", "author_association": "MEMBER", "body_html": "<p>I think the cause is in our bzl rules we defined, we try to execute python files like binaries. Here is my hacks to get around this problem, it is not working yet but I believe I touch all the necessary pieces on this commit:<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/gunan/tensorflow/commit/77eaad46df1fb6532577c130a2508665c17de049/hovercard\" href=\"https://github.com/gunan/tensorflow/commit/77eaad46df1fb6532577c130a2508665c17de049\">gunan@<tt>77eaad4</tt></a></p>\n<p>The files we need to edit are:<br>\nRemove shebang in these files:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/git/gen_git_source.py#L1\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/git/gen_git_source.py#L1</a><br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/build_info/gen_build_info.py\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/build_info/gen_build_info.py</a></p>\n<p>Edit the following rules to avoid trying to execute the files, build them as py_binaries first and then execute the built pieces:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorflow.bzl#L1564\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorflow.bzl#L1564</a><br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorflow.bzl#L1578\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorflow.bzl#L1578</a><br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/third_party/git/git_configure.bzl#L15\">https://github.com/tensorflow/tensorflow/blob/master/third_party/git/git_configure.bzl#L15</a></p>\n<p>And finally fix this rule. From what I can see the python command here is a noop, but I will need to verify it later:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/default/build_config.bzl#L77\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/default/build_config.bzl#L77</a></p>\n<p>+CC <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1299636\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/case540\">@case540</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=49262\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jart\">@jart</a> I may need help from you to guide me in this endeavor into skylark.</p>", "body_text": "I think the cause is in our bzl rules we defined, we try to execute python files like binaries. Here is my hacks to get around this problem, it is not working yet but I believe I touch all the necessary pieces on this commit:\ngunan@77eaad4\nThe files we need to edit are:\nRemove shebang in these files:\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/git/gen_git_source.py#L1\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/build_info/gen_build_info.py\nEdit the following rules to avoid trying to execute the files, build them as py_binaries first and then execute the built pieces:\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorflow.bzl#L1564\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorflow.bzl#L1578\nhttps://github.com/tensorflow/tensorflow/blob/master/third_party/git/git_configure.bzl#L15\nAnd finally fix this rule. From what I can see the python command here is a noop, but I will need to verify it later:\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/default/build_config.bzl#L77\n+CC @case540 @jart I may need help from you to guide me in this endeavor into skylark.", "body": "I think the cause is in our bzl rules we defined, we try to execute python files like binaries. Here is my hacks to get around this problem, it is not working yet but I believe I touch all the necessary pieces on this commit:\r\nhttps://github.com/gunan/tensorflow/commit/77eaad46df1fb6532577c130a2508665c17de049\r\n\r\nThe files we need to edit are:\r\nRemove shebang in these files:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/git/gen_git_source.py#L1\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/build_info/gen_build_info.py\r\n\r\nEdit the following rules to avoid trying to execute the files, build them as py_binaries first and then execute the built pieces:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorflow.bzl#L1564\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorflow.bzl#L1578\r\nhttps://github.com/tensorflow/tensorflow/blob/master/third_party/git/git_configure.bzl#L15\r\n\r\nAnd finally fix this rule. From what I can see the python command here is a noop, but I will need to verify it later:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/default/build_config.bzl#L77\r\n\r\n+CC @case540 @jart I may need help from you to guide me in this endeavor into skylark.\r\n "}
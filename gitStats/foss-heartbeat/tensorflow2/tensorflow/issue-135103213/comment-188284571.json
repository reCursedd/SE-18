{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/188284571", "html_url": "https://github.com/tensorflow/tensorflow/issues/1214#issuecomment-188284571", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1214", "id": 188284571, "node_id": "MDEyOklzc3VlQ29tbWVudDE4ODI4NDU3MQ==", "user": {"login": "tmsimont", "id": 1643712, "node_id": "MDQ6VXNlcjE2NDM3MTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1643712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmsimont", "html_url": "https://github.com/tmsimont", "followers_url": "https://api.github.com/users/tmsimont/followers", "following_url": "https://api.github.com/users/tmsimont/following{/other_user}", "gists_url": "https://api.github.com/users/tmsimont/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmsimont/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmsimont/subscriptions", "organizations_url": "https://api.github.com/users/tmsimont/orgs", "repos_url": "https://api.github.com/users/tmsimont/repos", "events_url": "https://api.github.com/users/tmsimont/events{/privacy}", "received_events_url": "https://api.github.com/users/tmsimont/received_events", "type": "User", "site_admin": false}, "created_at": "2016-02-24T14:46:13Z", "updated_at": "2016-02-24T14:50:17Z", "author_association": "NONE", "body_html": "<p>I tried to isolate the failing compile command and it the error is clearer:</p>\n<pre><code>tensorflow/core/kernels/matrix_solve_ls_op.cc:111:41: error: 'Matrix' is not a class, namespace, or enumeration\n               (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\n</code></pre>\n<p>I'm not sure why that is happening...</p>\n<p>I see on line 66 of <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/matrix_solve_ls_op.cc\">matrix_solve_ls_op.cc</a>:</p>\n<pre><code>  using typename BinaryLinearAlgebraOp&lt;Scalar, SupportsBatchOperationT&gt;::Matrix;\n</code></pre>\n<p>Then for some reason using that <code>typename</code> fails on line 111:</p>\n<pre><code> gramian +=\n              (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\n</code></pre>\n<p>It seems to be related to the fact that <code>MatrixSolveLsOp</code> is <code>using typename</code> on a template class member that is declared with <code>using</code>...</p>\n<p>As far as I can tell, this should all be OK C++11. (related <a href=\"http://stackoverflow.com/questions/23847774/are-using-typename-directives-not-implemented-by-compilers\" rel=\"nofollow\">discussion of this style on stackoverflow</a>)</p>\n<p>I found 2 closely related bugs in gcc:</p>\n<ul>\n<li><a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=14258\" rel=\"nofollow\">Older bug with recent comments</a></li>\n<li><a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=58047\" rel=\"nofollow\">Comments point to this one in gcc 4.8</a></li>\n</ul>\n<p>This could be it... I suspect gcc 4.8.1 is not supported. I have to break for now but will try to update GCC and report back..</p>", "body_text": "I tried to isolate the failing compile command and it the error is clearer:\ntensorflow/core/kernels/matrix_solve_ls_op.cc:111:41: error: 'Matrix' is not a class, namespace, or enumeration\n               (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\n\nI'm not sure why that is happening...\nI see on line 66 of matrix_solve_ls_op.cc:\n  using typename BinaryLinearAlgebraOp<Scalar, SupportsBatchOperationT>::Matrix;\n\nThen for some reason using that typename fails on line 111:\n gramian +=\n              (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\n\nIt seems to be related to the fact that MatrixSolveLsOp is using typename on a template class member that is declared with using...\nAs far as I can tell, this should all be OK C++11. (related discussion of this style on stackoverflow)\nI found 2 closely related bugs in gcc:\n\nOlder bug with recent comments\nComments point to this one in gcc 4.8\n\nThis could be it... I suspect gcc 4.8.1 is not supported. I have to break for now but will try to update GCC and report back..", "body": "I tried to isolate the failing compile command and it the error is clearer:\n\n```\ntensorflow/core/kernels/matrix_solve_ls_op.cc:111:41: error: 'Matrix' is not a class, namespace, or enumeration\n               (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\n```\n\nI'm not sure why that is happening...\n\nI see on line 66 of [matrix_solve_ls_op.cc](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/matrix_solve_ls_op.cc):\n\n```\n  using typename BinaryLinearAlgebraOp<Scalar, SupportsBatchOperationT>::Matrix;\n```\n\nThen for some reason using that `typename` fails on line 111:\n\n```\n gramian +=\n              (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\n```\n\nIt seems to be related to the fact that `MatrixSolveLsOp` is `using typename` on a template class member that is declared with `using`...\n\nAs far as I can tell, this should all be OK C++11. (related [discussion of this style on stackoverflow](http://stackoverflow.com/questions/23847774/are-using-typename-directives-not-implemented-by-compilers))\n\nI found 2 closely related bugs in gcc:\n-  [Older bug with recent comments](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=14258)\n-  [Comments point to this one in gcc 4.8](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=58047)\n\nThis could be it... I suspect gcc 4.8.1 is not supported. I have to break for now but will try to update GCC and report back..\n"}
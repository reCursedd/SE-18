{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21302", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21302/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21302/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21302/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21302", "id": 346539652, "node_id": "MDU6SXNzdWUzNDY1Mzk2NTI=", "number": 21302, "title": "Quantized model not working in Tensorflow Lite iOS", "user": {"login": "simonfernandes7389", "id": 39329101, "node_id": "MDQ6VXNlcjM5MzI5MTAx", "avatar_url": "https://avatars3.githubusercontent.com/u/39329101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonfernandes7389", "html_url": "https://github.com/simonfernandes7389", "followers_url": "https://api.github.com/users/simonfernandes7389/followers", "following_url": "https://api.github.com/users/simonfernandes7389/following{/other_user}", "gists_url": "https://api.github.com/users/simonfernandes7389/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonfernandes7389/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonfernandes7389/subscriptions", "organizations_url": "https://api.github.com/users/simonfernandes7389/orgs", "repos_url": "https://api.github.com/users/simonfernandes7389/repos", "events_url": "https://api.github.com/users/simonfernandes7389/events{/privacy}", "received_events_url": "https://api.github.com/users/simonfernandes7389/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-08-01T10:23:50Z", "updated_at": "2018-08-18T04:53:22Z", "closed_at": "2018-08-18T04:53:22Z", "author_association": "NONE", "body_html": "<p>I am working on Tensorflow-Lite in iOS. A non quantized .pb file when converted to .tflite it works fine, but when I tried converting a working quantized model (pb) to .tflite, with command below:</p>\n<pre><code>bazel-bin/tensorflow/contrib/lite/toco/toco \\\n--input_file=/pathOfQuantizedFile/xyz.pb \\\n--input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \\\n--output_file=/pathOfQuantizedFile/xyz.tflite   --inference_type=FLOAT \\\n--input_type=FLOAT --input_arrays=input_node   --output_arrays=output_node    \n--input_shapes=1,256,256  --allow_custom_ops\n</code></pre>\n<p>The file gets converted to .tflite successfully but gave this following error when used in the iOS app:</p>\n<blockquote>\n<p>Didn't find custom op for name 'RSQRT'<br>\nDidn't find custom op for name 'Dequantize'<br>\nDidn't find custom op for name 'ReorderAxes'<br>\nRegistration failed.<br>\nFailed to construct interpreter</p>\n</blockquote>\n<p>Tried this with both TensorFlow version - r1.8,  r1.9 and r1.10.</p>\n<p>Have I written custom code - No<br>\nOS Platform and Distribution - MacOS<br>\nTensorFlow - N/A<br>\nTensorFlow version - r1.8<br>\nBazel version - 0.11.0<br>\nCUDA/cuDNN version - N/A<br>\nGPU model and memory - N/A<br>\nExact command to reproduce - N/A</p>", "body_text": "I am working on Tensorflow-Lite in iOS. A non quantized .pb file when converted to .tflite it works fine, but when I tried converting a working quantized model (pb) to .tflite, with command below:\nbazel-bin/tensorflow/contrib/lite/toco/toco \\\n--input_file=/pathOfQuantizedFile/xyz.pb \\\n--input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \\\n--output_file=/pathOfQuantizedFile/xyz.tflite   --inference_type=FLOAT \\\n--input_type=FLOAT --input_arrays=input_node   --output_arrays=output_node    \n--input_shapes=1,256,256  --allow_custom_ops\n\nThe file gets converted to .tflite successfully but gave this following error when used in the iOS app:\n\nDidn't find custom op for name 'RSQRT'\nDidn't find custom op for name 'Dequantize'\nDidn't find custom op for name 'ReorderAxes'\nRegistration failed.\nFailed to construct interpreter\n\nTried this with both TensorFlow version - r1.8,  r1.9 and r1.10.\nHave I written custom code - No\nOS Platform and Distribution - MacOS\nTensorFlow - N/A\nTensorFlow version - r1.8\nBazel version - 0.11.0\nCUDA/cuDNN version - N/A\nGPU model and memory - N/A\nExact command to reproduce - N/A", "body": "I am working on Tensorflow-Lite in iOS. A non quantized .pb file when converted to .tflite it works fine, but when I tried converting a working quantized model (pb) to .tflite, with command below:\r\n\r\n   ```\r\n bazel-bin/tensorflow/contrib/lite/toco/toco \\\r\n   --input_file=/pathOfQuantizedFile/xyz.pb \\\r\n   --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \\\r\n   --output_file=/pathOfQuantizedFile/xyz.tflite   --inference_type=FLOAT \\\r\n   --input_type=FLOAT --input_arrays=input_node   --output_arrays=output_node    \r\n   --input_shapes=1,256,256  --allow_custom_ops\r\n```\r\n\r\nThe file gets converted to .tflite successfully but gave this following error when used in the iOS app:\r\n\r\n> Didn't find custom op for name 'RSQRT'\r\n> Didn't find custom op for name 'Dequantize'\r\n> Didn't find custom op for name 'ReorderAxes'\r\n> Registration failed.\r\n> Failed to construct interpreter\r\n\r\nTried this with both TensorFlow version - r1.8,  r1.9 and r1.10.\r\n\r\nHave I written custom code - No\r\nOS Platform and Distribution - MacOS\r\nTensorFlow - N/A\r\nTensorFlow version - r1.8\r\nBazel version - 0.11.0\r\nCUDA/cuDNN version - N/A\r\nGPU model and memory - N/A\r\nExact command to reproduce - N/A"}
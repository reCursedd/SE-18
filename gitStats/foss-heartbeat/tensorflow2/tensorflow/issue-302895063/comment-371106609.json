{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/371106609", "html_url": "https://github.com/tensorflow/tensorflow/issues/17493#issuecomment-371106609", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17493", "id": 371106609, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTEwNjYwOQ==", "user": {"login": "bennix", "id": 124814, "node_id": "MDQ6VXNlcjEyNDgxNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/124814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bennix", "html_url": "https://github.com/bennix", "followers_url": "https://api.github.com/users/bennix/followers", "following_url": "https://api.github.com/users/bennix/following{/other_user}", "gists_url": "https://api.github.com/users/bennix/gists{/gist_id}", "starred_url": "https://api.github.com/users/bennix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bennix/subscriptions", "organizations_url": "https://api.github.com/users/bennix/orgs", "repos_url": "https://api.github.com/users/bennix/repos", "events_url": "https://api.github.com/users/bennix/events{/privacy}", "received_events_url": "https://api.github.com/users/bennix/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-07T11:15:49Z", "updated_at": "2018-03-07T15:12:03Z", "author_association": "NONE", "body_html": "<p>I have successfully build tensorflow-gpu for python 3.6 with compute capability 6.1 CUDNN 7 Cuda 9.1, you can download from following links (CC stands for compute capability):</p>\n<p><a href=\"https://pan.baidu.com/s/1R-gmwTPitrmtwPsZPAPJiQ\" rel=\"nofollow\">tensorflow 1.6 gpu mac version without XLA and CC: 6.1</a></p>\n<p><a href=\"https://pan.baidu.com/s/1mxAYvOV3UkCYT9XXk4keXg\" rel=\"nofollow\">tensorflow 1.6 gpu mac version with XLA and CC: 3.5 5.2</a></p>\n<p><a href=\"https://pan.baidu.com/s/1wLug3Pvq0-bqR6Y0tiriDQ\" rel=\"nofollow\">tensorflow 1.6 gpu mac version with XLA and CC: 6.1</a></p>\n<p>Maybe in the Mac system when you call</p>\n<p>sess = tf.Session()</p>\n<p>You will get CUDA_ERROR_OUT_OF_MEMORY  , but the code will still keep running. Just ignore it.</p>\n<p>After you install the latest Keras from the GitHub, you can switch to example directory and run:</p>\n<p>python mnist_cnn.py<br>\n/Users/zhipingxu/anaconda3/lib/python3.6/site-packages/h5py/<strong>init</strong>.py:34: FutureWarning: Conversion of the second argument of issubdtype from <code>float</code> to <code>np.floating</code> is deprecated. In future, it will be treated as <code>np.float64 == np.dtype(float).type</code>.<br>\nfrom ._conv import register_converters as _register_converters<br>\nUsing TensorFlow backend.<br>\nx_train shape: (60000, 28, 28, 1)<br>\n60000 train samples<br>\n10000 test samples<br>\nTrain on 60000 samples, validate on 10000 samples<br>\nEpoch 1/12<br>\n2018-03-07 23:10:16.691546: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:859] OS X does not support NUMA - returning NUMA node zero<br>\n2018-03-07 23:10:16.691676: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 0 with properties:<br>\nname: GeForce GTX 1080 major: 6 minor: 1 memoryClockRate(GHz): 1.8225<br>\npciBusID: 0000:01:00.0<br>\ntotalMemory: 8.00GiB freeMemory: 6.39GiB<br>\n2018-03-07 23:10:16.800598: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:859] OS X does not support NUMA - returning NUMA node zero<br>\n2018-03-07 23:10:16.800690: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 1 with properties:<br>\nname: GeForce GTX 1080 major: 6 minor: 1 memoryClockRate(GHz): 1.7845<br>\npciBusID: 0000:02:00.0<br>\ntotalMemory: 8.00GiB freeMemory: 7.85GiB<br>\n2018-03-07 23:10:16.800747: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1227] Device peer to peer matrix<br>\n2018-03-07 23:10:16.800776: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1233] DMA: 0 1<br>\n2018-03-07 23:10:16.800781: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1243] 0:   Y N<br>\n2018-03-07 23:10:16.800785: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1243] 1:   N Y<br>\n2018-03-07 23:10:16.800791: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1312] Adding visible gpu devices: 0, 1<br>\n2018-03-07 23:10:17.289678: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 6169 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)<br>\n2018-03-07 23:10:17.380943: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 7588 MB memory) -&gt; physical GPU (device: 1, name: GeForce GTX 1080, pci bus id: 0000:02:00.0, compute capability: 6.1)<br>\n2018-03-07 23:10:17.381334: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 7.41G (7956931840 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\n2018-03-07 23:10:17.381483: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 6.67G (7161238016 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\n60000/60000 [==============================] - 7s 125us/step - loss: 0.2544 - acc: 0.9206 - val_loss: 0.0579 - val_acc: 0.9815<br>\nEpoch 2/12<br>\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0881 - acc: 0.9740 - val_loss: 0.0408 - val_acc: 0.9866<br>\nEpoch 3/12<br>\n60000/60000 [==============================] - 5s 77us/step - loss: 0.0675 - acc: 0.9799 - val_loss: 0.0369 - val_acc: 0.9883<br>\nEpoch 4/12<br>\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0543 - acc: 0.9835 - val_loss: 0.0299 - val_acc: 0.9894<br>\nEpoch 5/12<br>\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0478 - acc: 0.9857 - val_loss: 0.0310 - val_acc: 0.9888<br>\nEpoch 6/12<br>\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0423 - acc: 0.9871 - val_loss: 0.0269 - val_acc: 0.9907<br>\nEpoch 7/12<br>\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0370 - acc: 0.9885 - val_loss: 0.0294 - val_acc: 0.9907<br>\nEpoch 8/12<br>\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0347 - acc: 0.9892 - val_loss: 0.0265 - val_acc: 0.9920<br>\nEpoch 9/12<br>\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0309 - acc: 0.9907 - val_loss: 0.0299 - val_acc: 0.9912<br>\nEpoch 10/12<br>\n60000/60000 [==============================] - 5s 77us/step - loss: 0.0295 - acc: 0.9906 - val_loss: 0.0273 - val_acc: 0.9921<br>\nEpoch 11/12<br>\n60000/60000 [==============================] - 5s 77us/step - loss: 0.0284 - acc: 0.9915 - val_loss: 0.0282 - val_acc: 0.9910<br>\nEpoch 12/12<br>\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0278 - acc: 0.9915 - val_loss: 0.0258 - val_acc: 0.9918<br>\nTest loss: 0.025763810957170064<br>\nTest accuracy: 0.9918</p>\n<p>Everything looks fine!</p>", "body_text": "I have successfully build tensorflow-gpu for python 3.6 with compute capability 6.1 CUDNN 7 Cuda 9.1, you can download from following links (CC stands for compute capability):\ntensorflow 1.6 gpu mac version without XLA and CC: 6.1\ntensorflow 1.6 gpu mac version with XLA and CC: 3.5 5.2\ntensorflow 1.6 gpu mac version with XLA and CC: 6.1\nMaybe in the Mac system when you call\nsess = tf.Session()\nYou will get CUDA_ERROR_OUT_OF_MEMORY  , but the code will still keep running. Just ignore it.\nAfter you install the latest Keras from the GitHub, you can switch to example directory and run:\npython mnist_cnn.py\n/Users/zhipingxu/anaconda3/lib/python3.6/site-packages/h5py/init.py:34: FutureWarning: Conversion of the second argument of issubdtype from float to np.floating is deprecated. In future, it will be treated as np.float64 == np.dtype(float).type.\nfrom ._conv import register_converters as _register_converters\nUsing TensorFlow backend.\nx_train shape: (60000, 28, 28, 1)\n60000 train samples\n10000 test samples\nTrain on 60000 samples, validate on 10000 samples\nEpoch 1/12\n2018-03-07 23:10:16.691546: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:859] OS X does not support NUMA - returning NUMA node zero\n2018-03-07 23:10:16.691676: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 0 with properties:\nname: GeForce GTX 1080 major: 6 minor: 1 memoryClockRate(GHz): 1.8225\npciBusID: 0000:01:00.0\ntotalMemory: 8.00GiB freeMemory: 6.39GiB\n2018-03-07 23:10:16.800598: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:859] OS X does not support NUMA - returning NUMA node zero\n2018-03-07 23:10:16.800690: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 1 with properties:\nname: GeForce GTX 1080 major: 6 minor: 1 memoryClockRate(GHz): 1.7845\npciBusID: 0000:02:00.0\ntotalMemory: 8.00GiB freeMemory: 7.85GiB\n2018-03-07 23:10:16.800747: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1227] Device peer to peer matrix\n2018-03-07 23:10:16.800776: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1233] DMA: 0 1\n2018-03-07 23:10:16.800781: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1243] 0:   Y N\n2018-03-07 23:10:16.800785: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1243] 1:   N Y\n2018-03-07 23:10:16.800791: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1312] Adding visible gpu devices: 0, 1\n2018-03-07 23:10:17.289678: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 6169 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\n2018-03-07 23:10:17.380943: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 7588 MB memory) -> physical GPU (device: 1, name: GeForce GTX 1080, pci bus id: 0000:02:00.0, compute capability: 6.1)\n2018-03-07 23:10:17.381334: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 7.41G (7956931840 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n2018-03-07 23:10:17.381483: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 6.67G (7161238016 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n60000/60000 [==============================] - 7s 125us/step - loss: 0.2544 - acc: 0.9206 - val_loss: 0.0579 - val_acc: 0.9815\nEpoch 2/12\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0881 - acc: 0.9740 - val_loss: 0.0408 - val_acc: 0.9866\nEpoch 3/12\n60000/60000 [==============================] - 5s 77us/step - loss: 0.0675 - acc: 0.9799 - val_loss: 0.0369 - val_acc: 0.9883\nEpoch 4/12\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0543 - acc: 0.9835 - val_loss: 0.0299 - val_acc: 0.9894\nEpoch 5/12\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0478 - acc: 0.9857 - val_loss: 0.0310 - val_acc: 0.9888\nEpoch 6/12\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0423 - acc: 0.9871 - val_loss: 0.0269 - val_acc: 0.9907\nEpoch 7/12\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0370 - acc: 0.9885 - val_loss: 0.0294 - val_acc: 0.9907\nEpoch 8/12\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0347 - acc: 0.9892 - val_loss: 0.0265 - val_acc: 0.9920\nEpoch 9/12\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0309 - acc: 0.9907 - val_loss: 0.0299 - val_acc: 0.9912\nEpoch 10/12\n60000/60000 [==============================] - 5s 77us/step - loss: 0.0295 - acc: 0.9906 - val_loss: 0.0273 - val_acc: 0.9921\nEpoch 11/12\n60000/60000 [==============================] - 5s 77us/step - loss: 0.0284 - acc: 0.9915 - val_loss: 0.0282 - val_acc: 0.9910\nEpoch 12/12\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0278 - acc: 0.9915 - val_loss: 0.0258 - val_acc: 0.9918\nTest loss: 0.025763810957170064\nTest accuracy: 0.9918\nEverything looks fine!", "body": "I have successfully build tensorflow-gpu for python 3.6 with compute capability 6.1 CUDNN 7 Cuda 9.1, you can download from following links (CC stands for compute capability):\r\n\r\n[tensorflow 1.6 gpu mac version without XLA and CC: 6.1](https://pan.baidu.com/s/1R-gmwTPitrmtwPsZPAPJiQ) \r\n\r\n[tensorflow 1.6 gpu mac version with XLA and CC: 3.5 5.2](https://pan.baidu.com/s/1mxAYvOV3UkCYT9XXk4keXg)\r\n\r\n[tensorflow 1.6 gpu mac version with XLA and CC: 6.1](https://pan.baidu.com/s/1wLug3Pvq0-bqR6Y0tiriDQ)\r\n\r\nMaybe in the Mac system when you call \r\n\r\nsess = tf.Session()\r\n\r\nYou will get CUDA_ERROR_OUT_OF_MEMORY  , but the code will still keep running. Just ignore it.\r\n\r\nAfter you install the latest Keras from the GitHub, you can switch to example directory and run:\r\n\r\npython mnist_cnn.py \r\n/Users/zhipingxu/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:34: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\nUsing TensorFlow backend.\r\nx_train shape: (60000, 28, 28, 1)\r\n60000 train samples\r\n10000 test samples\r\nTrain on 60000 samples, validate on 10000 samples\r\nEpoch 1/12\r\n2018-03-07 23:10:16.691546: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:859] OS X does not support NUMA - returning NUMA node zero\r\n2018-03-07 23:10:16.691676: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 0 with properties: \r\nname: GeForce GTX 1080 major: 6 minor: 1 memoryClockRate(GHz): 1.8225\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 8.00GiB freeMemory: 6.39GiB\r\n2018-03-07 23:10:16.800598: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:859] OS X does not support NUMA - returning NUMA node zero\r\n2018-03-07 23:10:16.800690: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 1 with properties: \r\nname: GeForce GTX 1080 major: 6 minor: 1 memoryClockRate(GHz): 1.7845\r\npciBusID: 0000:02:00.0\r\ntotalMemory: 8.00GiB freeMemory: 7.85GiB\r\n2018-03-07 23:10:16.800747: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1227] Device peer to peer matrix\r\n2018-03-07 23:10:16.800776: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1233] DMA: 0 1 \r\n2018-03-07 23:10:16.800781: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1243] 0:   Y N \r\n2018-03-07 23:10:16.800785: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1243] 1:   N Y \r\n2018-03-07 23:10:16.800791: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1312] Adding visible gpu devices: 0, 1\r\n2018-03-07 23:10:17.289678: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 6169 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n2018-03-07 23:10:17.380943: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 7588 MB memory) -> physical GPU (device: 1, name: GeForce GTX 1080, pci bus id: 0000:02:00.0, compute capability: 6.1)\r\n2018-03-07 23:10:17.381334: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 7.41G (7956931840 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\n2018-03-07 23:10:17.381483: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 6.67G (7161238016 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\n60000/60000 [==============================] - 7s 125us/step - loss: 0.2544 - acc: 0.9206 - val_loss: 0.0579 - val_acc: 0.9815\r\nEpoch 2/12\r\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0881 - acc: 0.9740 - val_loss: 0.0408 - val_acc: 0.9866\r\nEpoch 3/12\r\n60000/60000 [==============================] - 5s 77us/step - loss: 0.0675 - acc: 0.9799 - val_loss: 0.0369 - val_acc: 0.9883\r\nEpoch 4/12\r\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0543 - acc: 0.9835 - val_loss: 0.0299 - val_acc: 0.9894\r\nEpoch 5/12\r\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0478 - acc: 0.9857 - val_loss: 0.0310 - val_acc: 0.9888\r\nEpoch 6/12\r\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0423 - acc: 0.9871 - val_loss: 0.0269 - val_acc: 0.9907\r\nEpoch 7/12\r\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0370 - acc: 0.9885 - val_loss: 0.0294 - val_acc: 0.9907\r\nEpoch 8/12\r\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0347 - acc: 0.9892 - val_loss: 0.0265 - val_acc: 0.9920\r\nEpoch 9/12\r\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0309 - acc: 0.9907 - val_loss: 0.0299 - val_acc: 0.9912\r\nEpoch 10/12\r\n60000/60000 [==============================] - 5s 77us/step - loss: 0.0295 - acc: 0.9906 - val_loss: 0.0273 - val_acc: 0.9921\r\nEpoch 11/12\r\n60000/60000 [==============================] - 5s 77us/step - loss: 0.0284 - acc: 0.9915 - val_loss: 0.0282 - val_acc: 0.9910\r\nEpoch 12/12\r\n60000/60000 [==============================] - 5s 78us/step - loss: 0.0278 - acc: 0.9915 - val_loss: 0.0258 - val_acc: 0.9918\r\nTest loss: 0.025763810957170064\r\nTest accuracy: 0.9918\r\n\r\nEverything looks fine!\r\n\r\n\r\n\r\n"}
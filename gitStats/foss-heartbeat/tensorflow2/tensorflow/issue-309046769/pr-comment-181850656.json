{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/181850656", "pull_request_review_id": 112546996, "id": 181850656, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTg1MDY1Ng==", "diff_hunk": "@@ -299,6 +317,26 @@ else\n   sed \"s/^RUN git clone --branch=.* --depth=1/RUN git clone --branch=${TF_DOCKER_BUILD_DEVEL_BRANCH} --depth=1/\" \\\n       \"${ORIG_DOCKERFILE}\" > \"${DOCKERFILE}\"\n \n+  # Modify the devel Dockerfile to specify the MKL bazel build parameters\n+  if [[ \"${TF_DOCKER_BUILD_TYPE}\" == \"mkl\" ]]; then\n+    if sed -i -e 's/bazel build -c opt /bazel build -c opt --config=mkl /g' \"${DOCKERFILE}\"", "path": "tensorflow/tools/docker/parameterized_docker_build.sh", "position": 65, "original_position": 56, "commit_id": "49cbab0811f201ee75bd62d8f9aa37f09a7b22da", "original_commit_id": "fdf55184fb07d2a2ac8496e83949ebe7dc5afbeb", "user": {"login": "case540", "id": 1299636, "node_id": "MDQ6VXNlcjEyOTk2MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1299636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/case540", "html_url": "https://github.com/case540", "followers_url": "https://api.github.com/users/case540/followers", "following_url": "https://api.github.com/users/case540/following{/other_user}", "gists_url": "https://api.github.com/users/case540/gists{/gist_id}", "starred_url": "https://api.github.com/users/case540/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/case540/subscriptions", "organizations_url": "https://api.github.com/users/case540/orgs", "repos_url": "https://api.github.com/users/case540/repos", "events_url": "https://api.github.com/users/case540/events{/privacy}", "received_events_url": "https://api.github.com/users/case540/received_events", "type": "User", "site_admin": false}, "body": "I was hoping there was a cleaner way to write the dockerfile before merging this. Using \"sed\" on the very specific line in the docker file feels pretty brittle.\r\n\r\nBut, Im more than fine merging this before the python impl is ready.", "created_at": "2018-04-16T19:01:05Z", "updated_at": "2018-04-20T22:13:51Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/18020#discussion_r181850656", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18020", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/181850656"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/18020#discussion_r181850656"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18020"}}, "body_html": "<p>I was hoping there was a cleaner way to write the dockerfile before merging this. Using \"sed\" on the very specific line in the docker file feels pretty brittle.</p>\n<p>But, Im more than fine merging this before the python impl is ready.</p>", "body_text": "I was hoping there was a cleaner way to write the dockerfile before merging this. Using \"sed\" on the very specific line in the docker file feels pretty brittle.\nBut, Im more than fine merging this before the python impl is ready.", "in_reply_to_id": 178733232}
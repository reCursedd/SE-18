{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/365292027", "html_url": "https://github.com/tensorflow/tensorflow/issues/9371#issuecomment-365292027", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9371", "id": 365292027, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTI5MjAyNw==", "user": {"login": "dmak", "id": 366965, "node_id": "MDQ6VXNlcjM2Njk2NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/366965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmak", "html_url": "https://github.com/dmak", "followers_url": "https://api.github.com/users/dmak/followers", "following_url": "https://api.github.com/users/dmak/following{/other_user}", "gists_url": "https://api.github.com/users/dmak/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmak/subscriptions", "organizations_url": "https://api.github.com/users/dmak/orgs", "repos_url": "https://api.github.com/users/dmak/repos", "events_url": "https://api.github.com/users/dmak/events{/privacy}", "received_events_url": "https://api.github.com/users/dmak/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-13T14:59:46Z", "updated_at": "2018-02-13T17:18:02Z", "author_association": "NONE", "body_html": "<p>Same problem with TF 1.5 for Windows when trying to load <a href=\"http://download.tensorflow.org/models/nmt/10122017/ende_gnmt_model_4_layer.zip\" rel=\"nofollow\">this model</a>. Code:</p>\n<pre><code>try (SavedModelBundle modelBundle = SavedModelBundle.load(\"D:/model/ende_gnmt_model_4_layer\")) {\n...\n}\n</code></pre>\n<p>Exception:</p>\n<pre><code>org.tensorflow.TensorFlowException: SavedModel not found in export directory: D:/model/ende_gnmt_model_4_layer\n\tat org.tensorflow.SavedModelBundle.load(Native Method)\n\tat org.tensorflow.SavedModelBundle.load(SavedModelBundle.java:39)\n</code></pre>\n<p>Directory content:</p>\n<pre><code>translate.ckpt.data-00000-of-00001\ntranslate.ckpt.index\ntranslate.ckpt.meta\n</code></pre>\n<p>I am not sure if <code>SavedModelBundle.load()</code> can load <code>ckpt</code> model at all, because <code>tensorflow/cc/saved_model/loader.cc#MaybeSavedModelDirectory(const string&amp; export_dir):297</code> checks that either <code>saved_model.pb</code> or <code>saved_model.pbtxt</code> is present in the given directory:</p>\n<pre><code>Status LoadSavedModelInternal(const SessionOptions&amp; session_options,\n                              const RunOptions&amp; run_options,\n                              const string&amp; export_dir,\n                              const std::unordered_set&lt;string&gt;&amp; tags,\n                              SavedModelBundle* const bundle) {\n  if (!MaybeSavedModelDirectory(export_dir)) {\n    return Status(error::Code::NOT_FOUND,\n                  \"SavedModel not found in export directory: \" + export_dir);\n  }\n...\nbool MaybeSavedModelDirectory(const string&amp; export_dir) {\n  const string saved_model_pb_path =\n      io::JoinPath(export_dir, kSavedModelFilenamePb);\n  const string saved_model_pbtxt_path =\n      io::JoinPath(export_dir, kSavedModelFilenamePbTxt);\n  return Env::Default()-&gt;FileExists(saved_model_pb_path).ok() ||\n         Env::Default()-&gt;FileExists(saved_model_pbtxt_path).ok();\n}\n</code></pre>", "body_text": "Same problem with TF 1.5 for Windows when trying to load this model. Code:\ntry (SavedModelBundle modelBundle = SavedModelBundle.load(\"D:/model/ende_gnmt_model_4_layer\")) {\n...\n}\n\nException:\norg.tensorflow.TensorFlowException: SavedModel not found in export directory: D:/model/ende_gnmt_model_4_layer\n\tat org.tensorflow.SavedModelBundle.load(Native Method)\n\tat org.tensorflow.SavedModelBundle.load(SavedModelBundle.java:39)\n\nDirectory content:\ntranslate.ckpt.data-00000-of-00001\ntranslate.ckpt.index\ntranslate.ckpt.meta\n\nI am not sure if SavedModelBundle.load() can load ckpt model at all, because tensorflow/cc/saved_model/loader.cc#MaybeSavedModelDirectory(const string& export_dir):297 checks that either saved_model.pb or saved_model.pbtxt is present in the given directory:\nStatus LoadSavedModelInternal(const SessionOptions& session_options,\n                              const RunOptions& run_options,\n                              const string& export_dir,\n                              const std::unordered_set<string>& tags,\n                              SavedModelBundle* const bundle) {\n  if (!MaybeSavedModelDirectory(export_dir)) {\n    return Status(error::Code::NOT_FOUND,\n                  \"SavedModel not found in export directory: \" + export_dir);\n  }\n...\nbool MaybeSavedModelDirectory(const string& export_dir) {\n  const string saved_model_pb_path =\n      io::JoinPath(export_dir, kSavedModelFilenamePb);\n  const string saved_model_pbtxt_path =\n      io::JoinPath(export_dir, kSavedModelFilenamePbTxt);\n  return Env::Default()->FileExists(saved_model_pb_path).ok() ||\n         Env::Default()->FileExists(saved_model_pbtxt_path).ok();\n}", "body": "Same problem with TF 1.5 for Windows when trying to load [this model](http://download.tensorflow.org/models/nmt/10122017/ende_gnmt_model_4_layer.zip). Code:\r\n```\r\ntry (SavedModelBundle modelBundle = SavedModelBundle.load(\"D:/model/ende_gnmt_model_4_layer\")) {\r\n...\r\n}\r\n```\r\nException:\r\n```\r\norg.tensorflow.TensorFlowException: SavedModel not found in export directory: D:/model/ende_gnmt_model_4_layer\r\n\tat org.tensorflow.SavedModelBundle.load(Native Method)\r\n\tat org.tensorflow.SavedModelBundle.load(SavedModelBundle.java:39)\r\n```\r\nDirectory content:\r\n```\r\ntranslate.ckpt.data-00000-of-00001\r\ntranslate.ckpt.index\r\ntranslate.ckpt.meta\r\n```\r\nI am not sure if `SavedModelBundle.load()` can load `ckpt` model at all, because `tensorflow/cc/saved_model/loader.cc#MaybeSavedModelDirectory(const string& export_dir):297` checks that either `saved_model.pb` or `saved_model.pbtxt` is present in the given directory:\r\n```\r\nStatus LoadSavedModelInternal(const SessionOptions& session_options,\r\n                              const RunOptions& run_options,\r\n                              const string& export_dir,\r\n                              const std::unordered_set<string>& tags,\r\n                              SavedModelBundle* const bundle) {\r\n  if (!MaybeSavedModelDirectory(export_dir)) {\r\n    return Status(error::Code::NOT_FOUND,\r\n                  \"SavedModel not found in export directory: \" + export_dir);\r\n  }\r\n...\r\nbool MaybeSavedModelDirectory(const string& export_dir) {\r\n  const string saved_model_pb_path =\r\n      io::JoinPath(export_dir, kSavedModelFilenamePb);\r\n  const string saved_model_pbtxt_path =\r\n      io::JoinPath(export_dir, kSavedModelFilenamePbTxt);\r\n  return Env::Default()->FileExists(saved_model_pb_path).ok() ||\r\n         Env::Default()->FileExists(saved_model_pbtxt_path).ok();\r\n}\r\n```"}
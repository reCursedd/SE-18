{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/390239400", "html_url": "https://github.com/tensorflow/tensorflow/issues/19371#issuecomment-390239400", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19371", "id": 390239400, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDIzOTQwMA==", "user": {"login": "alanhsieh2000", "id": 7732812, "node_id": "MDQ6VXNlcjc3MzI4MTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7732812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alanhsieh2000", "html_url": "https://github.com/alanhsieh2000", "followers_url": "https://api.github.com/users/alanhsieh2000/followers", "following_url": "https://api.github.com/users/alanhsieh2000/following{/other_user}", "gists_url": "https://api.github.com/users/alanhsieh2000/gists{/gist_id}", "starred_url": "https://api.github.com/users/alanhsieh2000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alanhsieh2000/subscriptions", "organizations_url": "https://api.github.com/users/alanhsieh2000/orgs", "repos_url": "https://api.github.com/users/alanhsieh2000/repos", "events_url": "https://api.github.com/users/alanhsieh2000/events{/privacy}", "received_events_url": "https://api.github.com/users/alanhsieh2000/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-18T15:14:36Z", "updated_at": "2018-05-18T15:14:36Z", "author_association": "NONE", "body_html": "<p>It seems CUDA 9.2.88+patch 1 doesn't add its conf file to /etc/ld.so.conf.d. Another interesting finding is the cuDNN SDK which I downloaded from nvidia website yesterday. Its version is 7.1.3. I suppose this is a wrong one. I couldn't find it on the download website any more. It's replaced by 7.1.4.<br>\nI have downloaded 7.1.4 and manually fix the ldconfig issue. The following build command could compile much more files, but still end up with another build failure.</p>\n<p><strong>Exact command to reproduce</strong>:<br>\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --verbose_failures</p>\n<p><strong>Error logs</strong>:<br>\nERROR: /home/alan/tensorflow/tensorflow/tools/api/generator/BUILD:27:1: Executing genrule //tensorflow/tools/api/generator:python_api_gen failed (Exit 1): bash failed: error executing command<br>\n(cd /home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow &amp;&amp; <br>\nexec env - <br>\nCUDA_TOOLKIT_PATH=/usr/local/cuda <br>\nCUDNN_INSTALL_PATH=/usr/local/cuda-9.2 <br>\nGCC_HOST_COMPILER_PATH=/usr/bin/gcc <br>\nLD_LIBRARY_PATH=/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64 <br>\nPATH=/home/alan/bin:/home/alan/.local/bin:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/cuda/bin <br>\nPYTHON_BIN_PATH=/usr/bin/python2.7 <br>\nPYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages <br>\nTF_CUDA_CLANG=0 <br>\nTF_CUDA_COMPUTE_CAPABILITIES=6.1,6.1 <br>\nTF_CUDA_VERSION=9.2 <br>\nTF_CUDNN_VERSION=7 <br>\nTF_NCCL_VERSION=1 <br>\nTF_NEED_CUDA=1 <br>\nTF_NEED_OPENCL_SYCL=0 <br>\n/bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/app/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/bitwise/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/compat/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/contrib/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/contrib/stat_summarizer/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/data/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/distributions/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/distributions/bijectors/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/errors/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/export/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/inputs/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/feature_column/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/gfile/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/graph_util/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/image/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/initializers/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/activations/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/densenet/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/inception_resnet_v2/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/inception_v3/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/mobilenet/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/nasnet/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/resnet50/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/vgg16/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/vgg19/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/xception/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/backend/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/callbacks/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/constraints/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/boston_housing/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/cifar10/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/cifar100/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/fashion_mnist/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/imdb/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/mnist/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/reuters/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/estimator/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/initializers/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/layers/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/losses/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/metrics/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/models/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/optimizers/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/image/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/sequence/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/text/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/regularizers/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/utils/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/wrappers/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/wrappers/scikit_learn/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/layers/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/linalg/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/logging/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/losses/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/manip/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/math/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/metrics/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/nn/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/nn/rnn_cell/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/profiler/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/python_io/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/resource_loader/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/builder/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/constants/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/loader/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/main_op/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/signature_constants/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/signature_def_utils/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/tag_constants/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/utils/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/sets/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/spectral/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/summary/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/sysconfig/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/test/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/train/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/train/queue_runner/<strong>init</strong>.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/user_ops/<strong>init</strong>.py')<br>\nTraceback (most recent call last):<br>\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/tools/api/generator/create_python_api.py\", line 26, in <br>\nfrom tensorflow.python.util import tf_decorator<br>\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/<strong>init</strong>.py\", line 63, in <br>\nfrom tensorflow.python.framework.framework_lib import *  # pylint: disable=redefined-builtin<br>\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/framework_lib.py\", line 104, in <br>\nfrom tensorflow.python.framework.importer import import_graph_def<br>\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/importer.py\", line 32, in <br>\nfrom tensorflow.python.framework import function<br>\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/function.py\", line 37, in <br>\nfrom tensorflow.python.ops import variable_scope as vs<br>\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/ops/variable_scope.py\", line 24, in <br>\nimport enum  # pylint: disable=g-bad-import-order<br>\nImportError: No module named enum<br>\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build<br>\nINFO: Elapsed time: 1.005s, Critical Path: 0.29s<br>\nINFO: 1 process, local.<br>\nFAILED: Build did NOT complete successfully</p>", "body_text": "It seems CUDA 9.2.88+patch 1 doesn't add its conf file to /etc/ld.so.conf.d. Another interesting finding is the cuDNN SDK which I downloaded from nvidia website yesterday. Its version is 7.1.3. I suppose this is a wrong one. I couldn't find it on the download website any more. It's replaced by 7.1.4.\nI have downloaded 7.1.4 and manually fix the ldconfig issue. The following build command could compile much more files, but still end up with another build failure.\nExact command to reproduce:\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --verbose_failures\nError logs:\nERROR: /home/alan/tensorflow/tensorflow/tools/api/generator/BUILD:27:1: Executing genrule //tensorflow/tools/api/generator:python_api_gen failed (Exit 1): bash failed: error executing command\n(cd /home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow && \nexec env - \nCUDA_TOOLKIT_PATH=/usr/local/cuda \nCUDNN_INSTALL_PATH=/usr/local/cuda-9.2 \nGCC_HOST_COMPILER_PATH=/usr/bin/gcc \nLD_LIBRARY_PATH=/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64 \nPATH=/home/alan/bin:/home/alan/.local/bin:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/cuda/bin \nPYTHON_BIN_PATH=/usr/bin/python2.7 \nPYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \nTF_CUDA_CLANG=0 \nTF_CUDA_COMPUTE_CAPABILITIES=6.1,6.1 \nTF_CUDA_VERSION=9.2 \nTF_CUDNN_VERSION=7 \nTF_NCCL_VERSION=1 \nTF_NEED_CUDA=1 \nTF_NEED_OPENCL_SYCL=0 \n/bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/app/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/bitwise/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/compat/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/contrib/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/contrib/stat_summarizer/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/data/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/distributions/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/distributions/bijectors/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/errors/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/export/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/inputs/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/feature_column/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/gfile/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/graph_util/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/image/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/initializers/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/activations/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/densenet/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/inception_resnet_v2/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/inception_v3/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/mobilenet/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/nasnet/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/resnet50/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/vgg16/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/vgg19/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/xception/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/backend/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/callbacks/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/constraints/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/boston_housing/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/cifar10/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/cifar100/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/fashion_mnist/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/imdb/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/mnist/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/reuters/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/estimator/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/initializers/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/layers/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/losses/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/metrics/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/models/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/optimizers/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/image/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/sequence/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/text/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/regularizers/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/utils/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/wrappers/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/wrappers/scikit_learn/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/layers/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/linalg/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/logging/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/losses/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/manip/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/math/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/metrics/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/nn/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/nn/rnn_cell/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/profiler/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/python_io/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/resource_loader/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/builder/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/constants/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/loader/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/main_op/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/signature_constants/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/signature_def_utils/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/tag_constants/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/utils/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/sets/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/spectral/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/summary/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/sysconfig/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/test/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/train/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/train/queue_runner/init.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/user_ops/init.py')\nTraceback (most recent call last):\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/tools/api/generator/create_python_api.py\", line 26, in \nfrom tensorflow.python.util import tf_decorator\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/init.py\", line 63, in \nfrom tensorflow.python.framework.framework_lib import *  # pylint: disable=redefined-builtin\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/framework_lib.py\", line 104, in \nfrom tensorflow.python.framework.importer import import_graph_def\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/importer.py\", line 32, in \nfrom tensorflow.python.framework import function\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/function.py\", line 37, in \nfrom tensorflow.python.ops import variable_scope as vs\nFile \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/ops/variable_scope.py\", line 24, in \nimport enum  # pylint: disable=g-bad-import-order\nImportError: No module named enum\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 1.005s, Critical Path: 0.29s\nINFO: 1 process, local.\nFAILED: Build did NOT complete successfully", "body": "It seems CUDA 9.2.88+patch 1 doesn't add its conf file to /etc/ld.so.conf.d. Another interesting finding is the cuDNN SDK which I downloaded from nvidia website yesterday. Its version is 7.1.3. I suppose this is a wrong one. I couldn't find it on the download website any more. It's replaced by 7.1.4. \r\nI have downloaded 7.1.4 and manually fix the ldconfig issue. The following build command could compile much more files, but still end up with another build failure.\r\n\r\n**Exact command to reproduce**:\r\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --verbose_failures\r\n\r\n**Error logs**:\r\nERROR: /home/alan/tensorflow/tensorflow/tools/api/generator/BUILD:27:1: Executing genrule //tensorflow/tools/api/generator:python_api_gen failed (Exit 1): bash failed: error executing command \r\n  (cd /home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    CUDNN_INSTALL_PATH=/usr/local/cuda-9.2 \\\r\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\r\n    LD_LIBRARY_PATH=/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64 \\\r\n    PATH=/home/alan/bin:/home/alan/.local/bin:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/cuda/bin \\\r\n    PYTHON_BIN_PATH=/usr/bin/python2.7 \\\r\n    PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\\r\n    TF_CUDA_CLANG=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1,6.1 \\\r\n    TF_CUDA_VERSION=9.2 \\\r\n    TF_CUDNN_VERSION=7 \\\r\n    TF_NCCL_VERSION=1 \\\r\n    TF_NEED_CUDA=1 \\\r\n    TF_NEED_OPENCL_SYCL=0 \\\r\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/app/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/bitwise/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/compat/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/contrib/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/contrib/stat_summarizer/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/data/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/distributions/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/distributions/bijectors/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/errors/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/export/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/estimator/inputs/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/feature_column/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/gfile/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/graph_util/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/image/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/initializers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/activations/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/densenet/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/inception_resnet_v2/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/inception_v3/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/mobilenet/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/nasnet/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/resnet50/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/vgg16/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/vgg19/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/applications/xception/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/backend/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/callbacks/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/constraints/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/boston_housing/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/cifar10/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/cifar100/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/fashion_mnist/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/imdb/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/mnist/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/datasets/reuters/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/estimator/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/initializers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/layers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/losses/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/metrics/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/models/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/optimizers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/image/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/sequence/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/preprocessing/text/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/regularizers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/utils/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/wrappers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/keras/wrappers/scikit_learn/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/layers/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/linalg/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/logging/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/losses/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/manip/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/math/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/metrics/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/nn/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/nn/rnn_cell/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/profiler/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/python_io/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/resource_loader/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/builder/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/constants/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/loader/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/main_op/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/signature_constants/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/signature_def_utils/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/tag_constants/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/saved_model/utils/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/sets/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/spectral/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/summary/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/sysconfig/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/test/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/train/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/train/queue_runner/__init__.py bazel-out/k8-opt/genfiles/tensorflow/tools/api/generator/api/user_ops/__init__.py')\r\nTraceback (most recent call last):\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/tools/api/generator/create_python_api.py\", line 26, in <module>\r\n    from tensorflow.python.util import tf_decorator\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 63, in <module>\r\n    from tensorflow.python.framework.framework_lib import *  # pylint: disable=redefined-builtin\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/framework_lib.py\", line 104, in <module>\r\n    from tensorflow.python.framework.importer import import_graph_def\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/importer.py\", line 32, in <module>\r\n    from tensorflow.python.framework import function\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/framework/function.py\", line 37, in <module>\r\n    from tensorflow.python.ops import variable_scope as vs\r\n  File \"/home/alan/.cache/bazel/_bazel_alan/2190512db8dfcdc4b6b4ea3fdcfc66e7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/tools/api/generator/create_python_api.runfiles/org_tensorflow/tensorflow/python/ops/variable_scope.py\", line 24, in <module>\r\n    import enum  # pylint: disable=g-bad-import-order\r\nImportError: No module named enum\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 1.005s, Critical Path: 0.29s\r\nINFO: 1 process, local.\r\nFAILED: Build did NOT complete successfully"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/352117873", "html_url": "https://github.com/tensorflow/tensorflow/issues/14662#issuecomment-352117873", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14662", "id": 352117873, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjExNzg3Mw==", "user": {"login": "OscarDPan", "id": 10855426, "node_id": "MDQ6VXNlcjEwODU1NDI2", "avatar_url": "https://avatars0.githubusercontent.com/u/10855426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OscarDPan", "html_url": "https://github.com/OscarDPan", "followers_url": "https://api.github.com/users/OscarDPan/followers", "following_url": "https://api.github.com/users/OscarDPan/following{/other_user}", "gists_url": "https://api.github.com/users/OscarDPan/gists{/gist_id}", "starred_url": "https://api.github.com/users/OscarDPan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OscarDPan/subscriptions", "organizations_url": "https://api.github.com/users/OscarDPan/orgs", "repos_url": "https://api.github.com/users/OscarDPan/repos", "events_url": "https://api.github.com/users/OscarDPan/events{/privacy}", "received_events_url": "https://api.github.com/users/OscarDPan/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-15T21:36:47Z", "updated_at": "2017-12-15T21:57:14Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20959853\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/drpngx\">@drpngx</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> Some updates:<br>\nFound the direct cause of the hanging problem that happened right after the first sess.run(). It's because the there are some workers indefinitely waiting for the connections to other servers to be established. (\"CreateSession still waiting for response from worker....\"). The amount of bad connections was random, and this did not only happened in some particular hosts.</p>\n<p>This happened quite often when I have large dataset (5TB+) and 300+ servers.</p>\n<p>My guess was, with that large amount of servers, if I declare the clusterSpec as what TF suggested: (PS:[list of all ps ports], workers:[list of all worker ports]), there are way too many unnecessary connections for TF or the system to handle (I don't have network/OS savvy so not sure if I am using the correct words).</p>", "body_text": "@drpngx @mrry Some updates:\nFound the direct cause of the hanging problem that happened right after the first sess.run(). It's because the there are some workers indefinitely waiting for the connections to other servers to be established. (\"CreateSession still waiting for response from worker....\"). The amount of bad connections was random, and this did not only happened in some particular hosts.\nThis happened quite often when I have large dataset (5TB+) and 300+ servers.\nMy guess was, with that large amount of servers, if I declare the clusterSpec as what TF suggested: (PS:[list of all ps ports], workers:[list of all worker ports]), there are way too many unnecessary connections for TF or the system to handle (I don't have network/OS savvy so not sure if I am using the correct words).", "body": "@drpngx @mrry Some updates:\r\nFound the direct cause of the hanging problem that happened right after the first sess.run(). It's because the there are some workers indefinitely waiting for the connections to other servers to be established. (\"CreateSession still waiting for response from worker....\"). The amount of bad connections was random, and this did not only happened in some particular hosts.\r\n\r\nThis happened quite often when I have large dataset (5TB+) and 300+ servers.\r\n\r\nMy guess was, with that large amount of servers, if I declare the clusterSpec as what TF suggested: (PS:[list of all ps ports], workers:[list of all worker ports]), there are way too many unnecessary connections for TF or the system to handle (I don't have network/OS savvy so not sure if I am using the correct words)."}
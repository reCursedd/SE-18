{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9002", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9002/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9002/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9002/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9002", "id": 219737609, "node_id": "MDU6SXNzdWUyMTk3Mzc2MDk=", "number": 9002, "title": "Unable to compile TF, CUBLAS_GEMM_ALGO? not declared in scope", "user": {"login": "rohitgirdhar", "id": 1893429, "node_id": "MDQ6VXNlcjE4OTM0Mjk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1893429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohitgirdhar", "html_url": "https://github.com/rohitgirdhar", "followers_url": "https://api.github.com/users/rohitgirdhar/followers", "following_url": "https://api.github.com/users/rohitgirdhar/following{/other_user}", "gists_url": "https://api.github.com/users/rohitgirdhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohitgirdhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohitgirdhar/subscriptions", "organizations_url": "https://api.github.com/users/rohitgirdhar/orgs", "repos_url": "https://api.github.com/users/rohitgirdhar/repos", "events_url": "https://api.github.com/users/rohitgirdhar/events{/privacy}", "received_events_url": "https://api.github.com/users/rohitgirdhar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2017-04-05T22:47:48Z", "updated_at": "2017-11-04T14:41:47Z", "closed_at": "2017-04-07T00:09:18Z", "author_association": "CONTRIBUTOR", "body_html": "<ul>\n<li><em>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)?</em>: no</li>\n<li><em>TensorFlow installed from (source or binary)?</em>: source</li>\n<li><em>TensorFlow version</em>: 1.1.0rc1 (master as of April 5, 2017)</li>\n<li><em>Bazel version (if compiling from source)</em>: 0.4.5</li>\n<li><em>CUDA/cuDNN version</em>: 8/5.1</li>\n<li><em>GPU Model and Memory</em>: Titan X (PASCAL) 12GB</li>\n<li><em>Exact command to reproduce</em>: <code>bazel build -c opt --copt=-mavx --copt=-mfma --copt=-mfpmath=both --config=cuda -k //tensorflow/tools/pip_package:build_pip_package</code></li>\n</ul>\n<p>Here's the compile config:</p>\n<pre lang=\"txt\"><code>$ ./configure \nPlease specify the location of python. [Default is /path/to/anaconda2/bin/python]: \nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \nDo you wish to use jemalloc as the malloc implementation? [Y/n] n\njemalloc disabled\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \nNo Hadoop File System support will be enabled for TensorFlow\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] \nNo XLA support will be enabled for TensorFlow\nFound possible Python library paths:\n/path/to/python/site-packages\nPlease input the desired Python library path to use.  Default is [/path/to/python/site-packages]\n/path/to/python/site-packages\nDo you wish to build TensorFlow with OpenCL support? [y/N] \nNo OpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N] y\nCUDA support will be enabled for TensorFlow\nDo you want to use clang as CUDA compiler? [y/N] \nnvcc will be used as CUDA compiler\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /opt/gcc/4.9.2/bin/gcc]: \nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: \nPlease specify the location where CUDA  toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /opt/cuda-8.0\nPlease specify the cuDNN version you want to use. [Leave empty to use system default]: \nPlease specify the location where cuDNN  library is installed. Refer to README.md for more details. [Default is /opt/cuda-8.0]: /opt/cudnn-8.0\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: 3.5,5.2,6.1\nWarning: ignoring LD_PRELOAD in environment.\n............\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\nConfiguration finished\n\n</code></pre>\n<h3>Describe the problem clearly</h3>\n<p>CentOS 6.6, compiling using instructions from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116236573\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/110\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/110/hovercard?comment_id=274586644&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/110#issuecomment-274586644\">#110 (comment)</a> gives an error as mentioned later.<br>\nI have been able to compile TF upto 1.0.1 successfully on the same machine.<br>\nAlso, same issue was mentioned in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"217760140\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8790\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8790/hovercard?comment_id=290094265&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/8790#issuecomment-290094265\">#8790 (comment)</a>, but I'm not sure if the OP opened an issue</p>\n<h3>Source Code / Logs</h3>\n<pre lang=\"txt\"><code>ERROR: /path/to/tensorflow/stream_executor/BUILD:39:1: Couldn't build file tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.o: C++ compila\ntion of rule '//tensorflow/stream_executor:cuda_platform' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D\n_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 118 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\ntensorflow/stream_executor/cuda/cuda_blas.cc: In member function 'virtual bool perftools::gputools::cuda::CUDABlas::GetBlasGemmAlgorithms(std::vector&lt;long long int&gt;*)':\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:9: error: 'CUBLAS_GEMM_ALGO5' was not declared in this scope\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\n         ^\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:28: error: 'CUBLAS_GEMM_ALGO6' was not declared in this scope\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\n                            ^\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:47: error: 'CUBLAS_GEMM_ALGO7' was not declared in this scope\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\n                                               ^\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:64: error: unable to deduce 'std::initializer_list&lt;_Tp&gt;&amp;&amp;' from '{CUBLAS_GEMM_DFALT, CUBLAS_GEMM_ALGO0, CUBLAS_GEMM_ALGO1, CUBLAS_GEMM_ALGO2, CUBLAS_GEMM_ALGO3, CUBLAS_GEMM_ALGO4, &lt;express\nion error&gt;, &lt;expression error&gt;, &lt;expression error&gt;}'\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\n</code></pre>", "body_text": "Have I written custom code (as opposed to using a stock example script provided in TensorFlow)?: no\nTensorFlow installed from (source or binary)?: source\nTensorFlow version: 1.1.0rc1 (master as of April 5, 2017)\nBazel version (if compiling from source): 0.4.5\nCUDA/cuDNN version: 8/5.1\nGPU Model and Memory: Titan X (PASCAL) 12GB\nExact command to reproduce: bazel build -c opt --copt=-mavx --copt=-mfma --copt=-mfpmath=both --config=cuda -k //tensorflow/tools/pip_package:build_pip_package\n\nHere's the compile config:\n$ ./configure \nPlease specify the location of python. [Default is /path/to/anaconda2/bin/python]: \nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \nDo you wish to use jemalloc as the malloc implementation? [Y/n] n\njemalloc disabled\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \nNo Hadoop File System support will be enabled for TensorFlow\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] \nNo XLA support will be enabled for TensorFlow\nFound possible Python library paths:\n/path/to/python/site-packages\nPlease input the desired Python library path to use.  Default is [/path/to/python/site-packages]\n/path/to/python/site-packages\nDo you wish to build TensorFlow with OpenCL support? [y/N] \nNo OpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N] y\nCUDA support will be enabled for TensorFlow\nDo you want to use clang as CUDA compiler? [y/N] \nnvcc will be used as CUDA compiler\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /opt/gcc/4.9.2/bin/gcc]: \nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: \nPlease specify the location where CUDA  toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /opt/cuda-8.0\nPlease specify the cuDNN version you want to use. [Leave empty to use system default]: \nPlease specify the location where cuDNN  library is installed. Refer to README.md for more details. [Default is /opt/cuda-8.0]: /opt/cudnn-8.0\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: 3.5,5.2,6.1\nWarning: ignoring LD_PRELOAD in environment.\n............\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\nConfiguration finished\n\n\nDescribe the problem clearly\nCentOS 6.6, compiling using instructions from #110 (comment) gives an error as mentioned later.\nI have been able to compile TF upto 1.0.1 successfully on the same machine.\nAlso, same issue was mentioned in #8790 (comment), but I'm not sure if the OP opened an issue\nSource Code / Logs\nERROR: /path/to/tensorflow/stream_executor/BUILD:39:1: Couldn't build file tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.o: C++ compila\ntion of rule '//tensorflow/stream_executor:cuda_platform' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D\n_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 118 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\ntensorflow/stream_executor/cuda/cuda_blas.cc: In member function 'virtual bool perftools::gputools::cuda::CUDABlas::GetBlasGemmAlgorithms(std::vector<long long int>*)':\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:9: error: 'CUBLAS_GEMM_ALGO5' was not declared in this scope\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\n         ^\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:28: error: 'CUBLAS_GEMM_ALGO6' was not declared in this scope\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\n                            ^\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:47: error: 'CUBLAS_GEMM_ALGO7' was not declared in this scope\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\n                                               ^\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:64: error: unable to deduce 'std::initializer_list<_Tp>&&' from '{CUBLAS_GEMM_DFALT, CUBLAS_GEMM_ALGO0, CUBLAS_GEMM_ALGO1, CUBLAS_GEMM_ALGO2, CUBLAS_GEMM_ALGO3, CUBLAS_GEMM_ALGO4, <express\nion error>, <expression error>, <expression error>}'\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {", "body": "- *Have I written custom code (as opposed to using a stock example script provided in TensorFlow)?*: no\r\n- *TensorFlow installed from (source or binary)?*: source\r\n- *TensorFlow version*: 1.1.0rc1 (master as of April 5, 2017)\r\n- *Bazel version (if compiling from source)*: 0.4.5\r\n- *CUDA/cuDNN version*: 8/5.1\r\n- *GPU Model and Memory*: Titan X (PASCAL) 12GB\r\n- *Exact command to reproduce*: `bazel build -c opt --copt=-mavx --copt=-mfma --copt=-mfpmath=both --config=cuda -k //tensorflow/tools/pip_package:build_pip_package`\r\n\r\nHere's the compile config:\r\n\r\n```txt\r\n$ ./configure \r\nPlease specify the location of python. [Default is /path/to/anaconda2/bin/python]: \r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \r\nDo you wish to use jemalloc as the malloc implementation? [Y/n] n\r\njemalloc disabled\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \r\nNo Google Cloud Platform support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \r\nNo Hadoop File System support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] \r\nNo XLA support will be enabled for TensorFlow\r\nFound possible Python library paths:\r\n/path/to/python/site-packages\r\nPlease input the desired Python library path to use.  Default is [/path/to/python/site-packages]\r\n/path/to/python/site-packages\r\nDo you wish to build TensorFlow with OpenCL support? [y/N] \r\nNo OpenCL support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with CUDA support? [y/N] y\r\nCUDA support will be enabled for TensorFlow\r\nDo you want to use clang as CUDA compiler? [y/N] \r\nnvcc will be used as CUDA compiler\r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /opt/gcc/4.9.2/bin/gcc]: \r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: \r\nPlease specify the location where CUDA  toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /opt/cuda-8.0\r\nPlease specify the cuDNN version you want to use. [Leave empty to use system default]: \r\nPlease specify the location where cuDNN  library is installed. Refer to README.md for more details. [Default is /opt/cuda-8.0]: /opt/cudnn-8.0\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size.\r\n[Default is: \"3.5,5.2\"]: 3.5,5.2,6.1\r\nWarning: ignoring LD_PRELOAD in environment.\r\n............\r\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\r\nConfiguration finished\r\n\r\n```\r\n\r\n### Describe the problem clearly\r\nCentOS 6.6, compiling using instructions from https://github.com/tensorflow/tensorflow/issues/110#issuecomment-274586644 gives an error as mentioned later.\r\nI have been able to compile TF upto 1.0.1 successfully on the same machine.\r\nAlso, same issue was mentioned in https://github.com/tensorflow/tensorflow/issues/8790#issuecomment-290094265, but I'm not sure if the OP opened an issue \r\n\r\n### Source Code / Logs\r\n\r\n```txt\r\nERROR: /path/to/tensorflow/stream_executor/BUILD:39:1: Couldn't build file tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.o: C++ compila\r\ntion of rule '//tensorflow/stream_executor:cuda_platform' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D\r\n_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 118 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\ntensorflow/stream_executor/cuda/cuda_blas.cc: In member function 'virtual bool perftools::gputools::cuda::CUDABlas::GetBlasGemmAlgorithms(std::vector<long long int>*)':\r\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:9: error: 'CUBLAS_GEMM_ALGO5' was not declared in this scope\r\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\r\n         ^\r\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:28: error: 'CUBLAS_GEMM_ALGO6' was not declared in this scope\r\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\r\n                            ^\r\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:47: error: 'CUBLAS_GEMM_ALGO7' was not declared in this scope\r\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\r\n                                               ^\r\ntensorflow/stream_executor/cuda/cuda_blas.cc:1916:64: error: unable to deduce 'std::initializer_list<_Tp>&&' from '{CUBLAS_GEMM_DFALT, CUBLAS_GEMM_ALGO0, CUBLAS_GEMM_ALGO1, CUBLAS_GEMM_ALGO2, CUBLAS_GEMM_ALGO3, CUBLAS_GEMM_ALGO4, <express\r\nion error>, <expression error>, <expression error>}'\r\n         CUBLAS_GEMM_ALGO5, CUBLAS_GEMM_ALGO6, CUBLAS_GEMM_ALGO7}) {\r\n```"}
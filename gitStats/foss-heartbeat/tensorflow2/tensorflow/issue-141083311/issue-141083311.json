{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1519", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1519/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1519/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1519/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1519", "id": 141083311, "node_id": "MDU6SXNzdWUxNDEwODMzMTE=", "number": 1519, "title": "Number of broadcasting dimensions is limited", "user": {"login": "sjperkins", "id": 3530212, "node_id": "MDQ6VXNlcjM1MzAyMTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3530212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjperkins", "html_url": "https://github.com/sjperkins", "followers_url": "https://api.github.com/users/sjperkins/followers", "following_url": "https://api.github.com/users/sjperkins/following{/other_user}", "gists_url": "https://api.github.com/users/sjperkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjperkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjperkins/subscriptions", "organizations_url": "https://api.github.com/users/sjperkins/orgs", "repos_url": "https://api.github.com/users/sjperkins/repos", "events_url": "https://api.github.com/users/sjperkins/events{/privacy}", "received_events_url": "https://api.github.com/users/sjperkins/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "benoitsteiner", "id": 6969686, "node_id": "MDQ6VXNlcjY5Njk2ODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6969686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benoitsteiner", "html_url": "https://github.com/benoitsteiner", "followers_url": "https://api.github.com/users/benoitsteiner/followers", "following_url": "https://api.github.com/users/benoitsteiner/following{/other_user}", "gists_url": "https://api.github.com/users/benoitsteiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/benoitsteiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benoitsteiner/subscriptions", "organizations_url": "https://api.github.com/users/benoitsteiner/orgs", "repos_url": "https://api.github.com/users/benoitsteiner/repos", "events_url": "https://api.github.com/users/benoitsteiner/events{/privacy}", "received_events_url": "https://api.github.com/users/benoitsteiner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benoitsteiner", "id": 6969686, "node_id": "MDQ6VXNlcjY5Njk2ODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6969686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benoitsteiner", "html_url": "https://github.com/benoitsteiner", "followers_url": "https://api.github.com/users/benoitsteiner/followers", "following_url": "https://api.github.com/users/benoitsteiner/following{/other_user}", "gists_url": "https://api.github.com/users/benoitsteiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/benoitsteiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benoitsteiner/subscriptions", "organizations_url": "https://api.github.com/users/benoitsteiner/orgs", "repos_url": "https://api.github.com/users/benoitsteiner/repos", "events_url": "https://api.github.com/users/benoitsteiner/events{/privacy}", "received_events_url": "https://api.github.com/users/benoitsteiner/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2016-03-15T20:01:27Z", "updated_at": "2017-01-24T00:10:12Z", "closed_at": "2017-01-24T00:10:12Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04.4</p>\n<p>If installed from sources, provide the commit hash: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/f92e338b178f75b0e7fc79aedc00680a49a982ac/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/f92e338b178f75b0e7fc79aedc00680a49a982ac\"><tt>f92e338</tt></a></p>\n<h3>Steps to reproduce</h3>\n<p>Running this script:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\nshape_1 <span class=\"pl-k\">=</span> (<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">20</span>, <span class=\"pl-c1\">30</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">50</span>)\nshape_2 <span class=\"pl-k\">=</span> (<span class=\"pl-c1\">30</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">30</span>, <span class=\"pl-c1\">20</span>, <span class=\"pl-c1\">50</span>)\n\nA <span class=\"pl-k\">=</span> tf.Variable(tf.random_normal(shape_1))\nB <span class=\"pl-k\">=</span> tf.Variable(tf.random_normal(shape_2))\n\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> S:\n    S.run(tf.initialize_all_variables())\n    C <span class=\"pl-k\">=</span> S.run(A<span class=\"pl-k\">+</span>B)</pre></div>\n<p>produces</p>\n<div class=\"highlight highlight-source-python\"><pre>tensorflow.python.framework.errors.UnimplementedError: Broadcast between [<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">20</span>,<span class=\"pl-c1\">30</span>,<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">50</span>] <span class=\"pl-k\">and</span> [<span class=\"pl-c1\">30</span>,<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">30</span>,<span class=\"pl-c1\">20</span>,<span class=\"pl-c1\">50</span>] <span class=\"pl-k\">is</span> <span class=\"pl-k\">not</span> supported yet.</pre></div>\n<h3>What did you try?</h3>\n<p>Reducing the tensor ranks results in success.</p>\n<div class=\"highlight highlight-source-python\"><pre>shape_1 <span class=\"pl-k\">=</span> (<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">20</span>, <span class=\"pl-c1\">30</span>)\nshape_2 <span class=\"pl-k\">=</span> (<span class=\"pl-c1\">30</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">30</span>)</pre></div>\n<h3>Logs or other output that would be helpful</h3>\n<div class=\"highlight highlight-source-python\"><pre>Traceback (most recent call last):\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tf_broadcast_issue.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">11</span>, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n    C <span class=\"pl-k\">=</span> S.run(A<span class=\"pl-k\">+</span>B)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">332</span>, <span class=\"pl-k\">in</span> run\n    result <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>._run(<span class=\"pl-c1\">None</span>, fetches, feed_dict, options_ptr, run_outputs_ptr)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">536</span>, <span class=\"pl-k\">in</span> _run\n    feed_dict_string, options, run_outputs)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">598</span>, <span class=\"pl-k\">in</span> _do_run\n    target_list, options, run_outputs)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">620</span>, <span class=\"pl-k\">in</span> _do_call\n    e.code)\ntensorflow.python.framework.errors.UnimplementedError: Broadcast between [<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">20</span>,<span class=\"pl-c1\">30</span>,<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">50</span>] <span class=\"pl-k\">and</span> [<span class=\"pl-c1\">30</span>,<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">30</span>,<span class=\"pl-c1\">20</span>,<span class=\"pl-c1\">50</span>] <span class=\"pl-k\">is</span> <span class=\"pl-k\">not</span> supported yet.\n     [[Node: add = Add[T=<span class=\"pl-c1\">DT_FLOAT</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/cpu:0<span class=\"pl-pds\">\"</span></span>](Variable<span class=\"pl-k\">/</span>read, Variable_1<span class=\"pl-k\">/</span>read)]]\nCaused by op <span class=\"pl-s\"><span class=\"pl-k\">u</span><span class=\"pl-pds\">'</span>add<span class=\"pl-pds\">'</span></span>, defined at:\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tf_broadcast_issue.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">11</span>, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n    C <span class=\"pl-k\">=</span> S.run(A<span class=\"pl-k\">+</span>B)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/variables.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">544</span>, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span><span class=\"pl-k\">lambda</span>&gt;\n    <span class=\"pl-c1\">setattr</span>(Variable, operator, <span class=\"pl-k\">lambda</span> <span class=\"pl-smi\">a</span>, <span class=\"pl-smi\">b</span>: Variable._RunOp(operator, a, b))\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/variables.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">559</span>, <span class=\"pl-k\">in</span> _RunOp\n    <span class=\"pl-k\">return</span> <span class=\"pl-c1\">getattr</span>(ops.Tensor, operator)(a._AsTensor(), b)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/math_ops.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">502</span>, <span class=\"pl-k\">in</span> binary_op_wrapper\n    <span class=\"pl-k\">return</span> func(x, y, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span>name)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/gen_math_ops.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">44</span>, <span class=\"pl-k\">in</span> add\n    <span class=\"pl-k\">return</span> _op_def_lib.apply_op(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Add<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-v\">x</span><span class=\"pl-k\">=</span>x, <span class=\"pl-v\">y</span><span class=\"pl-k\">=</span>y, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span>name)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/op_def_library.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">655</span>, <span class=\"pl-k\">in</span> apply_op\n    op_def<span class=\"pl-k\">=</span>op_def)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/framework/ops.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">2102</span>, <span class=\"pl-k\">in</span> create_op\n    original_op<span class=\"pl-k\">=</span><span class=\"pl-c1\">self</span>._default_original_op, op_def<span class=\"pl-k\">=</span>op_def)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/framework/ops.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">1129</span>, <span class=\"pl-k\">in</span> <span class=\"pl-c1\">__init__</span>\n    <span class=\"pl-c1\">self</span>._traceback <span class=\"pl-k\">=</span> _extract_stack()</pre></div>", "body_text": "Environment info\nOperating System: Ubuntu 14.04.4\nIf installed from sources, provide the commit hash: f92e338\nSteps to reproduce\nRunning this script:\nimport tensorflow as tf\n\nshape_1 = (1, 20, 30, 1, 50)\nshape_2 = (30, 1, 30, 20, 50)\n\nA = tf.Variable(tf.random_normal(shape_1))\nB = tf.Variable(tf.random_normal(shape_2))\n\nwith tf.Session() as S:\n    S.run(tf.initialize_all_variables())\n    C = S.run(A+B)\nproduces\ntensorflow.python.framework.errors.UnimplementedError: Broadcast between [1,20,30,1,50] and [30,1,30,20,50] is not supported yet.\nWhat did you try?\nReducing the tensor ranks results in success.\nshape_1 = (1, 20, 30)\nshape_2 = (30, 1, 30)\nLogs or other output that would be helpful\nTraceback (most recent call last):\n  File \"tf_broadcast_issue.py\", line 11, in <module>\n    C = S.run(A+B)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 332, in run\n    result = self._run(None, fetches, feed_dict, options_ptr, run_outputs_ptr)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 536, in _run\n    feed_dict_string, options, run_outputs)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 598, in _do_run\n    target_list, options, run_outputs)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 620, in _do_call\n    e.code)\ntensorflow.python.framework.errors.UnimplementedError: Broadcast between [1,20,30,1,50] and [30,1,30,20,50] is not supported yet.\n     [[Node: add = Add[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable/read, Variable_1/read)]]\nCaused by op u'add', defined at:\n  File \"tf_broadcast_issue.py\", line 11, in <module>\n    C = S.run(A+B)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/variables.py\", line 544, in <lambda>\n    setattr(Variable, operator, lambda a, b: Variable._RunOp(operator, a, b))\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/variables.py\", line 559, in _RunOp\n    return getattr(ops.Tensor, operator)(a._AsTensor(), b)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/math_ops.py\", line 502, in binary_op_wrapper\n    return func(x, y, name=name)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/gen_math_ops.py\", line 44, in add\n    return _op_def_lib.apply_op(\"Add\", x=x, y=y, name=name)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/op_def_library.py\", line 655, in apply_op\n    op_def=op_def)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/framework/ops.py\", line 2102, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/framework/ops.py\", line 1129, in __init__\n    self._traceback = _extract_stack()", "body": "### Environment info\n\nOperating System: Ubuntu 14.04.4\n\nIf installed from sources, provide the commit hash: f92e338b178f75b0e7fc79aedc00680a49a982ac\n### Steps to reproduce\n\nRunning this script:\n\n``` python\nimport tensorflow as tf\n\nshape_1 = (1, 20, 30, 1, 50)\nshape_2 = (30, 1, 30, 20, 50)\n\nA = tf.Variable(tf.random_normal(shape_1))\nB = tf.Variable(tf.random_normal(shape_2))\n\nwith tf.Session() as S:\n    S.run(tf.initialize_all_variables())\n    C = S.run(A+B)\n```\n\nproduces\n\n``` python\ntensorflow.python.framework.errors.UnimplementedError: Broadcast between [1,20,30,1,50] and [30,1,30,20,50] is not supported yet.\n```\n### What did you try?\n\nReducing the tensor ranks results in success.\n\n``` python\nshape_1 = (1, 20, 30)\nshape_2 = (30, 1, 30)\n```\n### Logs or other output that would be helpful\n\n``` python\nTraceback (most recent call last):\n  File \"tf_broadcast_issue.py\", line 11, in <module>\n    C = S.run(A+B)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 332, in run\n    result = self._run(None, fetches, feed_dict, options_ptr, run_outputs_ptr)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 536, in _run\n    feed_dict_string, options, run_outputs)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 598, in _do_run\n    target_list, options, run_outputs)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 620, in _do_call\n    e.code)\ntensorflow.python.framework.errors.UnimplementedError: Broadcast between [1,20,30,1,50] and [30,1,30,20,50] is not supported yet.\n     [[Node: add = Add[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable/read, Variable_1/read)]]\nCaused by op u'add', defined at:\n  File \"tf_broadcast_issue.py\", line 11, in <module>\n    C = S.run(A+B)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/variables.py\", line 544, in <lambda>\n    setattr(Variable, operator, lambda a, b: Variable._RunOp(operator, a, b))\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/variables.py\", line 559, in _RunOp\n    return getattr(ops.Tensor, operator)(a._AsTensor(), b)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/math_ops.py\", line 502, in binary_op_wrapper\n    return func(x, y, name=name)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/gen_math_ops.py\", line 44, in add\n    return _op_def_lib.apply_op(\"Add\", x=x, y=y, name=name)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/ops/op_def_library.py\", line 655, in apply_op\n    op_def=op_def)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/framework/ops.py\", line 2102, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/sperkins/work/ska/code/tensorflow/_python_build/tensorflow/python/framework/ops.py\", line 1129, in __init__\n    self._traceback = _extract_stack()\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18092", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18092/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18092/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18092/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18092", "id": 309842317, "node_id": "MDU6SXNzdWUzMDk4NDIzMTc=", "number": 18092, "title": "Distributed TensorFlow got error message with the MPI collective Ops units test", "user": {"login": "jianyinglang", "id": 30543987, "node_id": "MDQ6VXNlcjMwNTQzOTg3", "avatar_url": "https://avatars1.githubusercontent.com/u/30543987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianyinglang", "html_url": "https://github.com/jianyinglang", "followers_url": "https://api.github.com/users/jianyinglang/followers", "following_url": "https://api.github.com/users/jianyinglang/following{/other_user}", "gists_url": "https://api.github.com/users/jianyinglang/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianyinglang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianyinglang/subscriptions", "organizations_url": "https://api.github.com/users/jianyinglang/orgs", "repos_url": "https://api.github.com/users/jianyinglang/repos", "events_url": "https://api.github.com/users/jianyinglang/events{/privacy}", "received_events_url": "https://api.github.com/users/jianyinglang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-03-29T17:37:51Z", "updated_at": "2018-08-25T22:58:24Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>Have I written custom code:  None<br>\nOS Platform and Distribution: Linux Ubuntu 16.04<br>\nOpen MPI version: 3.0.0<br>\nTensorFlow installed from: b'v1.7.0-rc1-816-g1712002ad0' 1.7.0-rc1<br>\nBazel version: 0.11.1<br>\nPython version: 3.5.2<br>\nGCC version: 6.3.0<br>\nCUDA/cuDNN version: N/A<br>\nGPU model and memory: N/A<br>\nExact command to reproduce: <code>mpirun -np 1 python mpi_allreduce_test.py</code> under directory <code>tensorflow/tensorflow/contrib/mpi_collectives</code></p>\n<p>I ran the unit test under directory <code>tensorflow/tensorflow/contrib/mpi_collectives</code> and the run command is <code>mpirun -np 1 python mpi_allreduce_test.py</code> . I got the following error message:<br>\nCould someone please help me take a look at this? Thanks!</p>\n<pre><code>WARNING:tensorflow:From /ec/fm/disks/nrv_algo_home01/langjian/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/datasets/base.py:198: retry (from tensorflow.contrib.learn.python.learn.datasets.base) is deprecated and will be removed in a future version.\nInstructions for updating:\nUse the retry module or similar alternatives.\nTraceback (most recent call last):\n  File \"mpi_allreduce_test.py\", line 23, in &lt;module&gt;\n    import tensorflow.contrib.mpi_collectives as mpi\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/mpi_collectives/__init__.py\", line 128, in &lt;module&gt;\n    from tensorflow.contrib.mpi_collectives.python.ops.mpi_ops import init\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/mpi_collectives/python/ops/mpi_ops.py\", line 29, in &lt;module&gt;\n    resource_loader.get_path_to_datafile('_mpi_ops.so'))\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/util/loader.py\", line 55, in load_op_library\n    ret = load_library.load_op_library(path)\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/python/framework/load_library.py\", line 58, in load_op_library\n    lib_handle = py_tf.TF_LoadLibrary(library_filename, status)\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 516, in __exit__\n    c_api.TF_GetCode(self.status.status))\ntensorflow.python.framework.errors_impl.NotFoundError: $HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/mpi_collectives/python/ops/_mpi_ops.so: undefined symbol: _ZN10tensorflow7contrib15mpi_collectives7MPITypeIiEEP15ompi_datatype_tv\n-------------------------------------------------------\nPrimary job  terminated normally, but 1 process returned\na non-zero exit code. Per user-direction, the job has been aborted.\n-------------------------------------------------------\n--------------------------------------------------------------------------\nmpirun detected that one or more processes exited with non-zero status, thus causing\nthe job to be terminated. The first process to do so was:\n\n  Process name: [[18657,1],0]\n  Exit code:    1\n--------------------------------------------------------------------------\n</code></pre>", "body_text": "Have I written custom code:  None\nOS Platform and Distribution: Linux Ubuntu 16.04\nOpen MPI version: 3.0.0\nTensorFlow installed from: b'v1.7.0-rc1-816-g1712002ad0' 1.7.0-rc1\nBazel version: 0.11.1\nPython version: 3.5.2\nGCC version: 6.3.0\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce: mpirun -np 1 python mpi_allreduce_test.py under directory tensorflow/tensorflow/contrib/mpi_collectives\nI ran the unit test under directory tensorflow/tensorflow/contrib/mpi_collectives and the run command is mpirun -np 1 python mpi_allreduce_test.py . I got the following error message:\nCould someone please help me take a look at this? Thanks!\nWARNING:tensorflow:From /ec/fm/disks/nrv_algo_home01/langjian/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/datasets/base.py:198: retry (from tensorflow.contrib.learn.python.learn.datasets.base) is deprecated and will be removed in a future version.\nInstructions for updating:\nUse the retry module or similar alternatives.\nTraceback (most recent call last):\n  File \"mpi_allreduce_test.py\", line 23, in <module>\n    import tensorflow.contrib.mpi_collectives as mpi\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/mpi_collectives/__init__.py\", line 128, in <module>\n    from tensorflow.contrib.mpi_collectives.python.ops.mpi_ops import init\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/mpi_collectives/python/ops/mpi_ops.py\", line 29, in <module>\n    resource_loader.get_path_to_datafile('_mpi_ops.so'))\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/util/loader.py\", line 55, in load_op_library\n    ret = load_library.load_op_library(path)\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/python/framework/load_library.py\", line 58, in load_op_library\n    lib_handle = py_tf.TF_LoadLibrary(library_filename, status)\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 516, in __exit__\n    c_api.TF_GetCode(self.status.status))\ntensorflow.python.framework.errors_impl.NotFoundError: $HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/mpi_collectives/python/ops/_mpi_ops.so: undefined symbol: _ZN10tensorflow7contrib15mpi_collectives7MPITypeIiEEP15ompi_datatype_tv\n-------------------------------------------------------\nPrimary job  terminated normally, but 1 process returned\na non-zero exit code. Per user-direction, the job has been aborted.\n-------------------------------------------------------\n--------------------------------------------------------------------------\nmpirun detected that one or more processes exited with non-zero status, thus causing\nthe job to be terminated. The first process to do so was:\n\n  Process name: [[18657,1],0]\n  Exit code:    1\n--------------------------------------------------------------------------", "body": "Have I written custom code:  None\r\nOS Platform and Distribution: Linux Ubuntu 16.04\r\nOpen MPI version: 3.0.0\r\nTensorFlow installed from: b'v1.7.0-rc1-816-g1712002ad0' 1.7.0-rc1\r\nBazel version: 0.11.1 \r\nPython version: 3.5.2\r\nGCC version: 6.3.0\r\nCUDA/cuDNN version: N/A\r\nGPU model and memory: N/A\r\nExact command to reproduce: `mpirun -np 1 python mpi_allreduce_test.py` under directory `tensorflow/tensorflow/contrib/mpi_collectives`\r\n\r\nI ran the unit test under directory `tensorflow/tensorflow/contrib/mpi_collectives` and the run command is `mpirun -np 1 python mpi_allreduce_test.py` . I got the following error message:\r\nCould someone please help me take a look at this? Thanks!\r\n\r\n```\r\nWARNING:tensorflow:From /ec/fm/disks/nrv_algo_home01/langjian/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/datasets/base.py:198: retry (from tensorflow.contrib.learn.python.learn.datasets.base) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse the retry module or similar alternatives.\r\nTraceback (most recent call last):\r\n  File \"mpi_allreduce_test.py\", line 23, in <module>\r\n    import tensorflow.contrib.mpi_collectives as mpi\r\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/mpi_collectives/__init__.py\", line 128, in <module>\r\n    from tensorflow.contrib.mpi_collectives.python.ops.mpi_ops import init\r\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/mpi_collectives/python/ops/mpi_ops.py\", line 29, in <module>\r\n    resource_loader.get_path_to_datafile('_mpi_ops.so'))\r\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/util/loader.py\", line 55, in load_op_library\r\n    ret = load_library.load_op_library(path)\r\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/python/framework/load_library.py\", line 58, in load_op_library\r\n    lib_handle = py_tf.TF_LoadLibrary(library_filename, status)\r\n  File \"$HOME/.tf_17/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 516, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.NotFoundError: $HOME/.tf_17/lib/python3.5/site-packages/tensorflow/contrib/mpi_collectives/python/ops/_mpi_ops.so: undefined symbol: _ZN10tensorflow7contrib15mpi_collectives7MPITypeIiEEP15ompi_datatype_tv\r\n-------------------------------------------------------\r\nPrimary job  terminated normally, but 1 process returned\r\na non-zero exit code. Per user-direction, the job has been aborted.\r\n-------------------------------------------------------\r\n--------------------------------------------------------------------------\r\nmpirun detected that one or more processes exited with non-zero status, thus causing\r\nthe job to be terminated. The first process to do so was:\r\n\r\n  Process name: [[18657,1],0]\r\n  Exit code:    1\r\n--------------------------------------------------------------------------\r\n```\r\n"}
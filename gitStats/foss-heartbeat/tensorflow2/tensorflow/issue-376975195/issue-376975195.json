{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23467", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23467/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23467/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23467/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23467", "id": 376975195, "node_id": "MDU6SXNzdWUzNzY5NzUxOTU=", "number": 23467, "title": "TensorRT crashes on converting a simple convolutional graph", "user": {"login": "ethereon", "id": 337985, "node_id": "MDQ6VXNlcjMzNzk4NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/337985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ethereon", "html_url": "https://github.com/ethereon", "followers_url": "https://api.github.com/users/ethereon/followers", "following_url": "https://api.github.com/users/ethereon/following{/other_user}", "gists_url": "https://api.github.com/users/ethereon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ethereon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ethereon/subscriptions", "organizations_url": "https://api.github.com/users/ethereon/orgs", "repos_url": "https://api.github.com/users/ethereon/repos", "events_url": "https://api.github.com/users/ethereon/events{/privacy}", "received_events_url": "https://api.github.com/users/ethereon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-02T21:35:20Z", "updated_at": "2018-11-10T09:34:46Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>TensorRT crashes during conversion of a trivial graph with the following error:</p>\n<pre><code>python: customWinogradConvActLayer.cpp:48:\nnvinfer1::cudnn::WinogradConvActLayer::WinogradConvActLayer(const string&amp;, const EngineTensors&amp;, const EngineTensors&amp;, const nvinfer1::ConvolutionParameters&amp;, bool, const std::vector&lt;float&gt;&amp;): \nAssertion `matchNbDims(inputs[0], outputs[0]) &amp;&amp; (inputs.size() == 1 || inputs[1].extent == outputs[0].extent)' failed.\n</code></pre>\n<p>The following minimal example reproduces this issue:</p>\n<pre><code>import tensorflow as tf\nfrom tensorflow.contrib import tensorrt\n\ninput = tf.placeholder(tf.float32, shape=(1, 32, 32, 3))\nweights = tf.ones([3, 3, 3, 8], tf.float32)\noutput = tf.nn.conv2d(input, weights, strides=[1, 1, 1, 1], padding='SAME')\noutput = output + tf.ones((8,), dtype=tf.float32)\noutput = tf.nn.relu(output, name='output')\n\ntensorrt.create_inference_graph(\n    input_graph_def=tf.get_default_graph().as_graph_def(), outputs=[output.op.name])\n</code></pre>\n<p>I've been able to reproduce this issue on multiple machines with similar configurations.</p>\n<p>A few things to note:</p>\n<ul>\n<li>The addition and the terminal operation are critical for the issue to manifest</li>\n<li>The <code>relu</code> can be replaced with most other ops (eg: <code>tf.identity</code>) and the issue still manifests</li>\n</ul>\n<p>A variant of this bug was previously reported here: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"364704216\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/22577\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/22577/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/22577\">#22577</a> (and was closed without resolution).</p>\n<p><strong>System information</strong></p>\n<ul>\n<li>OS Platform and Distribution: Ubuntu 16.04</li>\n<li>TensorFlow installed from (source or binary): binary</li>\n<li>TensorFlow version (use command below): 1.11.0</li>\n<li>Python version: 2.7.12</li>\n<li>CUDA/cuDNN version: 9.0/7</li>\n<li>GPU model and memory: GTX 1080 Ti</li>\n</ul>", "body_text": "TensorRT crashes during conversion of a trivial graph with the following error:\npython: customWinogradConvActLayer.cpp:48:\nnvinfer1::cudnn::WinogradConvActLayer::WinogradConvActLayer(const string&, const EngineTensors&, const EngineTensors&, const nvinfer1::ConvolutionParameters&, bool, const std::vector<float>&): \nAssertion `matchNbDims(inputs[0], outputs[0]) && (inputs.size() == 1 || inputs[1].extent == outputs[0].extent)' failed.\n\nThe following minimal example reproduces this issue:\nimport tensorflow as tf\nfrom tensorflow.contrib import tensorrt\n\ninput = tf.placeholder(tf.float32, shape=(1, 32, 32, 3))\nweights = tf.ones([3, 3, 3, 8], tf.float32)\noutput = tf.nn.conv2d(input, weights, strides=[1, 1, 1, 1], padding='SAME')\noutput = output + tf.ones((8,), dtype=tf.float32)\noutput = tf.nn.relu(output, name='output')\n\ntensorrt.create_inference_graph(\n    input_graph_def=tf.get_default_graph().as_graph_def(), outputs=[output.op.name])\n\nI've been able to reproduce this issue on multiple machines with similar configurations.\nA few things to note:\n\nThe addition and the terminal operation are critical for the issue to manifest\nThe relu can be replaced with most other ops (eg: tf.identity) and the issue still manifests\n\nA variant of this bug was previously reported here: #22577 (and was closed without resolution).\nSystem information\n\nOS Platform and Distribution: Ubuntu 16.04\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): 1.11.0\nPython version: 2.7.12\nCUDA/cuDNN version: 9.0/7\nGPU model and memory: GTX 1080 Ti", "body": "TensorRT crashes during conversion of a trivial graph with the following error:\r\n\r\n```\r\npython: customWinogradConvActLayer.cpp:48:\r\nnvinfer1::cudnn::WinogradConvActLayer::WinogradConvActLayer(const string&, const EngineTensors&, const EngineTensors&, const nvinfer1::ConvolutionParameters&, bool, const std::vector<float>&): \r\nAssertion `matchNbDims(inputs[0], outputs[0]) && (inputs.size() == 1 || inputs[1].extent == outputs[0].extent)' failed.\r\n```\r\n\r\nThe following minimal example reproduces this issue:\r\n\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.contrib import tensorrt\r\n\r\ninput = tf.placeholder(tf.float32, shape=(1, 32, 32, 3))\r\nweights = tf.ones([3, 3, 3, 8], tf.float32)\r\noutput = tf.nn.conv2d(input, weights, strides=[1, 1, 1, 1], padding='SAME')\r\noutput = output + tf.ones((8,), dtype=tf.float32)\r\noutput = tf.nn.relu(output, name='output')\r\n\r\ntensorrt.create_inference_graph(\r\n    input_graph_def=tf.get_default_graph().as_graph_def(), outputs=[output.op.name])\r\n```\r\n\r\nI've been able to reproduce this issue on multiple machines with similar configurations.\r\n\r\nA few things to note:\r\n\r\n- The addition and the terminal operation are critical for the issue to manifest\r\n- The `relu` can be replaced with most other ops (eg: `tf.identity`) and the issue still manifests\r\n\r\nA variant of this bug was previously reported here: https://github.com/tensorflow/tensorflow/issues/22577 (and was closed without resolution).\r\n\r\n**System information**\r\n- OS Platform and Distribution: Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.11.0\r\n- Python version: 2.7.12\r\n- CUDA/cuDNN version: 9.0/7\r\n- GPU model and memory: GTX 1080 Ti"}
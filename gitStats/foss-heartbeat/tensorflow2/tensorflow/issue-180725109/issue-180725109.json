{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4736", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4736/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4736/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4736/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4736", "id": 180725109, "node_id": "MDU6SXNzdWUxODA3MjUxMDk=", "number": 4736, "title": "Build Failing Compiling with CUDA 8.0, CUDNN 5.1.5, Bazel 0.3.1", "user": {"login": "derekwisong", "id": 3837988, "node_id": "MDQ6VXNlcjM4Mzc5ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/3837988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/derekwisong", "html_url": "https://github.com/derekwisong", "followers_url": "https://api.github.com/users/derekwisong/followers", "following_url": "https://api.github.com/users/derekwisong/following{/other_user}", "gists_url": "https://api.github.com/users/derekwisong/gists{/gist_id}", "starred_url": "https://api.github.com/users/derekwisong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/derekwisong/subscriptions", "organizations_url": "https://api.github.com/users/derekwisong/orgs", "repos_url": "https://api.github.com/users/derekwisong/repos", "events_url": "https://api.github.com/users/derekwisong/events{/privacy}", "received_events_url": "https://api.github.com/users/derekwisong/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-10-03T19:28:18Z", "updated_at": "2016-10-04T22:42:14Z", "closed_at": "2016-10-04T22:42:14Z", "author_association": "NONE", "body_html": "<p>Building Tensorflow with Bazel 0.3.1 + CUDA 8.0 + CUDNN 5.1.5 and latest GIT is failing</p>\n<p><code># bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures</code></p>\n<p>Here is the end of the error.</p>\n<pre><code>external/local_config_cuda/cuda/include/math_functions.h(8897): error: cannot overload functions distinguished by return type alone\n\nexternal/local_config_cuda/cuda/include/math_functions.h(8901): error: cannot overload functions distinguished by return type alone\n\n./tensorflow/core/framework/allocator.h(154): warning: missing return statement at end of non-void function \"tensorflow::Allocator::RequestedS\nize\"\n\n2 errors detected in the compilation of \"/tmp/tmpxft_000027b0_00000000-7_spacetobatch_functor_gpu.cu.cpp1.ii\".\nERROR: /root/src/tensorflow/tensorflow/core/kernels/BUILD:1673:1: output 'tensorflow/core/kernels/_objs/batch_space_ops_gpu/tensorflow/core/ke\nrnels/spacetobatch_functor_gpu.cu.pic.o' was not created.\nERROR: /root/src/tensorflow/tensorflow/core/kernels/BUILD:1673:1: not all outputs were created.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n</code></pre>\n<h3>Environment info</h3>\n<p><strong>Graphics card capability 3.0</strong></p>\n<p><code># lspci -v | grep -i nvidia</code></p>\n<pre><code>01:00.0 VGA compatible controller: NVIDIA Corporation GK104 [GeForce GTX 760] (rev a1) (prog-if 00 [VGA controller])\n        Kernel driver in use: nvidia\n        Kernel modules: nouveau, nvidia_drm, nvidia\n01:00.1 Audio device: NVIDIA Corporation GK104 HDMI Audio Controller (rev a1)\n</code></pre>\n<p><code># git rev-parse HEAD</code><br>\n<code>3d35376a66cde4f3e614c746d3c8708d15caa1b5</code></p>\n<p><code># bazel version</code></p>\n<pre><code>Build label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Sun Oct 2 01:11:55 2016 (1475370715)\nBuild timestamp: 1475370715\nBuild timestamp as int: 1475370715\n</code></pre>\n<p><strong>CUDNN 5.1.5</strong></p>\n<pre><code>ls -l /opt/cuda/lib64 | grep cudnn\nlrwxrwxrwx 1 root root        13 Oct  1 20:55 libcudnn.so -&gt; libcudnn.so.5\nlrwxrwxrwx 1 root root        17 Oct  1 20:55 libcudnn.so.5 -&gt; libcudnn.so.5.1.5\n-rwxr-xr-x 1 root root  79337624 Oct  1 20:55 libcudnn.so.5.1.5\n-rw-r--r-- 1 root root  69756172 Oct  1 20:55 libcudnn_static.a`\n</code></pre>\n<p><strong>CUDA 8.0.44</strong></p>\n<pre><code># ls -l /opt/cuda/lib64 | grep libcuda\n-rw-r--r-- 1 root root    558720 Sep 28 17:41 libcudadevrt.a\nlrwxrwxrwx 1 root root        16 Sep 28 17:41 libcudart.so -&gt; libcudart.so.8.0\nlrwxrwxrwx 1 root root        19 Sep 28 17:41 libcudart.so.8.0 -&gt; libcudart.so.8.0.44\n-rwxr-xr-x 1 root root    415432 Sep 28 17:41 libcudart.so.8.0.44\n-rw-r--r-- 1 root root    775162 Sep 28 17:41 libcudart_static.a\n</code></pre>\n<p><strong>GCC 6.2.1</strong></p>\n<pre><code># gcc --version\ngcc (GCC) 6.2.1 20160830\nCopyright (C) 2016 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n<h3>Other Issues Experienced</h3>\n<p>First compile error was described here, i used <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3593753\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/junyer\">@junyer</a>'s proposed solution<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"166794712\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/google/re2/issues/102\" data-hovercard-type=\"issue\" data-hovercard-url=\"/google/re2/issues/102/hovercard\" href=\"https://github.com/google/re2/issues/102\">google/re2#102</a></p>", "body_text": "Building Tensorflow with Bazel 0.3.1 + CUDA 8.0 + CUDNN 5.1.5 and latest GIT is failing\n# bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures\nHere is the end of the error.\nexternal/local_config_cuda/cuda/include/math_functions.h(8897): error: cannot overload functions distinguished by return type alone\n\nexternal/local_config_cuda/cuda/include/math_functions.h(8901): error: cannot overload functions distinguished by return type alone\n\n./tensorflow/core/framework/allocator.h(154): warning: missing return statement at end of non-void function \"tensorflow::Allocator::RequestedS\nize\"\n\n2 errors detected in the compilation of \"/tmp/tmpxft_000027b0_00000000-7_spacetobatch_functor_gpu.cu.cpp1.ii\".\nERROR: /root/src/tensorflow/tensorflow/core/kernels/BUILD:1673:1: output 'tensorflow/core/kernels/_objs/batch_space_ops_gpu/tensorflow/core/ke\nrnels/spacetobatch_functor_gpu.cu.pic.o' was not created.\nERROR: /root/src/tensorflow/tensorflow/core/kernels/BUILD:1673:1: not all outputs were created.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n\nEnvironment info\nGraphics card capability 3.0\n# lspci -v | grep -i nvidia\n01:00.0 VGA compatible controller: NVIDIA Corporation GK104 [GeForce GTX 760] (rev a1) (prog-if 00 [VGA controller])\n        Kernel driver in use: nvidia\n        Kernel modules: nouveau, nvidia_drm, nvidia\n01:00.1 Audio device: NVIDIA Corporation GK104 HDMI Audio Controller (rev a1)\n\n# git rev-parse HEAD\n3d35376a66cde4f3e614c746d3c8708d15caa1b5\n# bazel version\nBuild label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Sun Oct 2 01:11:55 2016 (1475370715)\nBuild timestamp: 1475370715\nBuild timestamp as int: 1475370715\n\nCUDNN 5.1.5\nls -l /opt/cuda/lib64 | grep cudnn\nlrwxrwxrwx 1 root root        13 Oct  1 20:55 libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root        17 Oct  1 20:55 libcudnn.so.5 -> libcudnn.so.5.1.5\n-rwxr-xr-x 1 root root  79337624 Oct  1 20:55 libcudnn.so.5.1.5\n-rw-r--r-- 1 root root  69756172 Oct  1 20:55 libcudnn_static.a`\n\nCUDA 8.0.44\n# ls -l /opt/cuda/lib64 | grep libcuda\n-rw-r--r-- 1 root root    558720 Sep 28 17:41 libcudadevrt.a\nlrwxrwxrwx 1 root root        16 Sep 28 17:41 libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root        19 Sep 28 17:41 libcudart.so.8.0 -> libcudart.so.8.0.44\n-rwxr-xr-x 1 root root    415432 Sep 28 17:41 libcudart.so.8.0.44\n-rw-r--r-- 1 root root    775162 Sep 28 17:41 libcudart_static.a\n\nGCC 6.2.1\n# gcc --version\ngcc (GCC) 6.2.1 20160830\nCopyright (C) 2016 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nOther Issues Experienced\nFirst compile error was described here, i used @junyer's proposed solution\ngoogle/re2#102", "body": "Building Tensorflow with Bazel 0.3.1 + CUDA 8.0 + CUDNN 5.1.5 and latest GIT is failing\n\n`# bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures`\n\nHere is the end of the error.\n\n```\nexternal/local_config_cuda/cuda/include/math_functions.h(8897): error: cannot overload functions distinguished by return type alone\n\nexternal/local_config_cuda/cuda/include/math_functions.h(8901): error: cannot overload functions distinguished by return type alone\n\n./tensorflow/core/framework/allocator.h(154): warning: missing return statement at end of non-void function \"tensorflow::Allocator::RequestedS\nize\"\n\n2 errors detected in the compilation of \"/tmp/tmpxft_000027b0_00000000-7_spacetobatch_functor_gpu.cu.cpp1.ii\".\nERROR: /root/src/tensorflow/tensorflow/core/kernels/BUILD:1673:1: output 'tensorflow/core/kernels/_objs/batch_space_ops_gpu/tensorflow/core/ke\nrnels/spacetobatch_functor_gpu.cu.pic.o' was not created.\nERROR: /root/src/tensorflow/tensorflow/core/kernels/BUILD:1673:1: not all outputs were created.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n```\n### Environment info\n\n**Graphics card capability 3.0**\n\n`# lspci -v | grep -i nvidia`\n\n```\n01:00.0 VGA compatible controller: NVIDIA Corporation GK104 [GeForce GTX 760] (rev a1) (prog-if 00 [VGA controller])\n        Kernel driver in use: nvidia\n        Kernel modules: nouveau, nvidia_drm, nvidia\n01:00.1 Audio device: NVIDIA Corporation GK104 HDMI Audio Controller (rev a1)\n```\n\n`# git rev-parse HEAD`\n`3d35376a66cde4f3e614c746d3c8708d15caa1b5`\n\n`# bazel version`\n\n```\nBuild label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Sun Oct 2 01:11:55 2016 (1475370715)\nBuild timestamp: 1475370715\nBuild timestamp as int: 1475370715\n```\n\n**CUDNN 5.1.5**\n\n```\nls -l /opt/cuda/lib64 | grep cudnn\nlrwxrwxrwx 1 root root        13 Oct  1 20:55 libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root        17 Oct  1 20:55 libcudnn.so.5 -> libcudnn.so.5.1.5\n-rwxr-xr-x 1 root root  79337624 Oct  1 20:55 libcudnn.so.5.1.5\n-rw-r--r-- 1 root root  69756172 Oct  1 20:55 libcudnn_static.a`\n```\n\n**CUDA 8.0.44**\n\n```\n# ls -l /opt/cuda/lib64 | grep libcuda\n-rw-r--r-- 1 root root    558720 Sep 28 17:41 libcudadevrt.a\nlrwxrwxrwx 1 root root        16 Sep 28 17:41 libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root        19 Sep 28 17:41 libcudart.so.8.0 -> libcudart.so.8.0.44\n-rwxr-xr-x 1 root root    415432 Sep 28 17:41 libcudart.so.8.0.44\n-rw-r--r-- 1 root root    775162 Sep 28 17:41 libcudart_static.a\n```\n\n**GCC 6.2.1**\n\n```\n# gcc --version\ngcc (GCC) 6.2.1 20160830\nCopyright (C) 2016 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n```\n### Other Issues Experienced\n\nFirst compile error was described here, i used @junyer's proposed solution\nhttps://github.com/google/re2/issues/102\n"}
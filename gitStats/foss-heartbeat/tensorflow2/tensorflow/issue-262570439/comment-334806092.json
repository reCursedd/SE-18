{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/334806092", "html_url": "https://github.com/tensorflow/tensorflow/issues/13473#issuecomment-334806092", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13473", "id": 334806092, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDgwNjA5Mg==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-06T16:34:20Z", "updated_at": "2017-10-06T16:34:20Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">You'll get the same behavior even if you set a fixed seed:\n\na = tf.random_uniform([3], seed=5)\n\n for i in range(4):\n    tf.set_random_seed(2017)\n    print(s.run(a))\n   ...:\n[ 0.045017    0.30386245  0.43822038]\n[ 0.04852033  0.07889724  0.8716917 ]\n[ 0.98431134  0.39827144  0.79930592]\n[ 0.92832315  0.6284616   0.49420452]\n\nThe behavior that you want would actually require recreating the graph:\n\nfor i in range(4):\n    tf.reset_default_graph()\n    tf.set_random_seed(2017)\n    a = tf.random_uniform([3], seed=5)\n    print(tf.Session().run(a))\n\n[ 0.045017    0.30386245  0.43822038]\n[ 0.045017    0.30386245  0.43822038]\n[ 0.045017    0.30386245  0.43822038]\n[ 0.045017    0.30386245  0.43822038]\n\nand while it's true there's currently no way to set a seed for a\nStochasticTensor, that's not the crux of the problem here.  See the\ndocumentation here\n&lt;<a href=\"https://www.tensorflow.org/api_docs/python/tf/set_random_seed\">https://www.tensorflow.org/api_docs/python/tf/set_random_seed</a>&gt;.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Fri, Oct 6, 2017 at 8:40 AM, Yaroslav Bulatov ***@***.***&gt; wrote:\n cc <a class=\"user-mention\" href=\"https://github.com/ebrevdo\">@ebrevdo</a> &lt;<a href=\"https://github.com/ebrevdo\">https://github.com/ebrevdo</a>&gt; -- how are you supposed to fix\n the seed of stochastic tensors?\n\n Here's a self-contained example:\n\n import os\n os.environ['CUDA_VISIBLE_DEVICES']=''\n import tensorflow as tf\n import numpy as np\n from tensorflow.contrib.bayesflow.python.ops import stochastic_tensor_impl\n from tensorflow.python.ops import distributions\n st = stochastic_tensor_impl\n\n tf.reset_default_graph()\n\n outputs = st.StochasticTensor(distributions.bernoulli.Bernoulli(probs= [[0.5]*10], dtype=tf.int32))\n outputs = tf.reshape(outputs, shape=(-1, ))\n\n sess = tf.Session()\n sess.run(tf.global_variables_initializer())\n\n for i in range(10):\n   tf.set_random_seed(2017)\n   print(sess.run(outputs))\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"262570439\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/13473\" href=\"https://github.com/tensorflow/tensorflow/issues/13473#issuecomment-334791518\">#13473 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABtimwh4Bj_ZMtZFKUJo4qwiy_-68hcAks5spknqgaJpZM4PstOQ\">https://github.com/notifications/unsubscribe-auth/ABtimwh4Bj_ZMtZFKUJo4qwiy_-68hcAks5spknqgaJpZM4PstOQ</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "You'll get the same behavior even if you set a fixed seed:\n\na = tf.random_uniform([3], seed=5)\n\n for i in range(4):\n    tf.set_random_seed(2017)\n    print(s.run(a))\n   ...:\n[ 0.045017    0.30386245  0.43822038]\n[ 0.04852033  0.07889724  0.8716917 ]\n[ 0.98431134  0.39827144  0.79930592]\n[ 0.92832315  0.6284616   0.49420452]\n\nThe behavior that you want would actually require recreating the graph:\n\nfor i in range(4):\n    tf.reset_default_graph()\n    tf.set_random_seed(2017)\n    a = tf.random_uniform([3], seed=5)\n    print(tf.Session().run(a))\n\n[ 0.045017    0.30386245  0.43822038]\n[ 0.045017    0.30386245  0.43822038]\n[ 0.045017    0.30386245  0.43822038]\n[ 0.045017    0.30386245  0.43822038]\n\nand while it's true there's currently no way to set a seed for a\nStochasticTensor, that's not the crux of the problem here.  See the\ndocumentation here\n<https://www.tensorflow.org/api_docs/python/tf/set_random_seed>.\n\u2026\nOn Fri, Oct 6, 2017 at 8:40 AM, Yaroslav Bulatov ***@***.***> wrote:\n cc @ebrevdo <https://github.com/ebrevdo> -- how are you supposed to fix\n the seed of stochastic tensors?\n\n Here's a self-contained example:\n\n import os\n os.environ['CUDA_VISIBLE_DEVICES']=''\n import tensorflow as tf\n import numpy as np\n from tensorflow.contrib.bayesflow.python.ops import stochastic_tensor_impl\n from tensorflow.python.ops import distributions\n st = stochastic_tensor_impl\n\n tf.reset_default_graph()\n\n outputs = st.StochasticTensor(distributions.bernoulli.Bernoulli(probs= [[0.5]*10], dtype=tf.int32))\n outputs = tf.reshape(outputs, shape=(-1, ))\n\n sess = tf.Session()\n sess.run(tf.global_variables_initializer())\n\n for i in range(10):\n   tf.set_random_seed(2017)\n   print(sess.run(outputs))\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#13473 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABtimwh4Bj_ZMtZFKUJo4qwiy_-68hcAks5spknqgaJpZM4PstOQ>\n .", "body": "You'll get the same behavior even if you set a fixed seed:\n\na = tf.random_uniform([3], seed=5)\n\n for i in range(4):\n    tf.set_random_seed(2017)\n    print(s.run(a))\n   ...:\n[ 0.045017    0.30386245  0.43822038]\n[ 0.04852033  0.07889724  0.8716917 ]\n[ 0.98431134  0.39827144  0.79930592]\n[ 0.92832315  0.6284616   0.49420452]\n\nThe behavior that you want would actually require recreating the graph:\n\nfor i in range(4):\n    tf.reset_default_graph()\n    tf.set_random_seed(2017)\n    a = tf.random_uniform([3], seed=5)\n    print(tf.Session().run(a))\n\n[ 0.045017    0.30386245  0.43822038]\n[ 0.045017    0.30386245  0.43822038]\n[ 0.045017    0.30386245  0.43822038]\n[ 0.045017    0.30386245  0.43822038]\n\nand while it's true there's currently no way to set a seed for a\nStochasticTensor, that's not the crux of the problem here.  See the\ndocumentation here\n<https://www.tensorflow.org/api_docs/python/tf/set_random_seed>.\n\n\n\nOn Fri, Oct 6, 2017 at 8:40 AM, Yaroslav Bulatov <notifications@github.com>\nwrote:\n\n> cc @ebrevdo <https://github.com/ebrevdo> -- how are you supposed to fix\n> the seed of stochastic tensors?\n>\n> Here's a self-contained example:\n>\n> import os\n> os.environ['CUDA_VISIBLE_DEVICES']=''\n> import tensorflow as tf\n> import numpy as np\n> from tensorflow.contrib.bayesflow.python.ops import stochastic_tensor_impl\n> from tensorflow.python.ops import distributions\n> st = stochastic_tensor_impl\n>\n> tf.reset_default_graph()\n>\n> outputs = st.StochasticTensor(distributions.bernoulli.Bernoulli(probs= [[0.5]*10], dtype=tf.int32))\n> outputs = tf.reshape(outputs, shape=(-1, ))\n>\n> sess = tf.Session()\n> sess.run(tf.global_variables_initializer())\n>\n> for i in range(10):\n>   tf.set_random_seed(2017)\n>   print(sess.run(outputs))\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/13473#issuecomment-334791518>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtimwh4Bj_ZMtZFKUJo4qwiy_-68hcAks5spknqgaJpZM4PstOQ>\n> .\n>\n"}
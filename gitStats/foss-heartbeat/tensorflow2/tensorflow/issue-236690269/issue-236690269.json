{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10802", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10802/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10802/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10802/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10802", "id": 236690269, "node_id": "MDU6SXNzdWUyMzY2OTAyNjk=", "number": 10802, "title": "Decoding images in a given shape from TF records", "user": {"login": "peri044", "id": 10511428, "node_id": "MDQ6VXNlcjEwNTExNDI4", "avatar_url": "https://avatars3.githubusercontent.com/u/10511428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peri044", "html_url": "https://github.com/peri044", "followers_url": "https://api.github.com/users/peri044/followers", "following_url": "https://api.github.com/users/peri044/following{/other_user}", "gists_url": "https://api.github.com/users/peri044/gists{/gist_id}", "starred_url": "https://api.github.com/users/peri044/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peri044/subscriptions", "organizations_url": "https://api.github.com/users/peri044/orgs", "repos_url": "https://api.github.com/users/peri044/repos", "events_url": "https://api.github.com/users/peri044/events{/privacy}", "received_events_url": "https://api.github.com/users/peri044/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-17T23:35:53Z", "updated_at": "2017-06-20T18:35:23Z", "closed_at": "2017-06-18T14:19:02Z", "author_association": "NONE", "body_html": "<p>I am trying to read images from TFrecords file. The images vary in shapes. After reading, I want to preserve their shape which is why I pass the height, width and depth parameters appropriately. But the code just doesn't print anything after the set_shape command. The sess.run() calls do not respond. I initialized the session in the main function and passed the object. Is there a way to get the values of height,w,d tensors so that I can pass it to set_shape? How do I fix this? Any suggestions are welcome. Thanks in advance</p>\n<p>`def read_and_decode(sess,filename_queue):<br>\nreader = tf.TFRecordReader()<br>\n_, serialized_example = reader.read(filename_queue)<br>\nfeatures = tf.parse_single_example(<br>\nserialized_example,<br>\n# Defaults are not specified since both keys are required.<br>\nfeatures={<br>\n'height': tf.FixedLenFeature([], tf.int64),<br>\n'width': tf.FixedLenFeature([], tf.int64),<br>\n'depth': tf.FixedLenFeature([], tf.int64),<br>\n'image_raw': tf.FixedLenFeature([], tf.string),<br>\n'label': tf.FixedLenFeature([], tf.int64),<br>\n})</p>\n<p>image = tf.decode_raw(features['image_raw'], tf.uint8)<br>\nimage.set_shape([sess.run(features['height']),sess.run(features['width']),sess.run(features['depth'])])`</p>", "body_text": "I am trying to read images from TFrecords file. The images vary in shapes. After reading, I want to preserve their shape which is why I pass the height, width and depth parameters appropriately. But the code just doesn't print anything after the set_shape command. The sess.run() calls do not respond. I initialized the session in the main function and passed the object. Is there a way to get the values of height,w,d tensors so that I can pass it to set_shape? How do I fix this? Any suggestions are welcome. Thanks in advance\n`def read_and_decode(sess,filename_queue):\nreader = tf.TFRecordReader()\n_, serialized_example = reader.read(filename_queue)\nfeatures = tf.parse_single_example(\nserialized_example,\n# Defaults are not specified since both keys are required.\nfeatures={\n'height': tf.FixedLenFeature([], tf.int64),\n'width': tf.FixedLenFeature([], tf.int64),\n'depth': tf.FixedLenFeature([], tf.int64),\n'image_raw': tf.FixedLenFeature([], tf.string),\n'label': tf.FixedLenFeature([], tf.int64),\n})\nimage = tf.decode_raw(features['image_raw'], tf.uint8)\nimage.set_shape([sess.run(features['height']),sess.run(features['width']),sess.run(features['depth'])])`", "body": "I am trying to read images from TFrecords file. The images vary in shapes. After reading, I want to preserve their shape which is why I pass the height, width and depth parameters appropriately. But the code just doesn't print anything after the set_shape command. The sess.run() calls do not respond. I initialized the session in the main function and passed the object. Is there a way to get the values of height,w,d tensors so that I can pass it to set_shape? How do I fix this? Any suggestions are welcome. Thanks in advance\r\n\r\n`def read_and_decode(sess,filename_queue):\r\n  reader = tf.TFRecordReader()\r\n  _, serialized_example = reader.read(filename_queue)\r\n  features = tf.parse_single_example(\r\n      serialized_example,\r\n      # Defaults are not specified since both keys are required.\r\n      features={\r\n          'height': tf.FixedLenFeature([], tf.int64),\r\n          'width': tf.FixedLenFeature([], tf.int64),\r\n          'depth': tf.FixedLenFeature([], tf.int64),\r\n          'image_raw': tf.FixedLenFeature([], tf.string),\r\n          'label': tf.FixedLenFeature([], tf.int64),\r\n      })\r\n\r\n  image = tf.decode_raw(features['image_raw'], tf.uint8)\r\n  image.set_shape([sess.run(features['height']),sess.run(features['width']),sess.run(features['depth'])])`\r\n\r\n"}
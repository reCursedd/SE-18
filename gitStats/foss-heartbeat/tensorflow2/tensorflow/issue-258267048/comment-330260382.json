{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/330260382", "html_url": "https://github.com/tensorflow/tensorflow/issues/13090#issuecomment-330260382", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13090", "id": 330260382, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDI2MDM4Mg==", "user": {"login": "justinshapiro", "id": 14143046, "node_id": "MDQ6VXNlcjE0MTQzMDQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/14143046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justinshapiro", "html_url": "https://github.com/justinshapiro", "followers_url": "https://api.github.com/users/justinshapiro/followers", "following_url": "https://api.github.com/users/justinshapiro/following{/other_user}", "gists_url": "https://api.github.com/users/justinshapiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/justinshapiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justinshapiro/subscriptions", "organizations_url": "https://api.github.com/users/justinshapiro/orgs", "repos_url": "https://api.github.com/users/justinshapiro/repos", "events_url": "https://api.github.com/users/justinshapiro/events{/privacy}", "received_events_url": "https://api.github.com/users/justinshapiro/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-18T15:29:28Z", "updated_at": "2017-09-18T15:35:20Z", "author_association": "NONE", "body_html": "<p>Yes, it does look like the session creation is silently failing. I modified the code as follows:</p>\n<pre><code>GraphDef model_graph;\nNSString* model_path = FilePathForResourceName(@\"saved_model\", @\"pb\");\nbool success = PortableReadFileToProto([model_path UTF8String], &amp;model_graph);\n    \ncout &lt;&lt; \"PortableReadFileToProto bool: \" &lt;&lt; success &lt;&lt; endl;\n    \ncout &lt;&lt; \"Number of nodes in model_graph: \" &lt;&lt; model_graph.node_size() &lt;&lt; endl;\n    \nStatus session_init = session-&gt;Create(model_graph);\n    \ncout &lt;&lt; \"Session creation Status: \" &lt;&lt; session_init.ToString() &lt;&lt; endl;\n</code></pre>\n<p>This prints:</p>\n<pre><code>PortableReadFileToProto bool: 0\nNumber of nodes in model_graph: 0\nSession creation Status: OK\n</code></pre>\n<p>This indicates certain failure to parse the protobuf file, but session creation is being reported as succeeded.</p>\n<p>Is there a C++/iOS equivalent to <code>tf.saved_model.loader.load</code>?</p>", "body_text": "Yes, it does look like the session creation is silently failing. I modified the code as follows:\nGraphDef model_graph;\nNSString* model_path = FilePathForResourceName(@\"saved_model\", @\"pb\");\nbool success = PortableReadFileToProto([model_path UTF8String], &model_graph);\n    \ncout << \"PortableReadFileToProto bool: \" << success << endl;\n    \ncout << \"Number of nodes in model_graph: \" << model_graph.node_size() << endl;\n    \nStatus session_init = session->Create(model_graph);\n    \ncout << \"Session creation Status: \" << session_init.ToString() << endl;\n\nThis prints:\nPortableReadFileToProto bool: 0\nNumber of nodes in model_graph: 0\nSession creation Status: OK\n\nThis indicates certain failure to parse the protobuf file, but session creation is being reported as succeeded.\nIs there a C++/iOS equivalent to tf.saved_model.loader.load?", "body": "Yes, it does look like the session creation is silently failing. I modified the code as follows:\r\n\r\n```\r\nGraphDef model_graph;\r\nNSString* model_path = FilePathForResourceName(@\"saved_model\", @\"pb\");\r\nbool success = PortableReadFileToProto([model_path UTF8String], &model_graph);\r\n    \r\ncout << \"PortableReadFileToProto bool: \" << success << endl;\r\n    \r\ncout << \"Number of nodes in model_graph: \" << model_graph.node_size() << endl;\r\n    \r\nStatus session_init = session->Create(model_graph);\r\n    \r\ncout << \"Session creation Status: \" << session_init.ToString() << endl;\r\n```\r\n\r\nThis prints:\r\n\r\n```\r\nPortableReadFileToProto bool: 0\r\nNumber of nodes in model_graph: 0\r\nSession creation Status: OK\r\n```\r\n\r\nThis indicates certain failure to parse the protobuf file, but session creation is being reported as succeeded.\r\n\r\nIs there a C++/iOS equivalent to `tf.saved_model.loader.load`?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/200574233", "html_url": "https://github.com/tensorflow/tensorflow/issues/1066#issuecomment-200574233", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1066", "id": 200574233, "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDU3NDIzMw==", "user": {"login": "drufat", "id": 1400254, "node_id": "MDQ6VXNlcjE0MDAyNTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1400254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drufat", "html_url": "https://github.com/drufat", "followers_url": "https://api.github.com/users/drufat/followers", "following_url": "https://api.github.com/users/drufat/following{/other_user}", "gists_url": "https://api.github.com/users/drufat/gists{/gist_id}", "starred_url": "https://api.github.com/users/drufat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drufat/subscriptions", "organizations_url": "https://api.github.com/users/drufat/orgs", "repos_url": "https://api.github.com/users/drufat/repos", "events_url": "https://api.github.com/users/drufat/events{/privacy}", "received_events_url": "https://api.github.com/users/drufat/received_events", "type": "User", "site_admin": false}, "created_at": "2016-03-23T22:53:53Z", "updated_at": "2016-03-23T22:53:53Z", "author_association": "NONE", "body_html": "<p>I have a similar archlinux setup.<br>\nAfter applying the suggested patch</p>\n<div class=\"highlight highlight-source-diff\"><pre><span class=\"pl-c1\">diff --git a/third_party/gpus/crosstool/CROSSTOOL b/third_party/gpus/crosstool/CROSSTOOL</span>\nindex dfde7cd..2482a69 100644\n<span class=\"pl-md\">--- a/third_party/gpus/crosstool/CROSSTOOL</span>\n<span class=\"pl-mi1\">+++ b/third_party/gpus/crosstool/CROSSTOOL</span>\n<span class=\"pl-mdr\">@@ -46,6 +46,7 @@</span> toolchain {\n   # Use \"-std=c++11\" for nvcc. For consistency, force both the host compiler\n   # and the device compiler to use \"-std=c++11\".\n   cxx_flag: \"-std=c++11\"\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>  cxx_flag: \"-D_MWAITXINTRIN_H_INCLUDED\"</span>\n   linker_flag: \"-lstdc++\"\n   linker_flag: \"-B/usr/bin/\"</pre></div>\n<p>I now run into a new error:</p>\n<pre><code>/usr/include/string.h: In function 'void* __mempcpy_inline(void*, const void*, size_t)':\n/usr/include/string.h:652:42: error: 'memcpy' was not declared in this scope\n   return (char *) memcpy (__dest, __src, __n) + __n;\n                                          ^\nERROR: /home/drufat/Source/tensorflow/tensorflow/core/kernels/BUILD:858:1: output 'tensorflow/core/kernels/_objs/depth_space_ops_gpu/tensorflow/core/kernels/depthtospace_op_gpu.cu.pic.o' was not created.\nERROR: /home/drufat/Source/tensorflow/tensorflow/core/kernels/BUILD:858:1: not all outputs were created.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n</code></pre>", "body_text": "I have a similar archlinux setup.\nAfter applying the suggested patch\ndiff --git a/third_party/gpus/crosstool/CROSSTOOL b/third_party/gpus/crosstool/CROSSTOOL\nindex dfde7cd..2482a69 100644\n--- a/third_party/gpus/crosstool/CROSSTOOL\n+++ b/third_party/gpus/crosstool/CROSSTOOL\n@@ -46,6 +46,7 @@ toolchain {\n   # Use \"-std=c++11\" for nvcc. For consistency, force both the host compiler\n   # and the device compiler to use \"-std=c++11\".\n   cxx_flag: \"-std=c++11\"\n+  cxx_flag: \"-D_MWAITXINTRIN_H_INCLUDED\"\n   linker_flag: \"-lstdc++\"\n   linker_flag: \"-B/usr/bin/\"\nI now run into a new error:\n/usr/include/string.h: In function 'void* __mempcpy_inline(void*, const void*, size_t)':\n/usr/include/string.h:652:42: error: 'memcpy' was not declared in this scope\n   return (char *) memcpy (__dest, __src, __n) + __n;\n                                          ^\nERROR: /home/drufat/Source/tensorflow/tensorflow/core/kernels/BUILD:858:1: output 'tensorflow/core/kernels/_objs/depth_space_ops_gpu/tensorflow/core/kernels/depthtospace_op_gpu.cu.pic.o' was not created.\nERROR: /home/drufat/Source/tensorflow/tensorflow/core/kernels/BUILD:858:1: not all outputs were created.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build", "body": "I have a similar archlinux setup. \nAfter applying the suggested patch \n\n``` diff\ndiff --git a/third_party/gpus/crosstool/CROSSTOOL b/third_party/gpus/crosstool/CROSSTOOL\nindex dfde7cd..2482a69 100644\n--- a/third_party/gpus/crosstool/CROSSTOOL\n+++ b/third_party/gpus/crosstool/CROSSTOOL\n@@ -46,6 +46,7 @@ toolchain {\n   # Use \"-std=c++11\" for nvcc. For consistency, force both the host compiler\n   # and the device compiler to use \"-std=c++11\".\n   cxx_flag: \"-std=c++11\"\n+  cxx_flag: \"-D_MWAITXINTRIN_H_INCLUDED\"\n   linker_flag: \"-lstdc++\"\n   linker_flag: \"-B/usr/bin/\"\n```\n\nI now run into a new error:\n\n```\n/usr/include/string.h: In function 'void* __mempcpy_inline(void*, const void*, size_t)':\n/usr/include/string.h:652:42: error: 'memcpy' was not declared in this scope\n   return (char *) memcpy (__dest, __src, __n) + __n;\n                                          ^\nERROR: /home/drufat/Source/tensorflow/tensorflow/core/kernels/BUILD:858:1: output 'tensorflow/core/kernels/_objs/depth_space_ops_gpu/tensorflow/core/kernels/depthtospace_op_gpu.cu.pic.o' was not created.\nERROR: /home/drufat/Source/tensorflow/tensorflow/core/kernels/BUILD:858:1: not all outputs were created.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n```\n"}
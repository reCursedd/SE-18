{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/200580370", "html_url": "https://github.com/tensorflow/tensorflow/issues/1066#issuecomment-200580370", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1066", "id": 200580370, "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDU4MDM3MA==", "user": {"login": "chrisburr", "id": 5220533, "node_id": "MDQ6VXNlcjUyMjA1MzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/5220533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisburr", "html_url": "https://github.com/chrisburr", "followers_url": "https://api.github.com/users/chrisburr/followers", "following_url": "https://api.github.com/users/chrisburr/following{/other_user}", "gists_url": "https://api.github.com/users/chrisburr/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisburr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisburr/subscriptions", "organizations_url": "https://api.github.com/users/chrisburr/orgs", "repos_url": "https://api.github.com/users/chrisburr/repos", "events_url": "https://api.github.com/users/chrisburr/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisburr/received_events", "type": "User", "site_admin": false}, "created_at": "2016-03-23T23:20:21Z", "updated_at": "2016-03-23T23:20:21Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1400254\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/drufat\">@drufat</a> I ran into a similar issue when compiling on Arch and found the solution in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"137662453\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1346\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1346/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1346\">#1346</a>. I'm unsure if <code>-D__STRICT_ANSI__</code> is actually required but the following patch worked for me:</p>\n<div class=\"highlight highlight-source-diff\"><pre><span class=\"pl-c1\">diff --git a/third_party/gpus/crosstool/CROSSTOOL b/third_party/gpus/crosstool/CROSSTOOL</span>\nindex dfde7cd..15fa9fd 100644\n<span class=\"pl-md\">--- a/third_party/gpus/crosstool/CROSSTOOL</span>\n<span class=\"pl-mi1\">+++ b/third_party/gpus/crosstool/CROSSTOOL</span>\n<span class=\"pl-mdr\">@@ -46,6 +46,9 @@</span> toolchain {\n   # Use \"-std=c++11\" for nvcc. For consistency, force both the host compiler\n   # and the device compiler to use \"-std=c++11\".\n   cxx_flag: \"-std=c++11\"\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>  cxx_flag: \"-D_MWAITXINTRIN_H_INCLUDED\"</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>  cxx_flag: \"-D_FORCE_INLINES\"</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>  cxx_flag: \"-D__STRICT_ANSI__\"</span>\n   linker_flag: \"-lstdc++\"\n   linker_flag: \"-B/usr/bin/\"</pre></div>", "body_text": "@drufat I ran into a similar issue when compiling on Arch and found the solution in #1346. I'm unsure if -D__STRICT_ANSI__ is actually required but the following patch worked for me:\ndiff --git a/third_party/gpus/crosstool/CROSSTOOL b/third_party/gpus/crosstool/CROSSTOOL\nindex dfde7cd..15fa9fd 100644\n--- a/third_party/gpus/crosstool/CROSSTOOL\n+++ b/third_party/gpus/crosstool/CROSSTOOL\n@@ -46,6 +46,9 @@ toolchain {\n   # Use \"-std=c++11\" for nvcc. For consistency, force both the host compiler\n   # and the device compiler to use \"-std=c++11\".\n   cxx_flag: \"-std=c++11\"\n+  cxx_flag: \"-D_MWAITXINTRIN_H_INCLUDED\"\n+  cxx_flag: \"-D_FORCE_INLINES\"\n+  cxx_flag: \"-D__STRICT_ANSI__\"\n   linker_flag: \"-lstdc++\"\n   linker_flag: \"-B/usr/bin/\"", "body": "@drufat I ran into a similar issue when compiling on Arch and found the solution in #1346. I'm unsure if `-D__STRICT_ANSI__` is actually required but the following patch worked for me:\n\n``` diff\ndiff --git a/third_party/gpus/crosstool/CROSSTOOL b/third_party/gpus/crosstool/CROSSTOOL\nindex dfde7cd..15fa9fd 100644\n--- a/third_party/gpus/crosstool/CROSSTOOL\n+++ b/third_party/gpus/crosstool/CROSSTOOL\n@@ -46,6 +46,9 @@ toolchain {\n   # Use \"-std=c++11\" for nvcc. For consistency, force both the host compiler\n   # and the device compiler to use \"-std=c++11\".\n   cxx_flag: \"-std=c++11\"\n+  cxx_flag: \"-D_MWAITXINTRIN_H_INCLUDED\"\n+  cxx_flag: \"-D_FORCE_INLINES\"\n+  cxx_flag: \"-D__STRICT_ANSI__\"\n   linker_flag: \"-lstdc++\"\n   linker_flag: \"-B/usr/bin/\"\n```\n"}
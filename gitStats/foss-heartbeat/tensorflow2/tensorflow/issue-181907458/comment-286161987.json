{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/286161987", "html_url": "https://github.com/tensorflow/tensorflow/issues/4863#issuecomment-286161987", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4863", "id": 286161987, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjE2MTk4Nw==", "user": {"login": "sschaetz", "id": 192171, "node_id": "MDQ6VXNlcjE5MjE3MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/192171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sschaetz", "html_url": "https://github.com/sschaetz", "followers_url": "https://api.github.com/users/sschaetz/followers", "following_url": "https://api.github.com/users/sschaetz/following{/other_user}", "gists_url": "https://api.github.com/users/sschaetz/gists{/gist_id}", "starred_url": "https://api.github.com/users/sschaetz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sschaetz/subscriptions", "organizations_url": "https://api.github.com/users/sschaetz/orgs", "repos_url": "https://api.github.com/users/sschaetz/repos", "events_url": "https://api.github.com/users/sschaetz/events{/privacy}", "received_events_url": "https://api.github.com/users/sschaetz/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-13T16:28:47Z", "updated_at": "2017-03-13T16:28:47Z", "author_association": "NONE", "body_html": "<blockquote>\n<p>But the code for cwise ops makes some assumptions about the order of types, assuming that only the first two arguments to REGISTER macros should be used</p>\n</blockquote>\n<p>It looks like only the <em>first</em> argument is used if <code>__ANDROID_TYPES_SLIM__</code> is defined.<br>\nIn addition to<br>\n<code>REGISTER5(BinaryOp, CPU, \"Mul\", functor::mul, float, int32, double, uint8, Eigen::half);</code></p>\n<p>I changed REGISTER5 to</p>\n<pre><code>#define REGISTER5(OP, D, N, F, T0, T1, T2, T3, T4) \\\n    REGISTER(OP, D, N, F, T0) \\\n    REGISTER(OP, D, N, F, T1)\n</code></pre>\n<p>Note that by setting <code>__ANDROID_TYPES_FULL__</code> library size increases significantly and should probably be avoided.</p>", "body_text": "But the code for cwise ops makes some assumptions about the order of types, assuming that only the first two arguments to REGISTER macros should be used\n\nIt looks like only the first argument is used if __ANDROID_TYPES_SLIM__ is defined.\nIn addition to\nREGISTER5(BinaryOp, CPU, \"Mul\", functor::mul, float, int32, double, uint8, Eigen::half);\nI changed REGISTER5 to\n#define REGISTER5(OP, D, N, F, T0, T1, T2, T3, T4) \\\n    REGISTER(OP, D, N, F, T0) \\\n    REGISTER(OP, D, N, F, T1)\n\nNote that by setting __ANDROID_TYPES_FULL__ library size increases significantly and should probably be avoided.", "body": "> But the code for cwise ops makes some assumptions about the order of types, assuming that only the first two arguments to REGISTER macros should be used\r\n\r\nIt looks like only the *first* argument is used if `__ANDROID_TYPES_SLIM__` is defined.\r\nIn addition to \r\n`REGISTER5(BinaryOp, CPU, \"Mul\", functor::mul, float, int32, double, uint8, Eigen::half);`\r\n\r\nI changed REGISTER5 to\r\n\r\n```\r\n#define REGISTER5(OP, D, N, F, T0, T1, T2, T3, T4) \\\r\n    REGISTER(OP, D, N, F, T0) \\\r\n    REGISTER(OP, D, N, F, T1)\r\n```\r\n\r\nNote that by setting `__ANDROID_TYPES_FULL__` library size increases significantly and should probably be avoided."}
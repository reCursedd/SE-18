{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10097", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10097/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10097/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10097/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/10097", "id": 230368996, "node_id": "MDExOlB1bGxSZXF1ZXN0MTIxNzU4MDEz", "number": 10097, "title": "Windows: Make TensorFlow build with Bazel again", "user": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "maciekcc", "id": 15237924, "node_id": "MDQ6VXNlcjE1MjM3OTI0", "avatar_url": "https://avatars0.githubusercontent.com/u/15237924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maciekcc", "html_url": "https://github.com/maciekcc", "followers_url": "https://api.github.com/users/maciekcc/followers", "following_url": "https://api.github.com/users/maciekcc/following{/other_user}", "gists_url": "https://api.github.com/users/maciekcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/maciekcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maciekcc/subscriptions", "organizations_url": "https://api.github.com/users/maciekcc/orgs", "repos_url": "https://api.github.com/users/maciekcc/repos", "events_url": "https://api.github.com/users/maciekcc/events{/privacy}", "received_events_url": "https://api.github.com/users/maciekcc/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "maciekcc", "id": 15237924, "node_id": "MDQ6VXNlcjE1MjM3OTI0", "avatar_url": "https://avatars0.githubusercontent.com/u/15237924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maciekcc", "html_url": "https://github.com/maciekcc", "followers_url": "https://api.github.com/users/maciekcc/followers", "following_url": "https://api.github.com/users/maciekcc/following{/other_user}", "gists_url": "https://api.github.com/users/maciekcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/maciekcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maciekcc/subscriptions", "organizations_url": "https://api.github.com/users/maciekcc/orgs", "repos_url": "https://api.github.com/users/maciekcc/repos", "events_url": "https://api.github.com/users/maciekcc/events{/privacy}", "received_events_url": "https://api.github.com/users/maciekcc/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2017-05-22T11:42:24Z", "updated_at": "2017-05-22T20:07:54Z", "closed_at": "2017-05-22T20:07:54Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/10097", "html_url": "https://github.com/tensorflow/tensorflow/pull/10097", "diff_url": "https://github.com/tensorflow/tensorflow/pull/10097.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/10097.patch"}, "body_html": "<ol>\n<li>\n<p><a href=\"https://github.com/bazelbuild/rules_closure\">rules_closure</a> doesn't work on Windows, since <code>//tensorflow/tensorboard</code> depends on it, we exclude it from dependencies of pip package for now.<br>\nSent <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"230007995\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/bazelbuild/rules_closure/issues/206\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/bazelbuild/rules_closure/pull/206/hovercard\" href=\"https://github.com/bazelbuild/rules_closure/pull/206\">bazelbuild/rules_closure#206</a> to fix one of the rules_closure problems on Windows.</p>\n</li>\n<li>\n<p><code>base_rendezvous_mgr</code> needs <code>tf_opts</code> to build correctly.</p>\n</li>\n<li>\n<p><code>bazel_test_lib.sh</code>: move <code>run_configure_for_cpu_build</code> function in front of <code>clean_output_base</code>, because we need the correct .bazelrc to be written before running bazel command.</p>\n</li>\n<li>\n<p>Excluded <code>//tensorflow/python/tools:saved_model_cli_test</code> and <code>//tensorflow/python/feature_column:feature_column_test</code> on Windows.<br>\nThe reason is <a href=\"https://github.com/tensorflow/tensorflow/blob/1a1527ab1fcffd94f692b1301fdbe87903ce7bdb/tensorflow/python/platform/googletest.py#L133\"><code>test_src_dir_path</code></a> doesn't work on Windows, because <code>TEST_SRCDIR</code> points to the runfiles directory which doesn't exist on Windows, and besides, we run tests from <code>py_test_dir</code> directory, so <code>org_tensorflow/tensorflow</code> should be <code>org_tensorflow/py_test_dir/tensorflow</code>.<br>\nI couldn't find an easy fix for these problem, so skip the tests for now.</p>\n</li>\n</ol>", "body_text": "rules_closure doesn't work on Windows, since //tensorflow/tensorboard depends on it, we exclude it from dependencies of pip package for now.\nSent bazelbuild/rules_closure#206 to fix one of the rules_closure problems on Windows.\n\n\nbase_rendezvous_mgr needs tf_opts to build correctly.\n\n\nbazel_test_lib.sh: move run_configure_for_cpu_build function in front of clean_output_base, because we need the correct .bazelrc to be written before running bazel command.\n\n\nExcluded //tensorflow/python/tools:saved_model_cli_test and //tensorflow/python/feature_column:feature_column_test on Windows.\nThe reason is test_src_dir_path doesn't work on Windows, because TEST_SRCDIR points to the runfiles directory which doesn't exist on Windows, and besides, we run tests from py_test_dir directory, so org_tensorflow/tensorflow should be org_tensorflow/py_test_dir/tensorflow.\nI couldn't find an easy fix for these problem, so skip the tests for now.", "body": "1. [rules_closure](https://github.com/bazelbuild/rules_closure) doesn't work on Windows, since `//tensorflow/tensorboard` depends on it, we exclude it from dependencies of pip package for now.\r\nSent https://github.com/bazelbuild/rules_closure/pull/206 to fix one of the rules_closure problems on Windows.\r\n\r\n2. `base_rendezvous_mgr` needs `tf_opts` to build correctly.\r\n\r\n3. `bazel_test_lib.sh`: move `run_configure_for_cpu_build` function in front of `clean_output_base`, because we need the correct .bazelrc to be written before running bazel command.\r\n\r\n4. Excluded `//tensorflow/python/tools:saved_model_cli_test` and `//tensorflow/python/feature_column:feature_column_test` on Windows.\r\nThe reason is [`test_src_dir_path`](https://github.com/tensorflow/tensorflow/blob/1a1527ab1fcffd94f692b1301fdbe87903ce7bdb/tensorflow/python/platform/googletest.py#L133) doesn't work on Windows, because `TEST_SRCDIR` points to the runfiles directory which doesn't exist on Windows, and besides, we run tests from `py_test_dir` directory, so `org_tensorflow/tensorflow` should be `org_tensorflow/py_test_dir/tensorflow`.\r\nI couldn't find an easy fix for these problem, so skip the tests for now.\r\n\r\n\r\n"}
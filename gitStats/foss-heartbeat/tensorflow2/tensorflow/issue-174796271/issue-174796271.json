{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4175", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4175/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4175/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4175/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4175", "id": 174796271, "node_id": "MDU6SXNzdWUxNzQ3OTYyNzE=", "number": 4175, "title": "Contrib metric `metric_ops.streaming_auc` type error within function", "user": {"login": "craymichael", "id": 20629897, "node_id": "MDQ6VXNlcjIwNjI5ODk3", "avatar_url": "https://avatars2.githubusercontent.com/u/20629897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craymichael", "html_url": "https://github.com/craymichael", "followers_url": "https://api.github.com/users/craymichael/followers", "following_url": "https://api.github.com/users/craymichael/following{/other_user}", "gists_url": "https://api.github.com/users/craymichael/gists{/gist_id}", "starred_url": "https://api.github.com/users/craymichael/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craymichael/subscriptions", "organizations_url": "https://api.github.com/users/craymichael/orgs", "repos_url": "https://api.github.com/users/craymichael/repos", "events_url": "https://api.github.com/users/craymichael/events{/privacy}", "received_events_url": "https://api.github.com/users/craymichael/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "gilberthendry", "id": 18124217, "node_id": "MDQ6VXNlcjE4MTI0MjE3", "avatar_url": "https://avatars0.githubusercontent.com/u/18124217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilberthendry", "html_url": "https://github.com/gilberthendry", "followers_url": "https://api.github.com/users/gilberthendry/followers", "following_url": "https://api.github.com/users/gilberthendry/following{/other_user}", "gists_url": "https://api.github.com/users/gilberthendry/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilberthendry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilberthendry/subscriptions", "organizations_url": "https://api.github.com/users/gilberthendry/orgs", "repos_url": "https://api.github.com/users/gilberthendry/repos", "events_url": "https://api.github.com/users/gilberthendry/events{/privacy}", "received_events_url": "https://api.github.com/users/gilberthendry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gilberthendry", "id": 18124217, "node_id": "MDQ6VXNlcjE4MTI0MjE3", "avatar_url": "https://avatars0.githubusercontent.com/u/18124217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilberthendry", "html_url": "https://github.com/gilberthendry", "followers_url": "https://api.github.com/users/gilberthendry/followers", "following_url": "https://api.github.com/users/gilberthendry/following{/other_user}", "gists_url": "https://api.github.com/users/gilberthendry/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilberthendry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilberthendry/subscriptions", "organizations_url": "https://api.github.com/users/gilberthendry/orgs", "repos_url": "https://api.github.com/users/gilberthendry/repos", "events_url": "https://api.github.com/users/gilberthendry/events{/privacy}", "received_events_url": "https://api.github.com/users/gilberthendry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2016-09-02T16:15:05Z", "updated_at": "2016-12-24T02:58:23Z", "closed_at": "2016-11-30T15:00:58Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Version 0.10.0rc0<br>\nUbuntu</p>\n<p>I'm using a <code>RandomForest</code> Estimator and am feeding it <code>tf.contrib.metrics.streaming_auc</code> and it fails.</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>Modifying source to convert both inputs to float using <code>tf.to_float</code>. It worked, but still an issue.</p>\n<h3>Logs or other output that would be helpful</h3>\n<pre><code>Traceback (most recent call last):\n  File \"main.py\", line 284, in &lt;module&gt;\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"main.py\", line 219, in main\n    eval_steps=1\n  File \"/home/user/Documents/tensorflow/cross_validation/evaluate.py\", line 45, in evaluate\n    metrics=metrics\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 356, in evaluate\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 630, in _evaluate_model\n    eval_dict = self._get_eval_ops(features, targets, metrics)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/random_forest.py\", line 205, in _get_eval_ops\n    result[name] = metric(predictions, labels)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/metrics/python/ops/metric_ops.py\", line 795, in streaming_auc\n    fp_update_op) = _tp_fn_tn_fp(predictions, labels, thresholds, ignore_mask)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/metrics/python/ops/metric_ops.py\", line 667, in _tp_fn_tn_fp\n    (thresh_tiled)),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 845, in greater\n    result = _op_def_lib.apply_op(\"Greater\", x=x, y=y, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 468, in apply_op\n    inferred_from[input_arg.type_attr]))\nTypeError: Input 'y' of 'Greater' Op has type float32 that does not match type int64 of argument 'x'.\n</code></pre>", "body_text": "Environment info\nVersion 0.10.0rc0\nUbuntu\nI'm using a RandomForest Estimator and am feeding it tf.contrib.metrics.streaming_auc and it fails.\nWhat other attempted solutions have you tried?\nModifying source to convert both inputs to float using tf.to_float. It worked, but still an issue.\nLogs or other output that would be helpful\nTraceback (most recent call last):\n  File \"main.py\", line 284, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"main.py\", line 219, in main\n    eval_steps=1\n  File \"/home/user/Documents/tensorflow/cross_validation/evaluate.py\", line 45, in evaluate\n    metrics=metrics\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 356, in evaluate\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 630, in _evaluate_model\n    eval_dict = self._get_eval_ops(features, targets, metrics)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/random_forest.py\", line 205, in _get_eval_ops\n    result[name] = metric(predictions, labels)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/metrics/python/ops/metric_ops.py\", line 795, in streaming_auc\n    fp_update_op) = _tp_fn_tn_fp(predictions, labels, thresholds, ignore_mask)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/metrics/python/ops/metric_ops.py\", line 667, in _tp_fn_tn_fp\n    (thresh_tiled)),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 845, in greater\n    result = _op_def_lib.apply_op(\"Greater\", x=x, y=y, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 468, in apply_op\n    inferred_from[input_arg.type_attr]))\nTypeError: Input 'y' of 'Greater' Op has type float32 that does not match type int64 of argument 'x'.", "body": "### Environment info\n\nVersion 0.10.0rc0\nUbuntu\n\nI'm using a `RandomForest` Estimator and am feeding it `tf.contrib.metrics.streaming_auc` and it fails.\n### What other attempted solutions have you tried?\n\nModifying source to convert both inputs to float using `tf.to_float`. It worked, but still an issue.\n### Logs or other output that would be helpful\n\n```\nTraceback (most recent call last):\n  File \"main.py\", line 284, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"main.py\", line 219, in main\n    eval_steps=1\n  File \"/home/user/Documents/tensorflow/cross_validation/evaluate.py\", line 45, in evaluate\n    metrics=metrics\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 356, in evaluate\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 630, in _evaluate_model\n    eval_dict = self._get_eval_ops(features, targets, metrics)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/random_forest.py\", line 205, in _get_eval_ops\n    result[name] = metric(predictions, labels)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/metrics/python/ops/metric_ops.py\", line 795, in streaming_auc\n    fp_update_op) = _tp_fn_tn_fp(predictions, labels, thresholds, ignore_mask)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/metrics/python/ops/metric_ops.py\", line 667, in _tp_fn_tn_fp\n    (thresh_tiled)),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 845, in greater\n    result = _op_def_lib.apply_op(\"Greater\", x=x, y=y, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 468, in apply_op\n    inferred_from[input_arg.type_attr]))\nTypeError: Input 'y' of 'Greater' Op has type float32 that does not match type int64 of argument 'x'.\n```\n"}
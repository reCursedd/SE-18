{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/263894781", "html_url": "https://github.com/tensorflow/tensorflow/issues/4175#issuecomment-263894781", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4175", "id": 263894781, "node_id": "MDEyOklzc3VlQ29tbWVudDI2Mzg5NDc4MQ==", "user": {"login": "craymichael", "id": 20629897, "node_id": "MDQ6VXNlcjIwNjI5ODk3", "avatar_url": "https://avatars2.githubusercontent.com/u/20629897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craymichael", "html_url": "https://github.com/craymichael", "followers_url": "https://api.github.com/users/craymichael/followers", "following_url": "https://api.github.com/users/craymichael/following{/other_user}", "gists_url": "https://api.github.com/users/craymichael/gists{/gist_id}", "starred_url": "https://api.github.com/users/craymichael/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craymichael/subscriptions", "organizations_url": "https://api.github.com/users/craymichael/orgs", "repos_url": "https://api.github.com/users/craymichael/repos", "events_url": "https://api.github.com/users/craymichael/events{/privacy}", "received_events_url": "https://api.github.com/users/craymichael/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-30T15:00:58Z", "updated_at": "2016-11-30T15:00:58Z", "author_association": "NONE", "body_html": "<p>It appears this has been fixed in newer versions (past r0.10), so if you don't feel like upgrading you can fix it by changing the function <code>_tp_fn_tn_fp</code> in <code>tensorflow/contrib/metrics/python/ops/metric_ops.py</code> (doesn't require rebuilding, of course) as follows.</p>\n<h3>Original</h3>\n<pre><code>def _tp_fn_tn_fp(predictions, labels, thresholds, ignore_mask=None):\n  ...\n  pred_tiled = math_ops.cast(\n      math_ops.greater(\n          array_ops.tile(\n              array_ops.transpose(predictions), [num_thresholds, 1]),\n          thresh_tiled),\n      dtype=dtypes.int32)\n</code></pre>\n<h3>Modified</h3>\n<pre><code>def _tp_fn_tn_fp(predictions, labels, thresholds, ignore_mask=None):\n  ...\n  pred_tiled = math_ops.cast(\n      math_ops.greater(\n          math_ops.to_float(array_ops.tile(\n              array_ops.transpose(predictions), [num_thresholds, 1])),\n          math_ops.to_float(thresh_tiled)),\n      dtype=dtypes.int32)\n</code></pre>", "body_text": "It appears this has been fixed in newer versions (past r0.10), so if you don't feel like upgrading you can fix it by changing the function _tp_fn_tn_fp in tensorflow/contrib/metrics/python/ops/metric_ops.py (doesn't require rebuilding, of course) as follows.\nOriginal\ndef _tp_fn_tn_fp(predictions, labels, thresholds, ignore_mask=None):\n  ...\n  pred_tiled = math_ops.cast(\n      math_ops.greater(\n          array_ops.tile(\n              array_ops.transpose(predictions), [num_thresholds, 1]),\n          thresh_tiled),\n      dtype=dtypes.int32)\n\nModified\ndef _tp_fn_tn_fp(predictions, labels, thresholds, ignore_mask=None):\n  ...\n  pred_tiled = math_ops.cast(\n      math_ops.greater(\n          math_ops.to_float(array_ops.tile(\n              array_ops.transpose(predictions), [num_thresholds, 1])),\n          math_ops.to_float(thresh_tiled)),\n      dtype=dtypes.int32)", "body": "It appears this has been fixed in newer versions (past r0.10), so if you don't feel like upgrading you can fix it by changing the function `_tp_fn_tn_fp` in `tensorflow/contrib/metrics/python/ops/metric_ops.py` (doesn't require rebuilding, of course) as follows.\r\n### Original\r\n```\r\ndef _tp_fn_tn_fp(predictions, labels, thresholds, ignore_mask=None):\r\n  ...\r\n  pred_tiled = math_ops.cast(\r\n      math_ops.greater(\r\n          array_ops.tile(\r\n              array_ops.transpose(predictions), [num_thresholds, 1]),\r\n          thresh_tiled),\r\n      dtype=dtypes.int32)\r\n```\r\n### Modified\r\n```\r\ndef _tp_fn_tn_fp(predictions, labels, thresholds, ignore_mask=None):\r\n  ...\r\n  pred_tiled = math_ops.cast(\r\n      math_ops.greater(\r\n          math_ops.to_float(array_ops.tile(\r\n              array_ops.transpose(predictions), [num_thresholds, 1])),\r\n          math_ops.to_float(thresh_tiled)),\r\n      dtype=dtypes.int32)\r\n```"}
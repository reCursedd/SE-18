{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/287460181", "html_url": "https://github.com/tensorflow/tensorflow/issues/8404#issuecomment-287460181", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8404", "id": 287460181, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzQ2MDE4MQ==", "user": {"login": "Androbin", "id": 16437156, "node_id": "MDQ6VXNlcjE2NDM3MTU2", "avatar_url": "https://avatars1.githubusercontent.com/u/16437156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Androbin", "html_url": "https://github.com/Androbin", "followers_url": "https://api.github.com/users/Androbin/followers", "following_url": "https://api.github.com/users/Androbin/following{/other_user}", "gists_url": "https://api.github.com/users/Androbin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Androbin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Androbin/subscriptions", "organizations_url": "https://api.github.com/users/Androbin/orgs", "repos_url": "https://api.github.com/users/Androbin/repos", "events_url": "https://api.github.com/users/Androbin/events{/privacy}", "received_events_url": "https://api.github.com/users/Androbin/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-17T20:16:37Z", "updated_at": "2017-03-18T13:35:31Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=161459\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/petewarden\">@petewarden</a><br>\nOkay, I have used the new Graph Transform Tool with arguments:</p>\n<p><code>--inputs='x' --outputs='y_conv'  --transforms='strip_unused_nodes(type=float, shape=\"1,49,257,1\") remove_nodes(op=Identity, op=CheckNumerics) fold_constants(ignore_errors=true) fold_batch_norms fold_old_batch_norms'</code></p>\n<p>and all of the previous error messages are gone.<br>\nThe serialization works just fine now, but when trying to run the model:</p>\n<pre><code>Inference exception: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'Switch' with these attrs.  Registered devices: [CPU], Registered kernels:\n        device='CPU'; T in [DT_FLOAT]\n        device='CPU'; T in [DT_INT32]\n        device='GPU'; T in [DT_STRING]\n        device='GPU'; T in [DT_BOOL]\n        device='GPU'; T in [DT_INT32]\n        device='GPU'; T in [DT_FLOAT]\n        \n        [[Node: drop/cond/Switch = Switch[T=DT_BOOL](is_training/_0__cf__0, is_training/_0__cf__0)]]\n</code></pre>", "body_text": "@petewarden\nOkay, I have used the new Graph Transform Tool with arguments:\n--inputs='x' --outputs='y_conv'  --transforms='strip_unused_nodes(type=float, shape=\"1,49,257,1\") remove_nodes(op=Identity, op=CheckNumerics) fold_constants(ignore_errors=true) fold_batch_norms fold_old_batch_norms'\nand all of the previous error messages are gone.\nThe serialization works just fine now, but when trying to run the model:\nInference exception: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'Switch' with these attrs.  Registered devices: [CPU], Registered kernels:\n        device='CPU'; T in [DT_FLOAT]\n        device='CPU'; T in [DT_INT32]\n        device='GPU'; T in [DT_STRING]\n        device='GPU'; T in [DT_BOOL]\n        device='GPU'; T in [DT_INT32]\n        device='GPU'; T in [DT_FLOAT]\n        \n        [[Node: drop/cond/Switch = Switch[T=DT_BOOL](is_training/_0__cf__0, is_training/_0__cf__0)]]", "body": "@petewarden \r\nOkay, I have used the new Graph Transform Tool with arguments:\r\n\r\n`--inputs='x' --outputs='y_conv'  --transforms='strip_unused_nodes(type=float, shape=\"1,49,257,1\") remove_nodes(op=Identity, op=CheckNumerics) fold_constants(ignore_errors=true) fold_batch_norms fold_old_batch_norms'`\r\n\r\nand all of the previous error messages are gone.\r\nThe serialization works just fine now, but when trying to run the model:\r\n\r\n```\r\nInference exception: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'Switch' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n        device='CPU'; T in [DT_FLOAT]\r\n        device='CPU'; T in [DT_INT32]\r\n        device='GPU'; T in [DT_STRING]\r\n        device='GPU'; T in [DT_BOOL]\r\n        device='GPU'; T in [DT_INT32]\r\n        device='GPU'; T in [DT_FLOAT]\r\n        \r\n        [[Node: drop/cond/Switch = Switch[T=DT_BOOL](is_training/_0__cf__0, is_training/_0__cf__0)]]\r\n```"}
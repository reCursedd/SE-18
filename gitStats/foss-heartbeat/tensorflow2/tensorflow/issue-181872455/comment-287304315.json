{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/287304315", "html_url": "https://github.com/tensorflow/tensorflow/issues/4848#issuecomment-287304315", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4848", "id": 287304315, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzMwNDMxNQ==", "user": {"login": "pkit", "id": 805654, "node_id": "MDQ6VXNlcjgwNTY1NA==", "avatar_url": "https://avatars2.githubusercontent.com/u/805654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkit", "html_url": "https://github.com/pkit", "followers_url": "https://api.github.com/users/pkit/followers", "following_url": "https://api.github.com/users/pkit/following{/other_user}", "gists_url": "https://api.github.com/users/pkit/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkit/subscriptions", "organizations_url": "https://api.github.com/users/pkit/orgs", "repos_url": "https://api.github.com/users/pkit/repos", "events_url": "https://api.github.com/users/pkit/events{/privacy}", "received_events_url": "https://api.github.com/users/pkit/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-17T09:15:57Z", "updated_at": "2017-03-17T09:15:57Z", "author_association": "NONE", "body_html": "<p>No <code>bazel clean</code> in history:</p>\n<pre><code>$ history | grep ' bazel'\n........\n241 bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n242 bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\n</code></pre>\n<p>But then:</p>\n<pre><code>$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package \n......\nERROR: /home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/BUILD:4:1: Traceback (most recent call last):\n\tFile \"/home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/BUILD\", line 4\n\t\terror_gpu_disabled()\n\tFile \"/home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/error_gpu_disabled.bzl\", line 3, in error_gpu_disabled\n\t\tfail(\"ERROR: Building with --config=c...\")\nERROR: Building with --config=cuda but TensorFlow is not configured to build with GPU support. Please re-run ./configure and enter 'Y' at the prompt to build with GPU support.\nERROR: no such target '@local_config_cuda//crosstool:toolchain': target 'toolchain' not declared in package 'crosstool' defined by /home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/BUILD.\nINFO: Elapsed time: 0.571s\n</code></pre>\n<p>Seems like cache invalidation issue to me. AFAIR it's time dependent, i.e. will fail only if looong time passed between builds.</p>", "body_text": "No bazel clean in history:\n$ history | grep ' bazel'\n........\n241 bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n242 bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\n\nBut then:\n$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package \n......\nERROR: /home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/BUILD:4:1: Traceback (most recent call last):\n\tFile \"/home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/BUILD\", line 4\n\t\terror_gpu_disabled()\n\tFile \"/home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/error_gpu_disabled.bzl\", line 3, in error_gpu_disabled\n\t\tfail(\"ERROR: Building with --config=c...\")\nERROR: Building with --config=cuda but TensorFlow is not configured to build with GPU support. Please re-run ./configure and enter 'Y' at the prompt to build with GPU support.\nERROR: no such target '@local_config_cuda//crosstool:toolchain': target 'toolchain' not declared in package 'crosstool' defined by /home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/BUILD.\nINFO: Elapsed time: 0.571s\n\nSeems like cache invalidation issue to me. AFAIR it's time dependent, i.e. will fail only if looong time passed between builds.", "body": "No `bazel clean` in history:\r\n\r\n    $ history | grep ' bazel'\r\n    ........\r\n    241 bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\n    242 bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\r\n\r\nBut then:\r\n\r\n    $ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package \r\n\t......\r\n\tERROR: /home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/BUILD:4:1: Traceback (most recent call last):\r\n\t\tFile \"/home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/BUILD\", line 4\r\n\t\t\terror_gpu_disabled()\r\n\t\tFile \"/home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/error_gpu_disabled.bzl\", line 3, in error_gpu_disabled\r\n\t\t\tfail(\"ERROR: Building with --config=c...\")\r\n\tERROR: Building with --config=cuda but TensorFlow is not configured to build with GPU support. Please re-run ./configure and enter 'Y' at the prompt to build with GPU support.\r\n\tERROR: no such target '@local_config_cuda//crosstool:toolchain': target 'toolchain' not declared in package 'crosstool' defined by /home/kit/.cache/bazel/_bazel_kit/5f23834381991ebb87bab85ad8b737c5/external/local_config_cuda/crosstool/BUILD.\r\n\tINFO: Elapsed time: 0.571s\r\n\r\nSeems like cache invalidation issue to me. AFAIR it's time dependent, i.e. will fail only if looong time passed between builds."}
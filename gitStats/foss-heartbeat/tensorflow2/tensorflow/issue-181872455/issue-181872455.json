{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4848", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4848/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4848/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4848/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4848", "id": 181872455, "node_id": "MDU6SXNzdWUxODE4NzI0NTU=", "number": 4848, "title": "\"bazel clean\" will undo \"./configure\" when source configured to build for GPU.", "user": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "damienmg", "id": 3721087, "node_id": "MDQ6VXNlcjM3MjEwODc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3721087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/damienmg", "html_url": "https://github.com/damienmg", "followers_url": "https://api.github.com/users/damienmg/followers", "following_url": "https://api.github.com/users/damienmg/following{/other_user}", "gists_url": "https://api.github.com/users/damienmg/gists{/gist_id}", "starred_url": "https://api.github.com/users/damienmg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/damienmg/subscriptions", "organizations_url": "https://api.github.com/users/damienmg/orgs", "repos_url": "https://api.github.com/users/damienmg/repos", "events_url": "https://api.github.com/users/damienmg/events{/privacy}", "received_events_url": "https://api.github.com/users/damienmg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "damienmg", "id": 3721087, "node_id": "MDQ6VXNlcjM3MjEwODc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3721087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/damienmg", "html_url": "https://github.com/damienmg", "followers_url": "https://api.github.com/users/damienmg/followers", "following_url": "https://api.github.com/users/damienmg/following{/other_user}", "gists_url": "https://api.github.com/users/damienmg/gists{/gist_id}", "starred_url": "https://api.github.com/users/damienmg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/damienmg/subscriptions", "organizations_url": "https://api.github.com/users/damienmg/orgs", "repos_url": "https://api.github.com/users/damienmg/repos", "events_url": "https://api.github.com/users/damienmg/events{/privacy}", "received_events_url": "https://api.github.com/users/damienmg/received_events", "type": "User", "site_admin": false}, {"login": "davidzchen", "id": 5283042, "node_id": "MDQ6VXNlcjUyODMwNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5283042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidzchen", "html_url": "https://github.com/davidzchen", "followers_url": "https://api.github.com/users/davidzchen/followers", "following_url": "https://api.github.com/users/davidzchen/following{/other_user}", "gists_url": "https://api.github.com/users/davidzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidzchen/subscriptions", "organizations_url": "https://api.github.com/users/davidzchen/orgs", "repos_url": "https://api.github.com/users/davidzchen/repos", "events_url": "https://api.github.com/users/davidzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/davidzchen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2016-10-09T07:48:11Z", "updated_at": "2017-03-22T05:31:48Z", "closed_at": "2017-03-22T05:31:48Z", "author_association": "MEMBER", "body_html": "<h3>Environment info</h3>\n<p>Operating System:<br>\nubuntu 14.04</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):<br>\ncuda 8.0.44, cudnn 5.5</p>\n<p>If installed from binary pip package, provide:<br>\nNo</p>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>)<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/c8d4896e3231c3ac32f174fd0af051867645fbb5/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/c8d4896e3231c3ac32f174fd0af051867645fbb5\"><tt>c8d4896</tt></a></li>\n<li>The output of <code>bazel version</code><br>\nBuild label: 0.3.1<br>\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Fri Jul 29 09:09:52 2016 (1469783392)<br>\nBuild timestamp: 1469783392<br>\nBuild timestamp as int: 1469783392</li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>./configure   # configure with GPU support)<br>\nbazel test -c opt --config=cuda tensorflow/core:common_runtime_direct_session_test # this one should pass<br>\nbazel clean<br>\nbazel test -c opt --config=cuda tensorflow/core:common_runtime_direct_session_test  # this one fails, complaining no GPU support configured.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).<br>\njava.lang.RuntimeException: Unrecoverable error while evaluating node 'CONFIGURATION_FRAGMENT:com.google.devtools.build.lib.skyframe.ConfigurationFragmentValue$ConfigurationFragmentKey@ae<br>\n3629bd' (requested by nodes 'CONFIGURATION_COLLECTION:com.google.devtools.build.lib.skyframe.ConfigurationCollectionValue$ConfigurationCollectionKey@1374ec1e', 'CONFIGURATION_FRAGMENT:com<br>\n.google.devtools.build.lib.skyframe.ConfigurationFragmentValue$ConfigurationFragmentKey@3686b55', 'CONFIGURATION_FRAGMENT:com.google.devtools.build.lib.skyframe.ConfigurationFragmentValue<br>\n$ConfigurationFragmentKey@a93d9174')<br>\nat com.google.devtools.build.skyframe.ParallelEvaluator$Evaluate.run(ParallelEvaluator.java:1070)<br>\nat com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:474)<br>\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)<br>\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)<br>\nat java.lang.Thread.run(Thread.java:745)</p>\n<p>David, Damien, looks like bazel clean undid some output of \"./configure\" at head.<br>\nAny idea where things went wrong?</p>", "body_text": "Environment info\nOperating System:\nubuntu 14.04\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\ncuda 8.0.44, cudnn 5.5\nIf installed from binary pip package, provide:\nNo\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD)\nc8d4896\nThe output of bazel version\nBuild label: 0.3.1\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Jul 29 09:09:52 2016 (1469783392)\nBuild timestamp: 1469783392\nBuild timestamp as int: 1469783392\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n./configure   # configure with GPU support)\nbazel test -c opt --config=cuda tensorflow/core:common_runtime_direct_session_test # this one should pass\nbazel clean\nbazel test -c opt --config=cuda tensorflow/core:common_runtime_direct_session_test  # this one fails, complaining no GPU support configured.\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).\njava.lang.RuntimeException: Unrecoverable error while evaluating node 'CONFIGURATION_FRAGMENT:com.google.devtools.build.lib.skyframe.ConfigurationFragmentValue$ConfigurationFragmentKey@ae\n3629bd' (requested by nodes 'CONFIGURATION_COLLECTION:com.google.devtools.build.lib.skyframe.ConfigurationCollectionValue$ConfigurationCollectionKey@1374ec1e', 'CONFIGURATION_FRAGMENT:com\n.google.devtools.build.lib.skyframe.ConfigurationFragmentValue$ConfigurationFragmentKey@3686b55', 'CONFIGURATION_FRAGMENT:com.google.devtools.build.lib.skyframe.ConfigurationFragmentValue\n$ConfigurationFragmentKey@a93d9174')\nat com.google.devtools.build.skyframe.ParallelEvaluator$Evaluate.run(ParallelEvaluator.java:1070)\nat com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:474)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat java.lang.Thread.run(Thread.java:745)\nDavid, Damien, looks like bazel clean undid some output of \"./configure\" at head.\nAny idea where things went wrong?", "body": "### Environment info\n\nOperating System:\nubuntu 14.04\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\ncuda 8.0.44, cudnn 5.5\n\nIf installed from binary pip package, provide:\nNo\n\nIf installed from source, provide \n1. The commit hash (`git rev-parse HEAD`)\n   c8d4896e3231c3ac32f174fd0af051867645fbb5\n2. The output of `bazel version`\n   Build label: 0.3.1\n   Build target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\n   Build time: Fri Jul 29 09:09:52 2016 (1469783392)\n   Build timestamp: 1469783392\n   Build timestamp as int: 1469783392\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n\n./configure   # configure with GPU support)\nbazel test -c opt --config=cuda tensorflow/core:common_runtime_direct_session_test # this one should pass\nbazel clean\nbazel test -c opt --config=cuda tensorflow/core:common_runtime_direct_session_test  # this one fails, complaining no GPU support configured.\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment or provide link).\njava.lang.RuntimeException: Unrecoverable error while evaluating node 'CONFIGURATION_FRAGMENT:com.google.devtools.build.lib.skyframe.ConfigurationFragmentValue$ConfigurationFragmentKey@ae\n3629bd' (requested by nodes 'CONFIGURATION_COLLECTION:com.google.devtools.build.lib.skyframe.ConfigurationCollectionValue$ConfigurationCollectionKey@1374ec1e', 'CONFIGURATION_FRAGMENT:com\n.google.devtools.build.lib.skyframe.ConfigurationFragmentValue$ConfigurationFragmentKey@3686b55', 'CONFIGURATION_FRAGMENT:com.google.devtools.build.lib.skyframe.ConfigurationFragmentValue\n$ConfigurationFragmentKey@a93d9174')\n        at com.google.devtools.build.skyframe.ParallelEvaluator$Evaluate.run(ParallelEvaluator.java:1070)\n        at com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:474)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n\nDavid, Damien, looks like bazel clean undid some output of \"./configure\" at head.\nAny idea where things went wrong?\n"}
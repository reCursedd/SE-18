{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/240263447", "html_url": "https://github.com/tensorflow/tensorflow/issues/3855#issuecomment-240263447", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3855", "id": 240263447, "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDI2MzQ0Nw==", "user": {"login": "bcordo", "id": 550797, "node_id": "MDQ6VXNlcjU1MDc5Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/550797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcordo", "html_url": "https://github.com/bcordo", "followers_url": "https://api.github.com/users/bcordo/followers", "following_url": "https://api.github.com/users/bcordo/following{/other_user}", "gists_url": "https://api.github.com/users/bcordo/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcordo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcordo/subscriptions", "organizations_url": "https://api.github.com/users/bcordo/orgs", "repos_url": "https://api.github.com/users/bcordo/repos", "events_url": "https://api.github.com/users/bcordo/events{/privacy}", "received_events_url": "https://api.github.com/users/bcordo/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-16T22:49:00Z", "updated_at": "2016-08-16T22:49:00Z", "author_association": "NONE", "body_html": "<p>Another update that solved my problem. Posting it here for posterity.</p>\n<p>If during the model definition I add the <code>model_dir</code> parameter, this loads the model and I can do inference</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">import</span> tensorflow.contrib.learn <span class=\"pl-k\">as</span> skflow\n\nhparams <span class=\"pl-k\">=</span> tf.contrib.tensor_forest.python.tensor_forest.ForestHParams(\n        <span class=\"pl-v\">num_trees</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">10</span>, <span class=\"pl-v\">max_nodes</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">1000</span>, <span class=\"pl-v\">num_classes</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">2</span>, <span class=\"pl-v\">num_features</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">5</span>)\nclassifier <span class=\"pl-k\">=</span> skflow.TensorForestEstimator(hparams, <span class=\"pl-v\">model_dir</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>/var/folders/k7/x_ddt3gn57z7x452wglt9brh0000gn/T/tmpEJhoS9<span class=\"pl-pds\">'</span></span>)\n\nclassifier.evaluate(<span class=\"pl-v\">x</span><span class=\"pl-k\">=</span>X_test, <span class=\"pl-v\">y</span><span class=\"pl-k\">=</span>y_test, <span class=\"pl-v\">steps</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">100</span>)</pre></div>\n<p>And everything works as expected.</p>", "body_text": "Another update that solved my problem. Posting it here for posterity.\nIf during the model definition I add the model_dir parameter, this loads the model and I can do inference\nimport tensorflow as tf\nimport tensorflow.contrib.learn as skflow\n\nhparams = tf.contrib.tensor_forest.python.tensor_forest.ForestHParams(\n        num_trees=10, max_nodes=1000, num_classes=2, num_features=5)\nclassifier = skflow.TensorForestEstimator(hparams, model_dir='/var/folders/k7/x_ddt3gn57z7x452wglt9brh0000gn/T/tmpEJhoS9')\n\nclassifier.evaluate(x=X_test, y=y_test, steps=100)\nAnd everything works as expected.", "body": "Another update that solved my problem. Posting it here for posterity. \n\nIf during the model definition I add the `model_dir` parameter, this loads the model and I can do inference\n\n``` python\nimport tensorflow as tf\nimport tensorflow.contrib.learn as skflow\n\nhparams = tf.contrib.tensor_forest.python.tensor_forest.ForestHParams(\n        num_trees=10, max_nodes=1000, num_classes=2, num_features=5)\nclassifier = skflow.TensorForestEstimator(hparams, model_dir='/var/folders/k7/x_ddt3gn57z7x452wglt9brh0000gn/T/tmpEJhoS9')\n\nclassifier.evaluate(x=X_test, y=y_test, steps=100)\n```\n\nAnd everything works as expected. \n"}
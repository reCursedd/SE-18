{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19715", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19715/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19715/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19715/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/19715", "id": 328801190, "node_id": "MDExOlB1bGxSZXF1ZXN0MTkyMjMxMjcz", "number": 19715, "title": "[CMAKE] Improve cmake build for MKL and MKL-DNN on Windows", "user": {"login": "LoSealL", "id": 11640576, "node_id": "MDQ6VXNlcjExNjQwNTc2", "avatar_url": "https://avatars3.githubusercontent.com/u/11640576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LoSealL", "html_url": "https://github.com/LoSealL", "followers_url": "https://api.github.com/users/LoSealL/followers", "following_url": "https://api.github.com/users/LoSealL/following{/other_user}", "gists_url": "https://api.github.com/users/LoSealL/gists{/gist_id}", "starred_url": "https://api.github.com/users/LoSealL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LoSealL/subscriptions", "organizations_url": "https://api.github.com/users/LoSealL/orgs", "repos_url": "https://api.github.com/users/LoSealL/repos", "events_url": "https://api.github.com/users/LoSealL/events{/privacy}", "received_events_url": "https://api.github.com/users/LoSealL/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-06-03T05:35:55Z", "updated_at": "2018-06-21T06:10:24Z", "closed_at": "2018-06-21T06:10:24Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19715", "html_url": "https://github.com/tensorflow/tensorflow/pull/19715", "diff_url": "https://github.com/tensorflow/tensorflow/pull/19715.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/19715.patch"}, "body_html": "<h2>Improve MKL and MKL-DNN compilation</h2>\n<p>In previous PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"296190543\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16936\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/16936/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/16936\">#16936</a>, one still need to pre-install MKL on the machine, while we found that MKL dependency is released with mkl-dnn on its github <a href=\"https://github.com/intel/mkl-dnn/releases\">release page</a>.</p>\n<ul>\n<li>Add mkl.cmake script to download the latest mkl libraries and header files</li>\n<li>Change mkldnn.cmake according to mkl.cmake (depends on mkl)</li>\n<li>Change tf_python.cmake to add mkl path when executing api generator</li>\n<li>mod .gitignore too ignore <code>build</code> folder</li>\n</ul>\n<p>This behaviour of the cmake script is more close to Bazel after the improvement.</p>\n<h2>Fix compile errors on VS</h2>\n<ul>\n<li>Function <code>int NumHyperthreadsPerCore()</code> not implemented on windows, (now implemented in <code>port.cc</code>)</li>\n<li><code>i_malloc, i_free, i_realloc, i_calloc</code> not declared on windows.</li>\n</ul>", "body_text": "Improve MKL and MKL-DNN compilation\nIn previous PR #16936, one still need to pre-install MKL on the machine, while we found that MKL dependency is released with mkl-dnn on its github release page.\n\nAdd mkl.cmake script to download the latest mkl libraries and header files\nChange mkldnn.cmake according to mkl.cmake (depends on mkl)\nChange tf_python.cmake to add mkl path when executing api generator\nmod .gitignore too ignore build folder\n\nThis behaviour of the cmake script is more close to Bazel after the improvement.\nFix compile errors on VS\n\nFunction int NumHyperthreadsPerCore() not implemented on windows, (now implemented in port.cc)\ni_malloc, i_free, i_realloc, i_calloc not declared on windows.", "body": "## Improve MKL and MKL-DNN compilation\r\nIn previous PR #16936, one still need to pre-install MKL on the machine, while we found that MKL dependency is released with mkl-dnn on its github [release page](https://github.com/intel/mkl-dnn/releases).\r\n- Add mkl.cmake script to download the latest mkl libraries and header files\r\n- Change mkldnn.cmake according to mkl.cmake (depends on mkl)\r\n- Change tf_python.cmake to add mkl path when executing api generator\r\n- mod .gitignore too ignore `build` folder\r\n\r\nThis behaviour of the cmake script is more close to Bazel after the improvement.\r\n\r\n## Fix compile errors on VS\r\n- Function `int NumHyperthreadsPerCore()` not implemented on windows, (now implemented in `port.cc`)\r\n- `i_malloc, i_free, i_realloc, i_calloc` not declared on windows."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7005", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7005/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7005/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7005/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7005", "id": 202372089, "node_id": "MDU6SXNzdWUyMDIzNzIwODk=", "number": 7005, "title": "TypeError: inputs must be a sequence occure in Bidirectional RNN", "user": {"login": "SunnerLi", "id": 11500871, "node_id": "MDQ6VXNlcjExNTAwODcx", "avatar_url": "https://avatars0.githubusercontent.com/u/11500871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SunnerLi", "html_url": "https://github.com/SunnerLi", "followers_url": "https://api.github.com/users/SunnerLi/followers", "following_url": "https://api.github.com/users/SunnerLi/following{/other_user}", "gists_url": "https://api.github.com/users/SunnerLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/SunnerLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SunnerLi/subscriptions", "organizations_url": "https://api.github.com/users/SunnerLi/orgs", "repos_url": "https://api.github.com/users/SunnerLi/repos", "events_url": "https://api.github.com/users/SunnerLi/events{/privacy}", "received_events_url": "https://api.github.com/users/SunnerLi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-01-22T09:34:48Z", "updated_at": "2018-09-11T16:56:27Z", "closed_at": "2017-01-22T18:14:03Z", "author_association": "NONE", "body_html": "<p>Sorry to bother.<br>\nI just use the bidirectional rnn now.<br>\nHowever, I just encounter some problem.</p>\n<pre lang=\"terminal\"><code>Traceback (most recent call last):\n  File \"test1.py\", line 19, in &lt;module&gt;\n    sequence_length=length(sequence),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 530, in bidirectional_rnn\n    raise TypeError(\"inputs must be a sequence\")\nTypeError: inputs must be a sequence\n</code></pre>\n<p>I don't know what the problem it is?<br>\nThe following show my code.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\nmax_length <span class=\"pl-k\">=</span> <span class=\"pl-c1\">100</span>\nframe_size <span class=\"pl-k\">=</span> <span class=\"pl-c1\">64</span>\nnum_hidden <span class=\"pl-k\">=</span> <span class=\"pl-c1\">200</span>\n\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">length</span>(<span class=\"pl-smi\">sequence</span>):\n    used <span class=\"pl-k\">=</span> tf.sign(tf.reduce_max(tf.abs(sequence), <span class=\"pl-v\">reduction_indices</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">2</span>))\n    length <span class=\"pl-k\">=</span> tf.reduce_sum(used, <span class=\"pl-v\">reduction_indices</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">1</span>)\n    length <span class=\"pl-k\">=</span> tf.cast(length, tf.int32)\n    <span class=\"pl-k\">return</span> length\n\nsequence <span class=\"pl-k\">=</span> tf.placeholder(tf.float32, [<span class=\"pl-c1\">None</span>, max_length, frame_size])\noutput, state <span class=\"pl-k\">=</span> tf.nn.bidirectional_rnn(\n    tf.nn.rnn_cell.GRUCell(num_hidden),\n    tf.nn.rnn_cell.GRUCell(num_hidden),\n    sequence,\n    <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float32,\n    <span class=\"pl-v\">sequence_length</span><span class=\"pl-k\">=</span>length(sequence),\n)</pre></div>\n<p>The code I refer to the <a href=\"https://danijar.com/variable-sequence-lengths-in-tensorflow/\" rel=\"nofollow\">blog</a> that other issue demonstrate and recommond.</p>\n<hr>\n<p>I try to figure out why the exception was raise.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">import</span> collections\n\n<span class=\"pl-c1\">self</span>.input_sentences <span class=\"pl-k\">=</span> tf.placeholder(tf.float32, [<span class=\"pl-c1\">None</span>, sequence_length, embedding_size])\n<span class=\"pl-c1\">print</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>six: <span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">isinstance</span>(<span class=\"pl-c1\">self</span>.length, collections.Sequence)</pre></div>\n<p>This is the part of my code.<br>\nHowever, the result is shown below:</p>\n<pre><code>six:  False\n</code></pre>\n<p>Is somebody encounter such this problem?<br>\nor how can I solve this?</p>\n<p>I use CPU only, the OS is ubuntu 16.04<br>\nthe version of tensorflow is 0.12.1</p>", "body_text": "Sorry to bother.\nI just use the bidirectional rnn now.\nHowever, I just encounter some problem.\nTraceback (most recent call last):\n  File \"test1.py\", line 19, in <module>\n    sequence_length=length(sequence),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 530, in bidirectional_rnn\n    raise TypeError(\"inputs must be a sequence\")\nTypeError: inputs must be a sequence\n\nI don't know what the problem it is?\nThe following show my code.\nimport tensorflow as tf\n\nmax_length = 100\nframe_size = 64\nnum_hidden = 200\n\ndef length(sequence):\n    used = tf.sign(tf.reduce_max(tf.abs(sequence), reduction_indices=2))\n    length = tf.reduce_sum(used, reduction_indices=1)\n    length = tf.cast(length, tf.int32)\n    return length\n\nsequence = tf.placeholder(tf.float32, [None, max_length, frame_size])\noutput, state = tf.nn.bidirectional_rnn(\n    tf.nn.rnn_cell.GRUCell(num_hidden),\n    tf.nn.rnn_cell.GRUCell(num_hidden),\n    sequence,\n    dtype=tf.float32,\n    sequence_length=length(sequence),\n)\nThe code I refer to the blog that other issue demonstrate and recommond.\n\nI try to figure out why the exception was raise.\nimport tensorflow as tf\nimport collections\n\nself.input_sentences = tf.placeholder(tf.float32, [None, sequence_length, embedding_size])\nprint \"six: \", isinstance(self.length, collections.Sequence)\nThis is the part of my code.\nHowever, the result is shown below:\nsix:  False\n\nIs somebody encounter such this problem?\nor how can I solve this?\nI use CPU only, the OS is ubuntu 16.04\nthe version of tensorflow is 0.12.1", "body": "Sorry to bother.\r\nI just use the bidirectional rnn now.\r\nHowever, I just encounter some problem.\r\n```terminal\r\nTraceback (most recent call last):\r\n  File \"test1.py\", line 19, in <module>\r\n    sequence_length=length(sequence),\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 530, in bidirectional_rnn\r\n    raise TypeError(\"inputs must be a sequence\")\r\nTypeError: inputs must be a sequence\r\n```\r\nI don't know what the problem it is?\r\nThe following show my code.\r\n```python\r\nimport tensorflow as tf\r\n\r\nmax_length = 100\r\nframe_size = 64\r\nnum_hidden = 200\r\n\r\ndef length(sequence):\r\n    used = tf.sign(tf.reduce_max(tf.abs(sequence), reduction_indices=2))\r\n    length = tf.reduce_sum(used, reduction_indices=1)\r\n    length = tf.cast(length, tf.int32)\r\n    return length\r\n\r\nsequence = tf.placeholder(tf.float32, [None, max_length, frame_size])\r\noutput, state = tf.nn.bidirectional_rnn(\r\n    tf.nn.rnn_cell.GRUCell(num_hidden),\r\n    tf.nn.rnn_cell.GRUCell(num_hidden),\r\n    sequence,\r\n    dtype=tf.float32,\r\n    sequence_length=length(sequence),\r\n)\r\n```\r\n\r\nThe code I refer to the [blog](https://danijar.com/variable-sequence-lengths-in-tensorflow/) that other issue demonstrate and recommond.\r\n\r\n---\r\nI try to figure out why the exception was raise.\r\n```python\r\nimport tensorflow as tf\r\nimport collections\r\n\r\nself.input_sentences = tf.placeholder(tf.float32, [None, sequence_length, embedding_size])\r\nprint \"six: \", isinstance(self.length, collections.Sequence)\r\n```\r\nThis is the part of my code.\r\nHowever, the result is shown below:\r\n```\r\nsix:  False\r\n```\r\nIs somebody encounter such this problem?\r\nor how can I solve this?\r\n\r\nI use CPU only, the OS is ubuntu 16.04\r\nthe version of tensorflow is 0.12.1"}
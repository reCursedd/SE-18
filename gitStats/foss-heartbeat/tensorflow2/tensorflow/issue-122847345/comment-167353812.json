{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/167353812", "html_url": "https://github.com/tensorflow/tensorflow/issues/537#issuecomment-167353812", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/537", "id": 167353812, "node_id": "MDEyOklzc3VlQ29tbWVudDE2NzM1MzgxMg==", "user": {"login": "cinjon", "id": 615351, "node_id": "MDQ6VXNlcjYxNTM1MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/615351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cinjon", "html_url": "https://github.com/cinjon", "followers_url": "https://api.github.com/users/cinjon/followers", "following_url": "https://api.github.com/users/cinjon/following{/other_user}", "gists_url": "https://api.github.com/users/cinjon/gists{/gist_id}", "starred_url": "https://api.github.com/users/cinjon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cinjon/subscriptions", "organizations_url": "https://api.github.com/users/cinjon/orgs", "repos_url": "https://api.github.com/users/cinjon/repos", "events_url": "https://api.github.com/users/cinjon/events{/privacy}", "received_events_url": "https://api.github.com/users/cinjon/received_events", "type": "User", "site_admin": false}, "created_at": "2015-12-26T18:48:42Z", "updated_at": "2015-12-26T18:48:42Z", "author_association": "NONE", "body_html": "<p>Some more info on the above error:</p>\n<pre><code>  File \".../tensorflow/python/ops/nn.py\", line 835, in sampled_softmax_loss\n    name=name)\n  File \".../tensorflow/python/ops/nn.py\", line 654, in _compute_sampled_logits\n    true_logits += true_b\n  File \".../tensorflow/python/ops/math_ops.py\", line 425, in binary_op_wrapper\n    y = ops.convert_to_tensor(y, dtype=x.dtype.base_dtype, name=\"y\")\n  File \".../tensorflow/python/framework/ops.py\", line 528, in convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \".../tensorflow/python/framework/ops.py\", line 472, in _TensorTensorConversionFunction\n    % (dtype.name, t.dtype.name, str(t)))\n\nValueError: Tensor conversion requested dtype float32 for Tensor with dtype int32: 'Tensor(\"module_a/model_with_buckets/module_a/sequence_loss/sequence_loss_by_example/sampled_softmax_loss/Reshape_5:0\", shape=(?, 1), dtype=int32, device=/cpu:0)'\n</code></pre>\n<p>This happens on the second module. The loop makes the first one without a hitch and then goes on to make the second one where it finds that the softmax Reshapes are now int32s.</p>\n<p>Printout of true_b after <code>true_b = array_ops.reshape(true_b, [-1, num_true])</code> (~ L671) in ops/nn.py:</p>\n<pre><code>...\nTensor(\"modules/model_with_buckets/modules/sequence_loss/sequence_loss_by_example/sampled_softmax_loss/Reshape_5:0\", shape=(?, 1), dtype=float32, device=/cpu:0)\n...\n</code></pre>\n<p>And then on the second module, just before the error is thrown:</p>\n<pre><code>Tensor(\"modules_1/model_with_buckets/modules/sequence_loss/sequence_loss_by_example/sampled_softmax_loss/Reshape_5:0\", shape=(?, 1), dtype=int32, device=/cpu:0)\n</code></pre>", "body_text": "Some more info on the above error:\n  File \".../tensorflow/python/ops/nn.py\", line 835, in sampled_softmax_loss\n    name=name)\n  File \".../tensorflow/python/ops/nn.py\", line 654, in _compute_sampled_logits\n    true_logits += true_b\n  File \".../tensorflow/python/ops/math_ops.py\", line 425, in binary_op_wrapper\n    y = ops.convert_to_tensor(y, dtype=x.dtype.base_dtype, name=\"y\")\n  File \".../tensorflow/python/framework/ops.py\", line 528, in convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \".../tensorflow/python/framework/ops.py\", line 472, in _TensorTensorConversionFunction\n    % (dtype.name, t.dtype.name, str(t)))\n\nValueError: Tensor conversion requested dtype float32 for Tensor with dtype int32: 'Tensor(\"module_a/model_with_buckets/module_a/sequence_loss/sequence_loss_by_example/sampled_softmax_loss/Reshape_5:0\", shape=(?, 1), dtype=int32, device=/cpu:0)'\n\nThis happens on the second module. The loop makes the first one without a hitch and then goes on to make the second one where it finds that the softmax Reshapes are now int32s.\nPrintout of true_b after true_b = array_ops.reshape(true_b, [-1, num_true]) (~ L671) in ops/nn.py:\n...\nTensor(\"modules/model_with_buckets/modules/sequence_loss/sequence_loss_by_example/sampled_softmax_loss/Reshape_5:0\", shape=(?, 1), dtype=float32, device=/cpu:0)\n...\n\nAnd then on the second module, just before the error is thrown:\nTensor(\"modules_1/model_with_buckets/modules/sequence_loss/sequence_loss_by_example/sampled_softmax_loss/Reshape_5:0\", shape=(?, 1), dtype=int32, device=/cpu:0)", "body": "Some more info on the above error:\n\n```\n  File \".../tensorflow/python/ops/nn.py\", line 835, in sampled_softmax_loss\n    name=name)\n  File \".../tensorflow/python/ops/nn.py\", line 654, in _compute_sampled_logits\n    true_logits += true_b\n  File \".../tensorflow/python/ops/math_ops.py\", line 425, in binary_op_wrapper\n    y = ops.convert_to_tensor(y, dtype=x.dtype.base_dtype, name=\"y\")\n  File \".../tensorflow/python/framework/ops.py\", line 528, in convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \".../tensorflow/python/framework/ops.py\", line 472, in _TensorTensorConversionFunction\n    % (dtype.name, t.dtype.name, str(t)))\n\nValueError: Tensor conversion requested dtype float32 for Tensor with dtype int32: 'Tensor(\"module_a/model_with_buckets/module_a/sequence_loss/sequence_loss_by_example/sampled_softmax_loss/Reshape_5:0\", shape=(?, 1), dtype=int32, device=/cpu:0)'\n```\n\nThis happens on the second module. The loop makes the first one without a hitch and then goes on to make the second one where it finds that the softmax Reshapes are now int32s.\n\nPrintout of true_b after `true_b = array_ops.reshape(true_b, [-1, num_true])` (~ L671) in ops/nn.py:\n\n```\n...\nTensor(\"modules/model_with_buckets/modules/sequence_loss/sequence_loss_by_example/sampled_softmax_loss/Reshape_5:0\", shape=(?, 1), dtype=float32, device=/cpu:0)\n...\n```\n\nAnd then on the second module, just before the error is thrown:\n\n```\nTensor(\"modules_1/model_with_buckets/modules/sequence_loss/sequence_loss_by_example/sampled_softmax_loss/Reshape_5:0\", shape=(?, 1), dtype=int32, device=/cpu:0)\n```\n"}
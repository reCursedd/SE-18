{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/423936644", "html_url": "https://github.com/tensorflow/tensorflow/issues/5792#issuecomment-423936644", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5792", "id": 423936644, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzkzNjY0NA==", "user": {"login": "mohan1914", "id": 29768074, "node_id": "MDQ6VXNlcjI5NzY4MDc0", "avatar_url": "https://avatars0.githubusercontent.com/u/29768074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mohan1914", "html_url": "https://github.com/mohan1914", "followers_url": "https://api.github.com/users/mohan1914/followers", "following_url": "https://api.github.com/users/mohan1914/following{/other_user}", "gists_url": "https://api.github.com/users/mohan1914/gists{/gist_id}", "starred_url": "https://api.github.com/users/mohan1914/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mohan1914/subscriptions", "organizations_url": "https://api.github.com/users/mohan1914/orgs", "repos_url": "https://api.github.com/users/mohan1914/repos", "events_url": "https://api.github.com/users/mohan1914/events{/privacy}", "received_events_url": "https://api.github.com/users/mohan1914/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-24T10:50:12Z", "updated_at": "2018-09-24T10:51:42Z", "author_association": "NONE", "body_html": "<p>Add .h files in srcs. If you have gpu_srcs and the same .h file as srcs, you'll have to add it again in gpu_srcs<br>\ntf_custom_op_library(<br>\nname = \"rec_conv.so\",<br>\nsrcs = [\"rec_conv.cc, rec_conv.h\"],<br>\n)</p>\n<blockquote>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16847697\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/lixinyutfd\">@lixinyutfd</a> : Hey Do you know how to add a header file as a dependency while compiling your new op?<br>\nI am also creating a new op and I have a similar build file as yours:</p>\n<pre><code>load(\"//tensorflow:tensorflow.bzl\", \"tf_custom_op_library\")\n\ntf_custom_op_library(\n    name = \"rec_conv.so\",\n    srcs = [\"rec_conv.cc\"],\n)\n</code></pre>\n<p>But I also have a \"rec_conv.h\" file which I am unable to include successfully in the build and Bazel is complaining.<br>\nIn case you have worked this out, can you help?</p>\n</blockquote>", "body_text": "Add .h files in srcs. If you have gpu_srcs and the same .h file as srcs, you'll have to add it again in gpu_srcs\ntf_custom_op_library(\nname = \"rec_conv.so\",\nsrcs = [\"rec_conv.cc, rec_conv.h\"],\n)\n\n@lixinyutfd : Hey Do you know how to add a header file as a dependency while compiling your new op?\nI am also creating a new op and I have a similar build file as yours:\nload(\"//tensorflow:tensorflow.bzl\", \"tf_custom_op_library\")\n\ntf_custom_op_library(\n    name = \"rec_conv.so\",\n    srcs = [\"rec_conv.cc\"],\n)\n\nBut I also have a \"rec_conv.h\" file which I am unable to include successfully in the build and Bazel is complaining.\nIn case you have worked this out, can you help?", "body": "Add .h files in srcs. If you have gpu_srcs and the same .h file as srcs, you'll have to add it again in gpu_srcs\r\ntf_custom_op_library(\r\n    name = \"rec_conv.so\",\r\n    srcs = [\"rec_conv.cc, rec_conv.h\"],\r\n)\r\n\r\n\r\n\r\n\r\n> @lixinyutfd : Hey Do you know how to add a header file as a dependency while compiling your new op?\r\n> I am also creating a new op and I have a similar build file as yours:\r\n> \r\n> ```\r\n> load(\"//tensorflow:tensorflow.bzl\", \"tf_custom_op_library\")\r\n> \r\n> tf_custom_op_library(\r\n>     name = \"rec_conv.so\",\r\n>     srcs = [\"rec_conv.cc\"],\r\n> )\r\n> ```\r\n> \r\n> But I also have a \"rec_conv.h\" file which I am unable to include successfully in the build and Bazel is complaining.\r\n> In case you have worked this out, can you help?\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/387249523", "html_url": "https://github.com/tensorflow/tensorflow/issues/19073#issuecomment-387249523", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19073", "id": 387249523, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzI0OTUyMw==", "user": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-08T00:45:03Z", "updated_at": "2018-05-08T00:45:03Z", "author_association": "MEMBER", "body_html": "<p>I cannot really reproduce. Adding a log on <a href=\"https://github.com/tensorflow/tensorflow/blob/714f3c4f2f901e865bfcbf830485adafb92dca48/tensorflow/stream_executor/cuda/cuda_driver.cc#L1053\">this line</a> and running for five steps, cuEventQuery was run only 10,000 times. When you said \"and should cost 23564854 times to do useless cuEventQuery due to not ready\", do you mean cuEventQuery was run 23564854 times? Was that over 50,000 steps?</p>\n<p>Note that the CPU should be doing a fair amount of work for the input pipeline. You can run without the input pipeline by not specifying <code>--data_dir</code>. Do you still have the problem even when you do not specify <code>--data_dir</code>?</p>", "body_text": "I cannot really reproduce. Adding a log on this line and running for five steps, cuEventQuery was run only 10,000 times. When you said \"and should cost 23564854 times to do useless cuEventQuery due to not ready\", do you mean cuEventQuery was run 23564854 times? Was that over 50,000 steps?\nNote that the CPU should be doing a fair amount of work for the input pipeline. You can run without the input pipeline by not specifying --data_dir. Do you still have the problem even when you do not specify --data_dir?", "body": "I cannot really reproduce. Adding a log on [this line](https://github.com/tensorflow/tensorflow/blob/714f3c4f2f901e865bfcbf830485adafb92dca48/tensorflow/stream_executor/cuda/cuda_driver.cc#L1053) and running for five steps, cuEventQuery was run only 10,000 times. When you said \"and should cost 23564854 times to do useless cuEventQuery due to not ready\", do you mean cuEventQuery was run 23564854 times? Was that over 50,000 steps?\r\n\r\nNote that the CPU should be doing a fair amount of work for the input pipeline. You can run without the input pipeline by not specifying `--data_dir`. Do you still have the problem even when you do not specify `--data_dir`?"}
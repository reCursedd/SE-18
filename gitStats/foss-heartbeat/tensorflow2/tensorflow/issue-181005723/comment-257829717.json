{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/257829717", "html_url": "https://github.com/tensorflow/tensorflow/issues/4766#issuecomment-257829717", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4766", "id": 257829717, "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzgyOTcxNw==", "user": {"login": "nikogamulin", "id": 1803701, "node_id": "MDQ6VXNlcjE4MDM3MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1803701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikogamulin", "html_url": "https://github.com/nikogamulin", "followers_url": "https://api.github.com/users/nikogamulin/followers", "following_url": "https://api.github.com/users/nikogamulin/following{/other_user}", "gists_url": "https://api.github.com/users/nikogamulin/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikogamulin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikogamulin/subscriptions", "organizations_url": "https://api.github.com/users/nikogamulin/orgs", "repos_url": "https://api.github.com/users/nikogamulin/repos", "events_url": "https://api.github.com/users/nikogamulin/events{/privacy}", "received_events_url": "https://api.github.com/users/nikogamulin/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-02T10:41:02Z", "updated_at": "2016-11-02T10:41:02Z", "author_association": "NONE", "body_html": "<p>Have you managed to get past the issue? I tried to run the basic example from <a href=\"https://github.com/tensorflow/models/blob/master/slim/slim_walkthough.ipynb\">slim_walkthrough notebook</a> and then ran the following command:<br>\n<code>bazel-bin/tensorflow/python/tools/freeze_graph --input_graph=/tmp/inception_finetuned/graph.pbtxt --input_checkpoint=/tmp/inception_finetuned/model.ckpt-2 --output_graph=/Users/nikogamulin/Desktop/freeze.pb --output_node_names=InceptionV1/Logits/Predictions/Softmax</code></p>\n<p>which resulted the following error:</p>\n<blockquote>\n<p>W tensorflow/core/framework/op_kernel.cc:968] Failed precondition: Attempting to use uninitialized value InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1<br>\n[[Node: _send_InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1_0 = _Send<a href=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1\">T=DT_FLOAT, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=6007788667487390928, tensor_name=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\n...<br>\nW tensorflow/core/framework/op_kernel.cc:968] Failed precondition: Attempting to use uninitialized value InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1<br>\n[[Node: _send_InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1_0 = _Send<a href=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1\">T=DT_FLOAT, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=6007788667487390928, tensor_name=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nTraceback (most recent call last):<br>\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <br>\ntf.app.run()<br>\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 32, in run<br>\nsys.exit(main(sys.argv[:1] + flags_passthrough))<br>\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main<br>\nFLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)<br>\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 121, in freeze_graph<br>\nsess, input_graph_def, output_node_names.split(\",\"))<br>\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/framework/graph_util.py\", line 226, in convert_variables_to_constants<br>\nreturned_variables = sess.run(variable_names)<br>\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 717, in run<br>\nrun_metadata_ptr)<br>\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 915, in _run<br>\nfeed_dict_string, options, run_metadata)<br>\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 965, in _do_run<br>\ntarget_list, options, run_metadata)<br>\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 985, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1<br>\n[[Node: _send_InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1_0 = _Send<a href=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1\">T=DT_FLOAT, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=6007788667487390928, tensor_name=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]</p>\n</blockquote>\n<p>Then I tried to use SGD optimizer instead of Adam and got the following error:</p>\n<blockquote>\n<p>...<br>\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value global_step<br>\n[[Node: _send_global_step_0 = _Send<a href=\"global_step\">T=DT_INT64, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=8900174487477528080, tensor_name=\"global_step:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]</p>\n</blockquote>\n<p>Anyway, so far I haven't figured out how to get rid of these errors.</p>", "body_text": "Have you managed to get past the issue? I tried to run the basic example from slim_walkthrough notebook and then ran the following command:\nbazel-bin/tensorflow/python/tools/freeze_graph --input_graph=/tmp/inception_finetuned/graph.pbtxt --input_checkpoint=/tmp/inception_finetuned/model.ckpt-2 --output_graph=/Users/nikogamulin/Desktop/freeze.pb --output_node_names=InceptionV1/Logits/Predictions/Softmax\nwhich resulted the following error:\n\nW tensorflow/core/framework/op_kernel.cc:968] Failed precondition: Attempting to use uninitialized value InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1\n[[Node: _send_InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1_0 = _SendT=DT_FLOAT, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=6007788667487390928, tensor_name=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\n...\nW tensorflow/core/framework/op_kernel.cc:968] Failed precondition: Attempting to use uninitialized value InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1\n[[Node: _send_InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1_0 = _SendT=DT_FLOAT, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=6007788667487390928, tensor_name=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nTraceback (most recent call last):\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in \ntf.app.run()\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 32, in run\nsys.exit(main(sys.argv[:1] + flags_passthrough))\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\nFLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 121, in freeze_graph\nsess, input_graph_def, output_node_names.split(\",\"))\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/framework/graph_util.py\", line 226, in convert_variables_to_constants\nreturned_variables = sess.run(variable_names)\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 717, in run\nrun_metadata_ptr)\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 915, in _run\nfeed_dict_string, options, run_metadata)\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 965, in _do_run\ntarget_list, options, run_metadata)\nFile \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 985, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1\n[[Node: _send_InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1_0 = _SendT=DT_FLOAT, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=6007788667487390928, tensor_name=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\n\nThen I tried to use SGD optimizer instead of Adam and got the following error:\n\n...\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value global_step\n[[Node: _send_global_step_0 = _SendT=DT_INT64, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=8900174487477528080, tensor_name=\"global_step:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\n\nAnyway, so far I haven't figured out how to get rid of these errors.", "body": "Have you managed to get past the issue? I tried to run the basic example from [slim_walkthrough notebook](https://github.com/tensorflow/models/blob/master/slim/slim_walkthough.ipynb) and then ran the following command:\n`bazel-bin/tensorflow/python/tools/freeze_graph --input_graph=/tmp/inception_finetuned/graph.pbtxt --input_checkpoint=/tmp/inception_finetuned/model.ckpt-2 --output_graph=/Users/nikogamulin/Desktop/freeze.pb --output_node_names=InceptionV1/Logits/Predictions/Softmax`\n\nwhich resulted the following error:\n\n> W tensorflow/core/framework/op_kernel.cc:968] Failed precondition: Attempting to use uninitialized value InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1\n>    [[Node: _send_InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1_0 = _Send[T=DT_FLOAT, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=6007788667487390928, tensor_name=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"](InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1)]]\n> ...\n> W tensorflow/core/framework/op_kernel.cc:968] Failed precondition: Attempting to use uninitialized value InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1\n>    [[Node: _send_InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1_0 = _Send[T=DT_FLOAT, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=6007788667487390928, tensor_name=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"](InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1)]]\n> Traceback (most recent call last):\n>   File \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <module>\n>     tf.app.run()\n>   File \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 32, in run\n>     sys.exit(main(sys.argv[:1] + flags_passthrough))\n>   File \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\n>     FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\n>   File \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 121, in freeze_graph\n>     sess, input_graph_def, output_node_names.split(\",\"))\n>   File \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/framework/graph_util.py\", line 226, in convert_variables_to_constants\n>     returned_variables = sess.run(variable_names)\n>   File \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 717, in run\n>     run_metadata_ptr)\n>   File \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 915, in _run\n>     feed_dict_string, options, run_metadata)\n>   File \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 965, in _do_run\n>     target_list, options, run_metadata)\n>   File \"/Users/nikogamulin/workspace/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/client/session.py\", line 985, in _do_call\n>     raise type(e)(node_def, op, message)\n> tensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1\n>    [[Node: _send_InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1_0 = _Send[T=DT_FLOAT, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=6007788667487390928, tensor_name=\"InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"](InceptionV1/Logits/Conv2d_0c_1x1/biases/Adam_1)]]\n\nThen I tried to use SGD optimizer instead of Adam and got the following error:\n\n> ...\n> tensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value global_step\n>    [[Node: _send_global_step_0 = _Send[T=DT_INT64, client_terminated=true, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=8900174487477528080, tensor_name=\"global_step:0\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"](global_step)]]\n\nAnyway, so far I haven't figured out how to get rid of these errors.\n"}
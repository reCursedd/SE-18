{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/257963415", "html_url": "https://github.com/tensorflow/tensorflow/issues/4766#issuecomment-257963415", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4766", "id": 257963415, "node_id": "MDEyOklzc3VlQ29tbWVudDI1Nzk2MzQxNQ==", "user": {"login": "nikogamulin", "id": 1803701, "node_id": "MDQ6VXNlcjE4MDM3MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1803701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikogamulin", "html_url": "https://github.com/nikogamulin", "followers_url": "https://api.github.com/users/nikogamulin/followers", "following_url": "https://api.github.com/users/nikogamulin/following{/other_user}", "gists_url": "https://api.github.com/users/nikogamulin/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikogamulin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikogamulin/subscriptions", "organizations_url": "https://api.github.com/users/nikogamulin/orgs", "repos_url": "https://api.github.com/users/nikogamulin/repos", "events_url": "https://api.github.com/users/nikogamulin/events{/privacy}", "received_events_url": "https://api.github.com/users/nikogamulin/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-02T18:51:33Z", "updated_at": "2016-11-02T18:51:33Z", "author_association": "NONE", "body_html": "<p>@civilmanxx thanks for the link. Have you managed to get through first two points, described:<br>\n1, i train inception v1 (slim) on a subset of ImageNet dataset (269 of 1000)<br>\n2, convert .ckpt into .pb by freeze_graph</p>\n<p>I encounter the problem when trying to convert .ckpt (along with .pbtxt definition) to .pb. If you successfully converted to .pb, could you please describe how you ran finetuning (1) and conversion (2)?<br>\nAs mentioned, I tried to run finetuning (1) as described in <a href=\"https://github.com/tensorflow/models/blob/master/slim/slim_walkthough.ipynb\">slim walkthrough notebook</a> and then for freezing (2) the following command:<br>\n<code>bazel-bin/tensorflow/python/tools/freeze_graph --input_graph=/tmp/inception_finetuned/graph.pbtxt --input_checkpoint=/tmp/inception_finetuned/model.ckpt-2 --output_graph=/Users/nikogamulin/Desktop/freeze.pb --output_node_names=InceptionV1/Logits/Predictions/Softmax</code></p>\n<p>Besides this, I have also tried to run finetuning with following command:</p>\n<pre><code>python train_image_classifier.py \\                 \n    --train_dir=${TRAIN_DIR} \\                                   \n    --dataset_dir=${DATASET_DIR} \\                 \n    --dataset_name=flowers \\                              \n    --dataset_split_name=train \\                          \n    --model_name=inception_v1 \\\n    --checkpoint_path=${CHECKPOINT_PATH} \\\n    --checkpoint_exclude_scopes=InceptionV1/Logits,InceptionV1/AuxLogits/Logits\n</code></pre>\n<p>and then freezing with same comand as in first case and also got an error.</p>\n<p>Could you please describe how you ran finetuning (1) - which .pbtxt (or .pb) and .ckpt files you used and after that (2) how you managed to convert the finetuned model into .pb file.</p>", "body_text": "@civilmanxx thanks for the link. Have you managed to get through first two points, described:\n1, i train inception v1 (slim) on a subset of ImageNet dataset (269 of 1000)\n2, convert .ckpt into .pb by freeze_graph\nI encounter the problem when trying to convert .ckpt (along with .pbtxt definition) to .pb. If you successfully converted to .pb, could you please describe how you ran finetuning (1) and conversion (2)?\nAs mentioned, I tried to run finetuning (1) as described in slim walkthrough notebook and then for freezing (2) the following command:\nbazel-bin/tensorflow/python/tools/freeze_graph --input_graph=/tmp/inception_finetuned/graph.pbtxt --input_checkpoint=/tmp/inception_finetuned/model.ckpt-2 --output_graph=/Users/nikogamulin/Desktop/freeze.pb --output_node_names=InceptionV1/Logits/Predictions/Softmax\nBesides this, I have also tried to run finetuning with following command:\npython train_image_classifier.py \\                 \n    --train_dir=${TRAIN_DIR} \\                                   \n    --dataset_dir=${DATASET_DIR} \\                 \n    --dataset_name=flowers \\                              \n    --dataset_split_name=train \\                          \n    --model_name=inception_v1 \\\n    --checkpoint_path=${CHECKPOINT_PATH} \\\n    --checkpoint_exclude_scopes=InceptionV1/Logits,InceptionV1/AuxLogits/Logits\n\nand then freezing with same comand as in first case and also got an error.\nCould you please describe how you ran finetuning (1) - which .pbtxt (or .pb) and .ckpt files you used and after that (2) how you managed to convert the finetuned model into .pb file.", "body": "@civilmanxx thanks for the link. Have you managed to get through first two points, described:\n1, i train inception v1 (slim) on a subset of ImageNet dataset (269 of 1000)\n2, convert .ckpt into .pb by freeze_graph\n\nI encounter the problem when trying to convert .ckpt (along with .pbtxt definition) to .pb. If you successfully converted to .pb, could you please describe how you ran finetuning (1) and conversion (2)?\nAs mentioned, I tried to run finetuning (1) as described in [slim walkthrough notebook](https://github.com/tensorflow/models/blob/master/slim/slim_walkthough.ipynb) and then for freezing (2) the following command:\n`bazel-bin/tensorflow/python/tools/freeze_graph --input_graph=/tmp/inception_finetuned/graph.pbtxt --input_checkpoint=/tmp/inception_finetuned/model.ckpt-2 --output_graph=/Users/nikogamulin/Desktop/freeze.pb --output_node_names=InceptionV1/Logits/Predictions/Softmax`\n\nBesides this, I have also tried to run finetuning with following command:\n\n```\npython train_image_classifier.py \\                 \n    --train_dir=${TRAIN_DIR} \\                                   \n    --dataset_dir=${DATASET_DIR} \\                 \n    --dataset_name=flowers \\                              \n    --dataset_split_name=train \\                          \n    --model_name=inception_v1 \\\n    --checkpoint_path=${CHECKPOINT_PATH} \\\n    --checkpoint_exclude_scopes=InceptionV1/Logits,InceptionV1/AuxLogits/Logits\n```\n\n and then freezing with same comand as in first case and also got an error.\n\nCould you please describe how you ran finetuning (1) - which .pbtxt (or .pb) and .ckpt files you used and after that (2) how you managed to convert the finetuned model into .pb file.\n"}
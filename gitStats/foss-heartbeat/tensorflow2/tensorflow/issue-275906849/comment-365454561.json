{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/365454561", "html_url": "https://github.com/tensorflow/tensorflow/issues/14776#issuecomment-365454561", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14776", "id": 365454561, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTQ1NDU2MQ==", "user": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-14T00:34:53Z", "updated_at": "2018-02-14T00:34:53Z", "author_association": "MEMBER", "body_html": "<p>Sorry for the delay. <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/_impl/keras/estimator.py#L147\">This</a> is how model_to_estimator create its model_fn. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19293677\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ispirmustafa\">@ispirmustafa</a> anything you see with session that should be done differently? Thanks!</p>\n<p>Also tried print out <code>estimator.config.__dict__</code> and <code>estimator.config.cluster_spec.__dict__</code> for canned estimator, custom estimator and keras converted estimator, and I'm seeing the same results:<br>\n`<br>\n*********** est_keras.config.<strong>dict</strong> *************************************<br>\n{'_save_checkpoints_secs': 600, '_session_config': gpu_options {<br>\nper_process_gpu_memory_fraction: 0.5<br>\n}<br>\n, '_keep_checkpoint_max': 5, '_task_type': 'worker', '_is_chief': True, '_cluster_spec': &lt;tensorflow.python.training.server_lib.ClusterSpec object at 0x7f8e3ebcabd0&gt;, '_save_checkpoints_steps': None, '_keep_checkpoint_every_n_hours': 10000, '_service': None, '_num_ps_replicas': 0, '_tf_random_seed': None, '_master': '', '_num_worker_replicas': 1, '_task_id': 0, '_log_step_count_steps': 100, '_model_dir': '/tmp/tmp8jvdNt', '_save_summary_steps': 100}<br>\n*********** est_keras.config.cluster_spec.<strong>dict</strong>  *************<br>\n{'_cluster_def': , '_cluster_spec': {}}</p>\n<hr>\n<p>`</p>", "body_text": "Sorry for the delay. This is how model_to_estimator create its model_fn. @ispirmustafa anything you see with session that should be done differently? Thanks!\nAlso tried print out estimator.config.__dict__ and estimator.config.cluster_spec.__dict__ for canned estimator, custom estimator and keras converted estimator, and I'm seeing the same results:\n`\n*********** est_keras.config.dict *************************************\n{'_save_checkpoints_secs': 600, '_session_config': gpu_options {\nper_process_gpu_memory_fraction: 0.5\n}\n, '_keep_checkpoint_max': 5, '_task_type': 'worker', '_is_chief': True, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f8e3ebcabd0>, '_save_checkpoints_steps': None, '_keep_checkpoint_every_n_hours': 10000, '_service': None, '_num_ps_replicas': 0, '_tf_random_seed': None, '_master': '', '_num_worker_replicas': 1, '_task_id': 0, '_log_step_count_steps': 100, '_model_dir': '/tmp/tmp8jvdNt', '_save_summary_steps': 100}\n*********** est_keras.config.cluster_spec.dict  *************\n{'_cluster_def': , '_cluster_spec': {}}\n\n`", "body": "Sorry for the delay. [This](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/_impl/keras/estimator.py#L147) is how model_to_estimator create its model_fn. @ispirmustafa anything you see with session that should be done differently? Thanks!\r\n\r\nAlso tried print out `estimator.config.__dict__` and `estimator.config.cluster_spec.__dict__` for canned estimator, custom estimator and keras converted estimator, and I'm seeing the same results:\r\n`\r\n*********** est_keras.config.__dict__ *************************************\r\n{'_save_checkpoints_secs': 600, '_session_config': gpu_options {\r\n  per_process_gpu_memory_fraction: 0.5\r\n}\r\n, '_keep_checkpoint_max': 5, '_task_type': 'worker', '_is_chief': True, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f8e3ebcabd0>, '_save_checkpoints_steps': None, '_keep_checkpoint_every_n_hours': 10000, '_service': None, '_num_ps_replicas': 0, '_tf_random_seed': None, '_master': '', '_num_worker_replicas': 1, '_task_id': 0, '_log_step_count_steps': 100, '_model_dir': '/tmp/tmp8jvdNt', '_save_summary_steps': 100}\r\n*********** est_keras.config.cluster_spec.__dict__  *************\r\n{'_cluster_def': , '_cluster_spec': {}}\r\n******************************************************************\r\n`"}
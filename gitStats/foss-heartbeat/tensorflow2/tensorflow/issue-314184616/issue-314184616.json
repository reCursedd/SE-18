{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18498", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18498/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18498/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18498/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/18498", "id": 314184616, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgxNTQ2MjE2", "number": 18498, "title": "Fixed the bug in mkl_input_conversion_op when reorder is not needed", "user": {"login": "shengfuintel", "id": 3935335, "node_id": "MDQ6VXNlcjM5MzUzMzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3935335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shengfuintel", "html_url": "https://github.com/shengfuintel", "followers_url": "https://api.github.com/users/shengfuintel/followers", "following_url": "https://api.github.com/users/shengfuintel/following{/other_user}", "gists_url": "https://api.github.com/users/shengfuintel/gists{/gist_id}", "starred_url": "https://api.github.com/users/shengfuintel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shengfuintel/subscriptions", "organizations_url": "https://api.github.com/users/shengfuintel/orgs", "repos_url": "https://api.github.com/users/shengfuintel/repos", "events_url": "https://api.github.com/users/shengfuintel/events{/privacy}", "received_events_url": "https://api.github.com/users/shengfuintel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-04-13T17:09:41Z", "updated_at": "2018-04-17T23:44:10Z", "closed_at": "2018-04-17T23:44:10Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18498", "html_url": "https://github.com/tensorflow/tensorflow/pull/18498", "diff_url": "https://github.com/tensorflow/tensorflow/pull/18498.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/18498.patch"}, "body_html": "<p>In mkl_input_conversion, if one tensor is mkl tensor an another one tf tensor, we check if broadcast is needed. If broadcast is not needed, tf tensor is converted to mkl tensor. However, when tf tensor and mkl tensor has the shape, mkldnn reorder is not run, the output buffer is not updated, so the output buffer is random data.</p>\n<p>The fix is to copy the memory if reorder is not needed.</p>", "body_text": "In mkl_input_conversion, if one tensor is mkl tensor an another one tf tensor, we check if broadcast is needed. If broadcast is not needed, tf tensor is converted to mkl tensor. However, when tf tensor and mkl tensor has the shape, mkldnn reorder is not run, the output buffer is not updated, so the output buffer is random data.\nThe fix is to copy the memory if reorder is not needed.", "body": "In mkl_input_conversion, if one tensor is mkl tensor an another one tf tensor, we check if broadcast is needed. If broadcast is not needed, tf tensor is converted to mkl tensor. However, when tf tensor and mkl tensor has the shape, mkldnn reorder is not run, the output buffer is not updated, so the output buffer is random data.\r\n\r\nThe fix is to copy the memory if reorder is not needed."}
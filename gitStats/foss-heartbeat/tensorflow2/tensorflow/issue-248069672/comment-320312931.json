{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/320312931", "html_url": "https://github.com/tensorflow/tensorflow/issues/12043#issuecomment-320312931", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12043", "id": 320312931, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDMxMjkzMQ==", "user": {"login": "wchargin", "id": 4317806, "node_id": "MDQ6VXNlcjQzMTc4MDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4317806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wchargin", "html_url": "https://github.com/wchargin", "followers_url": "https://api.github.com/users/wchargin/followers", "following_url": "https://api.github.com/users/wchargin/following{/other_user}", "gists_url": "https://api.github.com/users/wchargin/gists{/gist_id}", "starred_url": "https://api.github.com/users/wchargin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wchargin/subscriptions", "organizations_url": "https://api.github.com/users/wchargin/orgs", "repos_url": "https://api.github.com/users/wchargin/repos", "events_url": "https://api.github.com/users/wchargin/events{/privacy}", "received_events_url": "https://api.github.com/users/wchargin/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-04T17:53:23Z", "updated_at": "2017-08-04T17:53:23Z", "author_association": "MEMBER", "body_html": "<p>I can reproduce your issue, and fix it as follows:</p>\n<div class=\"highlight highlight-source-diff\"><pre><span class=\"pl-md\">--- sumbench.py\t2017-08-04 10:50:21.550342085 -0700</span>\n<span class=\"pl-mi1\">+++ sumbench2.py\t2017-08-04 10:50:26.258294226 -0700</span>\n<span class=\"pl-mdr\">@@ -10,6 +10,7 @@</span>\n   summary_proto = tf.Summary()\n   summary_proto.ParseFromString(summary_string)\n   tensor_proto = summary_proto.value[0].tensor\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>  tf.contrib.util</span>\n   a = time.time()\n   array = tf.contrib.util.make_ndarray(tensor_proto)\n   b = time.time()</pre></div>\n<p>(My results aren't quite as bad as yours\u20140.2448s vs. 0.0004s\u2014but I assume that we're hitting the same thing.)</p>\n<p>It's just a benchmarking error: you're loading all of <code>tf.contrib</code> during your benchmark.</p>\n<p>You can similarly fix this without the above change by using <code>tf.make_ndarray</code> instead of <code>tf.contrib.util.make_ndarray</code>, for the same reason.</p>", "body_text": "I can reproduce your issue, and fix it as follows:\n--- sumbench.py\t2017-08-04 10:50:21.550342085 -0700\n+++ sumbench2.py\t2017-08-04 10:50:26.258294226 -0700\n@@ -10,6 +10,7 @@\n   summary_proto = tf.Summary()\n   summary_proto.ParseFromString(summary_string)\n   tensor_proto = summary_proto.value[0].tensor\n+  tf.contrib.util\n   a = time.time()\n   array = tf.contrib.util.make_ndarray(tensor_proto)\n   b = time.time()\n(My results aren't quite as bad as yours\u20140.2448s vs. 0.0004s\u2014but I assume that we're hitting the same thing.)\nIt's just a benchmarking error: you're loading all of tf.contrib during your benchmark.\nYou can similarly fix this without the above change by using tf.make_ndarray instead of tf.contrib.util.make_ndarray, for the same reason.", "body": "I can reproduce your issue, and fix it as follows:\r\n```diff\r\n--- sumbench.py\t2017-08-04 10:50:21.550342085 -0700\r\n+++ sumbench2.py\t2017-08-04 10:50:26.258294226 -0700\r\n@@ -10,6 +10,7 @@\r\n   summary_proto = tf.Summary()\r\n   summary_proto.ParseFromString(summary_string)\r\n   tensor_proto = summary_proto.value[0].tensor\r\n+  tf.contrib.util\r\n   a = time.time()\r\n   array = tf.contrib.util.make_ndarray(tensor_proto)\r\n   b = time.time()\r\n```\r\n(My results aren't quite as bad as yours\u20140.2448s vs. 0.0004s\u2014but I assume that we're hitting the same thing.)\r\n\r\nIt's just a benchmarking error: you're loading all of `tf.contrib` during your benchmark.\r\n\r\nYou can similarly fix this without the above change by using `tf.make_ndarray` instead of `tf.contrib.util.make_ndarray`, for the same reason."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6603", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6603/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6603/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6603/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6603", "id": 198358061, "node_id": "MDU6SXNzdWUxOTgzNTgwNjE=", "number": 6603, "title": "Allow dynamic summary names in new summary interface", "user": {"login": "foxik", "id": 560016, "node_id": "MDQ6VXNlcjU2MDAxNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/560016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/foxik", "html_url": "https://github.com/foxik", "followers_url": "https://api.github.com/users/foxik/followers", "following_url": "https://api.github.com/users/foxik/following{/other_user}", "gists_url": "https://api.github.com/users/foxik/gists{/gist_id}", "starred_url": "https://api.github.com/users/foxik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/foxik/subscriptions", "organizations_url": "https://api.github.com/users/foxik/orgs", "repos_url": "https://api.github.com/users/foxik/repos", "events_url": "https://api.github.com/users/foxik/events{/privacy}", "received_events_url": "https://api.github.com/users/foxik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "decentralion", "id": 1400023, "node_id": "MDQ6VXNlcjE0MDAwMjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1400023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentralion", "html_url": "https://github.com/decentralion", "followers_url": "https://api.github.com/users/decentralion/followers", "following_url": "https://api.github.com/users/decentralion/following{/other_user}", "gists_url": "https://api.github.com/users/decentralion/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentralion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentralion/subscriptions", "organizations_url": "https://api.github.com/users/decentralion/orgs", "repos_url": "https://api.github.com/users/decentralion/repos", "events_url": "https://api.github.com/users/decentralion/events{/privacy}", "received_events_url": "https://api.github.com/users/decentralion/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentralion", "id": 1400023, "node_id": "MDQ6VXNlcjE0MDAwMjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1400023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentralion", "html_url": "https://github.com/decentralion", "followers_url": "https://api.github.com/users/decentralion/followers", "following_url": "https://api.github.com/users/decentralion/following{/other_user}", "gists_url": "https://api.github.com/users/decentralion/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentralion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentralion/subscriptions", "organizations_url": "https://api.github.com/users/decentralion/orgs", "repos_url": "https://api.github.com/users/decentralion/repos", "events_url": "https://api.github.com/users/decentralion/events{/privacy}", "received_events_url": "https://api.github.com/users/decentralion/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-01-02T16:40:53Z", "updated_at": "2017-06-16T20:13:09Z", "closed_at": "2017-06-16T20:13:09Z", "author_association": "CONTRIBUTOR", "body_html": "<p>This is a feature request connected with pull request <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"188874729\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5558\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/5558/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/5558\">#5558</a>.</p>\n<p>The new summary interface only allows Python strings as summary names, while the old one could use string tensors.</p>\n<p>The new behaviour is considerably less flexible. Consider the case where you have train/devel/test data split, and you want to report summaries (<code>accuracy</code> for example) for each dataset individually (i.e., having them in three different graphs in TensorBoard). With the old summary interface, this can be accomplished nicely:</p>\n<div class=\"highlight highlight-source-python\"><pre>  dataset_name <span class=\"pl-k\">=</span> tf.placeholder(tf.string, [])\n  summary <span class=\"pl-k\">=</span> tf.scalar_summary(dataset_name<span class=\"pl-k\">+</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/accuracy<span class=\"pl-pds\">\"</span></span>, accuracy)\n<span class=\"pl-c1\">...</span>\n  s <span class=\"pl-k\">=</span> session.run([summary], {dataset_name:<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>train<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">/</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>devel<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">/</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>test<span class=\"pl-pds\">\"</span></span>})</pre></div>\n<p>With the new interface, there has to be three summary nodes in the Graph to accomplish this, which makes the code repetitive and more complicated to maintain (you can create the three nodes with different name scopes, but you have to store them somewhere [a dictionary?], and if you want to use these nodes after restoring a metagraph, things become unellegant).</p>\n<p>One possible solution is <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"188874729\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5558\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/5558/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/5558\">#5558</a>  -- that pull request adds a <code>prefix</code> to all summary operations. The <code>prefix</code> is added to all summary names and can be a string tensor. That would allow reporting summaries for different datasets, while being applicable to the \"new summary approach\" of naming the summary operations according to the summary names (i.e., with the new approach it is not possible for <code>name</code> to be string tensor, but a <code>prefix</code> is fine).</p>\n<p>The change <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"188874729\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5558\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/5558/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/5558\">#5558</a> is opt-in, so nobody interested in dynamic summary names is affected, while allowing much more flexible names to those interested, and I would like to see it merged.</p>\n<p>However, there could be other approaches how the problem could be solved. Therefore, I am opening this issue for discussion and finding the best solution.</p>", "body_text": "This is a feature request connected with pull request #5558.\nThe new summary interface only allows Python strings as summary names, while the old one could use string tensors.\nThe new behaviour is considerably less flexible. Consider the case where you have train/devel/test data split, and you want to report summaries (accuracy for example) for each dataset individually (i.e., having them in three different graphs in TensorBoard). With the old summary interface, this can be accomplished nicely:\n  dataset_name = tf.placeholder(tf.string, [])\n  summary = tf.scalar_summary(dataset_name+\"/accuracy\", accuracy)\n...\n  s = session.run([summary], {dataset_name:\"train\" / \"devel\" / \"test\"})\nWith the new interface, there has to be three summary nodes in the Graph to accomplish this, which makes the code repetitive and more complicated to maintain (you can create the three nodes with different name scopes, but you have to store them somewhere [a dictionary?], and if you want to use these nodes after restoring a metagraph, things become unellegant).\nOne possible solution is #5558  -- that pull request adds a prefix to all summary operations. The prefix is added to all summary names and can be a string tensor. That would allow reporting summaries for different datasets, while being applicable to the \"new summary approach\" of naming the summary operations according to the summary names (i.e., with the new approach it is not possible for name to be string tensor, but a prefix is fine).\nThe change #5558 is opt-in, so nobody interested in dynamic summary names is affected, while allowing much more flexible names to those interested, and I would like to see it merged.\nHowever, there could be other approaches how the problem could be solved. Therefore, I am opening this issue for discussion and finding the best solution.", "body": "This is a feature request connected with pull request #5558.\r\n\r\nThe new summary interface only allows Python strings as summary names, while the old one could use string tensors.\r\n\r\nThe new behaviour is considerably less flexible. Consider the case where you have train/devel/test data split, and you want to report summaries (`accuracy` for example) for each dataset individually (i.e., having them in three different graphs in TensorBoard). With the old summary interface, this can be accomplished nicely:\r\n```python\r\n  dataset_name = tf.placeholder(tf.string, [])\r\n  summary = tf.scalar_summary(dataset_name+\"/accuracy\", accuracy)\r\n...\r\n  s = session.run([summary], {dataset_name:\"train\" / \"devel\" / \"test\"})\r\n```\r\n\r\nWith the new interface, there has to be three summary nodes in the Graph to accomplish this, which makes the code repetitive and more complicated to maintain (you can create the three nodes with different name scopes, but you have to store them somewhere [a dictionary?], and if you want to use these nodes after restoring a metagraph, things become unellegant).\r\n\r\nOne possible solution is #5558  -- that pull request adds a `prefix` to all summary operations. The `prefix` is added to all summary names and can be a string tensor. That would allow reporting summaries for different datasets, while being applicable to the \"new summary approach\" of naming the summary operations according to the summary names (i.e., with the new approach it is not possible for `name` to be string tensor, but a `prefix` is fine).\r\n\r\nThe change #5558 is opt-in, so nobody interested in dynamic summary names is affected, while allowing much more flexible names to those interested, and I would like to see it merged.\r\n\r\nHowever, there could be other approaches how the problem could be solved. Therefore, I am opening this issue for discussion and finding the best solution."}
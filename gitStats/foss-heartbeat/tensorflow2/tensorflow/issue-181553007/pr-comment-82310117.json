{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/82310117", "pull_request_review_id": 3227924, "id": 82310117, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgyMzEwMTE3", "diff_hunk": "@@ -228,10 +225,15 @@ while true; do\n       cudnn_lib_path=\"${CUDNN_INSTALL_PATH}/lib/libcudnn.dylib\"\n       cudnn_alt_lib_path=\"${CUDNN_INSTALL_PATH}/libcudnn.dylib\"\n     fi\n+    # Resolve to the SONAME of the symlink.  Use readlink without -f\n+    # to resolve exactly once to the SONAME.  E.g, libcudnn.so ->\n+    # libcudnn.so.4.\n+    # If the path is not a symlink, readlink will exit with an error code, so\n+    # in that case, we return the path itself.\n     if [ -f \"$cudnn_lib_path\" ]; then\n-      REALVAL=`readlink -f ${cudnn_lib_path}`\n+      REALVAL=`readlink ${cudnn_lib_path} || echo \"${cudnn_lib_path}\"`", "path": "configure", "position": 21, "original_position": 21, "commit_id": "5396ee3ad3f3f8d5314556a004578d65ea68a07a", "original_commit_id": "5396ee3ad3f3f8d5314556a004578d65ea68a07a", "user": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "body": "Are we looking for the full path? echo seems to be not doing the same thing as readlink -f.\n", "created_at": "2016-10-07T00:04:19Z", "updated_at": "2016-10-07T00:04:19Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4806#discussion_r82310117", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4806", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/82310117"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4806#discussion_r82310117"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4806"}}, "body_html": "<p>Are we looking for the full path? echo seems to be not doing the same thing as readlink -f.</p>", "body_text": "Are we looking for the full path? echo seems to be not doing the same thing as readlink -f."}
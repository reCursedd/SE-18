{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2057", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2057/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2057/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2057/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2057", "id": 150198957, "node_id": "MDU6SXNzdWUxNTAxOTg5NTc=", "number": 2057, "title": "Word2Vec model crashes with unicode train data", "user": {"login": "shkarupa-alex", "id": 1289725, "node_id": "MDQ6VXNlcjEyODk3MjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1289725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shkarupa-alex", "html_url": "https://github.com/shkarupa-alex", "followers_url": "https://api.github.com/users/shkarupa-alex/followers", "following_url": "https://api.github.com/users/shkarupa-alex/following{/other_user}", "gists_url": "https://api.github.com/users/shkarupa-alex/gists{/gist_id}", "starred_url": "https://api.github.com/users/shkarupa-alex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shkarupa-alex/subscriptions", "organizations_url": "https://api.github.com/users/shkarupa-alex/orgs", "repos_url": "https://api.github.com/users/shkarupa-alex/repos", "events_url": "https://api.github.com/users/shkarupa-alex/events{/privacy}", "received_events_url": "https://api.github.com/users/shkarupa-alex/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "a-dai", "id": 14897069, "node_id": "MDQ6VXNlcjE0ODk3MDY5", "avatar_url": "https://avatars3.githubusercontent.com/u/14897069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a-dai", "html_url": "https://github.com/a-dai", "followers_url": "https://api.github.com/users/a-dai/followers", "following_url": "https://api.github.com/users/a-dai/following{/other_user}", "gists_url": "https://api.github.com/users/a-dai/gists{/gist_id}", "starred_url": "https://api.github.com/users/a-dai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a-dai/subscriptions", "organizations_url": "https://api.github.com/users/a-dai/orgs", "repos_url": "https://api.github.com/users/a-dai/repos", "events_url": "https://api.github.com/users/a-dai/events{/privacy}", "received_events_url": "https://api.github.com/users/a-dai/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "a-dai", "id": 14897069, "node_id": "MDQ6VXNlcjE0ODk3MDY5", "avatar_url": "https://avatars3.githubusercontent.com/u/14897069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a-dai", "html_url": "https://github.com/a-dai", "followers_url": "https://api.github.com/users/a-dai/followers", "following_url": "https://api.github.com/users/a-dai/following{/other_user}", "gists_url": "https://api.github.com/users/a-dai/gists{/gist_id}", "starred_url": "https://api.github.com/users/a-dai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a-dai/subscriptions", "organizations_url": "https://api.github.com/users/a-dai/orgs", "repos_url": "https://api.github.com/users/a-dai/repos", "events_url": "https://api.github.com/users/a-dai/events{/privacy}", "received_events_url": "https://api.github.com/users/a-dai/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-04-21T21:45:37Z", "updated_at": "2016-10-01T14:44:28Z", "closed_at": "2016-08-15T23:15:06Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System: OS X 10.11.3</p>\n<p>Installed version of CUDA and cuDNN: CUDA-7.5<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):<br>\nDeveloper/NVIDIA/CUDA-7.5/lib/libcudadevrt.a<br>\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib<br>\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib<br>\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a</p>\n<p>If installed from binary pip package, provide: 0.8.0rc0</p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Clone folder <a href=\"https://github.com/tensorflow/tensorflow/blob/r0.8/tensorflow/models/embedding/\">https://github.com/tensorflow/tensorflow/blob/r0.8/tensorflow/models/embedding/</a></li>\n<li>Run successful python word2vec_optimized.py --train_data=questions-words.txt --eval_data=questions-words.txt --save_path=model/</li>\n<li>Run failed if i add some unicode text in train data (e.g. russian word \"\u0442\u0435\u0441\u0442\")</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>Traceback (most recent call last):<br>\nFile \"../lib/word2vec/word2vec_optimized.py\", line 431, in <br>\ntf.app.run()<br>\nFile \"/usr/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"../lib/word2vec/word2vec_optimized.py\", line 416, in main<br>\nmodel = Word2Vec(opts, session)<br>\nFile \"../lib/word2vec/word2vec_optimized.py\", line 146, in <strong>init</strong><br>\nself.save_vocab()<br>\nFile \"../lib/word2vec/word2vec_optimized.py\", line 242, in save_vocab<br>\nopts.vocab_counts[i]))<br>\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)</p>", "body_text": "Environment info\nOperating System: OS X 10.11.3\nInstalled version of CUDA and cuDNN: CUDA-7.5\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\nDeveloper/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\nIf installed from binary pip package, provide: 0.8.0rc0\nSteps to reproduce\n\nClone folder https://github.com/tensorflow/tensorflow/blob/r0.8/tensorflow/models/embedding/\nRun successful python word2vec_optimized.py --train_data=questions-words.txt --eval_data=questions-words.txt --save_path=model/\nRun failed if i add some unicode text in train data (e.g. russian word \"\u0442\u0435\u0441\u0442\")\n\nLogs or other output that would be helpful\nTraceback (most recent call last):\nFile \"../lib/word2vec/word2vec_optimized.py\", line 431, in \ntf.app.run()\nFile \"/usr/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"../lib/word2vec/word2vec_optimized.py\", line 416, in main\nmodel = Word2Vec(opts, session)\nFile \"../lib/word2vec/word2vec_optimized.py\", line 146, in init\nself.save_vocab()\nFile \"../lib/word2vec/word2vec_optimized.py\", line 242, in save_vocab\nopts.vocab_counts[i]))\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)", "body": "### Environment info\n\nOperating System: OS X 10.11.3\n\nInstalled version of CUDA and cuDNN: CUDA-7.5\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\nDeveloper/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\n/Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\n\nIf installed from binary pip package, provide: 0.8.0rc0\n### Steps to reproduce\n1. Clone folder https://github.com/tensorflow/tensorflow/blob/r0.8/tensorflow/models/embedding/\n2. Run successful python word2vec_optimized.py --train_data=questions-words.txt --eval_data=questions-words.txt --save_path=model/\n3. Run failed if i add some unicode text in train data (e.g. russian word \"\u0442\u0435\u0441\u0442\")\n### Logs or other output that would be helpful\n\nTraceback (most recent call last):\n  File \"../lib/word2vec/word2vec_optimized.py\", line 431, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"../lib/word2vec/word2vec_optimized.py\", line 416, in main\n    model = Word2Vec(opts, session)\n  File \"../lib/word2vec/word2vec_optimized.py\", line 146, in **init**\n    self.save_vocab()\n  File \"../lib/word2vec/word2vec_optimized.py\", line 242, in save_vocab\n    opts.vocab_counts[i]))\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)\n"}
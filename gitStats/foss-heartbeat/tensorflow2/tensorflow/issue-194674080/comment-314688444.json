{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/314688444", "html_url": "https://github.com/tensorflow/tensorflow/issues/6220#issuecomment-314688444", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6220", "id": 314688444, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDY4ODQ0NA==", "user": {"login": "zhouyang209117", "id": 3378641, "node_id": "MDQ6VXNlcjMzNzg2NDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/3378641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhouyang209117", "html_url": "https://github.com/zhouyang209117", "followers_url": "https://api.github.com/users/zhouyang209117/followers", "following_url": "https://api.github.com/users/zhouyang209117/following{/other_user}", "gists_url": "https://api.github.com/users/zhouyang209117/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhouyang209117/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhouyang209117/subscriptions", "organizations_url": "https://api.github.com/users/zhouyang209117/orgs", "repos_url": "https://api.github.com/users/zhouyang209117/repos", "events_url": "https://api.github.com/users/zhouyang209117/events{/privacy}", "received_events_url": "https://api.github.com/users/zhouyang209117/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-12T08:08:11Z", "updated_at": "2017-07-12T23:09:50Z", "author_association": "NONE", "body_html": "<p>Find below a minimal version that causes the error:</p>\n<pre><code>import tensorflow as tf\nimport numpy as np\nclass SimpleModel:\n    def __init__(self):\n        self.loss = self.calc_loss()\n        self.train = self.train_model(self.loss)\n    def calc_loss(self):\n        W = tf.get_variable(\"w\", [1])\n        b = tf.Variable(tf.zeros([1]))\n        y = W * x_data + b\n        return tf.reduce_mean(tf.square(y - y_data))\n    def train_model(self, loss):\n        return tf.train.AdamOptimizer(0.5).minimize(loss)\n        # return tf.train.GradientDescentOptimizer(0.5)\nx_data = np.random.rand(100).astype(np.float32)\ny_data = x_data * 0.1 + 0.3\ns1 = SimpleModel()\ntf.get_variable_scope().reuse_variables()\ns2 = SimpleModel()\n</code></pre>\n<p>The error looks like this:</p>\n<pre><code> File \"D:\\MyProgram\\Install\\Anaconda3\\envs\\tensorflow121\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 682, in _get_single_variable\n    \"VarScope?\" % name)\nValueError: Variable embeddings/Adam_2/ does not exist, or was not created with tf.get_variable(). Did you mean to set reuse=None in VarScope?\n</code></pre>\n<p>tensorflow version</p>\n<pre><code>1.2.1\n</code></pre>", "body_text": "Find below a minimal version that causes the error:\nimport tensorflow as tf\nimport numpy as np\nclass SimpleModel:\n    def __init__(self):\n        self.loss = self.calc_loss()\n        self.train = self.train_model(self.loss)\n    def calc_loss(self):\n        W = tf.get_variable(\"w\", [1])\n        b = tf.Variable(tf.zeros([1]))\n        y = W * x_data + b\n        return tf.reduce_mean(tf.square(y - y_data))\n    def train_model(self, loss):\n        return tf.train.AdamOptimizer(0.5).minimize(loss)\n        # return tf.train.GradientDescentOptimizer(0.5)\nx_data = np.random.rand(100).astype(np.float32)\ny_data = x_data * 0.1 + 0.3\ns1 = SimpleModel()\ntf.get_variable_scope().reuse_variables()\ns2 = SimpleModel()\n\nThe error looks like this:\n File \"D:\\MyProgram\\Install\\Anaconda3\\envs\\tensorflow121\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 682, in _get_single_variable\n    \"VarScope?\" % name)\nValueError: Variable embeddings/Adam_2/ does not exist, or was not created with tf.get_variable(). Did you mean to set reuse=None in VarScope?\n\ntensorflow version\n1.2.1", "body": "Find below a minimal version that causes the error:\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\nclass SimpleModel:\r\n    def __init__(self):\r\n        self.loss = self.calc_loss()\r\n        self.train = self.train_model(self.loss)\r\n    def calc_loss(self):\r\n        W = tf.get_variable(\"w\", [1])\r\n        b = tf.Variable(tf.zeros([1]))\r\n        y = W * x_data + b\r\n        return tf.reduce_mean(tf.square(y - y_data))\r\n    def train_model(self, loss):\r\n        return tf.train.AdamOptimizer(0.5).minimize(loss)\r\n        # return tf.train.GradientDescentOptimizer(0.5)\r\nx_data = np.random.rand(100).astype(np.float32)\r\ny_data = x_data * 0.1 + 0.3\r\ns1 = SimpleModel()\r\ntf.get_variable_scope().reuse_variables()\r\ns2 = SimpleModel()\r\n```\r\nThe error looks like this:\r\n```\r\n File \"D:\\MyProgram\\Install\\Anaconda3\\envs\\tensorflow121\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 682, in _get_single_variable\r\n    \"VarScope?\" % name)\r\nValueError: Variable embeddings/Adam_2/ does not exist, or was not created with tf.get_variable(). Did you mean to set reuse=None in VarScope?\r\n```\r\ntensorflow version\r\n```\r\n1.2.1\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17502", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17502/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17502/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17502/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17502", "id": 303019600, "node_id": "MDU6SXNzdWUzMDMwMTk2MDA=", "number": 17502, "title": "Tensorflow failed when build with MSVC + /permissive-", "user": {"login": "PhoebeHui", "id": 20694052, "node_id": "MDQ6VXNlcjIwNjk0MDUy", "avatar_url": "https://avatars2.githubusercontent.com/u/20694052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PhoebeHui", "html_url": "https://github.com/PhoebeHui", "followers_url": "https://api.github.com/users/PhoebeHui/followers", "following_url": "https://api.github.com/users/PhoebeHui/following{/other_user}", "gists_url": "https://api.github.com/users/PhoebeHui/gists{/gist_id}", "starred_url": "https://api.github.com/users/PhoebeHui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PhoebeHui/subscriptions", "organizations_url": "https://api.github.com/users/PhoebeHui/orgs", "repos_url": "https://api.github.com/users/PhoebeHui/repos", "events_url": "https://api.github.com/users/PhoebeHui/events{/privacy}", "received_events_url": "https://api.github.com/users/PhoebeHui/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-03-07T09:17:23Z", "updated_at": "2018-03-30T18:45:15Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>System information<br>\n\u2022\tHave I written custom code (as opposed to using a stock example script provided in TensorFlow):<br>\nN/A<br>\n\u2022\tOS Platform and Distribution (e.g., Linux Ubuntu 16.04):<br>\nWindows server 2016<br>\n\u2022\tTensorFlow installed from (source or binary):<br>\nSource<br>\n\u2022\tTensorFlow version (use command below):<br>\nMaster branch latest revison<br>\n\u2022\tPython version:<br>\nAnaconda 4.1.1 (Python 3.5 64-bit)<br>\n\u2022\tBazel version (if compiling from source):<br>\nN/A<br>\n\u2022\tGCC/Compiler version (if compiling from source):<br>\nVS2017 15.5.7<br>\n\u2022\tCUDA/cuDNN version:<br>\nNVidia CUDA Toolkit 8.0<br>\nNVidia CUDNN 5.1<br>\n\u2022\tGPU model and memory:<br>\nN/A<br>\n\u2022\tExact command to reproduce:<br>\nN/A</p>\n<p>Describe the problem<br>\nTensorflow failed when build with /permissive- by using msvc on windows. This should be tensorflow source issue, could you help fix it?</p>\n<p>The failures like:<br>\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(61): error C2440: 'initializing': cannot convert from 'const char [21]' to 'char *const '<br>\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(61): note: Conversion from string literal loses const qualifier (see /Zc:strictStrings)<br>\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(69): error C2440: 'initializing': cannot convert from 'const char [22]' to 'char *const '<br>\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(69): note: Conversion from string literal loses const qualifier (see /Zc:strictStrings)<br>\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(182): error C2737: 'tensorflow::MemmappedFileSystem::kMemmappedPackagePrefix': 'constexpr' object must be initialized<br>\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(182): error C2734: 'tensorflow::MemmappedFileSystem::kMemmappedPackagePrefix': 'const' object must be initialized if not 'extern'<br>\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(183): error C2737: 'tensorflow::MemmappedFileSystem::kMemmappedPackageDefaultGraphDef': 'constexpr' object must be initialized<br>\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(183): error C2734: 'tensorflow::MemmappedFileSystem::kMemmappedPackageDefaultGraphDef': 'const' object must be initialized if not 'extern'</p>\n<p>Repro steps:</p>\n<ol>\n<li>git clone  <a href=\"https://github.com/tensorflow/tensorflow\">https://github.com/tensorflow/tensorflow</a> D:\\Tensorflow\\src</li>\n<li>pushd D:\\Tensorflow</li>\n<li>set PreferredToolArchitecture=x64</li>\n<li>set rel=Release</li>\n<li>set CUDNN_HOME=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.0\\cuda\"</li>\n<li>set PY=C:\\ProgramData\\Anaconda3</li>\n<li>set <em>CL</em>=/FS /permissive-</li>\n<li>cmake D:\\Tensorflow\\src\\tensorflow\\contrib\\cmake -A x64 -DCMAKE_BUILD_TYPE=Release -DPYTHON_EXECUTABLE=C:\\ProgramData\\Anaconda3\\python.exe -DPYTHON_LIBRARIES=C:\\ProgramData\\Anaconda3\\libs\\python36.lib -DSWIG_EXECUTABLE=D:\\Tensorflow\\swigwin-3.0.12\\swig.exe -Dtensorflow_BUILD_PYTHON_TESTS=ON -Dtensorflow_BUILD_SHARED_LIB=ON</li>\n<li>MSBuild /m /p:Configuration=Release;Platform=x64 /p:WindowsTargetPlatformVersion=10.0.16299.0 tensorflow.sln /t:Rebuild</li>\n</ol>", "body_text": "System information\n\u2022\tHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nN/A\n\u2022\tOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nWindows server 2016\n\u2022\tTensorFlow installed from (source or binary):\nSource\n\u2022\tTensorFlow version (use command below):\nMaster branch latest revison\n\u2022\tPython version:\nAnaconda 4.1.1 (Python 3.5 64-bit)\n\u2022\tBazel version (if compiling from source):\nN/A\n\u2022\tGCC/Compiler version (if compiling from source):\nVS2017 15.5.7\n\u2022\tCUDA/cuDNN version:\nNVidia CUDA Toolkit 8.0\nNVidia CUDNN 5.1\n\u2022\tGPU model and memory:\nN/A\n\u2022\tExact command to reproduce:\nN/A\nDescribe the problem\nTensorflow failed when build with /permissive- by using msvc on windows. This should be tensorflow source issue, could you help fix it?\nThe failures like:\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(61): error C2440: 'initializing': cannot convert from 'const char [21]' to 'char *const '\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(61): note: Conversion from string literal loses const qualifier (see /Zc:strictStrings)\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(69): error C2440: 'initializing': cannot convert from 'const char [22]' to 'char *const '\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(69): note: Conversion from string literal loses const qualifier (see /Zc:strictStrings)\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(182): error C2737: 'tensorflow::MemmappedFileSystem::kMemmappedPackagePrefix': 'constexpr' object must be initialized\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(182): error C2734: 'tensorflow::MemmappedFileSystem::kMemmappedPackagePrefix': 'const' object must be initialized if not 'extern'\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(183): error C2737: 'tensorflow::MemmappedFileSystem::kMemmappedPackageDefaultGraphDef': 'constexpr' object must be initialized\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(183): error C2734: 'tensorflow::MemmappedFileSystem::kMemmappedPackageDefaultGraphDef': 'const' object must be initialized if not 'extern'\nRepro steps:\n\ngit clone  https://github.com/tensorflow/tensorflow D:\\Tensorflow\\src\npushd D:\\Tensorflow\nset PreferredToolArchitecture=x64\nset rel=Release\nset CUDNN_HOME=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.0\\cuda\"\nset PY=C:\\ProgramData\\Anaconda3\nset CL=/FS /permissive-\ncmake D:\\Tensorflow\\src\\tensorflow\\contrib\\cmake -A x64 -DCMAKE_BUILD_TYPE=Release -DPYTHON_EXECUTABLE=C:\\ProgramData\\Anaconda3\\python.exe -DPYTHON_LIBRARIES=C:\\ProgramData\\Anaconda3\\libs\\python36.lib -DSWIG_EXECUTABLE=D:\\Tensorflow\\swigwin-3.0.12\\swig.exe -Dtensorflow_BUILD_PYTHON_TESTS=ON -Dtensorflow_BUILD_SHARED_LIB=ON\nMSBuild /m /p:Configuration=Release;Platform=x64 /p:WindowsTargetPlatformVersion=10.0.16299.0 tensorflow.sln /t:Rebuild", "body": "System information\r\n\u2022\tHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nN/A \r\n\u2022\tOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows server 2016\r\n\u2022\tTensorFlow installed from (source or binary):\r\nSource\r\n\u2022\tTensorFlow version (use command below):\r\nMaster branch latest revison\r\n\u2022\tPython version:\r\nAnaconda 4.1.1 (Python 3.5 64-bit) \r\n\u2022\tBazel version (if compiling from source):\r\nN/A\r\n\u2022\tGCC/Compiler version (if compiling from source):\r\nVS2017 15.5.7\r\n\u2022\tCUDA/cuDNN version:\r\nNVidia CUDA Toolkit 8.0\r\nNVidia CUDNN 5.1\r\n\u2022\tGPU model and memory:\r\nN/A\r\n\u2022\tExact command to reproduce:\r\nN/A\r\n\r\nDescribe the problem\r\nTensorflow failed when build with /permissive- by using msvc on windows. This should be tensorflow source issue, could you help fix it?\r\n\r\nThe failures like:\r\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(61): error C2440: 'initializing': cannot convert from 'const char [21]' to 'char *const '\r\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(61): note: Conversion from string literal loses const qualifier (see /Zc:strictStrings)\r\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(69): error C2440: 'initializing': cannot convert from 'const char [22]' to 'char *const '\r\nD:\\Tensorflow\\src\\tensorflow/core/util/memmapped_file_system.h(69): note: Conversion from string literal loses const qualifier (see /Zc:strictStrings)\r\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(182): error C2737: 'tensorflow::MemmappedFileSystem::kMemmappedPackagePrefix': 'constexpr' object must be initialized\r\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(182): error C2734: 'tensorflow::MemmappedFileSystem::kMemmappedPackagePrefix': 'const' object must be initialized if not 'extern'\r\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(183): error C2737: 'tensorflow::MemmappedFileSystem::kMemmappedPackageDefaultGraphDef': 'constexpr' object must be initialized\r\nD:\\Tensorflow\\src\\tensorflow\\core\\util\\memmapped_file_system.cc(183): error C2734: 'tensorflow::MemmappedFileSystem::kMemmappedPackageDefaultGraphDef': 'const' object must be initialized if not 'extern'\r\n\r\nRepro steps:\r\n1.\tgit clone  https://github.com/tensorflow/tensorflow D:\\Tensorflow\\src\r\n2.\tpushd D:\\Tensorflow\r\n3.\tset PreferredToolArchitecture=x64\r\n4.\tset rel=Release\r\n5.\tset CUDNN_HOME=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.0\\cuda\"\r\n6.\tset PY=C:\\ProgramData\\Anaconda3\r\n7.\tset _CL_=/FS /permissive-\r\n8.\tcmake D:\\Tensorflow\\src\\tensorflow\\contrib\\cmake -A x64 -DCMAKE_BUILD_TYPE=Release -DPYTHON_EXECUTABLE=C:\\ProgramData\\Anaconda3\\python.exe -DPYTHON_LIBRARIES=C:\\ProgramData\\Anaconda3\\libs\\python36.lib -DSWIG_EXECUTABLE=D:\\Tensorflow\\swigwin-3.0.12\\swig.exe -Dtensorflow_BUILD_PYTHON_TESTS=ON -Dtensorflow_BUILD_SHARED_LIB=ON\r\n9. MSBuild /m /p:Configuration=Release;Platform=x64 /p:WindowsTargetPlatformVersion=10.0.16299.0 tensorflow.sln /t:Rebuild\r\n"}
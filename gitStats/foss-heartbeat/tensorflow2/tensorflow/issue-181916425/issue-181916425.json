{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4865", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4865/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4865/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4865/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4865", "id": 181916425, "node_id": "MDU6SXNzdWUxODE5MTY0MjU=", "number": 4865, "title": "GraphDef duplication in event log", "user": {"login": "eric-czech", "id": 6130352, "node_id": "MDQ6VXNlcjYxMzAzNTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/6130352?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eric-czech", "html_url": "https://github.com/eric-czech", "followers_url": "https://api.github.com/users/eric-czech/followers", "following_url": "https://api.github.com/users/eric-czech/following{/other_user}", "gists_url": "https://api.github.com/users/eric-czech/gists{/gist_id}", "starred_url": "https://api.github.com/users/eric-czech/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eric-czech/subscriptions", "organizations_url": "https://api.github.com/users/eric-czech/orgs", "repos_url": "https://api.github.com/users/eric-czech/repos", "events_url": "https://api.github.com/users/eric-czech/events{/privacy}", "received_events_url": "https://api.github.com/users/eric-czech/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2016-10-09T22:32:58Z", "updated_at": "2018-10-20T12:30:18Z", "closed_at": "2017-06-16T19:01:44Z", "author_association": "NONE", "body_html": "<p>This is a little difficult to explain, and I'm guessing someone has to have run into it before, but it would be nice to at least get an explanation for what's going on here.</p>\n<p>The issue I'm finding is that when you specify a <code>model_dir</code> argument for any tflearn model, the first time you fit that model, the tensorboard warning like the following will always appear:</p>\n<p><code>WARNING:tensorflow:Found more than one graph event per run. Overwriting the graph with the newest event.</code></p>\n<p>If you clear the contents of that directory and rerun the same model, the warning no longer appears.</p>\n<p>For example, here is a piece of code to reproduce:</p>\n<pre><code>import tensorflow as tf\nimport random\n\nfrom tensorflow.contrib.learn.python import learn\nfrom tensorflow.contrib.learn.python.learn import datasets\nfrom tensorflow.contrib.learn.python.learn.estimators._sklearn import accuracy_score\nfrom tensorflow.contrib.learn.python.learn.estimators._sklearn import train_test_split\nrandom.seed(42)\n\niris = datasets.load_iris()\nx_train, x_test, y_train, y_test = train_test_split(iris.data,\n                                                    iris.target,\n                                                    test_size=0.2,\n                                                    random_state=42)\n\ndef custom_optimizer(learning_rate):\n    return tf.train.MomentumOptimizer(learning_rate, 0.9)\n\nclassifier = learn.TensorFlowDNNClassifier(\n    hidden_units=[10, 20, 10],\n    n_classes=3,\n    steps=400,\n    learning_rate=0.01,\n    optimizer=custom_optimizer,\n    model_dir='/tmp/tf/bug_test_1')\nclassifier.fit(x_train, y_train)\n</code></pre>\n<p>If you run this in a jupyter notebook, wait until it is done, cd into <code>/tmp/tf/bug_test_1</code>, and run <code>tensorboard --logdir=.</code>, the warning will appear.  If you clear the contents and run again, it will no longer appear.  If you, in the same notebook within the same kernel, change the directory to something else (e.g. <code>/tmp/tf/bug_test_2</code>) and run again, the warning will again appear.  And the warning will again go away if you clear the contents and run again with the same directory.</p>\n<p>I also tried pre-creating the directory but that appears to make no difference.</p>\n<p>I wouldn't imagine this indicates a major problem but I try to take those warnings seriously since they have indicated more problematic issues in the past with running multiple models in the same kernel, so it would be great to know what this means.</p>\n<h3>Environment info</h3>\n<p>Operating System: OS X Yosemite (10.10.5)<br>\nTensorflow Version: 0.10.0</p>", "body_text": "This is a little difficult to explain, and I'm guessing someone has to have run into it before, but it would be nice to at least get an explanation for what's going on here.\nThe issue I'm finding is that when you specify a model_dir argument for any tflearn model, the first time you fit that model, the tensorboard warning like the following will always appear:\nWARNING:tensorflow:Found more than one graph event per run. Overwriting the graph with the newest event.\nIf you clear the contents of that directory and rerun the same model, the warning no longer appears.\nFor example, here is a piece of code to reproduce:\nimport tensorflow as tf\nimport random\n\nfrom tensorflow.contrib.learn.python import learn\nfrom tensorflow.contrib.learn.python.learn import datasets\nfrom tensorflow.contrib.learn.python.learn.estimators._sklearn import accuracy_score\nfrom tensorflow.contrib.learn.python.learn.estimators._sklearn import train_test_split\nrandom.seed(42)\n\niris = datasets.load_iris()\nx_train, x_test, y_train, y_test = train_test_split(iris.data,\n                                                    iris.target,\n                                                    test_size=0.2,\n                                                    random_state=42)\n\ndef custom_optimizer(learning_rate):\n    return tf.train.MomentumOptimizer(learning_rate, 0.9)\n\nclassifier = learn.TensorFlowDNNClassifier(\n    hidden_units=[10, 20, 10],\n    n_classes=3,\n    steps=400,\n    learning_rate=0.01,\n    optimizer=custom_optimizer,\n    model_dir='/tmp/tf/bug_test_1')\nclassifier.fit(x_train, y_train)\n\nIf you run this in a jupyter notebook, wait until it is done, cd into /tmp/tf/bug_test_1, and run tensorboard --logdir=., the warning will appear.  If you clear the contents and run again, it will no longer appear.  If you, in the same notebook within the same kernel, change the directory to something else (e.g. /tmp/tf/bug_test_2) and run again, the warning will again appear.  And the warning will again go away if you clear the contents and run again with the same directory.\nI also tried pre-creating the directory but that appears to make no difference.\nI wouldn't imagine this indicates a major problem but I try to take those warnings seriously since they have indicated more problematic issues in the past with running multiple models in the same kernel, so it would be great to know what this means.\nEnvironment info\nOperating System: OS X Yosemite (10.10.5)\nTensorflow Version: 0.10.0", "body": "This is a little difficult to explain, and I'm guessing someone has to have run into it before, but it would be nice to at least get an explanation for what's going on here.\n\nThe issue I'm finding is that when you specify a `model_dir` argument for any tflearn model, the first time you fit that model, the tensorboard warning like the following will always appear:\n\n`WARNING:tensorflow:Found more than one graph event per run. Overwriting the graph with the newest event.`\n\nIf you clear the contents of that directory and rerun the same model, the warning no longer appears.\n\nFor example, here is a piece of code to reproduce:\n\n```\nimport tensorflow as tf\nimport random\n\nfrom tensorflow.contrib.learn.python import learn\nfrom tensorflow.contrib.learn.python.learn import datasets\nfrom tensorflow.contrib.learn.python.learn.estimators._sklearn import accuracy_score\nfrom tensorflow.contrib.learn.python.learn.estimators._sklearn import train_test_split\nrandom.seed(42)\n\niris = datasets.load_iris()\nx_train, x_test, y_train, y_test = train_test_split(iris.data,\n                                                    iris.target,\n                                                    test_size=0.2,\n                                                    random_state=42)\n\ndef custom_optimizer(learning_rate):\n    return tf.train.MomentumOptimizer(learning_rate, 0.9)\n\nclassifier = learn.TensorFlowDNNClassifier(\n    hidden_units=[10, 20, 10],\n    n_classes=3,\n    steps=400,\n    learning_rate=0.01,\n    optimizer=custom_optimizer,\n    model_dir='/tmp/tf/bug_test_1')\nclassifier.fit(x_train, y_train)\n```\n\nIf you run this in a jupyter notebook, wait until it is done, cd into `/tmp/tf/bug_test_1`, and run `tensorboard --logdir=.`, the warning will appear.  If you clear the contents and run again, it will no longer appear.  If you, in the same notebook within the same kernel, change the directory to something else (e.g. `/tmp/tf/bug_test_2`) and run again, the warning will again appear.  And the warning will again go away if you clear the contents and run again with the same directory.\n\nI also tried pre-creating the directory but that appears to make no difference.\n\nI wouldn't imagine this indicates a major problem but I try to take those warnings seriously since they have indicated more problematic issues in the past with running multiple models in the same kernel, so it would be great to know what this means.\n### Environment info\n\nOperating System: OS X Yosemite (10.10.5)\nTensorflow Version: 0.10.0\n"}
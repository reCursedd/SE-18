{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/289786646", "html_url": "https://github.com/tensorflow/tensorflow/issues/6048#issuecomment-289786646", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6048", "id": 289786646, "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTc4NjY0Ng==", "user": {"login": "cnzero", "id": 16307627, "node_id": "MDQ6VXNlcjE2MzA3NjI3", "avatar_url": "https://avatars3.githubusercontent.com/u/16307627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cnzero", "html_url": "https://github.com/cnzero", "followers_url": "https://api.github.com/users/cnzero/followers", "following_url": "https://api.github.com/users/cnzero/following{/other_user}", "gists_url": "https://api.github.com/users/cnzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/cnzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cnzero/subscriptions", "organizations_url": "https://api.github.com/users/cnzero/orgs", "repos_url": "https://api.github.com/users/cnzero/repos", "events_url": "https://api.github.com/users/cnzero/events{/privacy}", "received_events_url": "https://api.github.com/users/cnzero/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-28T14:24:21Z", "updated_at": "2017-03-28T14:24:21Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=49262\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jart\">@jart</a> Hi. I am a new learner of TF. And I have similar problem as the above. I have tested the solution of <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15676913\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/poxvoculi\">@poxvoculi</a> , but it didn't work anyway.<br>\nThe following is my problem description:<br>\nCodes are from the TF official website, <a href=\"https://www.tensorflow.org/get_started/get_started#basic_usage\" rel=\"nofollow\">Basic usage</a><br>\nI set up a virtual environment of Python+TensorFlow-gpu on Ubuntu 16.04<br>\nterminal prompting information as following:</p>\n<pre><code>(tfStarted) zero@zero:$ python officialBasicUsage.py \nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\nWARNING:tensorflow:Using temporary folder as model directory: /tmp/tmpJkInjp\nWARNING:tensorflow:Rank of input Tensor (1) should be the same as output_rank (2) for column. Will attempt to expand dims. It is highly recommended that you resize your input, as this behavior may change.\nWARNING:tensorflow:From /home/zero/ownCloud/DeepLearning/TensorflowCode/tfStarted/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/head.py:1362: scalar_summary (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2016-11-30.\nInstructions for updating:\nPlease switch to tf.summary.scalar. Note that tf.summary.scalar uses the node name instead of the tag. This means that TensorFlow will automatically de-duplicate summary names based on the scope they are created in. Also, passing a tensor or list of tags to a scalar summary op is no longer supported.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \nname: GeForce GTX 1080\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.835\npciBusID 0000:03:00.0\nTotal memory: 7.92GiB\nFree memory: 7.30GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX 1080, pci bus id: 0000:03:00.0)\nE tensorflow/stream_executor/cuda/cuda_driver.cc:1002] failed to allocate 7.92G (8499167232 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nWARNING:tensorflow:Rank of input Tensor (1) should be the same as output_rank (2) for column. Will attempt to expand dims. It is highly recommended that you resize your input, as this behavior may change.\nWARNING:tensorflow:From /home/zero/ownCloud/DeepLearning/TensorflowCode/tfStarted/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/head.py:1362: scalar_summary (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2016-11-30.\nInstructions for updating:\nPlease switch to tf.summary.scalar. Note that tf.summary.scalar uses the node name instead of the tag. This means that TensorFlow will automatically de-duplicate summary names based on the scope they are created in. Also, passing a tensor or list of tags to a scalar summary op is no longer supported.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX 1080, pci bus id: 0000:03:00.0)\nW tensorflow/core/framework/op_kernel.cc:993] Out of range: RandomShuffleQueue '_1_enqueue_input/random_shuffle_queue' is closed and has insufficient elements (requested 4, current size 0)\n\t [[Node: random_shuffle_queue_DequeueUpTo = QueueDequeueUpToV2[component_types=[DT_INT64, DT_DOUBLE, DT_DOUBLE, DT_DOUBLE], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](enqueue_input/random_shuffle_queue, random_shuffle_queue_DequeueUpTo/n)]]\nWARNING:tensorflow:Skipping summary for global_step, must be a float or np.float32.\n\n</code></pre>\n<p>Even through solution of poxvoculi was involved, problem  is still there.<br>\nI have searched such problem in Google with keywords--\"failed to allocate from device CUDA_ERROR_OUT_OF_MEMORY\"<br>\nAnd there is a similar Q&amp;A in <a href=\"http://stackoverflow.com/questions/34514324/error-using-tensorflow-with-gpu\" rel=\"nofollow\">stackoverflow</a>, like poxvoculi's, but it doesn't work.<br>\nSo, what's the real problem? GPU capacity allocation error? or others?<br>\nAnd how can I solve this? Thank you very much.</p>", "body_text": "@jart Hi. I am a new learner of TF. And I have similar problem as the above. I have tested the solution of @poxvoculi , but it didn't work anyway.\nThe following is my problem description:\nCodes are from the TF official website, Basic usage\nI set up a virtual environment of Python+TensorFlow-gpu on Ubuntu 16.04\nterminal prompting information as following:\n(tfStarted) zero@zero:$ python officialBasicUsage.py \nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\nWARNING:tensorflow:Using temporary folder as model directory: /tmp/tmpJkInjp\nWARNING:tensorflow:Rank of input Tensor (1) should be the same as output_rank (2) for column. Will attempt to expand dims. It is highly recommended that you resize your input, as this behavior may change.\nWARNING:tensorflow:From /home/zero/ownCloud/DeepLearning/TensorflowCode/tfStarted/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/head.py:1362: scalar_summary (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2016-11-30.\nInstructions for updating:\nPlease switch to tf.summary.scalar. Note that tf.summary.scalar uses the node name instead of the tag. This means that TensorFlow will automatically de-duplicate summary names based on the scope they are created in. Also, passing a tensor or list of tags to a scalar summary op is no longer supported.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \nname: GeForce GTX 1080\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.835\npciBusID 0000:03:00.0\nTotal memory: 7.92GiB\nFree memory: 7.30GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:03:00.0)\nE tensorflow/stream_executor/cuda/cuda_driver.cc:1002] failed to allocate 7.92G (8499167232 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nWARNING:tensorflow:Rank of input Tensor (1) should be the same as output_rank (2) for column. Will attempt to expand dims. It is highly recommended that you resize your input, as this behavior may change.\nWARNING:tensorflow:From /home/zero/ownCloud/DeepLearning/TensorflowCode/tfStarted/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/head.py:1362: scalar_summary (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2016-11-30.\nInstructions for updating:\nPlease switch to tf.summary.scalar. Note that tf.summary.scalar uses the node name instead of the tag. This means that TensorFlow will automatically de-duplicate summary names based on the scope they are created in. Also, passing a tensor or list of tags to a scalar summary op is no longer supported.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:03:00.0)\nW tensorflow/core/framework/op_kernel.cc:993] Out of range: RandomShuffleQueue '_1_enqueue_input/random_shuffle_queue' is closed and has insufficient elements (requested 4, current size 0)\n\t [[Node: random_shuffle_queue_DequeueUpTo = QueueDequeueUpToV2[component_types=[DT_INT64, DT_DOUBLE, DT_DOUBLE, DT_DOUBLE], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](enqueue_input/random_shuffle_queue, random_shuffle_queue_DequeueUpTo/n)]]\nWARNING:tensorflow:Skipping summary for global_step, must be a float or np.float32.\n\n\nEven through solution of poxvoculi was involved, problem  is still there.\nI have searched such problem in Google with keywords--\"failed to allocate from device CUDA_ERROR_OUT_OF_MEMORY\"\nAnd there is a similar Q&A in stackoverflow, like poxvoculi's, but it doesn't work.\nSo, what's the real problem? GPU capacity allocation error? or others?\nAnd how can I solve this? Thank you very much.", "body": "@jart Hi. I am a new learner of TF. And I have similar problem as the above. I have tested the solution of @poxvoculi , but it didn't work anyway.\r\nThe following is my problem description:\r\nCodes are from the TF official website, [Basic usage](https://www.tensorflow.org/get_started/get_started#basic_usage)\r\nI set up a virtual environment of Python+TensorFlow-gpu on Ubuntu 16.04\r\nterminal prompting information as following:\r\n```\r\n(tfStarted) zero@zero:$ python officialBasicUsage.py \r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\nWARNING:tensorflow:Using temporary folder as model directory: /tmp/tmpJkInjp\r\nWARNING:tensorflow:Rank of input Tensor (1) should be the same as output_rank (2) for column. Will attempt to expand dims. It is highly recommended that you resize your input, as this behavior may change.\r\nWARNING:tensorflow:From /home/zero/ownCloud/DeepLearning/TensorflowCode/tfStarted/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/head.py:1362: scalar_summary (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2016-11-30.\r\nInstructions for updating:\r\nPlease switch to tf.summary.scalar. Note that tf.summary.scalar uses the node name instead of the tag. This means that TensorFlow will automatically de-duplicate summary names based on the scope they are created in. Also, passing a tensor or list of tags to a scalar summary op is no longer supported.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \r\nname: GeForce GTX 1080\r\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.835\r\npciBusID 0000:03:00.0\r\nTotal memory: 7.92GiB\r\nFree memory: 7.30GiB\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:03:00.0)\r\nE tensorflow/stream_executor/cuda/cuda_driver.cc:1002] failed to allocate 7.92G (8499167232 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nWARNING:tensorflow:Rank of input Tensor (1) should be the same as output_rank (2) for column. Will attempt to expand dims. It is highly recommended that you resize your input, as this behavior may change.\r\nWARNING:tensorflow:From /home/zero/ownCloud/DeepLearning/TensorflowCode/tfStarted/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/head.py:1362: scalar_summary (from tensorflow.python.ops.logging_ops) is deprecated and will be removed after 2016-11-30.\r\nInstructions for updating:\r\nPlease switch to tf.summary.scalar. Note that tf.summary.scalar uses the node name instead of the tag. This means that TensorFlow will automatically de-duplicate summary names based on the scope they are created in. Also, passing a tensor or list of tags to a scalar summary op is no longer supported.\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:03:00.0)\r\nW tensorflow/core/framework/op_kernel.cc:993] Out of range: RandomShuffleQueue '_1_enqueue_input/random_shuffle_queue' is closed and has insufficient elements (requested 4, current size 0)\r\n\t [[Node: random_shuffle_queue_DequeueUpTo = QueueDequeueUpToV2[component_types=[DT_INT64, DT_DOUBLE, DT_DOUBLE, DT_DOUBLE], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](enqueue_input/random_shuffle_queue, random_shuffle_queue_DequeueUpTo/n)]]\r\nWARNING:tensorflow:Skipping summary for global_step, must be a float or np.float32.\r\n\r\n```\r\nEven through solution of poxvoculi was involved, problem  is still there. \r\nI have searched such problem in Google with keywords--\"failed to allocate from device CUDA_ERROR_OUT_OF_MEMORY\"\r\nAnd there is a similar Q&A in [stackoverflow](http://stackoverflow.com/questions/34514324/error-using-tensorflow-with-gpu), like poxvoculi's, but it doesn't work.\r\nSo, what's the real problem? GPU capacity allocation error? or others?\r\nAnd how can I solve this? Thank you very much."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17177", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17177/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17177/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17177/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17177", "id": 299145726, "node_id": "MDU6SXNzdWUyOTkxNDU3MjY=", "number": 17177, "title": "logits or log probabilities?", "user": {"login": "jacksonloper", "id": 2056977, "node_id": "MDQ6VXNlcjIwNTY5Nzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/2056977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jacksonloper", "html_url": "https://github.com/jacksonloper", "followers_url": "https://api.github.com/users/jacksonloper/followers", "following_url": "https://api.github.com/users/jacksonloper/following{/other_user}", "gists_url": "https://api.github.com/users/jacksonloper/gists{/gist_id}", "starred_url": "https://api.github.com/users/jacksonloper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jacksonloper/subscriptions", "organizations_url": "https://api.github.com/users/jacksonloper/orgs", "repos_url": "https://api.github.com/users/jacksonloper/repos", "events_url": "https://api.github.com/users/jacksonloper/events{/privacy}", "received_events_url": "https://api.github.com/users/jacksonloper/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-02-21T22:03:16Z", "updated_at": "2018-05-04T01:16:46Z", "closed_at": "2018-05-04T01:16:46Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4 and 1.5</li>\n<li><strong>Python version</strong>:  3.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>: Tried several</li>\n<li><strong>GPU model and memory</strong>: CPU and GPU, but GPU was nvidia p100</li>\n<li><strong>Exact command to reproduce</strong>: See \"source code\" below</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>There seems to be some confusion about logits vs log probabilities.  In some cases logits seem to mean just log probabilities.  In other cases they seem to mean actual logits, <code>log(p/(1-p))</code> which is quite a different thing.  It seems possible to me that this is causing downstream bugs, potentially big ones in edward, though I haven't looked closely.</p>\n<p>Other people <a href=\"https://stackoverflow.com/questions/41455101/what-is-the-meaning-of-the-word-logits-in-tensorflow\" rel=\"nofollow\">also seem confused</a>.</p>\n<h3>Source code / logs</h3>\n<pre><code>import tensorflow as tf\nfrom tensorflow.python.ops.distributions import util as distribution_util\nimport numpy as np\n\ntf.reset_default_graph()\nsess=tf.Session()\n\ninp = tf.placeholder(dtype=tf.float32)\nlogits,probs=distribution_util.get_logits_and_probs(logits=inp)\n\ncateg=tf.distributions.Categorical(logits=inp)\nvals=categ.sample(100000)\n\nprobsv,valsv=sess.run([probs,vals],feed_dict={inp:np.log([.2,.3,.5])})\n\nprint(probsv)\nprint([np.mean(valsv==x) for x in range(3)])\n</code></pre>\n<pre><code>[0.16666667 0.23076922 0.33333334]\n[0.20078, 0.29984, 0.49938]\n</code></pre>\n<p>So in some cases <code>logits</code> seems to mean log probabilities, but on other cases<br>\nit seem to actually mean logits.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\nTensorFlow installed from (source or binary): Binary\nTensorFlow version (use command below): 1.4 and 1.5\nPython version:  3.6\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source):\nCUDA/cuDNN version: Tried several\nGPU model and memory: CPU and GPU, but GPU was nvidia p100\nExact command to reproduce: See \"source code\" below\n\nDescribe the problem\nThere seems to be some confusion about logits vs log probabilities.  In some cases logits seem to mean just log probabilities.  In other cases they seem to mean actual logits, log(p/(1-p)) which is quite a different thing.  It seems possible to me that this is causing downstream bugs, potentially big ones in edward, though I haven't looked closely.\nOther people also seem confused.\nSource code / logs\nimport tensorflow as tf\nfrom tensorflow.python.ops.distributions import util as distribution_util\nimport numpy as np\n\ntf.reset_default_graph()\nsess=tf.Session()\n\ninp = tf.placeholder(dtype=tf.float32)\nlogits,probs=distribution_util.get_logits_and_probs(logits=inp)\n\ncateg=tf.distributions.Categorical(logits=inp)\nvals=categ.sample(100000)\n\nprobsv,valsv=sess.run([probs,vals],feed_dict={inp:np.log([.2,.3,.5])})\n\nprint(probsv)\nprint([np.mean(valsv==x) for x in range(3)])\n\n[0.16666667 0.23076922 0.33333334]\n[0.20078, 0.29984, 0.49938]\n\nSo in some cases logits seems to mean log probabilities, but on other cases\nit seem to actually mean logits.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: Binary\r\n- **TensorFlow version (use command below)**: 1.4 and 1.5\r\n- **Python version**:  3.6\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**: Tried several\r\n- **GPU model and memory**: CPU and GPU, but GPU was nvidia p100\r\n- **Exact command to reproduce**: See \"source code\" below\r\n\r\n### Describe the problem\r\nThere seems to be some confusion about logits vs log probabilities.  In some cases logits seem to mean just log probabilities.  In other cases they seem to mean actual logits, `log(p/(1-p))` which is quite a different thing.  It seems possible to me that this is causing downstream bugs, potentially big ones in edward, though I haven't looked closely.  \r\n\r\nOther people [also seem confused](https://stackoverflow.com/questions/41455101/what-is-the-meaning-of-the-word-logits-in-tensorflow).\r\n\r\n### Source code / logs\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.python.ops.distributions import util as distribution_util\r\nimport numpy as np\r\n\r\ntf.reset_default_graph()\r\nsess=tf.Session()\r\n\r\ninp = tf.placeholder(dtype=tf.float32)\r\nlogits,probs=distribution_util.get_logits_and_probs(logits=inp)\r\n\r\ncateg=tf.distributions.Categorical(logits=inp)\r\nvals=categ.sample(100000)\r\n\r\nprobsv,valsv=sess.run([probs,vals],feed_dict={inp:np.log([.2,.3,.5])})\r\n\r\nprint(probsv)\r\nprint([np.mean(valsv==x) for x in range(3)])\r\n```\r\n\r\n```\r\n[0.16666667 0.23076922 0.33333334]\r\n[0.20078, 0.29984, 0.49938]\r\n```\r\n\r\nSo in some cases `logits` seems to mean log probabilities, but on other cases\r\nit seem to actually mean logits.  "}
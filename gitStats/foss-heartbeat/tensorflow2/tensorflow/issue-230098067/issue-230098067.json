{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10050", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10050/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10050/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10050/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10050", "id": 230098067, "node_id": "MDU6SXNzdWUyMzAwOTgwNjc=", "number": 10050, "title": "Function img_to_array() gives error for JPEG on Windows", "user": {"login": "ivan-ushakov", "id": 1408366, "node_id": "MDQ6VXNlcjE0MDgzNjY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1408366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivan-ushakov", "html_url": "https://github.com/ivan-ushakov", "followers_url": "https://api.github.com/users/ivan-ushakov/followers", "following_url": "https://api.github.com/users/ivan-ushakov/following{/other_user}", "gists_url": "https://api.github.com/users/ivan-ushakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivan-ushakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivan-ushakov/subscriptions", "organizations_url": "https://api.github.com/users/ivan-ushakov/orgs", "repos_url": "https://api.github.com/users/ivan-ushakov/repos", "events_url": "https://api.github.com/users/ivan-ushakov/events{/privacy}", "received_events_url": "https://api.github.com/users/ivan-ushakov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-19T21:48:03Z", "updated_at": "2017-09-08T04:55:54Z", "closed_at": "2017-09-08T04:55:54Z", "author_association": "NONE", "body_html": "<p>Hello,</p>\n<p>I'm getting error when I use <code>img_to_array()</code> function for particular JPEG file. Here is stack trace:</p>\n<pre><code>Traceback (most recent call last):\n  File \"file.py\", line 41, in &lt;module&gt;\n    tf.app.run()\n  File \"C:\\Users\\...\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"file.py\", line 38, in main\n    print('label: ' + x.name + ', files: ' + str(load_label(x)))\n  File \"file.py\", line 28, in load_label\n    array = preprocessing.image.img_to_array(image)\n  File \"C:\\Users\\...\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\keras\\python\\keras\\preprocessing\\image.py\", line 331, in img_to_array\n    x = np.asarray(img, dtype=K.floatx())\n  File \"C:\\Users\\...\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\numpy\\core\\numeric.py\", line 531, in asarray\n    return array(a, dtype, copy=False, order=order)\nTypeError: float() argument must be a string or a number, not 'JpegImageFile'\n</code></pre>\n<p>Image was loaded with <code>load_img()</code> from same package. I found that if I try to convert image directly with NumPy and without <code>dtype</code> parameter like <code>np.asarray(image)</code> then it works.</p>\n<p>I am using tensorflow-gpu 1.1.0 on Windows 8.1, cuda8, python3.5, pillow (for PIL).</p>", "body_text": "Hello,\nI'm getting error when I use img_to_array() function for particular JPEG file. Here is stack trace:\nTraceback (most recent call last):\n  File \"file.py\", line 41, in <module>\n    tf.app.run()\n  File \"C:\\Users\\...\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"file.py\", line 38, in main\n    print('label: ' + x.name + ', files: ' + str(load_label(x)))\n  File \"file.py\", line 28, in load_label\n    array = preprocessing.image.img_to_array(image)\n  File \"C:\\Users\\...\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\keras\\python\\keras\\preprocessing\\image.py\", line 331, in img_to_array\n    x = np.asarray(img, dtype=K.floatx())\n  File \"C:\\Users\\...\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\numpy\\core\\numeric.py\", line 531, in asarray\n    return array(a, dtype, copy=False, order=order)\nTypeError: float() argument must be a string or a number, not 'JpegImageFile'\n\nImage was loaded with load_img() from same package. I found that if I try to convert image directly with NumPy and without dtype parameter like np.asarray(image) then it works.\nI am using tensorflow-gpu 1.1.0 on Windows 8.1, cuda8, python3.5, pillow (for PIL).", "body": "Hello,\r\n\r\nI'm getting error when I use `img_to_array()` function for particular JPEG file. Here is stack trace:\r\n\r\n    Traceback (most recent call last):\r\n      File \"file.py\", line 41, in <module>\r\n        tf.app.run()\r\n      File \"C:\\Users\\...\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\r\n        _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n      File \"file.py\", line 38, in main\r\n        print('label: ' + x.name + ', files: ' + str(load_label(x)))\r\n      File \"file.py\", line 28, in load_label\r\n        array = preprocessing.image.img_to_array(image)\r\n      File \"C:\\Users\\...\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\tensorflow\\contrib\\keras\\python\\keras\\preprocessing\\image.py\", line 331, in img_to_array\r\n        x = np.asarray(img, dtype=K.floatx())\r\n      File \"C:\\Users\\...\\AppData\\Local\\Programs\\Python\\Python35\\lib\\site-packages\\numpy\\core\\numeric.py\", line 531, in asarray\r\n        return array(a, dtype, copy=False, order=order)\r\n    TypeError: float() argument must be a string or a number, not 'JpegImageFile'\r\n\r\nImage was loaded with `load_img()` from same package. I found that if I try to convert image directly with NumPy and without `dtype` parameter like `np.asarray(image)` then it works.\r\n\r\nI am using tensorflow-gpu 1.1.0 on Windows 8.1, cuda8, python3.5, pillow (for PIL)."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/435908358", "html_url": "https://github.com/tensorflow/tensorflow/pull/22713#issuecomment-435908358", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22713", "id": 435908358, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTkwODM1OA==", "user": {"login": "eryshev", "id": 7483130, "node_id": "MDQ6VXNlcjc0ODMxMzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/7483130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eryshev", "html_url": "https://github.com/eryshev", "followers_url": "https://api.github.com/users/eryshev/followers", "following_url": "https://api.github.com/users/eryshev/following{/other_user}", "gists_url": "https://api.github.com/users/eryshev/gists{/gist_id}", "starred_url": "https://api.github.com/users/eryshev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eryshev/subscriptions", "organizations_url": "https://api.github.com/users/eryshev/orgs", "repos_url": "https://api.github.com/users/eryshev/repos", "events_url": "https://api.github.com/users/eryshev/events{/privacy}", "received_events_url": "https://api.github.com/users/eryshev/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-05T15:07:50Z", "updated_at": "2018-11-05T15:37:34Z", "author_association": "NONE", "body_html": "<p>Hello,</p>\n<p>I've the same problem and trying to apply the suggested change I don't see any improvements.<br>\nIn my case I'm trying to run a PS on CPU with 2 workers on different GPUs so the PS logs following line:</p>\n<pre><code> ParameterServerStrategy with compute_devices = ['/replica:0/task:0/device:GPU:0', '/replica:0/task:0/device:GPU:1'], variable_device = '/device:CPU:0'\n</code></pre>\n<p>So far it looks good.</p>\n<p>However when we do <code>d_spec = tf_device.DeviceSpec.from_string(d)</code><br>\nthen <code>d_spec.task == None</code> for <code>/device:CPU:0</code> and sometimes<br>\nI see <code>d == '/replica:0/task:0/device:CPU:0'</code> that gives <code>d_spec.task == 0</code>.</p>\n<p>Either I don't get something important there or something is going wrong at higher level.</p>", "body_text": "Hello,\nI've the same problem and trying to apply the suggested change I don't see any improvements.\nIn my case I'm trying to run a PS on CPU with 2 workers on different GPUs so the PS logs following line:\n ParameterServerStrategy with compute_devices = ['/replica:0/task:0/device:GPU:0', '/replica:0/task:0/device:GPU:1'], variable_device = '/device:CPU:0'\n\nSo far it looks good.\nHowever when we do d_spec = tf_device.DeviceSpec.from_string(d)\nthen d_spec.task == None for /device:CPU:0 and sometimes\nI see d == '/replica:0/task:0/device:CPU:0' that gives d_spec.task == 0.\nEither I don't get something important there or something is going wrong at higher level.", "body": "Hello,\r\n\r\nI've the same problem and trying to apply the suggested change I don't see any improvements.\r\nIn my case I'm trying to run a PS on CPU with 2 workers on different GPUs so the PS logs following line:\r\n```\r\n ParameterServerStrategy with compute_devices = ['/replica:0/task:0/device:GPU:0', '/replica:0/task:0/device:GPU:1'], variable_device = '/device:CPU:0'\r\n```\r\nSo far it looks good.\r\n\r\nHowever when we do `d_spec = tf_device.DeviceSpec.from_string(d)` \r\nthen `d_spec.task == None` for `/device:CPU:0` and sometimes \r\nI see `d == '/replica:0/task:0/device:CPU:0'` that gives `d_spec.task == 0`.\r\n\r\nEither I don't get something important there or something is going wrong at higher level."}
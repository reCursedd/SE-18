{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7399", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7399/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7399/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7399/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7399", "id": 206630414, "node_id": "MDU6SXNzdWUyMDY2MzA0MTQ=", "number": 7399, "title": "Tensorflow GPU on Windows Python 3.5 CUDA_ERROR_OUT_OF_MEMORY", "user": {"login": "vladimircape", "id": 1789618, "node_id": "MDQ6VXNlcjE3ODk2MTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1789618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vladimircape", "html_url": "https://github.com/vladimircape", "followers_url": "https://api.github.com/users/vladimircape/followers", "following_url": "https://api.github.com/users/vladimircape/following{/other_user}", "gists_url": "https://api.github.com/users/vladimircape/gists{/gist_id}", "starred_url": "https://api.github.com/users/vladimircape/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vladimircape/subscriptions", "organizations_url": "https://api.github.com/users/vladimircape/orgs", "repos_url": "https://api.github.com/users/vladimircape/repos", "events_url": "https://api.github.com/users/vladimircape/events{/privacy}", "received_events_url": "https://api.github.com/users/vladimircape/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-02-09T21:09:09Z", "updated_at": "2017-02-10T23:59:02Z", "closed_at": "2017-02-10T17:17:04Z", "author_association": "NONE", "body_html": "<p>I am working on</p>\n<pre><code>Notebook Lenova Z50-70\nGPU:Nvidia Geforce 840M\nPython 3.5\nWindows 7\npip install tensorflow-gpu\n</code></pre>\n<p>I open windows and try to test how tensorflow use GPU.</p>\n<pre><code>import tensorflow as tf\n</code></pre>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>I c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr<br>\nary cublas64_80.dll locally<br>\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr<br>\nary cudnn64_5.dll locally<br>\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr<br>\nary cufft64_80.dll locally<br>\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr<br>\nary nvcuda.dll locally<br>\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr<br>\nary curand64_80.dll locally</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<pre><code>from __future__ import print_function\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.333)\nsess = tf.Session(config=tf.ConfigProto(gpu_options=gpu_options))\n</code></pre>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>I c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:885] Found device 0 with p<br>\nroperties:<br>\nname: GeForce 840M<br>\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.124<br>\npciBusID 0000:03:00.0<br>\nTotal memory: 4.00GiB<br>\nFree memory: 3.93GiB<br>\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:906] DMA: 0<br>\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:916] 0: Y<br>\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:975] Creating TensorFlow d<br>\nevice (/gpu:0) -&gt; (device: 0, name: GeForce 840M, pci bus id: 0000:03:00.0)<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 1.3<br>\n3G (1430223872 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 1.2<br>\n0G (1287201536 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 1.0<br>\n8G (1158481408 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 994<br>\n.33M (1042633216 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 894<br>\n.90M (938370048 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 805<br>\n.41M (844532992 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 724<br>\n.87M (760079872 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 652<br>\n.38M (684071936 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 587<br>\n.14M (615664896 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 528<br>\n.43M (554098432 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 475<br>\n.59M (498688768 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nhello = tf.constant('Hello, TensorFlow!')<br>\nprint(sess.run(hello))</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>And got window error that it's not enought memory and OS closed python.<br>\nYes also Gchrome was open and use a lot of system memory.<br>\nMy question.<br>\nWhy such error appear, why when i close GChrome system starts to works better, as i understand tensorflow gpu, use gpu memory and my Nvidia Geforce 840M has Dedicated Memory. I also have integrated video IntelHD.<br>\nWhy tensorflow start to use system resources not gpu resources? and how to fix it? i don't have error in theano framework</p>", "body_text": "I am working on\nNotebook Lenova Z50-70\nGPU:Nvidia Geforce 840M\nPython 3.5\nWindows 7\npip install tensorflow-gpu\n\nI open windows and try to test how tensorflow use GPU.\nimport tensorflow as tf\n\n\n\n\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\nary cublas64_80.dll locally\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\nary cudnn64_5.dll locally\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\nary cufft64_80.dll locally\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\nary nvcuda.dll locally\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\nary curand64_80.dll locally\n\n\n\nfrom __future__ import print_function\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.333)\nsess = tf.Session(config=tf.ConfigProto(gpu_options=gpu_options))\n\n\n\n\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:885] Found device 0 with p\nroperties:\nname: GeForce 840M\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.124\npciBusID 0000:03:00.0\nTotal memory: 4.00GiB\nFree memory: 3.93GiB\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:906] DMA: 0\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:916] 0: Y\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:975] Creating TensorFlow d\nevice (/gpu:0) -> (device: 0, name: GeForce 840M, pci bus id: 0000:03:00.0)\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 1.3\n3G (1430223872 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 1.2\n0G (1287201536 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 1.0\n8G (1158481408 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 994\n.33M (1042633216 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 894\n.90M (938370048 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 805\n.41M (844532992 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 724\n.87M (760079872 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 652\n.38M (684071936 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 587\n.14M (615664896 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 528\n.43M (554098432 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 475\n.59M (498688768 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nhello = tf.constant('Hello, TensorFlow!')\nprint(sess.run(hello))\n\n\n\nAnd got window error that it's not enought memory and OS closed python.\nYes also Gchrome was open and use a lot of system memory.\nMy question.\nWhy such error appear, why when i close GChrome system starts to works better, as i understand tensorflow gpu, use gpu memory and my Nvidia Geforce 840M has Dedicated Memory. I also have integrated video IntelHD.\nWhy tensorflow start to use system resources not gpu resources? and how to fix it? i don't have error in theano framework", "body": "I am working on\r\n\r\n    Notebook Lenova Z50-70\r\n    GPU:Nvidia Geforce 840M\r\n    Python 3.5\r\n    Windows 7\r\n    pip install tensorflow-gpu\r\n\r\nI open windows and try to test how tensorflow use GPU.\r\n\r\n    import tensorflow as tf\r\n>>> I c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\r\nary cublas64_80.dll locally\r\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\r\nary cudnn64_5.dll locally\r\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\r\nary cufft64_80.dll locally\r\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\r\nary nvcuda.dll locally\r\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opened CUDA libr\r\nary curand64_80.dll locally\r\n\r\n    from __future__ import print_function\r\n    gpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.333)\r\n    sess = tf.Session(config=tf.ConfigProto(gpu_options=gpu_options))\r\n\r\n>>>I c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:885] Found device 0 with p\r\nroperties:\r\nname: GeForce 840M\r\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.124\r\npciBusID 0000:03:00.0\r\nTotal memory: 4.00GiB\r\nFree memory: 3.93GiB\r\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:906] DMA: 0\r\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:916] 0: Y\r\nI c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:975] Creating TensorFlow d\r\nevice (/gpu:0) -> (device: 0, name: GeForce 840M, pci bus id: 0000:03:00.0)\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 1.3\r\n3G (1430223872 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 1.2\r\n0G (1287201536 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 1.0\r\n8G (1158481408 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 994\r\n.33M (1042633216 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 894\r\n.90M (938370048 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 805\r\n.41M (844532992 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 724\r\n.87M (760079872 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 652\r\n.38M (684071936 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 587\r\n.14M (615664896 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 528\r\n.43M (554098432 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\nE c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\stream_executor\\cuda\\cuda_driver.cc:1002] failed to allocate 475\r\n.59M (498688768 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\n>>> hello = tf.constant('Hello, TensorFlow!')\r\n>>> print(sess.run(hello))\r\n\r\nAnd got window error that it's not enought memory and OS closed python.\r\nYes also Gchrome was open and use a lot of system memory.\r\nMy question.\r\nWhy such error appear, why when i close GChrome system starts to works better, as i understand tensorflow gpu, use gpu memory and my Nvidia Geforce 840M has Dedicated Memory. I also have integrated video IntelHD.\r\nWhy tensorflow start to use system resources not gpu resources? and how to fix it? i don't have error in theano framework\r\n"}
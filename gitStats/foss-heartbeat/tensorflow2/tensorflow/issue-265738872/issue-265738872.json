{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13746", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13746/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13746/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13746/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13746", "id": 265738872, "node_id": "MDU6SXNzdWUyNjU3Mzg4NzI=", "number": 13746, "title": "GraphDef ParseFromString error", "user": {"login": "formath", "id": 6040127, "node_id": "MDQ6VXNlcjYwNDAxMjc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6040127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/formath", "html_url": "https://github.com/formath", "followers_url": "https://api.github.com/users/formath/followers", "following_url": "https://api.github.com/users/formath/following{/other_user}", "gists_url": "https://api.github.com/users/formath/gists{/gist_id}", "starred_url": "https://api.github.com/users/formath/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/formath/subscriptions", "organizations_url": "https://api.github.com/users/formath/orgs", "repos_url": "https://api.github.com/users/formath/repos", "events_url": "https://api.github.com/users/formath/events{/privacy}", "received_events_url": "https://api.github.com/users/formath/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-16T11:38:58Z", "updated_at": "2017-10-17T03:36:52Z", "closed_at": "2017-10-17T03:36:52Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I load a <code>graph.pb</code> saved by <code>tf.train.write_graph(sess.graph.as_graph_def(), FLAGS.model_dir, 'graph.pb', as_text=False)</code> via blow code. But an error occur. Why?</p>\n<pre><code>graph_def = graph_pb2.GraphDef()\nwith tf.gfile.GFile('./graph.pb', 'rb') as f:\n    graph_def.ParseFromString(f.read())\n</code></pre>\n<pre><code>File \"../../python/graph_test.py\", line 53, in freeze_graph\n    graph_def.ParseFromString(f.read())\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/message.py\", line 185, in ParseFromString\n    self.MergeFromString(serialized)\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/python_message.py\", line 1069, in MergeFromString\n    if self._InternalParse(serialized, 0, length) != length:\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/python_message.py\", line 1095, in InternalParse\n    new_pos = local_SkipField(buffer, new_pos, end, tag_bytes)\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/decoder.py\", line 850, in SkipField\n    return WIRETYPE_TO_SKIPPER[wire_type](buffer, pos, end)\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/decoder.py\", line 820, in _RaiseInvalidWireType\n    raise _DecodeError('Tag had invalid wire type.')\ngoogle.protobuf.message.DecodeError: Tag had invalid wire type.\n</code></pre>", "body_text": "I load a graph.pb saved by tf.train.write_graph(sess.graph.as_graph_def(), FLAGS.model_dir, 'graph.pb', as_text=False) via blow code. But an error occur. Why?\ngraph_def = graph_pb2.GraphDef()\nwith tf.gfile.GFile('./graph.pb', 'rb') as f:\n    graph_def.ParseFromString(f.read())\n\nFile \"../../python/graph_test.py\", line 53, in freeze_graph\n    graph_def.ParseFromString(f.read())\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/message.py\", line 185, in ParseFromString\n    self.MergeFromString(serialized)\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/python_message.py\", line 1069, in MergeFromString\n    if self._InternalParse(serialized, 0, length) != length:\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/python_message.py\", line 1095, in InternalParse\n    new_pos = local_SkipField(buffer, new_pos, end, tag_bytes)\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/decoder.py\", line 850, in SkipField\n    return WIRETYPE_TO_SKIPPER[wire_type](buffer, pos, end)\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/decoder.py\", line 820, in _RaiseInvalidWireType\n    raise _DecodeError('Tag had invalid wire type.')\ngoogle.protobuf.message.DecodeError: Tag had invalid wire type.", "body": "I load a `graph.pb` saved by `tf.train.write_graph(sess.graph.as_graph_def(), FLAGS.model_dir, 'graph.pb', as_text=False)` via blow code. But an error occur. Why?\r\n\r\n```\r\ngraph_def = graph_pb2.GraphDef()\r\nwith tf.gfile.GFile('./graph.pb', 'rb') as f:\r\n    graph_def.ParseFromString(f.read())\r\n```\r\n\r\n```\r\nFile \"../../python/graph_test.py\", line 53, in freeze_graph\r\n    graph_def.ParseFromString(f.read())\r\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/message.py\", line 185, in ParseFromString\r\n    self.MergeFromString(serialized)\r\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/python_message.py\", line 1069, in MergeFromString\r\n    if self._InternalParse(serialized, 0, length) != length:\r\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/python_message.py\", line 1095, in InternalParse\r\n    new_pos = local_SkipField(buffer, new_pos, end, tag_bytes)\r\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/decoder.py\", line 850, in SkipField\r\n    return WIRETYPE_TO_SKIPPER[wire_type](buffer, pos, end)\r\n  File \"/Users/anaconda/lib/python3.6/site-packages/google/protobuf/internal/decoder.py\", line 820, in _RaiseInvalidWireType\r\n    raise _DecodeError('Tag had invalid wire type.')\r\ngoogle.protobuf.message.DecodeError: Tag had invalid wire type.\r\n```"}
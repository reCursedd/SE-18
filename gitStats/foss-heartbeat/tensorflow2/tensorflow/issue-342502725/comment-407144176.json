{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/407144176", "html_url": "https://github.com/tensorflow/tensorflow/issues/20942#issuecomment-407144176", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20942", "id": 407144176, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzE0NDE3Ng==", "user": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-23T17:50:40Z", "updated_at": "2018-07-23T17:50:40Z", "author_association": "MEMBER", "body_html": "<p>So, the way it works is that the low-level operations are called kernels. The kernels are wrapped into ops. The ops define the interface, and the kernels define the implementation.</p>\n<p>What we have in <a href=\"https://www.github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/factorization/kernels/clustering_ops.cc#L573\"><code>clustering_ops</code></a> is that the kernels are registered for CPU only. You could try to register them for GPU, and then rebuild. Typically you also need to make other changes so that might some effort, particularly if you haven't worked with tensorflow internals before.</p>\n<p>If you just want KMeans, it's really just a bunch of vector distance computations. You could just do that by hand using off-the-shelf tensorflow operators, all of which should already be implemented on GPU.</p>", "body_text": "So, the way it works is that the low-level operations are called kernels. The kernels are wrapped into ops. The ops define the interface, and the kernels define the implementation.\nWhat we have in clustering_ops is that the kernels are registered for CPU only. You could try to register them for GPU, and then rebuild. Typically you also need to make other changes so that might some effort, particularly if you haven't worked with tensorflow internals before.\nIf you just want KMeans, it's really just a bunch of vector distance computations. You could just do that by hand using off-the-shelf tensorflow operators, all of which should already be implemented on GPU.", "body": "So, the way it works is that the low-level operations are called kernels. The kernels are wrapped into ops. The ops define the interface, and the kernels define the implementation.\r\n\r\nWhat we have in [`clustering_ops`](https://www.github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/factorization/kernels/clustering_ops.cc#L573) is that the kernels are registered for CPU only. You could try to register them for GPU, and then rebuild. Typically you also need to make other changes so that might some effort, particularly if you haven't worked with tensorflow internals before.\r\n\r\nIf you just want KMeans, it's really just a bunch of vector distance computations. You could just do that by hand using off-the-shelf tensorflow operators, all of which should already be implemented on GPU."}
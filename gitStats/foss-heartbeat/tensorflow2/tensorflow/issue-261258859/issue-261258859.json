{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13358", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13358/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13358/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13358/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13358", "id": 261258859, "node_id": "MDU6SXNzdWUyNjEyNTg4NTk=", "number": 13358, "title": "parameterized_docker_build.sh fails", "user": {"login": "SaintNazaire", "id": 23476368, "node_id": "MDQ6VXNlcjIzNDc2MzY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23476368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SaintNazaire", "html_url": "https://github.com/SaintNazaire", "followers_url": "https://api.github.com/users/SaintNazaire/followers", "following_url": "https://api.github.com/users/SaintNazaire/following{/other_user}", "gists_url": "https://api.github.com/users/SaintNazaire/gists{/gist_id}", "starred_url": "https://api.github.com/users/SaintNazaire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SaintNazaire/subscriptions", "organizations_url": "https://api.github.com/users/SaintNazaire/orgs", "repos_url": "https://api.github.com/users/SaintNazaire/repos", "events_url": "https://api.github.com/users/SaintNazaire/events{/privacy}", "received_events_url": "https://api.github.com/users/SaintNazaire/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-28T09:52:36Z", "updated_at": "2017-09-29T12:30:09Z", "closed_at": "2017-09-29T10:01:20Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>Issue</h3>\n<p>Executing parameterized_docker_build.sh fails to generate new docker image, throws out multiple error messages.</p>\n<h3>System information</h3>\n<ul>\n<li><strong>I have used a stock example script provided in TensorFlow</strong></li>\n<li><strong>Windows 10 professional</strong></li>\n<li><strong>TensorFlow not installed (looking for generating a dockerfile)</strong></li>\n<li><strong>TensorFlow version 1.3:latest (eventually looking for this version)</strong></li>\n<li><strong>Python version 3 (eventually looking for this version)</strong></li>\n<li><strong>Bazel version not yet installed</strong></li>\n<li><strong>CUDA/cuDNN version not relevant (CPU install)</strong></li>\n<li><strong>GPU model and memory not relevant (CPU install)</strong></li>\n</ul>\n<h3>Set-up</h3>\n<pre><code>&gt;&gt;&gt; Docker run -it Ubuntu:latest /bin/bash\n$ apt-get update\n$ apt-get install curl\n$ cd /opt\n$ curl -O https://raw.githubusercontent.com/tensorflow/tensorflow/master/tensorflow/tools/docker/parameterized_docker_build.sh\n$ curl -O https://raw.githubusercontent.com/tensorflow/tensorflow/master/tensorflow/tools/docker/parameterized_docker_build.sh\n$ chmod +x opt/parameterized_docker_build.sh\n$ export TF_DOCKER_BUILD_IS_DEVEL=NO\n$ export TF_DOCKER_BUILD_TYPE=CPU\n$ export TF_DOCKER_BUILD_PYTHON_VERSION=PYTHON3\n$ export NIGHTLY_VERSION=\"1.head\"\n$ export TF_DOCKER_BUILD_CENTRAL_PIP=$(echo ${TF_DOCKER_BUILD_PYTHON_VERSION} | sed s^PYTHON2^http://ci.tensorflow.org/view/Nightly/job/nightly-matrix-cpu/TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=PIP,TF_BUILD_PYTHON_VERSION=${TF_DOCKER_BUILD_PYTHON_VERSION},label=cpu-slave/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-${NIGHTLY_VERSION}-cp27-cp27mu-manylinux1_x86_64.whl^ | sed s^PYTHON3^http://ci.tensorflow.org/view/Nightly/job/nightly-python35-linux-cpu/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-${NIGHTLY_VERSION}-cp35-cp35m-manylinux1_x86_64.whl^)\n</code></pre>\n<h3>Command triggering issue</h3>\n<p><code>$ sh opt/parameterized_docker_build.sh</code></p>\n<h3>Error messages</h3>\n<blockquote>\n<p>opt/parameterized_docker_build.sh: 70: opt/parameterized_docker_build.sh: Bad substitution<br>\nopt/parameterized_docker_build.sh: 71: opt/parameterized_docker_build.sh: source: not found<br>\nopt/parameterized_docker_build.sh: 81: opt/parameterized_docker_build.sh: to_lower: not found<br>\nopt/parameterized_docker_build.sh: 82: opt/parameterized_docker_build.sh: to_lower: not found<br>\nopt/parameterized_docker_build.sh: 83: opt/parameterized_docker_build.sh: to_lower: not found<br>\nopt/parameterized_docker_build.sh: 84: opt/parameterized_docker_build.sh: to_lower: not found<br>\nRequired build parameters:<br>\nTF_DOCKER_BUILD_TYPE=<br>\nTF_DOCKER_BUILD_IS_DEVEL=<br>\nTF_DOCKER_BUILD_DEVEL_BRANCH=</p>\n<p>Optional build parameters:<br>\nTF_DOCKER_BUILD_CENTRAL_PIP=<a href=\"http://ci.tensorflow.org/view/Nightly/job/nightly-python35-linux-cpu/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-1.head-cp35-cp35m-manylinux1_x86_64.whl\" rel=\"nofollow\">http://ci.tensorflow.org/view/Nightly/job/nightly-python35-linux-cpu/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-1.head-cp35-cp35m-manylinux1_x86_64.whl</a><br>\nTF_DOCKER_BUILD_IMAGE_NAME=<br>\nTF_DOCKER_BUILD_VERSION=<br>\nTF_DOCKER_BUILD_PORT=<br>\nTF_DOCKER_BUILD_PUSH_CMD=<br>\nopt/parameterized_docker_build.sh: 102: opt/parameterized_docker_build.sh: [[: not found<br>\nopt/parameterized_docker_build.sh: 114: opt/parameterized_docker_build.sh: [[: not found<br>\nopt/parameterized_docker_build.sh: 121: opt/parameterized_docker_build.sh: [[: not found<br>\nopt/parameterized_docker_build.sh: 124: opt/parameterized_docker_build.sh: die: not found<br>\nopt/parameterized_docker_build.sh: 128: opt/parameterized_docker_build.sh: [[: not found<br>\nopt/parameterized_docker_build.sh: 130: opt/parameterized_docker_build.sh: [[: not found<br>\nopt/parameterized_docker_build.sh: 141: opt/parameterized_docker_build.sh: die: not found<br>\nopt/parameterized_docker_build.sh: 145: opt/parameterized_docker_build.sh: [[: not found<br>\nopt/parameterized_docker_build.sh: 147: opt/parameterized_docker_build.sh: [[: not found<br>\nopt/parameterized_docker_build.sh: 150: opt/parameterized_docker_build.sh: die: not found<br>\nopt/parameterized_docker_build.sh: 156: opt/parameterized_docker_build.sh: [[: not found</p>\n<p>FINAL_IMAGE_NAME: tensorflow/tensorflow<br>\nFINAL_TAG: latest<br>\nOriginal Dockerfile: //Dockerfile</p>\n<p>Docker build will occur in temporary directory: /tmp/tmp.IItoQQJuhx<br>\ncp: error reading '//proc/1/task/1/personality': Operation not permitted<br>\ncp: error reading '//proc/1/task/1/syscall': Operation not permitted<br>\ncp: cannot open '//proc/1/task/1/mem' for reading: Permission denied<br>\ncp: error reading '//proc/1/task/1/clear_refs': Invalid argument</p>\n</blockquote>", "body_text": "Issue\nExecuting parameterized_docker_build.sh fails to generate new docker image, throws out multiple error messages.\nSystem information\n\nI have used a stock example script provided in TensorFlow\nWindows 10 professional\nTensorFlow not installed (looking for generating a dockerfile)\nTensorFlow version 1.3:latest (eventually looking for this version)\nPython version 3 (eventually looking for this version)\nBazel version not yet installed\nCUDA/cuDNN version not relevant (CPU install)\nGPU model and memory not relevant (CPU install)\n\nSet-up\n>>> Docker run -it Ubuntu:latest /bin/bash\n$ apt-get update\n$ apt-get install curl\n$ cd /opt\n$ curl -O https://raw.githubusercontent.com/tensorflow/tensorflow/master/tensorflow/tools/docker/parameterized_docker_build.sh\n$ curl -O https://raw.githubusercontent.com/tensorflow/tensorflow/master/tensorflow/tools/docker/parameterized_docker_build.sh\n$ chmod +x opt/parameterized_docker_build.sh\n$ export TF_DOCKER_BUILD_IS_DEVEL=NO\n$ export TF_DOCKER_BUILD_TYPE=CPU\n$ export TF_DOCKER_BUILD_PYTHON_VERSION=PYTHON3\n$ export NIGHTLY_VERSION=\"1.head\"\n$ export TF_DOCKER_BUILD_CENTRAL_PIP=$(echo ${TF_DOCKER_BUILD_PYTHON_VERSION} | sed s^PYTHON2^http://ci.tensorflow.org/view/Nightly/job/nightly-matrix-cpu/TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=PIP,TF_BUILD_PYTHON_VERSION=${TF_DOCKER_BUILD_PYTHON_VERSION},label=cpu-slave/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-${NIGHTLY_VERSION}-cp27-cp27mu-manylinux1_x86_64.whl^ | sed s^PYTHON3^http://ci.tensorflow.org/view/Nightly/job/nightly-python35-linux-cpu/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-${NIGHTLY_VERSION}-cp35-cp35m-manylinux1_x86_64.whl^)\n\nCommand triggering issue\n$ sh opt/parameterized_docker_build.sh\nError messages\n\nopt/parameterized_docker_build.sh: 70: opt/parameterized_docker_build.sh: Bad substitution\nopt/parameterized_docker_build.sh: 71: opt/parameterized_docker_build.sh: source: not found\nopt/parameterized_docker_build.sh: 81: opt/parameterized_docker_build.sh: to_lower: not found\nopt/parameterized_docker_build.sh: 82: opt/parameterized_docker_build.sh: to_lower: not found\nopt/parameterized_docker_build.sh: 83: opt/parameterized_docker_build.sh: to_lower: not found\nopt/parameterized_docker_build.sh: 84: opt/parameterized_docker_build.sh: to_lower: not found\nRequired build parameters:\nTF_DOCKER_BUILD_TYPE=\nTF_DOCKER_BUILD_IS_DEVEL=\nTF_DOCKER_BUILD_DEVEL_BRANCH=\nOptional build parameters:\nTF_DOCKER_BUILD_CENTRAL_PIP=http://ci.tensorflow.org/view/Nightly/job/nightly-python35-linux-cpu/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-1.head-cp35-cp35m-manylinux1_x86_64.whl\nTF_DOCKER_BUILD_IMAGE_NAME=\nTF_DOCKER_BUILD_VERSION=\nTF_DOCKER_BUILD_PORT=\nTF_DOCKER_BUILD_PUSH_CMD=\nopt/parameterized_docker_build.sh: 102: opt/parameterized_docker_build.sh: [[: not found\nopt/parameterized_docker_build.sh: 114: opt/parameterized_docker_build.sh: [[: not found\nopt/parameterized_docker_build.sh: 121: opt/parameterized_docker_build.sh: [[: not found\nopt/parameterized_docker_build.sh: 124: opt/parameterized_docker_build.sh: die: not found\nopt/parameterized_docker_build.sh: 128: opt/parameterized_docker_build.sh: [[: not found\nopt/parameterized_docker_build.sh: 130: opt/parameterized_docker_build.sh: [[: not found\nopt/parameterized_docker_build.sh: 141: opt/parameterized_docker_build.sh: die: not found\nopt/parameterized_docker_build.sh: 145: opt/parameterized_docker_build.sh: [[: not found\nopt/parameterized_docker_build.sh: 147: opt/parameterized_docker_build.sh: [[: not found\nopt/parameterized_docker_build.sh: 150: opt/parameterized_docker_build.sh: die: not found\nopt/parameterized_docker_build.sh: 156: opt/parameterized_docker_build.sh: [[: not found\nFINAL_IMAGE_NAME: tensorflow/tensorflow\nFINAL_TAG: latest\nOriginal Dockerfile: //Dockerfile\nDocker build will occur in temporary directory: /tmp/tmp.IItoQQJuhx\ncp: error reading '//proc/1/task/1/personality': Operation not permitted\ncp: error reading '//proc/1/task/1/syscall': Operation not permitted\ncp: cannot open '//proc/1/task/1/mem' for reading: Permission denied\ncp: error reading '//proc/1/task/1/clear_refs': Invalid argument", "body": "### Issue\r\n\r\nExecuting parameterized_docker_build.sh fails to generate new docker image, throws out multiple error messages.\r\n\r\n### System information\r\n- **I have used a stock example script provided in TensorFlow**\r\n- **Windows 10 professional**\r\n- **TensorFlow not installed (looking for generating a dockerfile)**\r\n- **TensorFlow version 1.3:latest (eventually looking for this version)**\r\n- **Python version 3 (eventually looking for this version)**\r\n- **Bazel version not yet installed**\r\n- **CUDA/cuDNN version not relevant (CPU install)**\r\n- **GPU model and memory not relevant (CPU install)**\r\n\r\n### Set-up\r\n\r\n```\r\n>>> Docker run -it Ubuntu:latest /bin/bash\r\n$ apt-get update\r\n$ apt-get install curl\r\n$ cd /opt\r\n$ curl -O https://raw.githubusercontent.com/tensorflow/tensorflow/master/tensorflow/tools/docker/parameterized_docker_build.sh\r\n$ curl -O https://raw.githubusercontent.com/tensorflow/tensorflow/master/tensorflow/tools/docker/parameterized_docker_build.sh\r\n$ chmod +x opt/parameterized_docker_build.sh\r\n$ export TF_DOCKER_BUILD_IS_DEVEL=NO\r\n$ export TF_DOCKER_BUILD_TYPE=CPU\r\n$ export TF_DOCKER_BUILD_PYTHON_VERSION=PYTHON3\r\n$ export NIGHTLY_VERSION=\"1.head\"\r\n$ export TF_DOCKER_BUILD_CENTRAL_PIP=$(echo ${TF_DOCKER_BUILD_PYTHON_VERSION} | sed s^PYTHON2^http://ci.tensorflow.org/view/Nightly/job/nightly-matrix-cpu/TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=PIP,TF_BUILD_PYTHON_VERSION=${TF_DOCKER_BUILD_PYTHON_VERSION},label=cpu-slave/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-${NIGHTLY_VERSION}-cp27-cp27mu-manylinux1_x86_64.whl^ | sed s^PYTHON3^http://ci.tensorflow.org/view/Nightly/job/nightly-python35-linux-cpu/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-${NIGHTLY_VERSION}-cp35-cp35m-manylinux1_x86_64.whl^)\r\n```\r\n\r\n### Command triggering issue\r\n\r\n`$ sh opt/parameterized_docker_build.sh`\r\n\r\n### Error messages\r\n\r\n> opt/parameterized_docker_build.sh: 70: opt/parameterized_docker_build.sh: Bad substitution\r\n> opt/parameterized_docker_build.sh: 71: opt/parameterized_docker_build.sh: source: not found\r\n> opt/parameterized_docker_build.sh: 81: opt/parameterized_docker_build.sh: to_lower: not found\r\n> opt/parameterized_docker_build.sh: 82: opt/parameterized_docker_build.sh: to_lower: not found\r\n> opt/parameterized_docker_build.sh: 83: opt/parameterized_docker_build.sh: to_lower: not found\r\n> opt/parameterized_docker_build.sh: 84: opt/parameterized_docker_build.sh: to_lower: not found\r\n> Required build parameters:\r\n>   TF_DOCKER_BUILD_TYPE=\r\n>   TF_DOCKER_BUILD_IS_DEVEL=\r\n>   TF_DOCKER_BUILD_DEVEL_BRANCH=\r\n> \r\n> Optional build parameters:\r\n>   TF_DOCKER_BUILD_CENTRAL_PIP=http://ci.tensorflow.org/view/Nightly/job/nightly-python35-linux-cpu/lastSuccessfulBuild/artifact/pip_test/whl/tensorflow-1.head-cp35-cp35m-manylinux1_x86_64.whl\r\n>   TF_DOCKER_BUILD_IMAGE_NAME=\r\n>   TF_DOCKER_BUILD_VERSION=\r\n>   TF_DOCKER_BUILD_PORT=\r\n>   TF_DOCKER_BUILD_PUSH_CMD=\r\n> opt/parameterized_docker_build.sh: 102: opt/parameterized_docker_build.sh: [[: not found\r\n> opt/parameterized_docker_build.sh: 114: opt/parameterized_docker_build.sh: [[: not found\r\n> opt/parameterized_docker_build.sh: 121: opt/parameterized_docker_build.sh: [[: not found\r\n> opt/parameterized_docker_build.sh: 124: opt/parameterized_docker_build.sh: die: not found\r\n> opt/parameterized_docker_build.sh: 128: opt/parameterized_docker_build.sh: [[: not found\r\n> opt/parameterized_docker_build.sh: 130: opt/parameterized_docker_build.sh: [[: not found\r\n> opt/parameterized_docker_build.sh: 141: opt/parameterized_docker_build.sh: die: not found\r\n> opt/parameterized_docker_build.sh: 145: opt/parameterized_docker_build.sh: [[: not found\r\n> opt/parameterized_docker_build.sh: 147: opt/parameterized_docker_build.sh: [[: not found\r\n> opt/parameterized_docker_build.sh: 150: opt/parameterized_docker_build.sh: die: not found\r\n> opt/parameterized_docker_build.sh: 156: opt/parameterized_docker_build.sh: [[: not found\r\n> \r\n> FINAL_IMAGE_NAME: tensorflow/tensorflow\r\n> FINAL_TAG: latest\r\n> Original Dockerfile: //Dockerfile\r\n> \r\n> Docker build will occur in temporary directory: /tmp/tmp.IItoQQJuhx\r\n> cp: error reading '//proc/1/task/1/personality': Operation not permitted\r\n> cp: error reading '//proc/1/task/1/syscall': Operation not permitted\r\n> cp: cannot open '//proc/1/task/1/mem' for reading: Permission denied\r\n> cp: error reading '//proc/1/task/1/clear_refs': Invalid argument"}
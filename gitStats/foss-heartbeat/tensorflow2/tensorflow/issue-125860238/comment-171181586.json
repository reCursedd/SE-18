{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/171181586", "html_url": "https://github.com/tensorflow/tensorflow/pull/738#issuecomment-171181586", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/738", "id": 171181586, "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTE4MTU4Ng==", "user": {"login": "kentonl", "id": 2646947, "node_id": "MDQ6VXNlcjI2NDY5NDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/2646947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kentonl", "html_url": "https://github.com/kentonl", "followers_url": "https://api.github.com/users/kentonl/followers", "following_url": "https://api.github.com/users/kentonl/following{/other_user}", "gists_url": "https://api.github.com/users/kentonl/gists{/gist_id}", "starred_url": "https://api.github.com/users/kentonl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kentonl/subscriptions", "organizations_url": "https://api.github.com/users/kentonl/orgs", "repos_url": "https://api.github.com/users/kentonl/repos", "events_url": "https://api.github.com/users/kentonl/events{/privacy}", "received_events_url": "https://api.github.com/users/kentonl/received_events", "type": "User", "site_admin": false}, "created_at": "2016-01-13T06:18:01Z", "updated_at": "2016-01-13T06:18:01Z", "author_association": "CONTRIBUTOR", "body_html": "<p>It looks like setting the shape in the RNN is actually not the right fix. When the gradients are computed, the shape inference still fails due to the conservative logic in the <code>merge</code> op here:  <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/control_flow_ops.py#L1533\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/control_flow_ops.py#L1533</a>. Would it be acceptable to relax it so that merging tensors with shapes, for example, <code>[None, 10]</code> and <code>[None, 10]</code> would produce a <code>[None, 10]</code> tensor?</p>", "body_text": "It looks like setting the shape in the RNN is actually not the right fix. When the gradients are computed, the shape inference still fails due to the conservative logic in the merge op here:  https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/control_flow_ops.py#L1533. Would it be acceptable to relax it so that merging tensors with shapes, for example, [None, 10] and [None, 10] would produce a [None, 10] tensor?", "body": "It looks like setting the shape in the RNN is actually not the right fix. When the gradients are computed, the shape inference still fails due to the conservative logic in the `merge` op here:  https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/control_flow_ops.py#L1533. Would it be acceptable to relax it so that merging tensors with shapes, for example, `[None, 10]` and `[None, 10]` would produce a `[None, 10]` tensor?\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9654", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9654/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9654/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9654/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9654", "id": 226208082, "node_id": "MDU6SXNzdWUyMjYyMDgwODI=", "number": 9654, "title": "Estimator's argument checking overzealous : model_fn has following not expected args: ['self']", "user": {"login": "JulesKzl", "id": 14870265, "node_id": "MDQ6VXNlcjE0ODcwMjY1", "avatar_url": "https://avatars0.githubusercontent.com/u/14870265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JulesKzl", "html_url": "https://github.com/JulesKzl", "followers_url": "https://api.github.com/users/JulesKzl/followers", "following_url": "https://api.github.com/users/JulesKzl/following{/other_user}", "gists_url": "https://api.github.com/users/JulesKzl/gists{/gist_id}", "starred_url": "https://api.github.com/users/JulesKzl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JulesKzl/subscriptions", "organizations_url": "https://api.github.com/users/JulesKzl/orgs", "repos_url": "https://api.github.com/users/JulesKzl/repos", "events_url": "https://api.github.com/users/JulesKzl/events{/privacy}", "received_events_url": "https://api.github.com/users/JulesKzl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "ispirmustafa", "id": 19293677, "node_id": "MDQ6VXNlcjE5MjkzNjc3", "avatar_url": "https://avatars1.githubusercontent.com/u/19293677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ispirmustafa", "html_url": "https://github.com/ispirmustafa", "followers_url": "https://api.github.com/users/ispirmustafa/followers", "following_url": "https://api.github.com/users/ispirmustafa/following{/other_user}", "gists_url": "https://api.github.com/users/ispirmustafa/gists{/gist_id}", "starred_url": "https://api.github.com/users/ispirmustafa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ispirmustafa/subscriptions", "organizations_url": "https://api.github.com/users/ispirmustafa/orgs", "repos_url": "https://api.github.com/users/ispirmustafa/repos", "events_url": "https://api.github.com/users/ispirmustafa/events{/privacy}", "received_events_url": "https://api.github.com/users/ispirmustafa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ispirmustafa", "id": 19293677, "node_id": "MDQ6VXNlcjE5MjkzNjc3", "avatar_url": "https://avatars1.githubusercontent.com/u/19293677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ispirmustafa", "html_url": "https://github.com/ispirmustafa", "followers_url": "https://api.github.com/users/ispirmustafa/followers", "following_url": "https://api.github.com/users/ispirmustafa/following{/other_user}", "gists_url": "https://api.github.com/users/ispirmustafa/gists{/gist_id}", "starred_url": "https://api.github.com/users/ispirmustafa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ispirmustafa/subscriptions", "organizations_url": "https://api.github.com/users/ispirmustafa/orgs", "repos_url": "https://api.github.com/users/ispirmustafa/repos", "events_url": "https://api.github.com/users/ispirmustafa/events{/privacy}", "received_events_url": "https://api.github.com/users/ispirmustafa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2017-05-04T08:22:50Z", "updated_at": "2017-05-12T05:10:39Z", "closed_at": "2017-05-12T05:10:39Z", "author_association": "NONE", "body_html": "<p>I'm using TensorFlow (1.1) high-level API Estimators to create my neural net. But I'm using it into a class and I have to call an instance of my class to generate the model of the neural network. (Here <code>self.a</code>)</p>\n<pre><code>class NeuralNetwork(object):\n  def __init__(self):\n    \"\"\" Create neural net \"\"\"\n    regressor = tf.estimator.Estimator(model_fn=self.my_model_fn,\n                                       model_dir=\"/tmp/data\")\n    // ...\n\n  def my_model_fn(self, features, labels, mode):\n  \"\"\" Generate neural net model \"\"\"\n    self.a = a\n    predictions = ...\n    loss = ...\n    train_op = ...\n    return tf.estimator.EstimatorSpec(\n      mode=mode,\n      predictions=predictions,\n      loss=loss,\n      train_op=train_op)\n</code></pre>\n<p>But I get the error : ValueError: model_fn [...] has following not expected args: ['self']. I tried to remove the self for the args of my model but got another error TypeError: \u2026 got multiple values for keyword argument.<br>\nSolution for now (as it was suggested on <a href=\"http://stackoverflow.com/questions/43755609/tensorflow-estimator-model-fn-has-following-not-expected-args-self\" rel=\"nofollow\">StackOverflow</a>) is to use a lambda function to wrap my function <code>my_model_fn</code> (see below) but it will be nicer without it.</p>\n<pre><code>class NeuralNetwork(object):\n  def __init__(self):\n    \"\"\" Create neural net \"\"\"\n    regressor = tf.estimator.Estimator(\n        model_fn=lambda features, labels, mode: self.my_model_fn(features, labels, mode),\n        model_dir=\"/tmp/data\")\n    // ...\n</code></pre>", "body_text": "I'm using TensorFlow (1.1) high-level API Estimators to create my neural net. But I'm using it into a class and I have to call an instance of my class to generate the model of the neural network. (Here self.a)\nclass NeuralNetwork(object):\n  def __init__(self):\n    \"\"\" Create neural net \"\"\"\n    regressor = tf.estimator.Estimator(model_fn=self.my_model_fn,\n                                       model_dir=\"/tmp/data\")\n    // ...\n\n  def my_model_fn(self, features, labels, mode):\n  \"\"\" Generate neural net model \"\"\"\n    self.a = a\n    predictions = ...\n    loss = ...\n    train_op = ...\n    return tf.estimator.EstimatorSpec(\n      mode=mode,\n      predictions=predictions,\n      loss=loss,\n      train_op=train_op)\n\nBut I get the error : ValueError: model_fn [...] has following not expected args: ['self']. I tried to remove the self for the args of my model but got another error TypeError: \u2026 got multiple values for keyword argument.\nSolution for now (as it was suggested on StackOverflow) is to use a lambda function to wrap my function my_model_fn (see below) but it will be nicer without it.\nclass NeuralNetwork(object):\n  def __init__(self):\n    \"\"\" Create neural net \"\"\"\n    regressor = tf.estimator.Estimator(\n        model_fn=lambda features, labels, mode: self.my_model_fn(features, labels, mode),\n        model_dir=\"/tmp/data\")\n    // ...", "body": "I'm using TensorFlow (1.1) high-level API Estimators to create my neural net. But I'm using it into a class and I have to call an instance of my class to generate the model of the neural network. (Here `self.a`)\r\n\r\n```\r\nclass NeuralNetwork(object):\r\n  def __init__(self):\r\n    \"\"\" Create neural net \"\"\"\r\n    regressor = tf.estimator.Estimator(model_fn=self.my_model_fn,\r\n                                       model_dir=\"/tmp/data\")\r\n    // ...\r\n\r\n  def my_model_fn(self, features, labels, mode):\r\n  \"\"\" Generate neural net model \"\"\"\r\n    self.a = a\r\n    predictions = ...\r\n    loss = ...\r\n    train_op = ...\r\n    return tf.estimator.EstimatorSpec(\r\n      mode=mode,\r\n      predictions=predictions,\r\n      loss=loss,\r\n      train_op=train_op)\r\n```\r\n\r\nBut I get the error : ValueError: model_fn [...] has following not expected args: ['self']. I tried to remove the self for the args of my model but got another error TypeError: \u2026 got multiple values for keyword argument. \r\nSolution for now (as it was suggested on [StackOverflow](http://stackoverflow.com/questions/43755609/tensorflow-estimator-model-fn-has-following-not-expected-args-self)) is to use a lambda function to wrap my function `my_model_fn` (see below) but it will be nicer without it.\r\n```\r\nclass NeuralNetwork(object):\r\n  def __init__(self):\r\n    \"\"\" Create neural net \"\"\"\r\n    regressor = tf.estimator.Estimator(\r\n        model_fn=lambda features, labels, mode: self.my_model_fn(features, labels, mode),\r\n        model_dir=\"/tmp/data\")\r\n    // ...\r\n```\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/184559789", "pull_request_review_id": 115782670, "id": 184559789, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDU1OTc4OQ==", "diff_hunk": "@@ -30,52 +33,97 @@\n from tensorflow.python.util import compat\n \n \n-class ResampleTest(test.TestCase):\n+def _time_resampling(\n+    test_obj, data_np, target_dist, init_dist, num_to_sample):\n+  dataset = dataset_ops.Dataset.from_tensor_slices(data_np).repeat()\n \n-  def testInitialKnownDistribution(self):\n-    self._testDistribution(initial_known=True)\n+  # Reshape distribution via rejection sampling.\n+  dataset = dataset.apply(\n+      resampling.rejection_resample(\n+          class_func=lambda x: x,\n+          target_dist=target_dist,\n+          initial_dist=init_dist,\n+          seed=142))\n \n-  def testInitialNotKnownDistribution(self):\n-    self._testDistribution(initial_known=False)\n+  get_next = dataset.make_one_shot_iterator().get_next()\n \n-  def _testDistribution(self, initial_known):\n+  with test_obj.test_session() as sess:\n+    start_time = time.time()\n+    for _ in xrange(num_to_sample):\n+      sess.run(get_next)\n+    end_time = time.time()\n+\n+  return end_time - start_time\n+\n+\n+class ResampleTest(test.TestCase, parameterized.TestCase):\n+\n+  @parameterized.named_parameters(\n+      (\"InitialnDistributionKnown\", True),", "path": "tensorflow/contrib/data/python/kernel_tests/resample_test.py", "position": null, "original_position": 46, "commit_id": "29cd3f96322f3d5326a2dbe6a9c502919159c9fc", "original_commit_id": "ddbc65489b722d54cab9629565e9c93e337b4b98", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "body": "Typo: \"Initialn\" -> \"Initial\"", "created_at": "2018-04-26T23:39:00Z", "updated_at": "2018-05-01T23:15:01Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/18730#discussion_r184559789", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18730", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/184559789"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/18730#discussion_r184559789"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18730"}}, "body_html": "<p>Typo: \"Initialn\" -&gt; \"Initial\"</p>", "body_text": "Typo: \"Initialn\" -> \"Initial\""}
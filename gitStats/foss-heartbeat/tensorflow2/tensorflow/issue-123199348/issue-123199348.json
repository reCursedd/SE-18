{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/576", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/576/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/576/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/576/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/576", "id": 123199348, "node_id": "MDU6SXNzdWUxMjMxOTkzNDg=", "number": 576, "title": "Resource Exhausted Error MNIST Example with CPU and Python3 (3.4.3)", "user": {"login": "dlmacedo", "id": 15001116, "node_id": "MDQ6VXNlcjE1MDAxMTE2", "avatar_url": "https://avatars2.githubusercontent.com/u/15001116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dlmacedo", "html_url": "https://github.com/dlmacedo", "followers_url": "https://api.github.com/users/dlmacedo/followers", "following_url": "https://api.github.com/users/dlmacedo/following{/other_user}", "gists_url": "https://api.github.com/users/dlmacedo/gists{/gist_id}", "starred_url": "https://api.github.com/users/dlmacedo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dlmacedo/subscriptions", "organizations_url": "https://api.github.com/users/dlmacedo/orgs", "repos_url": "https://api.github.com/users/dlmacedo/repos", "events_url": "https://api.github.com/users/dlmacedo/events{/privacy}", "received_events_url": "https://api.github.com/users/dlmacedo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-12-21T02:28:28Z", "updated_at": "2015-12-27T10:35:36Z", "closed_at": "2015-12-21T03:30:55Z", "author_association": "NONE", "body_html": "<p>I am having a Resource Exhausted Error in MNIST demo model with CPU and Python3 (3.4.3) [I am using Ubuntu 14.04LTS VMWare with 3 GB over a Windows 10 System; PIP Installation, No VirtualEnv, No Docker]:</p>\n<p>$ python -m tensorflow.models.image.mnist.convolutional</p>\n<p>david@ubuntu:<del>$<br>\ndavid@ubuntu:</del>$ python3 -m tensorflow.models.image.mnist.convolutional<br>\nExtracting data/train-images-idx3-ubyte.gz<br>\nExtracting data/train-labels-idx1-ubyte.gz<br>\nExtracting data/t10k-images-idx3-ubyte.gz<br>\nExtracting data/t10k-labels-idx1-ubyte.gz<br>\nI tensorflow/core/common_runtime/local_device.cc:40] Local device intra op parallelism threads: 1<br>\nI tensorflow/core/common_runtime/direct_session.cc:58] Direct session inter op parallelism threads: 1<br>\nInitialized!<br>\nEpoch 0.00<br>\nMinibatch loss: 12.053, learning rate: 0.010000<br>\nMinibatch error: 90.6%<br>\nW tensorflow/core/kernels/conv_ops.cc:178] Resource exhausted: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }<br>\nW tensorflow/core/common_runtime/executor.cc:1076] 0x579eaa0 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }<br>\n[[Node: Conv2D_2 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Const, Variable/read)]]<br>\nTraceback (most recent call last):<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 428, in _do_run<br>\ntarget_list)<br>\ntensorflow.python.pywrap_tensorflow.StatusNotOK: Resource exhausted: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }<br>\n[[Node: Conv2D_2 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Const, Variable/read)]]</p>\n<p>During handling of the above exception, another exception occurred:</p>\n<p>Traceback (most recent call last):<br>\nFile \"/usr/lib/python3.4/runpy.py\", line 170, in _run_module_as_main<br>\n\"<strong>main</strong>\", mod_spec)<br>\nFile \"/usr/lib/python3.4/runpy.py\", line 85, in _run_code<br>\nexec(code, run_globals)<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 290, in <br>\ntf.app.run()<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/platform/default/_app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 278, in main<br>\nerror_rate(validation_prediction.eval(), validation_labels))<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 460, in eval<br>\nreturn _eval_using_default_session(self, feed_dict, self.graph, session)<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 2910, in _eval_using_default_session<br>\nreturn session.run(tensors, feed_dict)<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 368, in run<br>\nresults = self._do_run(target_list, unique_fetch_targets, feed_dict_string)<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 444, in _do_run<br>\ne.code)<br>\ntensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }<br>\n[[Node: Conv2D_2 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Const, Variable/read)]]<br>\nCaused by op 'Conv2D_2', defined at:<br>\nFile \"/usr/lib/python3.4/runpy.py\", line 170, in _run_module_as_main<br>\n\"<strong>main</strong>\", mod_spec)<br>\nFile \"/usr/lib/python3.4/runpy.py\", line 85, in _run_code<br>\nexec(code, run_globals)<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 290, in <br>\ntf.app.run()<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/platform/default/_app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 250, in main<br>\nvalidation_prediction = tf.nn.softmax(model(validation_data_node))<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 188, in model<br>\npadding='SAME')<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/ops/gen_nn_ops.py\", line 211, in conv2d<br>\nuse_cudnn_on_gpu=use_cudnn_on_gpu, name=name)<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/ops/op_def_library.py\", line 664, in apply_op<br>\nop_def=op_def)<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 1834, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 1043, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>david@ubuntu:<del>$<br>\ndavid@ubuntu:</del>$</p>", "body_text": "I am having a Resource Exhausted Error in MNIST demo model with CPU and Python3 (3.4.3) [I am using Ubuntu 14.04LTS VMWare with 3 GB over a Windows 10 System; PIP Installation, No VirtualEnv, No Docker]:\n$ python -m tensorflow.models.image.mnist.convolutional\ndavid@ubuntu:$\ndavid@ubuntu:$ python3 -m tensorflow.models.image.mnist.convolutional\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nI tensorflow/core/common_runtime/local_device.cc:40] Local device intra op parallelism threads: 1\nI tensorflow/core/common_runtime/direct_session.cc:58] Direct session inter op parallelism threads: 1\nInitialized!\nEpoch 0.00\nMinibatch loss: 12.053, learning rate: 0.010000\nMinibatch error: 90.6%\nW tensorflow/core/kernels/conv_ops.cc:178] Resource exhausted: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }\nW tensorflow/core/common_runtime/executor.cc:1076] 0x579eaa0 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }\n[[Node: Conv2D_2 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Const, Variable/read)]]\nTraceback (most recent call last):\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 428, in _do_run\ntarget_list)\ntensorflow.python.pywrap_tensorflow.StatusNotOK: Resource exhausted: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }\n[[Node: Conv2D_2 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Const, Variable/read)]]\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\nFile \"/usr/lib/python3.4/runpy.py\", line 170, in _run_module_as_main\n\"main\", mod_spec)\nFile \"/usr/lib/python3.4/runpy.py\", line 85, in _run_code\nexec(code, run_globals)\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 290, in \ntf.app.run()\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 278, in main\nerror_rate(validation_prediction.eval(), validation_labels))\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 460, in eval\nreturn _eval_using_default_session(self, feed_dict, self.graph, session)\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 2910, in _eval_using_default_session\nreturn session.run(tensors, feed_dict)\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 368, in run\nresults = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 444, in _do_run\ne.code)\ntensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }\n[[Node: Conv2D_2 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Const, Variable/read)]]\nCaused by op 'Conv2D_2', defined at:\nFile \"/usr/lib/python3.4/runpy.py\", line 170, in _run_module_as_main\n\"main\", mod_spec)\nFile \"/usr/lib/python3.4/runpy.py\", line 85, in _run_code\nexec(code, run_globals)\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 290, in \ntf.app.run()\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 250, in main\nvalidation_prediction = tf.nn.softmax(model(validation_data_node))\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 188, in model\npadding='SAME')\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/ops/gen_nn_ops.py\", line 211, in conv2d\nuse_cudnn_on_gpu=use_cudnn_on_gpu, name=name)\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/ops/op_def_library.py\", line 664, in apply_op\nop_def=op_def)\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 1834, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 1043, in init\nself._traceback = _extract_stack()\ndavid@ubuntu:$\ndavid@ubuntu:$", "body": "I am having a Resource Exhausted Error in MNIST demo model with CPU and Python3 (3.4.3) [I am using Ubuntu 14.04LTS VMWare with 3 GB over a Windows 10 System; PIP Installation, No VirtualEnv, No Docker]:\n\n$ python -m tensorflow.models.image.mnist.convolutional\n\ndavid@ubuntu:~$ \ndavid@ubuntu:~$ python3 -m tensorflow.models.image.mnist.convolutional\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nI tensorflow/core/common_runtime/local_device.cc:40] Local device intra op parallelism threads: 1\nI tensorflow/core/common_runtime/direct_session.cc:58] Direct session inter op parallelism threads: 1\nInitialized!\nEpoch 0.00\nMinibatch loss: 12.053, learning rate: 0.010000\nMinibatch error: 90.6%\nW tensorflow/core/kernels/conv_ops.cc:178] Resource exhausted: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }\nW tensorflow/core/common_runtime/executor.cc:1076] 0x579eaa0 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }\n     [[Node: Conv2D_2 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Const, Variable/read)]]\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 428, in _do_run\n    target_list)\ntensorflow.python.pywrap_tensorflow.StatusNotOK: Resource exhausted: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }\n     [[Node: Conv2D_2 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Const, Variable/read)]]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.4/runpy.py\", line 170, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/usr/lib/python3.4/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 290, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 278, in main\n    error_rate(validation_prediction.eval(), validation_labels))\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 460, in eval\n    return _eval_using_default_session(self, feed_dict, self.graph, session)\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 2910, in _eval_using_default_session\n    return session.run(tensors, feed_dict)\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 368, in run\n    results = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 444, in _do_run\n    e.code)\ntensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shapedim { size: 5000 } dim { size: 28 } dim { size: 28 } dim { size: 32 }\n     [[Node: Conv2D_2 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Const, Variable/read)]]\nCaused by op 'Conv2D_2', defined at:\n  File \"/usr/lib/python3.4/runpy.py\", line 170, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/usr/lib/python3.4/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 290, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 250, in main\n    validation_prediction = tf.nn.softmax(model(validation_data_node))\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/models/image/mnist/convolutional.py\", line 188, in model\n    padding='SAME')\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/ops/gen_nn_ops.py\", line 211, in conv2d\n    use_cudnn_on_gpu=use_cudnn_on_gpu, name=name)\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/ops/op_def_library.py\", line 664, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 1834, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/ops.py\", line 1043, in __init__\n    self._traceback = _extract_stack()\n\ndavid@ubuntu:~$ \ndavid@ubuntu:~$ \n"}
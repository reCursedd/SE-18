{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/284498473", "html_url": "https://github.com/tensorflow/tensorflow/issues/8085#issuecomment-284498473", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8085", "id": 284498473, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDQ5ODQ3Mw==", "user": {"login": "prb12", "id": 11547801, "node_id": "MDQ6VXNlcjExNTQ3ODAx", "avatar_url": "https://avatars1.githubusercontent.com/u/11547801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prb12", "html_url": "https://github.com/prb12", "followers_url": "https://api.github.com/users/prb12/followers", "following_url": "https://api.github.com/users/prb12/following{/other_user}", "gists_url": "https://api.github.com/users/prb12/gists{/gist_id}", "starred_url": "https://api.github.com/users/prb12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prb12/subscriptions", "organizations_url": "https://api.github.com/users/prb12/orgs", "repos_url": "https://api.github.com/users/prb12/repos", "events_url": "https://api.github.com/users/prb12/events{/privacy}", "received_events_url": "https://api.github.com/users/prb12/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-06T19:06:49Z", "updated_at": "2017-03-06T19:06:49Z", "author_association": "MEMBER", "body_html": "<p>The errors are clearly coming from running out of GPU memory by trying to run multiple TF computations simultaneously.  As <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23486130\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tfboyd\">@tfboyd</a> says, it looks like you are creating a separate TF process and runtime for each, and they are all trying to grab some GPU memory until you run out.  Being separate processes, the TF instances have no way of coordinating with each other (other than maybe blocking than waiting to allocate GPU memory).  If you are wanting to make this reliable you should probably be running some kind of service with concurrency control (i.e. limit the number of concurrent operations in flight).</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=447896\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nfiedel\">@nfiedel</a> Any suggestions here wrt tf.serving?</p>\n<p>Failing that, I'd suggest posting a question on StackOverflow, since this is more of a generic programming question.</p>", "body_text": "The errors are clearly coming from running out of GPU memory by trying to run multiple TF computations simultaneously.  As @tfboyd says, it looks like you are creating a separate TF process and runtime for each, and they are all trying to grab some GPU memory until you run out.  Being separate processes, the TF instances have no way of coordinating with each other (other than maybe blocking than waiting to allocate GPU memory).  If you are wanting to make this reliable you should probably be running some kind of service with concurrency control (i.e. limit the number of concurrent operations in flight).\n@nfiedel Any suggestions here wrt tf.serving?\nFailing that, I'd suggest posting a question on StackOverflow, since this is more of a generic programming question.", "body": "The errors are clearly coming from running out of GPU memory by trying to run multiple TF computations simultaneously.  As @tfboyd says, it looks like you are creating a separate TF process and runtime for each, and they are all trying to grab some GPU memory until you run out.  Being separate processes, the TF instances have no way of coordinating with each other (other than maybe blocking than waiting to allocate GPU memory).  If you are wanting to make this reliable you should probably be running some kind of service with concurrency control (i.e. limit the number of concurrent operations in flight).  \r\n\r\n@nfiedel Any suggestions here wrt tf.serving?\r\n\r\nFailing that, I'd suggest posting a question on StackOverflow, since this is more of a generic programming question."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/408751168", "html_url": "https://github.com/tensorflow/tensorflow/issues/21190#issuecomment-408751168", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21190", "id": 408751168, "node_id": "MDEyOklzc3VlQ29tbWVudDQwODc1MTE2OA==", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-30T05:30:18Z", "updated_at": "2018-07-30T05:30:18Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=26417094\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ybsave\">@ybsave</a> In the docstring <code>tf.map_fn</code>:</p>\n<pre><code>dtype: (optional) The output type(s) of fn. If fn returns a structure of Tensors differing\nfrom the structure of elems, then dtype is not optional and must have the same\nstructure as the output of fn.\n</code></pre>\n<p>As the return type of <code>tf.histogram_fixed_width</code> is <code>tf.int32</code> (differs from <code>V</code>), I think the issue could be resolved with:</p>\n<pre><code>  V = tf.placeholder(tf.float32, [None, 3])\n  hists = tf.map_fn(\n\tlambda x: tf.histogram_fixed_width(x, [0.0,10.0], 10), V, tf.int32)\n  A = [[1.0,2.0,3.0], [4.0,5.0,6.0]]\n  with tf.Session() as sess:\n\tprint(sess.run(hists, {V:A}))\n</code></pre>", "body_text": "@ybsave In the docstring tf.map_fn:\ndtype: (optional) The output type(s) of fn. If fn returns a structure of Tensors differing\nfrom the structure of elems, then dtype is not optional and must have the same\nstructure as the output of fn.\n\nAs the return type of tf.histogram_fixed_width is tf.int32 (differs from V), I think the issue could be resolved with:\n  V = tf.placeholder(tf.float32, [None, 3])\n  hists = tf.map_fn(\n\tlambda x: tf.histogram_fixed_width(x, [0.0,10.0], 10), V, tf.int32)\n  A = [[1.0,2.0,3.0], [4.0,5.0,6.0]]\n  with tf.Session() as sess:\n\tprint(sess.run(hists, {V:A}))", "body": "@ybsave In the docstring `tf.map_fn`:\r\n```\r\ndtype: (optional) The output type(s) of fn. If fn returns a structure of Tensors differing\r\nfrom the structure of elems, then dtype is not optional and must have the same\r\nstructure as the output of fn.\r\n```\r\n\r\nAs the return type of `tf.histogram_fixed_width` is `tf.int32` (differs from `V`), I think the issue could be resolved with:\r\n```\r\n  V = tf.placeholder(tf.float32, [None, 3])\r\n  hists = tf.map_fn(\r\n\tlambda x: tf.histogram_fixed_width(x, [0.0,10.0], 10), V, tf.int32)\r\n  A = [[1.0,2.0,3.0], [4.0,5.0,6.0]]\r\n  with tf.Session() as sess:\r\n\tprint(sess.run(hists, {V:A}))\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9979", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9979/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9979/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9979/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9979", "id": 229447006, "node_id": "MDU6SXNzdWUyMjk0NDcwMDY=", "number": 9979, "title": "Building with config MKL with current master (git version: v1.1.0-rc2-1163-gcbe5eb4) fails with a build rule error", "user": {"login": "nhasabni", "id": 22304502, "node_id": "MDQ6VXNlcjIyMzA0NTAy", "avatar_url": "https://avatars0.githubusercontent.com/u/22304502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nhasabni", "html_url": "https://github.com/nhasabni", "followers_url": "https://api.github.com/users/nhasabni/followers", "following_url": "https://api.github.com/users/nhasabni/following{/other_user}", "gists_url": "https://api.github.com/users/nhasabni/gists{/gist_id}", "starred_url": "https://api.github.com/users/nhasabni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nhasabni/subscriptions", "organizations_url": "https://api.github.com/users/nhasabni/orgs", "repos_url": "https://api.github.com/users/nhasabni/repos", "events_url": "https://api.github.com/users/nhasabni/events{/privacy}", "received_events_url": "https://api.github.com/users/nhasabni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-17T18:28:06Z", "updated_at": "2017-05-30T18:21:39Z", "closed_at": "2017-05-30T18:21:39Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Building with config MKL with the current master fails with build rule error.</p>\n<h3>System information:</h3>\n<p>(contents from tf_env.txt)<br>\n== cat /etc/issue ===============================================<br>\nLinux desktop 4.4.0-75-generic <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116139237\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/96\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/96/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/96\">#96</a>-Ubuntu SMP Thu Apr 20 09:56:33 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux<br>\nVERSION=\"16.04.2 LTS (Xenial Xerus)\"<br>\nVERSION_ID=\"16.04\"<br>\nVERSION_CODENAME=xenial</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609<br>\nCopyright (C) 2015 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux desktop 4.4.0-75-generic <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116139237\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/96\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/96/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/96\">#96</a>-Ubuntu SMP Thu Apr 20 09:56:33 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nnumpy (1.12.1)<br>\nprotobuf (3.3.0)<br>\ntensorflow (1.1.0)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.1.0-rc2<br>\ntf.GIT_VERSION = v1.1.0-rc2-1163-gcbe5eb4<br>\ntf.COMPILER_VERSION = v1.1.0-rc2-1163-gcbe5eb4<br>\nSanity check: array([1], dtype=int32)</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH is unset<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================</p>\n<p>== cuda libs  ===================================================</p>\n<p><strong>Exact command to reproduce</strong>:</p>\n<p>bazel --output_user_root=/home/desktop/gtt/tfbuild_opt/ build --copt=\"-DEIGEN_USE_VML\" --config=mkl -c opt //tensorflow/tools/pip_package:build_pip_package</p>\n<h3>Describe the problem: Build with the above setup and following configure options fails with a build rule error.</h3>\n<p>$ ./configure<br>\nPlease specify the location of python. [Default is /usr/bin/python]:<br>\nFound possible Python library paths:<br>\n/usr/local/lib/python2.7/dist-packages<br>\n/usr/lib/python2.7/dist-packages<br>\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]</p>\n<p>Using python library path: /usr/local/lib/python2.7/dist-packages<br>\nDo you wish to build TensorFlow with MKL support? [y/N] y<br>\nMKL support will be enabled for TensorFlow<br>\nDo you wish to download MKL LIB from the web? [Y/n]<br>\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:<br>\nDo you wish to use jemalloc as the malloc implementation? [Y/n]<br>\njemalloc enabled<br>\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]<br>\nNo Google Cloud Platform support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with Hadoop File System support? [y/N]<br>\nNo Hadoop File System support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N]<br>\nNo XLA support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with VERBS support? [y/N]<br>\nNo VERBS support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with OpenCL support? [y/N]<br>\nNo OpenCL support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with CUDA support? [y/N]<br>\nNo CUDA support will be enabled for TensorFlow<br>\nWarning: ignoring http_proxy in environment.<br>\n...<br>\n.....................<br>\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.<br>\nConfiguration finished</p>\n<p>Build failed with following error:</p>\n<p><code>ERROR: /home/desktop/gtt/tensorflow/core/BUILD:1544:1: undeclared inclusion(s) in rule '//tensorflow/core:core_cpu_base': this rule is missing dependency declarations for the following files included by 'tensorflow/core/graph/mkl_tfconversion_pass.cc': '/home/desktop/gtt/tensorflow/core/common_runtime/function.h' '/home/desktop/gtt/tensorflow/core/common_runtime/device_mgr.h' '/home/desktop/gtt/tensorflow/core/common_runtime/optimization_registry.h' '/home/desktop/gtt/tensorflow/core/common_runtime/device_set.h'. ____Building complete. Target //tensorflow/tools/pip_package:build_pip_package failed to build Use --verbose_failures to see the command lines of failed build steps. ____Elapsed time: 615.488s, Critical Path: 227.18s</code></p>", "body_text": "Building with config MKL with the current master fails with build rule error.\nSystem information:\n(contents from tf_env.txt)\n== cat /etc/issue ===============================================\nLinux desktop 4.4.0-75-generic #96-Ubuntu SMP Thu Apr 20 09:56:33 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"16.04.2 LTS (Xenial Xerus)\"\nVERSION_ID=\"16.04\"\nVERSION_CODENAME=xenial\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux desktop 4.4.0-75-generic #96-Ubuntu SMP Thu Apr 20 09:56:33 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n== check pips ===================================================\nnumpy (1.12.1)\nprotobuf (3.3.0)\ntensorflow (1.1.0)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.1.0-rc2\ntf.GIT_VERSION = v1.1.0-rc2-1163-gcbe5eb4\ntf.COMPILER_VERSION = v1.1.0-rc2-1163-gcbe5eb4\nSanity check: array([1], dtype=int32)\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\n== cuda libs  ===================================================\nExact command to reproduce:\nbazel --output_user_root=/home/desktop/gtt/tfbuild_opt/ build --copt=\"-DEIGEN_USE_VML\" --config=mkl -c opt //tensorflow/tools/pip_package:build_pip_package\nDescribe the problem: Build with the above setup and following configure options fails with a build rule error.\n$ ./configure\nPlease specify the location of python. [Default is /usr/bin/python]:\nFound possible Python library paths:\n/usr/local/lib/python2.7/dist-packages\n/usr/lib/python2.7/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]\nUsing python library path: /usr/local/lib/python2.7/dist-packages\nDo you wish to build TensorFlow with MKL support? [y/N] y\nMKL support will be enabled for TensorFlow\nDo you wish to download MKL LIB from the web? [Y/n]\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:\nDo you wish to use jemalloc as the malloc implementation? [Y/n]\njemalloc enabled\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N]\nNo Hadoop File System support will be enabled for TensorFlow\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N]\nNo XLA support will be enabled for TensorFlow\nDo you wish to build TensorFlow with VERBS support? [y/N]\nNo VERBS support will be enabled for TensorFlow\nDo you wish to build TensorFlow with OpenCL support? [y/N]\nNo OpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N]\nNo CUDA support will be enabled for TensorFlow\nWarning: ignoring http_proxy in environment.\n...\n.....................\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\nConfiguration finished\nBuild failed with following error:\nERROR: /home/desktop/gtt/tensorflow/core/BUILD:1544:1: undeclared inclusion(s) in rule '//tensorflow/core:core_cpu_base': this rule is missing dependency declarations for the following files included by 'tensorflow/core/graph/mkl_tfconversion_pass.cc': '/home/desktop/gtt/tensorflow/core/common_runtime/function.h' '/home/desktop/gtt/tensorflow/core/common_runtime/device_mgr.h' '/home/desktop/gtt/tensorflow/core/common_runtime/optimization_registry.h' '/home/desktop/gtt/tensorflow/core/common_runtime/device_set.h'. ____Building complete. Target //tensorflow/tools/pip_package:build_pip_package failed to build Use --verbose_failures to see the command lines of failed build steps. ____Elapsed time: 615.488s, Critical Path: 227.18s", "body": "Building with config MKL with the current master fails with build rule error.\r\n\r\n### System information: \r\n(contents from tf_env.txt)\r\n== cat /etc/issue ===============================================\r\nLinux desktop 4.4.0-75-generic #96-Ubuntu SMP Thu Apr 20 09:56:33 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"16.04.2 LTS (Xenial Xerus)\"\r\nVERSION_ID=\"16.04\"\r\nVERSION_CODENAME=xenial\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n== uname -a =====================================================\r\nLinux desktop 4.4.0-75-generic #96-Ubuntu SMP Thu Apr 20 09:56:33 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy (1.12.1)\r\nprotobuf (3.3.0)\r\ntensorflow (1.1.0)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.1.0-rc2\r\ntf.GIT_VERSION = v1.1.0-rc2-1163-gcbe5eb4\r\ntf.COMPILER_VERSION = v1.1.0-rc2-1163-gcbe5eb4\r\nSanity check: array([1], dtype=int32)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n\r\n== cuda libs  ===================================================\r\n\r\n**Exact command to reproduce**:\r\n\r\nbazel --output_user_root=/home/desktop/gtt/tfbuild_opt/ build --copt=\"-DEIGEN_USE_VML\" --config=mkl -c opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\n### Describe the problem: Build with the above setup and following configure options fails with a build rule error.\r\n\r\n$ ./configure\r\nPlease specify the location of python. [Default is /usr/bin/python]: \r\nFound possible Python library paths:\r\n  /usr/local/lib/python2.7/dist-packages\r\n  /usr/lib/python2.7/dist-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]\r\n\r\nUsing python library path: /usr/local/lib/python2.7/dist-packages\r\nDo you wish to build TensorFlow with MKL support? [y/N] y\r\nMKL support will be enabled for TensorFlow\r\nDo you wish to download MKL LIB from the web? [Y/n] \r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \r\nDo you wish to use jemalloc as the malloc implementation? [Y/n] \r\njemalloc enabled\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \r\nNo Google Cloud Platform support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \r\nNo Hadoop File System support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] \r\nNo XLA support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with VERBS support? [y/N] \r\nNo VERBS support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with OpenCL support? [y/N] \r\nNo OpenCL support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with CUDA support? [y/N] \r\nNo CUDA support will be enabled for TensorFlow\r\nWarning: ignoring http_proxy in environment.\r\n...\r\n.....................\r\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\r\nConfiguration finished\r\n\r\nBuild failed with following error:\r\n\r\n`\r\nERROR: /home/desktop/gtt/tensorflow/core/BUILD:1544:1: undeclared inclusion(s) in rule '//tensorflow/core:core_cpu_base':\r\nthis rule is missing dependency declarations for the following files included by 'tensorflow/core/graph/mkl_tfconversion_pass.cc':\r\n  '/home/desktop/gtt/tensorflow/core/common_runtime/function.h'\r\n  '/home/desktop/gtt/tensorflow/core/common_runtime/device_mgr.h'\r\n  '/home/desktop/gtt/tensorflow/core/common_runtime/optimization_registry.h'\r\n  '/home/desktop/gtt/tensorflow/core/common_runtime/device_set.h'.\r\n____Building complete.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\n____Elapsed time: 615.488s, Critical Path: 227.18s\r\n`\r\n"}
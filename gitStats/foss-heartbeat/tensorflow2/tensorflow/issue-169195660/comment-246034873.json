{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/246034873", "html_url": "https://github.com/tensorflow/tensorflow/issues/3628#issuecomment-246034873", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3628", "id": 246034873, "node_id": "MDEyOklzc3VlQ29tbWVudDI0NjAzNDg3Mw==", "user": {"login": "pkmital", "id": 429252, "node_id": "MDQ6VXNlcjQyOTI1Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/429252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkmital", "html_url": "https://github.com/pkmital", "followers_url": "https://api.github.com/users/pkmital/followers", "following_url": "https://api.github.com/users/pkmital/following{/other_user}", "gists_url": "https://api.github.com/users/pkmital/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkmital/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkmital/subscriptions", "organizations_url": "https://api.github.com/users/pkmital/orgs", "repos_url": "https://api.github.com/users/pkmital/repos", "events_url": "https://api.github.com/users/pkmital/events{/privacy}", "received_events_url": "https://api.github.com/users/pkmital/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-09T20:46:04Z", "updated_at": "2016-09-09T20:46:04Z", "author_association": "NONE", "body_html": "<p>I think I have the same issue.  Pasting my output below in case it helps:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-ii\">--------------------------------------------------------------------------</span><span class=\"pl-k\">-</span>\n<span class=\"pl-c1\">TypeError</span>                                 Traceback (most recent call last)\n<span class=\"pl-k\">/</span>Users<span class=\"pl-k\">/</span>pkmital<span class=\"pl-k\">/</span>.pyenv<span class=\"pl-k\">/</span>versions<span class=\"pl-k\">/</span><span class=\"pl-c1\">3.4</span>.0<span class=\"pl-k\">/</span>Python.framework<span class=\"pl-k\">/</span>Versions<span class=\"pl-k\">/</span><span class=\"pl-c1\">3.4</span><span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python3.4<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>framework<span class=\"pl-k\">/</span>importer.py <span class=\"pl-k\">in</span> import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\n    <span class=\"pl-c1\">354</span>             <span class=\"pl-c\"><span class=\"pl-c\">#</span> pylint: disable=protected-access</span>\n<span class=\"pl-ii\">--</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">355</span>             op._add_input(source_tensor, <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>input_type)\n    <span class=\"pl-c1\">356</span>             <span class=\"pl-c\"><span class=\"pl-c\">#</span> pylint: enable=protected-access</span>\n\n<span class=\"pl-k\">/</span>Users<span class=\"pl-k\">/</span>pkmital<span class=\"pl-k\">/</span>.pyenv<span class=\"pl-k\">/</span>versions<span class=\"pl-k\">/</span><span class=\"pl-c1\">3.4</span>.0<span class=\"pl-k\">/</span>Python.framework<span class=\"pl-k\">/</span>Versions<span class=\"pl-k\">/</span><span class=\"pl-c1\">3.4</span><span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python3.4<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>framework<span class=\"pl-k\">/</span>ops.py <span class=\"pl-k\">in</span> _add_input(<span class=\"pl-c1\">self</span>, tensor, dtype)\n   <span class=\"pl-c1\">1333</span>             <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Cannot convert a tensor of type <span class=\"pl-c1\">%s</span> to an input of type <span class=\"pl-c1\">%s</span><span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-ii\">-&gt;</span> <span class=\"pl-c1\">1334</span>             <span class=\"pl-k\">%</span> (tensor.dtype.name, dtype.name))\n   <span class=\"pl-c1\">1335</span>     <span class=\"pl-c1\">self</span>._inputs.append(tensor)\n\n<span class=\"pl-c1\">TypeError</span>: Cannot convert a tensor of <span class=\"pl-c1\">type</span> float32 to an <span class=\"pl-c1\">input</span> of <span class=\"pl-c1\">type</span> float32_ref\n\nDuring handling of the above exception, another exception occurred:\n\n<span class=\"pl-c1\">ValueError</span>                                Traceback (most recent call last)\n<span class=\"pl-k\">&lt;</span>ipython<span class=\"pl-k\">-</span><span class=\"pl-c1\">input</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">48</span><span class=\"pl-k\">-</span><span class=\"pl-ii\">371a235edd1f</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>()\n<span class=\"pl-ii\">----</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">1</span> tf.import_graph_def(net[<span class=\"pl-s\"><span class=\"pl-pds\">'</span>graph_def<span class=\"pl-pds\">'</span></span>])\n      <span class=\"pl-c1\">2</span> g <span class=\"pl-k\">=</span> tf.get_default_graph()\n      <span class=\"pl-c1\">3</span> [op.name <span class=\"pl-k\">for</span> op <span class=\"pl-k\">in</span> g.get_operations()]\n\n<span class=\"pl-k\">/</span>Users<span class=\"pl-k\">/</span>pkmital<span class=\"pl-k\">/</span>.pyenv<span class=\"pl-k\">/</span>versions<span class=\"pl-k\">/</span><span class=\"pl-c1\">3.4</span>.0<span class=\"pl-k\">/</span>Python.framework<span class=\"pl-k\">/</span>Versions<span class=\"pl-k\">/</span><span class=\"pl-c1\">3.4</span><span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python3.4<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>framework<span class=\"pl-k\">/</span>importer.py <span class=\"pl-k\">in</span> import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\n    <span class=\"pl-c1\">357</span>           <span class=\"pl-k\">except</span> <span class=\"pl-c1\">TypeError</span> <span class=\"pl-k\">as</span> te:\n    <span class=\"pl-c1\">358</span>             <span class=\"pl-k\">raise</span> <span class=\"pl-c1\">ValueError</span>(_InvalidNodeMessage(\n<span class=\"pl-ii\">--</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">359</span>                 node, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>Input tensor <span class=\"pl-c1\">%r</span> <span class=\"pl-c1\">%s</span><span class=\"pl-pds\">'</span></span> <span class=\"pl-k\">%</span> (input_name, te)))\n    <span class=\"pl-c1\">360</span> \n    <span class=\"pl-c1\">361</span>       <span class=\"pl-c\"><span class=\"pl-c\">#</span> pylint: disable=protected_access</span>\n\n<span class=\"pl-c1\">ValueError</span>: graph_def <span class=\"pl-k\">is</span> invalid at node <span class=\"pl-s\"><span class=\"pl-pds\">'</span>encoder/0/bn/ExponentialMovingAverage/AssignMovingAvg<span class=\"pl-pds\">'</span></span>: Input tensor <span class=\"pl-s\"><span class=\"pl-pds\">'</span>encoder/0/bn/encoder/0/bn/moments/moments_1/mean/ExponentialMovingAverage:0<span class=\"pl-pds\">'</span></span> Cannot convert a tensor of <span class=\"pl-c1\">type</span> float32 to an <span class=\"pl-c1\">input</span> of <span class=\"pl-c1\">type</span> float32_ref.</pre></div>\n<p>You can also try the model for yourself here: <a href=\"https://s3.amazonaws.com/cadl/models/celeb_vaegan.tfmodel\" rel=\"nofollow\">https://s3.amazonaws.com/cadl/models/celeb_vaegan.tfmodel</a></p>", "body_text": "I think I have the same issue.  Pasting my output below in case it helps:\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n/Users/pkmital/.pyenv/versions/3.4.0/Python.framework/Versions/3.4/lib/python3.4/site-packages/tensorflow/python/framework/importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\n    354             # pylint: disable=protected-access\n--> 355             op._add_input(source_tensor, dtype=input_type)\n    356             # pylint: enable=protected-access\n\n/Users/pkmital/.pyenv/versions/3.4.0/Python.framework/Versions/3.4/lib/python3.4/site-packages/tensorflow/python/framework/ops.py in _add_input(self, tensor, dtype)\n   1333             \"Cannot convert a tensor of type %s to an input of type %s\"\n-> 1334             % (tensor.dtype.name, dtype.name))\n   1335     self._inputs.append(tensor)\n\nTypeError: Cannot convert a tensor of type float32 to an input of type float32_ref\n\nDuring handling of the above exception, another exception occurred:\n\nValueError                                Traceback (most recent call last)\n<ipython-input-48-371a235edd1f> in <module>()\n----> 1 tf.import_graph_def(net['graph_def'])\n      2 g = tf.get_default_graph()\n      3 [op.name for op in g.get_operations()]\n\n/Users/pkmital/.pyenv/versions/3.4.0/Python.framework/Versions/3.4/lib/python3.4/site-packages/tensorflow/python/framework/importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\n    357           except TypeError as te:\n    358             raise ValueError(_InvalidNodeMessage(\n--> 359                 node, 'Input tensor %r %s' % (input_name, te)))\n    360 \n    361       # pylint: disable=protected_access\n\nValueError: graph_def is invalid at node 'encoder/0/bn/ExponentialMovingAverage/AssignMovingAvg': Input tensor 'encoder/0/bn/encoder/0/bn/moments/moments_1/mean/ExponentialMovingAverage:0' Cannot convert a tensor of type float32 to an input of type float32_ref.\nYou can also try the model for yourself here: https://s3.amazonaws.com/cadl/models/celeb_vaegan.tfmodel", "body": "I think I have the same issue.  Pasting my output below in case it helps:\n\n``` python\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n/Users/pkmital/.pyenv/versions/3.4.0/Python.framework/Versions/3.4/lib/python3.4/site-packages/tensorflow/python/framework/importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\n    354             # pylint: disable=protected-access\n--> 355             op._add_input(source_tensor, dtype=input_type)\n    356             # pylint: enable=protected-access\n\n/Users/pkmital/.pyenv/versions/3.4.0/Python.framework/Versions/3.4/lib/python3.4/site-packages/tensorflow/python/framework/ops.py in _add_input(self, tensor, dtype)\n   1333             \"Cannot convert a tensor of type %s to an input of type %s\"\n-> 1334             % (tensor.dtype.name, dtype.name))\n   1335     self._inputs.append(tensor)\n\nTypeError: Cannot convert a tensor of type float32 to an input of type float32_ref\n\nDuring handling of the above exception, another exception occurred:\n\nValueError                                Traceback (most recent call last)\n<ipython-input-48-371a235edd1f> in <module>()\n----> 1 tf.import_graph_def(net['graph_def'])\n      2 g = tf.get_default_graph()\n      3 [op.name for op in g.get_operations()]\n\n/Users/pkmital/.pyenv/versions/3.4.0/Python.framework/Versions/3.4/lib/python3.4/site-packages/tensorflow/python/framework/importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\n    357           except TypeError as te:\n    358             raise ValueError(_InvalidNodeMessage(\n--> 359                 node, 'Input tensor %r %s' % (input_name, te)))\n    360 \n    361       # pylint: disable=protected_access\n\nValueError: graph_def is invalid at node 'encoder/0/bn/ExponentialMovingAverage/AssignMovingAvg': Input tensor 'encoder/0/bn/encoder/0/bn/moments/moments_1/mean/ExponentialMovingAverage:0' Cannot convert a tensor of type float32 to an input of type float32_ref.\n```\n\nYou can also try the model for yourself here: https://s3.amazonaws.com/cadl/models/celeb_vaegan.tfmodel\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/432190359", "html_url": "https://github.com/tensorflow/tensorflow/issues/3628#issuecomment-432190359", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3628", "id": 432190359, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjE5MDM1OQ==", "user": {"login": "Shivamagrawal2014", "id": 8779082, "node_id": "MDQ6VXNlcjg3NzkwODI=", "avatar_url": "https://avatars0.githubusercontent.com/u/8779082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shivamagrawal2014", "html_url": "https://github.com/Shivamagrawal2014", "followers_url": "https://api.github.com/users/Shivamagrawal2014/followers", "following_url": "https://api.github.com/users/Shivamagrawal2014/following{/other_user}", "gists_url": "https://api.github.com/users/Shivamagrawal2014/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shivamagrawal2014/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shivamagrawal2014/subscriptions", "organizations_url": "https://api.github.com/users/Shivamagrawal2014/orgs", "repos_url": "https://api.github.com/users/Shivamagrawal2014/repos", "events_url": "https://api.github.com/users/Shivamagrawal2014/events{/privacy}", "received_events_url": "https://api.github.com/users/Shivamagrawal2014/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-23T10:25:44Z", "updated_at": "2018-10-23T10:25:44Z", "author_association": "NONE", "body_html": "<p>same problem here, I trained my model and tried to import the frozen graph with batch norm nodes:<br>\nfollowing the Complete Traceback :</p>\n<p>`---------------------------------------------------------------------------<br>\nInvalidArgumentError                      Traceback (most recent call last)<br>\nc:\\users\\shivam.agarwal\\pycharmprojects\\audioapi\\venv\\lib\\site-packages\\tensorflow\\python\\framework\\importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)<br>\n417         results = c_api.TF_GraphImportGraphDefWithResults(<br>\n--&gt; 418             graph._c_graph, serialized, options)  # pylint: disable=protected-access<br>\n419         results = c_api_util.ScopedTFImportGraphDefResults(results)</p>\n<p>InvalidArgumentError: Node 'Test_Net/convolution/normalize_input/Test_Net/convolution/normalize_input/mean/ExponentialMovingAverage/read' expects to be colocated with unknown node 'Test_Net/convolution/normalize_input/mean'</p>\n<p>During handling of the above exception, another exception occurred:</p>\n<p>ValueError                                Traceback (most recent call last)<br>\n in ()<br>\n----&gt; 1 read_graph_proto(as_constants=True)</p>\n<p> in read_graph_proto(proto_dir, batch_number, as_constants, new_filename_queue)<br>\n25                     tf.import_graph_def(graph_def=graph_def)<br>\n26             else:<br>\n---&gt; 27                 tf.import_graph_def(graph_def=graph_def)<br>\n28             print([node for node in self.session.graph_def.node])<br>\n29     else:</p>\n<p>c:\\users\\shivam.agarwal\\pycharmprojects\\audioapi\\venv\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py in new_func(*args, **kwargs)<br>\n452                 'in a future version' if date is None else ('after %s' % date),<br>\n453                 instructions)<br>\n--&gt; 454       return func(*args, **kwargs)<br>\n455     return tf_decorator.make_decorator(func, new_func, 'deprecated',<br>\n456                                        _add_deprecated_arg_notice_to_docstring(</p>\n<p>c:\\users\\shivam.agarwal\\pycharmprojects\\audioapi\\venv\\lib\\site-packages\\tensorflow\\python\\framework\\importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)<br>\n420       except errors.InvalidArgumentError as e:<br>\n421         # Convert to ValueError for backwards compatibility.<br>\n--&gt; 422         raise ValueError(str(e))<br>\n423<br>\n424     # Create _DefinedFunctions for any imported functions.</p>\n<p>ValueError: Node 'Test_Net/convolution/normalize_input/Test_Net/convolution/normalize_input/mean/ExponentialMovingAverage/read' expects to be colocated with unknown node 'Test_Net/convolution/normalize_input/mean'<br>\n`</p>\n<p>How can I sort out this ? I have been stuck since months now because of this one issue.</p>", "body_text": "same problem here, I trained my model and tried to import the frozen graph with batch norm nodes:\nfollowing the Complete Traceback :\n`---------------------------------------------------------------------------\nInvalidArgumentError                      Traceback (most recent call last)\nc:\\users\\shivam.agarwal\\pycharmprojects\\audioapi\\venv\\lib\\site-packages\\tensorflow\\python\\framework\\importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\n417         results = c_api.TF_GraphImportGraphDefWithResults(\n--> 418             graph._c_graph, serialized, options)  # pylint: disable=protected-access\n419         results = c_api_util.ScopedTFImportGraphDefResults(results)\nInvalidArgumentError: Node 'Test_Net/convolution/normalize_input/Test_Net/convolution/normalize_input/mean/ExponentialMovingAverage/read' expects to be colocated with unknown node 'Test_Net/convolution/normalize_input/mean'\nDuring handling of the above exception, another exception occurred:\nValueError                                Traceback (most recent call last)\n in ()\n----> 1 read_graph_proto(as_constants=True)\n in read_graph_proto(proto_dir, batch_number, as_constants, new_filename_queue)\n25                     tf.import_graph_def(graph_def=graph_def)\n26             else:\n---> 27                 tf.import_graph_def(graph_def=graph_def)\n28             print([node for node in self.session.graph_def.node])\n29     else:\nc:\\users\\shivam.agarwal\\pycharmprojects\\audioapi\\venv\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py in new_func(*args, **kwargs)\n452                 'in a future version' if date is None else ('after %s' % date),\n453                 instructions)\n--> 454       return func(*args, **kwargs)\n455     return tf_decorator.make_decorator(func, new_func, 'deprecated',\n456                                        _add_deprecated_arg_notice_to_docstring(\nc:\\users\\shivam.agarwal\\pycharmprojects\\audioapi\\venv\\lib\\site-packages\\tensorflow\\python\\framework\\importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\n420       except errors.InvalidArgumentError as e:\n421         # Convert to ValueError for backwards compatibility.\n--> 422         raise ValueError(str(e))\n423\n424     # Create _DefinedFunctions for any imported functions.\nValueError: Node 'Test_Net/convolution/normalize_input/Test_Net/convolution/normalize_input/mean/ExponentialMovingAverage/read' expects to be colocated with unknown node 'Test_Net/convolution/normalize_input/mean'\n`\nHow can I sort out this ? I have been stuck since months now because of this one issue.", "body": "same problem here, I trained my model and tried to import the frozen graph with batch norm nodes: \r\nfollowing the Complete Traceback : \r\n\r\n`---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\nc:\\users\\shivam.agarwal\\pycharmprojects\\audioapi\\venv\\lib\\site-packages\\tensorflow\\python\\framework\\importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\r\n    417         results = c_api.TF_GraphImportGraphDefWithResults(\r\n--> 418             graph._c_graph, serialized, options)  # pylint: disable=protected-access\r\n    419         results = c_api_util.ScopedTFImportGraphDefResults(results)\r\n\r\nInvalidArgumentError: Node 'Test_Net/convolution/normalize_input/Test_Net/convolution/normalize_input/mean/ExponentialMovingAverage/read' expects to be colocated with unknown node 'Test_Net/convolution/normalize_input/mean'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-6-5efe49866b97> in <module>()\r\n----> 1 read_graph_proto(as_constants=True)\r\n\r\n<ipython-input-5-e1593c13b4b1> in read_graph_proto(proto_dir, batch_number, as_constants, new_filename_queue)\r\n     25                     tf.import_graph_def(graph_def=graph_def)\r\n     26             else:\r\n---> 27                 tf.import_graph_def(graph_def=graph_def)\r\n     28             print([node for node in self.session.graph_def.node])\r\n     29     else:\r\n\r\nc:\\users\\shivam.agarwal\\pycharmprojects\\audioapi\\venv\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py in new_func(*args, **kwargs)\r\n    452                 'in a future version' if date is None else ('after %s' % date),\r\n    453                 instructions)\r\n--> 454       return func(*args, **kwargs)\r\n    455     return tf_decorator.make_decorator(func, new_func, 'deprecated',\r\n    456                                        _add_deprecated_arg_notice_to_docstring(\r\n\r\nc:\\users\\shivam.agarwal\\pycharmprojects\\audioapi\\venv\\lib\\site-packages\\tensorflow\\python\\framework\\importer.py in import_graph_def(graph_def, input_map, return_elements, name, op_dict, producer_op_list)\r\n    420       except errors.InvalidArgumentError as e:\r\n    421         # Convert to ValueError for backwards compatibility.\r\n--> 422         raise ValueError(str(e))\r\n    423 \r\n    424     # Create _DefinedFunctions for any imported functions.\r\n\r\nValueError: Node 'Test_Net/convolution/normalize_input/Test_Net/convolution/normalize_input/mean/ExponentialMovingAverage/read' expects to be colocated with unknown node 'Test_Net/convolution/normalize_input/mean'\r\n`\r\n\r\nHow can I sort out this ? I have been stuck since months now because of this one issue. "}
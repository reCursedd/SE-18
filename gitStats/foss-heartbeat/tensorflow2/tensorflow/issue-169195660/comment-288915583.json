{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/288915583", "html_url": "https://github.com/tensorflow/tensorflow/issues/3628#issuecomment-288915583", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3628", "id": 288915583, "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODkxNTU4Mw==", "user": {"login": "Yisongsong", "id": 19774920, "node_id": "MDQ6VXNlcjE5Nzc0OTIw", "avatar_url": "https://avatars0.githubusercontent.com/u/19774920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yisongsong", "html_url": "https://github.com/Yisongsong", "followers_url": "https://api.github.com/users/Yisongsong/followers", "following_url": "https://api.github.com/users/Yisongsong/following{/other_user}", "gists_url": "https://api.github.com/users/Yisongsong/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yisongsong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yisongsong/subscriptions", "organizations_url": "https://api.github.com/users/Yisongsong/orgs", "repos_url": "https://api.github.com/users/Yisongsong/repos", "events_url": "https://api.github.com/users/Yisongsong/events{/privacy}", "received_events_url": "https://api.github.com/users/Yisongsong/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-24T02:23:51Z", "updated_at": "2017-03-24T02:23:51Z", "author_association": "NONE", "body_html": "<p>I meet the same problem when deeling with BN in resnet, it seems that the function  <code>inference_graph = extract_sub_graph(input_graph_def, output_node_names)</code> in <code>graph_util.convert_variables_to_constants()</code>cuts off the node of  moving_mean and moving_variance, I solve it in this way: save the model in train mode, then load the model in eval or test mode, run and  save again, freeze the last model, you will find the  moving_mean and moving_variance node. BTW, my goal is to get the variables such as mean, variance, and weight in the frozen model, I don't need to load it again.</p>", "body_text": "I meet the same problem when deeling with BN in resnet, it seems that the function  inference_graph = extract_sub_graph(input_graph_def, output_node_names) in graph_util.convert_variables_to_constants()cuts off the node of  moving_mean and moving_variance, I solve it in this way: save the model in train mode, then load the model in eval or test mode, run and  save again, freeze the last model, you will find the  moving_mean and moving_variance node. BTW, my goal is to get the variables such as mean, variance, and weight in the frozen model, I don't need to load it again.", "body": "I meet the same problem when deeling with BN in resnet, it seems that the function  ```inference_graph = extract_sub_graph(input_graph_def, output_node_names)``` in ```graph_util.convert_variables_to_constants()```cuts off the node of  moving_mean and moving_variance, I solve it in this way: save the model in train mode, then load the model in eval or test mode, run and  save again, freeze the last model, you will find the  moving_mean and moving_variance node. BTW, my goal is to get the variables such as mean, variance, and weight in the frozen model, I don't need to load it again."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23635", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23635/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23635/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23635/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23635", "id": 379264822, "node_id": "MDU6SXNzdWUzNzkyNjQ4MjI=", "number": 23635, "title": "TensorFlow Keras Fit Bug Value Error: Dimension -3 must be >= 0", "user": {"login": "gmanrocks99", "id": 44654007, "node_id": "MDQ6VXNlcjQ0NjU0MDA3", "avatar_url": "https://avatars3.githubusercontent.com/u/44654007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gmanrocks99", "html_url": "https://github.com/gmanrocks99", "followers_url": "https://api.github.com/users/gmanrocks99/followers", "following_url": "https://api.github.com/users/gmanrocks99/following{/other_user}", "gists_url": "https://api.github.com/users/gmanrocks99/gists{/gist_id}", "starred_url": "https://api.github.com/users/gmanrocks99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gmanrocks99/subscriptions", "organizations_url": "https://api.github.com/users/gmanrocks99/orgs", "repos_url": "https://api.github.com/users/gmanrocks99/repos", "events_url": "https://api.github.com/users/gmanrocks99/events{/privacy}", "received_events_url": "https://api.github.com/users/gmanrocks99/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-11-09T18:04:07Z", "updated_at": "2018-11-16T17:58:07Z", "closed_at": "2018-11-16T17:58:06Z", "author_association": "NONE", "body_html": "<p><em>Please make sure that this is a bug. As per our <a href=\"https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md\">GitHub Policy</a>, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em></p>\n<p><strong>System information</strong></p>\n<ul>\n<li>Have I written custom code (as opposed to using a stock example script provided in TensorFlow):<br>\nI have written custom code, albeit based off of code from TFLearn.</li>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04):</li>\n<li>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:<br>\nThis issue is untested on mobile devices.</li>\n<li>TensorFlow installed from (source or binary):<br>\nTensorFlow installed from binary.</li>\n<li>TensorFlow version (use command below):<br>\nTensorFlow Version: 1.11</li>\n<li>Python version:<br>\nPython Version: 3.6.6</li>\n<li>Bazel version (if compiling from source):<br>\nNot Compiled from source</li>\n<li>GCC/Compiler version (if compiling from source):<br>\nNot Compiled from source</li>\n<li>CUDA/cuDNN version:<br>\nCUDA/cuDNN version 9.0</li>\n<li>GPU model and memory:<br>\nNVIDIA GeForce MX150, approx total memory 10097 MB</li>\n</ul>\n<p>You can collect some of this information using our environment capture <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\">script</a><br>\nYou can also obtain the TensorFlow version with<br>\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"</p>\n<p><strong>Describe the current behavior</strong><br>\nWhen I run the following program, which is supposed to be able to differentiate between images of Cats and Dogs using a convolution model, the program gets stuck at the fit method. It is returning a Value Error: Dimension -3 must be &gt;= 0. I believe all the information in the fit method is correct...</p>\n<p><strong>Describe the expected behavior</strong><br>\nIt should complete the training of the model. It has not yet been set up to save it.</p>\n<p><strong>Code to reproduce the issue</strong><br>\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.<br>\nFile is attached.</p>\n<p><strong>Other info / logs</strong><br>\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.</p>\n<p>Here is the trace:</p>\n<p>2018-11-09 11:45:48.096411: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2<br>\nTraceback (most recent call last):<br>\nFile \"C:/Users/gman7/Documents/BIF/Tensor Flow/Programs/Java Examples/Cats vs Dogs/CvD.py\", line 128, in <br>\nmodel.fit(X_train, Y_train, epochs=2, steps_per_epoch=500)<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 1509, in fit<br>\nvalidation_split=validation_split)<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 993, in _standardize_user_data<br>\nclass_weight, batch_size)<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 1029, in _standardize_weights<br>\nself._set_inputs(x)<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\checkpointable\\base.py\", line 426, in _method_wrapper<br>\nmethod(self, *args, **kwargs)<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 1222, in _set_inputs<br>\nself.build(input_shape=input_shape)<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\sequential.py\", line 224, in build<br>\nshape = layer.compute_output_shape(shape)<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\layers\\convolutional.py\", line 230, in compute_output_shape<br>\n[self.filters])<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 542, in <strong>init</strong><br>\nself._dims = [as_dimension(d) for d in dims_iter]<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 542, in <br>\nself._dims = [as_dimension(d) for d in dims_iter]<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 482, in as_dimension<br>\nreturn Dimension(value)<br>\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 42, in <strong>init</strong><br>\nraise ValueError(\"Dimension %d must be &gt;= 0\" % self._value)<br>\nValueError: Dimension -3 must be &gt;= 0</p>\n<p>Process finished with exit code 1</p>", "body_text": "Please make sure that this is a bug. As per our GitHub Policy, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nI have written custom code, albeit based off of code from TFLearn.\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nThis issue is untested on mobile devices.\nTensorFlow installed from (source or binary):\nTensorFlow installed from binary.\nTensorFlow version (use command below):\nTensorFlow Version: 1.11\nPython version:\nPython Version: 3.6.6\nBazel version (if compiling from source):\nNot Compiled from source\nGCC/Compiler version (if compiling from source):\nNot Compiled from source\nCUDA/cuDNN version:\nCUDA/cuDNN version 9.0\nGPU model and memory:\nNVIDIA GeForce MX150, approx total memory 10097 MB\n\nYou can collect some of this information using our environment capture script\nYou can also obtain the TensorFlow version with\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\nDescribe the current behavior\nWhen I run the following program, which is supposed to be able to differentiate between images of Cats and Dogs using a convolution model, the program gets stuck at the fit method. It is returning a Value Error: Dimension -3 must be >= 0. I believe all the information in the fit method is correct...\nDescribe the expected behavior\nIt should complete the training of the model. It has not yet been set up to save it.\nCode to reproduce the issue\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\nFile is attached.\nOther info / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\nHere is the trace:\n2018-11-09 11:45:48.096411: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\nTraceback (most recent call last):\nFile \"C:/Users/gman7/Documents/BIF/Tensor Flow/Programs/Java Examples/Cats vs Dogs/CvD.py\", line 128, in \nmodel.fit(X_train, Y_train, epochs=2, steps_per_epoch=500)\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 1509, in fit\nvalidation_split=validation_split)\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 993, in _standardize_user_data\nclass_weight, batch_size)\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 1029, in _standardize_weights\nself._set_inputs(x)\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\checkpointable\\base.py\", line 426, in _method_wrapper\nmethod(self, *args, **kwargs)\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 1222, in _set_inputs\nself.build(input_shape=input_shape)\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\sequential.py\", line 224, in build\nshape = layer.compute_output_shape(shape)\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\layers\\convolutional.py\", line 230, in compute_output_shape\n[self.filters])\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 542, in init\nself._dims = [as_dimension(d) for d in dims_iter]\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 542, in \nself._dims = [as_dimension(d) for d in dims_iter]\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 482, in as_dimension\nreturn Dimension(value)\nFile \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 42, in init\nraise ValueError(\"Dimension %d must be >= 0\" % self._value)\nValueError: Dimension -3 must be >= 0\nProcess finished with exit code 1", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nI have written custom code, albeit based off of code from TFLearn.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nThis issue is untested on mobile devices.\r\n- TensorFlow installed from (source or binary):\r\nTensorFlow installed from binary.\r\n- TensorFlow version (use command below):\r\nTensorFlow Version: 1.11 \r\n- Python version:\r\nPython Version: 3.6.6\r\n- Bazel version (if compiling from source):\r\nNot Compiled from source\r\n- GCC/Compiler version (if compiling from source):\r\nNot Compiled from source\r\n- CUDA/cuDNN version:\r\nCUDA/cuDNN version 9.0\r\n- GPU model and memory:\r\nNVIDIA GeForce MX150, approx total memory 10097 MB\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nWhen I run the following program, which is supposed to be able to differentiate between images of Cats and Dogs using a convolution model, the program gets stuck at the fit method. It is returning a Value Error: Dimension -3 must be >= 0. I believe all the information in the fit method is correct...\r\n\r\n**Describe the expected behavior**\r\nIt should complete the training of the model. It has not yet been set up to save it.\r\n\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nFile is attached.\r\n\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nHere is the trace:\r\n\r\n2018-11-09 11:45:48.096411: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\r\nTraceback (most recent call last):\r\n  File \"C:/Users/gman7/Documents/BIF/Tensor Flow/Programs/Java Examples/Cats vs Dogs/CvD.py\", line 128, in <module>\r\n    model.fit(X_train, Y_train, epochs=2, steps_per_epoch=500)\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 1509, in fit\r\n    validation_split=validation_split)\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 993, in _standardize_user_data\r\n    class_weight, batch_size)\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 1029, in _standardize_weights\r\n    self._set_inputs(x)\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\checkpointable\\base.py\", line 426, in _method_wrapper\r\n    method(self, *args, **kwargs)\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 1222, in _set_inputs\r\n    self.build(input_shape=input_shape)\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\sequential.py\", line 224, in build\r\n    shape = layer.compute_output_shape(shape)\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\keras\\layers\\convolutional.py\", line 230, in compute_output_shape\r\n    [self.filters])\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 542, in __init__\r\n    self._dims = [as_dimension(d) for d in dims_iter]\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 542, in <listcomp>\r\n    self._dims = [as_dimension(d) for d in dims_iter]\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 482, in as_dimension\r\n    return Dimension(value)\r\n  File \"C:\\Users\\gman7\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_shape.py\", line 42, in __init__\r\n    raise ValueError(\"Dimension %d must be >= 0\" % self._value)\r\nValueError: Dimension -3 must be >= 0\r\n\r\nProcess finished with exit code 1\r\n"}
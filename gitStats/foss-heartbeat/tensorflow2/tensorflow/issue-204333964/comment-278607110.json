{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/278607110", "html_url": "https://github.com/tensorflow/tensorflow/issues/7166#issuecomment-278607110", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7166", "id": 278607110, "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODYwNzExMA==", "user": {"login": "t0mk", "id": 1223677, "node_id": "MDQ6VXNlcjEyMjM2Nzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1223677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/t0mk", "html_url": "https://github.com/t0mk", "followers_url": "https://api.github.com/users/t0mk/followers", "following_url": "https://api.github.com/users/t0mk/following{/other_user}", "gists_url": "https://api.github.com/users/t0mk/gists{/gist_id}", "starred_url": "https://api.github.com/users/t0mk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/t0mk/subscriptions", "organizations_url": "https://api.github.com/users/t0mk/orgs", "repos_url": "https://api.github.com/users/t0mk/repos", "events_url": "https://api.github.com/users/t0mk/events{/privacy}", "received_events_url": "https://api.github.com/users/t0mk/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-09T10:43:59Z", "updated_at": "2017-02-09T10:45:33Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3530212\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sjperkins\">@sjperkins</a> Detecting if nviidia gpu is available will not work when installing in Dockerfile to a Docker image, and in general if you install it somewhere where you don't intend to run it.</p>\n<p>I was checking if it could be done with setup.py extras:<br>\n<a href=\"https://setuptools.readthedocs.io/en/latest/setuptools.html#declaring-extras-optional-features-with-their-own-dependencies\" rel=\"nofollow\">https://setuptools.readthedocs.io/en/latest/setuptools.html#declaring-extras-optional-features-with-their-own-dependencies</a></p>\n<p>but I don't think it's possible.</p>\n<p>IMO most straightforward would be to drop tensorflow from the install_requires list, and just try to import tf it in setup.py, catch the ImportError, and raise some pip exception saying that you need either tensorflow or tensorflow-gpu installed.</p>", "body_text": "@sjperkins Detecting if nviidia gpu is available will not work when installing in Dockerfile to a Docker image, and in general if you install it somewhere where you don't intend to run it.\nI was checking if it could be done with setup.py extras:\nhttps://setuptools.readthedocs.io/en/latest/setuptools.html#declaring-extras-optional-features-with-their-own-dependencies\nbut I don't think it's possible.\nIMO most straightforward would be to drop tensorflow from the install_requires list, and just try to import tf it in setup.py, catch the ImportError, and raise some pip exception saying that you need either tensorflow or tensorflow-gpu installed.", "body": "@sjperkins Detecting if nviidia gpu is available will not work when installing in Dockerfile to a Docker image, and in general if you install it somewhere where you don't intend to run it.\r\n\r\nI was checking if it could be done with setup.py extras:\r\nhttps://setuptools.readthedocs.io/en/latest/setuptools.html#declaring-extras-optional-features-with-their-own-dependencies\r\n\r\nbut I don't think it's possible.\r\n\r\nIMO most straightforward would be to drop tensorflow from the install_requires list, and just try to import tf it in setup.py, catch the ImportError, and raise some pip exception saying that you need either tensorflow or tensorflow-gpu installed."}
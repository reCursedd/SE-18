{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/431699599", "html_url": "https://github.com/tensorflow/tensorflow/issues/17043#issuecomment-431699599", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17043", "id": 431699599, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTY5OTU5OQ==", "user": {"login": "bjascob", "id": 22728060, "node_id": "MDQ6VXNlcjIyNzI4MDYw", "avatar_url": "https://avatars1.githubusercontent.com/u/22728060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjascob", "html_url": "https://github.com/bjascob", "followers_url": "https://api.github.com/users/bjascob/followers", "following_url": "https://api.github.com/users/bjascob/following{/other_user}", "gists_url": "https://api.github.com/users/bjascob/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjascob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjascob/subscriptions", "organizations_url": "https://api.github.com/users/bjascob/orgs", "repos_url": "https://api.github.com/users/bjascob/repos", "events_url": "https://api.github.com/users/bjascob/events{/privacy}", "received_events_url": "https://api.github.com/users/bjascob/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-21T20:06:09Z", "updated_at": "2018-10-21T20:06:09Z", "author_association": "NONE", "body_html": "<p>I'll add to this old post and say I'm seeing intermittent segfaults and system lockups simply importing Tensorflow compiled using march=native on a SkylakeX (i7-7940).  Recompiling with march=\"haswell\" eliminates the issue.  While I can't say for sure this is an AVX-512 issue, that seem like a top candidate given the limited difference in flags.</p>\n<p>Because of the intermittent nature, this was difficult to diagnose and it wasn't obvious that recompiling with different flags would fix the issue.  If AVX-512 isn't working/supported it would be helpful if a warning appeared in the docs or configure script to alert people of the potential danger.</p>\n<p><strong>Have I written custom code:</strong> No<br>\n<strong>OS Platform and Distribution:</strong> Ubuntu 18.04.1<br>\n<strong>TensorFlow:</strong> Build from source<br>\n<strong>TensorFlow version:</strong> 1.12rc1<br>\n<strong>Python version:</strong> 3.6.6<br>\n<strong>Bazel version</strong>: 0.18.0<br>\n<strong>GCC/Compiler version:</strong> 7.3.0<br>\n<strong>CUDA/cuDNN version:</strong> 10.0<br>\n<strong>GPU model and memory:</strong> TitanX(maxwell) 12GB</p>", "body_text": "I'll add to this old post and say I'm seeing intermittent segfaults and system lockups simply importing Tensorflow compiled using march=native on a SkylakeX (i7-7940).  Recompiling with march=\"haswell\" eliminates the issue.  While I can't say for sure this is an AVX-512 issue, that seem like a top candidate given the limited difference in flags.\nBecause of the intermittent nature, this was difficult to diagnose and it wasn't obvious that recompiling with different flags would fix the issue.  If AVX-512 isn't working/supported it would be helpful if a warning appeared in the docs or configure script to alert people of the potential danger.\nHave I written custom code: No\nOS Platform and Distribution: Ubuntu 18.04.1\nTensorFlow: Build from source\nTensorFlow version: 1.12rc1\nPython version: 3.6.6\nBazel version: 0.18.0\nGCC/Compiler version: 7.3.0\nCUDA/cuDNN version: 10.0\nGPU model and memory: TitanX(maxwell) 12GB", "body": "I'll add to this old post and say I'm seeing intermittent segfaults and system lockups simply importing Tensorflow compiled using march=native on a SkylakeX (i7-7940).  Recompiling with march=\"haswell\" eliminates the issue.  While I can't say for sure this is an AVX-512 issue, that seem like a top candidate given the limited difference in flags.\r\n\r\nBecause of the intermittent nature, this was difficult to diagnose and it wasn't obvious that recompiling with different flags would fix the issue.  If AVX-512 isn't working/supported it would be helpful if a warning appeared in the docs or configure script to alert people of the potential danger.\r\n\r\n**Have I written custom code:** No\r\n**OS Platform and Distribution:** Ubuntu 18.04.1\r\n**TensorFlow:** Build from source\r\n**TensorFlow version:** 1.12rc1\r\n**Python version:** 3.6.6\r\n**Bazel version**: 0.18.0\r\n**GCC/Compiler version:** 7.3.0\r\n **CUDA/cuDNN version:** 10.0\r\n**GPU model and memory:** TitanX(maxwell) 12GB"}
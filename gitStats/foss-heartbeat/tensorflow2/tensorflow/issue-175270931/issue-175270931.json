{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4226", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4226/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4226/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4226/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4226", "id": 175270931, "node_id": "MDU6SXNzdWUxNzUyNzA5MzE=", "number": 4226, "title": "sparse_placeholder doesn't accept shapes with None parts", "user": {"login": "kuza55", "id": 387986, "node_id": "MDQ6VXNlcjM4Nzk4Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/387986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kuza55", "html_url": "https://github.com/kuza55", "followers_url": "https://api.github.com/users/kuza55/followers", "following_url": "https://api.github.com/users/kuza55/following{/other_user}", "gists_url": "https://api.github.com/users/kuza55/gists{/gist_id}", "starred_url": "https://api.github.com/users/kuza55/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kuza55/subscriptions", "organizations_url": "https://api.github.com/users/kuza55/orgs", "repos_url": "https://api.github.com/users/kuza55/repos", "events_url": "https://api.github.com/users/kuza55/events{/privacy}", "received_events_url": "https://api.github.com/users/kuza55/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "ilblackdragon", "id": 175486, "node_id": "MDQ6VXNlcjE3NTQ4Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/175486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilblackdragon", "html_url": "https://github.com/ilblackdragon", "followers_url": "https://api.github.com/users/ilblackdragon/followers", "following_url": "https://api.github.com/users/ilblackdragon/following{/other_user}", "gists_url": "https://api.github.com/users/ilblackdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilblackdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilblackdragon/subscriptions", "organizations_url": "https://api.github.com/users/ilblackdragon/orgs", "repos_url": "https://api.github.com/users/ilblackdragon/repos", "events_url": "https://api.github.com/users/ilblackdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/ilblackdragon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ilblackdragon", "id": 175486, "node_id": "MDQ6VXNlcjE3NTQ4Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/175486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilblackdragon", "html_url": "https://github.com/ilblackdragon", "followers_url": "https://api.github.com/users/ilblackdragon/followers", "following_url": "https://api.github.com/users/ilblackdragon/following{/other_user}", "gists_url": "https://api.github.com/users/ilblackdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilblackdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilblackdragon/subscriptions", "organizations_url": "https://api.github.com/users/ilblackdragon/orgs", "repos_url": "https://api.github.com/users/ilblackdragon/repos", "events_url": "https://api.github.com/users/ilblackdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/ilblackdragon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-09-06T15:03:07Z", "updated_at": "2016-11-02T02:46:43Z", "closed_at": "2016-11-02T02:46:43Z", "author_association": "NONE", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>None</p>\n<ol>\n<li>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.<br>\n0.10.0rc0</li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<pre><code>tf.sparse_placeholder(tf.int32, shape=(None, 2, 3))\n</code></pre>\n<h3>What other attempted solutions have you tried?</h3>\n<p>For the moment I'm passing in a value of the wrong shape but correct rank, which seems to work fine combined with passing in a correct shape when feeding it, but this is inconsistent with the normal placeholder.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).</p>\n<pre><code>TypeErrorTraceback (most recent call last)\n&lt;ipython-input-8-c6a6ad1fab2e&gt; in &lt;module&gt;()\n----&gt; 1 tf.sparse_placeholder(tf.int32, shape=(None, 2, 3))\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.pyc in sparse_placeholder(dtype, shape, name)\n   1318   else:\n   1319     shape = ops.convert_to_tensor(\n-&gt; 1320         shape, name=(name + \"/shape\") if name is not None else None)\n   1321   return ops.SparseTensor(\n   1322       values=placeholder(\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in convert_to_tensor(value, dtype, name, as_ref)\n    627     for base_type, conversion_func in funcs_at_priority:\n    628       if isinstance(value, base_type):\n--&gt; 629         ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n    630         if ret is NotImplemented:\n    631           continue\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.pyc in _constant_tensor_conversion_function(v, dtype, name, as_ref)\n    178                                          as_ref=False):\n    179   _ = as_ref\n--&gt; 180   return constant(v, dtype=dtype, name=name)\n    181 \n    182 \n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.pyc in constant(value, dtype, shape, name)\n    161   tensor_value = attr_value_pb2.AttrValue()\n    162   tensor_value.tensor.CopyFrom(\n--&gt; 163       tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape))\n    164   dtype_value = attr_value_pb2.AttrValue(type=tensor_value.tensor.dtype)\n    165   const_tensor = g.create_op(\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.pyc in make_tensor_proto(values, dtype, shape)\n    420   if numpy_dtype == dtypes.string and not isinstance(values, np.ndarray):\n    421     proto_values = _FlattenToStrings(values)\n--&gt; 422     tensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])\n    423     return tensor_proto\n    424 \n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/util/compat.pyc in as_bytes(bytes_or_text)\n     43   else:\n     44     raise TypeError('Expected binary or unicode string, got %r' %\n---&gt; 45                     (bytes_or_text,))\n     46 \n     47 \n\nTypeError: Expected binary or unicode string, got (None, 2, 3)\n</code></pre>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nNone\n\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\n0.10.0rc0\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\ntf.sparse_placeholder(tf.int32, shape=(None, 2, 3))\n\nWhat other attempted solutions have you tried?\nFor the moment I'm passing in a value of the wrong shape but correct rank, which seems to work fine combined with passing in a correct shape when feeding it, but this is inconsistent with the normal placeholder.\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).\nTypeErrorTraceback (most recent call last)\n<ipython-input-8-c6a6ad1fab2e> in <module>()\n----> 1 tf.sparse_placeholder(tf.int32, shape=(None, 2, 3))\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.pyc in sparse_placeholder(dtype, shape, name)\n   1318   else:\n   1319     shape = ops.convert_to_tensor(\n-> 1320         shape, name=(name + \"/shape\") if name is not None else None)\n   1321   return ops.SparseTensor(\n   1322       values=placeholder(\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in convert_to_tensor(value, dtype, name, as_ref)\n    627     for base_type, conversion_func in funcs_at_priority:\n    628       if isinstance(value, base_type):\n--> 629         ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n    630         if ret is NotImplemented:\n    631           continue\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.pyc in _constant_tensor_conversion_function(v, dtype, name, as_ref)\n    178                                          as_ref=False):\n    179   _ = as_ref\n--> 180   return constant(v, dtype=dtype, name=name)\n    181 \n    182 \n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.pyc in constant(value, dtype, shape, name)\n    161   tensor_value = attr_value_pb2.AttrValue()\n    162   tensor_value.tensor.CopyFrom(\n--> 163       tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape))\n    164   dtype_value = attr_value_pb2.AttrValue(type=tensor_value.tensor.dtype)\n    165   const_tensor = g.create_op(\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.pyc in make_tensor_proto(values, dtype, shape)\n    420   if numpy_dtype == dtypes.string and not isinstance(values, np.ndarray):\n    421     proto_values = _FlattenToStrings(values)\n--> 422     tensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])\n    423     return tensor_proto\n    424 \n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/util/compat.pyc in as_bytes(bytes_or_text)\n     43   else:\n     44     raise TypeError('Expected binary or unicode string, got %r' %\n---> 45                     (bytes_or_text,))\n     46 \n     47 \n\nTypeError: Expected binary or unicode string, got (None, 2, 3)", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n\nNone\n1. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n   0.10.0rc0\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n\n```\ntf.sparse_placeholder(tf.int32, shape=(None, 2, 3))\n```\n### What other attempted solutions have you tried?\n\nFor the moment I'm passing in a value of the wrong shape but correct rank, which seems to work fine combined with passing in a correct shape when feeding it, but this is inconsistent with the normal placeholder.\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment or provide link).\n\n```\nTypeErrorTraceback (most recent call last)\n<ipython-input-8-c6a6ad1fab2e> in <module>()\n----> 1 tf.sparse_placeholder(tf.int32, shape=(None, 2, 3))\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.pyc in sparse_placeholder(dtype, shape, name)\n   1318   else:\n   1319     shape = ops.convert_to_tensor(\n-> 1320         shape, name=(name + \"/shape\") if name is not None else None)\n   1321   return ops.SparseTensor(\n   1322       values=placeholder(\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in convert_to_tensor(value, dtype, name, as_ref)\n    627     for base_type, conversion_func in funcs_at_priority:\n    628       if isinstance(value, base_type):\n--> 629         ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n    630         if ret is NotImplemented:\n    631           continue\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.pyc in _constant_tensor_conversion_function(v, dtype, name, as_ref)\n    178                                          as_ref=False):\n    179   _ = as_ref\n--> 180   return constant(v, dtype=dtype, name=name)\n    181 \n    182 \n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.pyc in constant(value, dtype, shape, name)\n    161   tensor_value = attr_value_pb2.AttrValue()\n    162   tensor_value.tensor.CopyFrom(\n--> 163       tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape))\n    164   dtype_value = attr_value_pb2.AttrValue(type=tensor_value.tensor.dtype)\n    165   const_tensor = g.create_op(\n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.pyc in make_tensor_proto(values, dtype, shape)\n    420   if numpy_dtype == dtypes.string and not isinstance(values, np.ndarray):\n    421     proto_values = _FlattenToStrings(values)\n--> 422     tensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])\n    423     return tensor_proto\n    424 \n\n/home/ubuntu/virtualenv/local/lib/python2.7/site-packages/tensorflow/python/util/compat.pyc in as_bytes(bytes_or_text)\n     43   else:\n     44     raise TypeError('Expected binary or unicode string, got %r' %\n---> 45                     (bytes_or_text,))\n     46 \n     47 \n\nTypeError: Expected binary or unicode string, got (None, 2, 3)\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8136", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8136/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8136/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8136/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8136", "id": 212210885, "node_id": "MDU6SXNzdWUyMTIyMTA4ODU=", "number": 8136, "title": "Unified mechanism for setting process-level settings ", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}, {"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2017-03-06T18:36:21Z", "updated_at": "2018-06-04T07:14:05Z", "closed_at": "2017-12-22T17:51:51Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Some settings in TensorFlow apply to all sessions in the process. Examples: size of Eigen thread-pool, allocator growth strategy, logging verbosity</p>\n<p>There are currently two places where such process properties are set:</p>\n<ol>\n<li>Environment variables</li>\n<li>tf.ConfigProto passed to the first tf.Session() or tf.Server() call</li>\n</ol>\n<p>the 1. lacks discoverability. For instance required SM count to make GPU visible to TensorFlow is set through <code>TF_MIN_GPU_MULTIPROCESSOR_COUNT</code> which is not documented outside of <code>gpu_device.cc</code>. Additionally, it has unclear semantics. When does changing <code>TF_CPP_MIN_VLOG_LEVEL</code> environment variable have an effect on logging? Empirically, changing it after <code>import tf</code> has an effect, changing it after first <code>tf.Session</code> call has no effect.</p>\n<p>the 2. leads to confusion when you specify conflicting settings. For instance, in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"177757846\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4455\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4455/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4455\">#4455</a> the user was confused that  <code>config=tf.ConfigProto(intra_op_parallelism_threads=1</code> had no effect. The reason is that <code>intra_op_parallelism_threads</code> specifies the size of process global ThreadPool, and this setting was already fixed when user called <code>tf.Server</code> earlier. (we also ran into this issue on our deployment)</p>\n<p>cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a><br>\nassigning to <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5453737\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tatatodd\">@tatatodd</a> for triage since he asked me to file this issue</p>", "body_text": "Some settings in TensorFlow apply to all sessions in the process. Examples: size of Eigen thread-pool, allocator growth strategy, logging verbosity\nThere are currently two places where such process properties are set:\n\nEnvironment variables\ntf.ConfigProto passed to the first tf.Session() or tf.Server() call\n\nthe 1. lacks discoverability. For instance required SM count to make GPU visible to TensorFlow is set through TF_MIN_GPU_MULTIPROCESSOR_COUNT which is not documented outside of gpu_device.cc. Additionally, it has unclear semantics. When does changing TF_CPP_MIN_VLOG_LEVEL environment variable have an effect on logging? Empirically, changing it after import tf has an effect, changing it after first tf.Session call has no effect.\nthe 2. leads to confusion when you specify conflicting settings. For instance, in #4455 the user was confused that  config=tf.ConfigProto(intra_op_parallelism_threads=1 had no effect. The reason is that intra_op_parallelism_threads specifies the size of process global ThreadPool, and this setting was already fixed when user called tf.Server earlier. (we also ran into this issue on our deployment)\ncc @mrry\nassigning to @tatatodd for triage since he asked me to file this issue", "body": "Some settings in TensorFlow apply to all sessions in the process. Examples: size of Eigen thread-pool, allocator growth strategy, logging verbosity\r\n\r\nThere are currently two places where such process properties are set:\r\n1. Environment variables\r\n2. tf.ConfigProto passed to the first tf.Session() or tf.Server() call\r\n\r\nthe 1. lacks discoverability. For instance required SM count to make GPU visible to TensorFlow is set through `TF_MIN_GPU_MULTIPROCESSOR_COUNT` which is not documented outside of `gpu_device.cc`. Additionally, it has unclear semantics. When does changing `TF_CPP_MIN_VLOG_LEVEL` environment variable have an effect on logging? Empirically, changing it after `import tf` has an effect, changing it after first `tf.Session` call has no effect.\r\n\r\nthe 2. leads to confusion when you specify conflicting settings. For instance, in https://github.com/tensorflow/tensorflow/issues/4455 the user was confused that  `config=tf.ConfigProto(intra_op_parallelism_threads=1` had no effect. The reason is that `intra_op_parallelism_threads` specifies the size of process global ThreadPool, and this setting was already fixed when user called `tf.Server` earlier. (we also ran into this issue on our deployment)\r\n\r\ncc @mrry \r\nassigning to @tatatodd for triage since he asked me to file this issue"}
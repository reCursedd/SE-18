{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2973", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2973/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2973/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2973/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2973", "id": 161436874, "node_id": "MDU6SXNzdWUxNjE0MzY4NzQ=", "number": 2973, "title": "restore() model with absolute and relative path", "user": {"login": "dsindex", "id": 8259057, "node_id": "MDQ6VXNlcjgyNTkwNTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/8259057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsindex", "html_url": "https://github.com/dsindex", "followers_url": "https://api.github.com/users/dsindex/followers", "following_url": "https://api.github.com/users/dsindex/following{/other_user}", "gists_url": "https://api.github.com/users/dsindex/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsindex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsindex/subscriptions", "organizations_url": "https://api.github.com/users/dsindex/orgs", "repos_url": "https://api.github.com/users/dsindex/repos", "events_url": "https://api.github.com/users/dsindex/events{/privacy}", "received_events_url": "https://api.github.com/users/dsindex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2016-06-21T13:29:05Z", "updated_at": "2017-06-16T18:02:11Z", "closed_at": "2017-06-16T18:02:11Z", "author_association": "NONE", "body_html": "<h3>Comment</h3>\n<p>restore succeeded with relative path(script directory), but failed with absolute path.</p>\n<h3>Environment info</h3>\n<p>Operating System:</p>\n<p>Ubunto 14.04.1</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<pre><code>22:16 $ ls -al /usr/local/cuda/lib64/libcud*\n-rw-r--r-- 1 root root   322936  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart.so -&gt; libcudart.so.7.5\nlrwxrwxrwx 1 root root       19  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart.so.7.5 -&gt; libcudart.so.7.5.18\n-rwxr-xr-x 1 root root   383336  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r-- 1 root root   720192  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 61453024  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 61453024  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn.so.4\n-rwxr-xr-x 1 root root 61453024  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn.so.4.0.7\n-rw-r--r-- 1 root root 62025862  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn_static.a\n</code></pre>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>Which pip package you installed.<br>\ntensorflow-0.8.0</li>\n<li>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.</li>\n</ol>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n0.8.0\n</code></pre>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>train</li>\n</ol>\n<pre><code>https://github.com/tensorflow/tensorflow/blob/de1334da2c6e074c427d283898450de6e50a605d/tensorflow/models/embedding/word2vec_optimized.py\n\n$ python word2vec_optimized.py --train_data=text8 --eval_data=questions-words.txt --save_path=tmp\n</code></pre>\n<ol>\n<li>test</li>\n</ol>\n<pre><code>https://github.com/dsindex/segm-lstm/blob/master/test_word2vec.py\n\n$ python test_word2vec.py --model_path=tmp\n...\ncheckpoint_dir =  tmp\ncheckpoint_path =  tmp/model.ckpt-2264698\nmodel restored from tmp/model.ckpt-2264698\nanalogy = moscow\n...\n\n$ python test_word2vec.py --model_path=/path/to/segm-lstm/tensorflow/tensorflow/models/embedding/tmp\n...\ncheckpoint_dir =  /path/to/segm-lstm/tensorflow/tensorflow/models/embedding/tmp\ncheckpoint_path =  model.ckpt-2264698\nTraceback (most recent call last):\n  File \"test_word2vec.py\", line 224, in &lt;module&gt;\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"test_word2vec.py\", line 204, in main\n    model.saver.restore(session, ckpt.model_checkpoint_path)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1088, in restore\n    raise ValueError(\"Restore called with invalid save path %s\" % save_path)\nValueError: Restore called with invalid save path model.ckpt-2264698\n</code></pre>", "body_text": "Comment\nrestore succeeded with relative path(script directory), but failed with absolute path.\nEnvironment info\nOperating System:\nUbunto 14.04.1\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n22:16 $ ls -al /usr/local/cuda/lib64/libcud*\n-rw-r--r-- 1 root root   322936  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root   383336  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r-- 1 root root   720192  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 61453024  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 61453024  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn.so.4\n-rwxr-xr-x 1 root root 61453024  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn.so.4.0.7\n-rw-r--r-- 1 root root 62025862  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn_static.a\n\nIf installed from binary pip package, provide:\n\nWhich pip package you installed.\ntensorflow-0.8.0\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n0.8.0\n\nSteps to reproduce\n\ntrain\n\nhttps://github.com/tensorflow/tensorflow/blob/de1334da2c6e074c427d283898450de6e50a605d/tensorflow/models/embedding/word2vec_optimized.py\n\n$ python word2vec_optimized.py --train_data=text8 --eval_data=questions-words.txt --save_path=tmp\n\n\ntest\n\nhttps://github.com/dsindex/segm-lstm/blob/master/test_word2vec.py\n\n$ python test_word2vec.py --model_path=tmp\n...\ncheckpoint_dir =  tmp\ncheckpoint_path =  tmp/model.ckpt-2264698\nmodel restored from tmp/model.ckpt-2264698\nanalogy = moscow\n...\n\n$ python test_word2vec.py --model_path=/path/to/segm-lstm/tensorflow/tensorflow/models/embedding/tmp\n...\ncheckpoint_dir =  /path/to/segm-lstm/tensorflow/tensorflow/models/embedding/tmp\ncheckpoint_path =  model.ckpt-2264698\nTraceback (most recent call last):\n  File \"test_word2vec.py\", line 224, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"test_word2vec.py\", line 204, in main\n    model.saver.restore(session, ckpt.model_checkpoint_path)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1088, in restore\n    raise ValueError(\"Restore called with invalid save path %s\" % save_path)\nValueError: Restore called with invalid save path model.ckpt-2264698", "body": "### Comment\n\nrestore succeeded with relative path(script directory), but failed with absolute path.\n### Environment info\n\nOperating System: \n\nUbunto 14.04.1\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n```\n22:16 $ ls -al /usr/local/cuda/lib64/libcud*\n-rw-r--r-- 1 root root   322936  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root   383336  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r-- 1 root root   720192  8\uc6d4 16  2015 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 61453024  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 61453024  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn.so.4\n-rwxr-xr-x 1 root root 61453024  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn.so.4.0.7\n-rw-r--r-- 1 root root 62025862  5\uc6d4 26 09:37 /usr/local/cuda/lib64/libcudnn_static.a\n```\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed.\n   tensorflow-0.8.0    \n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n\n```\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n0.8.0\n```\n### Steps to reproduce\n1. train\n\n```\nhttps://github.com/tensorflow/tensorflow/blob/de1334da2c6e074c427d283898450de6e50a605d/tensorflow/models/embedding/word2vec_optimized.py\n\n$ python word2vec_optimized.py --train_data=text8 --eval_data=questions-words.txt --save_path=tmp\n```\n1. test\n\n```\nhttps://github.com/dsindex/segm-lstm/blob/master/test_word2vec.py\n\n$ python test_word2vec.py --model_path=tmp\n...\ncheckpoint_dir =  tmp\ncheckpoint_path =  tmp/model.ckpt-2264698\nmodel restored from tmp/model.ckpt-2264698\nanalogy = moscow\n...\n\n$ python test_word2vec.py --model_path=/path/to/segm-lstm/tensorflow/tensorflow/models/embedding/tmp\n...\ncheckpoint_dir =  /path/to/segm-lstm/tensorflow/tensorflow/models/embedding/tmp\ncheckpoint_path =  model.ckpt-2264698\nTraceback (most recent call last):\n  File \"test_word2vec.py\", line 224, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"test_word2vec.py\", line 204, in main\n    model.saver.restore(session, ckpt.model_checkpoint_path)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1088, in restore\n    raise ValueError(\"Restore called with invalid save path %s\" % save_path)\nValueError: Restore called with invalid save path model.ckpt-2264698\n```\n"}
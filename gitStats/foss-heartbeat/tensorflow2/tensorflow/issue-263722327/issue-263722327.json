{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13568", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13568/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13568/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13568/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13568", "id": 263722327, "node_id": "MDU6SXNzdWUyNjM3MjIzMjc=", "number": 13568, "title": "batch_flatten gives unpredictable results when batch_size is 1", "user": {"login": "Joshuaalbert", "id": 14807032, "node_id": "MDQ6VXNlcjE0ODA3MDMy", "avatar_url": "https://avatars2.githubusercontent.com/u/14807032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Joshuaalbert", "html_url": "https://github.com/Joshuaalbert", "followers_url": "https://api.github.com/users/Joshuaalbert/followers", "following_url": "https://api.github.com/users/Joshuaalbert/following{/other_user}", "gists_url": "https://api.github.com/users/Joshuaalbert/gists{/gist_id}", "starred_url": "https://api.github.com/users/Joshuaalbert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Joshuaalbert/subscriptions", "organizations_url": "https://api.github.com/users/Joshuaalbert/orgs", "repos_url": "https://api.github.com/users/Joshuaalbert/repos", "events_url": "https://api.github.com/users/Joshuaalbert/events{/privacy}", "received_events_url": "https://api.github.com/users/Joshuaalbert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-10-08T14:35:42Z", "updated_at": "2018-09-23T23:13:00Z", "closed_at": "2018-09-23T23:13:00Z", "author_association": "NONE", "body_html": "<h2>Problem</h2>\n<p>When I attempt to use <code>tf.contrib.keras.backend.batch_flatten</code> or more readily <code>keras.backend.batch_flatten</code> on a Tensor of shape (1, a, b) it produces a Tensor with shape (None, None).</p>\n<h2>MCVE</h2>\n<p>Note, I'll use keras tensorflow backend because that is how I noticed it.</p>\n<pre><code>t = K.zeros((1,2,2))\nprint(K.int_shape(K.reshape(t,(-1,2*2))))\nprint(K.int_shape(K.batch_flatten(t)))\n</code></pre>\n<p>prints out <code>(1,4)</code> and <code>(None, None)</code>.<br>\nIf you replace the first dimension to 2 or more it works as expected.</p>\n<h2>System</h2>\n<p>tensorflow 1.2.0<br>\nkeras 2.0.8 python 3.6 installed from git repo</p>", "body_text": "Problem\nWhen I attempt to use tf.contrib.keras.backend.batch_flatten or more readily keras.backend.batch_flatten on a Tensor of shape (1, a, b) it produces a Tensor with shape (None, None).\nMCVE\nNote, I'll use keras tensorflow backend because that is how I noticed it.\nt = K.zeros((1,2,2))\nprint(K.int_shape(K.reshape(t,(-1,2*2))))\nprint(K.int_shape(K.batch_flatten(t)))\n\nprints out (1,4) and (None, None).\nIf you replace the first dimension to 2 or more it works as expected.\nSystem\ntensorflow 1.2.0\nkeras 2.0.8 python 3.6 installed from git repo", "body": "## Problem\r\n\r\nWhen I attempt to use `tf.contrib.keras.backend.batch_flatten` or more readily `keras.backend.batch_flatten` on a Tensor of shape (1, a, b) it produces a Tensor with shape (None, None).\r\n\r\n## MCVE\r\n\r\nNote, I'll use keras tensorflow backend because that is how I noticed it. \r\n\r\n```\r\nt = K.zeros((1,2,2))\r\nprint(K.int_shape(K.reshape(t,(-1,2*2))))\r\nprint(K.int_shape(K.batch_flatten(t)))\r\n```\r\nprints out `(1,4)` and `(None, None)`.\r\nIf you replace the first dimension to 2 or more it works as expected.\r\n\r\n## System\r\n\r\ntensorflow 1.2.0 \r\nkeras 2.0.8 python 3.6 installed from git repo\r\n\r\n\r\n\r\n\r\n"}
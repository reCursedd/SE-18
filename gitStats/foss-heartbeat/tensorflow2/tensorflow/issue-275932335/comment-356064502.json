{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/356064502", "html_url": "https://github.com/tensorflow/tensorflow/issues/14777#issuecomment-356064502", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14777", "id": 356064502, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjA2NDUwMg==", "user": {"login": "jeffxtang", "id": 535090, "node_id": "MDQ6VXNlcjUzNTA5MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/535090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffxtang", "html_url": "https://github.com/jeffxtang", "followers_url": "https://api.github.com/users/jeffxtang/followers", "following_url": "https://api.github.com/users/jeffxtang/following{/other_user}", "gists_url": "https://api.github.com/users/jeffxtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffxtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffxtang/subscriptions", "organizations_url": "https://api.github.com/users/jeffxtang/orgs", "repos_url": "https://api.github.com/users/jeffxtang/repos", "events_url": "https://api.github.com/users/jeffxtang/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffxtang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-08T19:09:55Z", "updated_at": "2018-01-08T19:09:55Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=836403\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/offbye\">@offbye</a> is the complete command you used with rounded_weights the following?</p>\n<pre><code>bazel-bin/tensorflow/tools/graph_transforms/transform_graph \n--in_graph=/data5/zxt/coco_log/export/frozen_inference_graph.pb  \n--out_graph=/home/zxt/git/ssd_optimized.pb --inputs='image_tensor'\n --outputs='detection_boxes,detection_scores,num_detections,detection_classes' --transforms='\n  add_default_attributes\n  strip_unused_nodes(type=float, shape=\"-1,-1,-1,3\")\n  remove_nodes(op=Identity, op=CheckNumerics)\n  fold_batch_norms\n  fold_old_batch_norms\n  round_weights\n  strip_unused_nodes\n  sort_by_execution_order'\n</code></pre>\n<p>I used  the transforms values above on ssd_mobilenet_v1_coco_2017_11_17's frozen_inference_graph.pb (size 29112121) but the transformed graph's size is still about 25MB.</p>\n<p>Thanks!</p>", "body_text": "@offbye is the complete command you used with rounded_weights the following?\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \n--in_graph=/data5/zxt/coco_log/export/frozen_inference_graph.pb  \n--out_graph=/home/zxt/git/ssd_optimized.pb --inputs='image_tensor'\n --outputs='detection_boxes,detection_scores,num_detections,detection_classes' --transforms='\n  add_default_attributes\n  strip_unused_nodes(type=float, shape=\"-1,-1,-1,3\")\n  remove_nodes(op=Identity, op=CheckNumerics)\n  fold_batch_norms\n  fold_old_batch_norms\n  round_weights\n  strip_unused_nodes\n  sort_by_execution_order'\n\nI used  the transforms values above on ssd_mobilenet_v1_coco_2017_11_17's frozen_inference_graph.pb (size 29112121) but the transformed graph's size is still about 25MB.\nThanks!", "body": "@offbye is the complete command you used with rounded_weights the following?\r\n```\r\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \r\n--in_graph=/data5/zxt/coco_log/export/frozen_inference_graph.pb  \r\n--out_graph=/home/zxt/git/ssd_optimized.pb --inputs='image_tensor'\r\n --outputs='detection_boxes,detection_scores,num_detections,detection_classes' --transforms='\r\n  add_default_attributes\r\n  strip_unused_nodes(type=float, shape=\"-1,-1,-1,3\")\r\n  remove_nodes(op=Identity, op=CheckNumerics)\r\n  fold_batch_norms\r\n  fold_old_batch_norms\r\n  round_weights\r\n  strip_unused_nodes\r\n  sort_by_execution_order'\r\n```\r\nI used  the transforms values above on ssd_mobilenet_v1_coco_2017_11_17's frozen_inference_graph.pb (size 29112121) but the transformed graph's size is still about 25MB.\r\n\r\nThanks!"}
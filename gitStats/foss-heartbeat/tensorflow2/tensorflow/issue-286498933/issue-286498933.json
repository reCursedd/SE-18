{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15915", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15915/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15915/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15915/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15915", "id": 286498933, "node_id": "MDU6SXNzdWUyODY0OTg5MzM=", "number": 15915, "title": "Failed to synchronise stop event.", "user": {"login": "ramanmohan", "id": 35173376, "node_id": "MDQ6VXNlcjM1MTczMzc2", "avatar_url": "https://avatars3.githubusercontent.com/u/35173376?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramanmohan", "html_url": "https://github.com/ramanmohan", "followers_url": "https://api.github.com/users/ramanmohan/followers", "following_url": "https://api.github.com/users/ramanmohan/following{/other_user}", "gists_url": "https://api.github.com/users/ramanmohan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramanmohan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramanmohan/subscriptions", "organizations_url": "https://api.github.com/users/ramanmohan/orgs", "repos_url": "https://api.github.com/users/ramanmohan/repos", "events_url": "https://api.github.com/users/ramanmohan/events{/privacy}", "received_events_url": "https://api.github.com/users/ramanmohan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2018-01-06T16:51:27Z", "updated_at": "2018-04-18T22:29:35Z", "closed_at": "2018-04-18T22:28:44Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4</li>\n<li><strong>Python version</strong>: 3.6.3</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.9.0</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:  5.4.0</li>\n<li><strong>CUDA/cuDNN version</strong>: 9.1/7.0.5</li>\n<li><strong>GPU model and memory</strong>: GT 750M 2GB</li>\n<li><strong>Exact command to reproduce</strong>: Run the custom program.</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Trying to train a simple 5 layer model with 3.7million parameters that are trainable which would occupy around 1.5GB VRAM, the training fails instantly at the very first epoch. People who had similar error claimed that it was fixed in cuDNN 7.0.5 from this thread <a href=\"https://github.com/tensorflow/tensorflow/issues/14363\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/14363/hovercard\">#14363</a> . But this update isn't fixing the crash. I've posted the error log below:</p>\n<h3>Source code / logs</h3>\n<pre><code>Total params: 3,714,788\nTrainable params: 3,714,788\nNon-trainable params: 0\n_________________________________________________________________\n2018-01-06 21:58:27.567991: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2018-01-06 21:58:27.568491: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: \nname: GeForce GT 750M major: 3 minor: 0 memoryClockRate(GHz): 0.967\npciBusID: 0000:01:00.0\ntotalMemory: 1.95GiB freeMemory: 1.60GiB\n2018-01-06 21:58:27.568526: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -&gt; (device: 0, name: GeForce GT 750M, pci bus id: 0000:01:00.0, compute capability: 3.0)\nTrain on 646 samples, validate on 162 samples\nEpoch 1/20\n2018-01-06 21:58:30.447458: E tensorflow/stream_executor/cuda/cuda_driver.cc:1080] failed to synchronize the stop event: CUDA_ERROR_ILLEGAL_INSTRUCTION\n2018-01-06 21:58:30.447529: E tensorflow/stream_executor/cuda/cuda_timer.cc:54] Internal: error destroying CUDA event in context 0x5650223aede0: CUDA_ERROR_ILLEGAL_INSTRUCTION\n2018-01-06 21:58:30.447572: E tensorflow/stream_executor/cuda/cuda_timer.cc:59] Internal: error destroying CUDA event in context 0x5650223aede0: CUDA_ERROR_ILLEGAL_INSTRUCTION\n2018-01-06 21:58:30.447629: F tensorflow/stream_executor/cuda/cuda_dnn.cc:2964] failed to set stream for cudnn handle: CUDNN_STATUS_MAPPING_ERROR\nAborted (core dumped)\n\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 1.4\nPython version: 3.6.3\nBazel version (if compiling from source): 0.9.0\nGCC/Compiler version (if compiling from source):  5.4.0\nCUDA/cuDNN version: 9.1/7.0.5\nGPU model and memory: GT 750M 2GB\nExact command to reproduce: Run the custom program.\n\nDescribe the problem\nTrying to train a simple 5 layer model with 3.7million parameters that are trainable which would occupy around 1.5GB VRAM, the training fails instantly at the very first epoch. People who had similar error claimed that it was fixed in cuDNN 7.0.5 from this thread #14363 . But this update isn't fixing the crash. I've posted the error log below:\nSource code / logs\nTotal params: 3,714,788\nTrainable params: 3,714,788\nNon-trainable params: 0\n_________________________________________________________________\n2018-01-06 21:58:27.567991: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2018-01-06 21:58:27.568491: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: \nname: GeForce GT 750M major: 3 minor: 0 memoryClockRate(GHz): 0.967\npciBusID: 0000:01:00.0\ntotalMemory: 1.95GiB freeMemory: 1.60GiB\n2018-01-06 21:58:27.568526: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GT 750M, pci bus id: 0000:01:00.0, compute capability: 3.0)\nTrain on 646 samples, validate on 162 samples\nEpoch 1/20\n2018-01-06 21:58:30.447458: E tensorflow/stream_executor/cuda/cuda_driver.cc:1080] failed to synchronize the stop event: CUDA_ERROR_ILLEGAL_INSTRUCTION\n2018-01-06 21:58:30.447529: E tensorflow/stream_executor/cuda/cuda_timer.cc:54] Internal: error destroying CUDA event in context 0x5650223aede0: CUDA_ERROR_ILLEGAL_INSTRUCTION\n2018-01-06 21:58:30.447572: E tensorflow/stream_executor/cuda/cuda_timer.cc:59] Internal: error destroying CUDA event in context 0x5650223aede0: CUDA_ERROR_ILLEGAL_INSTRUCTION\n2018-01-06 21:58:30.447629: F tensorflow/stream_executor/cuda/cuda_dnn.cc:2964] failed to set stream for cudnn handle: CUDNN_STATUS_MAPPING_ERROR\nAborted (core dumped)", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: 16.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.4\r\n- **Python version**: 3.6.3\r\n- **Bazel version (if compiling from source)**: 0.9.0\r\n- **GCC/Compiler version (if compiling from source)**:  5.4.0 \r\n- **CUDA/cuDNN version**: 9.1/7.0.5\r\n- **GPU model and memory**: GT 750M 2GB\r\n- **Exact command to reproduce**: Run the custom program.\r\n\r\n### Describe the problem\r\nTrying to train a simple 5 layer model with 3.7million parameters that are trainable which would occupy around 1.5GB VRAM, the training fails instantly at the very first epoch. People who had similar error claimed that it was fixed in cuDNN 7.0.5 from this thread [#14363](https://github.com/tensorflow/tensorflow/issues/14363) . But this update isn't fixing the crash. I've posted the error log below:\r\n\r\n### Source code / logs\r\n```\r\nTotal params: 3,714,788\r\nTrainable params: 3,714,788\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\n2018-01-06 21:58:27.567991: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2018-01-06 21:58:27.568491: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: \r\nname: GeForce GT 750M major: 3 minor: 0 memoryClockRate(GHz): 0.967\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 1.95GiB freeMemory: 1.60GiB\r\n2018-01-06 21:58:27.568526: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GT 750M, pci bus id: 0000:01:00.0, compute capability: 3.0)\r\nTrain on 646 samples, validate on 162 samples\r\nEpoch 1/20\r\n2018-01-06 21:58:30.447458: E tensorflow/stream_executor/cuda/cuda_driver.cc:1080] failed to synchronize the stop event: CUDA_ERROR_ILLEGAL_INSTRUCTION\r\n2018-01-06 21:58:30.447529: E tensorflow/stream_executor/cuda/cuda_timer.cc:54] Internal: error destroying CUDA event in context 0x5650223aede0: CUDA_ERROR_ILLEGAL_INSTRUCTION\r\n2018-01-06 21:58:30.447572: E tensorflow/stream_executor/cuda/cuda_timer.cc:59] Internal: error destroying CUDA event in context 0x5650223aede0: CUDA_ERROR_ILLEGAL_INSTRUCTION\r\n2018-01-06 21:58:30.447629: F tensorflow/stream_executor/cuda/cuda_dnn.cc:2964] failed to set stream for cudnn handle: CUDNN_STATUS_MAPPING_ERROR\r\nAborted (core dumped)\r\n\r\n```\r\n\r\n  \r\n  "}
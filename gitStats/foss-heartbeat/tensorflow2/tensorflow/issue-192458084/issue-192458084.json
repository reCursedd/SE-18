{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5963", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5963/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5963/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5963/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5963", "id": 192458084, "node_id": "MDU6SXNzdWUxOTI0NTgwODQ=", "number": 5963, "title": "get error when get labels of TFRecord dataset made by myself", "user": {"login": "yangkun1993", "id": 18445547, "node_id": "MDQ6VXNlcjE4NDQ1NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/18445547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yangkun1993", "html_url": "https://github.com/yangkun1993", "followers_url": "https://api.github.com/users/yangkun1993/followers", "following_url": "https://api.github.com/users/yangkun1993/following{/other_user}", "gists_url": "https://api.github.com/users/yangkun1993/gists{/gist_id}", "starred_url": "https://api.github.com/users/yangkun1993/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yangkun1993/subscriptions", "organizations_url": "https://api.github.com/users/yangkun1993/orgs", "repos_url": "https://api.github.com/users/yangkun1993/repos", "events_url": "https://api.github.com/users/yangkun1993/events{/privacy}", "received_events_url": "https://api.github.com/users/yangkun1993/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-30T02:22:11Z", "updated_at": "2016-12-01T00:20:25Z", "closed_at": "2016-12-01T00:20:25Z", "author_association": "NONE", "body_html": "<p>I use the cifar10 model train my own TFRecord dataset ,it's running on Ubuntu 14.4 without error,but getting these errors when I run it on Mac or GPU server\u3002And I am sure the labels of my dataset are right ,I don't know why get labels bigger than 10 ,I just have 10 classifications\u3002</p>\n<p>I use this code write images and labels in binfile:</p>\n<p>image_raw = image.tostring()<br>\nexample = tf.train.Example(features=tf.train.Features(feature={<br>\n'image_raw' : _bytes_feature(image_raw),<br>\n'height' : _int64_feature(image.shape[0]),<br>\n'width' : _int64_feature(image.shape[1]),<br>\n'deepth' : _int64_feature(image.shape[2]),<br>\n'label' : _int64_feature(label)<br>\n}))<br>\nwriter.write(example.SerializeToString())<br>\nwriter.close()</p>\n<p>The errors:</p>\n<p>W tensorflow/core/framework/op_kernel.cc:975] Invalid argument: Received a label value of 245 which is outside the valid range of [0, 10).  Label values: 180 96 226 166 162 179 147 115 162 141 150 136 129 118 162 141 78 154 133 155 89 184 116 179 176 70 209 177 65 177 89 36 80 139 117 187 115 182 106 42 203 120 48 72 96 126 74 123 134 115 112 154 128 163 64 113 35 140 198 193 189 67 164 110 117 61 215 186 189 84 95 206 163 82 122 160 37 179 236 157 140 181 178 128 67 114 43 211 143 70 0 91 184 142 172 127 80 160 127 90 62 151 158 23 180 192 21 97 125 94 98 136 125 190 158 128 119 30 198 111 206 66 137 126 245 210 158 188<br>\nTraceback (most recent call last):<br>\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 137, in <br>\ntf.app.run()<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run<br>\nsys.exit(main(sys.argv[:1] + flags_passthrough))<br>\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 133, in main<br>\ntrain()<br>\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 103, in train<br>\n_, loss_value = sess.run([train_op, loss])<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 766, in run<br>\nrun_metadata_ptr)<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 964, in _run<br>\nfeed_dict_string, options, run_metadata)<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 1014, in _do_run<br>\ntarget_list, options, run_metadata)<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 1034, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Received a label value of 245 which is outside the valid range of [0, 10).  Label values: 180 96 226 166 162 179 147 115 162 141 150 136 129 118 162 141 78 154 133 155 89 184 116 179 176 70 209 177 65 177 89 36 80 139 117 187 115 182 106 42 203 120 48 72 96 126 74 123 134 115 112 154 128 163 64 113 35 140 198 193 189 67 164 110 117 61 215 186 189 84 95 206 163 82 122 160 37 179 236 157 140 181 178 128 67 114 43 211 143 70 0 91 184 142 172 127 80 160 127 90 62 151 158 23 180 192 21 97 125 94 98 136 125 190 158 128 119 30 198 111 206 66 137 126 245 210 158 188<br>\n[[Node: cross_entropy_per_example/cross_entropy_per_example = SparseSoftmaxCrossEntropyWithLogits[T=DT_FLOAT, Tlabels=DT_INT64, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](softmax_linear/softmax_linear, Cast_4)]]</p>\n<p>Caused by op u'cross_entropy_per_example/cross_entropy_per_example', defined at:<br>\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 137, in <br>\ntf.app.run()<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run<br>\nsys.exit(main(sys.argv[:1] + flags_passthrough))<br>\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 133, in main<br>\ntrain()<br>\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 76, in train<br>\nloss = cifar10.loss(logits, labels)<br>\nFile \"/Users/yangk/cifar10/cifar10.py\", line 289, in loss<br>\nlogits, labels, name='cross_entropy_per_example')<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/ops/nn_ops.py\", line 1537, in sparse_softmax_cross_entropy_with_logits<br>\nprecise_logits, labels, name=name)<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 2378, in _sparse_softmax_cross_entropy_with_logits<br>\nfeatures=features, labels=labels, name=name)<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 763, in apply_op<br>\nop_def=op_def)<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/framework/ops.py\", line 2371, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/framework/ops.py\", line 1258, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>InvalidArgumentError (see above for traceback): Received a label value of 245 which is outside the valid range of [0, 10).  Label values: 180 96 226 166 162 179 147 115 162 141 150 136 129 118 162 141 78 154 133 155 89 184 116 179 176 70 209 177 65 177 89 36 80 139 117 187 115 182 106 42 203 120 48 72 96 126 74 123 134 115 112 154 128 163 64 113 35 140 198 193 189 67 164 110 117 61 215 186 189 84 95 206 163 82 122 160 37 179 236 157 140 181 178 128 67 114 43 211 143 70 0 91 184 142 172 127 80 160 127 90 62 151 158 23 180 192 21 97 125 94 98 136 125 190 158 128 119 30 198 111 206 66 137 126 245 210 158 188<br>\n[[Node: cross_entropy_per_example/cross_entropy_per_example = SparseSoftmaxCrossEntropyWithLogits[T=DT_FLOAT, Tlabels=DT_INT64, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](softmax_linear/softmax_linear, Cast_4)]]</p>", "body_text": "I use the cifar10 model train my own TFRecord dataset ,it's running on Ubuntu 14.4 without error,but getting these errors when I run it on Mac or GPU server\u3002And I am sure the labels of my dataset are right ,I don't know why get labels bigger than 10 ,I just have 10 classifications\u3002\nI use this code write images and labels in binfile:\nimage_raw = image.tostring()\nexample = tf.train.Example(features=tf.train.Features(feature={\n'image_raw' : _bytes_feature(image_raw),\n'height' : _int64_feature(image.shape[0]),\n'width' : _int64_feature(image.shape[1]),\n'deepth' : _int64_feature(image.shape[2]),\n'label' : _int64_feature(label)\n}))\nwriter.write(example.SerializeToString())\nwriter.close()\nThe errors:\nW tensorflow/core/framework/op_kernel.cc:975] Invalid argument: Received a label value of 245 which is outside the valid range of [0, 10).  Label values: 180 96 226 166 162 179 147 115 162 141 150 136 129 118 162 141 78 154 133 155 89 184 116 179 176 70 209 177 65 177 89 36 80 139 117 187 115 182 106 42 203 120 48 72 96 126 74 123 134 115 112 154 128 163 64 113 35 140 198 193 189 67 164 110 117 61 215 186 189 84 95 206 163 82 122 160 37 179 236 157 140 181 178 128 67 114 43 211 143 70 0 91 184 142 172 127 80 160 127 90 62 151 158 23 180 192 21 97 125 94 98 136 125 190 158 128 119 30 198 111 206 66 137 126 245 210 158 188\nTraceback (most recent call last):\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 137, in \ntf.app.run()\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\nsys.exit(main(sys.argv[:1] + flags_passthrough))\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 133, in main\ntrain()\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 103, in train\n_, loss_value = sess.run([train_op, loss])\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 766, in run\nrun_metadata_ptr)\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 964, in _run\nfeed_dict_string, options, run_metadata)\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 1014, in _do_run\ntarget_list, options, run_metadata)\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 1034, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Received a label value of 245 which is outside the valid range of [0, 10).  Label values: 180 96 226 166 162 179 147 115 162 141 150 136 129 118 162 141 78 154 133 155 89 184 116 179 176 70 209 177 65 177 89 36 80 139 117 187 115 182 106 42 203 120 48 72 96 126 74 123 134 115 112 154 128 163 64 113 35 140 198 193 189 67 164 110 117 61 215 186 189 84 95 206 163 82 122 160 37 179 236 157 140 181 178 128 67 114 43 211 143 70 0 91 184 142 172 127 80 160 127 90 62 151 158 23 180 192 21 97 125 94 98 136 125 190 158 128 119 30 198 111 206 66 137 126 245 210 158 188\n[[Node: cross_entropy_per_example/cross_entropy_per_example = SparseSoftmaxCrossEntropyWithLogits[T=DT_FLOAT, Tlabels=DT_INT64, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](softmax_linear/softmax_linear, Cast_4)]]\nCaused by op u'cross_entropy_per_example/cross_entropy_per_example', defined at:\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 137, in \ntf.app.run()\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\nsys.exit(main(sys.argv[:1] + flags_passthrough))\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 133, in main\ntrain()\nFile \"/Users/yangk/cifar10/cifar10_train.py\", line 76, in train\nloss = cifar10.loss(logits, labels)\nFile \"/Users/yangk/cifar10/cifar10.py\", line 289, in loss\nlogits, labels, name='cross_entropy_per_example')\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/ops/nn_ops.py\", line 1537, in sparse_softmax_cross_entropy_with_logits\nprecise_logits, labels, name=name)\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 2378, in _sparse_softmax_cross_entropy_with_logits\nfeatures=features, labels=labels, name=name)\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 763, in apply_op\nop_def=op_def)\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/framework/ops.py\", line 2371, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/Library/Python/2.7/site-packages/tensorflow/python/framework/ops.py\", line 1258, in init\nself._traceback = _extract_stack()\nInvalidArgumentError (see above for traceback): Received a label value of 245 which is outside the valid range of [0, 10).  Label values: 180 96 226 166 162 179 147 115 162 141 150 136 129 118 162 141 78 154 133 155 89 184 116 179 176 70 209 177 65 177 89 36 80 139 117 187 115 182 106 42 203 120 48 72 96 126 74 123 134 115 112 154 128 163 64 113 35 140 198 193 189 67 164 110 117 61 215 186 189 84 95 206 163 82 122 160 37 179 236 157 140 181 178 128 67 114 43 211 143 70 0 91 184 142 172 127 80 160 127 90 62 151 158 23 180 192 21 97 125 94 98 136 125 190 158 128 119 30 198 111 206 66 137 126 245 210 158 188\n[[Node: cross_entropy_per_example/cross_entropy_per_example = SparseSoftmaxCrossEntropyWithLogits[T=DT_FLOAT, Tlabels=DT_INT64, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](softmax_linear/softmax_linear, Cast_4)]]", "body": "I use the cifar10 model train my own TFRecord dataset ,it's running on Ubuntu 14.4 without error,but getting these errors when I run it on Mac or GPU server\u3002And I am sure the labels of my dataset are right ,I don't know why get labels bigger than 10 ,I just have 10 classifications\u3002\r\n\r\nI use this code write images and labels in binfile:\r\n\r\nimage_raw = image.tostring()\r\n        example = tf.train.Example(features=tf.train.Features(feature={\r\n            'image_raw' : _bytes_feature(image_raw),\r\n            'height' : _int64_feature(image.shape[0]),\r\n            'width' : _int64_feature(image.shape[1]),\r\n            'deepth' : _int64_feature(image.shape[2]),\r\n            'label' : _int64_feature(label)\r\n            }))\r\n        writer.write(example.SerializeToString())\r\n    writer.close()\r\n\r\nThe errors:\r\n\r\nW tensorflow/core/framework/op_kernel.cc:975] Invalid argument: Received a label value of 245 which is outside the valid range of [0, 10).  Label values: 180 96 226 166 162 179 147 115 162 141 150 136 129 118 162 141 78 154 133 155 89 184 116 179 176 70 209 177 65 177 89 36 80 139 117 187 115 182 106 42 203 120 48 72 96 126 74 123 134 115 112 154 128 163 64 113 35 140 198 193 189 67 164 110 117 61 215 186 189 84 95 206 163 82 122 160 37 179 236 157 140 181 178 128 67 114 43 211 143 70 0 91 184 142 172 127 80 160 127 90 62 151 158 23 180 192 21 97 125 94 98 136 125 190 158 128 119 30 198 111 206 66 137 126 245 210 158 188\r\nTraceback (most recent call last):\r\n  File \"/Users/yangk/cifar10/cifar10_train.py\", line 137, in <module>\r\n    tf.app.run()\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"/Users/yangk/cifar10/cifar10_train.py\", line 133, in main\r\n    train()\r\n  File \"/Users/yangk/cifar10/cifar10_train.py\", line 103, in train\r\n    _, loss_value = sess.run([train_op, loss])\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 766, in run\r\n    run_metadata_ptr)\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 964, in _run\r\n    feed_dict_string, options, run_metadata)\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 1014, in _do_run\r\n    target_list, options, run_metadata)\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/client/session.py\", line 1034, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Received a label value of 245 which is outside the valid range of [0, 10).  Label values: 180 96 226 166 162 179 147 115 162 141 150 136 129 118 162 141 78 154 133 155 89 184 116 179 176 70 209 177 65 177 89 36 80 139 117 187 115 182 106 42 203 120 48 72 96 126 74 123 134 115 112 154 128 163 64 113 35 140 198 193 189 67 164 110 117 61 215 186 189 84 95 206 163 82 122 160 37 179 236 157 140 181 178 128 67 114 43 211 143 70 0 91 184 142 172 127 80 160 127 90 62 151 158 23 180 192 21 97 125 94 98 136 125 190 158 128 119 30 198 111 206 66 137 126 245 210 158 188\r\n\t [[Node: cross_entropy_per_example/cross_entropy_per_example = SparseSoftmaxCrossEntropyWithLogits[T=DT_FLOAT, Tlabels=DT_INT64, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](softmax_linear/softmax_linear, Cast_4)]]\r\n\r\nCaused by op u'cross_entropy_per_example/cross_entropy_per_example', defined at:\r\n  File \"/Users/yangk/cifar10/cifar10_train.py\", line 137, in <module>\r\n    tf.app.run()\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"/Users/yangk/cifar10/cifar10_train.py\", line 133, in main\r\n    train()\r\n  File \"/Users/yangk/cifar10/cifar10_train.py\", line 76, in train\r\n    loss = cifar10.loss(logits, labels)\r\n  File \"/Users/yangk/cifar10/cifar10.py\", line 289, in loss\r\n    logits, labels, name='cross_entropy_per_example')\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/ops/nn_ops.py\", line 1537, in sparse_softmax_cross_entropy_with_logits\r\n    precise_logits, labels, name=name)\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 2378, in _sparse_softmax_cross_entropy_with_logits\r\n    features=features, labels=labels, name=name)\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 763, in apply_op\r\n    op_def=op_def)\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/framework/ops.py\", line 2371, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"/Library/Python/2.7/site-packages/tensorflow/python/framework/ops.py\", line 1258, in __init__\r\n    self._traceback = _extract_stack()\r\n\r\nInvalidArgumentError (see above for traceback): Received a label value of 245 which is outside the valid range of [0, 10).  Label values: 180 96 226 166 162 179 147 115 162 141 150 136 129 118 162 141 78 154 133 155 89 184 116 179 176 70 209 177 65 177 89 36 80 139 117 187 115 182 106 42 203 120 48 72 96 126 74 123 134 115 112 154 128 163 64 113 35 140 198 193 189 67 164 110 117 61 215 186 189 84 95 206 163 82 122 160 37 179 236 157 140 181 178 128 67 114 43 211 143 70 0 91 184 142 172 127 80 160 127 90 62 151 158 23 180 192 21 97 125 94 98 136 125 190 158 128 119 30 198 111 206 66 137 126 245 210 158 188\r\n\t [[Node: cross_entropy_per_example/cross_entropy_per_example = SparseSoftmaxCrossEntropyWithLogits[T=DT_FLOAT, Tlabels=DT_INT64, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](softmax_linear/softmax_linear, Cast_4)]]"}
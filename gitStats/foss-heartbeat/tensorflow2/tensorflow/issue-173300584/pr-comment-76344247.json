{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/76344247", "pull_request_review_id": null, "id": 76344247, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc2MzQ0MjQ3", "diff_hunk": "@@ -0,0 +1,478 @@\n+/* Copyright 2016 The TensorFlow Authors. All Rights Reserved.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+// Implements convolution operations with other kernels baked into the\n+// processing, to optimize latency and memory usage.\n+\n+#include <string.h>\n+#include <map>\n+#include <vector>\n+#include \"tensorflow/core/framework/common_shape_fns.h\"\n+#include \"tensorflow/core/framework/numeric_op.h\"\n+#include \"tensorflow/core/framework/op_kernel.h\"\n+#include \"tensorflow/core/framework/register_types.h\"\n+#include \"tensorflow/core/framework/resource_mgr.h\"\n+#include \"tensorflow/core/framework/tensor.h\"\n+#include \"tensorflow/core/framework/tensor_shape.h\"\n+#include \"tensorflow/core/framework/tensor_slice.h\"\n+#include \"tensorflow/core/kernels/bounds_check.h\"\n+#include \"tensorflow/core/kernels/conv_ops.h\"\n+#include \"tensorflow/core/kernels/gemm_functors.h\"\n+#include \"tensorflow/core/kernels/image_resizer_state.h\"\n+#include \"tensorflow/core/util/mirror_pad_mode.h\"\n+#include \"tensorflow/core/util/padding.h\"\n+#include \"tensorflow/core/util/tensor_format.h\"\n+\n+namespace tensorflow {\n+\n+namespace {\n+\n+// Combines bilinear resizing and mirror padding into the im2col transformation\n+// stage of convolution,\n+template <class T1, class T2, class T3, class TGemmFunctor>\n+class FusedResizeAndPadConvFunctor {\n+ public:\n+  void operator()(OpKernelContext* context, const Tensor& input,\n+                  int input_batches, int resized_height, int resized_width,\n+                  int padded_height, int padded_width, int input_depth,\n+                  const T2* filter_data, int filter_height, int filter_width,\n+                  int filter_count, int stride_rows, int stride_cols,\n+                  Padding padding, T3* output_data, int output_height,\n+                  int output_width, const ImageResizerState& st,\n+                  int top_padding, int bottom_padding, int left_padding,\n+                  int right_padding, int pad_offset) {\n+    if ((input_batches <= 0) || (padded_width <= 0) || (padded_height <= 0) ||", "path": "tensorflow/core/kernels/conv_ops_fused.cc", "position": 56, "original_position": 56, "commit_id": "8a7479a046882d729bd2ddea75c83d17cdfe059f", "original_commit_id": "8a7479a046882d729bd2ddea75c83d17cdfe059f", "user": {"login": "cwhipkey", "id": 17578177, "node_id": "MDQ6VXNlcjE3NTc4MTc3", "avatar_url": "https://avatars0.githubusercontent.com/u/17578177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cwhipkey", "html_url": "https://github.com/cwhipkey", "followers_url": "https://api.github.com/users/cwhipkey/followers", "following_url": "https://api.github.com/users/cwhipkey/following{/other_user}", "gists_url": "https://api.github.com/users/cwhipkey/gists{/gist_id}", "starred_url": "https://api.github.com/users/cwhipkey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cwhipkey/subscriptions", "organizations_url": "https://api.github.com/users/cwhipkey/orgs", "repos_url": "https://api.github.com/users/cwhipkey/repos", "events_url": "https://api.github.com/users/cwhipkey/events{/privacy}", "received_events_url": "https://api.github.com/users/cwhipkey/received_events", "type": "User", "site_admin": false}, "body": "Are these also verified in the kernel?\n", "created_at": "2016-08-25T23:36:30Z", "updated_at": "2016-08-25T23:36:30Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4046#discussion_r76344247", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4046", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/76344247"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4046#discussion_r76344247"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4046"}}, "body_html": "<p>Are these also verified in the kernel?</p>", "body_text": "Are these also verified in the kernel?"}
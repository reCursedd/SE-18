{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/316909764", "html_url": "https://github.com/tensorflow/tensorflow/issues/11588#issuecomment-316909764", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11588", "id": 316909764, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjkwOTc2NA==", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-21T05:49:55Z", "updated_at": "2017-07-21T05:50:12Z", "author_association": "MEMBER", "body_html": "<p>I might be misunderstanding, but why can't multiple devices be mixed? For example:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\n<span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/gpu:0<span class=\"pl-pds\">'</span></span>):\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> All these operations will run on GPU</span>\n  x <span class=\"pl-k\">=</span> tf.constant(<span class=\"pl-c1\">1.0</span>, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>X<span class=\"pl-pds\">'</span></span>)\n  y <span class=\"pl-k\">=</span> tf.add(x, x, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>Y<span class=\"pl-pds\">'</span></span>)\n<span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/cpu:0<span class=\"pl-pds\">'</span></span>):\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> This will copy the result of `y` to CPU and execute this multiply on CPU</span>\n  z <span class=\"pl-k\">=</span> tf.multiply(y, <span class=\"pl-c1\">2</span>, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>Z<span class=\"pl-pds\">'</span></span>)\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> Log device placement to see where ops are run</span>\n<span class=\"pl-k\">with</span> tf.Session(<span class=\"pl-v\">config</span><span class=\"pl-k\">=</span>tf.ConfigProto(<span class=\"pl-v\">log_device_placement</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>)) <span class=\"pl-k\">as</span> sess:\n  <span class=\"pl-c1\">print</span>(sess.run(z))</pre></div>\n<p>Will result in the following:</p>\n<pre><code>Y: (Add): /job:localhost/replica:0/task:0/gpu:0\nZ: (Mul): /job:localhost/replica:0/task:0/cpu:0\nX: (Const): /job:localhost/replica:0/task:0/gpu:0\n4.0\n</code></pre>", "body_text": "I might be misunderstanding, but why can't multiple devices be mixed? For example:\nimport tensorflow as tf\n\nwith tf.device('/gpu:0'):\n  # All these operations will run on GPU\n  x = tf.constant(1.0, name='X')\n  y = tf.add(x, x, name='Y')\nwith tf.device('/cpu:0'):\n  # This will copy the result of `y` to CPU and execute this multiply on CPU\n  z = tf.multiply(y, 2, name='Z')\n\n# Log device placement to see where ops are run\nwith tf.Session(config=tf.ConfigProto(log_device_placement=True)) as sess:\n  print(sess.run(z))\nWill result in the following:\nY: (Add): /job:localhost/replica:0/task:0/gpu:0\nZ: (Mul): /job:localhost/replica:0/task:0/cpu:0\nX: (Const): /job:localhost/replica:0/task:0/gpu:0\n4.0", "body": "I might be misunderstanding, but why can't multiple devices be mixed? For example:\r\n\r\n```python\r\n\r\nimport tensorflow as tf\r\n\r\nwith tf.device('/gpu:0'):\r\n  # All these operations will run on GPU\r\n  x = tf.constant(1.0, name='X')\r\n  y = tf.add(x, x, name='Y')\r\nwith tf.device('/cpu:0'):\r\n  # This will copy the result of `y` to CPU and execute this multiply on CPU\r\n  z = tf.multiply(y, 2, name='Z')\r\n\r\n# Log device placement to see where ops are run\r\nwith tf.Session(config=tf.ConfigProto(log_device_placement=True)) as sess:\r\n  print(sess.run(z))\r\n```\r\n\r\nWill result in the following:\r\n\r\n```\r\nY: (Add): /job:localhost/replica:0/task:0/gpu:0\r\nZ: (Mul): /job:localhost/replica:0/task:0/cpu:0\r\nX: (Const): /job:localhost/replica:0/task:0/gpu:0\r\n4.0\r\n```"}
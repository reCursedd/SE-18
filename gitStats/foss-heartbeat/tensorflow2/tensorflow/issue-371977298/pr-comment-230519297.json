{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/230519297", "pull_request_review_id": 171285289, "id": 230519297, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMDUxOTI5Nw==", "diff_hunk": "@@ -419,6 +423,45 @@ Status AlgebraicSimplifierVisitor::HandleAdd(HloInstruction* add) {\n   return Status::OK();\n }\n \n+Status AlgebraicSimplifierVisitor::HandleAnd(HloInstruction* logical_and) {\n+  HloInstruction *lhs, *rhs;\n+  CHECK(Match(logical_and, m::And(m::Op(&lhs), m::Op(&rhs))));\n+  // Simplify logical and\n+  if (ShapeUtil::HasPrimitiveType(lhs->shape(), xla::PRED) &&\n+      ShapeUtil::HasPrimitiveType(rhs->shape(), xla::PRED)) {\n+    // A && True => A\n+    VLOG(10) << \"trying transform [A && True => A]: \"\n+             << logical_and->ToString();\n+    if (IsAll(rhs, 1) && ReplaceInstructionIfSameShape(logical_and, lhs)) {\n+      return Status::OK();\n+    }\n+    // True && A => A\n+    VLOG(10) << \"trying transform [True && A => A]: \"\n+             << logical_and->ToString();\n+    if (IsAll(lhs, 1) && ReplaceInstructionIfSameShape(logical_and, rhs)) {\n+      return Status::OK();\n+    }\n+\n+    // A && False => False\n+    VLOG(10) << \"trying transform [A && False => False]: \"\n+             << logical_and->ToString();\n+    if (IsAll(rhs, 0) && ReplaceInstructionIfSameShape(logical_and, rhs)) {\n+      return Status::OK();\n+    }\n+\n+    // False && A => False\n+    VLOG(10) << \"trying transform [False && A => False]: \"\n+             << logical_and->ToString();\n+    if (IsAll(lhs, 0) && ReplaceInstructionIfSameShape(logical_and, lhs)) {\n+      return Status::OK();\n+    }\n+\n+    return Status::OK();", "path": "tensorflow/compiler/xla/service/algebraic_simplifier.cc", "position": null, "original_position": 55, "commit_id": "6ae8cb76c9bfd862d2472ce1c37291bfc1003ab7", "original_commit_id": "a3e4e4e1ada168b776822c72320eed60cf59ce48", "user": {"login": "congliuthu", "id": 40304338, "node_id": "MDQ6VXNlcjQwMzA0MzM4", "avatar_url": "https://avatars0.githubusercontent.com/u/40304338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/congliuthu", "html_url": "https://github.com/congliuthu", "followers_url": "https://api.github.com/users/congliuthu/followers", "following_url": "https://api.github.com/users/congliuthu/following{/other_user}", "gists_url": "https://api.github.com/users/congliuthu/gists{/gist_id}", "starred_url": "https://api.github.com/users/congliuthu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/congliuthu/subscriptions", "organizations_url": "https://api.github.com/users/congliuthu/orgs", "repos_url": "https://api.github.com/users/congliuthu/repos", "events_url": "https://api.github.com/users/congliuthu/events{/privacy}", "received_events_url": "https://api.github.com/users/congliuthu/received_events", "type": "User", "site_admin": false}, "body": "Nit: this return can be removed.", "created_at": "2018-11-02T21:56:07Z", "updated_at": "2018-11-06T18:11:31Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/23105#discussion_r230519297", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23105", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/230519297"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/23105#discussion_r230519297"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23105"}}, "body_html": "<p>Nit: this return can be removed.</p>", "body_text": "Nit: this return can be removed."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/231233052", "pull_request_review_id": 172158263, "id": 231233052, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMTIzMzA1Mg==", "diff_hunk": "@@ -419,6 +423,45 @@ Status AlgebraicSimplifierVisitor::HandleAdd(HloInstruction* add) {\n   return Status::OK();\n }\n \n+Status AlgebraicSimplifierVisitor::HandleAnd(HloInstruction* logical_and) {\n+  HloInstruction *lhs, *rhs;\n+  CHECK(Match(logical_and, m::And(m::Op(&lhs), m::Op(&rhs))));\n+  // Simplify logical and\n+  if (ShapeUtil::HasPrimitiveType(lhs->shape(), xla::PRED) &&\n+      ShapeUtil::HasPrimitiveType(rhs->shape(), xla::PRED)) {\n+    // A && True => A\n+    VLOG(10) << \"trying transform [A && True => A]: \"\n+             << logical_and->ToString();\n+    if (IsAll(rhs, 1) && ReplaceInstructionIfSameShape(logical_and, lhs)) {\n+      return Status::OK();\n+    }\n+    // True && A => A\n+    VLOG(10) << \"trying transform [True && A => A]: \"\n+             << logical_and->ToString();\n+    if (IsAll(lhs, 1) && ReplaceInstructionIfSameShape(logical_and, rhs)) {\n+      return Status::OK();\n+    }\n+\n+    // A && False => False\n+    VLOG(10) << \"trying transform [A && False => False]: \"\n+             << logical_and->ToString();\n+    if (IsAll(rhs, 0) && ReplaceInstructionIfSameShape(logical_and, rhs)) {\n+      return Status::OK();\n+    }\n+\n+    // False && A => False\n+    VLOG(10) << \"trying transform [False && A => False]: \"\n+             << logical_and->ToString();\n+    if (IsAll(lhs, 0) && ReplaceInstructionIfSameShape(logical_and, lhs)) {\n+      return Status::OK();\n+    }\n+\n+    return Status::OK();", "path": "tensorflow/compiler/xla/service/algebraic_simplifier.cc", "position": null, "original_position": 55, "commit_id": "6ae8cb76c9bfd862d2472ce1c37291bfc1003ab7", "original_commit_id": "a3e4e4e1ada168b776822c72320eed60cf59ce48", "user": {"login": "georgepaw", "id": 6642663, "node_id": "MDQ6VXNlcjY2NDI2NjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6642663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgepaw", "html_url": "https://github.com/georgepaw", "followers_url": "https://api.github.com/users/georgepaw/followers", "following_url": "https://api.github.com/users/georgepaw/following{/other_user}", "gists_url": "https://api.github.com/users/georgepaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgepaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgepaw/subscriptions", "organizations_url": "https://api.github.com/users/georgepaw/orgs", "repos_url": "https://api.github.com/users/georgepaw/repos", "events_url": "https://api.github.com/users/georgepaw/events{/privacy}", "received_events_url": "https://api.github.com/users/georgepaw/received_events", "type": "User", "site_admin": false}, "body": "Done.", "created_at": "2018-11-06T18:12:07Z", "updated_at": "2018-11-06T18:12:08Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/23105#discussion_r231233052", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23105", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/231233052"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/23105#discussion_r231233052"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23105"}}, "body_html": "<p>Done.</p>", "body_text": "Done.", "in_reply_to_id": 230519297}
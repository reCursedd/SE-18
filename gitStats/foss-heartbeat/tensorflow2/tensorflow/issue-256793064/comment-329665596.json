{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/329665596", "html_url": "https://github.com/tensorflow/tensorflow/pull/12976#issuecomment-329665596", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12976", "id": 329665596, "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTY2NTU5Ng==", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-15T02:53:06Z", "updated_at": "2017-09-15T02:53:06Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20959853\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/drpngx\">@drpngx</a> Thanks for the review.</p>\n<p>The PR didn't <code>disable</code> the float16, but rather <code>not enable</code> the float16 tests for <code>testDepthwiseConv2DInputGrad</code> and <code>testDepthwiseConv2DFilterGrad</code>.</p>\n<p>Before this PR, in <code>testDepthwiseConv2DInputGrad</code> (Ln 371):</p>\n<pre><code>      for data_type in [dtypes.float32, dtypes.float64]:\n        self._ConstructAndTestGradient(\n            input_size,\n            filter_size,\n            output_size,\n            stride,\n            padding,\n            data_type,\n            test_input=True,\n            use_gpu=True)\n</code></pre>\n<p>After this PR, the <code>dtypes.float16</code> was <strong>not added</strong> to the above. Instead, a comment was added to specify that <code>dtypes.float16</code> is not enabled (yet).</p>\n<p>If we enable <code>dtypes.float16</code>, then here is the error message:</p>\n<pre><code>======================================================================\nFAIL: testDepthwiseConv2DInputGrad (__main__.DepthwiseConv2DTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/ubuntu/.cache/bazel/_bazel_ubuntu/ad1e09741bb4109fbc70ef8216b59ee2/execroot/org_tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/depthwise_conv_op_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/depthwise_conv_op_test.py\", line 387, in testDepthwiseConv2DInputGrad\n    use_gpu=True)\n  File \"/home/ubuntu/.cache/bazel/_bazel_ubuntu/ad1e09741bb4109fbc70ef8216b59ee2/execroot/org_tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/depthwise_conv_op_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/depthwise_conv_op_test.py\", line 368, in _ConstructAndTestGradient\n    self.assertLess(err, tolerance)\nAssertionError: 3.373046875 not less than 0.002\n\n----------------------------------------------------------------------\nRan 10 tests in 21.389s\n\nFAILED (failures=1)\n</code></pre>\n<p>Please take a look.</p>", "body_text": "@drpngx Thanks for the review.\nThe PR didn't disable the float16, but rather not enable the float16 tests for testDepthwiseConv2DInputGrad and testDepthwiseConv2DFilterGrad.\nBefore this PR, in testDepthwiseConv2DInputGrad (Ln 371):\n      for data_type in [dtypes.float32, dtypes.float64]:\n        self._ConstructAndTestGradient(\n            input_size,\n            filter_size,\n            output_size,\n            stride,\n            padding,\n            data_type,\n            test_input=True,\n            use_gpu=True)\n\nAfter this PR, the dtypes.float16 was not added to the above. Instead, a comment was added to specify that dtypes.float16 is not enabled (yet).\nIf we enable dtypes.float16, then here is the error message:\n======================================================================\nFAIL: testDepthwiseConv2DInputGrad (__main__.DepthwiseConv2DTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/ubuntu/.cache/bazel/_bazel_ubuntu/ad1e09741bb4109fbc70ef8216b59ee2/execroot/org_tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/depthwise_conv_op_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/depthwise_conv_op_test.py\", line 387, in testDepthwiseConv2DInputGrad\n    use_gpu=True)\n  File \"/home/ubuntu/.cache/bazel/_bazel_ubuntu/ad1e09741bb4109fbc70ef8216b59ee2/execroot/org_tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/depthwise_conv_op_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/depthwise_conv_op_test.py\", line 368, in _ConstructAndTestGradient\n    self.assertLess(err, tolerance)\nAssertionError: 3.373046875 not less than 0.002\n\n----------------------------------------------------------------------\nRan 10 tests in 21.389s\n\nFAILED (failures=1)\n\nPlease take a look.", "body": "@drpngx Thanks for the review.\r\n\r\nThe PR didn't `disable` the float16, but rather `not enable` the float16 tests for `testDepthwiseConv2DInputGrad` and `testDepthwiseConv2DFilterGrad`.\r\n\r\nBefore this PR, in `testDepthwiseConv2DInputGrad` (Ln 371):\r\n```\r\n      for data_type in [dtypes.float32, dtypes.float64]:\r\n        self._ConstructAndTestGradient(\r\n            input_size,\r\n            filter_size,\r\n            output_size,\r\n            stride,\r\n            padding,\r\n            data_type,\r\n            test_input=True,\r\n            use_gpu=True)\r\n```\r\n\r\nAfter this PR, the `dtypes.float16` was **not added** to the above. Instead, a comment was added to specify that `dtypes.float16` is not enabled (yet).\r\n\r\nIf we enable `dtypes.float16`, then here is the error message:\r\n```\r\n======================================================================\r\nFAIL: testDepthwiseConv2DInputGrad (__main__.DepthwiseConv2DTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/.cache/bazel/_bazel_ubuntu/ad1e09741bb4109fbc70ef8216b59ee2/execroot/org_tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/depthwise_conv_op_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/depthwise_conv_op_test.py\", line 387, in testDepthwiseConv2DInputGrad\r\n    use_gpu=True)\r\n  File \"/home/ubuntu/.cache/bazel/_bazel_ubuntu/ad1e09741bb4109fbc70ef8216b59ee2/execroot/org_tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/depthwise_conv_op_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/depthwise_conv_op_test.py\", line 368, in _ConstructAndTestGradient\r\n    self.assertLess(err, tolerance)\r\nAssertionError: 3.373046875 not less than 0.002\r\n\r\n----------------------------------------------------------------------\r\nRan 10 tests in 21.389s\r\n\r\nFAILED (failures=1)\r\n```\r\n\r\nPlease take a look."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7448", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7448/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7448/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7448/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7448", "id": 207030750, "node_id": "MDU6SXNzdWUyMDcwMzA3NTA=", "number": 7448, "title": "tf.summary.FileWriter crashes with AlreadyExistsError", "user": {"login": "una-dinosauria", "id": 3733964, "node_id": "MDQ6VXNlcjM3MzM5NjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/3733964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/una-dinosauria", "html_url": "https://github.com/una-dinosauria", "followers_url": "https://api.github.com/users/una-dinosauria/followers", "following_url": "https://api.github.com/users/una-dinosauria/following{/other_user}", "gists_url": "https://api.github.com/users/una-dinosauria/gists{/gist_id}", "starred_url": "https://api.github.com/users/una-dinosauria/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/una-dinosauria/subscriptions", "organizations_url": "https://api.github.com/users/una-dinosauria/orgs", "repos_url": "https://api.github.com/users/una-dinosauria/repos", "events_url": "https://api.github.com/users/una-dinosauria/events{/privacy}", "received_events_url": "https://api.github.com/users/una-dinosauria/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-02-12T05:40:00Z", "updated_at": "2018-10-24T21:06:49Z", "closed_at": "2018-10-24T21:06:49Z", "author_association": "NONE", "body_html": "<p>We have a cluster with ~20 GPUs that we often use to train multiple networks in parallel, and we use <code>tf.summary.Filewriter</code> to keep track of the networks' progress. However, some jobs are crashing when they attempt to create their <code>FileWriter</code>s with the following stack trace:</p>\n<pre><code>[...]\n  File \"/ubc/cs/research/tracking-raid/julm/eyescream/tensorflow/pose_estimation/linear_model.py\", line 141, in __init__\n    self.train_writer = tf.summary.FileWriter( os.path.join(summaries_dir, 'train' ))\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/summary/writer/writer.py\", line 308, in __init__\n    event_writer = EventFileWriter(logdir, max_queue, flush_secs)\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/summary/writer/event_file_writer.py\", line 69, in __init__\n    gfile.MakeDirs(self._logdir)\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/lib/io/file_io.py\", line 299, in recursive_create_dir\n    pywrap_tensorflow.RecursivelyCreateDir(compat.as_bytes(dirname), status)\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/contextlib.py\", line 24, in __exit__\n    self.gen.next()\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/errors_impl.py\", line 469, in raise_exception_on_not_ok_status\n    pywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.AlreadyExistsError: /global/scratch/julm/3d_experiments\n</code></pre>\n<p>I am writing the <code>Filewriter</code>s' progress under <code>/global/scratch/julm/3d_experiments/</code>, and creating multiple subdirectories depending on the hyperparameters that each network is using.</p>\n<p>The error seems to suggest that the <code>FileWriter</code> is trying to create the directory <code>/global/scratch/julm/3d_experiments/</code> and crashing because the directory already exists. Moreover, only around 1 in 5 jobs crashes with this error.</p>\n<p>Do you know if I could somehow ignore this error? I don't think the fact that the directory exists should trigger an error for the user.</p>\n<p>Our cluster runs under OpenSUSE 42.2.</p>", "body_text": "We have a cluster with ~20 GPUs that we often use to train multiple networks in parallel, and we use tf.summary.Filewriter to keep track of the networks' progress. However, some jobs are crashing when they attempt to create their FileWriters with the following stack trace:\n[...]\n  File \"/ubc/cs/research/tracking-raid/julm/eyescream/tensorflow/pose_estimation/linear_model.py\", line 141, in __init__\n    self.train_writer = tf.summary.FileWriter( os.path.join(summaries_dir, 'train' ))\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/summary/writer/writer.py\", line 308, in __init__\n    event_writer = EventFileWriter(logdir, max_queue, flush_secs)\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/summary/writer/event_file_writer.py\", line 69, in __init__\n    gfile.MakeDirs(self._logdir)\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/lib/io/file_io.py\", line 299, in recursive_create_dir\n    pywrap_tensorflow.RecursivelyCreateDir(compat.as_bytes(dirname), status)\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/contextlib.py\", line 24, in __exit__\n    self.gen.next()\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/errors_impl.py\", line 469, in raise_exception_on_not_ok_status\n    pywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.AlreadyExistsError: /global/scratch/julm/3d_experiments\n\nI am writing the Filewriters' progress under /global/scratch/julm/3d_experiments/, and creating multiple subdirectories depending on the hyperparameters that each network is using.\nThe error seems to suggest that the FileWriter is trying to create the directory /global/scratch/julm/3d_experiments/ and crashing because the directory already exists. Moreover, only around 1 in 5 jobs crashes with this error.\nDo you know if I could somehow ignore this error? I don't think the fact that the directory exists should trigger an error for the user.\nOur cluster runs under OpenSUSE 42.2.", "body": "We have a cluster with ~20 GPUs that we often use to train multiple networks in parallel, and we use `tf.summary.Filewriter` to keep track of the networks' progress. However, some jobs are crashing when they attempt to create their `FileWriter`s with the following stack trace:\r\n\r\n```\r\n[...]\r\n  File \"/ubc/cs/research/tracking-raid/julm/eyescream/tensorflow/pose_estimation/linear_model.py\", line 141, in __init__\r\n    self.train_writer = tf.summary.FileWriter( os.path.join(summaries_dir, 'train' ))\r\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/summary/writer/writer.py\", line 308, in __init__\r\n    event_writer = EventFileWriter(logdir, max_queue, flush_secs)\r\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/summary/writer/event_file_writer.py\", line 69, in __init__\r\n    gfile.MakeDirs(self._logdir)\r\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/lib/io/file_io.py\", line 299, in recursive_create_dir\r\n    pywrap_tensorflow.RecursivelyCreateDir(compat.as_bytes(dirname), status)\r\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/contextlib.py\", line 24, in __exit__\r\n    self.gen.next()\r\n  File \"/ubc/cs/research/tracking-raid/julm/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/errors_impl.py\", line 469, in raise_exception_on_not_ok_status\r\n    pywrap_tensorflow.TF_GetCode(status))\r\ntensorflow.python.framework.errors_impl.AlreadyExistsError: /global/scratch/julm/3d_experiments\r\n```\r\n\r\nI am writing the `Filewriter`s' progress under `/global/scratch/julm/3d_experiments/`, and creating multiple subdirectories depending on the hyperparameters that each network is using.\r\n\r\nThe error seems to suggest that the `FileWriter` is trying to create the directory `/global/scratch/julm/3d_experiments/` and crashing because the directory already exists. Moreover, only around 1 in 5 jobs crashes with this error.\r\n\r\nDo you know if I could somehow ignore this error? I don't think the fact that the directory exists should trigger an error for the user.\r\n\r\nOur cluster runs under OpenSUSE 42.2."}
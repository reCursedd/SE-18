{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/335605223", "html_url": "https://github.com/tensorflow/tensorflow/issues/13537#issuecomment-335605223", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13537", "id": 335605223, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTYwNTIyMw==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-10T20:56:10Z", "updated_at": "2017-10-10T20:56:10Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">You can only assign something to a Variable object.  So if you want an\ninitial state it has to be a tuple of Variables (and cell.zero_state()\ndoesn't return Variables - only Tensors).  You can then assign to those in\nyour update.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Tue, Oct 10, 2017 at 11:54 AM, Greg Peatfield ***@***.***&gt; wrote:\n I have been working on this for a while now. I was not certain what needs\n to replace \"#variable_tuple,\" in the map_structure but have a better guess:\n\n     output, self.new_state = tf.nn.dynamic_rnn(self.cell_L1,hidden_input,time_major=True,\\\n             initial_state=self.state,  dtype=tf.float32, swap_memory=True)\n\n     update = tf.contrib.framework.nest.map_structure(\n             lambda state, var: tf.assign(var, state),\n             self.new_state,\n             self.state,\n             check_types=False)\n\n     with tf.control_dependencies([update]):\n         outputs = tf.identity(output)\n\n The problem now is I get a different error which doesn't really make sense\n to me as Tensors should allow an assign() should it?\n\n File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/nest.py\", line 325, in map_structure\n structure[0], [func(*x) for x in entries])\n File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/nest.py\", line 325, in &lt;listcomp&gt;\n structure[0], [func(*x) for x in entries])\n File \"/home/greg/DFP_trading_sequence/test6/Network_sequence_new1.py\", line 143, in &lt;lambda&gt;\n lambda state, var: tf.assign(var,state) ,\n File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/state_ops.py\", line 272, in assign\n return ref.assign(value)\n AttributeError: 'Tensor' object has no attribute 'assign'\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"263573460\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/13537\" href=\"https://github.com/tensorflow/tensorflow/issues/13537#issuecomment-335571606\">#13537 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABtimzk-JUX2tqhVVWOTG-cVWMkblG8Dks5sq71bgaJpZM4PxCmq\">https://github.com/notifications/unsubscribe-auth/ABtimzk-JUX2tqhVVWOTG-cVWMkblG8Dks5sq71bgaJpZM4PxCmq</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "You can only assign something to a Variable object.  So if you want an\ninitial state it has to be a tuple of Variables (and cell.zero_state()\ndoesn't return Variables - only Tensors).  You can then assign to those in\nyour update.\n\u2026\nOn Tue, Oct 10, 2017 at 11:54 AM, Greg Peatfield ***@***.***> wrote:\n I have been working on this for a while now. I was not certain what needs\n to replace \"#variable_tuple,\" in the map_structure but have a better guess:\n\n     output, self.new_state = tf.nn.dynamic_rnn(self.cell_L1,hidden_input,time_major=True,\\\n             initial_state=self.state,  dtype=tf.float32, swap_memory=True)\n\n     update = tf.contrib.framework.nest.map_structure(\n             lambda state, var: tf.assign(var, state),\n             self.new_state,\n             self.state,\n             check_types=False)\n\n     with tf.control_dependencies([update]):\n         outputs = tf.identity(output)\n\n The problem now is I get a different error which doesn't really make sense\n to me as Tensors should allow an assign() should it?\n\n File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/nest.py\", line 325, in map_structure\n structure[0], [func(*x) for x in entries])\n File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/nest.py\", line 325, in <listcomp>\n structure[0], [func(*x) for x in entries])\n File \"/home/greg/DFP_trading_sequence/test6/Network_sequence_new1.py\", line 143, in <lambda>\n lambda state, var: tf.assign(var,state) ,\n File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/state_ops.py\", line 272, in assign\n return ref.assign(value)\n AttributeError: 'Tensor' object has no attribute 'assign'\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#13537 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABtimzk-JUX2tqhVVWOTG-cVWMkblG8Dks5sq71bgaJpZM4PxCmq>\n .", "body": "You can only assign something to a Variable object.  So if you want an\ninitial state it has to be a tuple of Variables (and cell.zero_state()\ndoesn't return Variables - only Tensors).  You can then assign to those in\nyour update.\n\nOn Tue, Oct 10, 2017 at 11:54 AM, Greg Peatfield <notifications@github.com>\nwrote:\n\n> I have been working on this for a while now. I was not certain what needs\n> to replace \"#variable_tuple,\" in the map_structure but have a better guess:\n>\n>     output, self.new_state = tf.nn.dynamic_rnn(self.cell_L1,hidden_input,time_major=True,\\\n>             initial_state=self.state,  dtype=tf.float32, swap_memory=True)\n>\n>     update = tf.contrib.framework.nest.map_structure(\n>             lambda state, var: tf.assign(var, state),\n>             self.new_state,\n>             self.state,\n>             check_types=False)\n>\n>     with tf.control_dependencies([update]):\n>         outputs = tf.identity(output)\n>\n> The problem now is I get a different error which doesn't really make sense\n> to me as Tensors should allow an assign() should it?\n>\n> File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/nest.py\", line 325, in map_structure\n> structure[0], [func(*x) for x in entries])\n> File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/nest.py\", line 325, in <listcomp>\n> structure[0], [func(*x) for x in entries])\n> File \"/home/greg/DFP_trading_sequence/test6/Network_sequence_new1.py\", line 143, in <lambda>\n> lambda state, var: tf.assign(var,state) ,\n> File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/state_ops.py\", line 272, in assign\n> return ref.assign(value)\n> AttributeError: 'Tensor' object has no attribute 'assign'\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/13537#issuecomment-335571606>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtimzk-JUX2tqhVVWOTG-cVWMkblG8Dks5sq71bgaJpZM4PxCmq>\n> .\n>\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/259488795", "html_url": "https://github.com/tensorflow/tensorflow/issues/5480#issuecomment-259488795", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5480", "id": 259488795, "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTQ4ODc5NQ==", "user": {"login": "civilman628", "id": 8059551, "node_id": "MDQ6VXNlcjgwNTk1NTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8059551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/civilman628", "html_url": "https://github.com/civilman628", "followers_url": "https://api.github.com/users/civilman628/followers", "following_url": "https://api.github.com/users/civilman628/following{/other_user}", "gists_url": "https://api.github.com/users/civilman628/gists{/gist_id}", "starred_url": "https://api.github.com/users/civilman628/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/civilman628/subscriptions", "organizations_url": "https://api.github.com/users/civilman628/orgs", "repos_url": "https://api.github.com/users/civilman628/repos", "events_url": "https://api.github.com/users/civilman628/events{/privacy}", "received_events_url": "https://api.github.com/users/civilman628/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-09T18:32:53Z", "updated_at": "2016-11-09T18:42:21Z", "author_association": "NONE", "body_html": "<p>Now i use the following code to let memory usage growth on demand but not allocate all at once.</p>\n<p><strong>config=tf.ConfigProto()<br>\nconfig.gpu_options.allow_growth=True<br>\nsess=tf.Session(config=config)</strong></p>\n<p>I run one app only and assign current app to use GPU:3 (the 4th one) by the code: <strong>tf.device('/gpu:3'):</strong></p>\n<p>However, when i monitor the memory usage by \"Nvidia X Server Settings\" tool. GPU:3 uses 111M memory, which should be. But both GPU:1 and GPU:2 uses 111M as well, which mean even if I do not assign my app to use these GPUs and set config <strong>growth=True</strong>. In fact GPU:0 use 111M as well for my app.</p>\n<p>So this means when we set GPU memory config to growth mode, it growths on all devices at same time, but not growth one after another, though I assigned which GPU to use. As i have 4 GPUs and i only run one app on one GPU, Tenorflow waste 3 copies of GPU memory on other devices.</p>\n<p>This is not a good design, totally.</p>", "body_text": "Now i use the following code to let memory usage growth on demand but not allocate all at once.\nconfig=tf.ConfigProto()\nconfig.gpu_options.allow_growth=True\nsess=tf.Session(config=config)\nI run one app only and assign current app to use GPU:3 (the 4th one) by the code: tf.device('/gpu:3'):\nHowever, when i monitor the memory usage by \"Nvidia X Server Settings\" tool. GPU:3 uses 111M memory, which should be. But both GPU:1 and GPU:2 uses 111M as well, which mean even if I do not assign my app to use these GPUs and set config growth=True. In fact GPU:0 use 111M as well for my app.\nSo this means when we set GPU memory config to growth mode, it growths on all devices at same time, but not growth one after another, though I assigned which GPU to use. As i have 4 GPUs and i only run one app on one GPU, Tenorflow waste 3 copies of GPU memory on other devices.\nThis is not a good design, totally.", "body": "Now i use the following code to let memory usage growth on demand but not allocate all at once.\n\n**config=tf.ConfigProto()\nconfig.gpu_options.allow_growth=True\nsess=tf.Session(config=config)**\n\nI run one app only and assign current app to use GPU:3 (the 4th one) by the code: **tf.device('/gpu:3'):**\n\nHowever, when i monitor the memory usage by \"Nvidia X Server Settings\" tool. GPU:3 uses 111M memory, which should be. But both GPU:1 and GPU:2 uses 111M as well, which mean even if I do not assign my app to use these GPUs and set config **growth=True**. In fact GPU:0 use 111M as well for my app.\n\nSo this means when we set GPU memory config to growth mode, it growths on all devices at same time, but not growth one after another, though I assigned which GPU to use. As i have 4 GPUs and i only run one app on one GPU, Tenorflow waste 3 copies of GPU memory on other devices.\n\nThis is not a good design, totally.  \n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12755", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12755/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12755/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12755/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12755", "id": 254746310, "node_id": "MDU6SXNzdWUyNTQ3NDYzMTA=", "number": 12755, "title": "build_default_serving_input_fn() uses a name that is not a valid variable scope. ", "user": {"login": "slacy", "id": 157238, "node_id": "MDQ6VXNlcjE1NzIzOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/157238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slacy", "html_url": "https://github.com/slacy", "followers_url": "https://api.github.com/users/slacy/followers", "following_url": "https://api.github.com/users/slacy/following{/other_user}", "gists_url": "https://api.github.com/users/slacy/gists{/gist_id}", "starred_url": "https://api.github.com/users/slacy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slacy/subscriptions", "organizations_url": "https://api.github.com/users/slacy/orgs", "repos_url": "https://api.github.com/users/slacy/repos", "events_url": "https://api.github.com/users/slacy/events{/privacy}", "received_events_url": "https://api.github.com/users/slacy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-01T20:39:59Z", "updated_at": "2017-09-27T00:00:15Z", "closed_at": "2017-09-27T00:00:15Z", "author_association": "NONE", "body_html": "<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: NO</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 14.04 LTS</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: SOURCE (pip install tensorflow)</li>\n<li><strong>TensorFlow version (use command below)</strong>: ('v1.3.0-rc2-20-g0787eee', '1.3.0')</li>\n<li><strong>Python version</strong>: Python 2.7.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: N/A</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>See this short example:</p>\n<p>$ python -c \"import tensorflow as tf<br>\nf = {'feature': tf.placeholder(name='feature', shape=[32], dtype=tf.float32) }<br>\nserving_input = tf.contrib.learn.utils.input_fn_utils.build_default_serving_input_fn(f)<br>\nserving_input()\"</p>\n<p>Traceback (most recent call last):<br>\nFile \"\", line 4, in <br>\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/utils/input_fn_utils.py\", line 112, in input_fn<br>\nname=t.name)<br>\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 1548, in placeholder<br>\nreturn gen_array_ops._placeholder(dtype=dtype, shape=shape, name=name)<br>\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 2094, in _placeholder<br>\nname=name)<br>\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 374, in apply_op<br>\nwith g.as_default(), ops.name_scope(name) as scope:<br>\nFile \"/usr/lib/python2.7/contextlib.py\", line 17, in <strong>enter</strong><br>\nreturn self.gen.next()<br>\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 4522, in name_scope<br>\nwith g.as_default(), g.name_scope(n) as scope:<br>\nFile \"/usr/lib/python2.7/contextlib.py\", line 17, in <strong>enter</strong><br>\nreturn self.gen.next()<br>\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3172, in name_scope<br>\nraise ValueError(\"'%s' is not a valid scope name\" % name)<br>\nValueError: 'feature:0' is not a valid scope name</p>\n<p>The issue is that in input_fn_utils.py here: <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/learn/python/learn/utils/input_fn_utils.py#L112\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/learn/python/learn/utils/input_fn_utils.py#L112</a></p>\n<p>The attribute \"t.name\" is passed to array_ops.placeholder(), and t.name will always have a \":N\" suffix, and \":\" is not a valid variable scope name, so this function fals.</p>\n<h3>Source code / logs</h3>\n<p>See above.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): NO\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 14.04 LTS\nTensorFlow installed from (source or binary): SOURCE (pip install tensorflow)\nTensorFlow version (use command below): ('v1.3.0-rc2-20-g0787eee', '1.3.0')\nPython version: Python 2.7.6\nBazel version (if compiling from source): N/A\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce:\n\nDescribe the problem\nSee this short example:\n$ python -c \"import tensorflow as tf\nf = {'feature': tf.placeholder(name='feature', shape=[32], dtype=tf.float32) }\nserving_input = tf.contrib.learn.utils.input_fn_utils.build_default_serving_input_fn(f)\nserving_input()\"\nTraceback (most recent call last):\nFile \"\", line 4, in \nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/utils/input_fn_utils.py\", line 112, in input_fn\nname=t.name)\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 1548, in placeholder\nreturn gen_array_ops._placeholder(dtype=dtype, shape=shape, name=name)\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 2094, in _placeholder\nname=name)\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 374, in apply_op\nwith g.as_default(), ops.name_scope(name) as scope:\nFile \"/usr/lib/python2.7/contextlib.py\", line 17, in enter\nreturn self.gen.next()\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 4522, in name_scope\nwith g.as_default(), g.name_scope(n) as scope:\nFile \"/usr/lib/python2.7/contextlib.py\", line 17, in enter\nreturn self.gen.next()\nFile \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3172, in name_scope\nraise ValueError(\"'%s' is not a valid scope name\" % name)\nValueError: 'feature:0' is not a valid scope name\nThe issue is that in input_fn_utils.py here: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/learn/python/learn/utils/input_fn_utils.py#L112\nThe attribute \"t.name\" is passed to array_ops.placeholder(), and t.name will always have a \":N\" suffix, and \":\" is not a valid variable scope name, so this function fals.\nSource code / logs\nSee above.", "body": "------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: NO\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 14.04 LTS \r\n- **TensorFlow installed from (source or binary)**: SOURCE (pip install tensorflow) \r\n- **TensorFlow version (use command below)**: ('v1.3.0-rc2-20-g0787eee', '1.3.0')\r\n- **Python version**: Python 2.7.6\r\n- **Bazel version (if compiling from source)**: N/A \r\n- **CUDA/cuDNN version**: N/A \r\n- **GPU model and memory**: N/A \r\n- **Exact command to reproduce**:\r\n\r\n\r\n### Describe the problem\r\n\r\nSee this short example:\r\n\r\n$ python -c \"import tensorflow as tf \r\nf = {'feature': tf.placeholder(name='feature', shape=[32], dtype=tf.float32) } \r\nserving_input = tf.contrib.learn.utils.input_fn_utils.build_default_serving_input_fn(f)\r\nserving_input()\"\r\n\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 4, in <module>\r\n  File \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/utils/input_fn_utils.py\", line 112, in input_fn\r\n    name=t.name)\r\n  File \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 1548, in placeholder\r\n    return gen_array_ops._placeholder(dtype=dtype, shape=shape, name=name)\r\n  File \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 2094, in _placeholder\r\n    name=name)\r\n  File \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 374, in apply_op\r\n    with g.as_default(), ops.name_scope(name) as scope:\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 4522, in name_scope\r\n    with g.as_default(), g.name_scope(n) as scope:\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/usr/local/google/home/slacy/src/tf_clean/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3172, in name_scope\r\n    raise ValueError(\"'%s' is not a valid scope name\" % name)\r\nValueError: 'feature:0' is not a valid scope name\r\n\r\nThe issue is that in input_fn_utils.py here: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/learn/python/learn/utils/input_fn_utils.py#L112\r\n\r\nThe attribute \"t.name\" is passed to array_ops.placeholder(), and t.name will always have a \":N\" suffix, and \":\" is not a valid variable scope name, so this function fals. \r\n\r\n### Source code / logs\r\n\r\nSee above. "}
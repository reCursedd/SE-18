{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4882", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4882/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4882/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4882/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4882", "id": 182112398, "node_id": "MDU6SXNzdWUxODIxMTIzOTg=", "number": 4882, "title": "S_IREAD and S_IWRITE errors from gif_archive in CentOS 6.8 Build", "user": {"login": "frenchwr", "id": 12451283, "node_id": "MDQ6VXNlcjEyNDUxMjgz", "avatar_url": "https://avatars1.githubusercontent.com/u/12451283?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frenchwr", "html_url": "https://github.com/frenchwr", "followers_url": "https://api.github.com/users/frenchwr/followers", "following_url": "https://api.github.com/users/frenchwr/following{/other_user}", "gists_url": "https://api.github.com/users/frenchwr/gists{/gist_id}", "starred_url": "https://api.github.com/users/frenchwr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frenchwr/subscriptions", "organizations_url": "https://api.github.com/users/frenchwr/orgs", "repos_url": "https://api.github.com/users/frenchwr/repos", "events_url": "https://api.github.com/users/frenchwr/events{/privacy}", "received_events_url": "https://api.github.com/users/frenchwr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2016-10-10T20:51:50Z", "updated_at": "2017-01-23T17:33:24Z", "closed_at": "2016-10-17T16:49:39Z", "author_association": "NONE", "body_html": "<p>Hi there,</p>\n<p>I've been attempting off and on for the last 1-2 weeks to get Tensorflow to build on CentOS 6.8. I've spent a lot of time reading through old issues and piecing/hacking together suggestions from developers and other users on how to configure the build. I'm using a hand-built version of GCC (v. 4.9.3) in a non-default location with the system version of binutils (more info below).</p>\n<p>I've managed to get the tutorial_trainers_example to build and run successfully, but I'm now running into trouble when attempting to build the pip wheel (see below). It looks like there may be some missing header files.</p>\n<h3>Relevant Threads</h3>\n<p>The most helpful threads I've found during this process have been the following:</p>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116236573\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/110\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/110/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/110\">#110</a> (especially comments from <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5150559\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rdipietro\">@rdipietro</a>)<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"125622945\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/bazelbuild/bazel/issues/760\" data-hovercard-type=\"issue\" data-hovercard-url=\"/bazelbuild/bazel/issues/760/hovercard\" href=\"https://github.com/bazelbuild/bazel/issues/760\">bazelbuild/bazel#760</a> (thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3721087\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/damienmg\">@damienmg</a>)</p>\n<p>The only mention I can find of the specific error (granted, for a completely different platform) is in this recent Stackoverflow thread:</p>\n<p><a href=\"http://stackoverflow.com/questions/39855672/tensorflow-how-to-compile-libtensorflow-cc-so-for-android\" rel=\"nofollow\">http://stackoverflow.com/questions/39855672/tensorflow-how-to-compile-libtensorflow-cc-so-for-android</a></p>\n<p>The fact that this is a recent thread makes me think that perhaps there was some sort of error that was introduced into the build config in the last few weeks/months.</p>\n<h3>Environment info</h3>\n<p>Operating System:</p>\n<pre><code>$ lsb_release -a\nLSB Version:    :base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch\nDistributor ID: CentOS\nDescription:    CentOS release 6.8 (Final)\nRelease:    6.8\nCodename:   Final\n$ uname -a\nLinux vmp1250 2.6.32-642.1.1.el6.x86_64 #1 SMP Tue May 31 21:57:07 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<pre><code>$ ls -lh /gpfs22/local/centos6/cuda-7.5/lib/libcud*\n-rw-r--r--. 1 root root 185K Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudadevrt.a\nlrwxrwxrwx. 1 root root   16 Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart.so -&gt; libcudart.so.7.5\nlrwxrwxrwx. 1 root root   19 Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart.so.7.5 -&gt; libcudart.so.7.5.18\n-rwxr-xr-x. 1 root root 305K Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart.so.7.5.18\n-rw-r--r--. 1 root root 545K Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart_static.a\n</code></pre>\n<pre><code>$ ls -lh /gpfs22/local/centos6/cudnn-7.5-v5/lib64/\ntotal 227M\nlrwxrwxrwx. 1 1000 1000  13 May 25 10:38 libcudnn.so -&gt; libcudnn.so.5\nlrwxrwxrwx. 1 1000 1000  17 May 25 10:38 libcudnn.so.5 -&gt; libcudnn.so.5.0.5\n-rwxrwxr-x. 1 1000 1000 58M Apr 22 19:15 libcudnn.so.5.0.5\n-rw-rw-r--. 1 1000 1000 57M Apr 22 19:15 libcudnn_static.a\n</code></pre>\n<p>If installed from source, provide</p>\n<p>The commit hash (<code>git rev-parse HEAD</code>):</p>\n<ul>\n<li>Most recent (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/df871edcff2faf643975b9863100ed41b6da9c3f/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/df871edcff2faf643975b9863100ed41b6da9c3f\"><tt>df871ed</tt></a>)</li>\n</ul>\n<p>The output of <code>bazel version</code>:</p>\n<pre><code>$ bazel version\nBuild label: 0.3.2- (@non-git)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Oct 7 20:15:17 2016 (1475871317)\nBuild timestamp: 1475871317\nBuild timestamp as int: 1475871317\n</code></pre>\n<h3>Custom Build Config for Bazel &amp; Tensorflow</h3>\n<p>For the bazel build:</p>\n<ul>\n<li>Modified <code>tools/cpp/CROSSTOOL</code> to point to C and C++ compilers in non-default locations</li>\n<li>Added an extra <code>linker_flag</code> line in <code>tools/cpp/CROSSTOOL</code></li>\n<li>Added a bunch of <code>cxx_builtin_include_directory</code> lines to point to all the appropriate header files within GCC 4.9.3 in <code>tools/cpp/CROSSTOOL</code></li>\n</ul>\n<p>For the Tensorflow build:</p>\n<ul>\n<li>Modified <code>third_party/gpus/crosstool/CROSSTOOL.tpl</code> to point to C++ compiler in custom location</li>\n<li>Added an extra <code>linker_flag</code> line to <code>third_party/gpus/crosstool/CROSSTOOL.tpl</code></li>\n<li>Updated <code>third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl</code> to point to the versions of NVCC and GCC that are in non-default locations</li>\n<li>Commented out the line <code>cmd = 'PATH=' + PREFIX_DIR + ' ' + cmd</code> in <code>third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl</code> (otherwise <code>as</code> cannot be found).</li>\n</ul>\n<p>I can provide the exact lines I used if you'd like. Just let me know.</p>\n<h3>Description of Problem</h3>\n<p>Environment setup (I realize some of this may be overkill):</p>\n<pre><code>$ export PATH=/gpfs22/local/centos6/swig/3.0.5/x86_64/gcc49/nonet/bin:/gpfs22/local/centos6/cuda-7.5/bin:/gpfs22/local/centos6/python2/anaconda2/bin:/gpfs21/scratch/frenchwr/tensorflow/bazel-0.3.2/output:/gpfs22/local/centos6/gcc/4.9.3/x86_64/bin:/gpfs22/local/centos6/java/1.8.0/bin:/usr/local/git/latest/x86_64/gcc46/nonet/bin:/usr/local/git/latest/x86_64/gcc46/nonet/libexec/git-core:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/local/git/latest/x86_64/gcc46/nonet/bin:/usr/local/git/latest/x86_64/gcc46/nonet/libexec/git-core:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/var/cfengine/bin:/var/cfengine/bin\n$ export LD_LIBRARY_PATH=/gpfs22/local/centos6/cudnn-7.5-v5/lib64:/gpfs22/local/centos6/swig/3.0.5/x86_64/gcc49/nonet/share/swig/3.0.5:/gpfs22/local/centos6/cuda-7.5/lib:/gpfs22/local/centos6/cuda-7.5/lib64:/gpfs22/local/centos6/java/1.8.0/lib:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64:/gpfs22/local/centos6/java/1.8.0/lib/:/gpfs22/local/centos6/python2/anaconda2/lib\n$ export JAVA_HOME=/gpfs22/local/centos6/java/1.8.0\n$ export JAVA_ROOT=/gpfs22/local/centos6/java/1.8.0\n$ export CXX=/gpfs22/local/centos6/gcc/4.9.3/x86_64/bin/g++\n$ export CC=/gpfs22/local/centos6/gcc/4.9.3/x86_64/bin/gcc\n$ export GCC_ROOT=/gpfs22/local/centos6/gcc/4.9.3/x86_64\n$ export LDFLAGS=\"-L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib -L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib -L/gpfs22/local/centos6/cudnn-7.5-v5/lib64 -L/gpfs22/local/centos6/python2/anaconda2/lib\"\n$ export CXXFLAGS=\"-L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib -L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib -L/gpfs22/local/centos6/cudnn-7.5-v5/lib64 -L/gpfs22/local/centos6/python2/anaconda2/lib\"\n$ export CPLUS_INCLUDE_PATH=\"/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/include/c++/4.9.3/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/include/c++/4.9.3/x86_64-unknown-linux-gnu/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/:/gpfs22/local/centos6/cuda-7.5/include/:/gpfs22/local/centos6/cudnn-7.5-v5/include/\"\n$ export PYTHONPATH=/gpfs22/local/centos6/python2/anaconda2/lib/python2.7:$PYTHONPATH\n$ export PYTHON_ROOT=/gpfs22/local/centos6/python2/anaconda2\n$ export PYTHON27_INC=$PYTHON_ROOT/include/python2.7\n$ export CUDA_HOME=/gpfs22/local/centos6/cuda-7.5\n$ export SWIG_ROOT=/gpfs22/local/centos6/swig/3.0.5/x86_64/gcc49/nonet\n$ export NVVM_ROOT=/gpfs22/local/centos6/cuda-7.5/nvvm\n$ export LIBRARY_PATH=/gpfs22/local/centos6/cudnn-7.5-v5/lib64:$LIBRARY_PATH\n$ export CPATH=/gpfs22/local/centos6/cudnn-7.5-v5/include:$CPATH\n$ export CUDNN_ROOT=/gpfs22/local/centos6/cudnn-7.5-v5\n$ export SWIG_PATH=$(which swig)\n</code></pre>\n<p>Tensorflow Configuration:</p>\n<pre><code>$ $ ./configure\n/scratch/frenchwr/tensorflow/tensorflow-head /scratch/frenchwr/tensorflow/tensorflow-head\nPlease specify the location of python. [Default is /gpfs22/local/centos6/python2/anaconda2/bin/python]: \nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] N\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] N\nNo Hadoop File System support will be enabled for TensorFlow\nFound possible Python library paths:\n  /gpfs22/local/centos6/python2/anaconda2/lib/python2.7/site-packages\n  /gpfs22/local/centos6/python2/anaconda2/lib/python2.7\nPlease input the desired Python library path to use.  Default is [/gpfs22/local/centos6/python2/anaconda2/lib/python2.7/site-packages]\n\n/gpfs22/local/centos6/python2/anaconda2/lib/python2.7/site-packages\nDo you wish to build TensorFlow with GPU support? [y/N] y\nGPU support will be enabled for TensorFlow\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /gpfs22/local/centos6/gcc/4.9.3/x86_64/bin/gcc]: \nPlease specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: 7.5\nPlease specify the location where CUDA 7.5 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /gpfs22/local/centos6/cuda-7.5\nPlease specify the Cudnn version you want to use. [Leave empty to use system default]: 5.0.5\nPlease specify the location where cuDNN 5.0.5 library is installed. Refer to README.md for more details. [Default is /gpfs22/local/centos6/cuda-7.5]: /gpfs22/local/centos6/cudnn-7.5-v5\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: 5.2\nINFO: Starting clean (this may take a while). Consider using --expunge_async if the clean takes more than several minutes.\n.................\nINFO: All external dependencies fetched successfully.\nConfiguration finished\n</code></pre>\n<p>Tutorials Example Trainer Build:</p>\n<pre><code>bazel build -c opt --config=cuda --verbose_failures --subcommands //tensorflow/cc:tutorials_example_trainer\n</code></pre>\n<p>Tutorials Example Trainer Run:</p>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcurand.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcufft.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcudnn.so.5.0.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcublas.so.7.5 locally\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:951] Found device 0 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:02:00.0\nTotal memory: 12.00GiB\nFree memory: 11.87GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:972] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:982] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:02:00.0)\n000000/000001 lambda = 1.841570 x = [0.669396 0.742906] y = [3.493999 -0.669396]\n000000/000009 lambda = 1.841570 x = [0.669396 0.742906] y = [3.493999 -0.669396]\n...\n...\n</code></pre>\n<p>Pip Wheel Build (extra command line options suggested by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5150559\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rdipietro\">@rdipietro</a> in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116236573\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/110\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/110/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/110\">#110</a>):</p>\n<pre><code>$ bazel build -c opt --config=cuda --linkopt '-lrt' --copt=\"-DGPR_BACKWARDS_COMPATIBILITY_MODE\" --conlyopt=\"-std=c99\" //tensorflow/tools/pip_package:build_pip_package\n...\n...\nINFO: From Compiling external/protobuf/src/google/protobuf/compiler/cpp/cpp_message.cc:\nexternal/protobuf/src/google/protobuf/compiler/cpp/cpp_message.cc:376:8: warning: 'std::string google::protobuf::compiler::cpp::{anonymous}::MessageTypeProtoName(const google::protobuf::FieldDescriptor*)' defined but not used [-Wunused-function]\n string MessageTypeProtoName(const FieldDescriptor* field) {\n        ^\nERROR: /gpfs22/home/frenchwr/.cache/bazel/_bazel_frenchwr/4ceedd0aac0f37a9bc9063198121367a/external/gif_archive/BUILD:6:1: C++ compilation of rule '@gif_archive//:gif' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 37 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nexternal/gif_archive/egif_lib.c: In function 'EGifOpenFileName':\nexternal/gif_archive/egif_lib.c:62:6: error: 'S_IREAD' undeclared (first use in this function)\n      S_IREAD | S_IWRITE);\n      ^\nexternal/gif_archive/egif_lib.c:62:6: note: each undeclared identifier is reported only once for each function it appears in\nexternal/gif_archive/egif_lib.c:62:16: error: 'S_IWRITE' undeclared (first use in this function)\n      S_IREAD | S_IWRITE);\n                ^\nexternal/gif_archive/egif_lib.c: In function 'EGifOpenFileHandle':\nexternal/gif_archive/egif_lib.c:119:5: warning: implicit declaration of function 'fdopen' [-Wimplicit-function-declaration]\n     f = fdopen(FileHandle, \"wb\");    /* Make it into a stream: */\n     ^\nexternal/gif_archive/egif_lib.c:119:7: warning: assignment makes pointer from integer without a cast\n     f = fdopen(FileHandle, \"wb\");    /* Make it into a stream: */\n       ^\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 403.336s, Critical Path: 394.04s\n</code></pre>", "body_text": "Hi there,\nI've been attempting off and on for the last 1-2 weeks to get Tensorflow to build on CentOS 6.8. I've spent a lot of time reading through old issues and piecing/hacking together suggestions from developers and other users on how to configure the build. I'm using a hand-built version of GCC (v. 4.9.3) in a non-default location with the system version of binutils (more info below).\nI've managed to get the tutorial_trainers_example to build and run successfully, but I'm now running into trouble when attempting to build the pip wheel (see below). It looks like there may be some missing header files.\nRelevant Threads\nThe most helpful threads I've found during this process have been the following:\n#110 (especially comments from @rdipietro)\nbazelbuild/bazel#760 (thanks @damienmg)\nThe only mention I can find of the specific error (granted, for a completely different platform) is in this recent Stackoverflow thread:\nhttp://stackoverflow.com/questions/39855672/tensorflow-how-to-compile-libtensorflow-cc-so-for-android\nThe fact that this is a recent thread makes me think that perhaps there was some sort of error that was introduced into the build config in the last few weeks/months.\nEnvironment info\nOperating System:\n$ lsb_release -a\nLSB Version:    :base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch\nDistributor ID: CentOS\nDescription:    CentOS release 6.8 (Final)\nRelease:    6.8\nCodename:   Final\n$ uname -a\nLinux vmp1250 2.6.32-642.1.1.el6.x86_64 #1 SMP Tue May 31 21:57:07 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n$ ls -lh /gpfs22/local/centos6/cuda-7.5/lib/libcud*\n-rw-r--r--. 1 root root 185K Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudadevrt.a\nlrwxrwxrwx. 1 root root   16 Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx. 1 root root   19 Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x. 1 root root 305K Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart.so.7.5.18\n-rw-r--r--. 1 root root 545K Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart_static.a\n\n$ ls -lh /gpfs22/local/centos6/cudnn-7.5-v5/lib64/\ntotal 227M\nlrwxrwxrwx. 1 1000 1000  13 May 25 10:38 libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx. 1 1000 1000  17 May 25 10:38 libcudnn.so.5 -> libcudnn.so.5.0.5\n-rwxrwxr-x. 1 1000 1000 58M Apr 22 19:15 libcudnn.so.5.0.5\n-rw-rw-r--. 1 1000 1000 57M Apr 22 19:15 libcudnn_static.a\n\nIf installed from source, provide\nThe commit hash (git rev-parse HEAD):\n\nMost recent (df871ed)\n\nThe output of bazel version:\n$ bazel version\nBuild label: 0.3.2- (@non-git)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Oct 7 20:15:17 2016 (1475871317)\nBuild timestamp: 1475871317\nBuild timestamp as int: 1475871317\n\nCustom Build Config for Bazel & Tensorflow\nFor the bazel build:\n\nModified tools/cpp/CROSSTOOL to point to C and C++ compilers in non-default locations\nAdded an extra linker_flag line in tools/cpp/CROSSTOOL\nAdded a bunch of cxx_builtin_include_directory lines to point to all the appropriate header files within GCC 4.9.3 in tools/cpp/CROSSTOOL\n\nFor the Tensorflow build:\n\nModified third_party/gpus/crosstool/CROSSTOOL.tpl to point to C++ compiler in custom location\nAdded an extra linker_flag line to third_party/gpus/crosstool/CROSSTOOL.tpl\nUpdated third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl to point to the versions of NVCC and GCC that are in non-default locations\nCommented out the line cmd = 'PATH=' + PREFIX_DIR + ' ' + cmd in third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl (otherwise as cannot be found).\n\nI can provide the exact lines I used if you'd like. Just let me know.\nDescription of Problem\nEnvironment setup (I realize some of this may be overkill):\n$ export PATH=/gpfs22/local/centos6/swig/3.0.5/x86_64/gcc49/nonet/bin:/gpfs22/local/centos6/cuda-7.5/bin:/gpfs22/local/centos6/python2/anaconda2/bin:/gpfs21/scratch/frenchwr/tensorflow/bazel-0.3.2/output:/gpfs22/local/centos6/gcc/4.9.3/x86_64/bin:/gpfs22/local/centos6/java/1.8.0/bin:/usr/local/git/latest/x86_64/gcc46/nonet/bin:/usr/local/git/latest/x86_64/gcc46/nonet/libexec/git-core:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/local/git/latest/x86_64/gcc46/nonet/bin:/usr/local/git/latest/x86_64/gcc46/nonet/libexec/git-core:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/var/cfengine/bin:/var/cfengine/bin\n$ export LD_LIBRARY_PATH=/gpfs22/local/centos6/cudnn-7.5-v5/lib64:/gpfs22/local/centos6/swig/3.0.5/x86_64/gcc49/nonet/share/swig/3.0.5:/gpfs22/local/centos6/cuda-7.5/lib:/gpfs22/local/centos6/cuda-7.5/lib64:/gpfs22/local/centos6/java/1.8.0/lib:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64:/gpfs22/local/centos6/java/1.8.0/lib/:/gpfs22/local/centos6/python2/anaconda2/lib\n$ export JAVA_HOME=/gpfs22/local/centos6/java/1.8.0\n$ export JAVA_ROOT=/gpfs22/local/centos6/java/1.8.0\n$ export CXX=/gpfs22/local/centos6/gcc/4.9.3/x86_64/bin/g++\n$ export CC=/gpfs22/local/centos6/gcc/4.9.3/x86_64/bin/gcc\n$ export GCC_ROOT=/gpfs22/local/centos6/gcc/4.9.3/x86_64\n$ export LDFLAGS=\"-L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib -L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib -L/gpfs22/local/centos6/cudnn-7.5-v5/lib64 -L/gpfs22/local/centos6/python2/anaconda2/lib\"\n$ export CXXFLAGS=\"-L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib -L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib -L/gpfs22/local/centos6/cudnn-7.5-v5/lib64 -L/gpfs22/local/centos6/python2/anaconda2/lib\"\n$ export CPLUS_INCLUDE_PATH=\"/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/include/c++/4.9.3/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/include/c++/4.9.3/x86_64-unknown-linux-gnu/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/:/gpfs22/local/centos6/cuda-7.5/include/:/gpfs22/local/centos6/cudnn-7.5-v5/include/\"\n$ export PYTHONPATH=/gpfs22/local/centos6/python2/anaconda2/lib/python2.7:$PYTHONPATH\n$ export PYTHON_ROOT=/gpfs22/local/centos6/python2/anaconda2\n$ export PYTHON27_INC=$PYTHON_ROOT/include/python2.7\n$ export CUDA_HOME=/gpfs22/local/centos6/cuda-7.5\n$ export SWIG_ROOT=/gpfs22/local/centos6/swig/3.0.5/x86_64/gcc49/nonet\n$ export NVVM_ROOT=/gpfs22/local/centos6/cuda-7.5/nvvm\n$ export LIBRARY_PATH=/gpfs22/local/centos6/cudnn-7.5-v5/lib64:$LIBRARY_PATH\n$ export CPATH=/gpfs22/local/centos6/cudnn-7.5-v5/include:$CPATH\n$ export CUDNN_ROOT=/gpfs22/local/centos6/cudnn-7.5-v5\n$ export SWIG_PATH=$(which swig)\n\nTensorflow Configuration:\n$ $ ./configure\n/scratch/frenchwr/tensorflow/tensorflow-head /scratch/frenchwr/tensorflow/tensorflow-head\nPlease specify the location of python. [Default is /gpfs22/local/centos6/python2/anaconda2/bin/python]: \nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] N\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] N\nNo Hadoop File System support will be enabled for TensorFlow\nFound possible Python library paths:\n  /gpfs22/local/centos6/python2/anaconda2/lib/python2.7/site-packages\n  /gpfs22/local/centos6/python2/anaconda2/lib/python2.7\nPlease input the desired Python library path to use.  Default is [/gpfs22/local/centos6/python2/anaconda2/lib/python2.7/site-packages]\n\n/gpfs22/local/centos6/python2/anaconda2/lib/python2.7/site-packages\nDo you wish to build TensorFlow with GPU support? [y/N] y\nGPU support will be enabled for TensorFlow\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /gpfs22/local/centos6/gcc/4.9.3/x86_64/bin/gcc]: \nPlease specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: 7.5\nPlease specify the location where CUDA 7.5 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /gpfs22/local/centos6/cuda-7.5\nPlease specify the Cudnn version you want to use. [Leave empty to use system default]: 5.0.5\nPlease specify the location where cuDNN 5.0.5 library is installed. Refer to README.md for more details. [Default is /gpfs22/local/centos6/cuda-7.5]: /gpfs22/local/centos6/cudnn-7.5-v5\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: 5.2\nINFO: Starting clean (this may take a while). Consider using --expunge_async if the clean takes more than several minutes.\n.................\nINFO: All external dependencies fetched successfully.\nConfiguration finished\n\nTutorials Example Trainer Build:\nbazel build -c opt --config=cuda --verbose_failures --subcommands //tensorflow/cc:tutorials_example_trainer\n\nTutorials Example Trainer Run:\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcurand.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcufft.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcudnn.so.5.0.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcublas.so.7.5 locally\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:951] Found device 0 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:02:00.0\nTotal memory: 12.00GiB\nFree memory: 11.87GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:972] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:982] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:02:00.0)\n000000/000001 lambda = 1.841570 x = [0.669396 0.742906] y = [3.493999 -0.669396]\n000000/000009 lambda = 1.841570 x = [0.669396 0.742906] y = [3.493999 -0.669396]\n...\n...\n\nPip Wheel Build (extra command line options suggested by @rdipietro in #110):\n$ bazel build -c opt --config=cuda --linkopt '-lrt' --copt=\"-DGPR_BACKWARDS_COMPATIBILITY_MODE\" --conlyopt=\"-std=c99\" //tensorflow/tools/pip_package:build_pip_package\n...\n...\nINFO: From Compiling external/protobuf/src/google/protobuf/compiler/cpp/cpp_message.cc:\nexternal/protobuf/src/google/protobuf/compiler/cpp/cpp_message.cc:376:8: warning: 'std::string google::protobuf::compiler::cpp::{anonymous}::MessageTypeProtoName(const google::protobuf::FieldDescriptor*)' defined but not used [-Wunused-function]\n string MessageTypeProtoName(const FieldDescriptor* field) {\n        ^\nERROR: /gpfs22/home/frenchwr/.cache/bazel/_bazel_frenchwr/4ceedd0aac0f37a9bc9063198121367a/external/gif_archive/BUILD:6:1: C++ compilation of rule '@gif_archive//:gif' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 37 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nexternal/gif_archive/egif_lib.c: In function 'EGifOpenFileName':\nexternal/gif_archive/egif_lib.c:62:6: error: 'S_IREAD' undeclared (first use in this function)\n      S_IREAD | S_IWRITE);\n      ^\nexternal/gif_archive/egif_lib.c:62:6: note: each undeclared identifier is reported only once for each function it appears in\nexternal/gif_archive/egif_lib.c:62:16: error: 'S_IWRITE' undeclared (first use in this function)\n      S_IREAD | S_IWRITE);\n                ^\nexternal/gif_archive/egif_lib.c: In function 'EGifOpenFileHandle':\nexternal/gif_archive/egif_lib.c:119:5: warning: implicit declaration of function 'fdopen' [-Wimplicit-function-declaration]\n     f = fdopen(FileHandle, \"wb\");    /* Make it into a stream: */\n     ^\nexternal/gif_archive/egif_lib.c:119:7: warning: assignment makes pointer from integer without a cast\n     f = fdopen(FileHandle, \"wb\");    /* Make it into a stream: */\n       ^\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 403.336s, Critical Path: 394.04s", "body": "Hi there,\n\nI've been attempting off and on for the last 1-2 weeks to get Tensorflow to build on CentOS 6.8. I've spent a lot of time reading through old issues and piecing/hacking together suggestions from developers and other users on how to configure the build. I'm using a hand-built version of GCC (v. 4.9.3) in a non-default location with the system version of binutils (more info below). \n\nI've managed to get the tutorial_trainers_example to build and run successfully, but I'm now running into trouble when attempting to build the pip wheel (see below). It looks like there may be some missing header files.\n### Relevant Threads\n\nThe most helpful threads I've found during this process have been the following:\n\nhttps://github.com/tensorflow/tensorflow/issues/110 (especially comments from @rdipietro)\nhttps://github.com/bazelbuild/bazel/issues/760 (thanks @damienmg)\n\nThe only mention I can find of the specific error (granted, for a completely different platform) is in this recent Stackoverflow thread:\n\nhttp://stackoverflow.com/questions/39855672/tensorflow-how-to-compile-libtensorflow-cc-so-for-android\n\nThe fact that this is a recent thread makes me think that perhaps there was some sort of error that was introduced into the build config in the last few weeks/months.\n### Environment info\n\nOperating System:\n\n```\n$ lsb_release -a\nLSB Version:    :base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch\nDistributor ID: CentOS\nDescription:    CentOS release 6.8 (Final)\nRelease:    6.8\nCodename:   Final\n$ uname -a\nLinux vmp1250 2.6.32-642.1.1.el6.x86_64 #1 SMP Tue May 31 21:57:07 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n```\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n```\n$ ls -lh /gpfs22/local/centos6/cuda-7.5/lib/libcud*\n-rw-r--r--. 1 root root 185K Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudadevrt.a\nlrwxrwxrwx. 1 root root   16 Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx. 1 root root   19 Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x. 1 root root 305K Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart.so.7.5.18\n-rw-r--r--. 1 root root 545K Sep 17  2015 /gpfs22/local/centos6/cuda-7.5/lib/libcudart_static.a\n```\n\n```\n$ ls -lh /gpfs22/local/centos6/cudnn-7.5-v5/lib64/\ntotal 227M\nlrwxrwxrwx. 1 1000 1000  13 May 25 10:38 libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx. 1 1000 1000  17 May 25 10:38 libcudnn.so.5 -> libcudnn.so.5.0.5\n-rwxrwxr-x. 1 1000 1000 58M Apr 22 19:15 libcudnn.so.5.0.5\n-rw-rw-r--. 1 1000 1000 57M Apr 22 19:15 libcudnn_static.a\n```\n\nIf installed from source, provide \n\nThe commit hash (`git rev-parse HEAD`):\n- Most recent (df871edcff2faf643975b9863100ed41b6da9c3f)\n\nThe output of `bazel version`:\n\n```\n$ bazel version\nBuild label: 0.3.2- (@non-git)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Oct 7 20:15:17 2016 (1475871317)\nBuild timestamp: 1475871317\nBuild timestamp as int: 1475871317\n```\n### Custom Build Config for Bazel & Tensorflow\n\nFor the bazel build:\n- Modified `tools/cpp/CROSSTOOL` to point to C and C++ compilers in non-default locations \n- Added an extra `linker_flag` line in `tools/cpp/CROSSTOOL`\n- Added a bunch of `cxx_builtin_include_directory` lines to point to all the appropriate header files within GCC 4.9.3 in `tools/cpp/CROSSTOOL` \n\nFor the Tensorflow build:\n- Modified `third_party/gpus/crosstool/CROSSTOOL.tpl` to point to C++ compiler in custom location \n- Added an extra `linker_flag` line to `third_party/gpus/crosstool/CROSSTOOL.tpl` \n- Updated `third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl` to point to the versions of NVCC and GCC that are in non-default locations \n- Commented out the line `cmd = 'PATH=' + PREFIX_DIR + ' ' + cmd` in `third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl` (otherwise `as` cannot be found). \n\nI can provide the exact lines I used if you'd like. Just let me know. \n### Description of Problem\n\nEnvironment setup (I realize some of this may be overkill):\n\n```\n$ export PATH=/gpfs22/local/centos6/swig/3.0.5/x86_64/gcc49/nonet/bin:/gpfs22/local/centos6/cuda-7.5/bin:/gpfs22/local/centos6/python2/anaconda2/bin:/gpfs21/scratch/frenchwr/tensorflow/bazel-0.3.2/output:/gpfs22/local/centos6/gcc/4.9.3/x86_64/bin:/gpfs22/local/centos6/java/1.8.0/bin:/usr/local/git/latest/x86_64/gcc46/nonet/bin:/usr/local/git/latest/x86_64/gcc46/nonet/libexec/git-core:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/local/git/latest/x86_64/gcc46/nonet/bin:/usr/local/git/latest/x86_64/gcc46/nonet/libexec/git-core:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/scheduler/slurm/sbin:/usr/scheduler/slurm/bin:/usr/lpp/mmfs/bin:/usr/local/bin:/usr/local/common/bin:/usr/bin:/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/var/cfengine/bin:/var/cfengine/bin\n$ export LD_LIBRARY_PATH=/gpfs22/local/centos6/cudnn-7.5-v5/lib64:/gpfs22/local/centos6/swig/3.0.5/x86_64/gcc49/nonet/share/swig/3.0.5:/gpfs22/local/centos6/cuda-7.5/lib:/gpfs22/local/centos6/cuda-7.5/lib64:/gpfs22/local/centos6/java/1.8.0/lib:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64:/gpfs22/local/centos6/java/1.8.0/lib/:/gpfs22/local/centos6/python2/anaconda2/lib\n$ export JAVA_HOME=/gpfs22/local/centos6/java/1.8.0\n$ export JAVA_ROOT=/gpfs22/local/centos6/java/1.8.0\n$ export CXX=/gpfs22/local/centos6/gcc/4.9.3/x86_64/bin/g++\n$ export CC=/gpfs22/local/centos6/gcc/4.9.3/x86_64/bin/gcc\n$ export GCC_ROOT=/gpfs22/local/centos6/gcc/4.9.3/x86_64\n$ export LDFLAGS=\"-L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib -L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib -L/gpfs22/local/centos6/cudnn-7.5-v5/lib64 -L/gpfs22/local/centos6/python2/anaconda2/lib\"\n$ export CXXFLAGS=\"-L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib -L/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib64 -L/gpfs22/local/centos6/cuda-7.5/lib -L/gpfs22/local/centos6/cudnn-7.5-v5/lib64 -L/gpfs22/local/centos6/python2/anaconda2/lib\"\n$ export CPLUS_INCLUDE_PATH=\"/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/gcc/x86_64-unknown-linux-gnu/4.9.3/include-fixed/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/include/c++/4.9.3/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/include/c++/4.9.3/x86_64-unknown-linux-gnu/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib64/:/gpfs22/local/centos6/gcc/4.9.3/x86_64/lib/:/gpfs22/local/centos6/cuda-7.5/include/:/gpfs22/local/centos6/cudnn-7.5-v5/include/\"\n$ export PYTHONPATH=/gpfs22/local/centos6/python2/anaconda2/lib/python2.7:$PYTHONPATH\n$ export PYTHON_ROOT=/gpfs22/local/centos6/python2/anaconda2\n$ export PYTHON27_INC=$PYTHON_ROOT/include/python2.7\n$ export CUDA_HOME=/gpfs22/local/centos6/cuda-7.5\n$ export SWIG_ROOT=/gpfs22/local/centos6/swig/3.0.5/x86_64/gcc49/nonet\n$ export NVVM_ROOT=/gpfs22/local/centos6/cuda-7.5/nvvm\n$ export LIBRARY_PATH=/gpfs22/local/centos6/cudnn-7.5-v5/lib64:$LIBRARY_PATH\n$ export CPATH=/gpfs22/local/centos6/cudnn-7.5-v5/include:$CPATH\n$ export CUDNN_ROOT=/gpfs22/local/centos6/cudnn-7.5-v5\n$ export SWIG_PATH=$(which swig)\n```\n\nTensorflow Configuration:\n\n```\n$ $ ./configure\n/scratch/frenchwr/tensorflow/tensorflow-head /scratch/frenchwr/tensorflow/tensorflow-head\nPlease specify the location of python. [Default is /gpfs22/local/centos6/python2/anaconda2/bin/python]: \nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] N\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] N\nNo Hadoop File System support will be enabled for TensorFlow\nFound possible Python library paths:\n  /gpfs22/local/centos6/python2/anaconda2/lib/python2.7/site-packages\n  /gpfs22/local/centos6/python2/anaconda2/lib/python2.7\nPlease input the desired Python library path to use.  Default is [/gpfs22/local/centos6/python2/anaconda2/lib/python2.7/site-packages]\n\n/gpfs22/local/centos6/python2/anaconda2/lib/python2.7/site-packages\nDo you wish to build TensorFlow with GPU support? [y/N] y\nGPU support will be enabled for TensorFlow\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /gpfs22/local/centos6/gcc/4.9.3/x86_64/bin/gcc]: \nPlease specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: 7.5\nPlease specify the location where CUDA 7.5 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /gpfs22/local/centos6/cuda-7.5\nPlease specify the Cudnn version you want to use. [Leave empty to use system default]: 5.0.5\nPlease specify the location where cuDNN 5.0.5 library is installed. Refer to README.md for more details. [Default is /gpfs22/local/centos6/cuda-7.5]: /gpfs22/local/centos6/cudnn-7.5-v5\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: 5.2\nINFO: Starting clean (this may take a while). Consider using --expunge_async if the clean takes more than several minutes.\n.................\nINFO: All external dependencies fetched successfully.\nConfiguration finished\n```\n\nTutorials Example Trainer Build:\n\n```\nbazel build -c opt --config=cuda --verbose_failures --subcommands //tensorflow/cc:tutorials_example_trainer\n```\n\nTutorials Example Trainer Run:\n\n```\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcurand.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcufft.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcudnn.so.5.0.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcublas.so.7.5 locally\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:951] Found device 0 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:02:00.0\nTotal memory: 12.00GiB\nFree memory: 11.87GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:972] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:982] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:02:00.0)\n000000/000001 lambda = 1.841570 x = [0.669396 0.742906] y = [3.493999 -0.669396]\n000000/000009 lambda = 1.841570 x = [0.669396 0.742906] y = [3.493999 -0.669396]\n...\n...\n```\n\nPip Wheel Build (extra command line options suggested by @rdipietro in https://github.com/tensorflow/tensorflow/issues/110):\n\n```\n$ bazel build -c opt --config=cuda --linkopt '-lrt' --copt=\"-DGPR_BACKWARDS_COMPATIBILITY_MODE\" --conlyopt=\"-std=c99\" //tensorflow/tools/pip_package:build_pip_package\n...\n...\nINFO: From Compiling external/protobuf/src/google/protobuf/compiler/cpp/cpp_message.cc:\nexternal/protobuf/src/google/protobuf/compiler/cpp/cpp_message.cc:376:8: warning: 'std::string google::protobuf::compiler::cpp::{anonymous}::MessageTypeProtoName(const google::protobuf::FieldDescriptor*)' defined but not used [-Wunused-function]\n string MessageTypeProtoName(const FieldDescriptor* field) {\n        ^\nERROR: /gpfs22/home/frenchwr/.cache/bazel/_bazel_frenchwr/4ceedd0aac0f37a9bc9063198121367a/external/gif_archive/BUILD:6:1: C++ compilation of rule '@gif_archive//:gif' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 37 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nexternal/gif_archive/egif_lib.c: In function 'EGifOpenFileName':\nexternal/gif_archive/egif_lib.c:62:6: error: 'S_IREAD' undeclared (first use in this function)\n      S_IREAD | S_IWRITE);\n      ^\nexternal/gif_archive/egif_lib.c:62:6: note: each undeclared identifier is reported only once for each function it appears in\nexternal/gif_archive/egif_lib.c:62:16: error: 'S_IWRITE' undeclared (first use in this function)\n      S_IREAD | S_IWRITE);\n                ^\nexternal/gif_archive/egif_lib.c: In function 'EGifOpenFileHandle':\nexternal/gif_archive/egif_lib.c:119:5: warning: implicit declaration of function 'fdopen' [-Wimplicit-function-declaration]\n     f = fdopen(FileHandle, \"wb\");    /* Make it into a stream: */\n     ^\nexternal/gif_archive/egif_lib.c:119:7: warning: assignment makes pointer from integer without a cast\n     f = fdopen(FileHandle, \"wb\");    /* Make it into a stream: */\n       ^\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 403.336s, Critical Path: 394.04s\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/254225715", "html_url": "https://github.com/tensorflow/tensorflow/issues/4882#issuecomment-254225715", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4882", "id": 254225715, "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDIyNTcxNQ==", "user": {"login": "frenchwr", "id": 12451283, "node_id": "MDQ6VXNlcjEyNDUxMjgz", "avatar_url": "https://avatars1.githubusercontent.com/u/12451283?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frenchwr", "html_url": "https://github.com/frenchwr", "followers_url": "https://api.github.com/users/frenchwr/followers", "following_url": "https://api.github.com/users/frenchwr/following{/other_user}", "gists_url": "https://api.github.com/users/frenchwr/gists{/gist_id}", "starred_url": "https://api.github.com/users/frenchwr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frenchwr/subscriptions", "organizations_url": "https://api.github.com/users/frenchwr/orgs", "repos_url": "https://api.github.com/users/frenchwr/repos", "events_url": "https://api.github.com/users/frenchwr/events{/privacy}", "received_events_url": "https://api.github.com/users/frenchwr/received_events", "type": "User", "site_admin": false}, "created_at": "2016-10-17T14:36:19Z", "updated_at": "2016-10-17T14:36:19Z", "author_association": "NONE", "body_html": "<blockquote>\n<p>Could we summarize what happened here? It seems like you were trying to build the pip package with custom gcc flags, which failed, and the solution was to not pass the custom flags.</p>\n</blockquote>\n<p>Exactly. I probably should have tested without the flags before opening an issue since they are never mentioned in the standard TF build.</p>\n<p>Specifically, it looks like neither the <code>__USE_MISC</code> or <code>__USE_BSD</code> macros are defined when building with the <code>-std=c99</code> flag, which results in a few other macros (<code>S_IREAD</code> and <code>S_IWRITE</code>) never getting defined that are needed by <code>external/gif_archive/egif_lib.c</code>. I have not tested with other versions of GCC or on other systems, so I have no idea if this is generally applicable or just a quirk of my environment.</p>\n<blockquote>\n<p>Can you think of any actionable improvements we might be able to make in the TensorFlow build to help gif always compile?</p>\n</blockquote>\n<p>Not really, at least not without knowing first knowing much more about the <code>__USE_MISC</code> and <code>__USE_BSD</code> macros and why they should first be defined in order for <code>S_IREAD</code> and <code>S_IWRITE</code> to then be defined. I'm sure there is a hacky way to force <code>__USE_MISC</code> and <code>__USE_BSD</code> to be defined regardless of the options you pass to <code>gcc</code>, but who knows what sort of unintended side effects that might have.</p>", "body_text": "Could we summarize what happened here? It seems like you were trying to build the pip package with custom gcc flags, which failed, and the solution was to not pass the custom flags.\n\nExactly. I probably should have tested without the flags before opening an issue since they are never mentioned in the standard TF build.\nSpecifically, it looks like neither the __USE_MISC or __USE_BSD macros are defined when building with the -std=c99 flag, which results in a few other macros (S_IREAD and S_IWRITE) never getting defined that are needed by external/gif_archive/egif_lib.c. I have not tested with other versions of GCC or on other systems, so I have no idea if this is generally applicable or just a quirk of my environment.\n\nCan you think of any actionable improvements we might be able to make in the TensorFlow build to help gif always compile?\n\nNot really, at least not without knowing first knowing much more about the __USE_MISC and __USE_BSD macros and why they should first be defined in order for S_IREAD and S_IWRITE to then be defined. I'm sure there is a hacky way to force __USE_MISC and __USE_BSD to be defined regardless of the options you pass to gcc, but who knows what sort of unintended side effects that might have.", "body": "> Could we summarize what happened here? It seems like you were trying to build the pip package with custom gcc flags, which failed, and the solution was to not pass the custom flags.\n\nExactly. I probably should have tested without the flags before opening an issue since they are never mentioned in the standard TF build.\n\nSpecifically, it looks like neither the `__USE_MISC` or `__USE_BSD` macros are defined when building with the `-std=c99` flag, which results in a few other macros (`S_IREAD` and `S_IWRITE`) never getting defined that are needed by `external/gif_archive/egif_lib.c`. I have not tested with other versions of GCC or on other systems, so I have no idea if this is generally applicable or just a quirk of my environment.  \n\n> Can you think of any actionable improvements we might be able to make in the TensorFlow build to help gif always compile?\n\nNot really, at least not without knowing first knowing much more about the `__USE_MISC` and `__USE_BSD` macros and why they should first be defined in order for `S_IREAD` and `S_IWRITE` to then be defined. I'm sure there is a hacky way to force `__USE_MISC` and `__USE_BSD` to be defined regardless of the options you pass to `gcc`, but who knows what sort of unintended side effects that might have.\n"}
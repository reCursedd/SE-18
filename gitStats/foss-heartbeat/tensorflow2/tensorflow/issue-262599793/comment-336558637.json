{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/336558637", "html_url": "https://github.com/tensorflow/tensorflow/issues/13477#issuecomment-336558637", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13477", "id": 336558637, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjU1ODYzNw==", "user": {"login": "rutadesai", "id": 7421733, "node_id": "MDQ6VXNlcjc0MjE3MzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/7421733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rutadesai", "html_url": "https://github.com/rutadesai", "followers_url": "https://api.github.com/users/rutadesai/followers", "following_url": "https://api.github.com/users/rutadesai/following{/other_user}", "gists_url": "https://api.github.com/users/rutadesai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rutadesai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rutadesai/subscriptions", "organizations_url": "https://api.github.com/users/rutadesai/orgs", "repos_url": "https://api.github.com/users/rutadesai/repos", "events_url": "https://api.github.com/users/rutadesai/events{/privacy}", "received_events_url": "https://api.github.com/users/rutadesai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-13T20:25:37Z", "updated_at": "2017-10-13T20:33:13Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=577277\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/martinwicke\">@martinwicke</a> -- Can you please give a sample code to do this? I can see that it is expecting a string input (I checked this using the saved_model_cli tool.) But, I don't know how to parse data/features into this required string input. In particular, I am using an input_fn for parsing my data, which makes it even more confusing . Note -- this is what the saved_model_cli tool shows:</p>\n<p>`The given SavedModel SignatureDef contains the following input(s):<br>\ninputs['inputs'] tensor_info:<br>\ndtype: DT_STRING<br>\nshape: (-1)<br>\nname: input_example_tensor:0</p>\n<p>The given SavedModel SignatureDef contains the following output(s):<br>\noutputs['outputs'] tensor_info:<br>\ndtype: DT_FLOAT<br>\nshape: (-1)<br>\nname: regression_head/predictions/Identity:0<br>\nMethod name is: tensorflow/serving/regress`</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=22122319\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/befowler\">@befowler</a> --  I managed to move a little ahead with the loaded predictor. Since I didn't know how to pass the input_fn I had for my data to the predict_fn obtained using predictor.fromsaved_model(), this is what I did, following your example above (regressor is DNNLinearCombinedRegressor from tf.contrib.learn):</p>\n<pre><code>from tensorflow.contrib import predictor\npredict_fn = predictor.from_saved_model(servable_model_path)    \nfeatures = regressor._get_features_from_input_fn(input_fn=get_input_fn(X_test, y_test, num_epochs=1, shuffle=False))\ninput_dict ={\"inputs\": features}\npredictions = predict_fn(input_dict)`\n</code></pre>\n<p>Now I get the following error:<br>\n<code> Cannot feed value of shape () for Tensor 'input_example_tensor:0', which has shape '(?,)'</code></p>\n<p>It seems like my predict_fn doesn't know the shape of the input? Is that correct? predict_fn looks like this:</p>\n<p><code>SavedModelPredictor with feed tensors {'inputs': &lt;tf.Tensor 'input_example_tensor:0' shape=(?,) dtype=string&gt;} and fetch_tensors {'outputs': &lt;tf.Tensor 'regression_head/predictions/Identity:0' shape=(?,) dtype=float32&gt;}</code></p>\n<p>Any suggestions?</p>", "body_text": "@martinwicke -- Can you please give a sample code to do this? I can see that it is expecting a string input (I checked this using the saved_model_cli tool.) But, I don't know how to parse data/features into this required string input. In particular, I am using an input_fn for parsing my data, which makes it even more confusing . Note -- this is what the saved_model_cli tool shows:\n`The given SavedModel SignatureDef contains the following input(s):\ninputs['inputs'] tensor_info:\ndtype: DT_STRING\nshape: (-1)\nname: input_example_tensor:0\nThe given SavedModel SignatureDef contains the following output(s):\noutputs['outputs'] tensor_info:\ndtype: DT_FLOAT\nshape: (-1)\nname: regression_head/predictions/Identity:0\nMethod name is: tensorflow/serving/regress`\n@befowler --  I managed to move a little ahead with the loaded predictor. Since I didn't know how to pass the input_fn I had for my data to the predict_fn obtained using predictor.fromsaved_model(), this is what I did, following your example above (regressor is DNNLinearCombinedRegressor from tf.contrib.learn):\nfrom tensorflow.contrib import predictor\npredict_fn = predictor.from_saved_model(servable_model_path)    \nfeatures = regressor._get_features_from_input_fn(input_fn=get_input_fn(X_test, y_test, num_epochs=1, shuffle=False))\ninput_dict ={\"inputs\": features}\npredictions = predict_fn(input_dict)`\n\nNow I get the following error:\n Cannot feed value of shape () for Tensor 'input_example_tensor:0', which has shape '(?,)'\nIt seems like my predict_fn doesn't know the shape of the input? Is that correct? predict_fn looks like this:\nSavedModelPredictor with feed tensors {'inputs': <tf.Tensor 'input_example_tensor:0' shape=(?,) dtype=string>} and fetch_tensors {'outputs': <tf.Tensor 'regression_head/predictions/Identity:0' shape=(?,) dtype=float32>}\nAny suggestions?", "body": "@martinwicke -- Can you please give a sample code to do this? I can see that it is expecting a string input (I checked this using the saved_model_cli tool.) But, I don't know how to parse data/features into this required string input. In particular, I am using an input_fn for parsing my data, which makes it even more confusing . Note -- this is what the saved_model_cli tool shows:\r\n\r\n`The given SavedModel SignatureDef contains the following input(s):\r\ninputs['inputs'] tensor_info:\r\n    dtype: DT_STRING\r\n    shape: (-1)\r\n    name: input_example_tensor:0\r\n\r\nThe given SavedModel SignatureDef contains the following output(s):\r\noutputs['outputs'] tensor_info:\r\n    dtype: DT_FLOAT\r\n    shape: (-1)\r\n    name: regression_head/predictions/Identity:0\r\nMethod name is: tensorflow/serving/regress`\r\n\r\n@befowler --  I managed to move a little ahead with the loaded predictor. Since I didn't know how to pass the input_fn I had for my data to the predict_fn obtained using predictor.fromsaved_model(), this is what I did, following your example above (regressor is DNNLinearCombinedRegressor from tf.contrib.learn):\r\n\r\n    from tensorflow.contrib import predictor\r\n    predict_fn = predictor.from_saved_model(servable_model_path)    \r\n    features = regressor._get_features_from_input_fn(input_fn=get_input_fn(X_test, y_test, num_epochs=1, shuffle=False))\r\n    input_dict ={\"inputs\": features}\r\n    predictions = predict_fn(input_dict)`\r\n\r\nNow I get the following error: \r\n` Cannot feed value of shape () for Tensor 'input_example_tensor:0', which has shape '(?,)'`\r\n\r\nIt seems like my predict_fn doesn't know the shape of the input? Is that correct? predict_fn looks like this:\r\n\r\n`SavedModelPredictor with feed tensors {'inputs': <tf.Tensor 'input_example_tensor:0' shape=(?,) dtype=string>} and fetch_tensors {'outputs': <tf.Tensor 'regression_head/predictions/Identity:0' shape=(?,) dtype=float32>}`\r\n\r\nAny suggestions?"}
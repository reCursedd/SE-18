{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/257607567", "html_url": "https://github.com/tensorflow/tensorflow/issues/5297#issuecomment-257607567", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5297", "id": 257607567, "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzYwNzU2Nw==", "user": {"login": "zafartahirov", "id": 4216323, "node_id": "MDQ6VXNlcjQyMTYzMjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/4216323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zafartahirov", "html_url": "https://github.com/zafartahirov", "followers_url": "https://api.github.com/users/zafartahirov/followers", "following_url": "https://api.github.com/users/zafartahirov/following{/other_user}", "gists_url": "https://api.github.com/users/zafartahirov/gists{/gist_id}", "starred_url": "https://api.github.com/users/zafartahirov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zafartahirov/subscriptions", "organizations_url": "https://api.github.com/users/zafartahirov/orgs", "repos_url": "https://api.github.com/users/zafartahirov/repos", "events_url": "https://api.github.com/users/zafartahirov/events{/privacy}", "received_events_url": "https://api.github.com/users/zafartahirov/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-01T16:03:41Z", "updated_at": "2016-11-01T16:03:41Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Also, can you copy-paste the following in the tensorflow root directory:</p>\n<div class=\"highlight highlight-source-shell\"><pre>TF=<span class=\"pl-s\"><span class=\"pl-pds\">`</span>pwd<span class=\"pl-pds\">`</span></span>\n./configure \\\n  --build=x86_64-apple-darwin14.0.0 \\\n  --host=x86_64-apple-darwin14.0.0 \\\n  --disable-shared \\\n  --enable-cross-compile \\\n  --with-protoc=<span class=\"pl-smi\">${TF}</span>/tensorflow/contrib/makefile/gen/protobuf-host/bin/protoc \\\n  --prefix=<span class=\"pl-smi\">${TF}</span>/tensorflow/contrib/makefile/gen/protobuf_ios/lib/iossim_x86_64 \\\n  --exec-prefix=<span class=\"pl-smi\">${TF}</span>/tensorflow/contrib/makefile/gen/protobuf_ios/lib/iossim_x86_64 \\\n  <span class=\"pl-s\"><span class=\"pl-pds\">'</span>CFLAGS=-DNDEBUG -Os -pipe -fPIC -fno-exceptions -mios-simulator-version-min=8.2 -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk<span class=\"pl-pds\">'</span></span> \\\n  CXX= <span class=\"pl-s\"><span class=\"pl-pds\">'</span>CXXFLAGS=-DNDEBUG -Os -pipe -fPIC -fno-exceptions -std=c++11 -stdlib=libc++ -mios-simulator-version-min=8.2 -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk<span class=\"pl-pds\">'</span></span> \\\n  <span class=\"pl-s\"><span class=\"pl-pds\">'</span>LDFLAGS=-arch x86_64 -mios-simulator-version-min=8.2 -stdlib=libc++ -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk/usr/lib/ -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk/usr/lib/system<span class=\"pl-pds\">'</span></span> \\\n  <span class=\"pl-s\"><span class=\"pl-pds\">'</span>LIBS=-lc++ -lc++abi<span class=\"pl-pds\">'</span></span></pre></div>\n<p>Just to explain what it does, so you wouldn't think it's malicious:</p>\n<ul>\n<li><code>--build</code> and <code>--host</code> are architecture specs, where <code>x86_64-apple-darwin14.x</code> is iOS. I am assuming you will be running and debugging it on iOS, so both build and host are the same</li>\n<li><code>--disabled-shared</code> we don't need shared libraries, only static ones!</li>\n<li><code>--enable-cross-compile</code> exactly what it says</li>\n<li><code>--with-protoc</code> this comes from <a href=\"https://github.com/google/protobuf/blob/master/src/README.md\">here</a></li>\n<li><code>--prefix</code> this is where everything is gonna be installed</li>\n<li><code>--exec-prefix</code> same as the previous</li>\n<li><code>CXX, LDFLAGS, LIBS</code> these are the compilation settings for compiler, library flags, and libraries to include</li>\n</ul>\n<p>If it takes too long, add this flag: <code>--expunge_async</code></p>\n<p>I cannot really replicate your problem, but yet again, I have a lot of stuff installed, and not sure which one is the fix (I don't have a virtual machine).</p>\n<p>I think the problem is with the protobuffers, so maybe if you try installing the <code>protobuf</code> separately, it might fix it: <a href=\"https://github.com/google/protobuf/releases\">https://github.com/google/protobuf/releases</a>,or using brew: <code>brew install protobuf</code></p>", "body_text": "Also, can you copy-paste the following in the tensorflow root directory:\nTF=`pwd`\n./configure \\\n  --build=x86_64-apple-darwin14.0.0 \\\n  --host=x86_64-apple-darwin14.0.0 \\\n  --disable-shared \\\n  --enable-cross-compile \\\n  --with-protoc=${TF}/tensorflow/contrib/makefile/gen/protobuf-host/bin/protoc \\\n  --prefix=${TF}/tensorflow/contrib/makefile/gen/protobuf_ios/lib/iossim_x86_64 \\\n  --exec-prefix=${TF}/tensorflow/contrib/makefile/gen/protobuf_ios/lib/iossim_x86_64 \\\n  'CFLAGS=-DNDEBUG -Os -pipe -fPIC -fno-exceptions -mios-simulator-version-min=8.2 -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk' \\\n  CXX= 'CXXFLAGS=-DNDEBUG -Os -pipe -fPIC -fno-exceptions -std=c++11 -stdlib=libc++ -mios-simulator-version-min=8.2 -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk' \\\n  'LDFLAGS=-arch x86_64 -mios-simulator-version-min=8.2 -stdlib=libc++ -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk/usr/lib/ -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk/usr/lib/system' \\\n  'LIBS=-lc++ -lc++abi'\nJust to explain what it does, so you wouldn't think it's malicious:\n\n--build and --host are architecture specs, where x86_64-apple-darwin14.x is iOS. I am assuming you will be running and debugging it on iOS, so both build and host are the same\n--disabled-shared we don't need shared libraries, only static ones!\n--enable-cross-compile exactly what it says\n--with-protoc this comes from here\n--prefix this is where everything is gonna be installed\n--exec-prefix same as the previous\nCXX, LDFLAGS, LIBS these are the compilation settings for compiler, library flags, and libraries to include\n\nIf it takes too long, add this flag: --expunge_async\nI cannot really replicate your problem, but yet again, I have a lot of stuff installed, and not sure which one is the fix (I don't have a virtual machine).\nI think the problem is with the protobuffers, so maybe if you try installing the protobuf separately, it might fix it: https://github.com/google/protobuf/releases,or using brew: brew install protobuf", "body": "Also, can you copy-paste the following in the tensorflow root directory:\n\n``` bash\nTF=`pwd`\n./configure \\\n  --build=x86_64-apple-darwin14.0.0 \\\n  --host=x86_64-apple-darwin14.0.0 \\\n  --disable-shared \\\n  --enable-cross-compile \\\n  --with-protoc=${TF}/tensorflow/contrib/makefile/gen/protobuf-host/bin/protoc \\\n  --prefix=${TF}/tensorflow/contrib/makefile/gen/protobuf_ios/lib/iossim_x86_64 \\\n  --exec-prefix=${TF}/tensorflow/contrib/makefile/gen/protobuf_ios/lib/iossim_x86_64 \\\n  'CFLAGS=-DNDEBUG -Os -pipe -fPIC -fno-exceptions -mios-simulator-version-min=8.2 -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk' \\\n  CXX= 'CXXFLAGS=-DNDEBUG -Os -pipe -fPIC -fno-exceptions -std=c++11 -stdlib=libc++ -mios-simulator-version-min=8.2 -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk' \\\n  'LDFLAGS=-arch x86_64 -mios-simulator-version-min=8.2 -stdlib=libc++ -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk/usr/lib/ -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.1.sdk/usr/lib/system' \\\n  'LIBS=-lc++ -lc++abi'\n```\n\nJust to explain what it does, so you wouldn't think it's malicious:\n- `--build` and `--host` are architecture specs, where `x86_64-apple-darwin14.x` is iOS. I am assuming you will be running and debugging it on iOS, so both build and host are the same\n- `--disabled-shared` we don't need shared libraries, only static ones!\n- `--enable-cross-compile` exactly what it says\n- `--with-protoc` this comes from [here](https://github.com/google/protobuf/blob/master/src/README.md)\n- `--prefix` this is where everything is gonna be installed\n- `--exec-prefix` same as the previous\n- `CXX, LDFLAGS, LIBS` these are the compilation settings for compiler, library flags, and libraries to include\n\nIf it takes too long, add this flag: `--expunge_async`\n\nI cannot really replicate your problem, but yet again, I have a lot of stuff installed, and not sure which one is the fix (I don't have a virtual machine). \n\nI think the problem is with the protobuffers, so maybe if you try installing the `protobuf` separately, it might fix it: [https://github.com/google/protobuf/releases](https://github.com/google/protobuf/releases),or using brew: `brew install protobuf`\n"}
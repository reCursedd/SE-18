{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/329738729", "html_url": "https://github.com/tensorflow/tensorflow/issues/12453#issuecomment-329738729", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12453", "id": 329738729, "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTczODcyOQ==", "user": {"login": "ilya-edrenkin", "id": 13562803, "node_id": "MDQ6VXNlcjEzNTYyODAz", "avatar_url": "https://avatars2.githubusercontent.com/u/13562803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilya-edrenkin", "html_url": "https://github.com/ilya-edrenkin", "followers_url": "https://api.github.com/users/ilya-edrenkin/followers", "following_url": "https://api.github.com/users/ilya-edrenkin/following{/other_user}", "gists_url": "https://api.github.com/users/ilya-edrenkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilya-edrenkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilya-edrenkin/subscriptions", "organizations_url": "https://api.github.com/users/ilya-edrenkin/orgs", "repos_url": "https://api.github.com/users/ilya-edrenkin/repos", "events_url": "https://api.github.com/users/ilya-edrenkin/events{/privacy}", "received_events_url": "https://api.github.com/users/ilya-edrenkin/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-15T10:00:42Z", "updated_at": "2017-09-15T10:00:42Z", "author_association": "CONTRIBUTOR", "body_html": "<ol>\n<li>To make it work as intended, you should mask out the \"nonexisting\" components of the loss function. This will make the gradients specific to this loss component equal to zero, which will be detected by the optimizer.<br>\nBtw, if you are taking tf.reduce_mean of an empty tensor you are likely to get an 'inf'.</li>\n<li>The assertion error you are getting is likely a different problem -- looks like a type mismatch in the input of the gradient clipping function. For now, you can try make it work without gradient clipping, and solve this problem later.</li>\n</ol>", "body_text": "To make it work as intended, you should mask out the \"nonexisting\" components of the loss function. This will make the gradients specific to this loss component equal to zero, which will be detected by the optimizer.\nBtw, if you are taking tf.reduce_mean of an empty tensor you are likely to get an 'inf'.\nThe assertion error you are getting is likely a different problem -- looks like a type mismatch in the input of the gradient clipping function. For now, you can try make it work without gradient clipping, and solve this problem later.", "body": "1) To make it work as intended, you should mask out the \"nonexisting\" components of the loss function. This will make the gradients specific to this loss component equal to zero, which will be detected by the optimizer.\r\nBtw, if you are taking tf.reduce_mean of an empty tensor you are likely to get an 'inf'.\r\n2) The assertion error you are getting is likely a different problem -- looks like a type mismatch in the input of the gradient clipping function. For now, you can try make it work without gradient clipping, and solve this problem later."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/353725791", "html_url": "https://github.com/tensorflow/tensorflow/issues/11157#issuecomment-353725791", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11157", "id": 353725791, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzcyNTc5MQ==", "user": {"login": "maxim5", "id": 2580604, "node_id": "MDQ6VXNlcjI1ODA2MDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/2580604?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxim5", "html_url": "https://github.com/maxim5", "followers_url": "https://api.github.com/users/maxim5/followers", "following_url": "https://api.github.com/users/maxim5/following{/other_user}", "gists_url": "https://api.github.com/users/maxim5/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxim5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxim5/subscriptions", "organizations_url": "https://api.github.com/users/maxim5/orgs", "repos_url": "https://api.github.com/users/maxim5/repos", "events_url": "https://api.github.com/users/maxim5/events{/privacy}", "received_events_url": "https://api.github.com/users/maxim5/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-23T13:17:25Z", "updated_at": "2018-02-03T07:33:41Z", "author_association": "NONE", "body_html": "<p>Here's what you can do in <strong>your code</strong> to pass this (without modifying tensorflow's <code>seq2seq.py</code>):</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-c1\">setattr</span>(tf.contrib.rnn.GRUCell, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>__deepcopy__<span class=\"pl-pds\">'</span></span>, <span class=\"pl-k\">lambda</span> <span class=\"pl-smi\">self</span>, <span class=\"pl-smi\">_</span>: <span class=\"pl-c1\">self</span>)\n<span class=\"pl-c1\">setattr</span>(tf.contrib.rnn.BasicLSTMCell, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>__deepcopy__<span class=\"pl-pds\">'</span></span>, <span class=\"pl-k\">lambda</span> <span class=\"pl-smi\">self</span>, <span class=\"pl-smi\">_</span>: <span class=\"pl-c1\">self</span>)\n<span class=\"pl-c1\">setattr</span>(tf.contrib.rnn.MultiRNNCell, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>__deepcopy__<span class=\"pl-pds\">'</span></span>, <span class=\"pl-k\">lambda</span> <span class=\"pl-smi\">self</span>, <span class=\"pl-smi\">_</span>: <span class=\"pl-c1\">self</span>)</pre></div>\n<p>If you're using core RNN API, you can change to <code>tf.nn.rnn_cell.GRUCell</code> (both variants work, actually).</p>\n<p>This is a workaround. The proper fix is either make cells deep-copeable or get rid of the <code>copy.deepcopy</code> call. See also <a href=\"https://stackoverflow.com/q/44855603/712995\" rel=\"nofollow\">this StackOverflow discussion</a>.</p>", "body_text": "Here's what you can do in your code to pass this (without modifying tensorflow's seq2seq.py):\nsetattr(tf.contrib.rnn.GRUCell, '__deepcopy__', lambda self, _: self)\nsetattr(tf.contrib.rnn.BasicLSTMCell, '__deepcopy__', lambda self, _: self)\nsetattr(tf.contrib.rnn.MultiRNNCell, '__deepcopy__', lambda self, _: self)\nIf you're using core RNN API, you can change to tf.nn.rnn_cell.GRUCell (both variants work, actually).\nThis is a workaround. The proper fix is either make cells deep-copeable or get rid of the copy.deepcopy call. See also this StackOverflow discussion.", "body": "Here's what you can do in **your code** to pass this (without modifying tensorflow's `seq2seq.py`):\r\n```python\r\nsetattr(tf.contrib.rnn.GRUCell, '__deepcopy__', lambda self, _: self)\r\nsetattr(tf.contrib.rnn.BasicLSTMCell, '__deepcopy__', lambda self, _: self)\r\nsetattr(tf.contrib.rnn.MultiRNNCell, '__deepcopy__', lambda self, _: self)\r\n```\r\n\r\nIf you're using core RNN API, you can change to `tf.nn.rnn_cell.GRUCell` (both variants work, actually).\r\n\r\nThis is a workaround. The proper fix is either make cells deep-copeable or get rid of the `copy.deepcopy` call. See also [this StackOverflow discussion](https://stackoverflow.com/q/44855603/712995)."}
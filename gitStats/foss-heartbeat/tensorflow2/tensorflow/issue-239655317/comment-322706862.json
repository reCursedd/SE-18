{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/322706862", "html_url": "https://github.com/tensorflow/tensorflow/issues/11157#issuecomment-322706862", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11157", "id": 322706862, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjcwNjg2Mg==", "user": {"login": "dshahrokhian", "id": 8654460, "node_id": "MDQ6VXNlcjg2NTQ0NjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/8654460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dshahrokhian", "html_url": "https://github.com/dshahrokhian", "followers_url": "https://api.github.com/users/dshahrokhian/followers", "following_url": "https://api.github.com/users/dshahrokhian/following{/other_user}", "gists_url": "https://api.github.com/users/dshahrokhian/gists{/gist_id}", "starred_url": "https://api.github.com/users/dshahrokhian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dshahrokhian/subscriptions", "organizations_url": "https://api.github.com/users/dshahrokhian/orgs", "repos_url": "https://api.github.com/users/dshahrokhian/repos", "events_url": "https://api.github.com/users/dshahrokhian/events{/privacy}", "received_events_url": "https://api.github.com/users/dshahrokhian/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-16T08:48:23Z", "updated_at": "2017-08-16T08:48:23Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=30711468\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Chesao\">@Chesao</a> AFAIK I cannot use your method in my case. Here's my error log, but I already decided to put some extra code so I don't need to use the sklearn wrapper that was giving me the error.</p>\n<pre><code>Traceback (most recent call last):\n  File \"experiments/openface_ck+.py\", line 77, in &lt;module&gt;\n    main()\n  File \"experiments/openface_ck+.py\", line 74, in main\n    io_utils.kfold_report_metrics(get_temporal_model, optimal['max_params'], features, labels)\n  File \"/home/dani/Git/EmotionRecognition/experiments/io_utils.py\", line 140, in kfold_report_metrics\n    print(\"Test loss and Confidence Interval: %.2f (+/- %.2f)\" % (np.mean(losses), np.std(losses)))\n  File \"/home/dani/Git/EmotionRecognition/experiments/io_utils.py\", line 225, in plot_learning_curve\n    \n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/model_selection/_validation.py\", line 772, in learning_curve\n    for train, test in cv_iter\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py\", line 758, in __call__\n    while self.dispatch_one_batch(iterator):\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py\", line 603, in dispatch_one_batch\n    tasks = BatchedCalls(itertools.islice(iterator, batch_size))\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py\", line 127, in __init__\n    self.items = list(iterator_slice)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/model_selection/_validation.py\", line 773, in &lt;genexpr&gt;\n    for n_train_samples in train_sizes_abs)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/base.py\", line 69, in clone\n    new_object_params[name] = clone(param, safe=False)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/base.py\", line 60, in clone\n    return copy.deepcopy(estimator)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\n    state = deepcopy(state, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 215, in _deepcopy_list\n    append(deepcopy(a, memo))\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\n    state = deepcopy(state, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\n    state = deepcopy(state, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\n    state = deepcopy(state, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 169, in deepcopy\n    rv = reductor(4)\nTypeError: can't pickle _thread.lock objects\n</code></pre>\n<p>Thanks,<br>\nDani</p>", "body_text": "@Chesao AFAIK I cannot use your method in my case. Here's my error log, but I already decided to put some extra code so I don't need to use the sklearn wrapper that was giving me the error.\nTraceback (most recent call last):\n  File \"experiments/openface_ck+.py\", line 77, in <module>\n    main()\n  File \"experiments/openface_ck+.py\", line 74, in main\n    io_utils.kfold_report_metrics(get_temporal_model, optimal['max_params'], features, labels)\n  File \"/home/dani/Git/EmotionRecognition/experiments/io_utils.py\", line 140, in kfold_report_metrics\n    print(\"Test loss and Confidence Interval: %.2f (+/- %.2f)\" % (np.mean(losses), np.std(losses)))\n  File \"/home/dani/Git/EmotionRecognition/experiments/io_utils.py\", line 225, in plot_learning_curve\n    \n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/model_selection/_validation.py\", line 772, in learning_curve\n    for train, test in cv_iter\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py\", line 758, in __call__\n    while self.dispatch_one_batch(iterator):\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py\", line 603, in dispatch_one_batch\n    tasks = BatchedCalls(itertools.islice(iterator, batch_size))\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py\", line 127, in __init__\n    self.items = list(iterator_slice)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/model_selection/_validation.py\", line 773, in <genexpr>\n    for n_train_samples in train_sizes_abs)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/base.py\", line 69, in clone\n    new_object_params[name] = clone(param, safe=False)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/base.py\", line 60, in clone\n    return copy.deepcopy(estimator)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\n    state = deepcopy(state, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 215, in _deepcopy_list\n    append(deepcopy(a, memo))\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\n    state = deepcopy(state, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\n    state = deepcopy(state, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\n    state = deepcopy(state, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\n    y = copier(x, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 169, in deepcopy\n    rv = reductor(4)\nTypeError: can't pickle _thread.lock objects\n\nThanks,\nDani", "body": "@Chesao AFAIK I cannot use your method in my case. Here's my error log, but I already decided to put some extra code so I don't need to use the sklearn wrapper that was giving me the error.\r\n```\r\nTraceback (most recent call last):\r\n  File \"experiments/openface_ck+.py\", line 77, in <module>\r\n    main()\r\n  File \"experiments/openface_ck+.py\", line 74, in main\r\n    io_utils.kfold_report_metrics(get_temporal_model, optimal['max_params'], features, labels)\r\n  File \"/home/dani/Git/EmotionRecognition/experiments/io_utils.py\", line 140, in kfold_report_metrics\r\n    print(\"Test loss and Confidence Interval: %.2f (+/- %.2f)\" % (np.mean(losses), np.std(losses)))\r\n  File \"/home/dani/Git/EmotionRecognition/experiments/io_utils.py\", line 225, in plot_learning_curve\r\n    \r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/model_selection/_validation.py\", line 772, in learning_curve\r\n    for train, test in cv_iter\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py\", line 758, in __call__\r\n    while self.dispatch_one_batch(iterator):\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py\", line 603, in dispatch_one_batch\r\n    tasks = BatchedCalls(itertools.islice(iterator, batch_size))\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py\", line 127, in __init__\r\n    self.items = list(iterator_slice)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/model_selection/_validation.py\", line 773, in <genexpr>\r\n    for n_train_samples in train_sizes_abs)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/base.py\", line 69, in clone\r\n    new_object_params[name] = clone(param, safe=False)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/site-packages/sklearn/base.py\", line 60, in clone\r\n    return copy.deepcopy(estimator)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\r\n    y = _reconstruct(x, memo, *rv)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 215, in _deepcopy_list\r\n    append(deepcopy(a, memo))\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\r\n    y = _reconstruct(x, memo, *rv)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\r\n    y = _reconstruct(x, memo, *rv)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 180, in deepcopy\r\n    y = _reconstruct(x, memo, *rv)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 280, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 150, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 240, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/home/dani/Software/anaconda3/lib/python3.6/copy.py\", line 169, in deepcopy\r\n    rv = reductor(4)\r\nTypeError: can't pickle _thread.lock objects\r\n```\r\n\r\nThanks,\r\nDani"}
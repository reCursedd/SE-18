{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/268628945", "html_url": "https://github.com/tensorflow/tensorflow/issues/5553#issuecomment-268628945", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5553", "id": 268628945, "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODYyODk0NQ==", "user": {"login": "ivancruzbht", "id": 10346378, "node_id": "MDQ6VXNlcjEwMzQ2Mzc4", "avatar_url": "https://avatars3.githubusercontent.com/u/10346378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivancruzbht", "html_url": "https://github.com/ivancruzbht", "followers_url": "https://api.github.com/users/ivancruzbht/followers", "following_url": "https://api.github.com/users/ivancruzbht/following{/other_user}", "gists_url": "https://api.github.com/users/ivancruzbht/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivancruzbht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivancruzbht/subscriptions", "organizations_url": "https://api.github.com/users/ivancruzbht/orgs", "repos_url": "https://api.github.com/users/ivancruzbht/repos", "events_url": "https://api.github.com/users/ivancruzbht/events{/privacy}", "received_events_url": "https://api.github.com/users/ivancruzbht/received_events", "type": "User", "site_admin": false}, "created_at": "2016-12-21T20:22:16Z", "updated_at": "2016-12-21T20:25:29Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3376817\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/andrewharp\">@andrewharp</a> I just found out the issue. It seems that ReadFileToProtoOrDie in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/android/jni/jni_utils.cc#L78\">jni_utils.cc</a> needs the prefix \"file:///android_asset/\" in the file name to use the AssetManager to open the GraphDefFile. Otherwise it will try to open the file standalone. For some reason not using the AssetManager does not open correctly the pb file. Then I had an issue in my Gradle script that was not executing the non-compression of the pb file. Once I fixed that I could load the Graph.</p>\n<p>Maybe a couple of \"File Not Found\" or \"AssetManager cannot find the file\" logs would improve the initialization :)</p>", "body_text": "@andrewharp I just found out the issue. It seems that ReadFileToProtoOrDie in jni_utils.cc needs the prefix \"file:///android_asset/\" in the file name to use the AssetManager to open the GraphDefFile. Otherwise it will try to open the file standalone. For some reason not using the AssetManager does not open correctly the pb file. Then I had an issue in my Gradle script that was not executing the non-compression of the pb file. Once I fixed that I could load the Graph.\nMaybe a couple of \"File Not Found\" or \"AssetManager cannot find the file\" logs would improve the initialization :)", "body": "@andrewharp I just found out the issue. It seems that ReadFileToProtoOrDie in [jni_utils.cc](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/android/jni/jni_utils.cc#L78) needs the prefix \"file:///android_asset/\" in the file name to use the AssetManager to open the GraphDefFile. Otherwise it will try to open the file standalone. For some reason not using the AssetManager does not open correctly the pb file. Then I had an issue in my Gradle script that was not executing the non-compression of the pb file. Once I fixed that I could load the Graph.\r\n\r\nMaybe a couple of \"File Not Found\" or \"AssetManager cannot find the file\" logs would improve the initialization :)"}
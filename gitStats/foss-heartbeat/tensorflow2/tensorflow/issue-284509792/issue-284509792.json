{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15636", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15636/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15636/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15636/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15636", "id": 284509792, "node_id": "MDU6SXNzdWUyODQ1MDk3OTI=", "number": 15636, "title": "Read tflite file failed on iOS", "user": {"login": "llyyun", "id": 33706846, "node_id": "MDQ6VXNlcjMzNzA2ODQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/33706846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llyyun", "html_url": "https://github.com/llyyun", "followers_url": "https://api.github.com/users/llyyun/followers", "following_url": "https://api.github.com/users/llyyun/following{/other_user}", "gists_url": "https://api.github.com/users/llyyun/gists{/gist_id}", "starred_url": "https://api.github.com/users/llyyun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llyyun/subscriptions", "organizations_url": "https://api.github.com/users/llyyun/orgs", "repos_url": "https://api.github.com/users/llyyun/repos", "events_url": "https://api.github.com/users/llyyun/events{/privacy}", "received_events_url": "https://api.github.com/users/llyyun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-12-26T07:37:09Z", "updated_at": "2018-05-10T16:16:21Z", "closed_at": "2018-01-30T07:26:52Z", "author_association": "NONE", "body_html": "<p>Hi</p>\n<p>I tried the examples on iOS according to TF Lite guide, but failed when assign data to tflite because address \"out\" is NULL. probably my tflite file is incorrect, but I am not sure, can anybody give some help?</p>\n<p>My test step is as follows:</p>\n<ol>\n<li>Try the following code(<a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite\">https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite</a>),  get the tflite file converteds_model.tflite</li>\n</ol>\n<pre><code>import tensorflow as tf\nimg = tf.placeholder(name=\"img\", dtype=tf.float32, shape=(1, 64, 64, 3))\nval = img + tf.constant([1., 2., 3.]) + tf.constant([1., 4., 4.])\nout = tf.identity(val, name=\"out\")\nwith tf.Session() as sess:\n  tflite_model = tf.contrib.lite.toco_convert(sess.graph_def, [img], [out])\n  open(\"converteds_model.tflite\", \"wb\").write(tflite_model)\n</code></pre>\n<ol start=\"2\">\n<li>Integrated the tflite into my app, which is from iOS sample code \"simple\"(/Users/Sensteer/Software/tensorflowclone/tensorflow/tensorflow/contrib/lite/examples/ios/simple).But exception happed because address \"out\" is NULL</li>\n</ol>\n<pre><code>int input = interpreter-&gt;inputs()[0];                                 //input is 3\nfloat* out = interpreter-&gt;typed_tensor&lt;float&gt;(input);          //out is NULL\n</code></pre>\n<p>So my questions are:</p>\n<ol>\n<li>The tflite created above is right or not?</li>\n<li>The reading tflite code is right or not?</li>\n<li>If the tflite file is not right, do I must create tflite with  \"pb\", \"ckpt\" and \"FrozenGraphDef\" mentioned in guide?</li>\n</ol>\n<p>Thanks</p>", "body_text": "Hi\nI tried the examples on iOS according to TF Lite guide, but failed when assign data to tflite because address \"out\" is NULL. probably my tflite file is incorrect, but I am not sure, can anybody give some help?\nMy test step is as follows:\n\nTry the following code(https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite),  get the tflite file converteds_model.tflite\n\nimport tensorflow as tf\nimg = tf.placeholder(name=\"img\", dtype=tf.float32, shape=(1, 64, 64, 3))\nval = img + tf.constant([1., 2., 3.]) + tf.constant([1., 4., 4.])\nout = tf.identity(val, name=\"out\")\nwith tf.Session() as sess:\n  tflite_model = tf.contrib.lite.toco_convert(sess.graph_def, [img], [out])\n  open(\"converteds_model.tflite\", \"wb\").write(tflite_model)\n\n\nIntegrated the tflite into my app, which is from iOS sample code \"simple\"(/Users/Sensteer/Software/tensorflowclone/tensorflow/tensorflow/contrib/lite/examples/ios/simple).But exception happed because address \"out\" is NULL\n\nint input = interpreter->inputs()[0];                                 //input is 3\nfloat* out = interpreter->typed_tensor<float>(input);          //out is NULL\n\nSo my questions are:\n\nThe tflite created above is right or not?\nThe reading tflite code is right or not?\nIf the tflite file is not right, do I must create tflite with  \"pb\", \"ckpt\" and \"FrozenGraphDef\" mentioned in guide?\n\nThanks", "body": "Hi\r\n\r\nI tried the examples on iOS according to TF Lite guide, but failed when assign data to tflite because address \"out\" is NULL. probably my tflite file is incorrect, but I am not sure, can anybody give some help? \r\n\r\nMy test step is as follows:\r\n1.  Try the following code(https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite),  get the tflite file converteds_model.tflite\r\n\r\n```\r\nimport tensorflow as tf\r\nimg = tf.placeholder(name=\"img\", dtype=tf.float32, shape=(1, 64, 64, 3))\r\nval = img + tf.constant([1., 2., 3.]) + tf.constant([1., 4., 4.])\r\nout = tf.identity(val, name=\"out\")\r\nwith tf.Session() as sess:\r\n  tflite_model = tf.contrib.lite.toco_convert(sess.graph_def, [img], [out])\r\n  open(\"converteds_model.tflite\", \"wb\").write(tflite_model)\r\n```\r\n\r\n2. Integrated the tflite into my app, which is from iOS sample code \"simple\"(/Users/Sensteer/Software/tensorflowclone/tensorflow/tensorflow/contrib/lite/examples/ios/simple).But exception happed because address \"out\" is NULL\r\n\r\n```\r\nint input = interpreter->inputs()[0];                                 //input is 3\r\nfloat* out = interpreter->typed_tensor<float>(input);          //out is NULL\r\n```\r\n\r\nSo my questions are:\r\n1. The tflite created above is right or not?\r\n2. The reading tflite code is right or not?\r\n2. If the tflite file is not right, do I must create tflite with  \"pb\", \"ckpt\" and \"FrozenGraphDef\" mentioned in guide?\r\n\r\nThanks\r\n"}
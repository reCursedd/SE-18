{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22028", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22028/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22028/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22028/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22028", "id": 356483953, "node_id": "MDU6SXNzdWUzNTY0ODM5NTM=", "number": 22028, "title": "Graph Transorform fold_constants does not work with NoOp as output node", "user": {"login": "ajgarn", "id": 5390422, "node_id": "MDQ6VXNlcjUzOTA0MjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5390422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajgarn", "html_url": "https://github.com/ajgarn", "followers_url": "https://api.github.com/users/ajgarn/followers", "following_url": "https://api.github.com/users/ajgarn/following{/other_user}", "gists_url": "https://api.github.com/users/ajgarn/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajgarn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajgarn/subscriptions", "organizations_url": "https://api.github.com/users/ajgarn/orgs", "repos_url": "https://api.github.com/users/ajgarn/repos", "events_url": "https://api.github.com/users/ajgarn/events{/privacy}", "received_events_url": "https://api.github.com/users/ajgarn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-09-03T12:20:34Z", "updated_at": "2018-11-20T07:55:44Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nOS X 10.13.6</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>:<br>\nN/A</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nbinary</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\nv1.10.0-rc1-19-g656e7a2b34 1.10.0</li>\n<li><strong>Python version</strong>:<br>\nPython 3.6.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\nN/A</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\nN/A</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nN/A</li>\n<li><strong>GPU model and memory</strong>:<br>\nN/A</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nN/A</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I run the <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/graph_transforms/\">Graph Transform</a> tool and apply the transformation <code>fold_constants(ignore_errors=true)</code>. One of the output nodes I specify is a variable initializer (i.e. a <code>NoOp</code>). This causes the <code>fold_constants</code> transformation to fail and my graph is not optimized.</p>\n<h3>Source code / logs</h3>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">from</span> tensorflow.tools <span class=\"pl-k\">import</span> graph_transforms\n\n<span class=\"pl-k\">with</span> tf.Graph().as_default():\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span> Setup a graph</span>\n    \n    tf.variables_initializer(variables_to_initialize, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>initializer<span class=\"pl-pds\">'</span></span>)\n    \n    graph_def <span class=\"pl-k\">=</span> tf.get_default_graph().as_graph_def()\n\noutput_nodes <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">'</span>graph_output<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>initializer<span class=\"pl-pds\">'</span></span>]\ngraph_def <span class=\"pl-k\">=</span> graph_transforms.TransformGraph(\n        graph_def, input_nodes, output_nodes, [\n           <span class=\"pl-s\"><span class=\"pl-pds\">'</span>fold_constants(ignore_errors=true)<span class=\"pl-pds\">'</span></span>\n        ])</pre></div>\n<p>Output</p>\n<pre><code>2018-09-03 14:28:06.751967: I tensorflow/tools/graph_transforms/transform_graph.cc:318] Applying fold_constants\n2018-09-03 14:28:06.756892: E tensorflow/tools/graph_transforms/transform_graph.cc:333] fold_constants: Ignoring error Tried to fetch data for 'initializer', which produces no output.  To run to a node but not fetch any data, pass 'initializer' as an argument to the 'target_node_names' argument of the Session::Run API.\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nOS X 10.13.6\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nN/A\nTensorFlow installed from (source or binary):\nbinary\nTensorFlow version (use command below):\nv1.10.0-rc1-19-g656e7a2b34 1.10.0\nPython version:\nPython 3.6.5\nBazel version (if compiling from source):\nN/A\nGCC/Compiler version (if compiling from source):\nN/A\nCUDA/cuDNN version:\nN/A\nGPU model and memory:\nN/A\nExact command to reproduce:\nN/A\n\nDescribe the problem\nI run the Graph Transform tool and apply the transformation fold_constants(ignore_errors=true). One of the output nodes I specify is a variable initializer (i.e. a NoOp). This causes the fold_constants transformation to fail and my graph is not optimized.\nSource code / logs\nfrom tensorflow.tools import graph_transforms\n\nwith tf.Graph().as_default():\n    # Setup a graph\n    \n    tf.variables_initializer(variables_to_initialize, name='initializer')\n    \n    graph_def = tf.get_default_graph().as_graph_def()\n\noutput_nodes = ['graph_output', 'initializer']\ngraph_def = graph_transforms.TransformGraph(\n        graph_def, input_nodes, output_nodes, [\n           'fold_constants(ignore_errors=true)'\n        ])\nOutput\n2018-09-03 14:28:06.751967: I tensorflow/tools/graph_transforms/transform_graph.cc:318] Applying fold_constants\n2018-09-03 14:28:06.756892: E tensorflow/tools/graph_transforms/transform_graph.cc:333] fold_constants: Ignoring error Tried to fetch data for 'initializer', which produces no output.  To run to a node but not fetch any data, pass 'initializer' as an argument to the 'target_node_names' argument of the Session::Run API.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nOS X 10.13.6\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\nN/A\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary\r\n- **TensorFlow version (use command below)**:\r\nv1.10.0-rc1-19-g656e7a2b34 1.10.0\r\n- **Python version**:\r\nPython 3.6.5\r\n- **Bazel version (if compiling from source)**:\r\nN/A\r\n- **GCC/Compiler version (if compiling from source)**:\r\nN/A\r\n- **CUDA/cuDNN version**:\r\nN/A\r\n- **GPU model and memory**:\r\nN/A\r\n- **Exact command to reproduce**:\r\nN/A\r\n\r\n### Describe the problem\r\nI run the [Graph Transform](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/graph_transforms/) tool and apply the transformation `fold_constants(ignore_errors=true)`. One of the output nodes I specify is a variable initializer (i.e. a `NoOp`). This causes the `fold_constants` transformation to fail and my graph is not optimized.\r\n\r\n### Source code / logs\r\n```python\r\nfrom tensorflow.tools import graph_transforms\r\n\r\nwith tf.Graph().as_default():\r\n    # Setup a graph\r\n    \r\n    tf.variables_initializer(variables_to_initialize, name='initializer')\r\n    \r\n    graph_def = tf.get_default_graph().as_graph_def()\r\n\r\noutput_nodes = ['graph_output', 'initializer']\r\ngraph_def = graph_transforms.TransformGraph(\r\n        graph_def, input_nodes, output_nodes, [\r\n           'fold_constants(ignore_errors=true)'\r\n        ])\r\n```\r\nOutput\r\n\r\n    2018-09-03 14:28:06.751967: I tensorflow/tools/graph_transforms/transform_graph.cc:318] Applying fold_constants\r\n    2018-09-03 14:28:06.756892: E tensorflow/tools/graph_transforms/transform_graph.cc:333] fold_constants: Ignoring error Tried to fetch data for 'initializer', which produces no output.  To run to a node but not fetch any data, pass 'initializer' as an argument to the 'target_node_names' argument of the Session::Run API.\r\n"}
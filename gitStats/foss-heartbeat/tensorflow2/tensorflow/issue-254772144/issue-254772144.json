{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12759", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12759/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12759/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12759/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/12759", "id": 254772144, "node_id": "MDExOlB1bGxSZXF1ZXN0MTM4OTg4Nzk0", "number": 12759, "title": "Fix issue of `name` used in `build_default_serving_input_fn`", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "fef2c0", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "davidsoergel", "id": 1347381, "node_id": "MDQ6VXNlcjEzNDczODE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1347381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidsoergel", "html_url": "https://github.com/davidsoergel", "followers_url": "https://api.github.com/users/davidsoergel/followers", "following_url": "https://api.github.com/users/davidsoergel/following{/other_user}", "gists_url": "https://api.github.com/users/davidsoergel/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidsoergel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidsoergel/subscriptions", "organizations_url": "https://api.github.com/users/davidsoergel/orgs", "repos_url": "https://api.github.com/users/davidsoergel/repos", "events_url": "https://api.github.com/users/davidsoergel/events{/privacy}", "received_events_url": "https://api.github.com/users/davidsoergel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "davidsoergel", "id": 1347381, "node_id": "MDQ6VXNlcjEzNDczODE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1347381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidsoergel", "html_url": "https://github.com/davidsoergel", "followers_url": "https://api.github.com/users/davidsoergel/followers", "following_url": "https://api.github.com/users/davidsoergel/following{/other_user}", "gists_url": "https://api.github.com/users/davidsoergel/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidsoergel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidsoergel/subscriptions", "organizations_url": "https://api.github.com/users/davidsoergel/orgs", "repos_url": "https://api.github.com/users/davidsoergel/repos", "events_url": "https://api.github.com/users/davidsoergel/events{/privacy}", "received_events_url": "https://api.github.com/users/davidsoergel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2017-09-01T23:29:25Z", "updated_at": "2017-09-27T05:29:58Z", "closed_at": "2017-09-27T00:00:15Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12759", "html_url": "https://github.com/tensorflow/tensorflow/pull/12759", "diff_url": "https://github.com/tensorflow/tensorflow/pull/12759.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/12759.patch"}, "body_html": "<p>This fix tries to address the issue raised in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"254746310\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12755\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/12755/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/12755\">#12755</a> where the name used in <code>build_default_serving_input_fn</code> is not a valid variable scope:</p>\n<pre><code>$ python -c \"import tensorflow as tf\nf = {'feature': tf.placeholder(name='feature', shape=[32], dtype=tf.float32) }\nserving_input = tf.contrib.learn.utils.input_fn_utils.build_default_serving_input_fn(f)\nserving_input()\"\n...\nValueError: 'feature:0' is not a valid scope name\n</code></pre>\n<p>In <code>build_default_serving_input_fn</code>, the name of the tensor is used directly which consists of the op name and the value index:</p>\n<pre><code>class Tensor(_TensorLike):\n....\n  @property\n  def name(self):\n    \"\"\"The string name of this tensor.\"\"\"\n    if not self._op.name:\n      raise ValueError(\"Operation was not named: %s\" % self._op)\n    return \"%s:%d\" % (self._op.name, self._value_index)\n</code></pre>\n<p>This fix fixes this issue by using the name of the tensor's op (not tensor): <code>t.op.name</code> instead, to avoid the \":0\" (value index) at the end.</p>\n<p>This fix <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #12755.\">fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"254746310\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12755\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/12755/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/12755\">#12755</a>.</p>\n<p>Signed-off-by: Yong Tang <a href=\"mailto:yong.tang.github@outlook.com\">yong.tang.github@outlook.com</a></p>", "body_text": "This fix tries to address the issue raised in #12755 where the name used in build_default_serving_input_fn is not a valid variable scope:\n$ python -c \"import tensorflow as tf\nf = {'feature': tf.placeholder(name='feature', shape=[32], dtype=tf.float32) }\nserving_input = tf.contrib.learn.utils.input_fn_utils.build_default_serving_input_fn(f)\nserving_input()\"\n...\nValueError: 'feature:0' is not a valid scope name\n\nIn build_default_serving_input_fn, the name of the tensor is used directly which consists of the op name and the value index:\nclass Tensor(_TensorLike):\n....\n  @property\n  def name(self):\n    \"\"\"The string name of this tensor.\"\"\"\n    if not self._op.name:\n      raise ValueError(\"Operation was not named: %s\" % self._op)\n    return \"%s:%d\" % (self._op.name, self._value_index)\n\nThis fix fixes this issue by using the name of the tensor's op (not tensor): t.op.name instead, to avoid the \":0\" (value index) at the end.\nThis fix fixes #12755.\nSigned-off-by: Yong Tang yong.tang.github@outlook.com", "body": "This fix tries to address the issue raised in #12755 where the name used in `build_default_serving_input_fn` is not a valid variable scope:\r\n```\r\n$ python -c \"import tensorflow as tf\r\nf = {'feature': tf.placeholder(name='feature', shape=[32], dtype=tf.float32) }\r\nserving_input = tf.contrib.learn.utils.input_fn_utils.build_default_serving_input_fn(f)\r\nserving_input()\"\r\n...\r\nValueError: 'feature:0' is not a valid scope name\r\n```\r\n\r\nIn `build_default_serving_input_fn`, the name of the tensor is used directly which consists of the op name and the value index:\r\n```\r\nclass Tensor(_TensorLike):\r\n....\r\n  @property\r\n  def name(self):\r\n    \"\"\"The string name of this tensor.\"\"\"\r\n    if not self._op.name:\r\n      raise ValueError(\"Operation was not named: %s\" % self._op)\r\n    return \"%s:%d\" % (self._op.name, self._value_index)\r\n```\r\n\r\nThis fix fixes this issue by using the name of the tensor's op (not tensor): `t.op.name` instead, to avoid the \":0\" (value index) at the end.\r\n\r\nThis fix fixes #12755.\r\n\r\nSigned-off-by: Yong Tang <yong.tang.github@outlook.com>"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/431223584", "html_url": "https://github.com/tensorflow/tensorflow/issues/22526#issuecomment-431223584", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22526", "id": 431223584, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTIyMzU4NA==", "user": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-19T02:19:18Z", "updated_at": "2018-10-19T02:22:30Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7981826\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/7oud\">@7oud</a> If you start the second session after completing the first one, just run the second session like any other session. Add the following to the second session to release graph resource:</p>\n<p><code>tf.reset_default_graph()</code></p>\n<p>This is probably a better option as <code>_session-&gt;Close()</code> may encounter memory leak.</p>\n<p>To allocate GPU for the second session try this from C++ side:</p>\n<pre><code>// define option and new session\nSessionOptions options;\noptions.config.mutable_gpu_options()-&gt;set_allow_growth(allow_growth);\noptions.config.mutable_gpu_options()-&gt;set_per_process_gpu_memory_fraction(fraction);\n</code></pre>", "body_text": "@7oud If you start the second session after completing the first one, just run the second session like any other session. Add the following to the second session to release graph resource:\ntf.reset_default_graph()\nThis is probably a better option as _session->Close() may encounter memory leak.\nTo allocate GPU for the second session try this from C++ side:\n// define option and new session\nSessionOptions options;\noptions.config.mutable_gpu_options()->set_allow_growth(allow_growth);\noptions.config.mutable_gpu_options()->set_per_process_gpu_memory_fraction(fraction);", "body": "@7oud If you start the second session after completing the first one, just run the second session like any other session. Add the following to the second session to release graph resource:\r\n\r\n`tf.reset_default_graph()` \r\n\r\nThis is probably a better option as `_session->Close()` may encounter memory leak.\r\n\r\nTo allocate GPU for the second session try this from C++ side:\r\n```\r\n// define option and new session\r\nSessionOptions options;\r\noptions.config.mutable_gpu_options()->set_allow_growth(allow_growth);\r\noptions.config.mutable_gpu_options()->set_per_process_gpu_memory_fraction(fraction);\r\n```\r\n\r\n\r\n\r\n"}
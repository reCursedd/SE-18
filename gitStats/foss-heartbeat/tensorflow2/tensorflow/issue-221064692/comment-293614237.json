{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/293614237", "html_url": "https://github.com/tensorflow/tensorflow/pull/9145#issuecomment-293614237", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9145", "id": 293614237, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzYxNDIzNw==", "user": {"login": "darrengarvey", "id": 260360, "node_id": "MDQ6VXNlcjI2MDM2MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/260360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darrengarvey", "html_url": "https://github.com/darrengarvey", "followers_url": "https://api.github.com/users/darrengarvey/followers", "following_url": "https://api.github.com/users/darrengarvey/following{/other_user}", "gists_url": "https://api.github.com/users/darrengarvey/gists{/gist_id}", "starred_url": "https://api.github.com/users/darrengarvey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darrengarvey/subscriptions", "organizations_url": "https://api.github.com/users/darrengarvey/orgs", "repos_url": "https://api.github.com/users/darrengarvey/repos", "events_url": "https://api.github.com/users/darrengarvey/events{/privacy}", "received_events_url": "https://api.github.com/users/darrengarvey/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-12T15:26:04Z", "updated_at": "2017-04-12T15:26:04Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2294279\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dsmilkov\">@dsmilkov</a>. I can get the exact structure later, but <code>LOGDIR</code> is the directory given to a <code>SummaryWriter</code> and the same passed to <code>tensorboard --logdir $LOGDIR</code>. It contains <code>events-*</code>, <code>checkpoint</code>, the run meta stuff as normal.</p>\n<p>I've added a <code>metadata.tsv</code> in the correct format and a <code>projector_config.pbtxt</code> that looks like:</p>\n<p><code>embeddings { tensor_name: 'word_embedding' metadata_path: '/full/path/to/LOGDIR/metadata.tsv' }</code></p>\n<p>(as per. <a href=\"https://www.tensorflow.org/get_started/embedding_viz\" rel=\"nofollow\">https://www.tensorflow.org/get_started/embedding_viz</a>)<br>\n(also as per. <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/tensorboard/plugins/projector/__init__.py#L39\"><code>projector.visualize_embeddings()</code></a>)</p>\n<p>This doesn't work for me (ie. the metadata isn't returned from the API call that tensorboard frontend makes). As in, the metadata isn't shown, even though the embedding projector otherwise does work.</p>\n<p>If I move the <code>projector_config.pbtxt</code> to <code>$LOGDIR/plugins/org_tensorflow_tensorboard_projector</code> then the metadata shows up, but that's a very strange path and not what the docs suggest.</p>\n<p>If I move <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorboard/plugins/projector/projector_plugin.py#L364\">this line</a> - which was added in the referenced commit - to the bottom of the function then it also works, but presumably breaks on the next time <code>_latest_checkpoints_changed()</code> is called. That seemed like a hack, hence the suggested \"fix\".</p>", "body_text": "Thanks @dsmilkov. I can get the exact structure later, but LOGDIR is the directory given to a SummaryWriter and the same passed to tensorboard --logdir $LOGDIR. It contains events-*, checkpoint, the run meta stuff as normal.\nI've added a metadata.tsv in the correct format and a projector_config.pbtxt that looks like:\nembeddings { tensor_name: 'word_embedding' metadata_path: '/full/path/to/LOGDIR/metadata.tsv' }\n(as per. https://www.tensorflow.org/get_started/embedding_viz)\n(also as per. projector.visualize_embeddings())\nThis doesn't work for me (ie. the metadata isn't returned from the API call that tensorboard frontend makes). As in, the metadata isn't shown, even though the embedding projector otherwise does work.\nIf I move the projector_config.pbtxt to $LOGDIR/plugins/org_tensorflow_tensorboard_projector then the metadata shows up, but that's a very strange path and not what the docs suggest.\nIf I move this line - which was added in the referenced commit - to the bottom of the function then it also works, but presumably breaks on the next time _latest_checkpoints_changed() is called. That seemed like a hack, hence the suggested \"fix\".", "body": "Thanks @dsmilkov. I can get the exact structure later, but `LOGDIR` is the directory given to a `SummaryWriter` and the same passed to `tensorboard --logdir $LOGDIR`. It contains `events-*`, `checkpoint`, the run meta stuff as normal.\r\n\r\nI've added a `metadata.tsv` in the correct format and a `projector_config.pbtxt` that looks like:\r\n\r\n``\r\nembeddings {\r\n  tensor_name: 'word_embedding'\r\n  metadata_path: '/full/path/to/LOGDIR/metadata.tsv'\r\n}\r\n``\r\n\r\n(as per. https://www.tensorflow.org/get_started/embedding_viz)\r\n(also as per. [`projector.visualize_embeddings()`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/tensorboard/plugins/projector/__init__.py#L39))\r\n\r\nThis doesn't work for me (ie. the metadata isn't returned from the API call that tensorboard frontend makes). As in, the metadata isn't shown, even though the embedding projector otherwise does work.\r\n\r\nIf I move the `projector_config.pbtxt` to `$LOGDIR/plugins/org_tensorflow_tensorboard_projector` then the metadata shows up, but that's a very strange path and not what the docs suggest.\r\n\r\nIf I move [this line](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tensorboard/plugins/projector/projector_plugin.py#L364) - which was added in the referenced commit - to the bottom of the function then it also works, but presumably breaks on the next time `_latest_checkpoints_changed()` is called. That seemed like a hack, hence the suggested \"fix\"."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4332", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4332/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4332/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4332/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4332", "id": 176312458, "node_id": "MDU6SXNzdWUxNzYzMTI0NTg=", "number": 4332, "title": "Tensor with inconsistent dimension size? ", "user": {"login": "BichenWuUCB", "id": 8868254, "node_id": "MDQ6VXNlcjg4NjgyNTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/8868254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BichenWuUCB", "html_url": "https://github.com/BichenWuUCB", "followers_url": "https://api.github.com/users/BichenWuUCB/followers", "following_url": "https://api.github.com/users/BichenWuUCB/following{/other_user}", "gists_url": "https://api.github.com/users/BichenWuUCB/gists{/gist_id}", "starred_url": "https://api.github.com/users/BichenWuUCB/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BichenWuUCB/subscriptions", "organizations_url": "https://api.github.com/users/BichenWuUCB/orgs", "repos_url": "https://api.github.com/users/BichenWuUCB/repos", "events_url": "https://api.github.com/users/BichenWuUCB/events{/privacy}", "received_events_url": "https://api.github.com/users/BichenWuUCB/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-09-12T07:42:13Z", "updated_at": "2016-09-12T16:42:16Z", "closed_at": "2016-09-12T16:42:11Z", "author_association": "NONE", "body_html": "<p>I've been implementing a convolutional neural network for object detection and I met the issue below:</p>\n<p>For object detection task, usually, one input image is associated with an undetermined number of object bounding boxes. Each bounding box can be represented by 4 coordinates. Thus, to represent bounding boxes as a tensor, the shape will be:<br>\n<em>[<strong>batch_size, variable_num_bbox(?), 4</strong>]</em>.<br>\nNote that here, it's not just that <em><strong>variable_num_bbox</strong></em> can't be determined before the graph construction, but also, even within one batch input, different images can have different numbers of bounding boxes.</p>\n<p>As an illustrative example, I would like to convert the following array into a tensor:<br>\n<em>[[[1, 2, 3, 4], [2, 3, 4, 5]], [[3, 4, 5, 6]]]</em><br>\nHere, <em><strong>variable_num_bbox</strong></em> is 2 for the first image, but it's 1 for the second image.</p>\n<p>I've tried and failed several ways to convert the above nested list to a tensor, which leads me to the question whether tensorflow support tensors with inconsistent dimension size? If no, is there any plan to support it to give developers such flexibility? And if it's not going to be supported, is there a way to by-pass this issue for object detection task? One solution would be to set <em><strong>batch_size=1</strong></em> , and a bounding box can be represented as <em><strong>[variable_num_bbox(?), 4]</strong></em>, so yes, the dimension inconsistency is gone, but that will hurt the efficiencyy significantly.</p>", "body_text": "I've been implementing a convolutional neural network for object detection and I met the issue below:\nFor object detection task, usually, one input image is associated with an undetermined number of object bounding boxes. Each bounding box can be represented by 4 coordinates. Thus, to represent bounding boxes as a tensor, the shape will be:\n[batch_size, variable_num_bbox(?), 4].\nNote that here, it's not just that variable_num_bbox can't be determined before the graph construction, but also, even within one batch input, different images can have different numbers of bounding boxes.\nAs an illustrative example, I would like to convert the following array into a tensor:\n[[[1, 2, 3, 4], [2, 3, 4, 5]], [[3, 4, 5, 6]]]\nHere, variable_num_bbox is 2 for the first image, but it's 1 for the second image.\nI've tried and failed several ways to convert the above nested list to a tensor, which leads me to the question whether tensorflow support tensors with inconsistent dimension size? If no, is there any plan to support it to give developers such flexibility? And if it's not going to be supported, is there a way to by-pass this issue for object detection task? One solution would be to set batch_size=1 , and a bounding box can be represented as [variable_num_bbox(?), 4], so yes, the dimension inconsistency is gone, but that will hurt the efficiencyy significantly.", "body": "I've been implementing a convolutional neural network for object detection and I met the issue below:\n\nFor object detection task, usually, one input image is associated with an undetermined number of object bounding boxes. Each bounding box can be represented by 4 coordinates. Thus, to represent bounding boxes as a tensor, the shape will be: \n    _[**batch_size, variable_num_bbox(?), 4**]_. \nNote that here, it's not just that _**variable_num_bbox**_ can't be determined before the graph construction, but also, even within one batch input, different images can have different numbers of bounding boxes. \n\nAs an illustrative example, I would like to convert the following array into a tensor: \n    _[[[1, 2, 3, 4], [2, 3, 4, 5]], [[3, 4, 5, 6]]]_\nHere, _**variable_num_bbox**_ is 2 for the first image, but it's 1 for the second image. \n\nI've tried and failed several ways to convert the above nested list to a tensor, which leads me to the question whether tensorflow support tensors with inconsistent dimension size? If no, is there any plan to support it to give developers such flexibility? And if it's not going to be supported, is there a way to by-pass this issue for object detection task? One solution would be to set _**batch_size=1**_ , and a bounding box can be represented as _**[variable_num_bbox(?), 4]**_, so yes, the dimension inconsistency is gone, but that will hurt the efficiencyy significantly.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/228302700", "pull_request_review_id": 168546202, "id": 228302700, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyODMwMjcwMA==", "diff_hunk": "@@ -662,7 +662,7 @@ def prefetch(self, buffer_size):\n     return PrefetchDataset(self, buffer_size)\n \n   @staticmethod\n-  def list_files(file_pattern, shuffle=None, seed=None):\n+  def list_files(file_pattern, shuffle=None, seed=None, buffer_size=8):", "path": "tensorflow/python/data/ops/dataset_ops.py", "position": null, "original_position": 5, "commit_id": "f8c0c3e54375e759ff5de203fba9cbd30496897a", "original_commit_id": "f5f300e18fdeb7c427a1f2dc86002e216f429d1a", "user": {"login": "feihugis", "id": 5057740, "node_id": "MDQ6VXNlcjUwNTc3NDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5057740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feihugis", "html_url": "https://github.com/feihugis", "followers_url": "https://api.github.com/users/feihugis/followers", "following_url": "https://api.github.com/users/feihugis/following{/other_user}", "gists_url": "https://api.github.com/users/feihugis/gists{/gist_id}", "starred_url": "https://api.github.com/users/feihugis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feihugis/subscriptions", "organizations_url": "https://api.github.com/users/feihugis/orgs", "repos_url": "https://api.github.com/users/feihugis/repos", "events_url": "https://api.github.com/users/feihugis/events{/privacy}", "received_events_url": "https://api.github.com/users/feihugis/received_events", "type": "User", "site_admin": false}, "body": "@mrry Thanks for your review! Yes, the uniformly shuffling is required by some cases and may be important/necessary for model training. In this PR, it looks impossible to uniformly shuffle the filenames generated by `MatchingFilesDataset` Op as we can not know the number of filenames in advance until reaching the end of `MatchingFilesDataset` iterator. \r\n\r\nConsidering these, the current version may be better. Do you agree or have any suggestion? If keeping the current version of `list_files`, may I just add the benchmark test and update the variable names but remove other changes in this PR?", "created_at": "2018-10-25T19:20:01Z", "updated_at": "2018-11-02T01:04:32Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/23144#discussion_r228302700", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23144", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/228302700"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/23144#discussion_r228302700"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23144"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> Thanks for your review! Yes, the uniformly shuffling is required by some cases and may be important/necessary for model training. In this PR, it looks impossible to uniformly shuffle the filenames generated by <code>MatchingFilesDataset</code> Op as we can not know the number of filenames in advance until reaching the end of <code>MatchingFilesDataset</code> iterator.</p>\n<p>Considering these, the current version may be better. Do you agree or have any suggestion? If keeping the current version of <code>list_files</code>, may I just add the benchmark test and update the variable names but remove other changes in this PR?</p>", "body_text": "@mrry Thanks for your review! Yes, the uniformly shuffling is required by some cases and may be important/necessary for model training. In this PR, it looks impossible to uniformly shuffle the filenames generated by MatchingFilesDataset Op as we can not know the number of filenames in advance until reaching the end of MatchingFilesDataset iterator.\nConsidering these, the current version may be better. Do you agree or have any suggestion? If keeping the current version of list_files, may I just add the benchmark test and update the variable names but remove other changes in this PR?", "in_reply_to_id": 228037123}
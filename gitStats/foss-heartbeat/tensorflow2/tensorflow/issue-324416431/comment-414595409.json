{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/414595409", "html_url": "https://github.com/tensorflow/tensorflow/issues/19384#issuecomment-414595409", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19384", "id": 414595409, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDU5NTQwOQ==", "user": {"login": "kate-kate", "id": 4061805, "node_id": "MDQ6VXNlcjQwNjE4MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/4061805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kate-kate", "html_url": "https://github.com/kate-kate", "followers_url": "https://api.github.com/users/kate-kate/followers", "following_url": "https://api.github.com/users/kate-kate/following{/other_user}", "gists_url": "https://api.github.com/users/kate-kate/gists{/gist_id}", "starred_url": "https://api.github.com/users/kate-kate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kate-kate/subscriptions", "organizations_url": "https://api.github.com/users/kate-kate/orgs", "repos_url": "https://api.github.com/users/kate-kate/repos", "events_url": "https://api.github.com/users/kate-kate/events{/privacy}", "received_events_url": "https://api.github.com/users/kate-kate/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-21T08:32:27Z", "updated_at": "2018-08-21T08:35:40Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4723042\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/achowdhery\">@achowdhery</a> Sure<br>\nLogcat messages when I use TFlite file and android demo with ml-kit and my custom tflite model converted with TOCO:</p>\n<pre><code>08-21 11:22:14.971 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err: com.google.firebase.ml.common.FirebaseMLException: The load task failed\n08-21 11:22:14.973 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at com.google.android.gms.internal.firebase_ml.zzgy.zzf(Unknown Source:75)\n        at com.google.android.gms.internal.firebase_ml.zzgu.call(Unknown Source:8)\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\n08-21 11:22:14.974 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at com.google.android.gms.internal.firebase_ml.zzgq.run(Unknown Source:4)\n08-21 11:22:14.978 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at android.os.Handler.handleCallback(Handler.java:789)\n08-21 11:22:14.980 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:98)\n        at android.os.Looper.loop(Looper.java:164)\n        at android.os.HandlerThread.run(HandlerThread.java:65)\n    Caused by: com.google.firebase.ml.common.FirebaseMLException: Internal error has occurred when executing Firebase ML tasks\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:15)\n    \t... 5 more\n    Caused by: java.lang.IllegalArgumentException: Cannot create interpreter: Didn't find custom op for name 'TFLite_Detection_PostProcess'\n    Registration failed.\n08-21 11:22:14.981 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at org.tensorflow.lite.NativeInterpreterWrapper.createInterpreter(Native Method)\n        at org.tensorflow.lite.NativeInterpreterWrapper.&lt;init&gt;(NativeInterpreterWrapper.java:63)\n        at org.tensorflow.lite.NativeInterpreterWrapper.&lt;init&gt;(NativeInterpreterWrapper.java:51)\n        at org.tensorflow.lite.Interpreter.&lt;init&gt;(Interpreter.java:90)\n        at com.google.android.gms.internal.firebase_ml.zzhn.zzey(Unknown Source:103)\n        at com.google.android.gms.internal.firebase_ml.zzha.zzfb(Unknown Source:75)\n        at com.google.android.gms.internal.firebase_ml.zzha.call(Unknown Source:0)\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\n    \t... 5 more\n</code></pre>\n<p>When I use Tensorflow Mobile android demo, TF Detect, without changing anything in models</p>\n<pre><code>08-21 11:27:01.833 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded TensorFlow native methods (RunStats error may be ignored)\n08-21 11:27:03.391 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Model load took 1190ms, TensorFlow version: 1.10.0\n08-21 11:27:03.392 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded model from 'file:///android_asset/ssd_mobilenet_v1_android_export.pb'\n08-21 11:27:03.394 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Camera orientation relative to screen canvas: 90\n08-21 11:27:03.395 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Initializing at size 640x480\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo E/tensorflow: ObjectTracker: libtensorflow_demo.so not found, tracking unavailable\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo I/tensorflow: MultiBoxTracker: Initializing ObjectTracker: 640x480\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo E/tensorflow: ObjectTracker: Native object tracking support not found. See tensorflow/examples/android/README.md for details.\n08-21 11:27:03.405 17319-17319/org.tensorflow.demo E/tensorflow: MultiBoxTracker: Object tracking support not found. See tensorflow/examples/android/README.md for details.\n08-21 11:27:03.405 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Preparing image 1 for detection in bg thread.\n</code></pre>\n<p>BTW - today the magic happened. I still had the error above while running TF Detect, but it worked! For the first time. For other who faced this problem - this time Android Studio warned be that its going to reinstall APK. After reinstallation it worked</p>\n<p>But the error with ml-kit remains :(</p>", "body_text": "@achowdhery Sure\nLogcat messages when I use TFlite file and android demo with ml-kit and my custom tflite model converted with TOCO:\n08-21 11:22:14.971 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err: com.google.firebase.ml.common.FirebaseMLException: The load task failed\n08-21 11:22:14.973 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at com.google.android.gms.internal.firebase_ml.zzgy.zzf(Unknown Source:75)\n        at com.google.android.gms.internal.firebase_ml.zzgu.call(Unknown Source:8)\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\n08-21 11:22:14.974 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at com.google.android.gms.internal.firebase_ml.zzgq.run(Unknown Source:4)\n08-21 11:22:14.978 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at android.os.Handler.handleCallback(Handler.java:789)\n08-21 11:22:14.980 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:98)\n        at android.os.Looper.loop(Looper.java:164)\n        at android.os.HandlerThread.run(HandlerThread.java:65)\n    Caused by: com.google.firebase.ml.common.FirebaseMLException: Internal error has occurred when executing Firebase ML tasks\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:15)\n    \t... 5 more\n    Caused by: java.lang.IllegalArgumentException: Cannot create interpreter: Didn't find custom op for name 'TFLite_Detection_PostProcess'\n    Registration failed.\n08-21 11:22:14.981 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at org.tensorflow.lite.NativeInterpreterWrapper.createInterpreter(Native Method)\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:63)\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:51)\n        at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:90)\n        at com.google.android.gms.internal.firebase_ml.zzhn.zzey(Unknown Source:103)\n        at com.google.android.gms.internal.firebase_ml.zzha.zzfb(Unknown Source:75)\n        at com.google.android.gms.internal.firebase_ml.zzha.call(Unknown Source:0)\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\n    \t... 5 more\n\nWhen I use Tensorflow Mobile android demo, TF Detect, without changing anything in models\n08-21 11:27:01.833 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded TensorFlow native methods (RunStats error may be ignored)\n08-21 11:27:03.391 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Model load took 1190ms, TensorFlow version: 1.10.0\n08-21 11:27:03.392 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded model from 'file:///android_asset/ssd_mobilenet_v1_android_export.pb'\n08-21 11:27:03.394 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Camera orientation relative to screen canvas: 90\n08-21 11:27:03.395 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Initializing at size 640x480\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo E/tensorflow: ObjectTracker: libtensorflow_demo.so not found, tracking unavailable\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo I/tensorflow: MultiBoxTracker: Initializing ObjectTracker: 640x480\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo E/tensorflow: ObjectTracker: Native object tracking support not found. See tensorflow/examples/android/README.md for details.\n08-21 11:27:03.405 17319-17319/org.tensorflow.demo E/tensorflow: MultiBoxTracker: Object tracking support not found. See tensorflow/examples/android/README.md for details.\n08-21 11:27:03.405 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Preparing image 1 for detection in bg thread.\n\nBTW - today the magic happened. I still had the error above while running TF Detect, but it worked! For the first time. For other who faced this problem - this time Android Studio warned be that its going to reinstall APK. After reinstallation it worked\nBut the error with ml-kit remains :(", "body": "@achowdhery Sure\r\nLogcat messages when I use TFlite file and android demo with ml-kit and my custom tflite model converted with TOCO:\r\n```\r\n08-21 11:22:14.971 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err: com.google.firebase.ml.common.FirebaseMLException: The load task failed\r\n08-21 11:22:14.973 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at com.google.android.gms.internal.firebase_ml.zzgy.zzf(Unknown Source:75)\r\n        at com.google.android.gms.internal.firebase_ml.zzgu.call(Unknown Source:8)\r\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\r\n08-21 11:22:14.974 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at com.google.android.gms.internal.firebase_ml.zzgq.run(Unknown Source:4)\r\n08-21 11:22:14.978 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at android.os.Handler.handleCallback(Handler.java:789)\r\n08-21 11:22:14.980 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:98)\r\n        at android.os.Looper.loop(Looper.java:164)\r\n        at android.os.HandlerThread.run(HandlerThread.java:65)\r\n    Caused by: com.google.firebase.ml.common.FirebaseMLException: Internal error has occurred when executing Firebase ML tasks\r\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:15)\r\n    \t... 5 more\r\n    Caused by: java.lang.IllegalArgumentException: Cannot create interpreter: Didn't find custom op for name 'TFLite_Detection_PostProcess'\r\n    Registration failed.\r\n08-21 11:22:14.981 16825-16825/com.google.firebase.codelab.mlkit_custommodel W/System.err:     at org.tensorflow.lite.NativeInterpreterWrapper.createInterpreter(Native Method)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:63)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:51)\r\n        at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:90)\r\n        at com.google.android.gms.internal.firebase_ml.zzhn.zzey(Unknown Source:103)\r\n        at com.google.android.gms.internal.firebase_ml.zzha.zzfb(Unknown Source:75)\r\n        at com.google.android.gms.internal.firebase_ml.zzha.call(Unknown Source:0)\r\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\r\n    \t... 5 more\r\n```\r\n\r\nWhen I use Tensorflow Mobile android demo, TF Detect, without changing anything in models\r\n```\r\n08-21 11:27:01.833 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded TensorFlow native methods (RunStats error may be ignored)\r\n08-21 11:27:03.391 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Model load took 1190ms, TensorFlow version: 1.10.0\r\n08-21 11:27:03.392 17319-17319/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded model from 'file:///android_asset/ssd_mobilenet_v1_android_export.pb'\r\n08-21 11:27:03.394 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Camera orientation relative to screen canvas: 90\r\n08-21 11:27:03.395 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Initializing at size 640x480\r\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo E/tensorflow: ObjectTracker: libtensorflow_demo.so not found, tracking unavailable\r\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo I/tensorflow: MultiBoxTracker: Initializing ObjectTracker: 640x480\r\n08-21 11:27:03.400 17319-17319/org.tensorflow.demo E/tensorflow: ObjectTracker: Native object tracking support not found. See tensorflow/examples/android/README.md for details.\r\n08-21 11:27:03.405 17319-17319/org.tensorflow.demo E/tensorflow: MultiBoxTracker: Object tracking support not found. See tensorflow/examples/android/README.md for details.\r\n08-21 11:27:03.405 17319-17319/org.tensorflow.demo I/tensorflow: DetectorActivity: Preparing image 1 for detection in bg thread.\r\n```\r\nBTW - today the magic happened. I still had the error above while running TF Detect, but it worked! For the first time. For other who faced this problem - this time Android Studio warned be that its going to reinstall APK. After reinstallation it worked\r\n\r\nBut the error with ml-kit remains :("}
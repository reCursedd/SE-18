{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16893", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16893/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16893/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16893/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16893", "id": 295939432, "node_id": "MDU6SXNzdWUyOTU5Mzk0MzI=", "number": 16893, "title": "Building TensorFlow v1.5.0 from sources does not detect bazel v0.10.0 correctly", "user": {"login": "dmak", "id": 366965, "node_id": "MDQ6VXNlcjM2Njk2NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/366965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmak", "html_url": "https://github.com/dmak", "followers_url": "https://api.github.com/users/dmak/followers", "following_url": "https://api.github.com/users/dmak/following{/other_user}", "gists_url": "https://api.github.com/users/dmak/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmak/subscriptions", "organizations_url": "https://api.github.com/users/dmak/orgs", "repos_url": "https://api.github.com/users/dmak/repos", "events_url": "https://api.github.com/users/dmak/events{/privacy}", "received_events_url": "https://api.github.com/users/dmak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-02-09T16:58:17Z", "updated_at": "2018-03-15T17:33:01Z", "closed_at": "2018-03-15T17:33:01Z", "author_association": "NONE", "body_html": "<p>It looks like build script uses strings for version comparison, i.e. tuple <code>(\"0\", \"10\", \"0\") &lt; (\"0\", \"4\", \"5\")</code>, hence Bazel version 0.10.0 is considered less then required version 0.4.5:</p>\n<pre><code>user@server:~/tensorflow-1.5.0$ bazel build --config opt //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni\nERROR: /home/user/tensorflow-1.5.0/WORKSPACE:15:1: Traceback (most recent call last):\n        File \"/home/user/tensorflow-1.5.0/WORKSPACE\", line 15\n                closure_repositories()\n        File \"/home/user/.cache/bazel/_bazel_user/999dc7eb04d16a3dd0103e4cb7e7e45c/external/io_bazel_rules_closure/closure/repositories.bzl\", line 69, in closure_repositories\n                _check_bazel_version(\"Closure Rules\", \"0.4.5\")\n        File \"/home/user/.cache/bazel/_bazel_user/999dc7eb04d16a3dd0103e4cb7e7e45c/external/io_bazel_rules_closure/closure/repositories.bzl\", line 172, in _check_bazel_version\n                fail((\"%s requires Bazel &gt;=%s but was...)))\nClosure Rules requires Bazel &gt;=0.4.5 but was 0.10.0- (@non-git)\n</code></pre>\n<p>OS Platform and Distribution: SuSE Linux 12.3<br>\nTensorFlow installed from: <a href=\"https://github.com/tensorflow/tensorflow/archive/v1.5.0.zip\">this source</a><br>\nTensorFlow version: 1.5.0<br>\nBazel version: 0.10.0, compiled from <a href=\"https://github.com/bazelbuild/bazel/releases/download/0.10.0/bazel-0.10.0-dist.zip\">this source</a><br>\nCUDA/cuDNN version: N/A / was not enabled<br>\nGPU model and memory: N/A / was not enabled<br>\nExact command to reproduce: <code>bazel build --config opt //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni</code></p>", "body_text": "It looks like build script uses strings for version comparison, i.e. tuple (\"0\", \"10\", \"0\") < (\"0\", \"4\", \"5\"), hence Bazel version 0.10.0 is considered less then required version 0.4.5:\nuser@server:~/tensorflow-1.5.0$ bazel build --config opt //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni\nERROR: /home/user/tensorflow-1.5.0/WORKSPACE:15:1: Traceback (most recent call last):\n        File \"/home/user/tensorflow-1.5.0/WORKSPACE\", line 15\n                closure_repositories()\n        File \"/home/user/.cache/bazel/_bazel_user/999dc7eb04d16a3dd0103e4cb7e7e45c/external/io_bazel_rules_closure/closure/repositories.bzl\", line 69, in closure_repositories\n                _check_bazel_version(\"Closure Rules\", \"0.4.5\")\n        File \"/home/user/.cache/bazel/_bazel_user/999dc7eb04d16a3dd0103e4cb7e7e45c/external/io_bazel_rules_closure/closure/repositories.bzl\", line 172, in _check_bazel_version\n                fail((\"%s requires Bazel >=%s but was...)))\nClosure Rules requires Bazel >=0.4.5 but was 0.10.0- (@non-git)\n\nOS Platform and Distribution: SuSE Linux 12.3\nTensorFlow installed from: this source\nTensorFlow version: 1.5.0\nBazel version: 0.10.0, compiled from this source\nCUDA/cuDNN version: N/A / was not enabled\nGPU model and memory: N/A / was not enabled\nExact command to reproduce: bazel build --config opt //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni", "body": "It looks like build script uses strings for version comparison, i.e. tuple `(\"0\", \"10\", \"0\") < (\"0\", \"4\", \"5\")`, hence Bazel version 0.10.0 is considered less then required version 0.4.5:\r\n```\r\nuser@server:~/tensorflow-1.5.0$ bazel build --config opt //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni\r\nERROR: /home/user/tensorflow-1.5.0/WORKSPACE:15:1: Traceback (most recent call last):\r\n        File \"/home/user/tensorflow-1.5.0/WORKSPACE\", line 15\r\n                closure_repositories()\r\n        File \"/home/user/.cache/bazel/_bazel_user/999dc7eb04d16a3dd0103e4cb7e7e45c/external/io_bazel_rules_closure/closure/repositories.bzl\", line 69, in closure_repositories\r\n                _check_bazel_version(\"Closure Rules\", \"0.4.5\")\r\n        File \"/home/user/.cache/bazel/_bazel_user/999dc7eb04d16a3dd0103e4cb7e7e45c/external/io_bazel_rules_closure/closure/repositories.bzl\", line 172, in _check_bazel_version\r\n                fail((\"%s requires Bazel >=%s but was...)))\r\nClosure Rules requires Bazel >=0.4.5 but was 0.10.0- (@non-git)\r\n```\r\nOS Platform and Distribution: SuSE Linux 12.3\r\nTensorFlow installed from: [this source](https://github.com/tensorflow/tensorflow/archive/v1.5.0.zip)\r\nTensorFlow version: 1.5.0\r\nBazel version: 0.10.0, compiled from [this source](https://github.com/bazelbuild/bazel/releases/download/0.10.0/bazel-0.10.0-dist.zip)\r\nCUDA/cuDNN version: N/A / was not enabled\r\nGPU model and memory: N/A / was not enabled\r\nExact command to reproduce: `bazel build --config opt //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni`"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/270291408", "html_url": "https://github.com/tensorflow/tensorflow/issues/6558#issuecomment-270291408", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6558", "id": 270291408, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDI5MTQwOA==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-04T04:14:42Z", "updated_at": "2017-01-04T04:14:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p>So I'm running into same problem when trying to compile with avx/avx2. The following works on \"tags/0.12.0-rc1\" tag, but doesn't work on today's head. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6969686\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/benoitsteiner\">@benoitsteiner</a> -- something in the last 2 weeks broke avx/avx2 compilation, what do you think about <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=109501\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fnl\">@fnl</a>'s solution in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"197968641\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6558\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6558/hovercard?comment_id=269643996&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/6558#issuecomment-269643996\">#6558 (comment)</a> ?</p>\n<pre><code>export flags=\"-c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --config=cuda\"\nbazel build $flags //tensorflow/tools/pip_package:build_pip_package\n\n...\ncompilation terminated.\nERROR: /local_home/yaroslav/tensorflow_avx2.git/tensorflow/tensorflow/core/kernels/BUILD:582:1: Couldn't build file tensorflow/core/kernels/_objs/mirror_pad_op/tensorflow/core/kernels/mirror_pad_op_cpu_impl_1.pic.o: C++ compilation of rule '//tensorflow/core/kernels:mirror_pad_op' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 126 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nIn file included from ./tensorflow/core/framework/numeric_types.h:25:0,\n                 from ./tensorflow/core/framework/register_types.h:20,\n                 from ./tensorflow/core/kernels/mirror_pad_op_cpu_impl.h:21,\n                 from tensorflow/core/kernels/mirror_pad_op_cpu_impl_1.cc:17:\n./third_party/eigen3/unsupported/Eigen/CXX11/FixedPoint:42:52: fatal error: src/Tensor/TensorContractionThreadPool.h: No such file or directory\n #include \"src/Tensor/TensorContractionThreadPool.h\"\n</code></pre>", "body_text": "So I'm running into same problem when trying to compile with avx/avx2. The following works on \"tags/0.12.0-rc1\" tag, but doesn't work on today's head. @benoitsteiner -- something in the last 2 weeks broke avx/avx2 compilation, what do you think about @fnl's solution in #6558 (comment) ?\nexport flags=\"-c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --config=cuda\"\nbazel build $flags //tensorflow/tools/pip_package:build_pip_package\n\n...\ncompilation terminated.\nERROR: /local_home/yaroslav/tensorflow_avx2.git/tensorflow/tensorflow/core/kernels/BUILD:582:1: Couldn't build file tensorflow/core/kernels/_objs/mirror_pad_op/tensorflow/core/kernels/mirror_pad_op_cpu_impl_1.pic.o: C++ compilation of rule '//tensorflow/core/kernels:mirror_pad_op' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 126 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nIn file included from ./tensorflow/core/framework/numeric_types.h:25:0,\n                 from ./tensorflow/core/framework/register_types.h:20,\n                 from ./tensorflow/core/kernels/mirror_pad_op_cpu_impl.h:21,\n                 from tensorflow/core/kernels/mirror_pad_op_cpu_impl_1.cc:17:\n./third_party/eigen3/unsupported/Eigen/CXX11/FixedPoint:42:52: fatal error: src/Tensor/TensorContractionThreadPool.h: No such file or directory\n #include \"src/Tensor/TensorContractionThreadPool.h\"", "body": "So I'm running into same problem when trying to compile with avx/avx2. The following works on \"tags/0.12.0-rc1\" tag, but doesn't work on today's head. @benoitsteiner -- something in the last 2 weeks broke avx/avx2 compilation, what do you think about @fnl's solution in https://github.com/tensorflow/tensorflow/issues/6558#issuecomment-269643996 ?\r\n\r\n```\r\nexport flags=\"-c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --config=cuda\"\r\nbazel build $flags //tensorflow/tools/pip_package:build_pip_package\r\n\r\n...\r\ncompilation terminated.\r\nERROR: /local_home/yaroslav/tensorflow_avx2.git/tensorflow/tensorflow/core/kernels/BUILD:582:1: Couldn't build file tensorflow/core/kernels/_objs/mirror_pad_op/tensorflow/core/kernels/mirror_pad_op_cpu_impl_1.pic.o: C++ compilation of rule '//tensorflow/core/kernels:mirror_pad_op' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 126 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\nIn file included from ./tensorflow/core/framework/numeric_types.h:25:0,\r\n                 from ./tensorflow/core/framework/register_types.h:20,\r\n                 from ./tensorflow/core/kernels/mirror_pad_op_cpu_impl.h:21,\r\n                 from tensorflow/core/kernels/mirror_pad_op_cpu_impl_1.cc:17:\r\n./third_party/eigen3/unsupported/Eigen/CXX11/FixedPoint:42:52: fatal error: src/Tensor/TensorContractionThreadPool.h: No such file or directory\r\n #include \"src/Tensor/TensorContractionThreadPool.h\"\r\n```"}
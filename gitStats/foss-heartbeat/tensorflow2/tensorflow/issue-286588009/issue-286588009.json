{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15930", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15930/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15930/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15930/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15930", "id": 286588009, "node_id": "MDU6SXNzdWUyODY1ODgwMDk=", "number": 15930, "title": "Discontinuity at halfway point in graph output", "user": {"login": "ppfaff", "id": 14283358, "node_id": "MDQ6VXNlcjE0MjgzMzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/14283358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppfaff", "html_url": "https://github.com/ppfaff", "followers_url": "https://api.github.com/users/ppfaff/followers", "following_url": "https://api.github.com/users/ppfaff/following{/other_user}", "gists_url": "https://api.github.com/users/ppfaff/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppfaff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppfaff/subscriptions", "organizations_url": "https://api.github.com/users/ppfaff/orgs", "repos_url": "https://api.github.com/users/ppfaff/repos", "events_url": "https://api.github.com/users/ppfaff/events{/privacy}", "received_events_url": "https://api.github.com/users/ppfaff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-01-07T18:17:27Z", "updated_at": "2018-01-08T23:12:39Z", "closed_at": "2018-01-08T23:12:15Z", "author_association": "NONE", "body_html": "<ul>\n<li><strong>I have written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nto reproduce the error:</li>\n</ul>\n<ol>\n<li>\n<p>convert HnH_gate.txt to HnH_gate.py</p>\n</li>\n<li>\n<p>Edit mypath in out() method at end of file for your system.  Save</p>\n</li>\n<li>\n<p>in python: run HnH_gate.py</p>\n</li>\n<li>\n<p>run out() to create csv files for the good and bad output<br>\ni) out(\"101\", new_probka_good)<br>\nii) out(\"102\", new_probka_bad)</p>\n</li>\n<li>\n<p>Plot data from hh_101.csv and hh_102.csv and verify the discontinuity at half way point in hh_102.csv</p>\n</li>\n<li>\n<p>Two additional tests can be run:<br>\ni) Edit parameter timepoints in main() to show error remaps to half way point.<br>\nii) My temporary correction is to create 2x points and throw half away.  this is done in p_update() setting cut_in_half = True</p>\n</li>\n<li>\n<p>This same error was found running the code in Tensorflow 1.4 on MacOS Sierra.  My system info is:</p>\n</li>\n</ol>\n<p>== cat /etc/issue ===============================================<br>\nLinux PAULP-XPS15 4.4.0-43-Microsoft <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a>-Microsoft Wed Dec 31 14:42:53 PST 2014 x86_64 x86_64 x86_64 GNU/Linux<br>\nVERSION=\"16.04.3 LTS (Xenial Xerus)\"<br>\nVERSION_ID=\"16.04\"<br>\nVERSION_CODENAME=xenial</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609<br>\nCopyright (C) 2015 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux PAULP-XPS15 4.4.0-43-Microsoft <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a>-Microsoft Wed Dec 31 14:42:53 PST 2014 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nnumpy (1.13.3)<br>\nnumpydoc (0.7.0)<br>\nprotobuf (3.4.1)<br>\ntensorflow (1.3.0)<br>\ntensorflow-tensorboard (0.1.5)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.3.0<br>\ntf.GIT_VERSION = b'unknown'<br>\ntf.COMPILER_VERSION = b'unknown'<br>\nSanity check: array([1], dtype=int32)</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH is unset<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\n./tf_env_collect.sh: line 105: nvidia-smi: command not found</p>\n<p>== cuda libs  ===================================================</p>\n<h3>Describe the problem</h3>\n<p>I am running a RNN for a Hodgkin and Huxley type gating of an ion channel protein<br>\ncalled HnH_gate.py.<br>\nThe program takes a placeholder vmem and produces a timeseries output of the size<br>\ntimepoints.<br>\nAt the halfway point in the timeseries there is a discontinuity in the results<br>\nThis only appears with some arrays fed to my tf.placeholder.  Others produce normal<br>\nresults.  I can correct for the problem by doubling the number of timepoints requested<br>\nand throwing half away.</p>\n<p>The array:<br>\nvmem_list_good = [[-100.0, -90.0, -80.0, -70.0, -60.0, -50.0, -41.0, -30.0, -20.0, -10.0, 0.0, 10.0, 20.0, 30.0, 40.0, 50.0],<br>\n[-100.0, -90.0, -80.0, -70.0, -60.0, -50.0, -41.0, -30.0, -20.0, -10.0, 0.0, 10.0, 20.0, 30.0, 40.0, 50.0]]<br>\nappears to work perfectly<br>\nThe array:<br>\nvmem_list_bad = [[80.0, 60.0, 40.0, 20.0, 00.0, -20.0, -41.0, -60.0, -80.0, -55.0, 0.0, 10.0, 20.0, 30.0, 40.0, 50.0],<br>\n[70.0, 50.0, 30.0, 10.0, -10.0, -30.0, -50.0, -70.0, -90.0, -30.0, -10.0, 0.0, 10.0, 20.0, 30.0, 40.0]]</p>\n<p>shows the error.</p>\n<p>To see my temporary correction, edit the parameter in the HH.p_update() method<br>\nto: cut_in_half = True</p>\n<p>I have written a short output routine to export the simulation to a csv file,<br>\njust edit the path and provide a string to make a unique filename:</p>\n<p>out(\"101\", new_probka_good)<br>\nout(\"102\", new_probka_bad)</p>\n<h3>Source code / logs</h3>\n<p>program file is: HnH_gate.py (provided as HnH_gate.txt)<br>\nHnH_gate.txt  (convert to HnH_gate.py)<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1610057/HnH_gate.txt\">HnH_gate.txt</a></p>\n<p>System and Error Description: HnH_gate_bug_report.txt<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1610056/HnH_gate_bug_report.txt\">HnH_gate_bug_report.txt</a></p>\n<p>Output example demonstrating problem: Artifact plotting new_probka_bad.py<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1610058/Artifact.plotting.new_probka_bad.pdf\">Artifact plotting new_probka_bad.pdf</a></p>\n<p>Thanks for your help.<br>\nPaul</p>", "body_text": "I have written custom code (as opposed to using a stock example script provided in TensorFlow):\nto reproduce the error:\n\n\n\nconvert HnH_gate.txt to HnH_gate.py\n\n\nEdit mypath in out() method at end of file for your system.  Save\n\n\nin python: run HnH_gate.py\n\n\nrun out() to create csv files for the good and bad output\ni) out(\"101\", new_probka_good)\nii) out(\"102\", new_probka_bad)\n\n\nPlot data from hh_101.csv and hh_102.csv and verify the discontinuity at half way point in hh_102.csv\n\n\nTwo additional tests can be run:\ni) Edit parameter timepoints in main() to show error remaps to half way point.\nii) My temporary correction is to create 2x points and throw half away.  this is done in p_update() setting cut_in_half = True\n\n\nThis same error was found running the code in Tensorflow 1.4 on MacOS Sierra.  My system info is:\n\n\n== cat /etc/issue ===============================================\nLinux PAULP-XPS15 4.4.0-43-Microsoft #1-Microsoft Wed Dec 31 14:42:53 PST 2014 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"16.04.3 LTS (Xenial Xerus)\"\nVERSION_ID=\"16.04\"\nVERSION_CODENAME=xenial\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux PAULP-XPS15 4.4.0-43-Microsoft #1-Microsoft Wed Dec 31 14:42:53 PST 2014 x86_64 x86_64 x86_64 GNU/Linux\n== check pips ===================================================\nnumpy (1.13.3)\nnumpydoc (0.7.0)\nprotobuf (3.4.1)\ntensorflow (1.3.0)\ntensorflow-tensorboard (0.1.5)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.3.0\ntf.GIT_VERSION = b'unknown'\ntf.COMPILER_VERSION = b'unknown'\nSanity check: array([1], dtype=int32)\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\n== cuda libs  ===================================================\nDescribe the problem\nI am running a RNN for a Hodgkin and Huxley type gating of an ion channel protein\ncalled HnH_gate.py.\nThe program takes a placeholder vmem and produces a timeseries output of the size\ntimepoints.\nAt the halfway point in the timeseries there is a discontinuity in the results\nThis only appears with some arrays fed to my tf.placeholder.  Others produce normal\nresults.  I can correct for the problem by doubling the number of timepoints requested\nand throwing half away.\nThe array:\nvmem_list_good = [[-100.0, -90.0, -80.0, -70.0, -60.0, -50.0, -41.0, -30.0, -20.0, -10.0, 0.0, 10.0, 20.0, 30.0, 40.0, 50.0],\n[-100.0, -90.0, -80.0, -70.0, -60.0, -50.0, -41.0, -30.0, -20.0, -10.0, 0.0, 10.0, 20.0, 30.0, 40.0, 50.0]]\nappears to work perfectly\nThe array:\nvmem_list_bad = [[80.0, 60.0, 40.0, 20.0, 00.0, -20.0, -41.0, -60.0, -80.0, -55.0, 0.0, 10.0, 20.0, 30.0, 40.0, 50.0],\n[70.0, 50.0, 30.0, 10.0, -10.0, -30.0, -50.0, -70.0, -90.0, -30.0, -10.0, 0.0, 10.0, 20.0, 30.0, 40.0]]\nshows the error.\nTo see my temporary correction, edit the parameter in the HH.p_update() method\nto: cut_in_half = True\nI have written a short output routine to export the simulation to a csv file,\njust edit the path and provide a string to make a unique filename:\nout(\"101\", new_probka_good)\nout(\"102\", new_probka_bad)\nSource code / logs\nprogram file is: HnH_gate.py (provided as HnH_gate.txt)\nHnH_gate.txt  (convert to HnH_gate.py)\nHnH_gate.txt\nSystem and Error Description: HnH_gate_bug_report.txt\nHnH_gate_bug_report.txt\nOutput example demonstrating problem: Artifact plotting new_probka_bad.py\nArtifact plotting new_probka_bad.pdf\nThanks for your help.\nPaul", "body": "- **I have written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nto reproduce the error:\r\n1) convert HnH_gate.txt to HnH_gate.py\r\n2) Edit mypath in out() method at end of file for your system.  Save \r\n3) in python: run HnH_gate.py\r\n4) run out() to create csv files for the good and bad output\r\n            i) out(\"101\", new_probka_good)\r\n            ii) out(\"102\", new_probka_bad)\r\n5) Plot data from hh_101.csv and hh_102.csv and verify the discontinuity at half way point in hh_102.csv\r\n6) Two additional tests can be run:\r\n          i) Edit parameter timepoints in main() to show error remaps to half way point.\r\n          ii) My temporary correction is to create 2x points and throw half away.  this is done in p_update() setting cut_in_half = True\r\n\r\n7) This same error was found running the code in Tensorflow 1.4 on MacOS Sierra.  My system info is:\r\n\r\n\r\n== cat /etc/issue ===============================================\r\nLinux PAULP-XPS15 4.4.0-43-Microsoft #1-Microsoft Wed Dec 31 14:42:53 PST 2014 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"16.04.3 LTS (Xenial Xerus)\"\r\nVERSION_ID=\"16.04\"\r\nVERSION_CODENAME=xenial\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux PAULP-XPS15 4.4.0-43-Microsoft #1-Microsoft Wed Dec 31 14:42:53 PST 2014 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy (1.13.3)\r\nnumpydoc (0.7.0)\r\nprotobuf (3.4.1)\r\ntensorflow (1.3.0)\r\ntensorflow-tensorboard (0.1.5)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.3.0\r\ntf.GIT_VERSION = b'unknown'\r\ntf.COMPILER_VERSION = b'unknown'\r\nSanity check: array([1], dtype=int32)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n\r\n\r\n### Describe the problem\r\nI am running a RNN for a Hodgkin and Huxley type gating of an ion channel protein\r\ncalled HnH_gate.py.\r\nThe program takes a placeholder vmem and produces a timeseries output of the size\r\ntimepoints.\r\nAt the halfway point in the timeseries there is a discontinuity in the results\r\nThis only appears with some arrays fed to my tf.placeholder.  Others produce normal\r\nresults.  I can correct for the problem by doubling the number of timepoints requested\r\nand throwing half away.\r\n\r\nThe array:\r\nvmem_list_good = [[-100.0, -90.0, -80.0, -70.0, -60.0, -50.0, -41.0, -30.0, -20.0, -10.0, 0.0, 10.0, 20.0, 30.0, 40.0, 50.0],\r\n                [-100.0, -90.0, -80.0, -70.0, -60.0, -50.0, -41.0, -30.0, -20.0, -10.0, 0.0, 10.0, 20.0, 30.0, 40.0, 50.0]]\r\nappears to work perfectly\r\nThe array:\r\nvmem_list_bad = [[80.0, 60.0, 40.0, 20.0, 00.0, -20.0, -41.0, -60.0, -80.0, -55.0, 0.0, 10.0, 20.0, 30.0, 40.0, 50.0],\r\n            [70.0, 50.0, 30.0, 10.0, -10.0, -30.0, -50.0, -70.0, -90.0, -30.0, -10.0, 0.0, 10.0, 20.0, 30.0, 40.0]]\r\n\r\nshows the error.\r\n\r\nTo see my temporary correction, edit the parameter in the HH.p_update() method\r\nto: cut_in_half = True\r\n\r\nI have written a short output routine to export the simulation to a csv file,\r\njust edit the path and provide a string to make a unique filename:\r\n\r\nout(\"101\", new_probka_good)\r\nout(\"102\", new_probka_bad)\r\n\r\n### Source code / logs\r\nprogram file is: HnH_gate.py (provided as HnH_gate.txt)\r\nHnH_gate.txt  (convert to HnH_gate.py)\r\n[HnH_gate.txt](https://github.com/tensorflow/tensorflow/files/1610057/HnH_gate.txt)\r\n\r\nSystem and Error Description: HnH_gate_bug_report.txt\r\n[HnH_gate_bug_report.txt](https://github.com/tensorflow/tensorflow/files/1610056/HnH_gate_bug_report.txt)\r\n\r\nOutput example demonstrating problem: Artifact plotting new_probka_bad.py\r\n[Artifact plotting new_probka_bad.pdf](https://github.com/tensorflow/tensorflow/files/1610058/Artifact.plotting.new_probka_bad.pdf)\r\n\r\nThanks for your help.\r\nPaul\r\n  \r\n  "}
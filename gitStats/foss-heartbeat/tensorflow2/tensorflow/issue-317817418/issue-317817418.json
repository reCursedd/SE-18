{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18879", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18879/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18879/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18879/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18879", "id": 317817418, "node_id": "MDU6SXNzdWUzMTc4MTc0MTg=", "number": 18879, "title": "[Windows custom ops] Compiled c++ and imported dll successfully, but custom ops are not visible from python?", "user": {"login": "cooltopics", "id": 38721290, "node_id": "MDQ6VXNlcjM4NzIxMjkw", "avatar_url": "https://avatars1.githubusercontent.com/u/38721290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cooltopics", "html_url": "https://github.com/cooltopics", "followers_url": "https://api.github.com/users/cooltopics/followers", "following_url": "https://api.github.com/users/cooltopics/following{/other_user}", "gists_url": "https://api.github.com/users/cooltopics/gists{/gist_id}", "starred_url": "https://api.github.com/users/cooltopics/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cooltopics/subscriptions", "organizations_url": "https://api.github.com/users/cooltopics/orgs", "repos_url": "https://api.github.com/users/cooltopics/repos", "events_url": "https://api.github.com/users/cooltopics/events{/privacy}", "received_events_url": "https://api.github.com/users/cooltopics/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-04-25T22:35:17Z", "updated_at": "2018-10-23T02:39:48Z", "closed_at": "2018-05-19T08:56:06Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Win 7 64</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: sources</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.3.1</li>\n<li><strong>Python version</strong>: 2.7.13</li>\n<li><strong>Bazel version (if compiling from source)</strong>: NA</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: Visual Studio 15</li>\n<li><strong>CUDA/cuDNN version</strong>: 8.0/7.5</li>\n<li><strong>GPU model and memory</strong>: NA</li>\n<li><strong>Exact command to reproduce</strong>: Please see below.</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Trying to build a library available at <a href=\"https://github.com/optas/latent_3d_points\">https://github.com/optas/latent_3d_points</a>.</p>\n<p>It has custom ops implemented in c++.<br>\nI have successfully built the package therein specifically <code>structural_losses</code> from <a href=\"https://github.com/optas/latent_3d_points/tree/master/external/structural_losses\">https://github.com/optas/latent_3d_points/tree/master/external/structural_losses</a> with changes for compiling with Visual Studio 2015.</p>\n<p>In python, I am also able to load the ops dlls e.g. using<br>\n<code>approxmatch_module = tf.load_op_library(osp.join(base_dir, '_approxmatch.pyd')). </code></p>\n<p>However, I don't see the operators approxmatch_module.approx_match,approxmatch_module.match_cost, etc. from the c++ getting exposed to the python tensorflow.</p>\n<p>I am getting the following error:<br>\n<code>AttributeError: 'module' object has no attribute 'approx_match' </code></p>\n<p>When I do the following</p>\n<pre><code>from structural_losses import approxmatch\ndir(approxmatch.approxmatch_module)\n</code></pre>\n<p>it lists only the following items<br>\n<code>['LIB_HANDLE', 'OP_LIST', '_InitOpDefLibrary', '__builtins__', '__doc__', '__name__', '__package__', '_collections', '_common_shapes', '_op_def_lib', '_op_def_library', '_op_def_pb2', '_op_def_registry', '_ops'] </code><br>\nwhere the actual operations from c++ are missing.</p>\n<p>What am I missing from proper compilation?</p>\n<p>Or is it that in windows custom ops is <code>unavailable/not implemented</code>?</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Win 7 64\nTensorFlow installed from (source or binary): sources\nTensorFlow version (use command below): 1.3.1\nPython version: 2.7.13\nBazel version (if compiling from source): NA\nGCC/Compiler version (if compiling from source): Visual Studio 15\nCUDA/cuDNN version: 8.0/7.5\nGPU model and memory: NA\nExact command to reproduce: Please see below.\n\nDescribe the problem\nTrying to build a library available at https://github.com/optas/latent_3d_points.\nIt has custom ops implemented in c++.\nI have successfully built the package therein specifically structural_losses from https://github.com/optas/latent_3d_points/tree/master/external/structural_losses with changes for compiling with Visual Studio 2015.\nIn python, I am also able to load the ops dlls e.g. using\napproxmatch_module = tf.load_op_library(osp.join(base_dir, '_approxmatch.pyd')). \nHowever, I don't see the operators approxmatch_module.approx_match,approxmatch_module.match_cost, etc. from the c++ getting exposed to the python tensorflow.\nI am getting the following error:\nAttributeError: 'module' object has no attribute 'approx_match' \nWhen I do the following\nfrom structural_losses import approxmatch\ndir(approxmatch.approxmatch_module)\n\nit lists only the following items\n['LIB_HANDLE', 'OP_LIST', '_InitOpDefLibrary', '__builtins__', '__doc__', '__name__', '__package__', '_collections', '_common_shapes', '_op_def_lib', '_op_def_library', '_op_def_pb2', '_op_def_registry', '_ops'] \nwhere the actual operations from c++ are missing.\nWhat am I missing from proper compilation?\nOr is it that in windows custom ops is unavailable/not implemented?", "body": "\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Win 7 64\r\n- **TensorFlow installed from (source or binary)**: sources\r\n- **TensorFlow version (use command below)**: 1.3.1\r\n- **Python version**: 2.7.13\r\n- **Bazel version (if compiling from source)**: NA\r\n- **GCC/Compiler version (if compiling from source)**: Visual Studio 15\r\n- **CUDA/cuDNN version**: 8.0/7.5\r\n- **GPU model and memory**: NA\r\n- **Exact command to reproduce**: Please see below.\r\n\r\n### Describe the problem\r\nTrying to build a library available at https://github.com/optas/latent_3d_points.\r\n\r\nIt has custom ops implemented in c++.\r\nI have successfully built the package therein specifically `structural_losses` from https://github.com/optas/latent_3d_points/tree/master/external/structural_losses with changes for compiling with Visual Studio 2015.\r\n\r\nIn python, I am also able to load the ops dlls e.g. using \r\n`approxmatch_module = tf.load_op_library(osp.join(base_dir, '_approxmatch.pyd')).\r\n`\r\n\r\nHowever, I don't see the operators approxmatch_module.approx_match,approxmatch_module.match_cost, etc. from the c++ getting exposed to the python tensorflow.\r\n\r\nI am getting the following error:\r\n`AttributeError: 'module' object has no attribute 'approx_match'\r\n`\r\n\r\nWhen I do the following\r\n```\r\nfrom structural_losses import approxmatch\r\ndir(approxmatch.approxmatch_module)\r\n```\r\nit lists only the following items\r\n`['LIB_HANDLE', 'OP_LIST', '_InitOpDefLibrary', '__builtins__', '__doc__', '__name__', '__package__', '_collections', '_common_shapes', '_op_def_lib', '_op_def_library', '_op_def_pb2', '_op_def_registry', '_ops']\r\n`\r\nwhere the actual operations from c++ are missing.\r\n\r\nWhat am I missing from proper compilation?\r\n\r\nOr is it that in windows custom ops is `unavailable/not implemented`?"}
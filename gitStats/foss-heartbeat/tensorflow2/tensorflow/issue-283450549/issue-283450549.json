{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15499", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15499/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15499/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15499/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15499", "id": 283450549, "node_id": "MDU6SXNzdWUyODM0NTA1NDk=", "number": 15499, "title": "Go bindings: No shape inference function exists for op 'CreateSummaryFileWriter'", "user": {"login": "is8ac", "id": 8010041, "node_id": "MDQ6VXNlcjgwMTAwNDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/8010041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/is8ac", "html_url": "https://github.com/is8ac", "followers_url": "https://api.github.com/users/is8ac/followers", "following_url": "https://api.github.com/users/is8ac/following{/other_user}", "gists_url": "https://api.github.com/users/is8ac/gists{/gist_id}", "starred_url": "https://api.github.com/users/is8ac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/is8ac/subscriptions", "organizations_url": "https://api.github.com/users/is8ac/orgs", "repos_url": "https://api.github.com/users/is8ac/repos", "events_url": "https://api.github.com/users/is8ac/events{/privacy}", "received_events_url": "https://api.github.com/users/is8ac/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-12-20T05:05:17Z", "updated_at": "2017-12-20T18:33:49Z", "closed_at": "2017-12-20T18:17:34Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Arch Linux</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4.1</li>\n<li><strong>Python version</strong>: NA (using Go bindings)</li>\n<li><strong>Bazel version (if compiling from source)</strong>: NA</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: NA</li>\n<li><strong>CUDA/cuDNN version</strong>: cuda-9.1.85-1 cudnn-7.0.5-1</li>\n<li><strong>GPU model and memory</strong>: GTX 1060 6GB</li>\n<li><strong>Exact command to reproduce</strong>: See below</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Calling <code>op.CreateSummaryFileWriter()</code> panics with: <code>panic: failed to add operation \"CreateSummaryFileWriter\": No shape inference function exists for op 'CreateSummaryFileWriter', did you forget to define it?</code></p>\n<h3>Source code / logs</h3>\n<pre><code>package main\n\nimport (\n\ttf \"github.com/tensorflow/tensorflow/tensorflow/go\"\n\t\"github.com/tensorflow/tensorflow/tensorflow/go/op\"\n)\n\nfunc main() {\n\ts := op.NewScope()\n\twriter := op.SummaryWriter(s)\n\tcreateSummaryWriter := op.CreateSummaryFileWriter(s,\n\t\twriter,\n\t\top.Const(s.SubScope(\"log_dir\"), \"tb_logs\"),\n\t\top.Const(s.SubScope(\"max_queue\"), int32(10)),\n\t\top.Const(s.SubScope(\"flush_millis\"), int32(1000)),\n\t\top.Const(s.SubScope(\"filename_suffix\"), \"tb_demo\"),\n\t)\n\tscalar := op.Const(s.SubScope(\"scalar\"), float32(3.1415))\n\tstep := op.Const(s.SubScope(\"step\"), int64(1))\n\ttag := op.Const(s.SubScope(\"tag\"), \"foo_scalar\")\n\tsummary := op.ScalarSummary(s, tag, scalar)\n\tmerged := op.MergeSummary(s, []tf.Output{summary})\n\twrite := op.WriteSummary(s, writer, step, scalar, tag, merged)\n\tcloseSummaryWriter := op.CloseSummaryWriter(s, writer)\n\tgraph, err := s.Finalize()\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tsess, err := tf.NewSession(graph, nil)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t_, err = sess.Run(nil, nil, []*tf.Operation{createSummaryWriter})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t_, err = sess.Run(nil, nil, []*tf.Operation{write})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t_, err = sess.Run(nil, nil, []*tf.Operation{closeSummaryWriter})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n}\n</code></pre>\n<p>Returns:</p>\n<pre><code>2017-12-19 20:39:06.314322: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\npanic: failed to add operation \"CreateSummaryFileWriter\": No shape inference function exists for op 'CreateSummaryFileWriter', did you forget to define it? (Stacktrace: goroutine 1 [running]:\nruntime/debug.Stack(0xc420082130, 0x13eb530, 0x14298a0)\n\t/usr/lib/go/src/runtime/debug/stack.go:24 +0xa7\ngithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).UpdateErr(0xc42007c180, 0x4d9527, 0x17, 0x750140, 0xc42000e068)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:120 +0x72\ngithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).AddOperation(0xc42007c180, 0x4d9527, 0x17, 0x4d9527, 0x17, 0xc4200820f0, 0x5, 0x5, 0x0, 0xc4200181a0)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:85 +0xfd\ngithub.com/tensorflow/tensorflow/tensorflow/go/op.CreateSummaryFileWriter(0xc42007c180, 0xc420010200, 0x0, 0xc420010210, 0x0, 0xc420010220, 0x0, 0xc420010230, 0x0, 0xc420010240, ...)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/wrappers.go:16474 +0x2cc\nmain.main()\n\t/home/isaac/go/src/github.com/is8ac/gotf/tb_demo.go:11 +0x282\n)\n\ngoroutine 1 [running]:\nmain.main()\n\t/home/isaac/go/src/github.com/is8ac/gotf/tb_demo.go:27 +0x7cc\nexit status 2\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Arch Linux\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): 1.4.1\nPython version: NA (using Go bindings)\nBazel version (if compiling from source): NA\nGCC/Compiler version (if compiling from source): NA\nCUDA/cuDNN version: cuda-9.1.85-1 cudnn-7.0.5-1\nGPU model and memory: GTX 1060 6GB\nExact command to reproduce: See below\n\nDescribe the problem\nCalling op.CreateSummaryFileWriter() panics with: panic: failed to add operation \"CreateSummaryFileWriter\": No shape inference function exists for op 'CreateSummaryFileWriter', did you forget to define it?\nSource code / logs\npackage main\n\nimport (\n\ttf \"github.com/tensorflow/tensorflow/tensorflow/go\"\n\t\"github.com/tensorflow/tensorflow/tensorflow/go/op\"\n)\n\nfunc main() {\n\ts := op.NewScope()\n\twriter := op.SummaryWriter(s)\n\tcreateSummaryWriter := op.CreateSummaryFileWriter(s,\n\t\twriter,\n\t\top.Const(s.SubScope(\"log_dir\"), \"tb_logs\"),\n\t\top.Const(s.SubScope(\"max_queue\"), int32(10)),\n\t\top.Const(s.SubScope(\"flush_millis\"), int32(1000)),\n\t\top.Const(s.SubScope(\"filename_suffix\"), \"tb_demo\"),\n\t)\n\tscalar := op.Const(s.SubScope(\"scalar\"), float32(3.1415))\n\tstep := op.Const(s.SubScope(\"step\"), int64(1))\n\ttag := op.Const(s.SubScope(\"tag\"), \"foo_scalar\")\n\tsummary := op.ScalarSummary(s, tag, scalar)\n\tmerged := op.MergeSummary(s, []tf.Output{summary})\n\twrite := op.WriteSummary(s, writer, step, scalar, tag, merged)\n\tcloseSummaryWriter := op.CloseSummaryWriter(s, writer)\n\tgraph, err := s.Finalize()\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tsess, err := tf.NewSession(graph, nil)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t_, err = sess.Run(nil, nil, []*tf.Operation{createSummaryWriter})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t_, err = sess.Run(nil, nil, []*tf.Operation{write})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t_, err = sess.Run(nil, nil, []*tf.Operation{closeSummaryWriter})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n}\n\nReturns:\n2017-12-19 20:39:06.314322: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\npanic: failed to add operation \"CreateSummaryFileWriter\": No shape inference function exists for op 'CreateSummaryFileWriter', did you forget to define it? (Stacktrace: goroutine 1 [running]:\nruntime/debug.Stack(0xc420082130, 0x13eb530, 0x14298a0)\n\t/usr/lib/go/src/runtime/debug/stack.go:24 +0xa7\ngithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).UpdateErr(0xc42007c180, 0x4d9527, 0x17, 0x750140, 0xc42000e068)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:120 +0x72\ngithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).AddOperation(0xc42007c180, 0x4d9527, 0x17, 0x4d9527, 0x17, 0xc4200820f0, 0x5, 0x5, 0x0, 0xc4200181a0)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:85 +0xfd\ngithub.com/tensorflow/tensorflow/tensorflow/go/op.CreateSummaryFileWriter(0xc42007c180, 0xc420010200, 0x0, 0xc420010210, 0x0, 0xc420010220, 0x0, 0xc420010230, 0x0, 0xc420010240, ...)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/wrappers.go:16474 +0x2cc\nmain.main()\n\t/home/isaac/go/src/github.com/is8ac/gotf/tb_demo.go:11 +0x282\n)\n\ngoroutine 1 [running]:\nmain.main()\n\t/home/isaac/go/src/github.com/is8ac/gotf/tb_demo.go:27 +0x7cc\nexit status 2", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Arch Linux\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.4.1\r\n- **Python version**: NA (using Go bindings)\r\n- **Bazel version (if compiling from source)**: NA\r\n- **GCC/Compiler version (if compiling from source)**: NA\r\n- **CUDA/cuDNN version**: cuda-9.1.85-1 cudnn-7.0.5-1\r\n- **GPU model and memory**: GTX 1060 6GB\r\n- **Exact command to reproduce**: See below\r\n\r\n### Describe the problem\r\nCalling `op.CreateSummaryFileWriter()` panics with: `panic: failed to add operation \"CreateSummaryFileWriter\": No shape inference function exists for op 'CreateSummaryFileWriter', did you forget to define it?`\r\n\r\n### Source code / logs\r\n```\r\npackage main\r\n\r\nimport (\r\n\ttf \"github.com/tensorflow/tensorflow/tensorflow/go\"\r\n\t\"github.com/tensorflow/tensorflow/tensorflow/go/op\"\r\n)\r\n\r\nfunc main() {\r\n\ts := op.NewScope()\r\n\twriter := op.SummaryWriter(s)\r\n\tcreateSummaryWriter := op.CreateSummaryFileWriter(s,\r\n\t\twriter,\r\n\t\top.Const(s.SubScope(\"log_dir\"), \"tb_logs\"),\r\n\t\top.Const(s.SubScope(\"max_queue\"), int32(10)),\r\n\t\top.Const(s.SubScope(\"flush_millis\"), int32(1000)),\r\n\t\top.Const(s.SubScope(\"filename_suffix\"), \"tb_demo\"),\r\n\t)\r\n\tscalar := op.Const(s.SubScope(\"scalar\"), float32(3.1415))\r\n\tstep := op.Const(s.SubScope(\"step\"), int64(1))\r\n\ttag := op.Const(s.SubScope(\"tag\"), \"foo_scalar\")\r\n\tsummary := op.ScalarSummary(s, tag, scalar)\r\n\tmerged := op.MergeSummary(s, []tf.Output{summary})\r\n\twrite := op.WriteSummary(s, writer, step, scalar, tag, merged)\r\n\tcloseSummaryWriter := op.CloseSummaryWriter(s, writer)\r\n\tgraph, err := s.Finalize()\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\tsess, err := tf.NewSession(graph, nil)\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\t_, err = sess.Run(nil, nil, []*tf.Operation{createSummaryWriter})\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\t_, err = sess.Run(nil, nil, []*tf.Operation{write})\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\t_, err = sess.Run(nil, nil, []*tf.Operation{closeSummaryWriter})\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n}\r\n```\r\nReturns:\r\n```\r\n2017-12-19 20:39:06.314322: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\r\npanic: failed to add operation \"CreateSummaryFileWriter\": No shape inference function exists for op 'CreateSummaryFileWriter', did you forget to define it? (Stacktrace: goroutine 1 [running]:\r\nruntime/debug.Stack(0xc420082130, 0x13eb530, 0x14298a0)\r\n\t/usr/lib/go/src/runtime/debug/stack.go:24 +0xa7\r\ngithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).UpdateErr(0xc42007c180, 0x4d9527, 0x17, 0x750140, 0xc42000e068)\r\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:120 +0x72\r\ngithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).AddOperation(0xc42007c180, 0x4d9527, 0x17, 0x4d9527, 0x17, 0xc4200820f0, 0x5, 0x5, 0x0, 0xc4200181a0)\r\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:85 +0xfd\r\ngithub.com/tensorflow/tensorflow/tensorflow/go/op.CreateSummaryFileWriter(0xc42007c180, 0xc420010200, 0x0, 0xc420010210, 0x0, 0xc420010220, 0x0, 0xc420010230, 0x0, 0xc420010240, ...)\r\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/wrappers.go:16474 +0x2cc\r\nmain.main()\r\n\t/home/isaac/go/src/github.com/is8ac/gotf/tb_demo.go:11 +0x282\r\n)\r\n\r\ngoroutine 1 [running]:\r\nmain.main()\r\n\t/home/isaac/go/src/github.com/is8ac/gotf/tb_demo.go:27 +0x7cc\r\nexit status 2\r\n```"}
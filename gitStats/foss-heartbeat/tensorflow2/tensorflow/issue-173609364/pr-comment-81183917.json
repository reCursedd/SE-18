{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/81183917", "pull_request_review_id": 2182895, "id": 81183917, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgxMTgzOTE3", "diff_hunk": "@@ -53,9 +57,33 @@\n            'local_variable',\n            'model_variable',\n            'variable',\n-           'VariableDeviceChooser']\n+           'VariableDeviceChooser',\n+           'zero_initializer']\n \n \n+def zero_initializer(ref, use_locking=True, name=\"zero_initializer\"):\n+  \"\"\"Initialize 'ref' with all zeros, ref tensor should be uninitialized.\n+  If already initialized, you will get ValueError. This op is intended to\n+  save memory during initialization.\n+  Args:\n+    ref: ref of the tensor need to be zero initialized.\n+    name: optional name for this operation.\n+  Returns:\n+    ref that initialized.\n+  Raises:\n+    ValueError: If ref tensor is initialized.\n+  \"\"\"\n+  _variable_ops = load_op_library(resource_loader.get_path_to_datafile(\n+        \"_variable_ops.so\"))\n+  assert _variable_ops, \"Could not load _variable_ops.so\"\n+  return gen_variable_ops.zero_initializer(ref, name=name)\n+\n+# shape function for _ZeroInitializerOp\n+@ops.RegisterShape(\"ZeroInitializer\")", "path": "tensorflow/contrib/framework/python/ops/variables.py", "position": 47, "original_position": 47, "commit_id": "32f95e65a29c60629b8ae0b9db2891d50c8f1c1b", "original_commit_id": "32f95e65a29c60629b8ae0b9db2891d50c8f1c1b", "user": {"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}, "body": "This can now use \n@ops.RegisterShape(\"ZeroInitializer\")(common_shapes.call_cpp_shape_fn) now\n", "created_at": "2016-09-29T16:58:11Z", "updated_at": "2016-09-29T16:58:11Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4077#discussion_r81183917", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4077", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/81183917"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4077#discussion_r81183917"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4077"}}, "body_html": "<p>This can now use<br>\n@ops.RegisterShape(\"ZeroInitializer\")(common_shapes.call_cpp_shape_fn) now</p>", "body_text": "This can now use\n@ops.RegisterShape(\"ZeroInitializer\")(common_shapes.call_cpp_shape_fn) now"}
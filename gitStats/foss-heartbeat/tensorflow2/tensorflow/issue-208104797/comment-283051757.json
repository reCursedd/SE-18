{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/283051757", "html_url": "https://github.com/tensorflow/tensorflow/issues/7572#issuecomment-283051757", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7572", "id": 283051757, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzA1MTc1Nw==", "user": {"login": "samfux84", "id": 11944875, "node_id": "MDQ6VXNlcjExOTQ0ODc1", "avatar_url": "https://avatars0.githubusercontent.com/u/11944875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samfux84", "html_url": "https://github.com/samfux84", "followers_url": "https://api.github.com/users/samfux84/followers", "following_url": "https://api.github.com/users/samfux84/following{/other_user}", "gists_url": "https://api.github.com/users/samfux84/gists{/gist_id}", "starred_url": "https://api.github.com/users/samfux84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samfux84/subscriptions", "organizations_url": "https://api.github.com/users/samfux84/orgs", "repos_url": "https://api.github.com/users/samfux84/repos", "events_url": "https://api.github.com/users/samfux84/events{/privacy}", "received_events_url": "https://api.github.com/users/samfux84/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-28T14:22:53Z", "updated_at": "2017-02-28T14:22:53Z", "author_association": "NONE", "body_html": "<p>Hi Ilhe,</p>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"159459238\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/bazelbuild/bazel/issues/1358\" data-hovercard-type=\"issue\" data-hovercard-url=\"/bazelbuild/bazel/issues/1358/hovercard\" href=\"https://github.com/bazelbuild/bazel/issues/1358\">bazelbuild/bazel#1358</a> did not help.</p>\n<p><a href=\"https://groups.google.com/a/tensorflow.org/forum/?hl=sr#!topic/discuss/VnpcZMToQ4A\" rel=\"nofollow\">https://groups.google.com/a/tensorflow.org/forum/?hl=sr#!topic/discuss/VnpcZMToQ4A</a> states that third_party/sycl/crosstool/CROSSTOOL.tpl can still contain path's to GCC in /usr. I have changed the path's in CROSSTOOL.tpl to the correct GCC installation. Now I get a different error:</p>\n<pre><code>ERROR: /cluster/scratch/sfux/cache/_bazel_sfux/c3fb8682b40a7bc55991a3af7a35a071/external/jemalloc/BUILD:10:1: C++ compilation of rule '@jemalloc//:jemalloc' failed: gcc failed: error executing command \n  (cd /cluster/scratch/sfux/cache/_bazel_sfux/c3fb8682b40a7bc55991a3af7a35a071/execroot/tensorflow-1.0.0 &amp;&amp; \\\n  exec env - \\\n    LD_LIBRARY_PATH=/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64/server:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64:/cluster/apps/java/1.8.0_91/x86_64/jre/../lib/amd64:/cluster/apps/python/3.6.0/x86_64/lib64:/cluster/apps/sqlite/3.15.0/x86_64/lib:/cluster/apps/openblas/0.2.13_seq/x86_64/gcc_4.8.2/lib:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64/server:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64/xawt:/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/lib:/cluster/apps/gcc/4.8.2/lib64 \\\n    PATH=/cluster/apps/python/3.6.0/x86_64/bin:/cluster/apps/sqlite/3.15.0/x86_64/bin:/cluster/apps/openblas/0.2.13_seq/x86_64/gcc_4.8.2/bin:/cluster/apps/swig/3.0.5/x86_64/bin:/cluster/apps/bazel/0.4.4/x86_64/output:/cluster/apps/java/1.8.0_91/x86_64/bin:/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/etc:/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/bin:/cluster/apps/modules/bin:/cluster/apps/gcc/4.8.2/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/cluster/home/sfux/bin:/cluster/apps/ansys/v150/fluent/license/lnamd64:/cluster/apps/adm:/cluster/home/sfux/shellscript:/cluster/home/sfux/prog/bash:/opt/ibutils/bin \\\n    TMPDIR=/scratch/38029933.tmpdir \\\n  /cluster/apps/gcc/4.8.2/bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -B/cluster/apps/gcc/4.8.2/bin -B/usr/bin -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections -MD -MF bazel-out/local-py3-opt/bin/external/jemalloc/_objs/jemalloc/external/jemalloc/src/pages.pic.d -fPIC -iquote external/jemalloc -iquote bazel-out/local-py3-opt/genfiles/external/jemalloc -iquote external/bazel_tools -iquote bazel-out/local-py3-opt/genfiles/external/bazel_tools -isystem external/jemalloc/include -isystem bazel-out/local-py3-opt/genfiles/external/jemalloc/include -isystem external/bazel_tools/tools/cpp/gcc3 -O3 -funroll-loops -D_GNU_SOURCE -D_REENTRANT -fno-canonical-system-headers -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c external/jemalloc/src/pages.c -o bazel-out/local-py3-opt/bin/external/jemalloc/_objs/jemalloc/external/jemalloc/src/pages.pic.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nexternal/jemalloc/src/pages.c: In function 'je_pages_huge':\nexternal/jemalloc/src/pages.c:203:30: error: 'MADV_HUGEPAGE' undeclared (first use in this function)\n  return (madvise(addr, size, MADV_HUGEPAGE) != 0);\n</code></pre>\n<p>Any ideas ?</p>\n<p>Best regards</p>\n<p>Sam</p>", "body_text": "Hi Ilhe,\nbazelbuild/bazel#1358 did not help.\nhttps://groups.google.com/a/tensorflow.org/forum/?hl=sr#!topic/discuss/VnpcZMToQ4A states that third_party/sycl/crosstool/CROSSTOOL.tpl can still contain path's to GCC in /usr. I have changed the path's in CROSSTOOL.tpl to the correct GCC installation. Now I get a different error:\nERROR: /cluster/scratch/sfux/cache/_bazel_sfux/c3fb8682b40a7bc55991a3af7a35a071/external/jemalloc/BUILD:10:1: C++ compilation of rule '@jemalloc//:jemalloc' failed: gcc failed: error executing command \n  (cd /cluster/scratch/sfux/cache/_bazel_sfux/c3fb8682b40a7bc55991a3af7a35a071/execroot/tensorflow-1.0.0 && \\\n  exec env - \\\n    LD_LIBRARY_PATH=/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64/server:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64:/cluster/apps/java/1.8.0_91/x86_64/jre/../lib/amd64:/cluster/apps/python/3.6.0/x86_64/lib64:/cluster/apps/sqlite/3.15.0/x86_64/lib:/cluster/apps/openblas/0.2.13_seq/x86_64/gcc_4.8.2/lib:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64/server:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64/xawt:/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/lib:/cluster/apps/gcc/4.8.2/lib64 \\\n    PATH=/cluster/apps/python/3.6.0/x86_64/bin:/cluster/apps/sqlite/3.15.0/x86_64/bin:/cluster/apps/openblas/0.2.13_seq/x86_64/gcc_4.8.2/bin:/cluster/apps/swig/3.0.5/x86_64/bin:/cluster/apps/bazel/0.4.4/x86_64/output:/cluster/apps/java/1.8.0_91/x86_64/bin:/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/etc:/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/bin:/cluster/apps/modules/bin:/cluster/apps/gcc/4.8.2/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/cluster/home/sfux/bin:/cluster/apps/ansys/v150/fluent/license/lnamd64:/cluster/apps/adm:/cluster/home/sfux/shellscript:/cluster/home/sfux/prog/bash:/opt/ibutils/bin \\\n    TMPDIR=/scratch/38029933.tmpdir \\\n  /cluster/apps/gcc/4.8.2/bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -B/cluster/apps/gcc/4.8.2/bin -B/usr/bin -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections -MD -MF bazel-out/local-py3-opt/bin/external/jemalloc/_objs/jemalloc/external/jemalloc/src/pages.pic.d -fPIC -iquote external/jemalloc -iquote bazel-out/local-py3-opt/genfiles/external/jemalloc -iquote external/bazel_tools -iquote bazel-out/local-py3-opt/genfiles/external/bazel_tools -isystem external/jemalloc/include -isystem bazel-out/local-py3-opt/genfiles/external/jemalloc/include -isystem external/bazel_tools/tools/cpp/gcc3 -O3 -funroll-loops -D_GNU_SOURCE -D_REENTRANT -fno-canonical-system-headers -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c external/jemalloc/src/pages.c -o bazel-out/local-py3-opt/bin/external/jemalloc/_objs/jemalloc/external/jemalloc/src/pages.pic.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nexternal/jemalloc/src/pages.c: In function 'je_pages_huge':\nexternal/jemalloc/src/pages.c:203:30: error: 'MADV_HUGEPAGE' undeclared (first use in this function)\n  return (madvise(addr, size, MADV_HUGEPAGE) != 0);\n\nAny ideas ?\nBest regards\nSam", "body": "Hi Ilhe,\r\n\r\nbazelbuild/bazel#1358 did not help.\r\n\r\nhttps://groups.google.com/a/tensorflow.org/forum/?hl=sr#!topic/discuss/VnpcZMToQ4A states that third_party/sycl/crosstool/CROSSTOOL.tpl can still contain path's to GCC in /usr. I have changed the path's in CROSSTOOL.tpl to the correct GCC installation. Now I get a different error:\r\n\r\n```\r\nERROR: /cluster/scratch/sfux/cache/_bazel_sfux/c3fb8682b40a7bc55991a3af7a35a071/external/jemalloc/BUILD:10:1: C++ compilation of rule '@jemalloc//:jemalloc' failed: gcc failed: error executing command \r\n  (cd /cluster/scratch/sfux/cache/_bazel_sfux/c3fb8682b40a7bc55991a3af7a35a071/execroot/tensorflow-1.0.0 && \\\r\n  exec env - \\\r\n    LD_LIBRARY_PATH=/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64/server:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64:/cluster/apps/java/1.8.0_91/x86_64/jre/../lib/amd64:/cluster/apps/python/3.6.0/x86_64/lib64:/cluster/apps/sqlite/3.15.0/x86_64/lib:/cluster/apps/openblas/0.2.13_seq/x86_64/gcc_4.8.2/lib:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64/server:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64:/cluster/apps/java/1.8.0_91/x86_64/jre/lib/amd64/xawt:/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/lib:/cluster/apps/gcc/4.8.2/lib64 \\\r\n    PATH=/cluster/apps/python/3.6.0/x86_64/bin:/cluster/apps/sqlite/3.15.0/x86_64/bin:/cluster/apps/openblas/0.2.13_seq/x86_64/gcc_4.8.2/bin:/cluster/apps/swig/3.0.5/x86_64/bin:/cluster/apps/bazel/0.4.4/x86_64/output:/cluster/apps/java/1.8.0_91/x86_64/bin:/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/etc:/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/bin:/cluster/apps/modules/bin:/cluster/apps/gcc/4.8.2/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/cluster/home/sfux/bin:/cluster/apps/ansys/v150/fluent/license/lnamd64:/cluster/apps/adm:/cluster/home/sfux/shellscript:/cluster/home/sfux/prog/bash:/opt/ibutils/bin \\\r\n    TMPDIR=/scratch/38029933.tmpdir \\\r\n  /cluster/apps/gcc/4.8.2/bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -B/cluster/apps/gcc/4.8.2/bin -B/usr/bin -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections -MD -MF bazel-out/local-py3-opt/bin/external/jemalloc/_objs/jemalloc/external/jemalloc/src/pages.pic.d -fPIC -iquote external/jemalloc -iquote bazel-out/local-py3-opt/genfiles/external/jemalloc -iquote external/bazel_tools -iquote bazel-out/local-py3-opt/genfiles/external/bazel_tools -isystem external/jemalloc/include -isystem bazel-out/local-py3-opt/genfiles/external/jemalloc/include -isystem external/bazel_tools/tools/cpp/gcc3 -O3 -funroll-loops -D_GNU_SOURCE -D_REENTRANT -fno-canonical-system-headers -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c external/jemalloc/src/pages.c -o bazel-out/local-py3-opt/bin/external/jemalloc/_objs/jemalloc/external/jemalloc/src/pages.pic.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\nexternal/jemalloc/src/pages.c: In function 'je_pages_huge':\r\nexternal/jemalloc/src/pages.c:203:30: error: 'MADV_HUGEPAGE' undeclared (first use in this function)\r\n  return (madvise(addr, size, MADV_HUGEPAGE) != 0);\r\n```\r\n\r\nAny ideas ?\r\n\r\nBest regards\r\n\r\nSam"}
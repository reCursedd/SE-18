{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/281324235", "html_url": "https://github.com/tensorflow/tensorflow/issues/7572#issuecomment-281324235", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7572", "id": 281324235, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTMyNDIzNQ==", "user": {"login": "samfux84", "id": 11944875, "node_id": "MDQ6VXNlcjExOTQ0ODc1", "avatar_url": "https://avatars0.githubusercontent.com/u/11944875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samfux84", "html_url": "https://github.com/samfux84", "followers_url": "https://api.github.com/users/samfux84/followers", "following_url": "https://api.github.com/users/samfux84/following{/other_user}", "gists_url": "https://api.github.com/users/samfux84/gists{/gist_id}", "starred_url": "https://api.github.com/users/samfux84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samfux84/subscriptions", "organizations_url": "https://api.github.com/users/samfux84/orgs", "repos_url": "https://api.github.com/users/samfux84/repos", "events_url": "https://api.github.com/users/samfux84/events{/privacy}", "received_events_url": "https://api.github.com/users/samfux84/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-21T11:58:26Z", "updated_at": "2017-02-21T11:58:26Z", "author_association": "NONE", "body_html": "<p>Tried to install Tensorflow 1.0 with bazel 0.4.4 (under CentOS 6.8, using GCC 4.8.2, Python 3.6.0).</p>\n<p>Configuration step went fine, but when trying to build the pip wheel with</p>\n<p>[sfux@e2174 tensorflow-1.0.0]$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package</p>\n<p>it failed:</p>\n<pre><code> ERROR: /cluster/scratch/sfux/cache/_bazel_sfux/9f758529667fd3bc1d9ed949725387b8/external/protobuf/BUILD:649:1: null failed: protoc failed: error executing command bazel-out/host/bin/external/protobuf/protoc '--python_out=bazel-out/local-py3-opt/genfiles/external/protobuf/python' -Iexternal/protobuf/python ... (remaining 13 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n bazel-out/host/bin/external/protobuf/protoc: /usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.18' not found (required by bazel-out/host/bin/external/protobuf/protoc)\n Target //tensorflow/tools/pip_package:build_pip_package failed to build\n Use --verbose_failures to see the command lines of failed build steps.\n INFO: Elapsed time: 50.560s, Critical Path: 30.89s\n</code></pre>\n<p>Compiler is set correctly, GCC 4.8.2 library directory is added to $LD_LIBRARY_PATH:</p>\n<p>[sfux@euler06 ~]$ which gcc<br>\n<strong>/cluster/apps/gcc/4.8.2/bin/gcc</strong><br>\n[sfux@euler06 ~]$ echo $LD_LIBRARY_PATH | grep /cluster/apps/gcc/4.8.2<br>\n/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/lib:<strong>/cluster/apps/gcc/4.8.2/lib64</strong><br>\n[sfux@euler06 ~]$</p>\n<p>CROSSTOOL file contains path's to GCC 4.8.2:</p>\n<pre><code>[sfux@euler06 ~]$ grep /cluster/apps/gcc /cluster/apps/bazel/0.4.4/x86_64/tools/cpp/CROSSTOOL\n  tool_path { name: \"cpp\" path: \"/cluster/apps/gcc/4.8.2/bin/cpp\" }\n  tool_path { name: \"gcc\" path: \"/cluster/apps/gcc/4.8.2/bin/gcc\" }\n  cxx_builtin_include_directory: \"/cluster/apps/gcc/4.8.2/lib64\"\n  cxx_builtin_include_directory: \"/cluster/apps/gcc/4.8.2/include/c++/4.8.2\"\n  tool_path { name: \"cpp\" path: \"/cluster/apps/gcc/4.8.2/bin/cpp\" }\n[sfux@euler06 ~]$\n</code></pre>\n<p>Why does the installation still fall back to /usr/lib64/listdc++.so ?</p>\n<p>Any help is appreciated</p>\n<p>Best regards</p>\n<p>Sam</p>", "body_text": "Tried to install Tensorflow 1.0 with bazel 0.4.4 (under CentOS 6.8, using GCC 4.8.2, Python 3.6.0).\nConfiguration step went fine, but when trying to build the pip wheel with\n[sfux@e2174 tensorflow-1.0.0]$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\nit failed:\n ERROR: /cluster/scratch/sfux/cache/_bazel_sfux/9f758529667fd3bc1d9ed949725387b8/external/protobuf/BUILD:649:1: null failed: protoc failed: error executing command bazel-out/host/bin/external/protobuf/protoc '--python_out=bazel-out/local-py3-opt/genfiles/external/protobuf/python' -Iexternal/protobuf/python ... (remaining 13 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n bazel-out/host/bin/external/protobuf/protoc: /usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.18' not found (required by bazel-out/host/bin/external/protobuf/protoc)\n Target //tensorflow/tools/pip_package:build_pip_package failed to build\n Use --verbose_failures to see the command lines of failed build steps.\n INFO: Elapsed time: 50.560s, Critical Path: 30.89s\n\nCompiler is set correctly, GCC 4.8.2 library directory is added to $LD_LIBRARY_PATH:\n[sfux@euler06 ~]$ which gcc\n/cluster/apps/gcc/4.8.2/bin/gcc\n[sfux@euler06 ~]$ echo $LD_LIBRARY_PATH | grep /cluster/apps/gcc/4.8.2\n/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/lib:/cluster/apps/gcc/4.8.2/lib64\n[sfux@euler06 ~]$\nCROSSTOOL file contains path's to GCC 4.8.2:\n[sfux@euler06 ~]$ grep /cluster/apps/gcc /cluster/apps/bazel/0.4.4/x86_64/tools/cpp/CROSSTOOL\n  tool_path { name: \"cpp\" path: \"/cluster/apps/gcc/4.8.2/bin/cpp\" }\n  tool_path { name: \"gcc\" path: \"/cluster/apps/gcc/4.8.2/bin/gcc\" }\n  cxx_builtin_include_directory: \"/cluster/apps/gcc/4.8.2/lib64\"\n  cxx_builtin_include_directory: \"/cluster/apps/gcc/4.8.2/include/c++/4.8.2\"\n  tool_path { name: \"cpp\" path: \"/cluster/apps/gcc/4.8.2/bin/cpp\" }\n[sfux@euler06 ~]$\n\nWhy does the installation still fall back to /usr/lib64/listdc++.so ?\nAny help is appreciated\nBest regards\nSam", "body": "Tried to install Tensorflow 1.0 with bazel 0.4.4 (under CentOS 6.8, using GCC 4.8.2, Python 3.6.0).\r\n\r\nConfiguration step went fine, but when trying to build the pip wheel with\r\n\r\n[sfux@e2174 tensorflow-1.0.0]$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\nit failed:\r\n\r\n```\r\n ERROR: /cluster/scratch/sfux/cache/_bazel_sfux/9f758529667fd3bc1d9ed949725387b8/external/protobuf/BUILD:649:1: null failed: protoc failed: error executing command bazel-out/host/bin/external/protobuf/protoc '--python_out=bazel-out/local-py3-opt/genfiles/external/protobuf/python' -Iexternal/protobuf/python ... (remaining 13 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\n bazel-out/host/bin/external/protobuf/protoc: /usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.18' not found (required by bazel-out/host/bin/external/protobuf/protoc)\r\n Target //tensorflow/tools/pip_package:build_pip_package failed to build\r\n Use --verbose_failures to see the command lines of failed build steps.\r\n INFO: Elapsed time: 50.560s, Critical Path: 30.89s\r\n```\r\n\r\nCompiler is set correctly, GCC 4.8.2 library directory is added to $LD_LIBRARY_PATH:\r\n\r\n[sfux@euler06 ~]$ which gcc\r\n**/cluster/apps/gcc/4.8.2/bin/gcc**\r\n[sfux@euler06 ~]$ echo $LD_LIBRARY_PATH | grep /cluster/apps/gcc/4.8.2\r\n/cluster/apps/lsf/9.1/linux2.6-glibc2.3-x86_64/lib:**/cluster/apps/gcc/4.8.2/lib64**\r\n[sfux@euler06 ~]$\r\n\r\nCROSSTOOL file contains path's to GCC 4.8.2:\r\n\r\n```\r\n[sfux@euler06 ~]$ grep /cluster/apps/gcc /cluster/apps/bazel/0.4.4/x86_64/tools/cpp/CROSSTOOL\r\n  tool_path { name: \"cpp\" path: \"/cluster/apps/gcc/4.8.2/bin/cpp\" }\r\n  tool_path { name: \"gcc\" path: \"/cluster/apps/gcc/4.8.2/bin/gcc\" }\r\n  cxx_builtin_include_directory: \"/cluster/apps/gcc/4.8.2/lib64\"\r\n  cxx_builtin_include_directory: \"/cluster/apps/gcc/4.8.2/include/c++/4.8.2\"\r\n  tool_path { name: \"cpp\" path: \"/cluster/apps/gcc/4.8.2/bin/cpp\" }\r\n[sfux@euler06 ~]$\r\n```\r\n\r\nWhy does the installation still fall back to /usr/lib64/listdc++.so ?\r\n\r\nAny help is appreciated\r\n\r\nBest regards\r\n\r\nSam"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/382869444", "html_url": "https://github.com/tensorflow/tensorflow/pull/18616#issuecomment-382869444", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18616", "id": 382869444, "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjg2OTQ0NA==", "user": {"login": "dcirne", "id": 204792, "node_id": "MDQ6VXNlcjIwNDc5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/204792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcirne", "html_url": "https://github.com/dcirne", "followers_url": "https://api.github.com/users/dcirne/followers", "following_url": "https://api.github.com/users/dcirne/following{/other_user}", "gists_url": "https://api.github.com/users/dcirne/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcirne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcirne/subscriptions", "organizations_url": "https://api.github.com/users/dcirne/orgs", "repos_url": "https://api.github.com/users/dcirne/repos", "events_url": "https://api.github.com/users/dcirne/events{/privacy}", "received_events_url": "https://api.github.com/users/dcirne/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-19T20:25:04Z", "updated_at": "2018-04-19T20:25:04Z", "author_association": "CONTRIBUTOR", "body_html": "<p>It seems that this is the failing test: <code>//tensorflow/core:common_runtime_ring_reducer_test</code></p>\n<p>The error message is produced here:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/ring_reducer_test.cc#L183\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/ring_reducer_test.cc#L183</a></p>\n<div class=\"highlight highlight-source-c++\"><pre>    <span class=\"pl-k\">if</span> (!dev_mgr_ || device_type == DEVICE_CPU) {\n      <span class=\"pl-c1\">LOG</span>(ERROR) &lt;&lt; <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>resetting dev_mgr for <span class=\"pl-pds\">\"</span></span> &lt;&lt; local_devices.<span class=\"pl-c1\">size</span>()\n                 &lt;&lt; <span class=\"pl-s\"><span class=\"pl-pds\">\"</span> devices: <span class=\"pl-pds\">\"</span></span>;</pre></div>\n<p>But the error seems to be failing to obtain a mutex: <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/ring_reducer.cc#L210\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/ring_reducer.cc#L210</a></p>\n<div class=\"highlight highlight-source-c++\"><pre>    mutex_lock <span class=\"pl-en\">l</span>(status_mu_);\n    <span class=\"pl-k\">if</span> (status_.ok()) {\n      <span class=\"pl-c1\">LOG</span>(ERROR) &lt;&lt; <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Aborting RingReduce with <span class=\"pl-pds\">\"</span></span> &lt;&lt; s;</pre></div>\n<p>And here are the log messages:</p>\n<pre><code>2018-04-19 17:49:27.698219: E tensorflow/core/common_runtime/ring_reducer_test.cc:184] resetting dev_mgr for 16 devices:\n2018-04-19 17:49:27.705532: E tensorflow/core/common_runtime/ring_reducer.cc:212] Aborting RingReduce with Internal: Deliberate failure\n2018-04-19 17:49:27.705581: W tensorflow/core/common_runtime/base_collective_executor.cc:189] BaseCollectiveExecutor::StartAbort Internal: Deliberate failure\n2018-04-19 17:49:27.705598: E tensorflow/core/common_runtime/ring_reducer.cc:212] Aborting RingReduce with Internal: Deliberate failure\n...\n</code></pre>", "body_text": "It seems that this is the failing test: //tensorflow/core:common_runtime_ring_reducer_test\nThe error message is produced here:\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/ring_reducer_test.cc#L183\n    if (!dev_mgr_ || device_type == DEVICE_CPU) {\n      LOG(ERROR) << \"resetting dev_mgr for \" << local_devices.size()\n                 << \" devices: \";\nBut the error seems to be failing to obtain a mutex: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/ring_reducer.cc#L210\n    mutex_lock l(status_mu_);\n    if (status_.ok()) {\n      LOG(ERROR) << \"Aborting RingReduce with \" << s;\nAnd here are the log messages:\n2018-04-19 17:49:27.698219: E tensorflow/core/common_runtime/ring_reducer_test.cc:184] resetting dev_mgr for 16 devices:\n2018-04-19 17:49:27.705532: E tensorflow/core/common_runtime/ring_reducer.cc:212] Aborting RingReduce with Internal: Deliberate failure\n2018-04-19 17:49:27.705581: W tensorflow/core/common_runtime/base_collective_executor.cc:189] BaseCollectiveExecutor::StartAbort Internal: Deliberate failure\n2018-04-19 17:49:27.705598: E tensorflow/core/common_runtime/ring_reducer.cc:212] Aborting RingReduce with Internal: Deliberate failure\n...", "body": "It seems that this is the failing test: `//tensorflow/core:common_runtime_ring_reducer_test`\r\n\r\nThe error message is produced here:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/ring_reducer_test.cc#L183\r\n\r\n```cpp\r\n    if (!dev_mgr_ || device_type == DEVICE_CPU) {\r\n      LOG(ERROR) << \"resetting dev_mgr for \" << local_devices.size()\r\n                 << \" devices: \";\r\n```\r\n\r\nBut the error seems to be failing to obtain a mutex: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/ring_reducer.cc#L210\r\n\r\n```cpp\r\n    mutex_lock l(status_mu_);\r\n    if (status_.ok()) {\r\n      LOG(ERROR) << \"Aborting RingReduce with \" << s;\r\n```\r\n\r\nAnd here are the log messages:\r\n```\r\n2018-04-19 17:49:27.698219: E tensorflow/core/common_runtime/ring_reducer_test.cc:184] resetting dev_mgr for 16 devices:\r\n2018-04-19 17:49:27.705532: E tensorflow/core/common_runtime/ring_reducer.cc:212] Aborting RingReduce with Internal: Deliberate failure\r\n2018-04-19 17:49:27.705581: W tensorflow/core/common_runtime/base_collective_executor.cc:189] BaseCollectiveExecutor::StartAbort Internal: Deliberate failure\r\n2018-04-19 17:49:27.705598: E tensorflow/core/common_runtime/ring_reducer.cc:212] Aborting RingReduce with Internal: Deliberate failure\r\n...\r\n```"}
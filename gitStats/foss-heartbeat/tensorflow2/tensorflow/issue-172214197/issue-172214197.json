{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3932", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3932/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3932/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3932/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3932", "id": 172214197, "node_id": "MDU6SXNzdWUxNzIyMTQxOTc=", "number": 3932, "title": "l2_normalize broken in master", "user": {"login": "rafaljozefowicz", "id": 2983769, "node_id": "MDQ6VXNlcjI5ODM3Njk=", "avatar_url": "https://avatars1.githubusercontent.com/u/2983769?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rafaljozefowicz", "html_url": "https://github.com/rafaljozefowicz", "followers_url": "https://api.github.com/users/rafaljozefowicz/followers", "following_url": "https://api.github.com/users/rafaljozefowicz/following{/other_user}", "gists_url": "https://api.github.com/users/rafaljozefowicz/gists{/gist_id}", "starred_url": "https://api.github.com/users/rafaljozefowicz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rafaljozefowicz/subscriptions", "organizations_url": "https://api.github.com/users/rafaljozefowicz/orgs", "repos_url": "https://api.github.com/users/rafaljozefowicz/repos", "events_url": "https://api.github.com/users/rafaljozefowicz/events{/privacy}", "received_events_url": "https://api.github.com/users/rafaljozefowicz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-08-19T20:29:39Z", "updated_at": "2017-02-09T22:02:09Z", "closed_at": "2016-08-22T21:16:04Z", "author_association": "NONE", "body_html": "<p><code>tf.nn.l2_normalize(tf.constant(np.ones([2, 2, 2, 2])), [0, 1, 2])</code> crashes with the following error:<br>\n<code>ValueError: Shape (1, 3) must have rank at most 1</code></p>\n<p>The problem is that l2_normalize function converts the dimension list into <code>[[0, 1, 2]]</code> (double brackets) and it stopped being supported recently. It works fine in 0.10 branch as far as I can tell.</p>\n<p>Shorter repro to get the same error:<br>\n<code>tf.reduce_sum(tf.constant(np.ones([2, 2, 2, 2])), [[0, 1, 2]])</code></p>", "body_text": "tf.nn.l2_normalize(tf.constant(np.ones([2, 2, 2, 2])), [0, 1, 2]) crashes with the following error:\nValueError: Shape (1, 3) must have rank at most 1\nThe problem is that l2_normalize function converts the dimension list into [[0, 1, 2]] (double brackets) and it stopped being supported recently. It works fine in 0.10 branch as far as I can tell.\nShorter repro to get the same error:\ntf.reduce_sum(tf.constant(np.ones([2, 2, 2, 2])), [[0, 1, 2]])", "body": "`tf.nn.l2_normalize(tf.constant(np.ones([2, 2, 2, 2])), [0, 1, 2])` crashes with the following error:\n`ValueError: Shape (1, 3) must have rank at most 1`\n\nThe problem is that l2_normalize function converts the dimension list into `[[0, 1, 2]]` (double brackets) and it stopped being supported recently. It works fine in 0.10 branch as far as I can tell.\n\nShorter repro to get the same error:\n`tf.reduce_sum(tf.constant(np.ones([2, 2, 2, 2])), [[0, 1, 2]])`\n"}
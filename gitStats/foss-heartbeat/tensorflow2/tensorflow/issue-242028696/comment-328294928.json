{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/328294928", "html_url": "https://github.com/tensorflow/tensorflow/issues/11431#issuecomment-328294928", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11431", "id": 328294928, "node_id": "MDEyOklzc3VlQ29tbWVudDMyODI5NDkyOA==", "user": {"login": "shahidhs-ibm", "id": 13886965, "node_id": "MDQ6VXNlcjEzODg2OTY1", "avatar_url": "https://avatars3.githubusercontent.com/u/13886965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shahidhs-ibm", "html_url": "https://github.com/shahidhs-ibm", "followers_url": "https://api.github.com/users/shahidhs-ibm/followers", "following_url": "https://api.github.com/users/shahidhs-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/shahidhs-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/shahidhs-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shahidhs-ibm/subscriptions", "organizations_url": "https://api.github.com/users/shahidhs-ibm/orgs", "repos_url": "https://api.github.com/users/shahidhs-ibm/repos", "events_url": "https://api.github.com/users/shahidhs-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/shahidhs-ibm/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-09T18:20:51Z", "updated_at": "2017-09-09T18:20:51Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Got the root cause of the issue. The conversion from ndarray to Tensor is causing trouble on big endian machine. Following is the change in file <code>tensorflow/python/framework/tensor_util.py</code> which is solving the problem (this file is from tag 1.3.0) :</p>\n<pre><code>--- a/tensorflow/python/framework/tensor_util.py\n+++ b/tensorflow/python/framework/tensor_util.py\n@@ -617,8 +617,9 @@ def _ConstantValue(tensor):\n   elif tensor.op.type == \"Rank\":\n     input_shape = tensor.op.inputs[0].get_shape()\n     if input_shape.ndims is not None:\n-      return np.ndarray(shape=(), buffer=np.array([input_shape.ndims]),\n-                        dtype=np.int32)\n+      return np.array([input_shape.ndims], np.int32) \n</code></pre>\n<p>Now the tests failing on rank for big endian are passing.</p>", "body_text": "Got the root cause of the issue. The conversion from ndarray to Tensor is causing trouble on big endian machine. Following is the change in file tensorflow/python/framework/tensor_util.py which is solving the problem (this file is from tag 1.3.0) :\n--- a/tensorflow/python/framework/tensor_util.py\n+++ b/tensorflow/python/framework/tensor_util.py\n@@ -617,8 +617,9 @@ def _ConstantValue(tensor):\n   elif tensor.op.type == \"Rank\":\n     input_shape = tensor.op.inputs[0].get_shape()\n     if input_shape.ndims is not None:\n-      return np.ndarray(shape=(), buffer=np.array([input_shape.ndims]),\n-                        dtype=np.int32)\n+      return np.array([input_shape.ndims], np.int32) \n\nNow the tests failing on rank for big endian are passing.", "body": "Got the root cause of the issue. The conversion from ndarray to Tensor is causing trouble on big endian machine. Following is the change in file `tensorflow/python/framework/tensor_util.py` which is solving the problem (this file is from tag 1.3.0) :\r\n```\r\n--- a/tensorflow/python/framework/tensor_util.py\r\n+++ b/tensorflow/python/framework/tensor_util.py\r\n@@ -617,8 +617,9 @@ def _ConstantValue(tensor):\r\n   elif tensor.op.type == \"Rank\":\r\n     input_shape = tensor.op.inputs[0].get_shape()\r\n     if input_shape.ndims is not None:\r\n-      return np.ndarray(shape=(), buffer=np.array([input_shape.ndims]),\r\n-                        dtype=np.int32)\r\n+      return np.array([input_shape.ndims], np.int32) \r\n```\r\nNow the tests failing on rank for big endian are passing. "}
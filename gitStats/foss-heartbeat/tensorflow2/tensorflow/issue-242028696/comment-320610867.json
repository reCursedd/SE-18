{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/320610867", "html_url": "https://github.com/tensorflow/tensorflow/issues/11431#issuecomment-320610867", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11431", "id": 320610867, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDYxMDg2Nw==", "user": {"login": "shahidhs-ibm", "id": 13886965, "node_id": "MDQ6VXNlcjEzODg2OTY1", "avatar_url": "https://avatars3.githubusercontent.com/u/13886965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shahidhs-ibm", "html_url": "https://github.com/shahidhs-ibm", "followers_url": "https://api.github.com/users/shahidhs-ibm/followers", "following_url": "https://api.github.com/users/shahidhs-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/shahidhs-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/shahidhs-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shahidhs-ibm/subscriptions", "organizations_url": "https://api.github.com/users/shahidhs-ibm/orgs", "repos_url": "https://api.github.com/users/shahidhs-ibm/repos", "events_url": "https://api.github.com/users/shahidhs-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/shahidhs-ibm/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-07T09:06:36Z", "updated_at": "2017-08-07T09:06:36Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=12436991\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/frreiss\">@frreiss</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> We are able to narrow down the issue to the point of failure. For s390x, we are getting issue with <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/core/ops/array_ops.cc#L1797\">TF_RETURN_IF_ERROR(c-&gt;WithValue(perm_elems, rank, &amp;perm_elems));</a></p>\n<p>Adding a check is solving the issue for us:</p>\n<pre><code>if (!c-&gt;ValueKnown(perm_elems))\nTF_RETURN_IF_ERROR(c-&gt;WithValue(perm_elems, rank, &amp;perm_elems)); \n</code></pre>\n<p>Please let us know if the solution looks ok to you.</p>", "body_text": "@frreiss @mrry We are able to narrow down the issue to the point of failure. For s390x, we are getting issue with TF_RETURN_IF_ERROR(c->WithValue(perm_elems, rank, &perm_elems));\nAdding a check is solving the issue for us:\nif (!c->ValueKnown(perm_elems))\nTF_RETURN_IF_ERROR(c->WithValue(perm_elems, rank, &perm_elems)); \n\nPlease let us know if the solution looks ok to you.", "body": "@frreiss @mrry We are able to narrow down the issue to the point of failure. For s390x, we are getting issue with [TF_RETURN_IF_ERROR(c->WithValue(perm_elems, rank, &perm_elems));](https://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/core/ops/array_ops.cc#L1797)\r\n\r\nAdding a check is solving the issue for us:\r\n```\r\nif (!c->ValueKnown(perm_elems))\r\nTF_RETURN_IF_ERROR(c->WithValue(perm_elems, rank, &perm_elems)); \r\n```\r\n\r\nPlease let us know if the solution looks ok to you."}
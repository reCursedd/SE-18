{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11431", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11431/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11431/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11431/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11431", "id": 242028696, "node_id": "MDU6SXNzdWUyNDIwMjg2OTY=", "number": 11431, "title": "Rank calculated incorrectly using 'gen_array_ops.rank()'", "user": {"login": "namrata-ibm", "id": 21953668, "node_id": "MDQ6VXNlcjIxOTUzNjY4", "avatar_url": "https://avatars3.githubusercontent.com/u/21953668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/namrata-ibm", "html_url": "https://github.com/namrata-ibm", "followers_url": "https://api.github.com/users/namrata-ibm/followers", "following_url": "https://api.github.com/users/namrata-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/namrata-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/namrata-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/namrata-ibm/subscriptions", "organizations_url": "https://api.github.com/users/namrata-ibm/orgs", "repos_url": "https://api.github.com/users/namrata-ibm/repos", "events_url": "https://api.github.com/users/namrata-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/namrata-ibm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2017-07-11T12:24:13Z", "updated_at": "2018-01-03T04:33:17Z", "closed_at": "2018-01-03T04:33:17Z", "author_association": "CONTRIBUTOR", "body_html": "<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 'v1.2.1-0-gb4957ff', '1.2.1'</li>\n<li><strong>Python version</strong>:  2.7.12</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.4.5</li>\n<li><strong>CUDA/cuDNN version</strong>: No GPU</li>\n<li><strong>GPU model and memory</strong>: No GPU</li>\n<li><strong>Exact command to reproduce</strong>: //tensorflow/python/kernel_tests:transpose_op_test</li>\n</ul>\n<h3>The problem</h3>\n<p>While running TensorFlow tests such as  <code>//tensorflow/python/kernel_tests:transpose_op_test </code> or <code>//tensorflow/contrib/distributions:mixture_test</code>,<br>\non a big endian system they fail with error: <code>ValueError: Dimension must be 2 but is 0 for 'Mixture_1/sample/Categorical/sample/transpose' (op: 'Transpose') with input shapes: [1,4], [0].</code></p>\n<p>After debugging a little, realized that, while calculating <code>rank</code> of a tensor in <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/python/ops/array_ops.py#L1276\">transpose method</a>, the rank is calculated incorrectly via <code>gen_array_ops.rank(a)</code>.</p>\n<p>I tried replacing <code>rank = gen_array_ops.rank(a)</code> to use the <code>array_ops.rank(a)</code> method instead and it works perfectly fine.</p>\n<p>I tried the same change on an x86 machine and it doesn't break anything there.</p>\n<p>I am unable to understand the difference between the two methods though. Also is there some major impact of above change which is not very obvious?</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 'v1.2.1-0-gb4957ff', '1.2.1'\nPython version:  2.7.12\nBazel version (if compiling from source): 0.4.5\nCUDA/cuDNN version: No GPU\nGPU model and memory: No GPU\nExact command to reproduce: //tensorflow/python/kernel_tests:transpose_op_test\n\nThe problem\nWhile running TensorFlow tests such as  //tensorflow/python/kernel_tests:transpose_op_test  or //tensorflow/contrib/distributions:mixture_test,\non a big endian system they fail with error: ValueError: Dimension must be 2 but is 0 for 'Mixture_1/sample/Categorical/sample/transpose' (op: 'Transpose') with input shapes: [1,4], [0].\nAfter debugging a little, realized that, while calculating rank of a tensor in transpose method, the rank is calculated incorrectly via gen_array_ops.rank(a).\nI tried replacing rank = gen_array_ops.rank(a) to use the array_ops.rank(a) method instead and it works perfectly fine.\nI tried the same change on an x86 machine and it doesn't break anything there.\nI am unable to understand the difference between the two methods though. Also is there some major impact of above change which is not very obvious?", "body": "------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 'v1.2.1-0-gb4957ff', '1.2.1'\r\n- **Python version**:  2.7.12\r\n- **Bazel version (if compiling from source)**: 0.4.5\r\n- **CUDA/cuDNN version**: No GPU\r\n- **GPU model and memory**: No GPU\r\n- **Exact command to reproduce**: //tensorflow/python/kernel_tests:transpose_op_test\r\n\r\n### The problem\r\nWhile running TensorFlow tests such as  `//tensorflow/python/kernel_tests:transpose_op_test\r\n` or `//tensorflow/contrib/distributions:mixture_test`, \r\non a big endian system they fail with error: `ValueError: Dimension must be 2 but is 0 for 'Mixture_1/sample/Categorical/sample/transpose' (op: 'Transpose') with input shapes: [1,4], [0].`  \r\n\r\nAfter debugging a little, realized that, while calculating `rank` of a tensor in [transpose method](https://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/python/ops/array_ops.py#L1276), the rank is calculated incorrectly via `gen_array_ops.rank(a)`.\r\n\r\nI tried replacing `rank = gen_array_ops.rank(a)` to use the `array_ops.rank(a)` method instead and it works perfectly fine.\r\n\r\nI tried the same change on an x86 machine and it doesn't break anything there.\r\n\r\nI am unable to understand the difference between the two methods though. Also is there some major impact of above change which is not very obvious?"}
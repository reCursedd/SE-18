{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/426396332", "html_url": "https://github.com/tensorflow/tensorflow/pull/22517#issuecomment-426396332", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22517", "id": 426396332, "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjM5NjMzMg==", "user": {"login": "IMBurbank", "id": 21133719, "node_id": "MDQ6VXNlcjIxMTMzNzE5", "avatar_url": "https://avatars1.githubusercontent.com/u/21133719?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IMBurbank", "html_url": "https://github.com/IMBurbank", "followers_url": "https://api.github.com/users/IMBurbank/followers", "following_url": "https://api.github.com/users/IMBurbank/following{/other_user}", "gists_url": "https://api.github.com/users/IMBurbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/IMBurbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IMBurbank/subscriptions", "organizations_url": "https://api.github.com/users/IMBurbank/orgs", "repos_url": "https://api.github.com/users/IMBurbank/repos", "events_url": "https://api.github.com/users/IMBurbank/events{/privacy}", "received_events_url": "https://api.github.com/users/IMBurbank/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-02T19:14:28Z", "updated_at": "2018-10-02T20:04:16Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The main thing that stood out in the GPU Python3 invocation log was</p>\n<pre><code>ERROR: /tmpfs/src/github/tensorflow/tensorflow/python/BUILD:5651:1: Couldn't build file tensorflow/python/_objs/framework/fast_tensor_util.so/tensorflow/python/framework/fast_tensor_util.pic.o: undeclared inclusion(s) in rule '//tensorflow/python:framework/fast_tensor_util.so':\nthis rule is missing dependency declarations for the following files included by 'tensorflow/python/framework/fast_tensor_util.cpp':\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/arrayobject.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarrayobject.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarraytypes.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_common.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/numpyconfig.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/_numpyconfig.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_endian.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_cpu.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/utils.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/_neighborhood_iterator_imp.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/old_defines.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/__multiarray_api.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_interrupt.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ufuncobject.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_math.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_common.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/arrayobject.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/__ufunc_api.h'\nIn file included from /usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarraytypes.h:1816:0,\n                 from /usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarrayobject.h:18,\n                 from /usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/arrayobject.h:4,\n                 from bazel-out/host/genfiles/tensorflow/python/framework/fast_tensor_util.cpp:581:\n...\n</code></pre>\n<p>Of the 3 tests the failed in MacOS Python2 and CC:</p>\n<ul>\n<li><code>//tensorflow/core:platform_profile_utils_cpu_utils_test</code> failed with</li>\n</ul>\n<pre><code>sh: sysctl: command not found\n2018-10-02 18:51:50.312938: F tensorflow/core/platform/profile_utils/cpu_utils_test.cc:64] Check failed: cpu_frequency &gt; 0 (-1 vs. 0)\n*** Received signal 6 ***\n</code></pre>\n<ul>\n<li><code>//tensorflow/go:test</code> with</li>\n</ul>\n<pre><code>Could not find the 'go' tool in PATH or /usr/local/go\n</code></pre>\n<ul>\n<li><code>//tensorflow/python/debug:examples_test</code> with:</li>\n</ul>\n<pre><code>FailedPreconditionError (see above for traceback): Attempting to use uninitialized value v\n\t [[node v/read (defined at /Volumes/BuildData/tmpfs/bazel_output/_bazel_kbuilder/d1b2600cd78e76a92812a06683f5de10/execroot/org_tensorflow/bazel-out/darwin-opt/bin/tensorflow/python/debug/examples_test.runfiles/org_tensorflow/tensorflow/python/debug/examples/debug_errors.py:80)  = Identity[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](v)]]\n</code></pre>\n<p>and</p>\n<pre><code>Testing offline_analyzer\nERROR: offline_analyzer output didn't match expectation: sh: sysctl: command not found\nsh: sysctl: command not found\nsh: sysctl: command not found\nERROR: dump_dir flag is empty.\nExpected output: ERROR: dump_dir flag is empty.\n</code></pre>\n<p>Windows Bazel fails test <code>tensorflow/tools/ci_build/builds/gen_win_out.exe</code> with</p>\n<pre><code>==================== Test output for //py_test_dir/tensorflow/python/data/kernel_tests:optional_ops_test:\nTraceback (most recent call last):\n  File \"C:\\Python36\\lib\\sre_compile.py\", line 276, in _optimize_charset\n    charmap[k] = 1\nIndexError: bytearray index out of range\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"\\\\?\\T:\\tmp\\Bazel.runfiles_1gl6ejmy\\runfiles\\org_tensorflow\\py_test_dir\\tensorflow\\python\\data\\kernel_tests\\optional_ops_test.py\", line 23, in &lt;module&gt;\n    from tensorflow.python.data.kernel_tests import test_base\n...\nFile \"C:\\Python36\\lib\\sre_compile.py\", line 226, in _compile_charset\n    for op, av in _optimize_charset(charset, fixup, fixes):\n  File \"C:\\Python36\\lib\\sre_compile.py\", line 287, in _optimize_charset\n    charmap += b'\\0' * 0xff00\nMemoryError\n</code></pre>\n<p>and has a lot of flaky checks.</p>\n<p>Clicking the XLA details link leads to a <code>page not found</code>.</p>\n<p>MacOS Contrib has an unrelated broken test that's showing up in the logs of all the current PR's that I'm looking through.</p>\n<pre><code>tensorflow/contrib/lite/kernels/activations_test.cc:561\nValue of: m.GetDequantizedOutput&lt;uint8_t&gt;()\nExpected: has 8 elements where\nelement #0 is approximately -4.1429701 (absolute error &lt;= 0.0625),\nelement #1 is approximately -10.14297 (absolute error &lt;= 0.0625),\nelement #2 is approximately -2.1429701 (absolute error &lt;= 0.0625),\nelement #3 is approximately -0.14297099 (absolute error &lt;= 0.0625),\nelement #4 is approximately -7.00104 (absolute error &lt;= 0.0625),\nelement #5 is approximately -12.00104 (absolute error &lt;= 0.0625),\nelement #6 is approximately -0.00104087 (absolute error &lt;= 0.0625),\nelement #7 is approximately -9.0010405 (absolute error &lt;= 0.0625)\n  Actual: { -1.375, -1.375, -1.375, -1.375, -1.375, -1.375, -1.375, -1.375 }, whose element #0 doesn't match, which is 2.76797 from -4.14297\n</code></pre>\n<hr>\n<p>I noticed similar log errors for the 6 failing checks in the half-dozen PR's I checked with recent test runs.</p>\n<p>There may be an issue that needs to be ironed out the current build or test pipeline.</p>\n<p>If you see anywhere I can be useful - I'm happy to help.</p>", "body_text": "The main thing that stood out in the GPU Python3 invocation log was\nERROR: /tmpfs/src/github/tensorflow/tensorflow/python/BUILD:5651:1: Couldn't build file tensorflow/python/_objs/framework/fast_tensor_util.so/tensorflow/python/framework/fast_tensor_util.pic.o: undeclared inclusion(s) in rule '//tensorflow/python:framework/fast_tensor_util.so':\nthis rule is missing dependency declarations for the following files included by 'tensorflow/python/framework/fast_tensor_util.cpp':\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/arrayobject.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarrayobject.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarraytypes.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_common.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/numpyconfig.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/_numpyconfig.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_endian.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_cpu.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/utils.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/_neighborhood_iterator_imp.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/old_defines.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/__multiarray_api.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_interrupt.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ufuncobject.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_math.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_common.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/arrayobject.h'\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/__ufunc_api.h'\nIn file included from /usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarraytypes.h:1816:0,\n                 from /usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarrayobject.h:18,\n                 from /usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/arrayobject.h:4,\n                 from bazel-out/host/genfiles/tensorflow/python/framework/fast_tensor_util.cpp:581:\n...\n\nOf the 3 tests the failed in MacOS Python2 and CC:\n\n//tensorflow/core:platform_profile_utils_cpu_utils_test failed with\n\nsh: sysctl: command not found\n2018-10-02 18:51:50.312938: F tensorflow/core/platform/profile_utils/cpu_utils_test.cc:64] Check failed: cpu_frequency > 0 (-1 vs. 0)\n*** Received signal 6 ***\n\n\n//tensorflow/go:test with\n\nCould not find the 'go' tool in PATH or /usr/local/go\n\n\n//tensorflow/python/debug:examples_test with:\n\nFailedPreconditionError (see above for traceback): Attempting to use uninitialized value v\n\t [[node v/read (defined at /Volumes/BuildData/tmpfs/bazel_output/_bazel_kbuilder/d1b2600cd78e76a92812a06683f5de10/execroot/org_tensorflow/bazel-out/darwin-opt/bin/tensorflow/python/debug/examples_test.runfiles/org_tensorflow/tensorflow/python/debug/examples/debug_errors.py:80)  = Identity[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](v)]]\n\nand\nTesting offline_analyzer\nERROR: offline_analyzer output didn't match expectation: sh: sysctl: command not found\nsh: sysctl: command not found\nsh: sysctl: command not found\nERROR: dump_dir flag is empty.\nExpected output: ERROR: dump_dir flag is empty.\n\nWindows Bazel fails test tensorflow/tools/ci_build/builds/gen_win_out.exe with\n==================== Test output for //py_test_dir/tensorflow/python/data/kernel_tests:optional_ops_test:\nTraceback (most recent call last):\n  File \"C:\\Python36\\lib\\sre_compile.py\", line 276, in _optimize_charset\n    charmap[k] = 1\nIndexError: bytearray index out of range\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"\\\\?\\T:\\tmp\\Bazel.runfiles_1gl6ejmy\\runfiles\\org_tensorflow\\py_test_dir\\tensorflow\\python\\data\\kernel_tests\\optional_ops_test.py\", line 23, in <module>\n    from tensorflow.python.data.kernel_tests import test_base\n...\nFile \"C:\\Python36\\lib\\sre_compile.py\", line 226, in _compile_charset\n    for op, av in _optimize_charset(charset, fixup, fixes):\n  File \"C:\\Python36\\lib\\sre_compile.py\", line 287, in _optimize_charset\n    charmap += b'\\0' * 0xff00\nMemoryError\n\nand has a lot of flaky checks.\nClicking the XLA details link leads to a page not found.\nMacOS Contrib has an unrelated broken test that's showing up in the logs of all the current PR's that I'm looking through.\ntensorflow/contrib/lite/kernels/activations_test.cc:561\nValue of: m.GetDequantizedOutput<uint8_t>()\nExpected: has 8 elements where\nelement #0 is approximately -4.1429701 (absolute error <= 0.0625),\nelement #1 is approximately -10.14297 (absolute error <= 0.0625),\nelement #2 is approximately -2.1429701 (absolute error <= 0.0625),\nelement #3 is approximately -0.14297099 (absolute error <= 0.0625),\nelement #4 is approximately -7.00104 (absolute error <= 0.0625),\nelement #5 is approximately -12.00104 (absolute error <= 0.0625),\nelement #6 is approximately -0.00104087 (absolute error <= 0.0625),\nelement #7 is approximately -9.0010405 (absolute error <= 0.0625)\n  Actual: { -1.375, -1.375, -1.375, -1.375, -1.375, -1.375, -1.375, -1.375 }, whose element #0 doesn't match, which is 2.76797 from -4.14297\n\n\nI noticed similar log errors for the 6 failing checks in the half-dozen PR's I checked with recent test runs.\nThere may be an issue that needs to be ironed out the current build or test pipeline.\nIf you see anywhere I can be useful - I'm happy to help.", "body": "The main thing that stood out in the GPU Python3 invocation log was\r\n```\r\nERROR: /tmpfs/src/github/tensorflow/tensorflow/python/BUILD:5651:1: Couldn't build file tensorflow/python/_objs/framework/fast_tensor_util.so/tensorflow/python/framework/fast_tensor_util.pic.o: undeclared inclusion(s) in rule '//tensorflow/python:framework/fast_tensor_util.so':\r\nthis rule is missing dependency declarations for the following files included by 'tensorflow/python/framework/fast_tensor_util.cpp':\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/arrayobject.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarrayobject.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarraytypes.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_common.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/numpyconfig.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/_numpyconfig.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_endian.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_cpu.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/utils.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/_neighborhood_iterator_imp.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/old_defines.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/__multiarray_api.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_interrupt.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ufuncobject.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_math.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/npy_common.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/arrayobject.h'\r\n  '/usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/__ufunc_api.h'\r\nIn file included from /usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarraytypes.h:1816:0,\r\n                 from /usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/ndarrayobject.h:18,\r\n                 from /usr/local/lib/python3.4/dist-packages/numpy/core/include/numpy/arrayobject.h:4,\r\n                 from bazel-out/host/genfiles/tensorflow/python/framework/fast_tensor_util.cpp:581:\r\n...\r\n```\r\n\r\nOf the 3 tests the failed in MacOS Python2 and CC:\r\n- `//tensorflow/core:platform_profile_utils_cpu_utils_test` failed with\r\n```\r\nsh: sysctl: command not found\r\n2018-10-02 18:51:50.312938: F tensorflow/core/platform/profile_utils/cpu_utils_test.cc:64] Check failed: cpu_frequency > 0 (-1 vs. 0)\r\n*** Received signal 6 ***\r\n```\r\n- `//tensorflow/go:test` with\r\n```\r\nCould not find the 'go' tool in PATH or /usr/local/go\r\n```\r\n- `//tensorflow/python/debug:examples_test` with:\r\n```\r\nFailedPreconditionError (see above for traceback): Attempting to use uninitialized value v\r\n\t [[node v/read (defined at /Volumes/BuildData/tmpfs/bazel_output/_bazel_kbuilder/d1b2600cd78e76a92812a06683f5de10/execroot/org_tensorflow/bazel-out/darwin-opt/bin/tensorflow/python/debug/examples_test.runfiles/org_tensorflow/tensorflow/python/debug/examples/debug_errors.py:80)  = Identity[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](v)]]\r\n```\r\nand\r\n```\r\nTesting offline_analyzer\r\nERROR: offline_analyzer output didn't match expectation: sh: sysctl: command not found\r\nsh: sysctl: command not found\r\nsh: sysctl: command not found\r\nERROR: dump_dir flag is empty.\r\nExpected output: ERROR: dump_dir flag is empty.\r\n```\r\n\r\nWindows Bazel fails test `tensorflow/tools/ci_build/builds/gen_win_out.exe` with\r\n```\r\n==================== Test output for //py_test_dir/tensorflow/python/data/kernel_tests:optional_ops_test:\r\nTraceback (most recent call last):\r\n  File \"C:\\Python36\\lib\\sre_compile.py\", line 276, in _optimize_charset\r\n    charmap[k] = 1\r\nIndexError: bytearray index out of range\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"\\\\?\\T:\\tmp\\Bazel.runfiles_1gl6ejmy\\runfiles\\org_tensorflow\\py_test_dir\\tensorflow\\python\\data\\kernel_tests\\optional_ops_test.py\", line 23, in <module>\r\n    from tensorflow.python.data.kernel_tests import test_base\r\n...\r\nFile \"C:\\Python36\\lib\\sre_compile.py\", line 226, in _compile_charset\r\n    for op, av in _optimize_charset(charset, fixup, fixes):\r\n  File \"C:\\Python36\\lib\\sre_compile.py\", line 287, in _optimize_charset\r\n    charmap += b'\\0' * 0xff00\r\nMemoryError\r\n```\r\nand has a lot of flaky checks.\r\n\r\nClicking the XLA details link leads to a `page not found`.\r\n\r\nMacOS Contrib has an unrelated broken test that's showing up in the logs of all the current PR's that I'm looking through.\r\n```\r\ntensorflow/contrib/lite/kernels/activations_test.cc:561\r\nValue of: m.GetDequantizedOutput<uint8_t>()\r\nExpected: has 8 elements where\r\nelement #0 is approximately -4.1429701 (absolute error <= 0.0625),\r\nelement #1 is approximately -10.14297 (absolute error <= 0.0625),\r\nelement #2 is approximately -2.1429701 (absolute error <= 0.0625),\r\nelement #3 is approximately -0.14297099 (absolute error <= 0.0625),\r\nelement #4 is approximately -7.00104 (absolute error <= 0.0625),\r\nelement #5 is approximately -12.00104 (absolute error <= 0.0625),\r\nelement #6 is approximately -0.00104087 (absolute error <= 0.0625),\r\nelement #7 is approximately -9.0010405 (absolute error <= 0.0625)\r\n  Actual: { -1.375, -1.375, -1.375, -1.375, -1.375, -1.375, -1.375, -1.375 }, whose element #0 doesn't match, which is 2.76797 from -4.14297\r\n```\r\n\r\n\r\n---\r\nI noticed similar log errors for the 6 failing checks in the half-dozen PR's I checked with recent test runs.\r\n\r\nThere may be an issue that needs to be ironed out the current build or test pipeline.\r\n\r\nIf you see anywhere I can be useful - I'm happy to help."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/352596298", "html_url": "https://github.com/tensorflow/tensorflow/pull/15402#issuecomment-352596298", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15402", "id": 352596298, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjU5NjI5OA==", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-18T23:58:52Z", "updated_at": "2017-12-18T23:58:52Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1794715\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ebrevdo\">@ebrevdo</a> Thanks for the review. I tried to enable complex for GPU but have the following <code>host function(\"__builtin_csqrtf\") from a device function</code> error.</p>\n<p>I am guessing Eigen does not have a complex version of <code>sqrt</code> on GPU yet.</p>\n<p>Maybe we could leave GPU part alone for now?</p>\n<p>If I could be pointed to the place in Eigen to make the necessary change, I will be happy to submit a PR in Eigen.</p>\n<p>external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorEvaluator.h(420): error: calling a <strong>host</strong> function(\"__builtin_csqrtf\") from a <strong>device</strong> function(\"Eigen::internal::EigenMetaKernelEval&lt; ::Eigen::TensorEvaluator&lt;const  ::Eigen::TensorAssignOp&lt; ::Eigen::TensorMap&lt; ::Eigen::Tensor&lt; ::std::complex , (int)1, (int)1, long&gt; , (int)16,  ::Eigen::MakePointer&gt; , const  ::Eigen::TensorCwiseBinaryOp&lt; ::Eigen::internal::scalar_difference_op&lt; ::std::complex ,  ::std::complex &gt; , const  ::Eigen::TensorMap&lt; ::Eigen::Tensor&lt; ::std::complex , (int)1, (int)1, long&gt; , (int)16,  ::Eigen::MakePointer&gt; , const  ::Eigen::TensorCwiseBinaryOp&lt; ::Eigen::internal::scalar_product_op&lt; ::std::complex ,  ::std::complex &gt; , const  ::Eigen::TensorCwiseBinaryOp&lt; ::Eigen::internal::scalar_product_op&lt; ::std::complex ,  ::std::complex &gt; , const  ::Eigen::TensorCwiseBinaryOp&lt; ::Eigen::internal::scalar_product_op&lt; ::std::complex ,  ::std::complex &gt; , const  ::Eigen::TensorCwiseUnaryOp&lt; ::Eigen::internal::scalar_sqrt_op&lt; ::std::complex &gt; , const  ::Eigen::TensorCwiseBinaryOp&lt; ::Eigen::internal::scalar_sum_op&lt; ::std::complex ,  ::std::complex &gt; , const  ::Eigen::TensorMap&lt; ::Eigen::Tensor&lt; ::std::complex , (int)1, (int)1, long&gt; , (int)16,  ::Eigen::MakePointer&gt; , const  ::Eigen::TensorBroadcastingOp&lt;const  ::Eigen::array&lt;long, (unsigned long)1ul&gt; , const  ::Eigen::TensorReshapingOp&lt;const  ::Eigen::Sizes&lt;(long)1l &gt; , const  ::Eigen::TensorMap&lt; ::Eigen::TensorFixedSize&lt;const  ::std::complex ,  ::Eigen::Sizes&lt; &gt; , (int)1, long&gt; , (int)16,  ::Eigen::MakePointer&gt; &gt; &gt; &gt; &gt; , const  ::Eigen::TensorCwiseUnaryOp&lt; ::Eigen::internal::scalar_rsqrt_op&lt; ::std::complex &gt; , const  ::Eigen::TensorCwiseBinaryOp&lt; ::Eigen::internal::scalar_sum_op&lt; ::std::complex ,  ::std::complex &gt; , const  ::Eigen::TensorMap&lt; ::Eigen::Tensor&lt; ::std::complex , (int)1, (int)1, long&gt; , (int)16,  ::Eigen::MakePointer&gt; , const  ::Eigen::TensorBroadcastingOp&lt;const  ::Eigen::array&lt;long, (unsigned long)1ul&gt; , const  ::Eigen::TensorReshapingOp&lt;const  ::Eigen::Sizes&lt;(long)1l &gt; , const  ::Eigen::TensorMap&lt; ::Eigen::TensorFixedSize&lt;const  ::std::complex ,  ::Eigen::Sizes&lt; &gt; , (int)1, long&gt; , (int)16,  ::Eigen::MakePointer&gt; &gt; &gt; &gt; &gt; &gt; , const  ::Eigen::TensorMap&lt; ::Eigen::Tensor&lt;const  ::std::complex , (int)1, (int)1, long&gt; , (int)16,  ::Eigen::MakePointer&gt; &gt; , const  ::Eigen::TensorBroadcastingOp&lt;const  ::Eigen::array&lt;long, (unsigned long)1ul&gt; , const  ::Eigen::TensorReshapingOp&lt;const  ::Eigen::Sizes&lt;(long)1l &gt; , const  ::Eigen::TensorMap&lt; ::Eigen::TensorFixedSize&lt;const  ::std::complex ,  ::Eigen::Sizes&lt; &gt; , (int)1, long&gt; , (int)16,  ::Eigen::MakePointer&gt; &gt; &gt; &gt; &gt; &gt; ,  ::Eigen::GpuDevice&gt; , long, (bool)0&gt; ::run\") is not allowed</p>", "body_text": "@ebrevdo Thanks for the review. I tried to enable complex for GPU but have the following host function(\"__builtin_csqrtf\") from a device function error.\nI am guessing Eigen does not have a complex version of sqrt on GPU yet.\nMaybe we could leave GPU part alone for now?\nIf I could be pointed to the place in Eigen to make the necessary change, I will be happy to submit a PR in Eigen.\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorEvaluator.h(420): error: calling a host function(\"__builtin_csqrtf\") from a device function(\"Eigen::internal::EigenMetaKernelEval< ::Eigen::TensorEvaluator<const  ::Eigen::TensorAssignOp< ::Eigen::TensorMap< ::Eigen::Tensor< ::std::complex , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_difference_op< ::std::complex ,  ::std::complex > , const  ::Eigen::TensorMap< ::Eigen::Tensor< ::std::complex , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_product_op< ::std::complex ,  ::std::complex > , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_product_op< ::std::complex ,  ::std::complex > , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_product_op< ::std::complex ,  ::std::complex > , const  ::Eigen::TensorCwiseUnaryOp< ::Eigen::internal::scalar_sqrt_op< ::std::complex > , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_sum_op< ::std::complex ,  ::std::complex > , const  ::Eigen::TensorMap< ::Eigen::Tensor< ::std::complex , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> , const  ::Eigen::TensorBroadcastingOp<const  ::Eigen::array<long, (unsigned long)1ul> , const  ::Eigen::TensorReshapingOp<const  ::Eigen::Sizes<(long)1l > , const  ::Eigen::TensorMap< ::Eigen::TensorFixedSize<const  ::std::complex ,  ::Eigen::Sizes< > , (int)1, long> , (int)16,  ::Eigen::MakePointer> > > > > , const  ::Eigen::TensorCwiseUnaryOp< ::Eigen::internal::scalar_rsqrt_op< ::std::complex > , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_sum_op< ::std::complex ,  ::std::complex > , const  ::Eigen::TensorMap< ::Eigen::Tensor< ::std::complex , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> , const  ::Eigen::TensorBroadcastingOp<const  ::Eigen::array<long, (unsigned long)1ul> , const  ::Eigen::TensorReshapingOp<const  ::Eigen::Sizes<(long)1l > , const  ::Eigen::TensorMap< ::Eigen::TensorFixedSize<const  ::std::complex ,  ::Eigen::Sizes< > , (int)1, long> , (int)16,  ::Eigen::MakePointer> > > > > > , const  ::Eigen::TensorMap< ::Eigen::Tensor<const  ::std::complex , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> > , const  ::Eigen::TensorBroadcastingOp<const  ::Eigen::array<long, (unsigned long)1ul> , const  ::Eigen::TensorReshapingOp<const  ::Eigen::Sizes<(long)1l > , const  ::Eigen::TensorMap< ::Eigen::TensorFixedSize<const  ::std::complex ,  ::Eigen::Sizes< > , (int)1, long> , (int)16,  ::Eigen::MakePointer> > > > > > ,  ::Eigen::GpuDevice> , long, (bool)0> ::run\") is not allowed", "body": "@ebrevdo Thanks for the review. I tried to enable complex for GPU but have the following `host function(\"__builtin_csqrtf\") from a device function` error.\r\n\r\nI am guessing Eigen does not have a complex version of `sqrt` on GPU yet.\r\n\r\nMaybe we could leave GPU part alone for now?\r\n\r\nIf I could be pointed to the place in Eigen to make the necessary change, I will be happy to submit a PR in Eigen.\r\n\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorEvaluator.h(420): error: calling a __host__ function(\"__builtin_csqrtf\") from a __device__ function(\"Eigen::internal::EigenMetaKernelEval< ::Eigen::TensorEvaluator<const  ::Eigen::TensorAssignOp< ::Eigen::TensorMap< ::Eigen::Tensor< ::std::complex<float> , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_difference_op< ::std::complex<float> ,  ::std::complex<float> > , const  ::Eigen::TensorMap< ::Eigen::Tensor< ::std::complex<float> , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_product_op< ::std::complex<float> ,  ::std::complex<float> > , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_product_op< ::std::complex<float> ,  ::std::complex<float> > , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_product_op< ::std::complex<float> ,  ::std::complex<float> > , const  ::Eigen::TensorCwiseUnaryOp< ::Eigen::internal::scalar_sqrt_op< ::std::complex<float> > , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_sum_op< ::std::complex<float> ,  ::std::complex<float> > , const  ::Eigen::TensorMap< ::Eigen::Tensor< ::std::complex<float> , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> , const  ::Eigen::TensorBroadcastingOp<const  ::Eigen::array<long, (unsigned long)1ul> , const  ::Eigen::TensorReshapingOp<const  ::Eigen::Sizes<(long)1l > , const  ::Eigen::TensorMap< ::Eigen::TensorFixedSize<const  ::std::complex<float> ,  ::Eigen::Sizes< > , (int)1, long> , (int)16,  ::Eigen::MakePointer> > > > > , const  ::Eigen::TensorCwiseUnaryOp< ::Eigen::internal::scalar_rsqrt_op< ::std::complex<float> > , const  ::Eigen::TensorCwiseBinaryOp< ::Eigen::internal::scalar_sum_op< ::std::complex<float> ,  ::std::complex<float> > , const  ::Eigen::TensorMap< ::Eigen::Tensor< ::std::complex<float> , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> , const  ::Eigen::TensorBroadcastingOp<const  ::Eigen::array<long, (unsigned long)1ul> , const  ::Eigen::TensorReshapingOp<const  ::Eigen::Sizes<(long)1l > , const  ::Eigen::TensorMap< ::Eigen::TensorFixedSize<const  ::std::complex<float> ,  ::Eigen::Sizes< > , (int)1, long> , (int)16,  ::Eigen::MakePointer> > > > > > , const  ::Eigen::TensorMap< ::Eigen::Tensor<const  ::std::complex<float> , (int)1, (int)1, long> , (int)16,  ::Eigen::MakePointer> > , const  ::Eigen::TensorBroadcastingOp<const  ::Eigen::array<long, (unsigned long)1ul> , const  ::Eigen::TensorReshapingOp<const  ::Eigen::Sizes<(long)1l > , const  ::Eigen::TensorMap< ::Eigen::TensorFixedSize<const  ::std::complex<float> ,  ::Eigen::Sizes< > , (int)1, long> , (int)16,  ::Eigen::MakePointer> > > > > > ,  ::Eigen::GpuDevice> , long, (bool)0> ::run\") is not allowed"}
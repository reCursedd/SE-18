{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11737", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11737/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11737/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11737/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11737", "id": 245302178, "node_id": "MDU6SXNzdWUyNDUzMDIxNzg=", "number": 11737, "title": "syntaxnet: parser_eval --graph_builder=greedy ,Assign requires shapes of both tensors to match. lhs shape= [32,69] rhs shape= [400,69]", "user": {"login": "0YuanZhang0", "id": 21216639, "node_id": "MDQ6VXNlcjIxMjE2NjM5", "avatar_url": "https://avatars3.githubusercontent.com/u/21216639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0YuanZhang0", "html_url": "https://github.com/0YuanZhang0", "followers_url": "https://api.github.com/users/0YuanZhang0/followers", "following_url": "https://api.github.com/users/0YuanZhang0/following{/other_user}", "gists_url": "https://api.github.com/users/0YuanZhang0/gists{/gist_id}", "starred_url": "https://api.github.com/users/0YuanZhang0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0YuanZhang0/subscriptions", "organizations_url": "https://api.github.com/users/0YuanZhang0/orgs", "repos_url": "https://api.github.com/users/0YuanZhang0/repos", "events_url": "https://api.github.com/users/0YuanZhang0/events{/privacy}", "received_events_url": "https://api.github.com/users/0YuanZhang0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-25T06:52:10Z", "updated_at": "2017-07-25T18:18:42Z", "closed_at": "2017-07-25T18:18:42Z", "author_association": "NONE", "body_html": "<p>Error:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/21216639/28559200-238f40a6-7148-11e7-90c6-0f426bfe8426.png\"><img src=\"https://user-images.githubusercontent.com/21216639/28559200-238f40a6-7148-11e7-90c6-0f426bfe8426.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>\n<p>I use GPU to train;<br>\nwhen greedy training, I can train model and parser eval with --graph_builder=structured successful, but parser_eval with --graph_builder=greedy failed;<br>\nhere is my configuration:<br>\n\"bazel-bin/syntaxnet/parser_trainer\" <br>\n--arg_prefix=brain_parser <br>\n--batch_size=400 <br>\n--compute_lexicon <br>\n--decay_steps=4400 <br>\n--graph_builder=greedy <br>\n--hidden_layer_sizes=1024,1024 <br>\n--learning_rate=0.08 <br>\n--momentum=0.9 <br>\n--seed=4 <br>\n--output_path=$TMP_DIR <br>\n--task_context=$TMP_DIR/context <br>\n--training_corpus=training-corpus <br>\n--tuning_corpus=tuning-corpus <br>\n--params=$PARAMS <br>\n--num_epochs=25 <br>\n--report_every=1000 <br>\n--checkpoint_every=10000 <br>\n--logtostderr</p>\n<p>\"bazel-bin/syntaxnet/parser_eval\" <br>\n--task_context=$TMP_DIR/brain_parser/greedy/$PARAMS/context <br>\n--hidden_layer_sizes=1024,1024 <br>\n--input=dev-corpus <br>\n--output=stdout <br>\n--arg_prefix=brain_parser <br>\n--graph_builder=greedy <br>\n--model_path=$TMP_DIR/brain_parser/greedy/$PARAMS/model <br>\n--logtostderr \\</p>\n<blockquote>\n<p>$TMP_DIR/greedy-out</p>\n</blockquote>\n<p>\"bazel-bin/syntaxnet/parser_eval\" <br>\n--task_context=$TMP_DIR/context <br>\n--hidden_layer_sizes=1024,1024 <br>\n--beam_size=1 <br>\n--input=dev-corpus <br>\n--output=stdout <br>\n--arg_prefix=brain_parser <br>\n--graph_builder=structured <br>\n--model_path=$TMP_DIR/brain_parser/greedy/$PARAMS/model <br>\n--logtostderr \\</p>\n<blockquote>\n<p>$TMP_DIR/struct-beam1-out</p>\n</blockquote>", "body_text": "Error:\n\nI use GPU to train;\nwhen greedy training, I can train model and parser eval with --graph_builder=structured successful, but parser_eval with --graph_builder=greedy failed;\nhere is my configuration:\n\"bazel-bin/syntaxnet/parser_trainer\" \n--arg_prefix=brain_parser \n--batch_size=400 \n--compute_lexicon \n--decay_steps=4400 \n--graph_builder=greedy \n--hidden_layer_sizes=1024,1024 \n--learning_rate=0.08 \n--momentum=0.9 \n--seed=4 \n--output_path=$TMP_DIR \n--task_context=$TMP_DIR/context \n--training_corpus=training-corpus \n--tuning_corpus=tuning-corpus \n--params=$PARAMS \n--num_epochs=25 \n--report_every=1000 \n--checkpoint_every=10000 \n--logtostderr\n\"bazel-bin/syntaxnet/parser_eval\" \n--task_context=$TMP_DIR/brain_parser/greedy/$PARAMS/context \n--hidden_layer_sizes=1024,1024 \n--input=dev-corpus \n--output=stdout \n--arg_prefix=brain_parser \n--graph_builder=greedy \n--model_path=$TMP_DIR/brain_parser/greedy/$PARAMS/model \n--logtostderr \\\n\n$TMP_DIR/greedy-out\n\n\"bazel-bin/syntaxnet/parser_eval\" \n--task_context=$TMP_DIR/context \n--hidden_layer_sizes=1024,1024 \n--beam_size=1 \n--input=dev-corpus \n--output=stdout \n--arg_prefix=brain_parser \n--graph_builder=structured \n--model_path=$TMP_DIR/brain_parser/greedy/$PARAMS/model \n--logtostderr \\\n\n$TMP_DIR/struct-beam1-out", "body": "Error: \r\n![image](https://user-images.githubusercontent.com/21216639/28559200-238f40a6-7148-11e7-90c6-0f426bfe8426.png)\r\n\r\nI use GPU to train;\r\nwhen greedy training, I can train model and parser eval with --graph_builder=structured successful, but parser_eval with --graph_builder=greedy failed;\r\nhere is my configuration: \r\n\"bazel-bin/syntaxnet/parser_trainer\" \\\r\n  --arg_prefix=brain_parser \\\r\n  --batch_size=400 \\\r\n  --compute_lexicon \\\r\n  --decay_steps=4400 \\\r\n  --graph_builder=greedy \\\r\n  --hidden_layer_sizes=1024,1024 \\\r\n  --learning_rate=0.08 \\\r\n  --momentum=0.9 \\\r\n  --seed=4 \\\r\n  --output_path=$TMP_DIR \\\r\n  --task_context=$TMP_DIR/context \\\r\n  --training_corpus=training-corpus \\\r\n  --tuning_corpus=tuning-corpus \\\r\n  --params=$PARAMS \\\r\n  --num_epochs=25 \\\r\n  --report_every=1000 \\\r\n  --checkpoint_every=10000 \\\r\n  --logtostderr\r\n\r\n\"bazel-bin/syntaxnet/parser_eval\" \\\r\n  --task_context=$TMP_DIR/brain_parser/greedy/$PARAMS/context \\\r\n  --hidden_layer_sizes=1024,1024 \\\r\n  --input=dev-corpus \\\r\n  --output=stdout \\\r\n  --arg_prefix=brain_parser \\\r\n  --graph_builder=greedy \\\r\n  --model_path=$TMP_DIR/brain_parser/greedy/$PARAMS/model \\\r\n  --logtostderr \\\r\n  > $TMP_DIR/greedy-out\r\n\r\n\"bazel-bin/syntaxnet/parser_eval\" \\\r\n  --task_context=$TMP_DIR/context \\\r\n  --hidden_layer_sizes=1024,1024 \\\r\n  --beam_size=1 \\\r\n  --input=dev-corpus \\\r\n  --output=stdout \\\r\n  --arg_prefix=brain_parser \\\r\n  --graph_builder=structured \\\r\n  --model_path=$TMP_DIR/brain_parser/greedy/$PARAMS/model \\\r\n  --logtostderr \\\r\n  > $TMP_DIR/struct-beam1-out\r\n\r\n\r\n"}
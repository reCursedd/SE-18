{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/405231353", "html_url": "https://github.com/tensorflow/tensorflow/issues/20073#issuecomment-405231353", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20073", "id": 405231353, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTIzMTM1Mw==", "user": {"login": "Hvass-Labs", "id": 13588114, "node_id": "MDQ6VXNlcjEzNTg4MTE0", "avatar_url": "https://avatars2.githubusercontent.com/u/13588114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hvass-Labs", "html_url": "https://github.com/Hvass-Labs", "followers_url": "https://api.github.com/users/Hvass-Labs/followers", "following_url": "https://api.github.com/users/Hvass-Labs/following{/other_user}", "gists_url": "https://api.github.com/users/Hvass-Labs/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hvass-Labs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hvass-Labs/subscriptions", "organizations_url": "https://api.github.com/users/Hvass-Labs/orgs", "repos_url": "https://api.github.com/users/Hvass-Labs/repos", "events_url": "https://api.github.com/users/Hvass-Labs/events{/privacy}", "received_events_url": "https://api.github.com/users/Hvass-Labs/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-16T12:28:47Z", "updated_at": "2018-07-16T12:28:47Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I get a similar error-message in <a href=\"https://github.com/Hvass-Labs/TensorFlow-Tutorials/blob/master/19_Hyper-Parameters.ipynb\">this notebook</a> which worked perfectly with TensorFlow v. 1.4.0 and Keras v. 2.0.8-tf. I have just upgraded to TensorFlow 1.9 and Keras 2.1.6-tf and now I get an error.</p>\n<p>I have done an internet search and found many people experiencing different variations of this bug.</p>\n<p>This is the complete error message I get when calling <code>load_model()</code> in Keras:</p>\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-38-53ab8ddbb1a4&gt; in &lt;module&gt;()\n----&gt; 1 model = load_model(path_best_model)\n\n~/anaconda3/envs/tf-gpu-skopt/lib/python3.6/site-packages/tensorflow/python/keras/engine/saving.py in load_model(filepath, custom_objects, compile)\n    230 \n    231     # set weights\n--&gt; 232     load_weights_from_hdf5_group(f['model_weights'], model.layers)\n    233 \n    234     if compile:\n\n~/anaconda3/envs/tf-gpu-skopt/lib/python3.6/site-packages/tensorflow/python/keras/engine/saving.py in load_weights_from_hdf5_group(f, layers)\n    730                      'containing ' + str(len(layer_names)) +\n    731                      ' layers into a model with ' + str(len(filtered_layers)) +\n--&gt; 732                      ' layers.')\n    733 \n    734   # We batch weight value assignments in a single backend call\n\nValueError: You are trying to load a weight file containing 7 layers into a model with 0 layers.\n</code></pre>", "body_text": "I get a similar error-message in this notebook which worked perfectly with TensorFlow v. 1.4.0 and Keras v. 2.0.8-tf. I have just upgraded to TensorFlow 1.9 and Keras 2.1.6-tf and now I get an error.\nI have done an internet search and found many people experiencing different variations of this bug.\nThis is the complete error message I get when calling load_model() in Keras:\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-38-53ab8ddbb1a4> in <module>()\n----> 1 model = load_model(path_best_model)\n\n~/anaconda3/envs/tf-gpu-skopt/lib/python3.6/site-packages/tensorflow/python/keras/engine/saving.py in load_model(filepath, custom_objects, compile)\n    230 \n    231     # set weights\n--> 232     load_weights_from_hdf5_group(f['model_weights'], model.layers)\n    233 \n    234     if compile:\n\n~/anaconda3/envs/tf-gpu-skopt/lib/python3.6/site-packages/tensorflow/python/keras/engine/saving.py in load_weights_from_hdf5_group(f, layers)\n    730                      'containing ' + str(len(layer_names)) +\n    731                      ' layers into a model with ' + str(len(filtered_layers)) +\n--> 732                      ' layers.')\n    733 \n    734   # We batch weight value assignments in a single backend call\n\nValueError: You are trying to load a weight file containing 7 layers into a model with 0 layers.", "body": "I get a similar error-message in [this notebook](https://github.com/Hvass-Labs/TensorFlow-Tutorials/blob/master/19_Hyper-Parameters.ipynb) which worked perfectly with TensorFlow v. 1.4.0 and Keras v. 2.0.8-tf. I have just upgraded to TensorFlow 1.9 and Keras 2.1.6-tf and now I get an error.\r\n\r\nI have done an internet search and found many people experiencing different variations of this bug.\r\n\r\nThis is the complete error message I get when calling `load_model()` in Keras:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-38-53ab8ddbb1a4> in <module>()\r\n----> 1 model = load_model(path_best_model)\r\n\r\n~/anaconda3/envs/tf-gpu-skopt/lib/python3.6/site-packages/tensorflow/python/keras/engine/saving.py in load_model(filepath, custom_objects, compile)\r\n    230 \r\n    231     # set weights\r\n--> 232     load_weights_from_hdf5_group(f['model_weights'], model.layers)\r\n    233 \r\n    234     if compile:\r\n\r\n~/anaconda3/envs/tf-gpu-skopt/lib/python3.6/site-packages/tensorflow/python/keras/engine/saving.py in load_weights_from_hdf5_group(f, layers)\r\n    730                      'containing ' + str(len(layer_names)) +\r\n    731                      ' layers into a model with ' + str(len(filtered_layers)) +\r\n--> 732                      ' layers.')\r\n    733 \r\n    734   # We batch weight value assignments in a single backend call\r\n\r\nValueError: You are trying to load a weight file containing 7 layers into a model with 0 layers.\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4466", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4466/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4466/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4466/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4466", "id": 177832230, "node_id": "MDU6SXNzdWUxNzc4MzIyMzA=", "number": 4466, "title": "Android: Why is RandomShuffleQueue needed for testing?", "user": {"login": "catherineHR", "id": 19373301, "node_id": "MDQ6VXNlcjE5MzczMzAx", "avatar_url": "https://avatars2.githubusercontent.com/u/19373301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catherineHR", "html_url": "https://github.com/catherineHR", "followers_url": "https://api.github.com/users/catherineHR/followers", "following_url": "https://api.github.com/users/catherineHR/following{/other_user}", "gists_url": "https://api.github.com/users/catherineHR/gists{/gist_id}", "starred_url": "https://api.github.com/users/catherineHR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catherineHR/subscriptions", "organizations_url": "https://api.github.com/users/catherineHR/orgs", "repos_url": "https://api.github.com/users/catherineHR/repos", "events_url": "https://api.github.com/users/catherineHR/events{/privacy}", "received_events_url": "https://api.github.com/users/catherineHR/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2016-09-19T16:30:11Z", "updated_at": "2016-09-30T23:46:16Z", "closed_at": "2016-09-30T23:46:16Z", "author_association": "NONE", "body_html": "<p>Hello,</p>\n<p>I want to test a learnt model under Python on android, I'm on Tensorflow 0.9.<br>\nTo do so, I freezed my graph to have a single pb file with the graph and weight. I used Queues to manage my learning batches.</p>\n<p>When running my session on Android, I specify the input tensor by its name \"input_node\", which is the data layer as input in my network.<br>\nX = tf.reshape(X, [-1, W, H, 1], name=\"input_node\")<br>\nand call the \"output_node\" layer :<br>\noutput = tf.reshape(h_fc11, shape=[-1, 8], name=\"output_node\")</p>\n<p>The batch generation is done before, so it should not been used when testing.<br>\nBut I have the following error:<br>\ntensorflow_jni.cc:312 Error during inference: Invalid argument: No OpKernel was registered to support Op 'RandomShuffleQueue' with these attrs<br>\n[[Node: shuffle_batch/random_shuffle_queue = RandomShuffleQueue<a href=\"\">capacity=10750, component_types=[DT_FLOAT, DT_FLOAT], container=\"\", min_after_dequeue=10000, seed=0, seed2=0, shapes=[[10000], [8]], shared_name=\"\"</a>]]</p>\n<p>It seems that the batch generation layer is called (my images are 100x100 and I have 8 outputs), but I don't know why.</p>\n<p>When testing the same model with the same input/output layers though the image_labelling.cc directly on Mac (building with Bazel), I don't have the error.</p>\n<p>I do not understand why the RandomShuffleQueue is needed when testing. Am I missing something to specify the part of the graph I want to use? Are all the layers of the graph verified even if not used?</p>\n<p>Thanks.</p>", "body_text": "Hello,\nI want to test a learnt model under Python on android, I'm on Tensorflow 0.9.\nTo do so, I freezed my graph to have a single pb file with the graph and weight. I used Queues to manage my learning batches.\nWhen running my session on Android, I specify the input tensor by its name \"input_node\", which is the data layer as input in my network.\nX = tf.reshape(X, [-1, W, H, 1], name=\"input_node\")\nand call the \"output_node\" layer :\noutput = tf.reshape(h_fc11, shape=[-1, 8], name=\"output_node\")\nThe batch generation is done before, so it should not been used when testing.\nBut I have the following error:\ntensorflow_jni.cc:312 Error during inference: Invalid argument: No OpKernel was registered to support Op 'RandomShuffleQueue' with these attrs\n[[Node: shuffle_batch/random_shuffle_queue = RandomShuffleQueuecapacity=10750, component_types=[DT_FLOAT, DT_FLOAT], container=\"\", min_after_dequeue=10000, seed=0, seed2=0, shapes=[[10000], [8]], shared_name=\"\"]]\nIt seems that the batch generation layer is called (my images are 100x100 and I have 8 outputs), but I don't know why.\nWhen testing the same model with the same input/output layers though the image_labelling.cc directly on Mac (building with Bazel), I don't have the error.\nI do not understand why the RandomShuffleQueue is needed when testing. Am I missing something to specify the part of the graph I want to use? Are all the layers of the graph verified even if not used?\nThanks.", "body": "Hello, \n\nI want to test a learnt model under Python on android, I'm on Tensorflow 0.9.\nTo do so, I freezed my graph to have a single pb file with the graph and weight. I used Queues to manage my learning batches.\n\nWhen running my session on Android, I specify the input tensor by its name \"input_node\", which is the data layer as input in my network. \nX = tf.reshape(X, [-1, W, H, 1], name=\"input_node\")\nand call the \"output_node\" layer : \noutput = tf.reshape(h_fc11, shape=[-1, 8], name=\"output_node\")\n\nThe batch generation is done before, so it should not been used when testing.\nBut I have the following error:\ntensorflow_jni.cc:312 Error during inference: Invalid argument: No OpKernel was registered to support Op 'RandomShuffleQueue' with these attrs\n[[Node: shuffle_batch/random_shuffle_queue = RandomShuffleQueue[capacity=10750, component_types=[DT_FLOAT, DT_FLOAT], container=\"\", min_after_dequeue=10000, seed=0, seed2=0, shapes=[[10000], [8]], shared_name=\"\"]()]]\n\nIt seems that the batch generation layer is called (my images are 100x100 and I have 8 outputs), but I don't know why.\n\nWhen testing the same model with the same input/output layers though the image_labelling.cc directly on Mac (building with Bazel), I don't have the error.\n\nI do not understand why the RandomShuffleQueue is needed when testing. Am I missing something to specify the part of the graph I want to use? Are all the layers of the graph verified even if not used?\n\nThanks.\n"}
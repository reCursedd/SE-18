{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/393308345", "html_url": "https://github.com/tensorflow/tensorflow/issues/3388#issuecomment-393308345", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3388", "id": 393308345, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzMwODM0NQ==", "user": {"login": "juiceboxjoe", "id": 11223751, "node_id": "MDQ6VXNlcjExMjIzNzUx", "avatar_url": "https://avatars2.githubusercontent.com/u/11223751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/juiceboxjoe", "html_url": "https://github.com/juiceboxjoe", "followers_url": "https://api.github.com/users/juiceboxjoe/followers", "following_url": "https://api.github.com/users/juiceboxjoe/following{/other_user}", "gists_url": "https://api.github.com/users/juiceboxjoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/juiceboxjoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/juiceboxjoe/subscriptions", "organizations_url": "https://api.github.com/users/juiceboxjoe/orgs", "repos_url": "https://api.github.com/users/juiceboxjoe/repos", "events_url": "https://api.github.com/users/juiceboxjoe/events{/privacy}", "received_events_url": "https://api.github.com/users/juiceboxjoe/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-30T20:30:51Z", "updated_at": "2018-05-30T20:37:42Z", "author_association": "NONE", "body_html": "<p>Hello everyone,</p>\n<p>Same issue still happening to me occasionally even though I cleared the TF session with <code>K.clear_session()</code> as <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4564403\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/hosford42\">@hosford42</a> suggested after the code was done. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=25004433\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Nimi42\">@Nimi42</a> also suggested that in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"216348673\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8652\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8652/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/8652\">#8652</a>. I also tried clearing the session before each forward pass to no avail.</p>\n<p>Adding <code>import tensorflow as tf</code> before importing Keras like <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1240121\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Ares513\">@Ares513</a> suggested in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"216348673\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8652\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8652/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/8652\">#8652</a> didn't work either.</p>\n<p>I'm making inferences on multiple images, which are kicked off from separate bash scripts that are executing sequentially so I'm wondering if clearing the session would actually help since every forward pass of my net is invoked from a different process.</p>\n<p>I'm using python 3.4, keras 2.1.6, and tensorflow 1.8.0 (no GPU support).</p>\n<p>This is the error:</p>\n<p><code>Exception ignored in: &lt;bound method Session.__del__ of &lt;tensorflow.python.client.session.Session object at 0x7f037640b198&gt;&gt; Traceback (most recent call last): File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 707, in __del__ TypeError: 'NoneType' object is not callable</code></p>\n<p>Don't know if it may be related but this is also a warning I get each time I run my inference script:</p>\n<p><code>/usr/lib/python3.4/importlib/_bootstrap.py:321: FutureWarning: Conversion of the second argument of issubdtype from</code>float<code>to</code>np.floating<code>is deprecated. In future, it will be treated as</code>np.float64 == np.dtype(float).type<code>. return f(*args, **kwds) </code></p>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"216348673\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8652\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8652/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/8652\">#8652</a>  is related and some also solved it by placing <code>K.clear_session()</code> <strong><em>after</em></strong> all the code was done. Note that contrary to what the author of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"216348673\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8652\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8652/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/8652\">#8652</a> states this issue is not closed and <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=26620355\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/naatje80\">@naatje80</a> mentions it's a Keras issue but <a href=\"https://github.com/fizyr/keras-retinanet/issues/192\" data-hovercard-type=\"issue\" data-hovercard-url=\"/fizyr/keras-retinanet/issues/192/hovercard\">this</a> is a related Keras issue that was closed stating it's a TF issue. <a href=\"https://github.com/tensorflow/cleverhans/issues/17\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/cleverhans/issues/17/hovercard\">This</a> issue is also related and was also closed stating it's a tensorflow issue.</p>\n<p>This is a nagging issue which is very important for me to sort out due to an upcoming checkpoint for the <a href=\"http://xviewdataset.org/\" rel=\"nofollow\">xView dataset challenge</a> (June 15). If anyone can shed some light on this I will greatly appreciate it.</p>\n<p>Thanks in advance.</p>", "body_text": "Hello everyone,\nSame issue still happening to me occasionally even though I cleared the TF session with K.clear_session() as @hosford42 suggested after the code was done. @Nimi42 also suggested that in #8652. I also tried clearing the session before each forward pass to no avail.\nAdding import tensorflow as tf before importing Keras like @Ares513 suggested in #8652 didn't work either.\nI'm making inferences on multiple images, which are kicked off from separate bash scripts that are executing sequentially so I'm wondering if clearing the session would actually help since every forward pass of my net is invoked from a different process.\nI'm using python 3.4, keras 2.1.6, and tensorflow 1.8.0 (no GPU support).\nThis is the error:\nException ignored in: <bound method Session.__del__ of <tensorflow.python.client.session.Session object at 0x7f037640b198>> Traceback (most recent call last): File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 707, in __del__ TypeError: 'NoneType' object is not callable\nDon't know if it may be related but this is also a warning I get each time I run my inference script:\n/usr/lib/python3.4/importlib/_bootstrap.py:321: FutureWarning: Conversion of the second argument of issubdtype fromfloattonp.floatingis deprecated. In future, it will be treated asnp.float64 == np.dtype(float).type. return f(*args, **kwds) \n#8652  is related and some also solved it by placing K.clear_session() after all the code was done. Note that contrary to what the author of #8652 states this issue is not closed and @naatje80 mentions it's a Keras issue but this is a related Keras issue that was closed stating it's a TF issue. This issue is also related and was also closed stating it's a tensorflow issue.\nThis is a nagging issue which is very important for me to sort out due to an upcoming checkpoint for the xView dataset challenge (June 15). If anyone can shed some light on this I will greatly appreciate it.\nThanks in advance.", "body": "Hello everyone,\r\n\r\nSame issue still happening to me occasionally even though I cleared the TF session with `K.clear_session()` as @hosford42 suggested after the code was done. @Nimi42 also suggested that in #8652. I also tried clearing the session before each forward pass to no avail.\r\n\r\nAdding `import tensorflow as tf` before importing Keras like @Ares513 suggested in #8652 didn't work either.\r\n\r\nI'm making inferences on multiple images, which are kicked off from separate bash scripts that are executing sequentially so I'm wondering if clearing the session would actually help since every forward pass of my net is invoked from a different process.\r\n\r\nI'm using python 3.4, keras 2.1.6, and tensorflow 1.8.0 (no GPU support). \r\n\r\nThis is the error:\r\n\r\n`\r\nException ignored in: <bound method Session.__del__ of <tensorflow.python.client.session.Session object at 0x7f037640b198>>\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/client/session.py\", line 707, in __del__\r\nTypeError: 'NoneType' object is not callable\r\n`\r\n\r\nDon't know if it may be related but this is also a warning I get each time I run my inference script:\r\n\r\n`\r\n/usr/lib/python3.4/importlib/_bootstrap.py:321: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  return f(*args, **kwds)\r\n`\r\n\r\n#8652  is related and some also solved it by placing `K.clear_session()` **_after_** all the code was done. Note that contrary to what the author of #8652 states this issue is not closed and @naatje80 mentions it's a Keras issue but [this](https://github.com/fizyr/keras-retinanet/issues/192) is a related Keras issue that was closed stating it's a TF issue. [This](https://github.com/tensorflow/cleverhans/issues/17) issue is also related and was also closed stating it's a tensorflow issue.\r\n\r\nThis is a nagging issue which is very important for me to sort out due to an upcoming checkpoint for the [xView dataset challenge](http://xviewdataset.org/) (June 15). If anyone can shed some light on this I will greatly appreciate it.\r\n\r\nThanks in advance."}
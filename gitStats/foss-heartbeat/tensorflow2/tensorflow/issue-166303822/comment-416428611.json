{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/416428611", "html_url": "https://github.com/tensorflow/tensorflow/issues/3388#issuecomment-416428611", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3388", "id": 416428611, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjQyODYxMQ==", "user": {"login": "rfgm6", "id": 22535074, "node_id": "MDQ6VXNlcjIyNTM1MDc0", "avatar_url": "https://avatars3.githubusercontent.com/u/22535074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rfgm6", "html_url": "https://github.com/rfgm6", "followers_url": "https://api.github.com/users/rfgm6/followers", "following_url": "https://api.github.com/users/rfgm6/following{/other_user}", "gists_url": "https://api.github.com/users/rfgm6/gists{/gist_id}", "starred_url": "https://api.github.com/users/rfgm6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rfgm6/subscriptions", "organizations_url": "https://api.github.com/users/rfgm6/orgs", "repos_url": "https://api.github.com/users/rfgm6/repos", "events_url": "https://api.github.com/users/rfgm6/events{/privacy}", "received_events_url": "https://api.github.com/users/rfgm6/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-28T02:18:03Z", "updated_at": "2018-08-28T02:18:03Z", "author_association": "NONE", "body_html": "<p>For those using tensorflow as keras backend, you may add the following function to your code. It is also useful in case you need to manage your memory.</p>\n<pre><code>import os\nimport importlib\nfrom keras import backend as K\n\ndef set_keras_backend(backend):\n    if K.backend() != backend:\n        os.environ['KERAS_BACKEND'] = backend\n        importlib.reload(K)\n        assert K.backend() == backend\n    if backend == \"tensorflow\":\n        K.get_session().close()\n        cfg = K.tf.ConfigProto()\n        cfg.gpu_options.allow_growth = True\n        K.set_session(K.tf.Session(config=cfg))\n        K.clear_session()\n\nset_keras_backend(\"tensorflow\")  \n</code></pre>", "body_text": "For those using tensorflow as keras backend, you may add the following function to your code. It is also useful in case you need to manage your memory.\nimport os\nimport importlib\nfrom keras import backend as K\n\ndef set_keras_backend(backend):\n    if K.backend() != backend:\n        os.environ['KERAS_BACKEND'] = backend\n        importlib.reload(K)\n        assert K.backend() == backend\n    if backend == \"tensorflow\":\n        K.get_session().close()\n        cfg = K.tf.ConfigProto()\n        cfg.gpu_options.allow_growth = True\n        K.set_session(K.tf.Session(config=cfg))\n        K.clear_session()\n\nset_keras_backend(\"tensorflow\")", "body": "For those using tensorflow as keras backend, you may add the following function to your code. It is also useful in case you need to manage your memory.\r\n```\r\nimport os\r\nimport importlib\r\nfrom keras import backend as K\r\n\r\ndef set_keras_backend(backend):\r\n    if K.backend() != backend:\r\n        os.environ['KERAS_BACKEND'] = backend\r\n        importlib.reload(K)\r\n        assert K.backend() == backend\r\n    if backend == \"tensorflow\":\r\n        K.get_session().close()\r\n        cfg = K.tf.ConfigProto()\r\n        cfg.gpu_options.allow_growth = True\r\n        K.set_session(K.tf.Session(config=cfg))\r\n        K.clear_session()\r\n\r\nset_keras_backend(\"tensorflow\")  \r\n```      "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/429491053", "html_url": "https://github.com/tensorflow/tensorflow/issues/22938#issuecomment-429491053", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22938", "id": 429491053, "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTQ5MTA1Mw==", "user": {"login": "soumy94", "id": 18647725, "node_id": "MDQ6VXNlcjE4NjQ3NzI1", "avatar_url": "https://avatars1.githubusercontent.com/u/18647725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumy94", "html_url": "https://github.com/soumy94", "followers_url": "https://api.github.com/users/soumy94/followers", "following_url": "https://api.github.com/users/soumy94/following{/other_user}", "gists_url": "https://api.github.com/users/soumy94/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumy94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumy94/subscriptions", "organizations_url": "https://api.github.com/users/soumy94/orgs", "repos_url": "https://api.github.com/users/soumy94/repos", "events_url": "https://api.github.com/users/soumy94/events{/privacy}", "received_events_url": "https://api.github.com/users/soumy94/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-12T23:45:12Z", "updated_at": "2018-10-12T23:45:12Z", "author_association": "NONE", "body_html": "<p>INFO:<br>\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No<br>\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10<br>\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No<br>\nTensorFlow installed from (source or binary): Anaconda<br>\nTensorFlow version (use command below): 1.11<br>\nPython version: 3.5<br>\nBazel version (if compiling from source):<br>\nGCC/Compiler version (if compiling from source):<br>\nCUDA/cuDNN version:<br>\nGPU model and memory:<br>\nExact command to reproduce:</p>\n<p>Hi,<br>\nI get the same error as the above. And I've been using the example given in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/g3doc/convert/python_api.md\">converter python api guide</a></p>\n<p>import numpy as np<br>\nimport tensorflow as tf<br>\nmodel = tf.keras.models.Sequential()<br>\nmodel.add(tf.keras.layers.Dense(2, input_shape=(3,)))<br>\nmodel.add(tf.keras.layers.RepeatVector(3))<br>\nmodel.add(tf.keras.layers.TimeDistributed(tf.keras.layers.Dense(3)))<br>\nmodel.compile(loss=tf.keras.losses.MSE,<br>\noptimizer=tf.keras.optimizers.RMSprop(lr=0.0001),<br>\nmetrics=[tf.keras.metrics.categorical_accuracy],<br>\nsample_weight_mode='temporal')<br>\nx = np.random.random((1, 3))<br>\ny = np.random.random((1, 3, 3))<br>\nmodel.train_on_batch(x, y)<br>\nmodel.predict(x)<br>\nkeras_file = \"keras_model.h5\"<br>\ntf.keras.models.save_model(model, keras_file)<br>\nconverter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(keras_file)<br>\ntflite_model = converter.convert()`</p>\n<p>I ran this code and this is the error I get:</p>\n<blockquote>\n<p>RuntimeError: TOCO failed see console for info.<br>\nb'Traceback (most recent call last):\\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Roaming\\Python\\Python35\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 18, in swig_import_helper\\r\\n    fp, pathname, description = imp.find_module('_tensorflow_wrap_toco', [dirname(<strong>file</strong>)])\\r\\n  File \"c:\\users\\sgavvala\\appdata\\local\\continuum\\anaconda3\\envs\\tensorflow\\lib\\imp.py\", line 297, in find_module\\r\\n    raise ImportError(_ERR_MSG.format(name), name=name)\\r\\nImportError: No module named '_tensorflow_wrap_toco'\\r\\n\\r\\nDuring handling of the above exception, another exception occurred:\\r\\n\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\users\\sgavvala\\appdata\\local\\continuum\\anaconda3\\envs\\tensorflow\\lib\\runpy.py\", line 193, in _run_module_as_main\\r\\n    \"<strong>main</strong>\", mod_spec)\\r\\n  File \"c:\\users\\sgavvala\\appdata\\local\\continuum\\anaconda3\\envs\\tensorflow\\lib\\runpy.py\", line 85, in _run_code\\r\\n    exec(code, run_globals)\\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Local\\Continuum\\anaconda3\\envs\\tensorflow\\Scripts\\toco_from_protos.exe\\<strong>main</strong>.py\", line 5, in \\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Roaming\\Python\\Python35\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\toco_from_protos.py\", line 22, in \\r\\n    from tensorflow.contrib.lite.toco.python import tensorflow_wrap_toco\\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Roaming\\Python\\Python35\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 28, in \\r\\n    _tensorflow_wrap_toco = swig_import_helper()\\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Roaming\\Python\\Python35\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 20, in swig_import_helper\\r\\n    import _tensorflow_wrap_toco\\r\\nImportError: No module named '_tensorflow_wrap_toco'\\r\\n'<br>\nNone</p>\n</blockquote>\n<p>My plan is to convert a keras model with my custom layers into tflite quantized version. Figured I would start with a given example but that doesn't seem to run.</p>", "body_text": "INFO:\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\nTensorFlow installed from (source or binary): Anaconda\nTensorFlow version (use command below): 1.11\nPython version: 3.5\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source):\nCUDA/cuDNN version:\nGPU model and memory:\nExact command to reproduce:\nHi,\nI get the same error as the above. And I've been using the example given in converter python api guide\nimport numpy as np\nimport tensorflow as tf\nmodel = tf.keras.models.Sequential()\nmodel.add(tf.keras.layers.Dense(2, input_shape=(3,)))\nmodel.add(tf.keras.layers.RepeatVector(3))\nmodel.add(tf.keras.layers.TimeDistributed(tf.keras.layers.Dense(3)))\nmodel.compile(loss=tf.keras.losses.MSE,\noptimizer=tf.keras.optimizers.RMSprop(lr=0.0001),\nmetrics=[tf.keras.metrics.categorical_accuracy],\nsample_weight_mode='temporal')\nx = np.random.random((1, 3))\ny = np.random.random((1, 3, 3))\nmodel.train_on_batch(x, y)\nmodel.predict(x)\nkeras_file = \"keras_model.h5\"\ntf.keras.models.save_model(model, keras_file)\nconverter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(keras_file)\ntflite_model = converter.convert()`\nI ran this code and this is the error I get:\n\nRuntimeError: TOCO failed see console for info.\nb'Traceback (most recent call last):\\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Roaming\\Python\\Python35\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 18, in swig_import_helper\\r\\n    fp, pathname, description = imp.find_module('_tensorflow_wrap_toco', [dirname(file)])\\r\\n  File \"c:\\users\\sgavvala\\appdata\\local\\continuum\\anaconda3\\envs\\tensorflow\\lib\\imp.py\", line 297, in find_module\\r\\n    raise ImportError(_ERR_MSG.format(name), name=name)\\r\\nImportError: No module named '_tensorflow_wrap_toco'\\r\\n\\r\\nDuring handling of the above exception, another exception occurred:\\r\\n\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\users\\sgavvala\\appdata\\local\\continuum\\anaconda3\\envs\\tensorflow\\lib\\runpy.py\", line 193, in _run_module_as_main\\r\\n    \"main\", mod_spec)\\r\\n  File \"c:\\users\\sgavvala\\appdata\\local\\continuum\\anaconda3\\envs\\tensorflow\\lib\\runpy.py\", line 85, in _run_code\\r\\n    exec(code, run_globals)\\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Local\\Continuum\\anaconda3\\envs\\tensorflow\\Scripts\\toco_from_protos.exe\\main.py\", line 5, in \\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Roaming\\Python\\Python35\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\toco_from_protos.py\", line 22, in \\r\\n    from tensorflow.contrib.lite.toco.python import tensorflow_wrap_toco\\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Roaming\\Python\\Python35\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 28, in \\r\\n    _tensorflow_wrap_toco = swig_import_helper()\\r\\n  File \"C:\\Users\\sgavvala\\AppData\\Roaming\\Python\\Python35\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 20, in swig_import_helper\\r\\n    import _tensorflow_wrap_toco\\r\\nImportError: No module named '_tensorflow_wrap_toco'\\r\\n'\nNone\n\nMy plan is to convert a keras model with my custom layers into tflite quantized version. Figured I would start with a given example but that doesn't seem to run.", "body": "INFO:\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\nTensorFlow installed from (source or binary): Anaconda \r\nTensorFlow version (use command below): 1.11\r\nPython version: 3.5\r\nBazel version (if compiling from source):\r\nGCC/Compiler version (if compiling from source):\r\nCUDA/cuDNN version:\r\nGPU model and memory:\r\nExact command to reproduce:\r\n\r\nHi, \r\nI get the same error as the above. And I've been using the example given in [converter python api guide](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/g3doc/convert/python_api.md)\r\n\r\nimport numpy as np\r\nimport tensorflow as tf\r\nmodel = tf.keras.models.Sequential()\r\nmodel.add(tf.keras.layers.Dense(2, input_shape=(3,)))\r\nmodel.add(tf.keras.layers.RepeatVector(3))\r\nmodel.add(tf.keras.layers.TimeDistributed(tf.keras.layers.Dense(3)))\r\nmodel.compile(loss=tf.keras.losses.MSE,\r\n              optimizer=tf.keras.optimizers.RMSprop(lr=0.0001),\r\n              metrics=[tf.keras.metrics.categorical_accuracy],\r\n              sample_weight_mode='temporal')\r\nx = np.random.random((1, 3))\r\ny = np.random.random((1, 3, 3))\r\nmodel.train_on_batch(x, y)\r\nmodel.predict(x)\r\nkeras_file = \"keras_model.h5\"\r\ntf.keras.models.save_model(model, keras_file)\r\nconverter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(keras_file)\r\ntflite_model = converter.convert()`\r\n\r\n\r\nI ran this code and this is the error I get:\r\n\r\n> RuntimeError: TOCO failed see console for info.\r\nb'Traceback (most recent call last):\\r\\n  File \"C:\\\\Users\\\\sgavvala\\\\AppData\\\\Roaming\\\\Python\\\\Python35\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\tensorflow_wrap_toco.py\", line 18, in swig_import_helper\\r\\n    fp, pathname, description = imp.find_module(\\'_tensorflow_wrap_toco\\', [dirname(__file__)])\\r\\n  File \"c:\\\\users\\\\sgavvala\\\\appdata\\\\local\\\\continuum\\\\anaconda3\\\\envs\\\\tensorflow\\\\lib\\\\imp.py\", line 297, in find_module\\r\\n    raise ImportError(_ERR_MSG.format(name), name=name)\\r\\nImportError: No module named \\'_tensorflow_wrap_toco\\'\\r\\n\\r\\nDuring handling of the above exception, another exception occurred:\\r\\n\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\\\users\\\\sgavvala\\\\appdata\\\\local\\\\continuum\\\\anaconda3\\\\envs\\\\tensorflow\\\\lib\\\\runpy.py\", line 193, in _run_module_as_main\\r\\n    \"__main__\", mod_spec)\\r\\n  File \"c:\\\\users\\\\sgavvala\\\\appdata\\\\local\\\\continuum\\\\anaconda3\\\\envs\\\\tensorflow\\\\lib\\\\runpy.py\", line 85, in _run_code\\r\\n    exec(code, run_globals)\\r\\n  File \"C:\\\\Users\\\\sgavvala\\\\AppData\\\\Local\\\\Continuum\\\\anaconda3\\\\envs\\\\tensorflow\\\\Scripts\\\\toco_from_protos.exe\\\\__main__.py\", line 5, in <module>\\r\\n  File \"C:\\\\Users\\\\sgavvala\\\\AppData\\\\Roaming\\\\Python\\\\Python35\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\toco_from_protos.py\", line 22, in <module>\\r\\n    from tensorflow.contrib.lite.toco.python import tensorflow_wrap_toco\\r\\n  File \"C:\\\\Users\\\\sgavvala\\\\AppData\\\\Roaming\\\\Python\\\\Python35\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\tensorflow_wrap_toco.py\", line 28, in <module>\\r\\n    _tensorflow_wrap_toco = swig_import_helper()\\r\\n  File \"C:\\\\Users\\\\sgavvala\\\\AppData\\\\Roaming\\\\Python\\\\Python35\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\tensorflow_wrap_toco.py\", line 20, in swig_import_helper\\r\\n    import _tensorflow_wrap_toco\\r\\nImportError: No module named \\'_tensorflow_wrap_toco\\'\\r\\n'\r\nNone\r\n\r\nMy plan is to convert a keras model with my custom layers into tflite quantized version. Figured I would start with a given example but that doesn't seem to run."}
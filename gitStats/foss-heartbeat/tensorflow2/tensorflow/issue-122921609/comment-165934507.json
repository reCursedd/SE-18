{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/165934507", "html_url": "https://github.com/tensorflow/tensorflow/pull/546#issuecomment-165934507", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/546", "id": 165934507, "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTkzNDUwNw==", "user": {"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}, "created_at": "2015-12-19T01:44:36Z", "updated_at": "2015-12-19T01:44:36Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=719020\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/panmari\">@panmari</a>!</p>\n<p>There are a few changes that will be necessary to get this to work.</p>\n<ol>\n<li>\n<p><a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/ops/image_ops.cc#L25\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/ops/image_ops.cc#L25</a>  All of the ops that you added are currently only defined for those set of types.  So this file needs to be updated to additionally include the ones you are adding kernel registrations for.  My suggestion would be to change the attribute of T to be \"realnumbertype\".</p>\n</li>\n<li>\n<p>After doing that, we should also write some tests to make sure these additional kernels are actually invoked properly.  Unfortunately, our current ops/image_ops_test.py does not really test many of the kernels.  Would you be willing to add the tests for these kernels?</p>\n</li>\n</ol>\n<p>The way to do this would be to change <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/image_ops_test.py#L576\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/image_ops_test.py#L576</a> to iterate various numpy dtypes for each of the kernels that we support.  We convert numpy dtypes to the appropriate tensorflow datatype, and this should be sufficient to test each of the kernels.</p>\n<p>If this doesn't make sense, or you'd rather us take a look at it, let us know, since this is a change we really should make.</p>", "body_text": "Thanks @panmari!\nThere are a few changes that will be necessary to get this to work.\n\n\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/ops/image_ops.cc#L25  All of the ops that you added are currently only defined for those set of types.  So this file needs to be updated to additionally include the ones you are adding kernel registrations for.  My suggestion would be to change the attribute of T to be \"realnumbertype\".\n\n\nAfter doing that, we should also write some tests to make sure these additional kernels are actually invoked properly.  Unfortunately, our current ops/image_ops_test.py does not really test many of the kernels.  Would you be willing to add the tests for these kernels?\n\n\nThe way to do this would be to change https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/image_ops_test.py#L576 to iterate various numpy dtypes for each of the kernels that we support.  We convert numpy dtypes to the appropriate tensorflow datatype, and this should be sufficient to test each of the kernels.\nIf this doesn't make sense, or you'd rather us take a look at it, let us know, since this is a change we really should make.", "body": "Thanks @panmari!\n\nThere are a few changes that will be necessary to get this to work.\n\n1) https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/ops/image_ops.cc#L25  All of the ops that you added are currently only defined for those set of types.  So this file needs to be updated to additionally include the ones you are adding kernel registrations for.  My suggestion would be to change the attribute of T to be \"realnumbertype\".\n\n2) After doing that, we should also write some tests to make sure these additional kernels are actually invoked properly.  Unfortunately, our current ops/image_ops_test.py does not really test many of the kernels.  Would you be willing to add the tests for these kernels?\n\nThe way to do this would be to change https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/image_ops_test.py#L576 to iterate various numpy dtypes for each of the kernels that we support.  We convert numpy dtypes to the appropriate tensorflow datatype, and this should be sufficient to test each of the kernels.\n\nIf this doesn't make sense, or you'd rather us take a look at it, let us know, since this is a change we really should make.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/412069267", "html_url": "https://github.com/tensorflow/tensorflow/issues/8425#issuecomment-412069267", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8425", "id": 412069267, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjA2OTI2Nw==", "user": {"login": "vrenkens", "id": 16047110, "node_id": "MDQ6VXNlcjE2MDQ3MTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/16047110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrenkens", "html_url": "https://github.com/vrenkens", "followers_url": "https://api.github.com/users/vrenkens/followers", "following_url": "https://api.github.com/users/vrenkens/following{/other_user}", "gists_url": "https://api.github.com/users/vrenkens/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrenkens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrenkens/subscriptions", "organizations_url": "https://api.github.com/users/vrenkens/orgs", "repos_url": "https://api.github.com/users/vrenkens/repos", "events_url": "https://api.github.com/users/vrenkens/events{/privacy}", "received_events_url": "https://api.github.com/users/vrenkens/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-10T12:35:43Z", "updated_at": "2018-08-10T12:35:43Z", "author_association": "NONE", "body_html": "<p>This is the hook I use:</p>\n<pre><code>class SaveAtEnd(tf.train.SessionRunHook):\n    '''a training hook for saving the final variables'''\n\n    def __init__(self, filename, variables):\n        '''hook constructor\n\n        Args:\n            filename: where the model will be saved\n            variables: the variables that will be saved'''\n\n        self.filename = filename\n        self.variables = variables\n\n    def begin(self):\n        '''this will be run at session creation'''\n\n        #pylint: disable=W0201\n        self._saver = tf.train.Saver(self.variables, sharded=True)\n\n    def end(self, session):\n        '''this will be run at session closing'''\n\n        self._saver.save(session, self.filename)\n</code></pre>", "body_text": "This is the hook I use:\nclass SaveAtEnd(tf.train.SessionRunHook):\n    '''a training hook for saving the final variables'''\n\n    def __init__(self, filename, variables):\n        '''hook constructor\n\n        Args:\n            filename: where the model will be saved\n            variables: the variables that will be saved'''\n\n        self.filename = filename\n        self.variables = variables\n\n    def begin(self):\n        '''this will be run at session creation'''\n\n        #pylint: disable=W0201\n        self._saver = tf.train.Saver(self.variables, sharded=True)\n\n    def end(self, session):\n        '''this will be run at session closing'''\n\n        self._saver.save(session, self.filename)", "body": "This is the hook I use:\r\n\r\n```\r\nclass SaveAtEnd(tf.train.SessionRunHook):\r\n    '''a training hook for saving the final variables'''\r\n\r\n    def __init__(self, filename, variables):\r\n        '''hook constructor\r\n\r\n        Args:\r\n            filename: where the model will be saved\r\n            variables: the variables that will be saved'''\r\n\r\n        self.filename = filename\r\n        self.variables = variables\r\n\r\n    def begin(self):\r\n        '''this will be run at session creation'''\r\n\r\n        #pylint: disable=W0201\r\n        self._saver = tf.train.Saver(self.variables, sharded=True)\r\n\r\n    def end(self, session):\r\n        '''this will be run at session closing'''\r\n\r\n        self._saver.save(session, self.filename)\r\n```"}
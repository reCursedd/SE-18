{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/70173589", "pull_request_review_id": null, "id": 70173589, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMTczNTg5", "diff_hunk": "@@ -215,5 +217,83 @@ def testBeyondEndWithCycle(self):\n       self.assertAllClose(decayed_lr.eval(), expected, 1e-6)\n \n \n+class ExponentialDecayTest(test_util.TensorFlowTestCase):\n+\n+  def testDecay(self):\n+    initial_lr = 0.1\n+    k = 10\n+    decay_rate = 0.96\n+    step = state_ops.variable_op([], dtypes.int32)\n+    assign = state_ops.assign(step, 0)\n+    add = state_ops.assign_add(step, 1)\n+    with self.test_session():\n+      assign.op.run()\n+      for i in range(k+1):\n+        decayed_lr = learning_rate_decay.natural_exp_decay(initial_lr, step,\n+                                                           k, decay_rate)\n+        self.assertAllClose(initial_lr * math.exp(-i / k * decay_rate),\n+                            decayed_lr.eval())\n+        add.op.run()\n+\n+  def testStaircase(self):\n+    initial_lr = 0.1\n+    k = 10\n+    decay_rate = 0.96\n+    step = state_ops.variable_op([], dtypes.int32)\n+    assign_step = state_ops.assign(step, 0)\n+    increment_step = state_ops.assign_add(step, 1)\n+    decayed_lr = learning_rate_decay.natural_exp_decay(initial_lr,\n+                                                       step,\n+                                                       k,\n+                                                       decay_rate,\n+                                                       staircase=True)\n+    with self.test_session():", "path": "tensorflow/python/training/learning_rate_decay_test.py", "position": 61, "original_position": 61, "commit_id": "5c1b0390fe539244c1cc71b301be1364309b6aa4", "original_commit_id": "8de656676ff49aebd3fa9e592a839127b33da93c", "user": {"login": "chemelnucfin", "id": 3982092, "node_id": "MDQ6VXNlcjM5ODIwOTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3982092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelnucfin", "html_url": "https://github.com/chemelnucfin", "followers_url": "https://api.github.com/users/chemelnucfin/followers", "following_url": "https://api.github.com/users/chemelnucfin/following{/other_user}", "gists_url": "https://api.github.com/users/chemelnucfin/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelnucfin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelnucfin/subscriptions", "organizations_url": "https://api.github.com/users/chemelnucfin/orgs", "repos_url": "https://api.github.com/users/chemelnucfin/repos", "events_url": "https://api.github.com/users/chemelnucfin/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelnucfin/received_events", "type": "User", "site_admin": false}, "body": "@vrv oops, i meant as a force push...\n\nIs this what you mean by moving the decay rate outside?\n\nThanks!\n\nOn Sat, Jul 9, 2016, 4:17 PM Vijay Vasudevan notifications@github.com\nwrote:\n\n> In tensorflow/python/training/learning_rate_decay_test.py\n> https://github.com/tensorflow/tensorflow/pull/2468#discussion_r70173417:\n> \n> > -                            decayed_lr.eval())\n> > -        add.op.run()\n> >   +\n> > -  def testStaircase(self):\n> > -    initial_lr = 0.1\n> > -    k = 10\n> > -    decay_rate = 0.96\n> > -    step = state_ops.variable_op([], dtypes.int32)\n> > -    assign_step = state_ops.assign(step, 0)\n> > -    increment_step = state_ops.assign_add(step, 1)\n> > -    decayed_lr = learning_rate_decay.natural_exp_decay(initial_lr,\n> > -                                                       step,\n> > -                                                       k,\n> > -                                                       decay_rate,\n> > -                                                       staircase=True)\n> > -    with self.test_session():\n> \n> Hm, I don't see a new pull request! :(\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/pull/2468/files/8de656676ff49aebd3fa9e592a839127b33da93c#r70173417,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/ADzDDPoLNnwggieV1kg_Cu4iRJlFWvsVks5qUCv9gaJpZM4IkGgi\n> .\n", "created_at": "2016-07-09T23:27:46Z", "updated_at": "2016-07-10T08:06:29Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/2468#discussion_r70173589", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/2468", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/70173589"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/2468#discussion_r70173589"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/2468"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=463737\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vrv\">@vrv</a> oops, i meant as a force push...</p>\n<p>Is this what you mean by moving the decay rate outside?</p>\n<p>Thanks!</p>\n<p>On Sat, Jul 9, 2016, 4:17 PM Vijay Vasudevan <a href=\"mailto:notifications@github.com\">notifications@github.com</a><br>\nwrote:</p>\n<blockquote>\n<p>In tensorflow/python/training/learning_rate_decay_test.py<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"156179002\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2468\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/2468/hovercard?comment_id=70173417&amp;comment_type=review_comment\" href=\"https://github.com/tensorflow/tensorflow/pull/2468#discussion_r70173417\">#2468 (comment)</a>:</p>\n<blockquote>\n<ul>\n<li>\n<pre><code>                       decayed_lr.eval())\n</code></pre>\n</li>\n<li>\n<pre><code>   add.op.run()\n</code></pre>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>def testStaircase(self):</li>\n<li>initial_lr = 0.1</li>\n<li>k = 10</li>\n<li>decay_rate = 0.96</li>\n<li>step = state_ops.variable_op([], dtypes.int32)</li>\n<li>assign_step = state_ops.assign(step, 0)</li>\n<li>increment_step = state_ops.assign_add(step, 1)</li>\n<li>decayed_lr = learning_rate_decay.natural_exp_decay(initial_lr,</li>\n<li>\n<pre><code>                                                  step,\n</code></pre>\n</li>\n<li>\n<pre><code>                                                  k,\n</code></pre>\n</li>\n<li>\n<pre><code>                                                  decay_rate,\n</code></pre>\n</li>\n<li>\n<pre><code>                                                  staircase=True)\n</code></pre>\n</li>\n<li>with self.test_session():</li>\n</ul>\n</blockquote>\n<p>Hm, I don't see a new pull request! :(</p>\n<p>\u2014<br>\nYou are receiving this because you authored the thread.<br>\nReply to this email directly, view it on GitHub<br>\n<a href=\"https://github.com/tensorflow/tensorflow/pull/2468/files/8de656676ff49aebd3fa9e592a839127b33da93c#r70173417\">https://github.com/tensorflow/tensorflow/pull/2468/files/8de656676ff49aebd3fa9e592a839127b33da93c#r70173417</a>,<br>\nor mute the thread<br>\n<a href=\"https://github.com/notifications/unsubscribe/ADzDDPoLNnwggieV1kg_Cu4iRJlFWvsVks5qUCv9gaJpZM4IkGgi\">https://github.com/notifications/unsubscribe/ADzDDPoLNnwggieV1kg_Cu4iRJlFWvsVks5qUCv9gaJpZM4IkGgi</a><br>\n.</p>\n</blockquote>", "body_text": "@vrv oops, i meant as a force push...\nIs this what you mean by moving the decay rate outside?\nThanks!\nOn Sat, Jul 9, 2016, 4:17 PM Vijay Vasudevan notifications@github.com\nwrote:\n\nIn tensorflow/python/training/learning_rate_decay_test.py\n#2468 (comment):\n\n\n\n                       decayed_lr.eval())\n\n\n\n   add.op.run()\n\n\n\n\n\ndef testStaircase(self):\ninitial_lr = 0.1\nk = 10\ndecay_rate = 0.96\nstep = state_ops.variable_op([], dtypes.int32)\nassign_step = state_ops.assign(step, 0)\nincrement_step = state_ops.assign_add(step, 1)\ndecayed_lr = learning_rate_decay.natural_exp_decay(initial_lr,\n\n                                                  step,\n\n\n\n                                                  k,\n\n\n\n                                                  decay_rate,\n\n\n\n                                                  staircase=True)\n\n\nwith self.test_session():\n\n\nHm, I don't see a new pull request! :(\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/tensorflow/tensorflow/pull/2468/files/8de656676ff49aebd3fa9e592a839127b33da93c#r70173417,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/ADzDDPoLNnwggieV1kg_Cu4iRJlFWvsVks5qUCv9gaJpZM4IkGgi\n."}
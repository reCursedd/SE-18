{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/67097946", "pull_request_review_id": null, "id": 67097946, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDk3OTQ2", "diff_hunk": "@@ -108,5 +110,82 @@ def testPiecewiseConstantEdgeCases(self):\n         pc = learning_rate_decay.piecewise_constant(x, boundaries, values)\n \n \n+class ExponentialDecayTest(test_util.TensorFlowTestCase):\n+\n+  def testDecay(self):\n+    initial_lr = 0.1\n+    k = 10\n+    decay_rate = 0.96\n+    step = state_ops.variable_op([], dtypes.int32)\n+    assign = state_ops.assign(step, 0)\n+    add = state_ops.assign_add(step, 1)\n+    with self.test_session():\n+      assign.op.run()\n+      for i in range(k+1):\n+        decayed_lr = learning_rate_decay.natural_exp_decay(initial_lr, step,", "path": "tensorflow/python/training/learning_rate_decay_test.py", "position": null, "original_position": 61, "commit_id": "5c1b0390fe539244c1cc71b301be1364309b6aa4", "original_commit_id": "a936a8bf92622a2fbe7f022ad6786ae32c8bae91", "user": {"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}, "body": "This calls natural_exp_delay once for every value of 'i', which means you are still adding 'k' versions of the ops in this loop.\n\nThe idea is to define the entire graph completely, before even with self.test_session(), so that the code within self.test_session() is just driving the existing graph, rather than modifying it.  Does that make sense?\n", "created_at": "2016-06-15T04:26:05Z", "updated_at": "2016-07-10T08:06:29Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/2468#discussion_r67097946", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/2468", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/67097946"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/2468#discussion_r67097946"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/2468"}}, "body_html": "<p>This calls natural_exp_delay once for every value of 'i', which means you are still adding 'k' versions of the ops in this loop.</p>\n<p>The idea is to define the entire graph completely, before even with self.test_session(), so that the code within self.test_session() is just driving the existing graph, rather than modifying it.  Does that make sense?</p>", "body_text": "This calls natural_exp_delay once for every value of 'i', which means you are still adding 'k' versions of the ops in this loop.\nThe idea is to define the entire graph completely, before even with self.test_session(), so that the code within self.test_session() is just driving the existing graph, rather than modifying it.  Does that make sense?"}
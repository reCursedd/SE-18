{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22278", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22278/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22278/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22278/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22278", "id": 360319811, "node_id": "MDU6SXNzdWUzNjAzMTk4MTE=", "number": 22278, "title": "TFLite Android ArrayIndex outofBound Exception length=40, index=-7", "user": {"login": "DeepakSridhar", "id": 22285492, "node_id": "MDQ6VXNlcjIyMjg1NDky", "avatar_url": "https://avatars0.githubusercontent.com/u/22285492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DeepakSridhar", "html_url": "https://github.com/DeepakSridhar", "followers_url": "https://api.github.com/users/DeepakSridhar/followers", "following_url": "https://api.github.com/users/DeepakSridhar/following{/other_user}", "gists_url": "https://api.github.com/users/DeepakSridhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/DeepakSridhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DeepakSridhar/subscriptions", "organizations_url": "https://api.github.com/users/DeepakSridhar/orgs", "repos_url": "https://api.github.com/users/DeepakSridhar/repos", "events_url": "https://api.github.com/users/DeepakSridhar/events{/privacy}", "received_events_url": "https://api.github.com/users/DeepakSridhar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "open", "locked": false, "assignee": {"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-09-14T14:07:31Z", "updated_at": "2018-11-12T18:52:07Z", "closed_at": null, "author_association": "NONE", "body_html": "<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Partially modified TFLite Android code</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Describe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.<br>\nI converted mobilenet_v2_ssd trained using my data to tflite following the instructions in the blog post:<br>\n<a href=\"https://medium.com/tensorflow/training-and-serving-a-realtime-mobile-object-detector-in-30-minutes-with-cloud-tpus-b78971cf1193\" rel=\"nofollow\">https://medium.com/tensorflow/training-and-serving-a-realtime-mobile-object-detector-in-30-minutes-with-cloud-tpus-b78971cf1193</a></p>\n<p>I did not quantize the model since I didn't train it using quantized training. To run on mobile I set the<br>\nIS_QUANTIZED variable in Detector.Activity to false. When I run the app, i get the error<br>\njava.lang.ArrayIndexOutOfBoundsException: length=40; index=-8<br>\nat java.util.Vector.elementAt(Vector.java:326)<br>\nat java.util.Vector.get(Vector.java:442)<br>\nat org.tensorflow.demo.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:214)</p>\n<p>I thought the issue is due to the length of the output vector. So I changed the NUM_DETECTIONS in TFLiteObjectDetectionAPIModel.java to 40, then  I get another error saying<br>\nCannot copy between a TensorFlowLite tensor with shape [1, 10] and a Java object with shape [1, 40].</p>\n<p>Is the length of output vector fixed? Please help me with the issue.Thanks!</p>", "body_text": "Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Partially modified TFLite Android code\n\nDescribe the problem\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\nI converted mobilenet_v2_ssd trained using my data to tflite following the instructions in the blog post:\nhttps://medium.com/tensorflow/training-and-serving-a-realtime-mobile-object-detector-in-30-minutes-with-cloud-tpus-b78971cf1193\nI did not quantize the model since I didn't train it using quantized training. To run on mobile I set the\nIS_QUANTIZED variable in Detector.Activity to false. When I run the app, i get the error\njava.lang.ArrayIndexOutOfBoundsException: length=40; index=-8\nat java.util.Vector.elementAt(Vector.java:326)\nat java.util.Vector.get(Vector.java:442)\nat org.tensorflow.demo.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:214)\nI thought the issue is due to the length of the output vector. So I changed the NUM_DETECTIONS in TFLiteObjectDetectionAPIModel.java to 40, then  I get another error saying\nCannot copy between a TensorFlowLite tensor with shape [1, 10] and a Java object with shape [1, 40].\nIs the length of output vector fixed? Please help me with the issue.Thanks!", "body": "- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Partially modified TFLite Android code\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\nI converted mobilenet_v2_ssd trained using my data to tflite following the instructions in the blog post:\r\nhttps://medium.com/tensorflow/training-and-serving-a-realtime-mobile-object-detector-in-30-minutes-with-cloud-tpus-b78971cf1193\r\n\r\nI did not quantize the model since I didn't train it using quantized training. To run on mobile I set the \r\nIS_QUANTIZED variable in Detector.Activity to false. When I run the app, i get the error \r\njava.lang.ArrayIndexOutOfBoundsException: length=40; index=-8\r\nat java.util.Vector.elementAt(Vector.java:326)\r\nat java.util.Vector.get(Vector.java:442)\r\nat org.tensorflow.demo.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:214)\r\n\r\nI thought the issue is due to the length of the output vector. So I changed the NUM_DETECTIONS in TFLiteObjectDetectionAPIModel.java to 40, then  I get another error saying\r\nCannot copy between a TensorFlowLite tensor with shape [1, 10] and a Java object with shape [1, 40].\r\n\r\nIs the length of output vector fixed? Please help me with the issue.Thanks!"}
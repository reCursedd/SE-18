{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/79791304", "pull_request_review_id": 912306, "id": 79791304, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc5NzkxMzA0", "diff_hunk": "@@ -313,30 +313,44 @@ class UnsortedSegmentBaseOp : public OpKernel {\n     auto output_flat = output->flat_outer_dims<T>();\n \n     auto data_ptr = data.template flat<T>().data();\n-    ReductionFunction(context, context->template eigen_device<Device>(), output_rows,\n+      this->operator()(context, context->template eigen_device<Device>(), output_rows,\n         segment_ids.shape(), segment_flat, data.NumElements(), data_ptr,\n         output_flat);\n   }\n-private:\n-  Functype ReductionFunction;\n };\n \n template <typename Device, class T, class Index>\n class UnsortedSegmentSumOp\n-  : public UnsortedSegmentBaseOp<Device, T, Index,\n-                                   functor::UnsortedSegmentSumFunctor<Device, T, Index>> {\n+  : public UnsortedSegmentBaseOp<Device, T, Index> {\n public:\n   explicit UnsortedSegmentSumOp(OpKernelConstruction* context)\n-    : UnsortedSegmentBaseOp<Device, T, Index, functor::UnsortedSegmentSumFunctor<Device, T, Index>>(context, functor::UnsortedSegmentSumFunctor<Device, T, Index>()) {}\n+    : UnsortedSegmentBaseOp<Device, T, Index>(context) {}", "path": "tensorflow/core/kernels/segment_reduction_ops.cc", "position": null, "original_position": 67, "commit_id": "be3f5a052dad6a40654b8643d258acaf5e16bbef", "original_commit_id": "9105803bbf126a976f27c55e4c95d5b08999c2f1", "user": {"login": "nikste", "id": 11996097, "node_id": "MDQ6VXNlcjExOTk2MDk3", "avatar_url": "https://avatars1.githubusercontent.com/u/11996097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikste", "html_url": "https://github.com/nikste", "followers_url": "https://api.github.com/users/nikste/followers", "following_url": "https://api.github.com/users/nikste/following{/other_user}", "gists_url": "https://api.github.com/users/nikste/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikste/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikste/subscriptions", "organizations_url": "https://api.github.com/users/nikste/orgs", "repos_url": "https://api.github.com/users/nikste/repos", "events_url": "https://api.github.com/users/nikste/events{/privacy}", "received_events_url": "https://api.github.com/users/nikste/received_events", "type": "User", "site_admin": false}, "body": "Like described before, when passing sum and max functors as arguments, it will use the basefunctor, instead of the specialized functors. For the same reason multiple inheritance is used.\nI got it to work with pointers now in the new commit.\n", "created_at": "2016-09-21T09:17:13Z", "updated_at": "2016-12-12T20:03:37Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4051#discussion_r79791304", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4051", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/79791304"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4051#discussion_r79791304"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4051"}}, "body_html": "<p>Like described before, when passing sum and max functors as arguments, it will use the basefunctor, instead of the specialized functors. For the same reason multiple inheritance is used.<br>\nI got it to work with pointers now in the new commit.</p>", "body_text": "Like described before, when passing sum and max functors as arguments, it will use the basefunctor, instead of the specialized functors. For the same reason multiple inheritance is used.\nI got it to work with pointers now in the new commit.", "in_reply_to_id": 79397859}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16689", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16689/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16689/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16689/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16689", "id": 293829720, "node_id": "MDU6SXNzdWUyOTM4Mjk3MjA=", "number": 16689, "title": "Feature request: Support SparseTensor in Dataset.from_generator ", "user": {"login": "rasmusbergpalm", "id": 206013, "node_id": "MDQ6VXNlcjIwNjAxMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/206013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rasmusbergpalm", "html_url": "https://github.com/rasmusbergpalm", "followers_url": "https://api.github.com/users/rasmusbergpalm/followers", "following_url": "https://api.github.com/users/rasmusbergpalm/following{/other_user}", "gists_url": "https://api.github.com/users/rasmusbergpalm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rasmusbergpalm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rasmusbergpalm/subscriptions", "organizations_url": "https://api.github.com/users/rasmusbergpalm/orgs", "repos_url": "https://api.github.com/users/rasmusbergpalm/repos", "events_url": "https://api.github.com/users/rasmusbergpalm/events{/privacy}", "received_events_url": "https://api.github.com/users/rasmusbergpalm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-02T09:48:22Z", "updated_at": "2018-02-02T18:41:15Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n</ul>\n<p>== cat /etc/issue ===============================================<br>\nDarwin c02ql2p2fvh7-c 16.7.0 Darwin Kernel Version 16.7.0: Mon Nov 13 21:56:25 PST 2017; root:xnu-3789.72.11~1/RELEASE_X86_64 x86_64<br>\nMac OS X 10.12.6</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nApple LLVM version 9.0.0 (clang-900.0.39.2)<br>\nTarget: x86_64-apple-darwin16.7.0<br>\nThread model: posix<br>\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin</p>\n<p>== uname -a =====================================================<br>\nDarwin c02ql2p2fvh7-c 16.7.0 Darwin Kernel Version 16.7.0: Mon Nov 13 21:56:25 PST 2017; root:xnu-3789.72.11~1/RELEASE_X86_64 x86_64</p>\n<p>== check pips ===================================================<br>\nnumpy (1.14.0)<br>\nprotobuf (3.5.1)<br>\ntensorflow (1.5.0)<br>\ntensorflow-tensorboard (1.5.0)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.5.0<br>\ntf.GIT_VERSION = v1.5.0-0-g37aa430d84<br>\ntf.COMPILER_VERSION = v1.5.0-0-g37aa430d84<br>\nSanity check: array([1], dtype=int32)<br>\n/Users/rbp/anaconda/envs/python3/lib/python3.5/importlib/_bootstrap.py:222: RuntimeWarning: compiletime version 3.6 of module 'tensorflow.python.framework.fast_tensor_util' does not match runtime version 3.5<br>\nreturn f(*args, **kwds)<br>\n/Users/rbp/anaconda/envs/python3/lib/python3.5/site-packages/h5py/<strong>init</strong>.py:36: FutureWarning: Conversion of the second argument of issubdtype from <code>float</code> to <code>np.floating</code> is deprecated. In future, it will be treated as <code>np.float64 == np.dtype(float).type</code>.<br>\nfrom ._conv import register_converters as _register_converters</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH is unset<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\n./tf_env_collect.sh: line 105: nvidia-smi: command not found</p>\n<ul>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<pre><code>        def generator():\n            indices = [(1, 1)]\n            values = (1.,)\n            shape = (3, 3)\n            while True:\n                yield tf.SparseTensor(indices, values, shape)\n\n        iterator = tf.data.Dataset.from_generator(generator, tf.float32, (3,3)).make_one_shot_iterator()\n\n        sample = iterator.get_next()\n        ss = tf.sparse_reduce_sum(sample)\n        with tf.Session() as sess:\n            _ss = sess.run(ss)\n</code></pre>\n<h3>Describe the problem</h3>\n<p>Above code throws <code>AttributeError: 'Tensor' object has no attribute 'indices'</code></p>\n<p>It seems the <code>from_generator</code> always expects Tensors as output.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\n\n== cat /etc/issue ===============================================\nDarwin c02ql2p2fvh7-c 16.7.0 Darwin Kernel Version 16.7.0: Mon Nov 13 21:56:25 PST 2017; root:xnu-3789.72.11~1/RELEASE_X86_64 x86_64\nMac OS X 10.12.6\n== are we in docker =============================================\nNo\n== compiler =====================================================\nApple LLVM version 9.0.0 (clang-900.0.39.2)\nTarget: x86_64-apple-darwin16.7.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n== uname -a =====================================================\nDarwin c02ql2p2fvh7-c 16.7.0 Darwin Kernel Version 16.7.0: Mon Nov 13 21:56:25 PST 2017; root:xnu-3789.72.11~1/RELEASE_X86_64 x86_64\n== check pips ===================================================\nnumpy (1.14.0)\nprotobuf (3.5.1)\ntensorflow (1.5.0)\ntensorflow-tensorboard (1.5.0)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.5.0\ntf.GIT_VERSION = v1.5.0-0-g37aa430d84\ntf.COMPILER_VERSION = v1.5.0-0-g37aa430d84\nSanity check: array([1], dtype=int32)\n/Users/rbp/anaconda/envs/python3/lib/python3.5/importlib/_bootstrap.py:222: RuntimeWarning: compiletime version 3.6 of module 'tensorflow.python.framework.fast_tensor_util' does not match runtime version 3.5\nreturn f(*args, **kwds)\n/Users/rbp/anaconda/envs/python3/lib/python3.5/site-packages/h5py/init.py:36: FutureWarning: Conversion of the second argument of issubdtype from float to np.floating is deprecated. In future, it will be treated as np.float64 == np.dtype(float).type.\nfrom ._conv import register_converters as _register_converters\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\n\nExact command to reproduce:\n\n        def generator():\n            indices = [(1, 1)]\n            values = (1.,)\n            shape = (3, 3)\n            while True:\n                yield tf.SparseTensor(indices, values, shape)\n\n        iterator = tf.data.Dataset.from_generator(generator, tf.float32, (3,3)).make_one_shot_iterator()\n\n        sample = iterator.get_next()\n        ss = tf.sparse_reduce_sum(sample)\n        with tf.Session() as sess:\n            _ss = sess.run(ss)\n\nDescribe the problem\nAbove code throws AttributeError: 'Tensor' object has no attribute 'indices'\nIt seems the from_generator always expects Tensors as output.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n\r\n== cat /etc/issue ===============================================\r\nDarwin c02ql2p2fvh7-c 16.7.0 Darwin Kernel Version 16.7.0: Mon Nov 13 21:56:25 PST 2017; root:xnu-3789.72.11~1/RELEASE_X86_64 x86_64\r\nMac OS X 10.12.6\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nApple LLVM version 9.0.0 (clang-900.0.39.2)\r\nTarget: x86_64-apple-darwin16.7.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n\r\n== uname -a =====================================================\r\nDarwin c02ql2p2fvh7-c 16.7.0 Darwin Kernel Version 16.7.0: Mon Nov 13 21:56:25 PST 2017; root:xnu-3789.72.11~1/RELEASE_X86_64 x86_64\r\n\r\n== check pips ===================================================\r\nnumpy (1.14.0)\r\nprotobuf (3.5.1)\r\ntensorflow (1.5.0)\r\ntensorflow-tensorboard (1.5.0)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.5.0\r\ntf.GIT_VERSION = v1.5.0-0-g37aa430d84\r\ntf.COMPILER_VERSION = v1.5.0-0-g37aa430d84\r\nSanity check: array([1], dtype=int32)\r\n/Users/rbp/anaconda/envs/python3/lib/python3.5/importlib/_bootstrap.py:222: RuntimeWarning: compiletime version 3.6 of module 'tensorflow.python.framework.fast_tensor_util' does not match runtime version 3.5\r\n  return f(*args, **kwds)\r\n/Users/rbp/anaconda/envs/python3/lib/python3.5/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\r\n\r\n- **Exact command to reproduce**:\r\n\r\n```\r\n        def generator():\r\n            indices = [(1, 1)]\r\n            values = (1.,)\r\n            shape = (3, 3)\r\n            while True:\r\n                yield tf.SparseTensor(indices, values, shape)\r\n\r\n        iterator = tf.data.Dataset.from_generator(generator, tf.float32, (3,3)).make_one_shot_iterator()\r\n\r\n        sample = iterator.get_next()\r\n        ss = tf.sparse_reduce_sum(sample)\r\n        with tf.Session() as sess:\r\n            _ss = sess.run(ss)\r\n```\r\n\r\n### Describe the problem\r\n\r\nAbove code throws `AttributeError: 'Tensor' object has no attribute 'indices'`\r\n\r\nIt seems the `from_generator` always expects Tensors as output."}
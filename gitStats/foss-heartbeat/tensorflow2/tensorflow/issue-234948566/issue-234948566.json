{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10605", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10605/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10605/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10605/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10605", "id": 234948566, "node_id": "MDU6SXNzdWUyMzQ5NDg1NjY=", "number": 10605, "title": "tensorflow/tools/git script breaks when git repo has packed references", "user": {"login": "RichDubielzig", "id": 24554323, "node_id": "MDQ6VXNlcjI0NTU0MzIz", "avatar_url": "https://avatars2.githubusercontent.com/u/24554323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RichDubielzig", "html_url": "https://github.com/RichDubielzig", "followers_url": "https://api.github.com/users/RichDubielzig/followers", "following_url": "https://api.github.com/users/RichDubielzig/following{/other_user}", "gists_url": "https://api.github.com/users/RichDubielzig/gists{/gist_id}", "starred_url": "https://api.github.com/users/RichDubielzig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RichDubielzig/subscriptions", "organizations_url": "https://api.github.com/users/RichDubielzig/orgs", "repos_url": "https://api.github.com/users/RichDubielzig/repos", "events_url": "https://api.github.com/users/RichDubielzig/events{/privacy}", "received_events_url": "https://api.github.com/users/RichDubielzig/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "case540", "id": 1299636, "node_id": "MDQ6VXNlcjEyOTk2MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1299636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/case540", "html_url": "https://github.com/case540", "followers_url": "https://api.github.com/users/case540/followers", "following_url": "https://api.github.com/users/case540/following{/other_user}", "gists_url": "https://api.github.com/users/case540/gists{/gist_id}", "starred_url": "https://api.github.com/users/case540/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/case540/subscriptions", "organizations_url": "https://api.github.com/users/case540/orgs", "repos_url": "https://api.github.com/users/case540/repos", "events_url": "https://api.github.com/users/case540/events{/privacy}", "received_events_url": "https://api.github.com/users/case540/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "case540", "id": 1299636, "node_id": "MDQ6VXNlcjEyOTk2MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1299636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/case540", "html_url": "https://github.com/case540", "followers_url": "https://api.github.com/users/case540/followers", "following_url": "https://api.github.com/users/case540/following{/other_user}", "gists_url": "https://api.github.com/users/case540/gists{/gist_id}", "starred_url": "https://api.github.com/users/case540/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/case540/subscriptions", "organizations_url": "https://api.github.com/users/case540/orgs", "repos_url": "https://api.github.com/users/case540/repos", "events_url": "https://api.github.com/users/case540/events{/privacy}", "received_events_url": "https://api.github.com/users/case540/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2017-06-09T21:59:27Z", "updated_at": "2018-05-10T17:51:02Z", "closed_at": "2018-05-10T17:51:02Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nNot applicable to bug</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nSource build</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\ntip of tree</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.5.1</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nn/a</li>\n<li><strong>GPU model and memory</strong>:<br>\nn/a</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<pre><code>git pack-refs\ngit gc\nbazel clean\nconfigure\nbazel build -c opt --copt=-g --copt=-mavx --copt=-msse4.2 //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<ul>\n<li><strong>Results</strong>:</li>\n</ul>\n<pre><code>ERROR: /local/chip/git/tensorflow-knureon/tensorflow/core/BUILD:1404:1: no such target '//tensorflow/tools/git:gen/branch_ref': target 'gen/branch_ref' not declared in package 'tensorflow/tools/git' defined by /local/chip/git/tensorflow-knureon/tensorflow/tools/git/BUILD and referenced by '//tensorflow/core:version_info_gen'.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\n</code></pre>\n<p>The problem is due to the fact that the link in tensorflow/tools/git/gen/branch_ref is supposed to point to a valid file in my .git directory: .git/refs/heads/tf-tip.  However, I have been doing some reorganizing of our tree structure, and in the process of removing deprecated branches my calls to git caused this file to be deleted.  So the .git/refs/heads directory is empty and the hash is found in .git/packed-refs:</p>\n<p>rdubielzig@swpl-000224:/local/chip/git/tensorflow-knureon/.git$ grep tf-tip packed-refs<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/504965336d1432ee96b4f0e9b78f65ee201e9be5/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/504965336d1432ee96b4f0e9b78f65ee201e9be5\"><tt>5049653</tt></a> refs/heads/tf-tip</p>\n<p>WORKAROUND:<br>\nRecreate the missing ref file by writing  'tf-tip' in .git/refs/heads with the contents consisting of the hash above.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nNot applicable to bug\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.04\nTensorFlow installed from (source or binary):\nSource build\nTensorFlow version (use command below):\ntip of tree\nBazel version (if compiling from source):\n0.5.1\nCUDA/cuDNN version:\nn/a\nGPU model and memory:\nn/a\nExact command to reproduce:\n\ngit pack-refs\ngit gc\nbazel clean\nconfigure\nbazel build -c opt --copt=-g --copt=-mavx --copt=-msse4.2 //tensorflow/tools/pip_package:build_pip_package\n\n\nResults:\n\nERROR: /local/chip/git/tensorflow-knureon/tensorflow/core/BUILD:1404:1: no such target '//tensorflow/tools/git:gen/branch_ref': target 'gen/branch_ref' not declared in package 'tensorflow/tools/git' defined by /local/chip/git/tensorflow-knureon/tensorflow/tools/git/BUILD and referenced by '//tensorflow/core:version_info_gen'.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\n\nThe problem is due to the fact that the link in tensorflow/tools/git/gen/branch_ref is supposed to point to a valid file in my .git directory: .git/refs/heads/tf-tip.  However, I have been doing some reorganizing of our tree structure, and in the process of removing deprecated branches my calls to git caused this file to be deleted.  So the .git/refs/heads directory is empty and the hash is found in .git/packed-refs:\nrdubielzig@swpl-000224:/local/chip/git/tensorflow-knureon/.git$ grep tf-tip packed-refs\n5049653 refs/heads/tf-tip\nWORKAROUND:\nRecreate the missing ref file by writing  'tf-tip' in .git/refs/heads with the contents consisting of the hash above.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nNot applicable to bug\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nUbuntu 16.04\r\n- **TensorFlow installed from (source or binary)**:\r\nSource build\r\n- **TensorFlow version (use command below)**:\r\ntip of tree\r\n- **Bazel version (if compiling from source)**:\r\n0.5.1\r\n- **CUDA/cuDNN version**:\r\nn/a\r\n- **GPU model and memory**:\r\nn/a\r\n- **Exact command to reproduce**:\r\n```\r\ngit pack-refs\r\ngit gc\r\nbazel clean\r\nconfigure\r\nbazel build -c opt --copt=-g --copt=-mavx --copt=-msse4.2 //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n- **Results**:\r\n```\r\nERROR: /local/chip/git/tensorflow-knureon/tensorflow/core/BUILD:1404:1: no such target '//tensorflow/tools/git:gen/branch_ref': target 'gen/branch_ref' not declared in package 'tensorflow/tools/git' defined by /local/chip/git/tensorflow-knureon/tensorflow/tools/git/BUILD and referenced by '//tensorflow/core:version_info_gen'.\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\r\n```\r\n\r\n\r\nThe problem is due to the fact that the link in tensorflow/tools/git/gen/branch_ref is supposed to point to a valid file in my .git directory: .git/refs/heads/tf-tip.  However, I have been doing some reorganizing of our tree structure, and in the process of removing deprecated branches my calls to git caused this file to be deleted.  So the .git/refs/heads directory is empty and the hash is found in .git/packed-refs:\r\n\r\nrdubielzig@swpl-000224:/local/chip/git/tensorflow-knureon/.git$ grep tf-tip packed-refs \r\n504965336d1432ee96b4f0e9b78f65ee201e9be5 refs/heads/tf-tip\r\n\r\n\r\nWORKAROUND:\r\nRecreate the missing ref file by writing  'tf-tip' in .git/refs/heads with the contents consisting of the hash above."}
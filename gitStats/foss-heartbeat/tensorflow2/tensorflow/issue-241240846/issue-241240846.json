{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11348", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11348/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11348/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11348/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11348", "id": 241240846, "node_id": "MDU6SXNzdWUyNDEyNDA4NDY=", "number": 11348, "title": "The order in which tensorflow libraries are loaded leads to segmentation fault", "user": {"login": "narain-code", "id": 19395724, "node_id": "MDQ6VXNlcjE5Mzk1NzI0", "avatar_url": "https://avatars3.githubusercontent.com/u/19395724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/narain-code", "html_url": "https://github.com/narain-code", "followers_url": "https://api.github.com/users/narain-code/followers", "following_url": "https://api.github.com/users/narain-code/following{/other_user}", "gists_url": "https://api.github.com/users/narain-code/gists{/gist_id}", "starred_url": "https://api.github.com/users/narain-code/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/narain-code/subscriptions", "organizations_url": "https://api.github.com/users/narain-code/orgs", "repos_url": "https://api.github.com/users/narain-code/repos", "events_url": "https://api.github.com/users/narain-code/events{/privacy}", "received_events_url": "https://api.github.com/users/narain-code/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-07T11:49:46Z", "updated_at": "2018-10-26T21:24:17Z", "closed_at": "2018-10-26T21:24:17Z", "author_association": "NONE", "body_html": "<p>I have a simple java code below.Running this code produces a core dump.<br>\ni am running this on debian/8 jessie system. I use tensorflow 1.2.1.<br>\nThe same code works fine in mac osx but has problems when we run the same  in Linux.<br>\nWhen the code is changed to load tensorflow libraries before rocksdb library it works fine on all platforms.</p>\n<p>package com.test.tensorflow;</p>\n<p>import org.rocksdb.RocksDB;<br>\nimport org.rocksdb.RocksDBException;<br>\nimport org.tensorflow.SavedModelBundle;<br>\nimport org.tensorflow.Session;<br>\nimport org.tensorflow.Tensor;</p>\n<p>public class TestTensorFlow {</p>\n<pre><code>public static void main(String[] args){\n\t\n\t System.out.println(\"before loading..\" + System.getProperty(\"java.io.tmpdir\"));\n\t\n\t\n\t RocksDB.loadLibrary();\n\t try {\n\t\tRocksDB db =RocksDB.open(\"/tmp/rocksdelete\");\n\t\tdb.close();\n\t} catch (RocksDBException e) {\n\t\t// TODO Auto-generated catch block\n\t\te.printStackTrace();\n\t}\n\t \n\t SavedModelBundle smb = SavedModelBundle.load(\"test-model\", \"serve\");\n\t Session tfSession = smb.session();\n\t System.out.println(\"loaded\");\n\n}\n</code></pre>\n<p>}</p>", "body_text": "I have a simple java code below.Running this code produces a core dump.\ni am running this on debian/8 jessie system. I use tensorflow 1.2.1.\nThe same code works fine in mac osx but has problems when we run the same  in Linux.\nWhen the code is changed to load tensorflow libraries before rocksdb library it works fine on all platforms.\npackage com.test.tensorflow;\nimport org.rocksdb.RocksDB;\nimport org.rocksdb.RocksDBException;\nimport org.tensorflow.SavedModelBundle;\nimport org.tensorflow.Session;\nimport org.tensorflow.Tensor;\npublic class TestTensorFlow {\npublic static void main(String[] args){\n\t\n\t System.out.println(\"before loading..\" + System.getProperty(\"java.io.tmpdir\"));\n\t\n\t\n\t RocksDB.loadLibrary();\n\t try {\n\t\tRocksDB db =RocksDB.open(\"/tmp/rocksdelete\");\n\t\tdb.close();\n\t} catch (RocksDBException e) {\n\t\t// TODO Auto-generated catch block\n\t\te.printStackTrace();\n\t}\n\t \n\t SavedModelBundle smb = SavedModelBundle.load(\"test-model\", \"serve\");\n\t Session tfSession = smb.session();\n\t System.out.println(\"loaded\");\n\n}\n\n}", "body": "I have a simple java code below.Running this code produces a core dump.\r\ni am running this on debian/8 jessie system. I use tensorflow 1.2.1.\r\nThe same code works fine in mac osx but has problems when we run the same  in Linux.\r\nWhen the code is changed to load tensorflow libraries before rocksdb library it works fine on all platforms.\r\n\r\npackage com.test.tensorflow;\r\n\r\nimport org.rocksdb.RocksDB;\r\nimport org.rocksdb.RocksDBException;\r\nimport org.tensorflow.SavedModelBundle;\r\nimport org.tensorflow.Session;\r\nimport org.tensorflow.Tensor;\r\n\r\npublic class TestTensorFlow {\r\n\r\n\tpublic static void main(String[] args){\r\n\t\t\r\n\t\t System.out.println(\"before loading..\" + System.getProperty(\"java.io.tmpdir\"));\r\n\t\t\r\n\t\t\r\n\t\t RocksDB.loadLibrary();\r\n\t\t try {\r\n\t\t\tRocksDB db =RocksDB.open(\"/tmp/rocksdelete\");\r\n\t\t\tdb.close();\r\n\t\t} catch (RocksDBException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t \r\n\t\t SavedModelBundle smb = SavedModelBundle.load(\"test-model\", \"serve\");\r\n\t\t Session tfSession = smb.session();\r\n\t\t System.out.println(\"loaded\");\r\n\r\n\t}\r\n}\r\n"}
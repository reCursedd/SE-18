{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/349662709", "html_url": "https://github.com/tensorflow/tensorflow/issues/12508#issuecomment-349662709", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12508", "id": 349662709, "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTY2MjcwOQ==", "user": {"login": "Anmol-Sharma", "id": 17797801, "node_id": "MDQ6VXNlcjE3Nzk3ODAx", "avatar_url": "https://avatars0.githubusercontent.com/u/17797801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Anmol-Sharma", "html_url": "https://github.com/Anmol-Sharma", "followers_url": "https://api.github.com/users/Anmol-Sharma/followers", "following_url": "https://api.github.com/users/Anmol-Sharma/following{/other_user}", "gists_url": "https://api.github.com/users/Anmol-Sharma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Anmol-Sharma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Anmol-Sharma/subscriptions", "organizations_url": "https://api.github.com/users/Anmol-Sharma/orgs", "repos_url": "https://api.github.com/users/Anmol-Sharma/repos", "events_url": "https://api.github.com/users/Anmol-Sharma/events{/privacy}", "received_events_url": "https://api.github.com/users/Anmol-Sharma/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-06T14:52:50Z", "updated_at": "2017-12-06T14:57:27Z", "author_association": "CONTRIBUTOR", "body_html": "<p>hey everyone, i'm trying to export a CNN model which accepts 200x200 rgb images as inputs, however while exporting the model i'm getting the following error</p>\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-35-bdf37a7e35ac&gt; in &lt;module&gt;()\n----&gt; 1 model.export_savedmodel(export_dir_base=\"/home/ubuntu/CNNexport/\",serving_input_receiver_fn=serving_input_fn)\n\n~/anaconda3/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py in export_savedmodel(self, export_dir_base, serving_input_receiver_fn, assets_extra, as_text, checkpoint_path)\n    515           serving_input_receiver.receiver_tensors,\n    516           estimator_spec.export_outputs,\n--&gt; 517           serving_input_receiver.receiver_tensors_alternatives)\n    518 \n    519       if not checkpoint_path:\n\n~/anaconda3/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/estimator/export/export.py in build_all_signature_defs(receiver_tensors, export_outputs, receiver_tensors_alternatives)\n    191     receiver_tensors = {_SINGLE_RECEIVER_DEFAULT_NAME: receiver_tensors}\n    192   if export_outputs is None or not isinstance(export_outputs, dict):\n--&gt; 193     raise ValueError('export_outputs must be a dict.')\n    194 \n    195   signature_def_map = {}\n\nValueError: export_outputs must be a dict.\n</code></pre>\n<p>Here is my feature spec and serving input fn definition :</p>\n<pre><code>feature_spec = {'images': tf.FixedLenFeature([200,200,3],tf.float32)}\ndef serving_input_fn():\n    serialized_tf_example = tf.placeholder(dtype=tf.string,\n                                         shape=[None],\n                                         name='input_tensors')\n    receiver_tensors = {'inputs': serialized_tf_example}\n    features = tf.parse_example(serialized_tf_example, feature_spec)\n    print(features)\n    print(tf.estimator.export.ServingInputReceiver(features, receiver_tensors))\n    return tf.estimator.export.ServingInputReceiver(features, receiver_tensors)\n</code></pre>\n<p>and call to export_savedmodel : <code>model.export_savedmodel(export_dir_base=\"/home/ubuntu/CNNexport/\",serving_input_receiver_fn=serving_input_fn)</code></p>\n<p>I'm not sure whats causing export_outputs to be not a dict object. Can anyone help me figure out what i'm doing wrong?</p>", "body_text": "hey everyone, i'm trying to export a CNN model which accepts 200x200 rgb images as inputs, however while exporting the model i'm getting the following error\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-35-bdf37a7e35ac> in <module>()\n----> 1 model.export_savedmodel(export_dir_base=\"/home/ubuntu/CNNexport/\",serving_input_receiver_fn=serving_input_fn)\n\n~/anaconda3/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py in export_savedmodel(self, export_dir_base, serving_input_receiver_fn, assets_extra, as_text, checkpoint_path)\n    515           serving_input_receiver.receiver_tensors,\n    516           estimator_spec.export_outputs,\n--> 517           serving_input_receiver.receiver_tensors_alternatives)\n    518 \n    519       if not checkpoint_path:\n\n~/anaconda3/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/estimator/export/export.py in build_all_signature_defs(receiver_tensors, export_outputs, receiver_tensors_alternatives)\n    191     receiver_tensors = {_SINGLE_RECEIVER_DEFAULT_NAME: receiver_tensors}\n    192   if export_outputs is None or not isinstance(export_outputs, dict):\n--> 193     raise ValueError('export_outputs must be a dict.')\n    194 \n    195   signature_def_map = {}\n\nValueError: export_outputs must be a dict.\n\nHere is my feature spec and serving input fn definition :\nfeature_spec = {'images': tf.FixedLenFeature([200,200,3],tf.float32)}\ndef serving_input_fn():\n    serialized_tf_example = tf.placeholder(dtype=tf.string,\n                                         shape=[None],\n                                         name='input_tensors')\n    receiver_tensors = {'inputs': serialized_tf_example}\n    features = tf.parse_example(serialized_tf_example, feature_spec)\n    print(features)\n    print(tf.estimator.export.ServingInputReceiver(features, receiver_tensors))\n    return tf.estimator.export.ServingInputReceiver(features, receiver_tensors)\n\nand call to export_savedmodel : model.export_savedmodel(export_dir_base=\"/home/ubuntu/CNNexport/\",serving_input_receiver_fn=serving_input_fn)\nI'm not sure whats causing export_outputs to be not a dict object. Can anyone help me figure out what i'm doing wrong?", "body": "hey everyone, i'm trying to export a CNN model which accepts 200x200 rgb images as inputs, however while exporting the model i'm getting the following error\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-35-bdf37a7e35ac> in <module>()\r\n----> 1 model.export_savedmodel(export_dir_base=\"/home/ubuntu/CNNexport/\",serving_input_receiver_fn=serving_input_fn)\r\n\r\n~/anaconda3/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py in export_savedmodel(self, export_dir_base, serving_input_receiver_fn, assets_extra, as_text, checkpoint_path)\r\n    515           serving_input_receiver.receiver_tensors,\r\n    516           estimator_spec.export_outputs,\r\n--> 517           serving_input_receiver.receiver_tensors_alternatives)\r\n    518 \r\n    519       if not checkpoint_path:\r\n\r\n~/anaconda3/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/estimator/export/export.py in build_all_signature_defs(receiver_tensors, export_outputs, receiver_tensors_alternatives)\r\n    191     receiver_tensors = {_SINGLE_RECEIVER_DEFAULT_NAME: receiver_tensors}\r\n    192   if export_outputs is None or not isinstance(export_outputs, dict):\r\n--> 193     raise ValueError('export_outputs must be a dict.')\r\n    194 \r\n    195   signature_def_map = {}\r\n\r\nValueError: export_outputs must be a dict.\r\n```\r\n\r\nHere is my feature spec and serving input fn definition : \r\n```\r\nfeature_spec = {'images': tf.FixedLenFeature([200,200,3],tf.float32)}\r\ndef serving_input_fn():\r\n    serialized_tf_example = tf.placeholder(dtype=tf.string,\r\n                                         shape=[None],\r\n                                         name='input_tensors')\r\n    receiver_tensors = {'inputs': serialized_tf_example}\r\n    features = tf.parse_example(serialized_tf_example, feature_spec)\r\n    print(features)\r\n    print(tf.estimator.export.ServingInputReceiver(features, receiver_tensors))\r\n    return tf.estimator.export.ServingInputReceiver(features, receiver_tensors)\r\n```\r\n\r\nand call to export_savedmodel : `model.export_savedmodel(export_dir_base=\"/home/ubuntu/CNNexport/\",serving_input_receiver_fn=serving_input_fn)`\r\n\r\nI'm not sure whats causing export_outputs to be not a dict object. Can anyone help me figure out what i'm doing wrong?"}
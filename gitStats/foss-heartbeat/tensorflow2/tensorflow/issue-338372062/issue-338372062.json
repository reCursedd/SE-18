{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20550", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20550/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20550/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20550/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20550", "id": 338372062, "node_id": "MDU6SXNzdWUzMzgzNzIwNjI=", "number": 20550, "title": "Training speed much slower", "user": {"login": "frunkad", "id": 33373582, "node_id": "MDQ6VXNlcjMzMzczNTgy", "avatar_url": "https://avatars2.githubusercontent.com/u/33373582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frunkad", "html_url": "https://github.com/frunkad", "followers_url": "https://api.github.com/users/frunkad/followers", "following_url": "https://api.github.com/users/frunkad/following{/other_user}", "gists_url": "https://api.github.com/users/frunkad/gists{/gist_id}", "starred_url": "https://api.github.com/users/frunkad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frunkad/subscriptions", "organizations_url": "https://api.github.com/users/frunkad/orgs", "repos_url": "https://api.github.com/users/frunkad/repos", "events_url": "https://api.github.com/users/frunkad/events{/privacy}", "received_events_url": "https://api.github.com/users/frunkad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-07-04T20:42:37Z", "updated_at": "2018-08-16T16:38:33Z", "closed_at": "2018-08-16T16:38:33Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nThe code used is adapted from <a href=\"https://github.com/keras-team/keras/blob/master/examples/imdb_fasttext.py\">Keras FastText</a>  || <a href=\"https://github.com/frunkad/sent-aog/blob/master/imdb_fasttext.py\">Exact Code</a></li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:Linux Ubuntu 18.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Anaconda</li>\n<li><strong>Bacel Version</strong>: Not applicable</li>\n<li><strong>TensorFlow version</strong>: v1.8.0-0-g93bc2e2072 1.8.0</li>\n<li><strong>Python version</strong>: Python 3.6.4 :: Anaconda custom (64-bit)</li>\n<li><strong>CUDA/cuDNN version</strong>: 9.0, V9.0.176</li>\n<li><strong>GPU model and memory</strong>: GeForce GTX 980M totalMemory: 7.93GiB</li>\n<li><strong>Exact command to reproduce</strong>: device specific</li>\n</ul>\n<p>From Environment Capture Script:</p>\n<pre><code>== cat /etc/issue ===============================================\nLinux dracarys 4.15.0-23-generic #25-Ubuntu SMP Wed May 23 18:02:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"18.04 LTS (Bionic Beaver)\"\nVERSION_ID=\"18.04\"\nVERSION_CODENAME=bionic\n\n== are we in docker =============================================\nNo\n\n== compiler =====================================================\nc++ (Ubuntu 7.3.0-16ubuntu3) 7.3.0\nCopyright (C) 2017 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n\n== uname -a =====================================================\nLinux dracarys 4.15.0-23-generic #25-Ubuntu SMP Wed May 23 18:02:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n== check pips ===================================================\nnumpy                              1.14.4     \nnumpydoc                           0.7.0      \nprotobuf                           3.5.2.post1\ntensorflow-gpu                     1.8.0      \n\n== check for virtualenv =========================================\nFalse\n\n== tensorflow import ============================================\ntf.VERSION = 1.8.0\ntf.GIT_VERSION = v1.8.0-0-g93bc2e2072\ntf.COMPILER_VERSION = v1.8.0-0-g93bc2e2072\nSanity check: array([1], dtype=int32)\n/home/frunkad/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n  from ._conv import register_converters as _register_converters\n\n== env ==========================================================\nLD_LIBRARY_PATH /usr/local/cuda/lib64:\nDYLD_LIBRARY_PATH is unset\n\n== nvidia-smi ===================================================\nThu Jul  5 02:05:17 2018       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 390.48                 Driver Version: 390.48                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 980M    Off  | 00000000:01:00.0  On |                  N/A |\n| N/A   48C    P0    31W /  N/A |    588MiB /  8118MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0      1530      G   /usr/lib/xorg/Xorg                            16MiB |\n|    0      1579      G   /usr/bin/gnome-shell                          48MiB |\n|    0      1762      G   /usr/lib/xorg/Xorg                           212MiB |\n|    0      1907      G   /usr/bin/gnome-shell                          88MiB |\n|    0      2394      G   ...-token=8EBF6E3FCA82B57AEE9186BDD7AFEAF3   108MiB |\n|    0      2902      G   ...-token=FA087B07103596ED40954ABE2071373B   105MiB |\n+-----------------------------------------------------------------------------+\n\n== cuda libs  ===================================================\n/usr/local/cuda-9.0/lib64/libcudart_static.a\n/usr/local/cuda-9.0/lib64/libcudart.so.9.0.176\n/usr/local/cuda-9.0/doc/man/man7/libcudart.7\n/usr/local/cuda-9.0/doc/man/man7/libcudart.so.7\n\n</code></pre>\n<h3>Describe the problem</h3>\n<p>From the keras code the GTX 980M should have taken 2s for each epoch, but it takes around 58s. Also the same code runs within 10s on colab. The possible reason as per me is that I am using it with Ubuntu 18. Should I give it a try on Windows on same machine?</p>\n<h3>Source code / logs</h3>\n<pre><code>/home/frunkad/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n  from ._conv import register_converters as _register_converters\nLoading data...\n25000 train sequences\n25000 test sequences\nAverage train sequence length: 238\nAverage test sequence length: 230\nAdding 2-gram features\nAverage train sequence length: 476\nAverage test sequence length: 428\nPad sequences (samples x time)\nx_train shape: (25000, 400)\nx_test shape: (25000, 400)\nBuild model...\nTrain on 25000 samples, validate on 25000 samples\nEpoch 1/5\n2018-07-05 01:26:20.525149: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\n2018-07-05 01:26:20.601376: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2018-07-05 01:26:20.601794: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties:\nname: GeForce GTX 980M major: 5 minor: 2 memoryClockRate(GHz): 1.1265\npciBusID: 0000:01:00.0\ntotalMemory: 7.93GiB freeMemory: 7.32GiB\n2018-07-05 01:26:20.601813: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1435] Adding visible gpu devices: 0\n2018-07-05 01:26:20.751183: I tensorflow/core/common_runtime/gpu/gpu_device.cc:923] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-07-05 01:26:20.751214: I tensorflow/core/common_runtime/gpu/gpu_device.cc:929]      0\n2018-07-05 01:26:20.751220: I tensorflow/core/common_runtime/gpu/gpu_device.cc:942] 0:   N\n2018-07-05 01:26:20.751487: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1053] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7064 MB memory)-&gt; physical GPU (device: 0, name: GeForce GTX 980M, pci bus id: 0000:01:00.0, compute capability: 5.2)\n25000/25000 [==============================] - 58s 2ms/step - loss: 0.6651 - acc: 0.6945 - val_loss: 0.6278 - val_acc: 0.7829\nEpoch 2/5\n25000/25000 [==============================] - 57s 2ms/step - loss: 0.5572 - acc: 0.8524 - val_loss: 0.5116 - val_acc: 0.8378\nEpoch 3/5\n25000/25000 [==============================] - 57s 2ms/step - loss: 0.4034 - acc: 0.9102 - val_loss: 0.4015 - val_acc: 0.8692\nEpoch 4/5\n25000/25000 [==============================] - 58s 2ms/step - loss: 0.2781 - acc: 0.9420 - val_loss: 0.3359 - val_acc: 0.8827\nEpoch 5/5\n25000/25000 [==============================] - 58s 2ms/step - loss: 0.1966 - acc: 0.9619 - val_loss: 0.2986 - val_acc: 0.8923\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nThe code used is adapted from Keras FastText  || Exact Code\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):Linux Ubuntu 18.04\nTensorFlow installed from (source or binary): Anaconda\nBacel Version: Not applicable\nTensorFlow version: v1.8.0-0-g93bc2e2072 1.8.0\nPython version: Python 3.6.4 :: Anaconda custom (64-bit)\nCUDA/cuDNN version: 9.0, V9.0.176\nGPU model and memory: GeForce GTX 980M totalMemory: 7.93GiB\nExact command to reproduce: device specific\n\nFrom Environment Capture Script:\n== cat /etc/issue ===============================================\nLinux dracarys 4.15.0-23-generic #25-Ubuntu SMP Wed May 23 18:02:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"18.04 LTS (Bionic Beaver)\"\nVERSION_ID=\"18.04\"\nVERSION_CODENAME=bionic\n\n== are we in docker =============================================\nNo\n\n== compiler =====================================================\nc++ (Ubuntu 7.3.0-16ubuntu3) 7.3.0\nCopyright (C) 2017 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n\n== uname -a =====================================================\nLinux dracarys 4.15.0-23-generic #25-Ubuntu SMP Wed May 23 18:02:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n== check pips ===================================================\nnumpy                              1.14.4     \nnumpydoc                           0.7.0      \nprotobuf                           3.5.2.post1\ntensorflow-gpu                     1.8.0      \n\n== check for virtualenv =========================================\nFalse\n\n== tensorflow import ============================================\ntf.VERSION = 1.8.0\ntf.GIT_VERSION = v1.8.0-0-g93bc2e2072\ntf.COMPILER_VERSION = v1.8.0-0-g93bc2e2072\nSanity check: array([1], dtype=int32)\n/home/frunkad/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n  from ._conv import register_converters as _register_converters\n\n== env ==========================================================\nLD_LIBRARY_PATH /usr/local/cuda/lib64:\nDYLD_LIBRARY_PATH is unset\n\n== nvidia-smi ===================================================\nThu Jul  5 02:05:17 2018       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 390.48                 Driver Version: 390.48                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 980M    Off  | 00000000:01:00.0  On |                  N/A |\n| N/A   48C    P0    31W /  N/A |    588MiB /  8118MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0      1530      G   /usr/lib/xorg/Xorg                            16MiB |\n|    0      1579      G   /usr/bin/gnome-shell                          48MiB |\n|    0      1762      G   /usr/lib/xorg/Xorg                           212MiB |\n|    0      1907      G   /usr/bin/gnome-shell                          88MiB |\n|    0      2394      G   ...-token=8EBF6E3FCA82B57AEE9186BDD7AFEAF3   108MiB |\n|    0      2902      G   ...-token=FA087B07103596ED40954ABE2071373B   105MiB |\n+-----------------------------------------------------------------------------+\n\n== cuda libs  ===================================================\n/usr/local/cuda-9.0/lib64/libcudart_static.a\n/usr/local/cuda-9.0/lib64/libcudart.so.9.0.176\n/usr/local/cuda-9.0/doc/man/man7/libcudart.7\n/usr/local/cuda-9.0/doc/man/man7/libcudart.so.7\n\n\nDescribe the problem\nFrom the keras code the GTX 980M should have taken 2s for each epoch, but it takes around 58s. Also the same code runs within 10s on colab. The possible reason as per me is that I am using it with Ubuntu 18. Should I give it a try on Windows on same machine?\nSource code / logs\n/home/frunkad/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n  from ._conv import register_converters as _register_converters\nLoading data...\n25000 train sequences\n25000 test sequences\nAverage train sequence length: 238\nAverage test sequence length: 230\nAdding 2-gram features\nAverage train sequence length: 476\nAverage test sequence length: 428\nPad sequences (samples x time)\nx_train shape: (25000, 400)\nx_test shape: (25000, 400)\nBuild model...\nTrain on 25000 samples, validate on 25000 samples\nEpoch 1/5\n2018-07-05 01:26:20.525149: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\n2018-07-05 01:26:20.601376: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2018-07-05 01:26:20.601794: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties:\nname: GeForce GTX 980M major: 5 minor: 2 memoryClockRate(GHz): 1.1265\npciBusID: 0000:01:00.0\ntotalMemory: 7.93GiB freeMemory: 7.32GiB\n2018-07-05 01:26:20.601813: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1435] Adding visible gpu devices: 0\n2018-07-05 01:26:20.751183: I tensorflow/core/common_runtime/gpu/gpu_device.cc:923] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-07-05 01:26:20.751214: I tensorflow/core/common_runtime/gpu/gpu_device.cc:929]      0\n2018-07-05 01:26:20.751220: I tensorflow/core/common_runtime/gpu/gpu_device.cc:942] 0:   N\n2018-07-05 01:26:20.751487: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1053] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7064 MB memory)-> physical GPU (device: 0, name: GeForce GTX 980M, pci bus id: 0000:01:00.0, compute capability: 5.2)\n25000/25000 [==============================] - 58s 2ms/step - loss: 0.6651 - acc: 0.6945 - val_loss: 0.6278 - val_acc: 0.7829\nEpoch 2/5\n25000/25000 [==============================] - 57s 2ms/step - loss: 0.5572 - acc: 0.8524 - val_loss: 0.5116 - val_acc: 0.8378\nEpoch 3/5\n25000/25000 [==============================] - 57s 2ms/step - loss: 0.4034 - acc: 0.9102 - val_loss: 0.4015 - val_acc: 0.8692\nEpoch 4/5\n25000/25000 [==============================] - 58s 2ms/step - loss: 0.2781 - acc: 0.9420 - val_loss: 0.3359 - val_acc: 0.8827\nEpoch 5/5\n25000/25000 [==============================] - 58s 2ms/step - loss: 0.1966 - acc: 0.9619 - val_loss: 0.2986 - val_acc: 0.8923", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nThe code used is adapted from [Keras FastText](https://github.com/keras-team/keras/blob/master/examples/imdb_fasttext.py)  || [Exact Code](https://github.com/frunkad/sent-aog/blob/master/imdb_fasttext.py)\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:Linux Ubuntu 18.04 \r\n- **TensorFlow installed from (source or binary)**: Anaconda\r\n- **Bacel Version**: Not applicable\r\n- **TensorFlow version**: v1.8.0-0-g93bc2e2072 1.8.0\r\n- **Python version**: Python 3.6.4 :: Anaconda custom (64-bit)\r\n- **CUDA/cuDNN version**: 9.0, V9.0.176 \r\n- **GPU model and memory**: GeForce GTX 980M totalMemory: 7.93GiB\r\n- **Exact command to reproduce**: device specific\r\n\r\nFrom Environment Capture Script:\r\n```\r\n== cat /etc/issue ===============================================\r\nLinux dracarys 4.15.0-23-generic #25-Ubuntu SMP Wed May 23 18:02:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"18.04 LTS (Bionic Beaver)\"\r\nVERSION_ID=\"18.04\"\r\nVERSION_CODENAME=bionic\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 7.3.0-16ubuntu3) 7.3.0\r\nCopyright (C) 2017 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux dracarys 4.15.0-23-generic #25-Ubuntu SMP Wed May 23 18:02:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy                              1.14.4     \r\nnumpydoc                           0.7.0      \r\nprotobuf                           3.5.2.post1\r\ntensorflow-gpu                     1.8.0      \r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.8.0\r\ntf.GIT_VERSION = v1.8.0-0-g93bc2e2072\r\ntf.COMPILER_VERSION = v1.8.0-0-g93bc2e2072\r\nSanity check: array([1], dtype=int32)\r\n/home/frunkad/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH /usr/local/cuda/lib64:\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\nThu Jul  5 02:05:17 2018       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 390.48                 Driver Version: 390.48                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX 980M    Off  | 00000000:01:00.0  On |                  N/A |\r\n| N/A   48C    P0    31W /  N/A |    588MiB /  8118MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0      1530      G   /usr/lib/xorg/Xorg                            16MiB |\r\n|    0      1579      G   /usr/bin/gnome-shell                          48MiB |\r\n|    0      1762      G   /usr/lib/xorg/Xorg                           212MiB |\r\n|    0      1907      G   /usr/bin/gnome-shell                          88MiB |\r\n|    0      2394      G   ...-token=8EBF6E3FCA82B57AEE9186BDD7AFEAF3   108MiB |\r\n|    0      2902      G   ...-token=FA087B07103596ED40954ABE2071373B   105MiB |\r\n+-----------------------------------------------------------------------------+\r\n\r\n== cuda libs  ===================================================\r\n/usr/local/cuda-9.0/lib64/libcudart_static.a\r\n/usr/local/cuda-9.0/lib64/libcudart.so.9.0.176\r\n/usr/local/cuda-9.0/doc/man/man7/libcudart.7\r\n/usr/local/cuda-9.0/doc/man/man7/libcudart.so.7\r\n\r\n```\r\n### Describe the problem\r\nFrom the keras code the GTX 980M should have taken 2s for each epoch, but it takes around 58s. Also the same code runs within 10s on colab. The possible reason as per me is that I am using it with Ubuntu 18. Should I give it a try on Windows on same machine?\r\n\r\n### Source code / logs\r\n\r\n```\r\n/home/frunkad/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\nLoading data...\r\n25000 train sequences\r\n25000 test sequences\r\nAverage train sequence length: 238\r\nAverage test sequence length: 230\r\nAdding 2-gram features\r\nAverage train sequence length: 476\r\nAverage test sequence length: 428\r\nPad sequences (samples x time)\r\nx_train shape: (25000, 400)\r\nx_test shape: (25000, 400)\r\nBuild model...\r\nTrain on 25000 samples, validate on 25000 samples\r\nEpoch 1/5\r\n2018-07-05 01:26:20.525149: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2018-07-05 01:26:20.601376: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2018-07-05 01:26:20.601794: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties:\r\nname: GeForce GTX 980M major: 5 minor: 2 memoryClockRate(GHz): 1.1265\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 7.93GiB freeMemory: 7.32GiB\r\n2018-07-05 01:26:20.601813: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1435] Adding visible gpu devices: 0\r\n2018-07-05 01:26:20.751183: I tensorflow/core/common_runtime/gpu/gpu_device.cc:923] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-07-05 01:26:20.751214: I tensorflow/core/common_runtime/gpu/gpu_device.cc:929]      0\r\n2018-07-05 01:26:20.751220: I tensorflow/core/common_runtime/gpu/gpu_device.cc:942] 0:   N\r\n2018-07-05 01:26:20.751487: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1053] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7064 MB memory)-> physical GPU (device: 0, name: GeForce GTX 980M, pci bus id: 0000:01:00.0, compute capability: 5.2)\r\n25000/25000 [==============================] - 58s 2ms/step - loss: 0.6651 - acc: 0.6945 - val_loss: 0.6278 - val_acc: 0.7829\r\nEpoch 2/5\r\n25000/25000 [==============================] - 57s 2ms/step - loss: 0.5572 - acc: 0.8524 - val_loss: 0.5116 - val_acc: 0.8378\r\nEpoch 3/5\r\n25000/25000 [==============================] - 57s 2ms/step - loss: 0.4034 - acc: 0.9102 - val_loss: 0.4015 - val_acc: 0.8692\r\nEpoch 4/5\r\n25000/25000 [==============================] - 58s 2ms/step - loss: 0.2781 - acc: 0.9420 - val_loss: 0.3359 - val_acc: 0.8827\r\nEpoch 5/5\r\n25000/25000 [==============================] - 58s 2ms/step - loss: 0.1966 - acc: 0.9619 - val_loss: 0.2986 - val_acc: 0.8923\r\n``` "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/141525397", "pull_request_review_id": 65750886, "id": 141525397, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTUyNTM5Nw==", "diff_hunk": "@@ -148,122 +151,166 @@ public void composite() {\n     try (Graph g = new Graph();\n         Session sess = new Session(g)) {\n       Scope s = new Scope(g);\n-      Output data = Const.create(s.withName(\"data\"), new int[] {600, 470, 170, 430, 300}).output();\n+      Output<Integer> data =\n+          Const.create(s.withName(\"data\"), new int[] {600, 470, 170, 430, 300}).output();\n \n       // Create a composite op with a customized name\n-      Variance var1 = Variance.create(s.withName(\"example\"), data);\n+      Variance<Integer> var1 = Variance.create(s.withName(\"example\"), data, Integer.class);\n       assertEquals(\"example/variance\", var1.output().op().name());\n \n       // Confirm internally added ops have the right names.\n       assertNotNull(g.operation(\"example/squared_deviation\"));\n       assertNotNull(g.operation(\"example/Mean\"));\n-      assertNotNull(g.operation(\"example/zero\"));\n+      // assertNotNull(g.operation(\"example/zero\"));\n \n       // Same composite op with a default name\n-      Variance var2 = Variance.create(s, data);\n+      Variance<Integer> var2 = Variance.create(s, data, Integer.class);\n       assertEquals(\"variance/variance\", var2.output().op().name());\n \n       // Confirm internally added ops have the right names.\n       assertNotNull(g.operation(\"variance/squared_deviation\"));\n       assertNotNull(g.operation(\"variance/Mean\"));\n-      assertNotNull(g.operation(\"variance/zero\"));\n+      // assertNotNull(g.operation(\"variance/zero\"));\n \n       // Verify correct results as well.\n-      Tensor result = sess.runner().fetch(var1.output()).run().get(0);\n+      Tensor<Integer> result =\n+          sess.runner().fetch(var1.output()).run().get(0).expect(Integer.class);\n       assertEquals(21704, result.intValue());\n-      result = sess.runner().fetch(var2.output()).run().get(0);\n+      result = sess.runner().fetch(var2.output()).run().get(0).expect(Integer.class);\n       assertEquals(21704, result.intValue());\n     }\n   }\n \n   // \"handwritten\" sample operator classes\n-  private static final class Const {\n-    private final Output output;\n+  private static final class Const<T> {\n+    private final Output<T> output;\n \n-    static Const create(Scope s, Object v) {\n-      try (Tensor value = Tensor.create(v)) {\n-        return new Const(\n+    @SuppressWarnings(\"unchecked\")", "path": "tensorflow/java/src/test/java/org/tensorflow/op/ScopeTest.java", "position": null, "original_position": 85, "commit_id": "bf2c8b494abf6c330c87b3ba18e6644fc8c0b22d", "original_commit_id": "b111ea194f15fc0756dddec9edb2ef09b0cf3763", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "body": "Avoid the `@SuppressWarnings` by making this (and the next function) be:\r\n\r\n```java\r\nstatic Const<Integer> create(Scope s, int v) {\r\n  return create(s, Tensor.create(v, Integer.class));\r\n}\r\n```\r\n\r\n?\r\n\r\n(Basically, I want to avoid `@SuppressWarnings` from any test/example code, since those often act as inspiration to programmers)", "created_at": "2017-09-28T04:44:18Z", "updated_at": "2017-09-28T14:09:48Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/11535#discussion_r141525397", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/11535", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/141525397"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/11535#discussion_r141525397"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/11535"}}, "body_html": "<p>Avoid the <code>@SuppressWarnings</code> by making this (and the next function) be:</p>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-k\">static</span> <span class=\"pl-k\">Const&lt;<span class=\"pl-smi\">Integer</span>&gt;</span> create(<span class=\"pl-smi\">Scope</span> s, <span class=\"pl-k\">int</span> v) {\n  <span class=\"pl-k\">return</span> create(s, <span class=\"pl-smi\">Tensor</span><span class=\"pl-k\">.</span>create(v, <span class=\"pl-smi\">Integer</span><span class=\"pl-k\">.</span>class));\n}</pre></div>\n<p>?</p>\n<p>(Basically, I want to avoid <code>@SuppressWarnings</code> from any test/example code, since those often act as inspiration to programmers)</p>", "body_text": "Avoid the @SuppressWarnings by making this (and the next function) be:\nstatic Const<Integer> create(Scope s, int v) {\n  return create(s, Tensor.create(v, Integer.class));\n}\n?\n(Basically, I want to avoid @SuppressWarnings from any test/example code, since those often act as inspiration to programmers)"}
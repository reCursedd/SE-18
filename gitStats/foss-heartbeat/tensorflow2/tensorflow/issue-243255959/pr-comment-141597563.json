{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/141597563", "pull_request_review_id": 65834995, "id": 141597563, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTU5NzU2Mw==", "diff_hunk": "@@ -148,122 +151,166 @@ public void composite() {\n     try (Graph g = new Graph();\n         Session sess = new Session(g)) {\n       Scope s = new Scope(g);\n-      Output data = Const.create(s.withName(\"data\"), new int[] {600, 470, 170, 430, 300}).output();\n+      Output<Integer> data =\n+          Const.create(s.withName(\"data\"), new int[] {600, 470, 170, 430, 300}).output();\n \n       // Create a composite op with a customized name\n-      Variance var1 = Variance.create(s.withName(\"example\"), data);\n+      Variance<Integer> var1 = Variance.create(s.withName(\"example\"), data, Integer.class);\n       assertEquals(\"example/variance\", var1.output().op().name());\n \n       // Confirm internally added ops have the right names.\n       assertNotNull(g.operation(\"example/squared_deviation\"));\n       assertNotNull(g.operation(\"example/Mean\"));\n-      assertNotNull(g.operation(\"example/zero\"));\n+      // assertNotNull(g.operation(\"example/zero\"));\n \n       // Same composite op with a default name\n-      Variance var2 = Variance.create(s, data);\n+      Variance<Integer> var2 = Variance.create(s, data, Integer.class);\n       assertEquals(\"variance/variance\", var2.output().op().name());\n \n       // Confirm internally added ops have the right names.\n       assertNotNull(g.operation(\"variance/squared_deviation\"));\n       assertNotNull(g.operation(\"variance/Mean\"));\n-      assertNotNull(g.operation(\"variance/zero\"));\n+      // assertNotNull(g.operation(\"variance/zero\"));\n \n       // Verify correct results as well.\n-      Tensor result = sess.runner().fetch(var1.output()).run().get(0);\n+      Tensor<Integer> result =\n+          sess.runner().fetch(var1.output()).run().get(0).expect(Integer.class);\n       assertEquals(21704, result.intValue());\n-      result = sess.runner().fetch(var2.output()).run().get(0);\n+      result = sess.runner().fetch(var2.output()).run().get(0).expect(Integer.class);\n       assertEquals(21704, result.intValue());\n     }\n   }\n \n   // \"handwritten\" sample operator classes\n-  private static final class Const {\n-    private final Output output;\n+  private static final class Const<T> {\n+    private final Output<T> output;\n \n-    static Const create(Scope s, Object v) {\n-      try (Tensor value = Tensor.create(v)) {\n-        return new Const(\n+    @SuppressWarnings(\"unchecked\")", "path": "tensorflow/java/src/test/java/org/tensorflow/op/ScopeTest.java", "position": null, "original_position": 85, "commit_id": "bf2c8b494abf6c330c87b3ba18e6644fc8c0b22d", "original_commit_id": "b111ea194f15fc0756dddec9edb2ef09b0cf3763", "user": {"login": "andrewcmyers", "id": 4623813, "node_id": "MDQ6VXNlcjQ2MjM4MTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/4623813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewcmyers", "html_url": "https://github.com/andrewcmyers", "followers_url": "https://api.github.com/users/andrewcmyers/followers", "following_url": "https://api.github.com/users/andrewcmyers/following{/other_user}", "gists_url": "https://api.github.com/users/andrewcmyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewcmyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewcmyers/subscriptions", "organizations_url": "https://api.github.com/users/andrewcmyers/orgs", "repos_url": "https://api.github.com/users/andrewcmyers/repos", "events_url": "https://api.github.com/users/andrewcmyers/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewcmyers/received_events", "type": "User", "site_admin": false}, "body": "Oops, I missed that one. Thanks", "created_at": "2017-09-28T12:00:58Z", "updated_at": "2017-09-28T14:09:48Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/11535#discussion_r141597563", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/11535", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/141597563"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/11535#discussion_r141597563"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/11535"}}, "body_html": "<p>Oops, I missed that one. Thanks</p>", "body_text": "Oops, I missed that one. Thanks", "in_reply_to_id": 141525397}
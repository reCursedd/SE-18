{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4963", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4963/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4963/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4963/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4963", "id": 182987680, "node_id": "MDU6SXNzdWUxODI5ODc2ODA=", "number": 4963, "title": "protoc failed: error executing command", "user": {"login": "AndreasMadsen", "id": 505333, "node_id": "MDQ6VXNlcjUwNTMzMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/505333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreasMadsen", "html_url": "https://github.com/AndreasMadsen", "followers_url": "https://api.github.com/users/AndreasMadsen/followers", "following_url": "https://api.github.com/users/AndreasMadsen/following{/other_user}", "gists_url": "https://api.github.com/users/AndreasMadsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreasMadsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreasMadsen/subscriptions", "organizations_url": "https://api.github.com/users/AndreasMadsen/orgs", "repos_url": "https://api.github.com/users/AndreasMadsen/repos", "events_url": "https://api.github.com/users/AndreasMadsen/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreasMadsen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-10-14T08:05:00Z", "updated_at": "2016-10-16T22:13:46Z", "closed_at": "2016-10-15T02:20:41Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>None</p>\n<h3>Environment info</h3>\n<p>Operating System:</p>\n<pre><code>uname -a\nLinux n-62-18-47 2.6.32-573.22.1.el6.x86_64 #1 SMP Tue Mar 22 17:15:28 CDT 2016 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n<p>Installed version of CUDA and cuDNN: CUDA: 8.0, cuDNN 5.0<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<pre><code>ls -l /appl/cuda/8.0/lib64/libcud*\n-rw-r--r-- 1 sebo root 560184 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 sebo root     16 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so -&gt; libcudart.so.8.0\nlrwxrwxrwx 1 sebo root     19 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.27\n-rwxr-xr-x 1 sebo root 394472 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 sebo root 737516 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart_static.a\n</code></pre>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>): <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/8d1198374477e9c7e01893103233da984f302924/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/8d1198374477e9c7e01893103233da984f302924\"><tt>8d11983</tt></a></li>\n<li>The output of <code>bazel version</code></li>\n</ol>\n<pre><code>bazel --batch version\nINFO: Reading 'startup' options from /zhome/ff/2/77654/.bazelrc: --batch --output_user_root=/work1/s123598/.bazel\nBuild label: 0.3.2-2016-10-13 (@2891ec5)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Oct 13 15:05:25 2016 (1476371125)\nBuild timestamp: 1476371125\nBuild timestamp as int: 1476371125\n</code></pre>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<pre><code># install tensorflow\ngit clone https://github.com/tensorflow/tensorflow\ncd tensorflow\n# set configuration parameters\nexport PYTHON_BIN_PATH=`which python3`\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=0\nexport TF_NEED_CUDA=1\nexport GCC_HOST_COMPILER_PATH=`which gcc`\nexport TF_CUDA_VERSION=8.0\nexport CUDA_TOOLKIT_PATH=/appl/cuda/8.0/\nexport TF_CUDNN_VERSION=5\nexport CUDNN_INSTALL_PATH=/appl/cudnn/v5.0-prod\nexport TF_CUDA_COMPUTE_CAPABILITIES=\"3.5,5.2\"\n\ncat &gt; $HOME/.bazelrc &lt;&lt;EOF\n# --batch: always run in batch mode, since there are some firewall issues.\n# --output_user_root: HOME is NFS (filesystem), this will not work with bazel, use WORKDIR instead\nstartup --batch --output_user_root=$WORKDIR/.bazel\nEOF\n\n# one python configuration can't be set directly use yes to accept automatically\nyes \"\" | CC=gcc CXX=g++ ./configure\n\n# build tensorflow\nCC=gcc CXX=g++ bazel build --copt=\"-w\" --ignore_unsupported_sandboxing --spawn_strategy=standalone --verbose_failures \\\n-c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<h3>What other attempted solutions have you tried?</h3>\n<p>Just getting here took some time. I had to compile bazel, pcre, swig. Put bazel in batch model and get a workdirectory that wasn't NFS. But this I have no idea how to fix.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>full log: <a href=\"https://gist.github.com/AndreasMadsen/474389dc54efe948e9887eafb78679ef\">https://gist.github.com/AndreasMadsen/474389dc54efe948e9887eafb78679ef</a></p>\n<pre><code>INFO: From ProtoCompile tensorflow/core/example/example.pb.h [for host]:\nbazel-out/host/genfiles/external/protobuf/src: warning: directory does not exist.\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/core/debug/BUILD:33:1: null failed: protoc failed: error executing command\n  (cd /work1/s123598/.bazel/48591a606b240b3533e6a6889ad3b508/execroot/tensorflow &amp;&amp; \\\n  exec env - \\\n  bazel-out/host/bin/external/protobuf/protoc '--cpp_out=bazel-out/local_linux-py3-opt/genfiles/' '--plugin=protoc-gen-grpc=bazel-out/host/bin/external/grpc/grpc_cpp_plugin' '--grpc_out=bazel-out/local_linux-py3-opt/genfiles/' -I. -Iexternal/protobuf/src -Ibazel-out/local_linux-py3-opt/genfiles/external/protobuf/src tensorflow/core/debug/debug_service.proto): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nbazel-out/local_linux-py3-opt/genfiles/external/protobuf/src: warning: directory does not exist.\nbazel-out/host/bin/external/grpc/grpc_cpp_plugin: program not found or is not executable\n--grpc_out: protoc-gen-grpc: Plugin failed with status code 1.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/tools/pip_package/BUILD:23:1 null failed: protoc failed: error executing command\n  (cd /work1/s123598/.bazel/48591a606b240b3533e6a6889ad3b508/execroot/tensorflow &amp;&amp; \\\n  exec env - \\\n  bazel-out/host/bin/external/protobuf/protoc '--cpp_out=bazel-out/local_linux-py3-opt/genfiles/' '--plugin=protoc-gen-grpc=bazel-out/host/bin/external/grpc/grpc_cpp_plugin' '--grpc_out=bazel-out/local_linux-py3-opt/genfiles/' -I. -Iexternal/protobuf/src -Ibazel-out/local_linux-py3-opt/genfiles/external/protobuf/src tensorflow/core/debug/debug_service.proto): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nINFO: Elapsed time: 189.979s, Critical Path: 68.86s\n</code></pre>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nNone\nEnvironment info\nOperating System:\nuname -a\nLinux n-62-18-47 2.6.32-573.22.1.el6.x86_64 #1 SMP Tue Mar 22 17:15:28 CDT 2016 x86_64 x86_64 x86_64 GNU/Linux\n\nInstalled version of CUDA and cuDNN: CUDA: 8.0, cuDNN 5.0\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\nls -l /appl/cuda/8.0/lib64/libcud*\n-rw-r--r-- 1 sebo root 560184 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 sebo root     16 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 sebo root     19 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 sebo root 394472 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 sebo root 737516 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart_static.a\n\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD): 8d11983\nThe output of bazel version\n\nbazel --batch version\nINFO: Reading 'startup' options from /zhome/ff/2/77654/.bazelrc: --batch --output_user_root=/work1/s123598/.bazel\nBuild label: 0.3.2-2016-10-13 (@2891ec5)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Oct 13 15:05:25 2016 (1476371125)\nBuild timestamp: 1476371125\nBuild timestamp as int: 1476371125\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n# install tensorflow\ngit clone https://github.com/tensorflow/tensorflow\ncd tensorflow\n# set configuration parameters\nexport PYTHON_BIN_PATH=`which python3`\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=0\nexport TF_NEED_CUDA=1\nexport GCC_HOST_COMPILER_PATH=`which gcc`\nexport TF_CUDA_VERSION=8.0\nexport CUDA_TOOLKIT_PATH=/appl/cuda/8.0/\nexport TF_CUDNN_VERSION=5\nexport CUDNN_INSTALL_PATH=/appl/cudnn/v5.0-prod\nexport TF_CUDA_COMPUTE_CAPABILITIES=\"3.5,5.2\"\n\ncat > $HOME/.bazelrc <<EOF\n# --batch: always run in batch mode, since there are some firewall issues.\n# --output_user_root: HOME is NFS (filesystem), this will not work with bazel, use WORKDIR instead\nstartup --batch --output_user_root=$WORKDIR/.bazel\nEOF\n\n# one python configuration can't be set directly use yes to accept automatically\nyes \"\" | CC=gcc CXX=g++ ./configure\n\n# build tensorflow\nCC=gcc CXX=g++ bazel build --copt=\"-w\" --ignore_unsupported_sandboxing --spawn_strategy=standalone --verbose_failures \\\n-c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n\nWhat other attempted solutions have you tried?\nJust getting here took some time. I had to compile bazel, pcre, swig. Put bazel in batch model and get a workdirectory that wasn't NFS. But this I have no idea how to fix.\nLogs or other output that would be helpful\nfull log: https://gist.github.com/AndreasMadsen/474389dc54efe948e9887eafb78679ef\nINFO: From ProtoCompile tensorflow/core/example/example.pb.h [for host]:\nbazel-out/host/genfiles/external/protobuf/src: warning: directory does not exist.\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/core/debug/BUILD:33:1: null failed: protoc failed: error executing command\n  (cd /work1/s123598/.bazel/48591a606b240b3533e6a6889ad3b508/execroot/tensorflow && \\\n  exec env - \\\n  bazel-out/host/bin/external/protobuf/protoc '--cpp_out=bazel-out/local_linux-py3-opt/genfiles/' '--plugin=protoc-gen-grpc=bazel-out/host/bin/external/grpc/grpc_cpp_plugin' '--grpc_out=bazel-out/local_linux-py3-opt/genfiles/' -I. -Iexternal/protobuf/src -Ibazel-out/local_linux-py3-opt/genfiles/external/protobuf/src tensorflow/core/debug/debug_service.proto): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nbazel-out/local_linux-py3-opt/genfiles/external/protobuf/src: warning: directory does not exist.\nbazel-out/host/bin/external/grpc/grpc_cpp_plugin: program not found or is not executable\n--grpc_out: protoc-gen-grpc: Plugin failed with status code 1.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/tools/pip_package/BUILD:23:1 null failed: protoc failed: error executing command\n  (cd /work1/s123598/.bazel/48591a606b240b3533e6a6889ad3b508/execroot/tensorflow && \\\n  exec env - \\\n  bazel-out/host/bin/external/protobuf/protoc '--cpp_out=bazel-out/local_linux-py3-opt/genfiles/' '--plugin=protoc-gen-grpc=bazel-out/host/bin/external/grpc/grpc_cpp_plugin' '--grpc_out=bazel-out/local_linux-py3-opt/genfiles/' -I. -Iexternal/protobuf/src -Ibazel-out/local_linux-py3-opt/genfiles/external/protobuf/src tensorflow/core/debug/debug_service.proto): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nINFO: Elapsed time: 189.979s, Critical Path: 68.86s", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n\nNone\n### Environment info\n\nOperating System:\n\n```\nuname -a\nLinux n-62-18-47 2.6.32-573.22.1.el6.x86_64 #1 SMP Tue Mar 22 17:15:28 CDT 2016 x86_64 x86_64 x86_64 GNU/Linux\n```\n\nInstalled version of CUDA and cuDNN: CUDA: 8.0, cuDNN 5.0\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n```\nls -l /appl/cuda/8.0/lib64/libcud*\n-rw-r--r-- 1 sebo root 560184 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 sebo root     16 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 sebo root     19 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 sebo root 394472 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 sebo root 737516 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart_static.a\n```\n\nIf installed from source, provide \n1. The commit hash (`git rev-parse HEAD`): 8d1198374477e9c7e01893103233da984f302924\n2. The output of `bazel version`\n\n```\nbazel --batch version\nINFO: Reading 'startup' options from /zhome/ff/2/77654/.bazelrc: --batch --output_user_root=/work1/s123598/.bazel\nBuild label: 0.3.2-2016-10-13 (@2891ec5)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Oct 13 15:05:25 2016 (1476371125)\nBuild timestamp: 1476371125\nBuild timestamp as int: 1476371125\n```\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n\n```\n# install tensorflow\ngit clone https://github.com/tensorflow/tensorflow\ncd tensorflow\n# set configuration parameters\nexport PYTHON_BIN_PATH=`which python3`\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=0\nexport TF_NEED_CUDA=1\nexport GCC_HOST_COMPILER_PATH=`which gcc`\nexport TF_CUDA_VERSION=8.0\nexport CUDA_TOOLKIT_PATH=/appl/cuda/8.0/\nexport TF_CUDNN_VERSION=5\nexport CUDNN_INSTALL_PATH=/appl/cudnn/v5.0-prod\nexport TF_CUDA_COMPUTE_CAPABILITIES=\"3.5,5.2\"\n\ncat > $HOME/.bazelrc <<EOF\n# --batch: always run in batch mode, since there are some firewall issues.\n# --output_user_root: HOME is NFS (filesystem), this will not work with bazel, use WORKDIR instead\nstartup --batch --output_user_root=$WORKDIR/.bazel\nEOF\n\n# one python configuration can't be set directly use yes to accept automatically\nyes \"\" | CC=gcc CXX=g++ ./configure\n\n# build tensorflow\nCC=gcc CXX=g++ bazel build --copt=\"-w\" --ignore_unsupported_sandboxing --spawn_strategy=standalone --verbose_failures \\\n-c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n```\n### What other attempted solutions have you tried?\n\nJust getting here took some time. I had to compile bazel, pcre, swig. Put bazel in batch model and get a workdirectory that wasn't NFS. But this I have no idea how to fix.\n### Logs or other output that would be helpful\n\nfull log: https://gist.github.com/AndreasMadsen/474389dc54efe948e9887eafb78679ef\n\n```\nINFO: From ProtoCompile tensorflow/core/example/example.pb.h [for host]:\nbazel-out/host/genfiles/external/protobuf/src: warning: directory does not exist.\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/core/debug/BUILD:33:1: null failed: protoc failed: error executing command\n  (cd /work1/s123598/.bazel/48591a606b240b3533e6a6889ad3b508/execroot/tensorflow && \\\n  exec env - \\\n  bazel-out/host/bin/external/protobuf/protoc '--cpp_out=bazel-out/local_linux-py3-opt/genfiles/' '--plugin=protoc-gen-grpc=bazel-out/host/bin/external/grpc/grpc_cpp_plugin' '--grpc_out=bazel-out/local_linux-py3-opt/genfiles/' -I. -Iexternal/protobuf/src -Ibazel-out/local_linux-py3-opt/genfiles/external/protobuf/src tensorflow/core/debug/debug_service.proto): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nbazel-out/local_linux-py3-opt/genfiles/external/protobuf/src: warning: directory does not exist.\nbazel-out/host/bin/external/grpc/grpc_cpp_plugin: program not found or is not executable\n--grpc_out: protoc-gen-grpc: Plugin failed with status code 1.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/tools/pip_package/BUILD:23:1 null failed: protoc failed: error executing command\n  (cd /work1/s123598/.bazel/48591a606b240b3533e6a6889ad3b508/execroot/tensorflow && \\\n  exec env - \\\n  bazel-out/host/bin/external/protobuf/protoc '--cpp_out=bazel-out/local_linux-py3-opt/genfiles/' '--plugin=protoc-gen-grpc=bazel-out/host/bin/external/grpc/grpc_cpp_plugin' '--grpc_out=bazel-out/local_linux-py3-opt/genfiles/' -I. -Iexternal/protobuf/src -Ibazel-out/local_linux-py3-opt/genfiles/external/protobuf/src tensorflow/core/debug/debug_service.proto): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nINFO: Elapsed time: 189.979s, Critical Path: 68.86s\n```\n"}
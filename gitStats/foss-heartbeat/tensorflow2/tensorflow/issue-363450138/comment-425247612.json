{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/425247612", "html_url": "https://github.com/tensorflow/tensorflow/pull/22493#issuecomment-425247612", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22493", "id": 425247612, "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTI0NzYxMg==", "user": {"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-27T21:22:35Z", "updated_at": "2018-09-27T21:22:35Z", "author_association": "MEMBER", "body_html": "<p>Also, what do you plan to do with MKL ops that just replace TF ops (without graph rewrite)? For example, the <code>Transpose</code> op?<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/cc83067469bc30bba55932c587f31ef68f15792f/tensorflow/core/kernels/transpose_op.cc#L221-L246\">tensorflow/tensorflow/core/kernels/transpose_op.cc</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n        Lines 221 to 246\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/cc83067469bc30bba55932c587f31ef68f15792f\">cc83067</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L221\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"221\"></td>\n          <td id=\"LC221\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> #<span class=\"pl-k\">if</span> defined(INTEL_MKL) &amp;&amp; defined(ENABLE_MKL) </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L222\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"222\"></td>\n          <td id=\"LC222\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> #<span class=\"pl-k\">define</span> <span class=\"pl-en\">REGISTER</span>(<span class=\"pl-v\">T</span>)                                   \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L223\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"223\"></td>\n          <td id=\"LC223\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-en\">REGISTER_KERNEL_BUILDER</span>(Name(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Transpose<span class=\"pl-pds\">\"</span></span>)           \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L224\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"224\"></td>\n          <td id=\"LC224\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .Device(DEVICE_CPU)     \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L225\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"225\"></td>\n          <td id=\"LC225\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .TypeConstraint&lt;T&gt;(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>T<span class=\"pl-pds\">\"</span></span>) \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L226\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"226\"></td>\n          <td id=\"LC226\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .HostMemory(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>perm<span class=\"pl-pds\">\"</span></span>),    \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L227\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"227\"></td>\n          <td id=\"LC227\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                           MklTransposeCpuOp);         \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L228\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"228\"></td>\n          <td id=\"LC228\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-en\">REGISTER_KERNEL_BUILDER</span>(Name(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>ConjugateTranspose<span class=\"pl-pds\">\"</span></span>)  \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L229\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"229\"></td>\n          <td id=\"LC229\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .Device(DEVICE_CPU)     \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L230\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"230\"></td>\n          <td id=\"LC230\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .TypeConstraint&lt;T&gt;(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>T<span class=\"pl-pds\">\"</span></span>) \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L231\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"231\"></td>\n          <td id=\"LC231\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .HostMemory(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>perm<span class=\"pl-pds\">\"</span></span>),    \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L232\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"232\"></td>\n          <td id=\"LC232\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                           MklConjugateTransposeCpuOp); </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L233\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"233\"></td>\n          <td id=\"LC233\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L234\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"234\"></td>\n          <td id=\"LC234\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> #<span class=\"pl-k\">else</span>  <span class=\"pl-c\"><span class=\"pl-c\">//</span> INTEL_MKL &amp;&amp; ENABLE_MKL</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L235\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"235\"></td>\n          <td id=\"LC235\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> #<span class=\"pl-k\">define</span> <span class=\"pl-en\">REGISTER</span>(<span class=\"pl-v\">T</span>)                                   \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L236\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"236\"></td>\n          <td id=\"LC236\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-en\">REGISTER_KERNEL_BUILDER</span>(Name(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Transpose<span class=\"pl-pds\">\"</span></span>)           \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L237\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"237\"></td>\n          <td id=\"LC237\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .Device(DEVICE_CPU)     \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L238\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"238\"></td>\n          <td id=\"LC238\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .TypeConstraint&lt;T&gt;(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>T<span class=\"pl-pds\">\"</span></span>) \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L239\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"239\"></td>\n          <td id=\"LC239\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .HostMemory(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>perm<span class=\"pl-pds\">\"</span></span>),    \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L240\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"240\"></td>\n          <td id=\"LC240\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                           TransposeCpuOp);            \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L241\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"241\"></td>\n          <td id=\"LC241\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-en\">REGISTER_KERNEL_BUILDER</span>(Name(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>ConjugateTranspose<span class=\"pl-pds\">\"</span></span>)  \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L242\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"242\"></td>\n          <td id=\"LC242\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .Device(DEVICE_CPU)     \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L243\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"243\"></td>\n          <td id=\"LC243\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .TypeConstraint&lt;T&gt;(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>T<span class=\"pl-pds\">\"</span></span>) \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L244\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"244\"></td>\n          <td id=\"LC244\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                               .HostMemory(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>perm<span class=\"pl-pds\">\"</span></span>),    \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L245\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"245\"></td>\n          <td id=\"LC245\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">                           ConjugateTransposeCpuOp); </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L246\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"246\"></td>\n          <td id=\"LC246\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> #<span class=\"pl-k\">endif</span>  <span class=\"pl-c\"><span class=\"pl-c\">//</span> INTEL_MKL &amp;&amp; ENABLE_MKL</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>", "body_text": "Also, what do you plan to do with MKL ops that just replace TF ops (without graph rewrite)? For example, the Transpose op?\n\n  \n    \n      tensorflow/tensorflow/core/kernels/transpose_op.cc\n    \n    \n        Lines 221 to 246\n      in\n      cc83067\n    \n    \n    \n    \n\n        \n          \n           #if defined(INTEL_MKL) && defined(ENABLE_MKL) \n        \n\n        \n          \n           #define REGISTER(T)                                   \\ \n        \n\n        \n          \n             REGISTER_KERNEL_BUILDER(Name(\"Transpose\")           \\ \n        \n\n        \n          \n                                         .Device(DEVICE_CPU)     \\ \n        \n\n        \n          \n                                         .TypeConstraint<T>(\"T\") \\ \n        \n\n        \n          \n                                         .HostMemory(\"perm\"),    \\ \n        \n\n        \n          \n                                     MklTransposeCpuOp);         \\ \n        \n\n        \n          \n             REGISTER_KERNEL_BUILDER(Name(\"ConjugateTranspose\")  \\ \n        \n\n        \n          \n                                         .Device(DEVICE_CPU)     \\ \n        \n\n        \n          \n                                         .TypeConstraint<T>(\"T\") \\ \n        \n\n        \n          \n                                         .HostMemory(\"perm\"),    \\ \n        \n\n        \n          \n                                     MklConjugateTransposeCpuOp); \n        \n\n        \n          \n            \n        \n\n        \n          \n           #else  // INTEL_MKL && ENABLE_MKL \n        \n\n        \n          \n           #define REGISTER(T)                                   \\ \n        \n\n        \n          \n             REGISTER_KERNEL_BUILDER(Name(\"Transpose\")           \\ \n        \n\n        \n          \n                                         .Device(DEVICE_CPU)     \\ \n        \n\n        \n          \n                                         .TypeConstraint<T>(\"T\") \\ \n        \n\n        \n          \n                                         .HostMemory(\"perm\"),    \\ \n        \n\n        \n          \n                                     TransposeCpuOp);            \\ \n        \n\n        \n          \n             REGISTER_KERNEL_BUILDER(Name(\"ConjugateTranspose\")  \\ \n        \n\n        \n          \n                                         .Device(DEVICE_CPU)     \\ \n        \n\n        \n          \n                                         .TypeConstraint<T>(\"T\") \\ \n        \n\n        \n          \n                                         .HostMemory(\"perm\"),    \\ \n        \n\n        \n          \n                                     ConjugateTransposeCpuOp); \n        \n\n        \n          \n           #endif  // INTEL_MKL && ENABLE_MKL", "body": "Also, what do you plan to do with MKL ops that just replace TF ops (without graph rewrite)? For example, the `Transpose` op?\r\nhttps://github.com/tensorflow/tensorflow/blob/cc83067469bc30bba55932c587f31ef68f15792f/tensorflow/core/kernels/transpose_op.cc#L221-L246"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9878", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9878/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9878/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9878/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9878", "id": 228474757, "node_id": "MDU6SXNzdWUyMjg0NzQ3NTc=", "number": 9878, "title": "Does tensorflow support forward multiple times then backward once like average_loss in Caffe ?", "user": {"login": "YihangLou", "id": 7887746, "node_id": "MDQ6VXNlcjc4ODc3NDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/7887746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YihangLou", "html_url": "https://github.com/YihangLou", "followers_url": "https://api.github.com/users/YihangLou/followers", "following_url": "https://api.github.com/users/YihangLou/following{/other_user}", "gists_url": "https://api.github.com/users/YihangLou/gists{/gist_id}", "starred_url": "https://api.github.com/users/YihangLou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YihangLou/subscriptions", "organizations_url": "https://api.github.com/users/YihangLou/orgs", "repos_url": "https://api.github.com/users/YihangLou/repos", "events_url": "https://api.github.com/users/YihangLou/events{/privacy}", "received_events_url": "https://api.github.com/users/YihangLou/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-13T13:52:50Z", "updated_at": "2017-05-15T15:49:29Z", "closed_at": "2017-05-15T15:14:44Z", "author_association": "NONE", "body_html": "<p>Hi, everyone. In my training tasks, the batch size is expected to be  large My training task is a little special that costs a lot of GPU memory. Now only set batch size = 6 almost run out of entire GPU memory 11GB GTX 1080Ti. However, I need to enlarge my batch size. In Caffe Platform, there is an <strong>average_loss</strong>  setting in solver.prototxt to perform forward multiple times and compute the average loss, then backward once. I scaned the documentation of tensorflow but there is no operation can implement such function. Does anyone have any ideas or how to use the existing op to implement this process?  Thanks</p>\n<p>Following is my system info:<br>\nGTX1080Ti<br>\nCUDA version: 8.0<br>\ncuDNN:6.0<br>\nTensorflow: r1.0.1<br>\nUbuntu 16.04</p>", "body_text": "Hi, everyone. In my training tasks, the batch size is expected to be  large My training task is a little special that costs a lot of GPU memory. Now only set batch size = 6 almost run out of entire GPU memory 11GB GTX 1080Ti. However, I need to enlarge my batch size. In Caffe Platform, there is an average_loss  setting in solver.prototxt to perform forward multiple times and compute the average loss, then backward once. I scaned the documentation of tensorflow but there is no operation can implement such function. Does anyone have any ideas or how to use the existing op to implement this process?  Thanks\nFollowing is my system info:\nGTX1080Ti\nCUDA version: 8.0\ncuDNN:6.0\nTensorflow: r1.0.1\nUbuntu 16.04", "body": "Hi, everyone. In my training tasks, the batch size is expected to be  large My training task is a little special that costs a lot of GPU memory. Now only set batch size = 6 almost run out of entire GPU memory 11GB GTX 1080Ti. However, I need to enlarge my batch size. In Caffe Platform, there is an **average_loss**  setting in solver.prototxt to perform forward multiple times and compute the average loss, then backward once. I scaned the documentation of tensorflow but there is no operation can implement such function. Does anyone have any ideas or how to use the existing op to implement this process?  Thanks\r\n\r\nFollowing is my system info:\r\nGTX1080Ti\r\nCUDA version: 8.0\r\ncuDNN:6.0\r\nTensorflow: r1.0.1\r\nUbuntu 16.04"}
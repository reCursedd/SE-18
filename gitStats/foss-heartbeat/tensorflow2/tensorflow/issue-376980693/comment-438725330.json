{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/438725330", "html_url": "https://github.com/tensorflow/tensorflow/pull/23468#issuecomment-438725330", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23468", "id": 438725330, "node_id": "MDEyOklzc3VlQ29tbWVudDQzODcyNTMzMA==", "user": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-14T16:27:43Z", "updated_at": "2018-11-14T16:27:43Z", "author_association": "MEMBER", "body_html": "<div class=\"email-quoted-reply\">On Tue, Nov 13, 2018 at 10:11 PM Karl Lessard ***@***.***&gt; wrote:\n Ok, things are unfortunately getting complicated:\n\n    1.\n\n    I can't validate duplicated attribute values in TFE_Execute since\n    setting more than once the same attribute results in replacing the former\n    value by the later. You can see this happening here\n    &lt;<a href=\"https://github.com/tensorflow/tensorflow/blob/37b4d2ef3f90f53f8050f557038b65ff6d1a06bc/tensorflow/core/common_runtime/eager/attr_builder.h#L135\">https://github.com/tensorflow/tensorflow/blob/37b4d2ef3f90f53f8050f557038b65ff6d1a06bc/tensorflow/core/common_runtime/eager/attr_builder.h#L135</a>&gt;.\n    I can replace that logic by validating at the same spot that duplicate\n    attributes must all have the same value (btw, I don't know if there are\n    real cases of duplicate attributes right now).\n\n There are no use cases of duplicate attributes so we should check that</div>\n<div class=\"email-fragment\">they are not duplicates and if it's set twice that they match.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">\n    1.\n    2.\n\n    I think we forgot something when we've decided to enable input attrs\n    inference by default. Inference of input list attributes can only work if\n    the client adds it using the new TFE_OpAddInputList. Currently,\n    clients call TFE_OpAddInput for each element of an input list instead.\n    That makes it impossible for us to detect when ends the list or when starts\n    the next input, and we lose track of the input attributes (we actually\n    assume each input is a single one). Possible workarounds are:\n    - Disable automatically input attribute inference when we detect\n       (easily) that an input list is being fed by calling TFE_OpAddInput\n       multiple times.\n\n Yeah, I think this is fine for now.\n\n    1.\n       - Have a distinct methods to support attribute inference (e.g.\n       TFE_OpAddInferableInput and TFE_OpAddInferableInputList).\n       - Restore the option to enable/disable input attribute inference at\n       TFE_Op construction, so the client knows that TFE_OpAddInput should\n       be used exclusively for adding single inputs.\n\n Any other suggestion?\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"376980693\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/23468\" href=\"https://github.com/tensorflow/tensorflow/pull/23468#issuecomment-438549315\">#23468 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AAATxa2zaMWkg4gyp957SVf5otwPTofFks5uu7QPgaJpZM4YMbtn\">https://github.com/notifications/unsubscribe-auth/AAATxa2zaMWkg4gyp957SVf5otwPTofFks5uu7QPgaJpZM4YMbtn</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n<div class=\"email-signature-reply\">-- \n - Alex</div>\n</div>", "body_text": "On Tue, Nov 13, 2018 at 10:11 PM Karl Lessard ***@***.***> wrote:\n Ok, things are unfortunately getting complicated:\n\n    1.\n\n    I can't validate duplicated attribute values in TFE_Execute since\n    setting more than once the same attribute results in replacing the former\n    value by the later. You can see this happening here\n    <https://github.com/tensorflow/tensorflow/blob/37b4d2ef3f90f53f8050f557038b65ff6d1a06bc/tensorflow/core/common_runtime/eager/attr_builder.h#L135>.\n    I can replace that logic by validating at the same spot that duplicate\n    attributes must all have the same value (btw, I don't know if there are\n    real cases of duplicate attributes right now).\n\n There are no use cases of duplicate attributes so we should check that\nthey are not duplicates and if it's set twice that they match.\n\u2026\n\n    1.\n    2.\n\n    I think we forgot something when we've decided to enable input attrs\n    inference by default. Inference of input list attributes can only work if\n    the client adds it using the new TFE_OpAddInputList. Currently,\n    clients call TFE_OpAddInput for each element of an input list instead.\n    That makes it impossible for us to detect when ends the list or when starts\n    the next input, and we lose track of the input attributes (we actually\n    assume each input is a single one). Possible workarounds are:\n    - Disable automatically input attribute inference when we detect\n       (easily) that an input list is being fed by calling TFE_OpAddInput\n       multiple times.\n\n Yeah, I think this is fine for now.\n\n    1.\n       - Have a distinct methods to support attribute inference (e.g.\n       TFE_OpAddInferableInput and TFE_OpAddInferableInputList).\n       - Restore the option to enable/disable input attribute inference at\n       TFE_Op construction, so the client knows that TFE_OpAddInput should\n       be used exclusively for adding single inputs.\n\n Any other suggestion?\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#23468 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/AAATxa2zaMWkg4gyp957SVf5otwPTofFks5uu7QPgaJpZM4YMbtn>\n .\n\n\n-- \n - Alex", "body": "On Tue, Nov 13, 2018 at 10:11 PM Karl Lessard <notifications@github.com>\nwrote:\n\n> Ok, things are unfortunately getting complicated:\n>\n>    1.\n>\n>    I can't validate duplicated attribute values in TFE_Execute since\n>    setting more than once the same attribute results in replacing the former\n>    value by the later. You can see this happening here\n>    <https://github.com/tensorflow/tensorflow/blob/37b4d2ef3f90f53f8050f557038b65ff6d1a06bc/tensorflow/core/common_runtime/eager/attr_builder.h#L135>.\n>    I can replace that logic by validating at the same spot that duplicate\n>    attributes must all have the same value (btw, I don't know if there are\n>    real cases of duplicate attributes right now).\n>\n> There are no use cases of duplicate attributes so we should check that\nthey are not duplicates and if it's set twice that they match.\n\n\n\n>\n>    1.\n>    2.\n>\n>    I think we forgot something when we've decided to enable input attrs\n>    inference by default. Inference of input list attributes can only work if\n>    the client adds it using the new TFE_OpAddInputList. Currently,\n>    clients call TFE_OpAddInput for each element of an input list instead.\n>    That makes it impossible for us to detect when ends the list or when starts\n>    the next input, and we lose track of the input attributes (we actually\n>    assume each input is a single one). Possible workarounds are:\n>    - Disable automatically input attribute inference when we detect\n>       (easily) that an input list is being fed by calling TFE_OpAddInput\n>       multiple times.\n>\n> Yeah, I think this is fine for now.\n\n\n>\n>    1.\n>       - Have a distinct methods to support attribute inference (e.g.\n>       TFE_OpAddInferableInput and TFE_OpAddInferableInputList).\n>       - Restore the option to enable/disable input attribute inference at\n>       TFE_Op construction, so the client knows that TFE_OpAddInput should\n>       be used exclusively for adding single inputs.\n>\n> Any other suggestion?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/pull/23468#issuecomment-438549315>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAATxa2zaMWkg4gyp957SVf5otwPTofFks5uu7QPgaJpZM4YMbtn>\n> .\n>\n\n\n-- \n - Alex\n"}
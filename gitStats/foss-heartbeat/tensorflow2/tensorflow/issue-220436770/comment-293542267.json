{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/293542267", "html_url": "https://github.com/tensorflow/tensorflow/issues/9073#issuecomment-293542267", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9073", "id": 293542267, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzU0MjI2Nw==", "user": {"login": "es007", "id": 4059304, "node_id": "MDQ6VXNlcjQwNTkzMDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/4059304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/es007", "html_url": "https://github.com/es007", "followers_url": "https://api.github.com/users/es007/followers", "following_url": "https://api.github.com/users/es007/following{/other_user}", "gists_url": "https://api.github.com/users/es007/gists{/gist_id}", "starred_url": "https://api.github.com/users/es007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/es007/subscriptions", "organizations_url": "https://api.github.com/users/es007/orgs", "repos_url": "https://api.github.com/users/es007/repos", "events_url": "https://api.github.com/users/es007/events{/privacy}", "received_events_url": "https://api.github.com/users/es007/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-12T10:53:14Z", "updated_at": "2017-04-12T10:53:14Z", "author_association": "NONE", "body_html": "<p>As for the white spaces, this function is insensitive to them:<br>\n`constexpr int strcmpc(const char* a, const char* b)<br>\n{</p>\n<p>return *a == 0 &amp;&amp; *b == 0 ? 0 :<br>\n*a == ' ' ? strcmpc(a+1,b) :<br>\n*b == ' ' ? strcmpc(a,b+1) :<br>\n*a == 0 ? -1 :<br>\n*b == 0 ? 1 :<br>\n*a &lt; *b ? -1 :<br>\n*a &gt; *b ? 1 :<br>\n*a == *b ? strcmpc(a+1, b+1) :<br>\nfalse;</p>\n<p>}`</p>\n<p>and at least in my ops_to_register.h file I have this macro defined:<br>\n<code>#define SHOULD_REGISTER_OP_KERNEL(clz) (strstr(kNecessaryOpKernelClasses, \",\" clz \",\") != nullptr)</code></p>\n<p>I got the talked error:<br>\n<code>non-constexpr function 'strstr' cannot be used in a constant expression</code> too, and this is why I switch strstr with the strstrc implementation above and this solved the error.</p>\n<p>I'm compiling TF (selective registration) for Android  armeabi-v7a.</p>", "body_text": "As for the white spaces, this function is insensitive to them:\n`constexpr int strcmpc(const char* a, const char* b)\n{\nreturn *a == 0 && *b == 0 ? 0 :\n*a == ' ' ? strcmpc(a+1,b) :\n*b == ' ' ? strcmpc(a,b+1) :\n*a == 0 ? -1 :\n*b == 0 ? 1 :\n*a < *b ? -1 :\n*a > *b ? 1 :\n*a == *b ? strcmpc(a+1, b+1) :\nfalse;\n}`\nand at least in my ops_to_register.h file I have this macro defined:\n#define SHOULD_REGISTER_OP_KERNEL(clz) (strstr(kNecessaryOpKernelClasses, \",\" clz \",\") != nullptr)\nI got the talked error:\nnon-constexpr function 'strstr' cannot be used in a constant expression too, and this is why I switch strstr with the strstrc implementation above and this solved the error.\nI'm compiling TF (selective registration) for Android  armeabi-v7a.", "body": "As for the white spaces, this function is insensitive to them:\r\n`constexpr int strcmpc(const char* a, const char* b)\r\n{\r\n\r\nreturn *a == 0 && *b == 0 ? 0 :\r\n       *a == ' ' ? strcmpc(a+1,b) :\r\n       *b == ' ' ? strcmpc(a,b+1) :\r\n  *a == 0 ? -1 :\r\n  *b == 0 ? 1 :\r\n  *a < *b ? -1 :\r\n  *a > *b ? 1 :\r\n  *a == *b ? strcmpc(a+1, b+1) :\r\n  false;\r\n\r\n}`\r\n\r\nand at least in my ops_to_register.h file I have this macro defined:\r\n`#define SHOULD_REGISTER_OP_KERNEL(clz) (strstr(kNecessaryOpKernelClasses, \",\" clz \",\") != nullptr)`\r\n\r\nI got the talked error:\r\n`non-constexpr function 'strstr' cannot\r\n      be used in a constant expression` too, and this is why I switch strstr with the strstrc implementation above and this solved the error.\r\n\r\nI'm compiling TF (selective registration) for Android  armeabi-v7a."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/293540130", "html_url": "https://github.com/tensorflow/tensorflow/issues/9073#issuecomment-293540130", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9073", "id": 293540130, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzU0MDEzMA==", "user": {"login": "es007", "id": 4059304, "node_id": "MDQ6VXNlcjQwNTkzMDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/4059304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/es007", "html_url": "https://github.com/es007", "followers_url": "https://api.github.com/users/es007/followers", "following_url": "https://api.github.com/users/es007/following{/other_user}", "gists_url": "https://api.github.com/users/es007/gists{/gist_id}", "starred_url": "https://api.github.com/users/es007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/es007/subscriptions", "organizations_url": "https://api.github.com/users/es007/orgs", "repos_url": "https://api.github.com/users/es007/repos", "events_url": "https://api.github.com/users/es007/events{/privacy}", "received_events_url": "https://api.github.com/users/es007/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-12T10:42:33Z", "updated_at": "2017-04-12T14:30:32Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9924\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/timanglade\">@timanglade</a> Can you paste your ops_to_register.h header file here?</p>\n<p>I just saw you posted it, and the format seems different than mine.<br>\nYou do need the strstrc function that I posted above, you should replace line 78 in your ops_to_register.h file:</p>\n<p>#define SHOULD_REGISTER_OP_KERNEL(clz) (find_in&lt;sizeof(kNecessaryOpKernelClasses) / sizeof(*kNecessaryOpKernelClasses)&gt;::f(clz, kNecessaryOpKernelClasses))</p>\n<p>with:</p>\n<p>#define SHOULD_REGISTER_OP_KERNEL(clz) (strstrc(kNecessaryOpKernelClasses, \",\" clz \",\") != nullptr)</p>\n<p>and paste the strstrc function from above to the beginning of the file. And things should work fine for you.</p>\n<p>I succeeded in compiling TF for android with selective registration support with this workaround.</p>\n<p>good luck</p>", "body_text": "@timanglade Can you paste your ops_to_register.h header file here?\nI just saw you posted it, and the format seems different than mine.\nYou do need the strstrc function that I posted above, you should replace line 78 in your ops_to_register.h file:\n#define SHOULD_REGISTER_OP_KERNEL(clz) (find_in<sizeof(kNecessaryOpKernelClasses) / sizeof(*kNecessaryOpKernelClasses)>::f(clz, kNecessaryOpKernelClasses))\nwith:\n#define SHOULD_REGISTER_OP_KERNEL(clz) (strstrc(kNecessaryOpKernelClasses, \",\" clz \",\") != nullptr)\nand paste the strstrc function from above to the beginning of the file. And things should work fine for you.\nI succeeded in compiling TF for android with selective registration support with this workaround.\ngood luck", "body": "@timanglade Can you paste your ops_to_register.h header file here?\r\n\r\nI just saw you posted it, and the format seems different than mine. \r\nYou do need the strstrc function that I posted above, you should replace line 78 in your ops_to_register.h file:\r\n\r\n#define SHOULD_REGISTER_OP_KERNEL(clz) (find_in<sizeof(kNecessaryOpKernelClasses) / sizeof(*kNecessaryOpKernelClasses)>::f(clz, kNecessaryOpKernelClasses))\r\n\r\nwith:\r\n\r\n#define SHOULD_REGISTER_OP_KERNEL(clz) (strstrc(kNecessaryOpKernelClasses, \",\" clz \",\") != nullptr)\r\n\r\nand paste the strstrc function from above to the beginning of the file. And things should work fine for you.\r\n\r\nI succeeded in compiling TF for android with selective registration support with this workaround.\r\n\r\ngood luck"}
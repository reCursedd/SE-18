{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/272620916", "html_url": "https://github.com/tensorflow/tensorflow/issues/6803#issuecomment-272620916", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6803", "id": 272620916, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjYyMDkxNg==", "user": {"login": "chenghuige", "id": 6323467, "node_id": "MDQ6VXNlcjYzMjM0Njc=", "avatar_url": "https://avatars0.githubusercontent.com/u/6323467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenghuige", "html_url": "https://github.com/chenghuige", "followers_url": "https://api.github.com/users/chenghuige/followers", "following_url": "https://api.github.com/users/chenghuige/following{/other_user}", "gists_url": "https://api.github.com/users/chenghuige/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenghuige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenghuige/subscriptions", "organizations_url": "https://api.github.com/users/chenghuige/orgs", "repos_url": "https://api.github.com/users/chenghuige/repos", "events_url": "https://api.github.com/users/chenghuige/events{/privacy}", "received_events_url": "https://api.github.com/users/chenghuige/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-14T12:22:56Z", "updated_at": "2017-01-14T13:09:32Z", "author_association": "NONE", "body_html": "<p>Well, I have find out how to do this. like below in decoder_fn</p>\n<pre><code>if cell_output is None:\n  context_state = tensor_array_ops.TensorArray(\n    dtype=dtype, tensor_array_name=\"best_path\", size=0, dynamic_size=True, infer_shape=False)\nelse:\n  context_state = context_state.write(time - 1, next_input_id)\n</code></pre>\n<p>and use it :</p>\n<pre><code>tf.transpose(decoder_context_state_inference.stack(), [1, 0])\n</code></pre>", "body_text": "Well, I have find out how to do this. like below in decoder_fn\nif cell_output is None:\n  context_state = tensor_array_ops.TensorArray(\n    dtype=dtype, tensor_array_name=\"best_path\", size=0, dynamic_size=True, infer_shape=False)\nelse:\n  context_state = context_state.write(time - 1, next_input_id)\n\nand use it :\ntf.transpose(decoder_context_state_inference.stack(), [1, 0])", "body": "Well, I have find out how to do this. like below in decoder_fn \r\n    \r\n    if cell_output is None:\r\n      context_state = tensor_array_ops.TensorArray(\r\n        dtype=dtype, tensor_array_name=\"best_path\", size=0, dynamic_size=True, infer_shape=False)\r\n    else:\r\n      context_state = context_state.write(time - 1, next_input_id)\r\n\r\nand use it :\r\n\r\n    tf.transpose(decoder_context_state_inference.stack(), [1, 0])"}
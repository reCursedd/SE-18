{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2489", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2489/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2489/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2489/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2489", "id": 156504756, "node_id": "MDU6SXNzdWUxNTY1MDQ3NTY=", "number": 2489, "title": "New added variables cannot be saved", "user": {"login": "koonyook", "id": 6705189, "node_id": "MDQ6VXNlcjY3MDUxODk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6705189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/koonyook", "html_url": "https://github.com/koonyook", "followers_url": "https://api.github.com/users/koonyook/followers", "following_url": "https://api.github.com/users/koonyook/following{/other_user}", "gists_url": "https://api.github.com/users/koonyook/gists{/gist_id}", "starred_url": "https://api.github.com/users/koonyook/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/koonyook/subscriptions", "organizations_url": "https://api.github.com/users/koonyook/orgs", "repos_url": "https://api.github.com/users/koonyook/repos", "events_url": "https://api.github.com/users/koonyook/events{/privacy}", "received_events_url": "https://api.github.com/users/koonyook/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-05-24T13:18:08Z", "updated_at": "2016-05-24T14:08:57Z", "closed_at": "2016-05-24T14:08:57Z", "author_association": "NONE", "body_html": "<p>I tested by running these 3 pieces of code respectively.</p>\n<p>First, init some variables and save.</p>\n<pre><code>import tensorflow as tf\n\nsess = tf.InteractiveSession()\nv1 = tf.Variable(1,name=\"v1\")\nv2 = tf.Variable(2,name=\"v2\")\nsess.run(tf.initialize_all_variables())\nsaver = tf.train.Saver()\nsaver.save(sess,'v12.ckpt')\n</code></pre>\n<p>Then, restore the session, add one more variable, and save.</p>\n<pre><code>import tensorflow as tf\n\nsess = tf.InteractiveSession()\nv1 = tf.Variable(1,name=\"v1\")\nv2 = tf.Variable(2,name=\"v2\")\nsaver = tf.train.Saver()\nsaver.restore(sess,'v12.ckpt')  #works fine here\n\nv3 = tf.Variable(3,name=\"v3\")\nsess.run(tf.initialize_variables([v3]))\n\nsaver.save(sess,'v123.ckpt')\n\nprint v3.eval() #show value without problem\n</code></pre>\n<p>Then, restore them.</p>\n<pre><code>import tensorflow as tf\n\nsess = tf.InteractiveSession()\nv1 = tf.Variable(1,name=\"v1\")\nv2 = tf.Variable(2,name=\"v2\")\nv3 = tf.Variable(3,name=\"v3\")\n\nsaver = tf.train.Saver()\nsaver.restore(sess,'v123.ckpt') #error here\n</code></pre>\n<p>This is the error:</p>\n<pre><code>tensorflow.python.framework.errors.NotFoundError: Tensor name \"v3\" not found in checkpoint files v123.ckpt [[Node: save/restore_slice_2 = RestoreSlice[dt=DT_INT32, preferred_shard=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/restore_slice_2/tensor_name, save/restore_slice_2/shape_and_slice)]] Caused by op u'save/restore_slice_2'\n</code></pre>\n<p>What is the problem here?</p>\n<p>I'm using version r0.8 on Ubuntu16.04</p>", "body_text": "I tested by running these 3 pieces of code respectively.\nFirst, init some variables and save.\nimport tensorflow as tf\n\nsess = tf.InteractiveSession()\nv1 = tf.Variable(1,name=\"v1\")\nv2 = tf.Variable(2,name=\"v2\")\nsess.run(tf.initialize_all_variables())\nsaver = tf.train.Saver()\nsaver.save(sess,'v12.ckpt')\n\nThen, restore the session, add one more variable, and save.\nimport tensorflow as tf\n\nsess = tf.InteractiveSession()\nv1 = tf.Variable(1,name=\"v1\")\nv2 = tf.Variable(2,name=\"v2\")\nsaver = tf.train.Saver()\nsaver.restore(sess,'v12.ckpt')  #works fine here\n\nv3 = tf.Variable(3,name=\"v3\")\nsess.run(tf.initialize_variables([v3]))\n\nsaver.save(sess,'v123.ckpt')\n\nprint v3.eval() #show value without problem\n\nThen, restore them.\nimport tensorflow as tf\n\nsess = tf.InteractiveSession()\nv1 = tf.Variable(1,name=\"v1\")\nv2 = tf.Variable(2,name=\"v2\")\nv3 = tf.Variable(3,name=\"v3\")\n\nsaver = tf.train.Saver()\nsaver.restore(sess,'v123.ckpt') #error here\n\nThis is the error:\ntensorflow.python.framework.errors.NotFoundError: Tensor name \"v3\" not found in checkpoint files v123.ckpt [[Node: save/restore_slice_2 = RestoreSlice[dt=DT_INT32, preferred_shard=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/restore_slice_2/tensor_name, save/restore_slice_2/shape_and_slice)]] Caused by op u'save/restore_slice_2'\n\nWhat is the problem here?\nI'm using version r0.8 on Ubuntu16.04", "body": "I tested by running these 3 pieces of code respectively.\n\nFirst, init some variables and save.\n\n```\nimport tensorflow as tf\n\nsess = tf.InteractiveSession()\nv1 = tf.Variable(1,name=\"v1\")\nv2 = tf.Variable(2,name=\"v2\")\nsess.run(tf.initialize_all_variables())\nsaver = tf.train.Saver()\nsaver.save(sess,'v12.ckpt')\n```\n\nThen, restore the session, add one more variable, and save.\n\n```\nimport tensorflow as tf\n\nsess = tf.InteractiveSession()\nv1 = tf.Variable(1,name=\"v1\")\nv2 = tf.Variable(2,name=\"v2\")\nsaver = tf.train.Saver()\nsaver.restore(sess,'v12.ckpt')  #works fine here\n\nv3 = tf.Variable(3,name=\"v3\")\nsess.run(tf.initialize_variables([v3]))\n\nsaver.save(sess,'v123.ckpt')\n\nprint v3.eval() #show value without problem\n```\n\nThen, restore them.\n\n```\nimport tensorflow as tf\n\nsess = tf.InteractiveSession()\nv1 = tf.Variable(1,name=\"v1\")\nv2 = tf.Variable(2,name=\"v2\")\nv3 = tf.Variable(3,name=\"v3\")\n\nsaver = tf.train.Saver()\nsaver.restore(sess,'v123.ckpt') #error here\n```\n\nThis is the error:\n\n```\ntensorflow.python.framework.errors.NotFoundError: Tensor name \"v3\" not found in checkpoint files v123.ckpt [[Node: save/restore_slice_2 = RestoreSlice[dt=DT_INT32, preferred_shard=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/restore_slice_2/tensor_name, save/restore_slice_2/shape_and_slice)]] Caused by op u'save/restore_slice_2'\n```\n\nWhat is the problem here?\n\nI'm using version r0.8 on Ubuntu16.04\n"}
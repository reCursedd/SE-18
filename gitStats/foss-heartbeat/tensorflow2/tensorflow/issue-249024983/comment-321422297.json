{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/321422297", "html_url": "https://github.com/tensorflow/tensorflow/issues/12143#issuecomment-321422297", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12143", "id": 321422297, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTQyMjI5Nw==", "user": {"login": "YongCHN", "id": 6441772, "node_id": "MDQ6VXNlcjY0NDE3NzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/6441772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YongCHN", "html_url": "https://github.com/YongCHN", "followers_url": "https://api.github.com/users/YongCHN/followers", "following_url": "https://api.github.com/users/YongCHN/following{/other_user}", "gists_url": "https://api.github.com/users/YongCHN/gists{/gist_id}", "starred_url": "https://api.github.com/users/YongCHN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YongCHN/subscriptions", "organizations_url": "https://api.github.com/users/YongCHN/orgs", "repos_url": "https://api.github.com/users/YongCHN/repos", "events_url": "https://api.github.com/users/YongCHN/events{/privacy}", "received_events_url": "https://api.github.com/users/YongCHN/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-10T01:08:20Z", "updated_at": "2017-08-10T01:08:20Z", "author_association": "NONE", "body_html": "<p>FtrlOptimizer create several const variable such as learning rate, learning rate power, etc, placing at each worker side.</p>\n<p>You can see these information when you enabled the variable placement configuration.</p>\n<pre><code>with sv.managed_session(server.target, config = tf.ConfigProto(log_device_placement=True)) as sess:\n</code></pre>\n<p>Then you will see below information.</p>\n<pre><code>Ftrl/learning_rate_power: (Const): /job:worker/replica:0/task:0/cpu:0\nFtrl/l2_regularization_strength: (Const): /job:worker/replica:0/task:0/cpu:0\nFtrl/l1_regularization_strength: (Const): /job:worker/replica:0/task:0/cpu:0\nFtrl/learning_rate: (Const): /job:worker/replica:0/task:0/cpu:0\n</code></pre>\n<p>Then during each session run, I can see that the request from the each ps asking the read of the above variables. I added several logs in the code.</p>\n<pre><code>3317063:2017-08-10 09:01:01.577890: I tensorflow/core/distributed_runtime/rpc/grpc_worker_service.cc:241] RecvTensorHandlerRaw step_id:127424566250596053  and key:/job:worker/replica:0/task:0/cpu:0;3df08c8c86dccc7c;/job:ps/replica:0/task:3/cpu:0;edge_2045_Ftrl/learning_rate;0:0\n</code></pre>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=11547801\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/prb12\">@prb12</a> I wish I can place these const variables in the ps nodes, but i don't know how. and in the meantime each ps will need these const variables to apply the gradients.</p>", "body_text": "FtrlOptimizer create several const variable such as learning rate, learning rate power, etc, placing at each worker side.\nYou can see these information when you enabled the variable placement configuration.\nwith sv.managed_session(server.target, config = tf.ConfigProto(log_device_placement=True)) as sess:\n\nThen you will see below information.\nFtrl/learning_rate_power: (Const): /job:worker/replica:0/task:0/cpu:0\nFtrl/l2_regularization_strength: (Const): /job:worker/replica:0/task:0/cpu:0\nFtrl/l1_regularization_strength: (Const): /job:worker/replica:0/task:0/cpu:0\nFtrl/learning_rate: (Const): /job:worker/replica:0/task:0/cpu:0\n\nThen during each session run, I can see that the request from the each ps asking the read of the above variables. I added several logs in the code.\n3317063:2017-08-10 09:01:01.577890: I tensorflow/core/distributed_runtime/rpc/grpc_worker_service.cc:241] RecvTensorHandlerRaw step_id:127424566250596053  and key:/job:worker/replica:0/task:0/cpu:0;3df08c8c86dccc7c;/job:ps/replica:0/task:3/cpu:0;edge_2045_Ftrl/learning_rate;0:0\n\n@prb12 I wish I can place these const variables in the ps nodes, but i don't know how. and in the meantime each ps will need these const variables to apply the gradients.", "body": "FtrlOptimizer create several const variable such as learning rate, learning rate power, etc, placing at each worker side.\r\n\r\nYou can see these information when you enabled the variable placement configuration.\r\n```\r\nwith sv.managed_session(server.target, config = tf.ConfigProto(log_device_placement=True)) as sess:\r\n```\r\n\r\nThen you will see below information.\r\n```\r\nFtrl/learning_rate_power: (Const): /job:worker/replica:0/task:0/cpu:0\r\nFtrl/l2_regularization_strength: (Const): /job:worker/replica:0/task:0/cpu:0\r\nFtrl/l1_regularization_strength: (Const): /job:worker/replica:0/task:0/cpu:0\r\nFtrl/learning_rate: (Const): /job:worker/replica:0/task:0/cpu:0\r\n```\r\n\r\nThen during each session run, I can see that the request from the each ps asking the read of the above variables. I added several logs in the code.\r\n```\r\n3317063:2017-08-10 09:01:01.577890: I tensorflow/core/distributed_runtime/rpc/grpc_worker_service.cc:241] RecvTensorHandlerRaw step_id:127424566250596053  and key:/job:worker/replica:0/task:0/cpu:0;3df08c8c86dccc7c;/job:ps/replica:0/task:3/cpu:0;edge_2045_Ftrl/learning_rate;0:0\r\n```\r\n\r\n@prb12 I wish I can place these const variables in the ps nodes, but i don't know how. and in the meantime each ps will need these const variables to apply the gradients. \r\n"}
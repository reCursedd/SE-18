{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/274611682", "html_url": "https://github.com/tensorflow/tensorflow/issues/7013#issuecomment-274611682", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7013", "id": 274611682, "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDYxMTY4Mg==", "user": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-23T20:46:41Z", "updated_at": "2017-01-23T20:46:41Z", "author_association": "MEMBER", "body_html": "<p>I <em>think</em> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23068\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yaroslavvb\">@yaroslavvb</a> is right. From reading the code, it should be coming from <a href=\"http://google3/third_party/tensorflow/core/platform/posix/posix_file_system.cc?l=201\" rel=\"nofollow\">GetChildren</a>, which calls <code>opendir</code>. The only two that could arise in this situation are too many (global/process) open files, or too many links (unlikely unless you have a loop of sorts).</p>\n<p>Could you try to debug? Reboot, reduce the number of threads, insert <code>time.sleep</code>, or trace down descriptor leak. First thing to do would be to put some code in <code>GetChildren</code> to see if that's what you're getting.</p>\n<pre><code>    case ENOSPC:   // No space left on device\n#if !defined(_WIN32)\n    case EDQUOT:   // Disk quota exceeded\n#endif\n    case EMFILE:   // Too many open files\n    case EMLINK:   // Too many links\n    case ENFILE:   // Too many open files in system\n    case ENOBUFS:  // No buffer space available\n    case ENODATA:  // No message is available on the STREAM read queue\n    case ENOMEM:   // Not enough space\n    case ENOSR:    // No STREAM resources\n#if !defined(_WIN32)\n    case EUSERS:   // Too many users\n#endif\n</code></pre>", "body_text": "I think @yaroslavvb is right. From reading the code, it should be coming from GetChildren, which calls opendir. The only two that could arise in this situation are too many (global/process) open files, or too many links (unlikely unless you have a loop of sorts).\nCould you try to debug? Reboot, reduce the number of threads, insert time.sleep, or trace down descriptor leak. First thing to do would be to put some code in GetChildren to see if that's what you're getting.\n    case ENOSPC:   // No space left on device\n#if !defined(_WIN32)\n    case EDQUOT:   // Disk quota exceeded\n#endif\n    case EMFILE:   // Too many open files\n    case EMLINK:   // Too many links\n    case ENFILE:   // Too many open files in system\n    case ENOBUFS:  // No buffer space available\n    case ENODATA:  // No message is available on the STREAM read queue\n    case ENOMEM:   // Not enough space\n    case ENOSR:    // No STREAM resources\n#if !defined(_WIN32)\n    case EUSERS:   // Too many users\n#endif", "body": "I *think* @yaroslavvb is right. From reading the code, it should be coming from [GetChildren](http://google3/third_party/tensorflow/core/platform/posix/posix_file_system.cc?l=201), which calls `opendir`. The only two that could arise in this situation are too many (global/process) open files, or too many links (unlikely unless you have a loop of sorts). \r\n\r\nCould you try to debug? Reboot, reduce the number of threads, insert `time.sleep`, or trace down descriptor leak. First thing to do would be to put some code in `GetChildren` to see if that's what you're getting.\r\n\r\n```\r\n    case ENOSPC:   // No space left on device\r\n#if !defined(_WIN32)\r\n    case EDQUOT:   // Disk quota exceeded\r\n#endif\r\n    case EMFILE:   // Too many open files\r\n    case EMLINK:   // Too many links\r\n    case ENFILE:   // Too many open files in system\r\n    case ENOBUFS:  // No buffer space available\r\n    case ENODATA:  // No message is available on the STREAM read queue\r\n    case ENOMEM:   // Not enough space\r\n    case ENOSR:    // No STREAM resources\r\n#if !defined(_WIN32)\r\n    case EUSERS:   // Too many users\r\n#endif\r\n```"}
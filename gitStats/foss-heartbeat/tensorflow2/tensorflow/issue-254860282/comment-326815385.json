{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/326815385", "html_url": "https://github.com/tensorflow/tensorflow/issues/12776#issuecomment-326815385", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12776", "id": 326815385, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjgxNTM4NQ==", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-03T16:32:56Z", "updated_at": "2017-09-03T16:32:56Z", "author_association": "MEMBER", "body_html": "<p>In <code>tensorflow.contrib.data.python.util</code>,  <code>list</code> is not treated as a sequence:<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/64e54423bbffa4161ba2d85dc913e1973ae52cc6/tensorflow/contrib/data/python/util/nest.py#L103-L110\">tensorflow/tensorflow/contrib/data/python/util/nest.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n        Lines 103 to 110\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/64e54423bbffa4161ba2d85dc913e1973ae52cc6\">64e5442</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L103\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"103\"></td>\n          <td id=\"LC103\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">is_sequence</span>(<span class=\"pl-smi\">seq</span>): </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L104\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"104\"></td>\n          <td id=\"LC104\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span>Returns a true if `seq` is a Sequence or dict (except strings/lists).</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L105\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"105\"></td>\n          <td id=\"LC105\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-s\"></span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L106\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"106\"></td>\n          <td id=\"LC106\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-s\">  <span class=\"pl-k\">NOTE</span>(mrry): This differs from `tensorflow.python.util.nest.is_sequence()`,</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L107\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"107\"></td>\n          <td id=\"LC107\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-s\">  which *does* treat a Python list as a sequence. For ergonomic</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L108\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"108\"></td>\n          <td id=\"LC108\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-s\">  reasons, `tf.contrib.data` users would prefer to treat lists as</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L109\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"109\"></td>\n          <td id=\"LC109\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-s\">  implict `tf.Tensor` objects, and dicts as (nested) sequences.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L110\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"110\"></td>\n          <td id=\"LC110\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-s\"></span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>I don't know enough history about this part though in your sample above I think you could change <code>list</code> to <code>dict</code>, e.g.,</p>\n<pre><code>&gt;&gt;&gt; from tensorflow.contrib.data.python.util import nest\n&gt;&gt;&gt; nest.flatten((1,2,3,4))\n[1, 2, 3, 4]\n&gt;&gt;&gt; \n</code></pre>\n<p>/cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a></p>", "body_text": "In tensorflow.contrib.data.python.util,  list is not treated as a sequence:\n\n  \n    \n      tensorflow/tensorflow/contrib/data/python/util/nest.py\n    \n    \n        Lines 103 to 110\n      in\n      64e5442\n    \n    \n    \n    \n\n        \n          \n           def is_sequence(seq): \n        \n\n        \n          \n             \"\"\"Returns a true if `seq` is a Sequence or dict (except strings/lists). \n        \n\n        \n          \n            \n        \n\n        \n          \n             NOTE(mrry): This differs from `tensorflow.python.util.nest.is_sequence()`, \n        \n\n        \n          \n             which *does* treat a Python list as a sequence. For ergonomic \n        \n\n        \n          \n             reasons, `tf.contrib.data` users would prefer to treat lists as \n        \n\n        \n          \n             implict `tf.Tensor` objects, and dicts as (nested) sequences. \n        \n\n        \n          \n            \n        \n    \n  \n\n\nI don't know enough history about this part though in your sample above I think you could change list to dict, e.g.,\n>>> from tensorflow.contrib.data.python.util import nest\n>>> nest.flatten((1,2,3,4))\n[1, 2, 3, 4]\n>>> \n\n/cc @mrry", "body": "In `tensorflow.contrib.data.python.util`,  `list` is not treated as a sequence:\r\nhttps://github.com/tensorflow/tensorflow/blob/64e54423bbffa4161ba2d85dc913e1973ae52cc6/tensorflow/contrib/data/python/util/nest.py#L103-L110\r\n\r\nI don't know enough history about this part though in your sample above I think you could change `list` to `dict`, e.g., \r\n```\r\n>>> from tensorflow.contrib.data.python.util import nest\r\n>>> nest.flatten((1,2,3,4))\r\n[1, 2, 3, 4]\r\n>>> \r\n```\r\n\r\n/cc @mrry "}
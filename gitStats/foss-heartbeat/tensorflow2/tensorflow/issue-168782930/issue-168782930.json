{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3605", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3605/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3605/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3605/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3605", "id": 168782930, "node_id": "MDU6SXNzdWUxNjg3ODI5MzA=", "number": 3605, "title": "scikit flow - race condition when trying to fit", "user": {"login": "mikecassell", "id": 12225580, "node_id": "MDQ6VXNlcjEyMjI1NTgw", "avatar_url": "https://avatars3.githubusercontent.com/u/12225580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikecassell", "html_url": "https://github.com/mikecassell", "followers_url": "https://api.github.com/users/mikecassell/followers", "following_url": "https://api.github.com/users/mikecassell/following{/other_user}", "gists_url": "https://api.github.com/users/mikecassell/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikecassell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikecassell/subscriptions", "organizations_url": "https://api.github.com/users/mikecassell/orgs", "repos_url": "https://api.github.com/users/mikecassell/repos", "events_url": "https://api.github.com/users/mikecassell/events{/privacy}", "received_events_url": "https://api.github.com/users/mikecassell/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-08-02T02:00:56Z", "updated_at": "2016-08-02T02:28:32Z", "closed_at": "2016-08-02T02:28:32Z", "author_association": "NONE", "body_html": "<p>I'm probably missing something obvious but I did a fresh build tonight and when trying to run the MNIST examples, every time I run them I'm getting the below errors. I have tried a few of the examples and can't seem to get around it (even when updating the depreciated bits still in the examples.) Am I missing something?</p>\n<p>Code:<br>\n`<br>\nfrom <strong>future</strong> import absolute_import<br>\nfrom <strong>future</strong> import division<br>\nfrom <strong>future</strong> import print_function</p>\n<p>from sklearn import metrics<br>\nimport tensorflow as tf<br>\nfrom tensorflow.contrib import learn<br>\nimport numpy as np</p>\n<h3>Download and load MNIST data.</h3>\n<p>mnist = learn.datasets.load_dataset('mnist')<br>\ny = np.array(mnist.train.labels, dtype='int32')</p>\n<h3>Linear classifier.</h3>\n<p>feature_columns = learn.infer_real_valued_columns_from_input(mnist.train.images)<br>\nclassifier = learn.TensorFlowLinearClassifier(<br>\nfeature_columns=feature_columns, n_classes=10, batch_size=100, steps=1000,<br>\nlearning_rate=0.01)<br>\nclassifier.fit(mnist.train.images,y)<br>\nscore = metrics.accuracy_score(<br>\nmnist.test.labels, classifier.predict(mnist.test.images))<br>\nprint('Accuracy: {0:f}'.format(score))<br>\n`</p>\n<p>Error:<br>\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:839] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GT 750M, pci bus id: 0000:07:00.0)<br>\nE tensorflow/c/c_api.cc:485] WhereOp: Race condition between counting the number of true elements and writing them.  When counting, saw 1287 elements; but when writing their indices, saw 7 elements.<br>\n[[Node: report_uninitialized_variables/Where = Where<a href=\"report_uninitialized_variables/Reshape_1\">_device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\n[[Node: report_uninitialized_variables/Where/_28 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_30_report_uninitialized_variables/Where\", tensor_type=DT_INT64, _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]</p>", "body_text": "I'm probably missing something obvious but I did a fresh build tonight and when trying to run the MNIST examples, every time I run them I'm getting the below errors. I have tried a few of the examples and can't seem to get around it (even when updating the depreciated bits still in the examples.) Am I missing something?\nCode:\n`\nfrom future import absolute_import\nfrom future import division\nfrom future import print_function\nfrom sklearn import metrics\nimport tensorflow as tf\nfrom tensorflow.contrib import learn\nimport numpy as np\nDownload and load MNIST data.\nmnist = learn.datasets.load_dataset('mnist')\ny = np.array(mnist.train.labels, dtype='int32')\nLinear classifier.\nfeature_columns = learn.infer_real_valued_columns_from_input(mnist.train.images)\nclassifier = learn.TensorFlowLinearClassifier(\nfeature_columns=feature_columns, n_classes=10, batch_size=100, steps=1000,\nlearning_rate=0.01)\nclassifier.fit(mnist.train.images,y)\nscore = metrics.accuracy_score(\nmnist.test.labels, classifier.predict(mnist.test.images))\nprint('Accuracy: {0:f}'.format(score))\n`\nError:\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:839] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GT 750M, pci bus id: 0000:07:00.0)\nE tensorflow/c/c_api.cc:485] WhereOp: Race condition between counting the number of true elements and writing them.  When counting, saw 1287 elements; but when writing their indices, saw 7 elements.\n[[Node: report_uninitialized_variables/Where = Where_device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\n[[Node: report_uninitialized_variables/Where/_28 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_30_report_uninitialized_variables/Where\", tensor_type=DT_INT64, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]", "body": "I'm probably missing something obvious but I did a fresh build tonight and when trying to run the MNIST examples, every time I run them I'm getting the below errors. I have tried a few of the examples and can't seem to get around it (even when updating the depreciated bits still in the examples.) Am I missing something?\n\nCode:\n`\nfrom **future** import absolute_import\nfrom **future** import division\nfrom **future** import print_function\n\nfrom sklearn import metrics\nimport tensorflow as tf\nfrom tensorflow.contrib import learn\nimport numpy as np\n### Download and load MNIST data.\n\nmnist = learn.datasets.load_dataset('mnist')\ny = np.array(mnist.train.labels, dtype='int32')\n### Linear classifier.\n\nfeature_columns = learn.infer_real_valued_columns_from_input(mnist.train.images)\nclassifier = learn.TensorFlowLinearClassifier(\n    feature_columns=feature_columns, n_classes=10, batch_size=100, steps=1000,\n    learning_rate=0.01)\nclassifier.fit(mnist.train.images,y)\nscore = metrics.accuracy_score(\n    mnist.test.labels, classifier.predict(mnist.test.images))\nprint('Accuracy: {0:f}'.format(score))\n`\n\nError:\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:839] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GT 750M, pci bus id: 0000:07:00.0)\nE tensorflow/c/c_api.cc:485] WhereOp: Race condition between counting the number of true elements and writing them.  When counting, saw 1287 elements; but when writing their indices, saw 7 elements.\n     [[Node: report_uninitialized_variables/Where = Where[_device=\"/job:localhost/replica:0/task:0/cpu:0\"](report_uninitialized_variables/Reshape_1)]]\n     [[Node: report_uninitialized_variables/Where/_28 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_30_report_uninitialized_variables/Where\", tensor_type=DT_INT64, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\n"}
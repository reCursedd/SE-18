{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/318750405", "html_url": "https://github.com/tensorflow/tensorflow/issues/11856#issuecomment-318750405", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11856", "id": 318750405, "node_id": "MDEyOklzc3VlQ29tbWVudDMxODc1MDQwNQ==", "user": {"login": "chihuahua", "id": 4221553, "node_id": "MDQ6VXNlcjQyMjE1NTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4221553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chihuahua", "html_url": "https://github.com/chihuahua", "followers_url": "https://api.github.com/users/chihuahua/followers", "following_url": "https://api.github.com/users/chihuahua/following{/other_user}", "gists_url": "https://api.github.com/users/chihuahua/gists{/gist_id}", "starred_url": "https://api.github.com/users/chihuahua/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chihuahua/subscriptions", "organizations_url": "https://api.github.com/users/chihuahua/orgs", "repos_url": "https://api.github.com/users/chihuahua/repos", "events_url": "https://api.github.com/users/chihuahua/events{/privacy}", "received_events_url": "https://api.github.com/users/chihuahua/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-28T20:09:53Z", "updated_at": "2017-07-28T20:10:28Z", "author_association": "MEMBER", "body_html": "<p>I think I still want a <code>tf.Variable</code> instead of a resource one because the test uses a <code>ScatterAdd</code> op here: <a href=\"https://github.com/tensorflow/tensorboard/blob/02f97383951f57dacb462fb6335f461f32ac7141/tensorboard/plugins/pr_curve/summary.py#L162\">https://github.com/tensorflow/tensorboard/blob/02f97383951f57dacb462fb6335f461f32ac7141/tensorboard/plugins/pr_curve/summary.py#L162</a></p>\n<p>And the scatter add seems to err when passed resource variables:</p>\n<pre><code>Traceback (most recent call last):\n  File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\nry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary_test.py\", line 48, in test1Class\n    num_thresholds=10)\n  File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\nry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary.py\", line 165, in op\n    tp_buckets_v, bucket_indices, true_labels, use_locking=True)\n  File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_state_ops.py\"\n, line 212, in scatter_add\n    name=name)\n  File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\nary.py\", line 328, in apply_op\n    op_type_name, name, **keywords)\n  File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\nary.py\", line 641, in _apply_op_helper\n    \"(e.g.: a tf.Variable)\") % (op_type_name, input_name))\nTypeError: 'ScatterAdd' Op requires that input 'ref' be a mutable tensor (e.g.: a tf.Variable)\n</code></pre>\n<p>Is there a way to include that <code>Variable/read</code> op in the control dependency list? Thank you!</p>", "body_text": "I think I still want a tf.Variable instead of a resource one because the test uses a ScatterAdd op here: https://github.com/tensorflow/tensorboard/blob/02f97383951f57dacb462fb6335f461f32ac7141/tensorboard/plugins/pr_curve/summary.py#L162\nAnd the scatter add seems to err when passed resource variables:\nTraceback (most recent call last):\n  File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\nry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary_test.py\", line 48, in test1Class\n    num_thresholds=10)\n  File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\nry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary.py\", line 165, in op\n    tp_buckets_v, bucket_indices, true_labels, use_locking=True)\n  File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_state_ops.py\"\n, line 212, in scatter_add\n    name=name)\n  File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\nary.py\", line 328, in apply_op\n    op_type_name, name, **keywords)\n  File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\nary.py\", line 641, in _apply_op_helper\n    \"(e.g.: a tf.Variable)\") % (op_type_name, input_name))\nTypeError: 'ScatterAdd' Op requires that input 'ref' be a mutable tensor (e.g.: a tf.Variable)\n\nIs there a way to include that Variable/read op in the control dependency list? Thank you!", "body": "I think I still want a `tf.Variable` instead of a resource one because the test uses a `ScatterAdd` op here: https://github.com/tensorflow/tensorboard/blob/02f97383951f57dacb462fb6335f461f32ac7141/tensorboard/plugins/pr_curve/summary.py#L162\r\n\r\nAnd the scatter add seems to err when passed resource variables:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\r\n677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\r\nry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary_test.py\", line 48, in test1Class\r\n    num_thresholds=10)\r\n  File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\r\n677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\r\nry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary.py\", line 165, in op\r\n    tp_buckets_v, bucket_indices, true_labels, use_locking=True)\r\n  File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_state_ops.py\"\r\n, line 212, in scatter_add\r\n    name=name)\r\n  File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\r\nary.py\", line 328, in apply_op\r\n    op_type_name, name, **keywords)\r\n  File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\r\nary.py\", line 641, in _apply_op_helper\r\n    \"(e.g.: a tf.Variable)\") % (op_type_name, input_name))\r\nTypeError: 'ScatterAdd' Op requires that input 'ref' be a mutable tensor (e.g.: a tf.Variable)\r\n```\r\n\r\nIs there a way to include that `Variable/read` op in the control dependency list? Thank you!"}
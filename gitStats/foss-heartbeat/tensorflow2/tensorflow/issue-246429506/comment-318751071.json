{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/318751071", "html_url": "https://github.com/tensorflow/tensorflow/issues/11856#issuecomment-318751071", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11856", "id": 318751071, "node_id": "MDEyOklzc3VlQ29tbWVudDMxODc1MTA3MQ==", "user": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-28T20:13:16Z", "updated_at": "2017-07-28T20:13:16Z", "author_association": "MEMBER", "body_html": "<div class=\"email-fragment\">There's a resource_scatter_add op which can be used instead.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Fri, Jul 28, 2017 at 1:11 PM, Chi Zeng ***@***.***&gt; wrote:\n I think I still want to use a tf.Variable instead of a resource one\n because the test uses a ScatterAdd op here: <a href=\"https://github.com/tensorflow/\">https://github.com/tensorflow/</a>\n tensorboard/blob/02f97383951f57dacb462fb6335f461f32ac7141/tensorboard/\n plugins/pr_curve/summary.py#L162\n\n And the scatter add seems to err when passed resource variables:\n\n Traceback (most recent call last):\n   File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n 677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\n ry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary_test.py\", line 48, in test1Class\n     num_thresholds=10)\n   File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n 677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\n ry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary.py\", line 165, in op\n     tp_buckets_v, bucket_indices, true_labels, use_locking=True)\n   File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_state_ops.py\"\n , line 212, in scatter_add\n     name=name)\n   File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\n ary.py\", line 328, in apply_op\n     op_type_name, name, **keywords)\n   File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\n ary.py\", line 641, in _apply_op_helper\n     \"(e.g.: a tf.Variable)\") % (op_type_name, input_name))\n TypeError: 'ScatterAdd' Op requires that input 'ref' be a mutable tensor (e.g.: a tf.Variable)\n\n Is there a way to include that Variable/read op in the control dependency\n list? Thank you!\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"246429506\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/11856\" href=\"https://github.com/tensorflow/tensorflow/issues/11856#issuecomment-318750405\">#11856 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AAATxaWsTbZ1nJ27MWGHaXpFmphdCPM8ks5sSkB-gaJpZM4Om9Cy\">https://github.com/notifications/unsubscribe-auth/AAATxaWsTbZ1nJ27MWGHaXpFmphdCPM8ks5sSkB-gaJpZM4Om9Cy</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n<div class=\"email-signature-reply\">-- \n - Alex</div>\n</div>", "body_text": "There's a resource_scatter_add op which can be used instead.\n\u2026\nOn Fri, Jul 28, 2017 at 1:11 PM, Chi Zeng ***@***.***> wrote:\n I think I still want to use a tf.Variable instead of a resource one\n because the test uses a ScatterAdd op here: https://github.com/tensorflow/\n tensorboard/blob/02f97383951f57dacb462fb6335f461f32ac7141/tensorboard/\n plugins/pr_curve/summary.py#L162\n\n And the scatter add seems to err when passed resource variables:\n\n Traceback (most recent call last):\n   File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n 677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\n ry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary_test.py\", line 48, in test1Class\n     num_thresholds=10)\n   File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n 677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\n ry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary.py\", line 165, in op\n     tp_buckets_v, bucket_indices, true_labels, use_locking=True)\n   File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_state_ops.py\"\n , line 212, in scatter_add\n     name=name)\n   File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\n ary.py\", line 328, in apply_op\n     op_type_name, name, **keywords)\n   File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\n ary.py\", line 641, in _apply_op_helper\n     \"(e.g.: a tf.Variable)\") % (op_type_name, input_name))\n TypeError: 'ScatterAdd' Op requires that input 'ref' be a mutable tensor (e.g.: a tf.Variable)\n\n Is there a way to include that Variable/read op in the control dependency\n list? Thank you!\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#11856 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/AAATxaWsTbZ1nJ27MWGHaXpFmphdCPM8ks5sSkB-gaJpZM4Om9Cy>\n .\n\n\n-- \n - Alex", "body": "There's a resource_scatter_add op which can be used instead.\n\nOn Fri, Jul 28, 2017 at 1:11 PM, Chi Zeng <notifications@github.com> wrote:\n\n> I think I still want to use a tf.Variable instead of a resource one\n> because the test uses a ScatterAdd op here: https://github.com/tensorflow/\n> tensorboard/blob/02f97383951f57dacb462fb6335f461f32ac7141/tensorboard/\n> plugins/pr_curve/summary.py#L162\n>\n> And the scatter add seems to err when passed resource variables:\n>\n> Traceback (most recent call last):\n>   File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n> 677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\n> ry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary_test.py\", line 48, in test1Class\n>     num_thresholds=10)\n>   File \"/usr/home/agent007/.cache/bazel/_bazel_agent007/e5cf4ac2d3d80f539d85c4d9419a6bd7/bazel-sandbox/68\n> 677344569147791/execroot/org_tensorflow_tensorboard/bazel-out/local-fastbuild/bin/tensorboard/plugins/pr_curve/summa\n> ry_test.runfiles/org_tensorflow_tensorboard/tensorboard/plugins/pr_curve/summary.py\", line 165, in op\n>     tp_buckets_v, bucket_indices, true_labels, use_locking=True)\n>   File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_state_ops.py\"\n> , line 212, in scatter_add\n>     name=name)\n>   File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\n> ary.py\", line 328, in apply_op\n>     op_type_name, name, **keywords)\n>   File \"/usr/home/agent007/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_libr\n> ary.py\", line 641, in _apply_op_helper\n>     \"(e.g.: a tf.Variable)\") % (op_type_name, input_name))\n> TypeError: 'ScatterAdd' Op requires that input 'ref' be a mutable tensor (e.g.: a tf.Variable)\n>\n> Is there a way to include that Variable/read op in the control dependency\n> list? Thank you!\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/11856#issuecomment-318750405>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAATxaWsTbZ1nJ27MWGHaXpFmphdCPM8ks5sSkB-gaJpZM4Om9Cy>\n> .\n>\n\n\n\n-- \n - Alex\n"}
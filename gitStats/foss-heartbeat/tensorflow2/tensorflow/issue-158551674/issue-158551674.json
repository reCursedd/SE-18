{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2669", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2669/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2669/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2669/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2669", "id": 158551674, "node_id": "MDU6SXNzdWUxNTg1NTE2NzQ=", "number": 2669, "title": "image_retraining example is extremely slow when cropping/rotating", "user": {"login": "kuza55", "id": 387986, "node_id": "MDQ6VXNlcjM4Nzk4Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/387986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kuza55", "html_url": "https://github.com/kuza55", "followers_url": "https://api.github.com/users/kuza55/followers", "following_url": "https://api.github.com/users/kuza55/following{/other_user}", "gists_url": "https://api.github.com/users/kuza55/gists{/gist_id}", "starred_url": "https://api.github.com/users/kuza55/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kuza55/subscriptions", "organizations_url": "https://api.github.com/users/kuza55/orgs", "repos_url": "https://api.github.com/users/kuza55/repos", "events_url": "https://api.github.com/users/kuza55/events{/privacy}", "received_events_url": "https://api.github.com/users/kuza55/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2016-06-05T12:16:59Z", "updated_at": "2016-09-10T05:38:41Z", "closed_at": "2016-06-07T21:22:37Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04</p>\n<p>Installed version of CUDA and cuDNN: CUDA 7.5, cuDNN 4<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<p>$ ls -l /usr/local/cuda/lib64/<br>\ntotal 987720<br>\n-rw-r--r-- 1 root root  28585480 Aug 15  2015 libcublas_device.a<br>\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcublas.so -&gt; libcublas.so.7.5<br>\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcublas.so.7.5 -&gt; libcublas.so.7.5.18<br>\n-rwxr-xr-x 1 root root  23938736 Aug 15  2015 libcublas.so.7.5.18<br>\n-rw-r--r-- 1 root root  28220076 Aug 15  2015 libcublas_static.a<br>\n-rw-r--r-- 1 root root    322936 Aug 15  2015 libcudadevrt.a<br>\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcudart.so -&gt; libcudart.so.7.5<br>\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcudart.so.7.5 -&gt; libcudart.so.7.5.18<br>\n-rwxr-xr-x 1 root root    383336 Aug 15  2015 libcudart.so.7.5.18<br>\n-rw-r--r-- 1 root root    720192 Aug 15  2015 libcudart_static.a<br>\n-rwxr-xr-x 1 root root  61453024 Jun  3 17:11 libcudnn.so<br>\n-rwxr-xr-x 1 root root  61453024 Jun  3 17:11 libcudnn.so.4<br>\n-rwxr-xr-x 1 root root  61453024 Jun  3 17:11 libcudnn.so.4.0.7<br>\n-rw-r--r-- 1 root root  62025862 Jun  3 17:11 libcudnn_static.a<br>\nlrwxrwxrwx 1 root root        15 Aug 15  2015 libcufft.so -&gt; libcufft.so.7.5<br>\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libcufft.so.7.5 -&gt; libcufft.so.7.5.18<br>\n-rwxr-xr-x 1 root root 111231960 Aug 15  2015 libcufft.so.7.5.18<br>\n-rw-r--r-- 1 root root 115104400 Aug 15  2015 libcufft_static.a<br>\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcufftw.so -&gt; libcufftw.so.7.5<br>\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcufftw.so.7.5 -&gt; libcufftw.so.7.5.18<br>\n-rwxr-xr-x 1 root root    447664 Aug 15  2015 libcufftw.so.7.5.18<br>\n-rw-r--r-- 1 root root     42206 Aug 15  2015 libcufftw_static.a<br>\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libcuinj64.so -&gt; libcuinj64.so.7.5<br>\nlrwxrwxrwx 1 root root        20 Aug 15  2015 libcuinj64.so.7.5 -&gt; libcuinj64.so.7.5.18<br>\n-rwxr-xr-x 1 root root   5751400 Aug 15  2015 libcuinj64.so.7.5.18<br>\n-rw-r--r-- 1 root root   1649726 Aug 15  2015 libculibos.a<br>\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcurand.so -&gt; libcurand.so.7.5<br>\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcurand.so.7.5 -&gt; libcurand.so.7.5.18<br>\n-rwxr-xr-x 1 root root  51765952 Aug 15  2015 libcurand.so.7.5.18<br>\n-rw-r--r-- 1 root root  51992564 Aug 15  2015 libcurand_static.a<br>\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libcusolver.so -&gt; libcusolver.so.7.5<br>\nlrwxrwxrwx 1 root root        21 Aug 15  2015 libcusolver.so.7.5 -&gt; libcusolver.so.7.5.18<br>\n-rwxr-xr-x 1 root root  37034328 Aug 15  2015 libcusolver.so.7.5.18<br>\n-rw-r--r-- 1 root root  16613348 Aug 15  2015 libcusolver_static.a<br>\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libcusparse.so -&gt; libcusparse.so.7.5<br>\nlrwxrwxrwx 1 root root        21 Aug 15  2015 libcusparse.so.7.5 -&gt; libcusparse.so.7.5.18<br>\n-rwxr-xr-x 1 root root  36816424 Aug 15  2015 libcusparse.so.7.5.18<br>\n-rw-r--r-- 1 root root  44445334 Aug 15  2015 libcusparse_static.a<br>\nlrwxrwxrwx 1 root root        14 Aug 15  2015 libnppc.so -&gt; libnppc.so.7.5<br>\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libnppc.so.7.5 -&gt; libnppc.so.7.5.18<br>\n-rwxr-xr-x 1 root root    427168 Aug 15  2015 libnppc.so.7.5.18<br>\n-rw-r--r-- 1 root root     20664 Aug 15  2015 libnppc_static.a<br>\nlrwxrwxrwx 1 root root        14 Aug 15  2015 libnppi.so -&gt; libnppi.so.7.5<br>\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libnppi.so.7.5 -&gt; libnppi.so.7.5.18<br>\n-rwxr-xr-x 1 root root  63516808 Aug 15  2015 libnppi.so.7.5.18<br>\n-rw-r--r-- 1 root root  90106200 Aug 15  2015 libnppi_static.a<br>\nlrwxrwxrwx 1 root root        14 Aug 15  2015 libnpps.so -&gt; libnpps.so.7.5<br>\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libnpps.so.7.5 -&gt; libnpps.so.7.5.18<br>\n-rwxr-xr-x 1 root root   6047400 Aug 15  2015 libnpps.so.7.5.18<br>\n-rw-r--r-- 1 root root   8647292 Aug 15  2015 libnpps_static.a<br>\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libnvblas.so -&gt; libnvblas.so.7.5<br>\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libnvblas.so.7.5 -&gt; libnvblas.so.7.5.18<br>\n-rwxr-xr-x 1 root root    456112 Aug 15  2015 libnvblas.so.7.5.18<br>\nlrwxrwxrwx 1 root root        24 Aug 15  2015 libnvrtc-builtins.so -&gt; libnvrtc-builtins.so.7.5<br>\nlrwxrwxrwx 1 root root        27 Aug 15  2015 libnvrtc-builtins.so.7.5 -&gt; libnvrtc-builtins.so.7.5.18<br>\n-rwxr-xr-x 1 root root  22408512 Aug 15  2015 libnvrtc-builtins.so.7.5.18<br>\nlrwxrwxrwx 1 root root        15 Aug 15  2015 libnvrtc.so -&gt; libnvrtc.so.7.5<br>\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libnvrtc.so.7.5 -&gt; libnvrtc.so.7.5.17<br>\n-rwxr-xr-x 1 root root  18199288 Aug 15  2015 libnvrtc.so.7.5.17<br>\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libnvToolsExt.so -&gt; libnvToolsExt.so.1<br>\nlrwxrwxrwx 1 root root        22 Aug 15  2015 libnvToolsExt.so.1 -&gt; libnvToolsExt.so.1.0.0<br>\n-rwxr-xr-x 1 root root     37936 Aug 15  2015 libnvToolsExt.so.1.0.0<br>\n-rw-r--r-- 1 root root     25840 Aug 15  2015 libOpenCL.so<br>\ndrwxr-xr-x 2 root root      4096 Jun  3 13:47 stubs</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>Which pip package you installed. Linux x64 w/ GPU support</li>\n<li>The output from python -c \"import tensorflow; print(tensorflow.<strong>version</strong>)\".</li>\n</ol>\n<p>0.8.0</p>\n<h3>Steps to reproduce</h3>\n<p>I've been running the image_retrain example from Jupyter like so:</p>\n<p>FLAGS._parse_flags()<br>\nFLAGS.image_dir = '/data/corpus'<br>\nFLAGS.output_graph = '/data/output_graph4.pb'<br>\nFLAGS.output_labels = '/data/output_labels4.txt'<br>\nFLAGS.bottleneck_dir = '/data/bottleneck/'<br>\nFLAGS.model_dir = '/data/imagenet/'</p>\n<h1>FLAGS.flip_left_right = True</h1>\n<p>FLAGS.random_crop = 5<br>\nFLAGS.random_scale = 5<br>\nFLAGS.random_brightness = 5</p>\n<p>main('')</p>\n<p>When I run it without any of the crop/scale options, it runs pretty quickly on my AWS instance; creating the bottlneck images takes under an hour and the training takes minutes for 4k steps.</p>\n<p>When I specify those flags, it took on the order of 13 hours to complete when I had ~9k images.</p>\n<p>Obviously it has to do more work, but needing to do more than 13x the work to transform 15% of my images seems wrong.</p>", "body_text": "Environment info\nOperating System: Ubuntu 14.04\nInstalled version of CUDA and cuDNN: CUDA 7.5, cuDNN 4\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n$ ls -l /usr/local/cuda/lib64/\ntotal 987720\n-rw-r--r-- 1 root root  28585480 Aug 15  2015 libcublas_device.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcublas.so -> libcublas.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcublas.so.7.5 -> libcublas.so.7.5.18\n-rwxr-xr-x 1 root root  23938736 Aug 15  2015 libcublas.so.7.5.18\n-rw-r--r-- 1 root root  28220076 Aug 15  2015 libcublas_static.a\n-rw-r--r-- 1 root root    322936 Aug 15  2015 libcudadevrt.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root    383336 Aug 15  2015 libcudart.so.7.5.18\n-rw-r--r-- 1 root root    720192 Aug 15  2015 libcudart_static.a\n-rwxr-xr-x 1 root root  61453024 Jun  3 17:11 libcudnn.so\n-rwxr-xr-x 1 root root  61453024 Jun  3 17:11 libcudnn.so.4\n-rwxr-xr-x 1 root root  61453024 Jun  3 17:11 libcudnn.so.4.0.7\n-rw-r--r-- 1 root root  62025862 Jun  3 17:11 libcudnn_static.a\nlrwxrwxrwx 1 root root        15 Aug 15  2015 libcufft.so -> libcufft.so.7.5\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libcufft.so.7.5 -> libcufft.so.7.5.18\n-rwxr-xr-x 1 root root 111231960 Aug 15  2015 libcufft.so.7.5.18\n-rw-r--r-- 1 root root 115104400 Aug 15  2015 libcufft_static.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcufftw.so -> libcufftw.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcufftw.so.7.5 -> libcufftw.so.7.5.18\n-rwxr-xr-x 1 root root    447664 Aug 15  2015 libcufftw.so.7.5.18\n-rw-r--r-- 1 root root     42206 Aug 15  2015 libcufftw_static.a\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libcuinj64.so -> libcuinj64.so.7.5\nlrwxrwxrwx 1 root root        20 Aug 15  2015 libcuinj64.so.7.5 -> libcuinj64.so.7.5.18\n-rwxr-xr-x 1 root root   5751400 Aug 15  2015 libcuinj64.so.7.5.18\n-rw-r--r-- 1 root root   1649726 Aug 15  2015 libculibos.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcurand.so -> libcurand.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcurand.so.7.5 -> libcurand.so.7.5.18\n-rwxr-xr-x 1 root root  51765952 Aug 15  2015 libcurand.so.7.5.18\n-rw-r--r-- 1 root root  51992564 Aug 15  2015 libcurand_static.a\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libcusolver.so -> libcusolver.so.7.5\nlrwxrwxrwx 1 root root        21 Aug 15  2015 libcusolver.so.7.5 -> libcusolver.so.7.5.18\n-rwxr-xr-x 1 root root  37034328 Aug 15  2015 libcusolver.so.7.5.18\n-rw-r--r-- 1 root root  16613348 Aug 15  2015 libcusolver_static.a\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libcusparse.so -> libcusparse.so.7.5\nlrwxrwxrwx 1 root root        21 Aug 15  2015 libcusparse.so.7.5 -> libcusparse.so.7.5.18\n-rwxr-xr-x 1 root root  36816424 Aug 15  2015 libcusparse.so.7.5.18\n-rw-r--r-- 1 root root  44445334 Aug 15  2015 libcusparse_static.a\nlrwxrwxrwx 1 root root        14 Aug 15  2015 libnppc.so -> libnppc.so.7.5\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libnppc.so.7.5 -> libnppc.so.7.5.18\n-rwxr-xr-x 1 root root    427168 Aug 15  2015 libnppc.so.7.5.18\n-rw-r--r-- 1 root root     20664 Aug 15  2015 libnppc_static.a\nlrwxrwxrwx 1 root root        14 Aug 15  2015 libnppi.so -> libnppi.so.7.5\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libnppi.so.7.5 -> libnppi.so.7.5.18\n-rwxr-xr-x 1 root root  63516808 Aug 15  2015 libnppi.so.7.5.18\n-rw-r--r-- 1 root root  90106200 Aug 15  2015 libnppi_static.a\nlrwxrwxrwx 1 root root        14 Aug 15  2015 libnpps.so -> libnpps.so.7.5\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libnpps.so.7.5 -> libnpps.so.7.5.18\n-rwxr-xr-x 1 root root   6047400 Aug 15  2015 libnpps.so.7.5.18\n-rw-r--r-- 1 root root   8647292 Aug 15  2015 libnpps_static.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libnvblas.so -> libnvblas.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libnvblas.so.7.5 -> libnvblas.so.7.5.18\n-rwxr-xr-x 1 root root    456112 Aug 15  2015 libnvblas.so.7.5.18\nlrwxrwxrwx 1 root root        24 Aug 15  2015 libnvrtc-builtins.so -> libnvrtc-builtins.so.7.5\nlrwxrwxrwx 1 root root        27 Aug 15  2015 libnvrtc-builtins.so.7.5 -> libnvrtc-builtins.so.7.5.18\n-rwxr-xr-x 1 root root  22408512 Aug 15  2015 libnvrtc-builtins.so.7.5.18\nlrwxrwxrwx 1 root root        15 Aug 15  2015 libnvrtc.so -> libnvrtc.so.7.5\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libnvrtc.so.7.5 -> libnvrtc.so.7.5.17\n-rwxr-xr-x 1 root root  18199288 Aug 15  2015 libnvrtc.so.7.5.17\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libnvToolsExt.so -> libnvToolsExt.so.1\nlrwxrwxrwx 1 root root        22 Aug 15  2015 libnvToolsExt.so.1 -> libnvToolsExt.so.1.0.0\n-rwxr-xr-x 1 root root     37936 Aug 15  2015 libnvToolsExt.so.1.0.0\n-rw-r--r-- 1 root root     25840 Aug 15  2015 libOpenCL.so\ndrwxr-xr-x 2 root root      4096 Jun  3 13:47 stubs\nIf installed from binary pip package, provide:\n\nWhich pip package you installed. Linux x64 w/ GPU support\nThe output from python -c \"import tensorflow; print(tensorflow.version)\".\n\n0.8.0\nSteps to reproduce\nI've been running the image_retrain example from Jupyter like so:\nFLAGS._parse_flags()\nFLAGS.image_dir = '/data/corpus'\nFLAGS.output_graph = '/data/output_graph4.pb'\nFLAGS.output_labels = '/data/output_labels4.txt'\nFLAGS.bottleneck_dir = '/data/bottleneck/'\nFLAGS.model_dir = '/data/imagenet/'\nFLAGS.flip_left_right = True\nFLAGS.random_crop = 5\nFLAGS.random_scale = 5\nFLAGS.random_brightness = 5\nmain('')\nWhen I run it without any of the crop/scale options, it runs pretty quickly on my AWS instance; creating the bottlneck images takes under an hour and the training takes minutes for 4k steps.\nWhen I specify those flags, it took on the order of 13 hours to complete when I had ~9k images.\nObviously it has to do more work, but needing to do more than 13x the work to transform 15% of my images seems wrong.", "body": "### Environment info\n\nOperating System: Ubuntu 14.04\n\nInstalled version of CUDA and cuDNN: CUDA 7.5, cuDNN 4\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n$ ls -l /usr/local/cuda/lib64/\ntotal 987720\n-rw-r--r-- 1 root root  28585480 Aug 15  2015 libcublas_device.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcublas.so -> libcublas.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcublas.so.7.5 -> libcublas.so.7.5.18\n-rwxr-xr-x 1 root root  23938736 Aug 15  2015 libcublas.so.7.5.18\n-rw-r--r-- 1 root root  28220076 Aug 15  2015 libcublas_static.a\n-rw-r--r-- 1 root root    322936 Aug 15  2015 libcudadevrt.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root    383336 Aug 15  2015 libcudart.so.7.5.18\n-rw-r--r-- 1 root root    720192 Aug 15  2015 libcudart_static.a\n-rwxr-xr-x 1 root root  61453024 Jun  3 17:11 libcudnn.so\n-rwxr-xr-x 1 root root  61453024 Jun  3 17:11 libcudnn.so.4\n-rwxr-xr-x 1 root root  61453024 Jun  3 17:11 libcudnn.so.4.0.7\n-rw-r--r-- 1 root root  62025862 Jun  3 17:11 libcudnn_static.a\nlrwxrwxrwx 1 root root        15 Aug 15  2015 libcufft.so -> libcufft.so.7.5\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libcufft.so.7.5 -> libcufft.so.7.5.18\n-rwxr-xr-x 1 root root 111231960 Aug 15  2015 libcufft.so.7.5.18\n-rw-r--r-- 1 root root 115104400 Aug 15  2015 libcufft_static.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcufftw.so -> libcufftw.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcufftw.so.7.5 -> libcufftw.so.7.5.18\n-rwxr-xr-x 1 root root    447664 Aug 15  2015 libcufftw.so.7.5.18\n-rw-r--r-- 1 root root     42206 Aug 15  2015 libcufftw_static.a\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libcuinj64.so -> libcuinj64.so.7.5\nlrwxrwxrwx 1 root root        20 Aug 15  2015 libcuinj64.so.7.5 -> libcuinj64.so.7.5.18\n-rwxr-xr-x 1 root root   5751400 Aug 15  2015 libcuinj64.so.7.5.18\n-rw-r--r-- 1 root root   1649726 Aug 15  2015 libculibos.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libcurand.so -> libcurand.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libcurand.so.7.5 -> libcurand.so.7.5.18\n-rwxr-xr-x 1 root root  51765952 Aug 15  2015 libcurand.so.7.5.18\n-rw-r--r-- 1 root root  51992564 Aug 15  2015 libcurand_static.a\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libcusolver.so -> libcusolver.so.7.5\nlrwxrwxrwx 1 root root        21 Aug 15  2015 libcusolver.so.7.5 -> libcusolver.so.7.5.18\n-rwxr-xr-x 1 root root  37034328 Aug 15  2015 libcusolver.so.7.5.18\n-rw-r--r-- 1 root root  16613348 Aug 15  2015 libcusolver_static.a\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libcusparse.so -> libcusparse.so.7.5\nlrwxrwxrwx 1 root root        21 Aug 15  2015 libcusparse.so.7.5 -> libcusparse.so.7.5.18\n-rwxr-xr-x 1 root root  36816424 Aug 15  2015 libcusparse.so.7.5.18\n-rw-r--r-- 1 root root  44445334 Aug 15  2015 libcusparse_static.a\nlrwxrwxrwx 1 root root        14 Aug 15  2015 libnppc.so -> libnppc.so.7.5\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libnppc.so.7.5 -> libnppc.so.7.5.18\n-rwxr-xr-x 1 root root    427168 Aug 15  2015 libnppc.so.7.5.18\n-rw-r--r-- 1 root root     20664 Aug 15  2015 libnppc_static.a\nlrwxrwxrwx 1 root root        14 Aug 15  2015 libnppi.so -> libnppi.so.7.5\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libnppi.so.7.5 -> libnppi.so.7.5.18\n-rwxr-xr-x 1 root root  63516808 Aug 15  2015 libnppi.so.7.5.18\n-rw-r--r-- 1 root root  90106200 Aug 15  2015 libnppi_static.a\nlrwxrwxrwx 1 root root        14 Aug 15  2015 libnpps.so -> libnpps.so.7.5\nlrwxrwxrwx 1 root root        17 Aug 15  2015 libnpps.so.7.5 -> libnpps.so.7.5.18\n-rwxr-xr-x 1 root root   6047400 Aug 15  2015 libnpps.so.7.5.18\n-rw-r--r-- 1 root root   8647292 Aug 15  2015 libnpps_static.a\nlrwxrwxrwx 1 root root        16 Aug 15  2015 libnvblas.so -> libnvblas.so.7.5\nlrwxrwxrwx 1 root root        19 Aug 15  2015 libnvblas.so.7.5 -> libnvblas.so.7.5.18\n-rwxr-xr-x 1 root root    456112 Aug 15  2015 libnvblas.so.7.5.18\nlrwxrwxrwx 1 root root        24 Aug 15  2015 libnvrtc-builtins.so -> libnvrtc-builtins.so.7.5\nlrwxrwxrwx 1 root root        27 Aug 15  2015 libnvrtc-builtins.so.7.5 -> libnvrtc-builtins.so.7.5.18\n-rwxr-xr-x 1 root root  22408512 Aug 15  2015 libnvrtc-builtins.so.7.5.18\nlrwxrwxrwx 1 root root        15 Aug 15  2015 libnvrtc.so -> libnvrtc.so.7.5\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libnvrtc.so.7.5 -> libnvrtc.so.7.5.17\n-rwxr-xr-x 1 root root  18199288 Aug 15  2015 libnvrtc.so.7.5.17\nlrwxrwxrwx 1 root root        18 Aug 15  2015 libnvToolsExt.so -> libnvToolsExt.so.1\nlrwxrwxrwx 1 root root        22 Aug 15  2015 libnvToolsExt.so.1 -> libnvToolsExt.so.1.0.0\n-rwxr-xr-x 1 root root     37936 Aug 15  2015 libnvToolsExt.so.1.0.0\n-rw-r--r-- 1 root root     25840 Aug 15  2015 libOpenCL.so\ndrwxr-xr-x 2 root root      4096 Jun  3 13:47 stubs\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed. Linux x64 w/ GPU support\n2. The output from python -c \"import tensorflow; print(tensorflow.**version**)\".\n\n0.8.0\n### Steps to reproduce\n\nI've been running the image_retrain example from Jupyter like so:\n\nFLAGS._parse_flags()\nFLAGS.image_dir = '/data/corpus'\nFLAGS.output_graph = '/data/output_graph4.pb'\nFLAGS.output_labels = '/data/output_labels4.txt'\nFLAGS.bottleneck_dir = '/data/bottleneck/'\nFLAGS.model_dir = '/data/imagenet/'\n# FLAGS.flip_left_right = True\n\nFLAGS.random_crop = 5\nFLAGS.random_scale = 5\nFLAGS.random_brightness = 5\n\nmain('')\n\nWhen I run it without any of the crop/scale options, it runs pretty quickly on my AWS instance; creating the bottlneck images takes under an hour and the training takes minutes for 4k steps.\n\nWhen I specify those flags, it took on the order of 13 hours to complete when I had ~9k images.\n\nObviously it has to do more work, but needing to do more than 13x the work to transform 15% of my images seems wrong.\n"}
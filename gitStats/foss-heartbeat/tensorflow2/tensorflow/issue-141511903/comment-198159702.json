{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/198159702", "html_url": "https://github.com/tensorflow/tensorflow/issues/1532#issuecomment-198159702", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1532", "id": 198159702, "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODE1OTcwMg==", "user": {"login": "MisayaZ", "id": 16910475, "node_id": "MDQ6VXNlcjE2OTEwNDc1", "avatar_url": "https://avatars2.githubusercontent.com/u/16910475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MisayaZ", "html_url": "https://github.com/MisayaZ", "followers_url": "https://api.github.com/users/MisayaZ/followers", "following_url": "https://api.github.com/users/MisayaZ/following{/other_user}", "gists_url": "https://api.github.com/users/MisayaZ/gists{/gist_id}", "starred_url": "https://api.github.com/users/MisayaZ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MisayaZ/subscriptions", "organizations_url": "https://api.github.com/users/MisayaZ/orgs", "repos_url": "https://api.github.com/users/MisayaZ/repos", "events_url": "https://api.github.com/users/MisayaZ/events{/privacy}", "received_events_url": "https://api.github.com/users/MisayaZ/received_events", "type": "User", "site_admin": false}, "created_at": "2016-03-18T01:47:15Z", "updated_at": "2016-03-18T01:47:15Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a>  I think It makes sense, thank you.<br>\nI also got another problem, the first code is as below:<br>\n`with tf.device('/gpu:0'):<br>\nlocal3_value = np.load(\"local3.npy\")<br>\nweights4 = np.load(\"weights4.npy\")<br>\nbiases4 = np.load(\"biases4.npy\")<br>\nweights3 = np.load(\"weights4.npy\")<br>\nbiases3 = np.load(\"biases4.npy\")<br>\nwith tf.variable_scope('local3') as scope:<br>\nlocal3 = tf.matmul(local3_value, weights3)<br>\nwith tf.variable_scope('local4') as scope:<br>\nlocal4 = tf.nn.relu(tf.matmul(local3_value, weights4)+biases4, name = scope.name)</p>\n<pre><code>with tf.Session(config=tf.ConfigProto(log_device_placement=True))as sess:\n    sess.run(local3)\n    start_time  = time.time()\n    predictions = sess.run(local4)\n    duration = time.time() - start_time\n    print(duration)`\n</code></pre>\n<p>The duration is 0.244572162628</p>\n<p>The second code is as below:<br>\n`with tf.device('/gpu:0'):<br>\nlocal3_value = np.load(\"local3.npy\")<br>\nweights4 = np.load(\"weights4.npy\")<br>\nbiases4 = np.load(\"biases4.npy\")<br>\nweights3 = np.load(\"weights4.npy\")<br>\nbiases3 = np.load(\"biases4.npy\")<br>\nwith tf.variable_scope('local3') as scope:<br>\nlocal3 = tf.nn.softplus(weights3)<br>\nwith tf.variable_scope('local4') as scope:<br>\nlocal4 = tf.nn.relu(tf.matmul(local3_value, weights4)+biases4, name = scope.name)</p>\n<pre><code>with tf.Session(config=tf.ConfigProto(log_device_placement=True))as sess:\n    sess.run(local3)\n    start_time  = time.time()\n    predictions = sess.run(local4)\n    duration = time.time() - start_time\n    print(duration)`\n</code></pre>\n<p>The duration is 0.0679910182953</p>\n<p>The only difference between these two codes is the local3 layer. Why the graph of local3 affects the cost of graph of loca4? These two graphs do not have any relationship.</p>", "body_text": "@mrry  I think It makes sense, thank you.\nI also got another problem, the first code is as below:\n`with tf.device('/gpu:0'):\nlocal3_value = np.load(\"local3.npy\")\nweights4 = np.load(\"weights4.npy\")\nbiases4 = np.load(\"biases4.npy\")\nweights3 = np.load(\"weights4.npy\")\nbiases3 = np.load(\"biases4.npy\")\nwith tf.variable_scope('local3') as scope:\nlocal3 = tf.matmul(local3_value, weights3)\nwith tf.variable_scope('local4') as scope:\nlocal4 = tf.nn.relu(tf.matmul(local3_value, weights4)+biases4, name = scope.name)\nwith tf.Session(config=tf.ConfigProto(log_device_placement=True))as sess:\n    sess.run(local3)\n    start_time  = time.time()\n    predictions = sess.run(local4)\n    duration = time.time() - start_time\n    print(duration)`\n\nThe duration is 0.244572162628\nThe second code is as below:\n`with tf.device('/gpu:0'):\nlocal3_value = np.load(\"local3.npy\")\nweights4 = np.load(\"weights4.npy\")\nbiases4 = np.load(\"biases4.npy\")\nweights3 = np.load(\"weights4.npy\")\nbiases3 = np.load(\"biases4.npy\")\nwith tf.variable_scope('local3') as scope:\nlocal3 = tf.nn.softplus(weights3)\nwith tf.variable_scope('local4') as scope:\nlocal4 = tf.nn.relu(tf.matmul(local3_value, weights4)+biases4, name = scope.name)\nwith tf.Session(config=tf.ConfigProto(log_device_placement=True))as sess:\n    sess.run(local3)\n    start_time  = time.time()\n    predictions = sess.run(local4)\n    duration = time.time() - start_time\n    print(duration)`\n\nThe duration is 0.0679910182953\nThe only difference between these two codes is the local3 layer. Why the graph of local3 affects the cost of graph of loca4? These two graphs do not have any relationship.", "body": "@mrry  I think It makes sense, thank you.\nI also got another problem, the first code is as below:\n`with tf.device('/gpu:0'):\n    local3_value = np.load(\"local3.npy\")\n    weights4 = np.load(\"weights4.npy\")\n    biases4 = np.load(\"biases4.npy\")\n    weights3 = np.load(\"weights4.npy\")\n    biases3 = np.load(\"biases4.npy\")\n    with tf.variable_scope('local3') as scope:\n        local3 = tf.matmul(local3_value, weights3)\n    with tf.variable_scope('local4') as scope:\n        local4 = tf.nn.relu(tf.matmul(local3_value, weights4)+biases4, name = scope.name)\n\n```\nwith tf.Session(config=tf.ConfigProto(log_device_placement=True))as sess:\n    sess.run(local3)\n    start_time  = time.time()\n    predictions = sess.run(local4)\n    duration = time.time() - start_time\n    print(duration)`\n```\n\n The duration is 0.244572162628\n\nThe second code is as below:\n`with tf.device('/gpu:0'):\n    local3_value = np.load(\"local3.npy\")\n    weights4 = np.load(\"weights4.npy\")\n    biases4 = np.load(\"biases4.npy\")\n    weights3 = np.load(\"weights4.npy\")\n    biases3 = np.load(\"biases4.npy\")\n    with tf.variable_scope('local3') as scope:\n        local3 = tf.nn.softplus(weights3)\n    with tf.variable_scope('local4') as scope:\n        local4 = tf.nn.relu(tf.matmul(local3_value, weights4)+biases4, name = scope.name)\n\n```\nwith tf.Session(config=tf.ConfigProto(log_device_placement=True))as sess:\n    sess.run(local3)\n    start_time  = time.time()\n    predictions = sess.run(local4)\n    duration = time.time() - start_time\n    print(duration)`\n```\n\nThe duration is 0.0679910182953\n\nThe only difference between these two codes is the local3 layer. Why the graph of local3 affects the cost of graph of loca4? These two graphs do not have any relationship.\n"}
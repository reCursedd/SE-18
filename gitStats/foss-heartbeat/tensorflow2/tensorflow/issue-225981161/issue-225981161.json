{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9628", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9628/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9628/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9628/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9628", "id": 225981161, "node_id": "MDU6SXNzdWUyMjU5ODExNjE=", "number": 9628, "title": " tf.cond doesn't work as expected", "user": {"login": "YuxianMeng", "id": 11677047, "node_id": "MDQ6VXNlcjExNjc3MDQ3", "avatar_url": "https://avatars2.githubusercontent.com/u/11677047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YuxianMeng", "html_url": "https://github.com/YuxianMeng", "followers_url": "https://api.github.com/users/YuxianMeng/followers", "following_url": "https://api.github.com/users/YuxianMeng/following{/other_user}", "gists_url": "https://api.github.com/users/YuxianMeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/YuxianMeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YuxianMeng/subscriptions", "organizations_url": "https://api.github.com/users/YuxianMeng/orgs", "repos_url": "https://api.github.com/users/YuxianMeng/repos", "events_url": "https://api.github.com/users/YuxianMeng/events{/privacy}", "received_events_url": "https://api.github.com/users/YuxianMeng/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-05-03T13:12:25Z", "updated_at": "2017-05-03T22:48:12Z", "closed_at": "2017-05-03T22:47:31Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Windows 10</strong>:</li>\n<li><strong>TensorFlow installed from pip install</strong>:</li>\n<li><strong>TensorFlow version 1.0</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>When I use tf.cond, both f1 and f2 are executed.</p>\n<h3>Source code / logs</h3>\n<pre><code>sess = tf.Session()\nx = tf.constant(7)\ny = tf.constant(5)\nlst = []\ndef f1():\n    global lst\n    lst.append(x)\n    return x\ndef f2(): \n    global lst\n    lst.append(y)\n    return y\nr = tf.cond(tf.less(x, y), f1, f2)\nprint(sess.run(lst))  #return [7,5], which means lst.append(x) and lst.append(y) are both executed\n</code></pre>", "body_text": "System information\n\nWindows 10:\nTensorFlow installed from pip install:\nTensorFlow version 1.0:\n\nDescribe the problem\nWhen I use tf.cond, both f1 and f2 are executed.\nSource code / logs\nsess = tf.Session()\nx = tf.constant(7)\ny = tf.constant(5)\nlst = []\ndef f1():\n    global lst\n    lst.append(x)\n    return x\ndef f2(): \n    global lst\n    lst.append(y)\n    return y\nr = tf.cond(tf.less(x, y), f1, f2)\nprint(sess.run(lst))  #return [7,5], which means lst.append(x) and lst.append(y) are both executed", "body": "### System information\r\n- **Windows 10**:\r\n- **TensorFlow installed from pip install**:\r\n- **TensorFlow version 1.0**:\r\n\r\n### Describe the problem\r\nWhen I use tf.cond, both f1 and f2 are executed.\r\n\r\n### Source code / logs\r\n\r\n    sess = tf.Session()\r\n    x = tf.constant(7)\r\n    y = tf.constant(5)\r\n    lst = []\r\n    def f1():\r\n        global lst\r\n        lst.append(x)\r\n        return x\r\n    def f2(): \r\n        global lst\r\n        lst.append(y)\r\n        return y\r\n    r = tf.cond(tf.less(x, y), f1, f2)\r\n    print(sess.run(lst))  #return [7,5], which means lst.append(x) and lst.append(y) are both executed\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/407134885", "html_url": "https://github.com/tensorflow/tensorflow/issues/20531#issuecomment-407134885", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20531", "id": 407134885, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzEzNDg4NQ==", "user": {"login": "u650080", "id": 7254998, "node_id": "MDQ6VXNlcjcyNTQ5OTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7254998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/u650080", "html_url": "https://github.com/u650080", "followers_url": "https://api.github.com/users/u650080/followers", "following_url": "https://api.github.com/users/u650080/following{/other_user}", "gists_url": "https://api.github.com/users/u650080/gists{/gist_id}", "starred_url": "https://api.github.com/users/u650080/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/u650080/subscriptions", "organizations_url": "https://api.github.com/users/u650080/orgs", "repos_url": "https://api.github.com/users/u650080/repos", "events_url": "https://api.github.com/users/u650080/events{/privacy}", "received_events_url": "https://api.github.com/users/u650080/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-23T17:20:03Z", "updated_at": "2018-07-24T13:24:20Z", "author_association": "NONE", "body_html": "<p>there is no problem with no callbacks : but even with one callback is failing:</p>\n<pre><code>import tensorflow as tf\nfrom keras.models import Sequential\nfrom keras.layers import Embedding, LSTM, Dense\nfrom keras.callbacks import TensorBoard\nimport numpy as np\nfrom tensorflow.python.keras.callbacks import EarlyStopping, ModelCheckpoint, TensorBoard, ReduceLROnPlateau\nconfig = tf.ConfigProto()\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.1\nsession = tf.Session(config=config)\npath_checkpoint = 'test.keras'\nSEQUENCES = 5\nTIME_STEPS = 10\n\nmodel = Sequential()\nmodel.add(Embedding(100, 4))\nmodel.add(LSTM(32))\nmodel.add(Dense(1))\nmodel.compile(optimizer='adam', loss='mse')\n\n\ncallback_reduce_lr = ReduceLROnPlateau(monitor='val_loss',\n                                      factor=0.1,\n                                      min_lr=1e-4,\n                                      patience=0,\n                                      verbose=2)\nx_train = np.random.randint(100, size=(SEQUENCES, TIME_STEPS), dtype='int8')\n\ny_train = np.random.rand(SEQUENCES)\n\nmodel.fit(x_train, y_train, batch_size=2, epochs=4, shuffle=True, callbacks=[callback_reduce_lr])\n\n</code></pre>", "body_text": "there is no problem with no callbacks : but even with one callback is failing:\nimport tensorflow as tf\nfrom keras.models import Sequential\nfrom keras.layers import Embedding, LSTM, Dense\nfrom keras.callbacks import TensorBoard\nimport numpy as np\nfrom tensorflow.python.keras.callbacks import EarlyStopping, ModelCheckpoint, TensorBoard, ReduceLROnPlateau\nconfig = tf.ConfigProto()\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.1\nsession = tf.Session(config=config)\npath_checkpoint = 'test.keras'\nSEQUENCES = 5\nTIME_STEPS = 10\n\nmodel = Sequential()\nmodel.add(Embedding(100, 4))\nmodel.add(LSTM(32))\nmodel.add(Dense(1))\nmodel.compile(optimizer='adam', loss='mse')\n\n\ncallback_reduce_lr = ReduceLROnPlateau(monitor='val_loss',\n                                      factor=0.1,\n                                      min_lr=1e-4,\n                                      patience=0,\n                                      verbose=2)\nx_train = np.random.randint(100, size=(SEQUENCES, TIME_STEPS), dtype='int8')\n\ny_train = np.random.rand(SEQUENCES)\n\nmodel.fit(x_train, y_train, batch_size=2, epochs=4, shuffle=True, callbacks=[callback_reduce_lr])", "body": "there is no problem with no callbacks : but even with one callback is failing:\r\n ```\r\nimport tensorflow as tf\r\nfrom keras.models import Sequential\r\nfrom keras.layers import Embedding, LSTM, Dense\r\nfrom keras.callbacks import TensorBoard\r\nimport numpy as np\r\nfrom tensorflow.python.keras.callbacks import EarlyStopping, ModelCheckpoint, TensorBoard, ReduceLROnPlateau\r\nconfig = tf.ConfigProto()\r\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.1\r\nsession = tf.Session(config=config)\r\npath_checkpoint = 'test.keras'\r\nSEQUENCES = 5\r\nTIME_STEPS = 10\r\n\r\nmodel = Sequential()\r\nmodel.add(Embedding(100, 4))\r\nmodel.add(LSTM(32))\r\nmodel.add(Dense(1))\r\nmodel.compile(optimizer='adam', loss='mse')\r\n\r\n\r\ncallback_reduce_lr = ReduceLROnPlateau(monitor='val_loss',\r\n                                       factor=0.1,\r\n                                       min_lr=1e-4,\r\n                                       patience=0,\r\n                                       verbose=2)\r\nx_train = np.random.randint(100, size=(SEQUENCES, TIME_STEPS), dtype='int8')\r\n\r\ny_train = np.random.rand(SEQUENCES)\r\n\r\nmodel.fit(x_train, y_train, batch_size=2, epochs=4, shuffle=True, callbacks=[callback_reduce_lr])\r\n\r\n ```\r\n\r\n "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/402475857", "html_url": "https://github.com/tensorflow/tensorflow/issues/20531#issuecomment-402475857", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20531", "id": 402475857, "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjQ3NTg1Nw==", "user": {"login": "u650080", "id": 7254998, "node_id": "MDQ6VXNlcjcyNTQ5OTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7254998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/u650080", "html_url": "https://github.com/u650080", "followers_url": "https://api.github.com/users/u650080/followers", "following_url": "https://api.github.com/users/u650080/following{/other_user}", "gists_url": "https://api.github.com/users/u650080/gists{/gist_id}", "starred_url": "https://api.github.com/users/u650080/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/u650080/subscriptions", "organizations_url": "https://api.github.com/users/u650080/orgs", "repos_url": "https://api.github.com/users/u650080/repos", "events_url": "https://api.github.com/users/u650080/events{/privacy}", "received_events_url": "https://api.github.com/users/u650080/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-04T13:14:52Z", "updated_at": "2018-07-04T13:14:52Z", "author_association": "NONE", "body_html": "<p>I put output from tools which was in template:<br>\nHave I written custom code : none<br>\nOS Platform Ubuntu: \"16.04.4 LTS (Xenial Xerus)\"<br>\nTensorflow : 1.8.0 GIT VERSION = v1.8.0-0-g93bc2e2072<br>\nTensorFlow installed from : anaconda3<br>\nBazel version: none<br>\nCUDA/cuDNN version : cuda_9.0.176_384.81 and cuDNN : 7.1.4.18+cuda9.0<br>\nGPU model and memory: GPU<br>\nExact command to reproduce:<br>\nimport tensorflow as tf<br>\nfrom keras.models import Sequential<br>\nfrom keras.layers import Embedding, LSTM, Dense<br>\nfrom keras.callbacks import TensorBoard<br>\nimport numpy as np<br>\nfrom tensorflow.python.keras.callbacks import EarlyStopping, ModelCheckpoint, TensorBoard, ReduceLROnPlateau<br>\nconfig = tf.ConfigProto()<br>\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.1<br>\nsession = tf.Session(config=config)<br>\npath_checkpoint = 'test.keras'<br>\nSEQUENCES = 5<br>\nTIME_STEPS = 10</p>\n<p>model = Sequential()<br>\nmodel.add(Embedding(100, 4))<br>\nmodel.add(LSTM(32))<br>\nmodel.add(Dense(1))<br>\nmodel.compile(optimizer='rmsprop', loss='mse')</p>\n<p>tensor_board = TensorBoard(log_dir='log', batch_size=2, write_graph=False,<br>\nwrite_grads=True, histogram_freq=4)<br>\ncallback_early_stopping = EarlyStopping(monitor='val_loss',<br>\npatience=2, verbose=2)<br>\ncallback_checkpoint = ModelCheckpoint(filepath=path_checkpoint,<br>\nmonitor='val_loss',<br>\nverbose=2,<br>\nsave_weights_only=True,<br>\nsave_best_only=True)<br>\ncallback_reduce_lr = ReduceLROnPlateau(monitor='val_loss',<br>\nfactor=0.1,<br>\nmin_lr=1e-4,<br>\npatience=0,<br>\nverbose=2)<br>\nx_train = np.random.randint(100, size=(SEQUENCES, TIME_STEPS), dtype='int8')</p>\n<p>y_train = np.random.rand(SEQUENCES)</p>\n<p>model.fit(x_train, y_train, batch_size=2, epochs=4, shuffle=True, callbacks=[callback_reduce_lr,tensor_board,callback_early_stopping,callback_checkpoint])</p>", "body_text": "I put output from tools which was in template:\nHave I written custom code : none\nOS Platform Ubuntu: \"16.04.4 LTS (Xenial Xerus)\"\nTensorflow : 1.8.0 GIT VERSION = v1.8.0-0-g93bc2e2072\nTensorFlow installed from : anaconda3\nBazel version: none\nCUDA/cuDNN version : cuda_9.0.176_384.81 and cuDNN : 7.1.4.18+cuda9.0\nGPU model and memory: GPU\nExact command to reproduce:\nimport tensorflow as tf\nfrom keras.models import Sequential\nfrom keras.layers import Embedding, LSTM, Dense\nfrom keras.callbacks import TensorBoard\nimport numpy as np\nfrom tensorflow.python.keras.callbacks import EarlyStopping, ModelCheckpoint, TensorBoard, ReduceLROnPlateau\nconfig = tf.ConfigProto()\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.1\nsession = tf.Session(config=config)\npath_checkpoint = 'test.keras'\nSEQUENCES = 5\nTIME_STEPS = 10\nmodel = Sequential()\nmodel.add(Embedding(100, 4))\nmodel.add(LSTM(32))\nmodel.add(Dense(1))\nmodel.compile(optimizer='rmsprop', loss='mse')\ntensor_board = TensorBoard(log_dir='log', batch_size=2, write_graph=False,\nwrite_grads=True, histogram_freq=4)\ncallback_early_stopping = EarlyStopping(monitor='val_loss',\npatience=2, verbose=2)\ncallback_checkpoint = ModelCheckpoint(filepath=path_checkpoint,\nmonitor='val_loss',\nverbose=2,\nsave_weights_only=True,\nsave_best_only=True)\ncallback_reduce_lr = ReduceLROnPlateau(monitor='val_loss',\nfactor=0.1,\nmin_lr=1e-4,\npatience=0,\nverbose=2)\nx_train = np.random.randint(100, size=(SEQUENCES, TIME_STEPS), dtype='int8')\ny_train = np.random.rand(SEQUENCES)\nmodel.fit(x_train, y_train, batch_size=2, epochs=4, shuffle=True, callbacks=[callback_reduce_lr,tensor_board,callback_early_stopping,callback_checkpoint])", "body": "I put output from tools which was in template:\r\nHave I written custom code : none\r\nOS Platform Ubuntu: \"16.04.4 LTS (Xenial Xerus)\"\r\nTensorflow : 1.8.0 GIT VERSION = v1.8.0-0-g93bc2e2072\r\nTensorFlow installed from : anaconda3\r\nBazel version: none\r\nCUDA/cuDNN version : cuda_9.0.176_384.81 and cuDNN : 7.1.4.18+cuda9.0\r\nGPU model and memory: GPU\r\nExact command to reproduce:\r\nimport tensorflow as tf\r\nfrom keras.models import Sequential\r\nfrom keras.layers import Embedding, LSTM, Dense\r\nfrom keras.callbacks import TensorBoard\r\nimport numpy as np\r\nfrom tensorflow.python.keras.callbacks import EarlyStopping, ModelCheckpoint, TensorBoard, ReduceLROnPlateau\r\nconfig = tf.ConfigProto()\r\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.1\r\nsession = tf.Session(config=config)\r\npath_checkpoint = 'test.keras'\r\nSEQUENCES = 5\r\nTIME_STEPS = 10\r\n\r\nmodel = Sequential()\r\nmodel.add(Embedding(100, 4))\r\nmodel.add(LSTM(32))\r\nmodel.add(Dense(1))\r\nmodel.compile(optimizer='rmsprop', loss='mse')\r\n\r\ntensor_board = TensorBoard(log_dir='log', batch_size=2, write_graph=False,\r\nwrite_grads=True, histogram_freq=4)\r\ncallback_early_stopping = EarlyStopping(monitor='val_loss',\r\npatience=2, verbose=2)\r\ncallback_checkpoint = ModelCheckpoint(filepath=path_checkpoint,\r\nmonitor='val_loss',\r\nverbose=2,\r\nsave_weights_only=True,\r\nsave_best_only=True)\r\ncallback_reduce_lr = ReduceLROnPlateau(monitor='val_loss',\r\nfactor=0.1,\r\nmin_lr=1e-4,\r\npatience=0,\r\nverbose=2)\r\nx_train = np.random.randint(100, size=(SEQUENCES, TIME_STEPS), dtype='int8')\r\n\r\ny_train = np.random.rand(SEQUENCES)\r\n\r\nmodel.fit(x_train, y_train, batch_size=2, epochs=4, shuffle=True, callbacks=[callback_reduce_lr,tensor_board,callback_early_stopping,callback_checkpoint])\r\n"}
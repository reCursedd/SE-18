{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3290", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3290/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3290/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3290/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3290", "id": 165262856, "node_id": "MDU6SXNzdWUxNjUyNjI4NTY=", "number": 3290, "title": "I think tf.nn.moments() produces negative variance.", "user": {"login": "cesc-park", "id": 15012648, "node_id": "MDQ6VXNlcjE1MDEyNjQ4", "avatar_url": "https://avatars2.githubusercontent.com/u/15012648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cesc-park", "html_url": "https://github.com/cesc-park", "followers_url": "https://api.github.com/users/cesc-park/followers", "following_url": "https://api.github.com/users/cesc-park/following{/other_user}", "gists_url": "https://api.github.com/users/cesc-park/gists{/gist_id}", "starred_url": "https://api.github.com/users/cesc-park/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cesc-park/subscriptions", "organizations_url": "https://api.github.com/users/cesc-park/orgs", "repos_url": "https://api.github.com/users/cesc-park/repos", "events_url": "https://api.github.com/users/cesc-park/events{/privacy}", "received_events_url": "https://api.github.com/users/cesc-park/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2016-07-13T08:15:48Z", "updated_at": "2018-06-12T10:06:11Z", "closed_at": "2016-07-25T22:50:31Z", "author_association": "NONE", "body_html": "<p>tf.nn.normalize_moments() calculates variance like this.</p>\n<pre><code>variance = math_ops.sub(\n        math_ops.mul(variance_ss, divisor),\n        math_ops.square(shifted_mean),\n        name=\"variance\")\n</code></pre>\n<p>This code can cause negative variance due to floating point precision problem.</p>\n<p>Thanks.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment).</p>\n<p>tf.Print output for variance from tf.nn.moments().</p>\n<pre><code>I tensorflow/core/kernels/logging_ops.cc:79] variance[-0.0021057129 0.00061035156 -0.00024414062...]\nI tensorflow/core/kernels/logging_ops.cc:79] variance[14.041901 5.8100648 60.691284...]\nI tensorflow/core/kernels/logging_ops.cc:79] variance[0.46612549 0.017944336 0.87060547...]\n</code></pre>", "body_text": "tf.nn.normalize_moments() calculates variance like this.\nvariance = math_ops.sub(\n        math_ops.mul(variance_ss, divisor),\n        math_ops.square(shifted_mean),\n        name=\"variance\")\n\nThis code can cause negative variance due to floating point precision problem.\nThanks.\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment).\ntf.Print output for variance from tf.nn.moments().\nI tensorflow/core/kernels/logging_ops.cc:79] variance[-0.0021057129 0.00061035156 -0.00024414062...]\nI tensorflow/core/kernels/logging_ops.cc:79] variance[14.041901 5.8100648 60.691284...]\nI tensorflow/core/kernels/logging_ops.cc:79] variance[0.46612549 0.017944336 0.87060547...]", "body": " tf.nn.normalize_moments() calculates variance like this.\n\n```\nvariance = math_ops.sub(\n        math_ops.mul(variance_ss, divisor),\n        math_ops.square(shifted_mean),\n        name=\"variance\")\n```\n\nThis code can cause negative variance due to floating point precision problem.\n\nThanks.\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n\ntf.Print output for variance from tf.nn.moments().\n\n```\nI tensorflow/core/kernels/logging_ops.cc:79] variance[-0.0021057129 0.00061035156 -0.00024414062...]\nI tensorflow/core/kernels/logging_ops.cc:79] variance[14.041901 5.8100648 60.691284...]\nI tensorflow/core/kernels/logging_ops.cc:79] variance[0.46612549 0.017944336 0.87060547...]\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13811", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13811/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13811/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13811/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/13811", "id": 266557800, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ3MzQ5NDYz", "number": 13811, "title": "fix the issue: \"libcuda.so.1 not found\" and add some minor changes.", "user": {"login": "chi-hung", "id": 14253807, "node_id": "MDQ6VXNlcjE0MjUzODA3", "avatar_url": "https://avatars3.githubusercontent.com/u/14253807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chi-hung", "html_url": "https://github.com/chi-hung", "followers_url": "https://api.github.com/users/chi-hung/followers", "following_url": "https://api.github.com/users/chi-hung/following{/other_user}", "gists_url": "https://api.github.com/users/chi-hung/gists{/gist_id}", "starred_url": "https://api.github.com/users/chi-hung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chi-hung/subscriptions", "organizations_url": "https://api.github.com/users/chi-hung/orgs", "repos_url": "https://api.github.com/users/chi-hung/repos", "events_url": "https://api.github.com/users/chi-hung/events{/privacy}", "received_events_url": "https://api.github.com/users/chi-hung/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2017-10-18T16:28:29Z", "updated_at": "2017-10-19T18:10:27Z", "closed_at": "2017-10-19T18:10:27Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13811", "html_url": "https://github.com/tensorflow/tensorflow/pull/13811", "diff_url": "https://github.com/tensorflow/tensorflow/pull/13811.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/13811.patch"}, "body_html": "<ul>\n<li>\n<p>The newer version of Bazel, i.e. <code>BAZEL_VERSION=0.6.1</code> won't cause any trouble. I've built the image that uses this version of Bazel successfully.</p>\n</li>\n<li>\n<p><code>python-wheel</code> has to be installed, otherwise</p>\n<blockquote>\n<p>error: invalid command 'bdist_wheel'</p>\n</blockquote>\n<p>pops out while building the docker image.</p>\n</li>\n<li>\n<p>I add <em>Compute Capability</em><code>7.0</code> in order to support <em>NVIDIA Tesla V100</em>.</p>\n</li>\n<li>\n<p>Currently, <code>ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1</code> is necessary, otherwise you will see the following warning while building the image:</p>\n<blockquote>\n<p>/usr/bin/ld: warning: libcuda.so.1, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scc_Cops_Simage_Uops_Ugen_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)</p>\n</blockquote>\n<p>and the installation of TensorFlow will fail due to this.</p>\n</li>\n<li>\n<p>I prefer <code>tensorflow/tools/ci_build/builds/configured GPU</code> rather than <code>yes \"\" | ./configure</code> when it comes to configure TensorFlow, since it outputs more information that sometimes could be helpful, such as:</p>\n<blockquote>\n<p>TF_BUILD_INFO = {container_type: \"gpu\", command: \"\", source_HEAD: \"bedfe8ac14bddbf21c5acf80d55abff9df4a7967\", source_remote_origin: \"<a href=\"https://github.com/tensorflow/tensorflow.git\">https://github.com/tensorflow/tensorflow.git</a>\", OS: \"Linux\", kernel: \"4.4.0-92-generic\", architecture: \"x86_64\", processor: \"Intel(R) Xeon(R) CPU E5-2698 v4 @ 2.20GHz\", processor_count: \"80\", memory_total: \"528276076 kB\", swap_total: \"0 kB\", Bazel_version: \"Build label: 0.6.1\", Java_version: \"1.8.0_131\", Python_version: \"2.7.12\", gpp_version: \"g++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\", swig_version: \"\", NVIDIA_driver_version: \"384.81\", CUDA_device_count: \"0\", CUDA_device_names: \"\", CUDA_toolkit_version: \"V9.0.176\"}</p>\n</blockquote>\n</li>\n</ul>", "body_text": "The newer version of Bazel, i.e. BAZEL_VERSION=0.6.1 won't cause any trouble. I've built the image that uses this version of Bazel successfully.\n\n\npython-wheel has to be installed, otherwise\n\nerror: invalid command 'bdist_wheel'\n\npops out while building the docker image.\n\n\nI add Compute Capability7.0 in order to support NVIDIA Tesla V100.\n\n\nCurrently, ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1 is necessary, otherwise you will see the following warning while building the image:\n\n/usr/bin/ld: warning: libcuda.so.1, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scc_Cops_Simage_Uops_Ugen_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n\nand the installation of TensorFlow will fail due to this.\n\n\nI prefer tensorflow/tools/ci_build/builds/configured GPU rather than yes \"\" | ./configure when it comes to configure TensorFlow, since it outputs more information that sometimes could be helpful, such as:\n\nTF_BUILD_INFO = {container_type: \"gpu\", command: \"\", source_HEAD: \"bedfe8ac14bddbf21c5acf80d55abff9df4a7967\", source_remote_origin: \"https://github.com/tensorflow/tensorflow.git\", OS: \"Linux\", kernel: \"4.4.0-92-generic\", architecture: \"x86_64\", processor: \"Intel(R) Xeon(R) CPU E5-2698 v4 @ 2.20GHz\", processor_count: \"80\", memory_total: \"528276076 kB\", swap_total: \"0 kB\", Bazel_version: \"Build label: 0.6.1\", Java_version: \"1.8.0_131\", Python_version: \"2.7.12\", gpp_version: \"g++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\", swig_version: \"\", NVIDIA_driver_version: \"384.81\", CUDA_device_count: \"0\", CUDA_device_names: \"\", CUDA_toolkit_version: \"V9.0.176\"}", "body": "* The newer version of Bazel, i.e. ```BAZEL_VERSION=0.6.1``` won't cause any trouble. I've built the image that uses this version of Bazel successfully.\r\n* ```python-wheel``` has to be installed, otherwise\r\n    >error: invalid command 'bdist_wheel'\r\n\r\n  pops out while building the docker image.\r\n* I add *Compute Capability*```7.0``` in order to support *NVIDIA Tesla V100*.\r\n* Currently, ```ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1``` is necessary, otherwise you will see the following warning while building the image:\r\n    >/usr/bin/ld: warning: libcuda.so.1, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scc_Cops_Simage_Uops_Ugen_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\n\r\n    and the installation of TensorFlow will fail due to this.\r\n* I prefer ```tensorflow/tools/ci_build/builds/configured GPU``` rather than ```yes \"\" | ./configure``` when it comes to configure TensorFlow, since it outputs more information that sometimes could be helpful, such as: \r\n    > TF_BUILD_INFO = {container_type: \"gpu\", command: \"\", source_HEAD: \"bedfe8ac14bddbf21c5acf80d55abff9df4a7967\", source_remote_origin: \"https://github.com/tensorflow/tensorflow.git\", OS: \"Linux\", kernel: \"4.4.0-92-generic\", architecture: \"x86_64\", processor: \"Intel(R) Xeon(R) CPU E5-2698 v4 @ 2.20GHz\", processor_count: \"80\", memory_total: \"528276076 kB\", swap_total: \"0 kB\", Bazel_version: \"Build label: 0.6.1\", Java_version: \"1.8.0_131\", Python_version: \"2.7.12\", gpp_version: \"g++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\", swig_version: \"\", NVIDIA_driver_version: \"384.81\", CUDA_device_count: \"0\", CUDA_device_names: \"\", CUDA_toolkit_version: \"V9.0.176\"}"}
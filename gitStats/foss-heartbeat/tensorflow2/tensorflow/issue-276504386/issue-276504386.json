{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14850", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14850/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14850/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14850/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14850", "id": 276504386, "node_id": "MDU6SXNzdWUyNzY1MDQzODY=", "number": 14850, "title": "Tensorflow v1.4.0 rpc crash", "user": {"login": "fesun", "id": 23738439, "node_id": "MDQ6VXNlcjIzNzM4NDM5", "avatar_url": "https://avatars3.githubusercontent.com/u/23738439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fesun", "html_url": "https://github.com/fesun", "followers_url": "https://api.github.com/users/fesun/followers", "following_url": "https://api.github.com/users/fesun/following{/other_user}", "gists_url": "https://api.github.com/users/fesun/gists{/gist_id}", "starred_url": "https://api.github.com/users/fesun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fesun/subscriptions", "organizations_url": "https://api.github.com/users/fesun/orgs", "repos_url": "https://api.github.com/users/fesun/repos", "events_url": "https://api.github.com/users/fesun/events{/privacy}", "received_events_url": "https://api.github.com/users/fesun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2017-11-24T03:08:47Z", "updated_at": "2018-03-05T15:48:08Z", "closed_at": "2018-03-05T15:48:08Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I built tensorflow v1.4.0 from source code, sometimes it crashed inside kernel. This happened on both Linux and Windows platform.</p>\n<p>Linux call stack:</p>\n<pre><code>C  [_pywrap_tensorflow_internal.so+0x1117eef]  cc_destroy_call_elem+0xdf\nC  [_pywrap_tensorflow_internal.so+0x1138c77]  grpc_call_stack_destroy+0x57\nC  [_pywrap_tensorflow_internal.so+0x114b2fc]  grpc_exec_ctx_flush+0x5c\nC  [_pywrap_tensorflow_internal.so+0x115d8ad]  grpc_call_unref+0xed\nC  [_pywrap_tensorflow_internal.so+0x10fa9ae]  grpc::ClientContext::~ClientContext()+0x1e\nC  [_pywrap_tensorflow_internal.so+0x1027e07]  tensorflow::GrpcRemoteWorker::RPCState&lt;tensorflow::TensorResponse&gt;::~RPCState()+0x197\nC  [_pywrap_tensorflow_internal.so+0x103180e]  tensorflow::GrpcRemoteWorker::RPCState&lt;tensorflow::TensorResponse&gt;::OnCompleted(bool)+0x29e\n</code></pre>\n<p>Windows call stack:</p>\n<pre><code>00 00000042`801ef5c0 00007ffa`737e3c67 ucrtbase!abort+0x4e [d:\\rs1\\minkernel\\crts\\ucrt\\src\\appcrt\\startup\\abort.cpp @ 77]\n01 00000042`801ef5f0 00007ffa`737a96d8 _pywrap_tensorflow_internal!tensorflow::Allocator::AllocatedSize+0x227d7\n02 00000042`801ef630 00007ffa`737ba61f _pywrap_tensorflow_internal!tensorflow::lookup::SubtleMustCopyUnlessStringOrFloat&lt;__int64&gt;+0x10ee8\n03 00000042`801ef660 00007ffa`737cc5ac _pywrap_tensorflow_internal!tensorflow::lookup::SubtleMustCopyUnlessStringOrFloat&lt;__int64&gt;+0x21e2f\n04 00000042`801ef6a0 00007ffa`737a4eb7 _pywrap_tensorflow_internal!tensorflow::Allocator::AllocatedSize+0xb11c\n05 00000042`801ef6d0 00007ffa`7379111e _pywrap_tensorflow_internal!tensorflow::lookup::SubtleMustCopyUnlessStringOrFloat&lt;__int64&gt;+0xc6c7\n06 00000042`801ef740 00007ffa`737964ca _pywrap_tensorflow_internal!std::vector&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt;,std::allocator&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt; &gt; &gt;::~vector&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt;,std::allocator&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt; &gt; &gt;+0x1244e\n07 00000042`801ef790 00007ffa`73785fb2 _pywrap_tensorflow_internal!std::vector&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt;,std::allocator&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt; &gt; &gt;::~vector&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt;,std::allocator&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt; &gt; &gt;+0x177fa\n08 00000042`801ef810 00007ffa`72077041 _pywrap_tensorflow_internal!std::vector&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt;,std::allocator&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt; &gt; &gt;::~vector&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt;,std::allocator&lt;std::unique_ptr&lt;tensorflow::NodeDef,std::default_delete&lt;tensorflow::NodeDef&gt; &gt; &gt; &gt;+0x72e2\n09 00000042`801ef860 00007ffa`720778b4 _pywrap_tensorflow_internal!tensorflow::GrpcRemoteWorker::RPCState&lt;google::protobuf::Message&gt;::~RPCState&lt;google::protobuf::Message&gt;+0xf1\n0a 00000042`801ef8a0 00007ffa`72078803 _pywrap_tensorflow_internal!tensorflow::WorkerInterface::~WorkerInterface+0x574\n0b 00000042`801ef8d0 00007ffa`72082cf0 _pywrap_tensorflow_internal!tensorflow::GrpcRemoteWorker::RPCState&lt;google::protobuf::Message&gt;::OnCompleted+0x283\n0c 00000042`801efa10 00007ffa`71b8ae25 _pywrap_tensorflow_internal!tensorflow::WorkerCachePartial::~WorkerCachePartial+0xf0\n</code></pre>\n<p>Both indicating that tensorflow rpc framework may have some bug.</p>", "body_text": "I built tensorflow v1.4.0 from source code, sometimes it crashed inside kernel. This happened on both Linux and Windows platform.\nLinux call stack:\nC  [_pywrap_tensorflow_internal.so+0x1117eef]  cc_destroy_call_elem+0xdf\nC  [_pywrap_tensorflow_internal.so+0x1138c77]  grpc_call_stack_destroy+0x57\nC  [_pywrap_tensorflow_internal.so+0x114b2fc]  grpc_exec_ctx_flush+0x5c\nC  [_pywrap_tensorflow_internal.so+0x115d8ad]  grpc_call_unref+0xed\nC  [_pywrap_tensorflow_internal.so+0x10fa9ae]  grpc::ClientContext::~ClientContext()+0x1e\nC  [_pywrap_tensorflow_internal.so+0x1027e07]  tensorflow::GrpcRemoteWorker::RPCState<tensorflow::TensorResponse>::~RPCState()+0x197\nC  [_pywrap_tensorflow_internal.so+0x103180e]  tensorflow::GrpcRemoteWorker::RPCState<tensorflow::TensorResponse>::OnCompleted(bool)+0x29e\n\nWindows call stack:\n00 00000042`801ef5c0 00007ffa`737e3c67 ucrtbase!abort+0x4e [d:\\rs1\\minkernel\\crts\\ucrt\\src\\appcrt\\startup\\abort.cpp @ 77]\n01 00000042`801ef5f0 00007ffa`737a96d8 _pywrap_tensorflow_internal!tensorflow::Allocator::AllocatedSize+0x227d7\n02 00000042`801ef630 00007ffa`737ba61f _pywrap_tensorflow_internal!tensorflow::lookup::SubtleMustCopyUnlessStringOrFloat<__int64>+0x10ee8\n03 00000042`801ef660 00007ffa`737cc5ac _pywrap_tensorflow_internal!tensorflow::lookup::SubtleMustCopyUnlessStringOrFloat<__int64>+0x21e2f\n04 00000042`801ef6a0 00007ffa`737a4eb7 _pywrap_tensorflow_internal!tensorflow::Allocator::AllocatedSize+0xb11c\n05 00000042`801ef6d0 00007ffa`7379111e _pywrap_tensorflow_internal!tensorflow::lookup::SubtleMustCopyUnlessStringOrFloat<__int64>+0xc6c7\n06 00000042`801ef740 00007ffa`737964ca _pywrap_tensorflow_internal!std::vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >::~vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >+0x1244e\n07 00000042`801ef790 00007ffa`73785fb2 _pywrap_tensorflow_internal!std::vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >::~vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >+0x177fa\n08 00000042`801ef810 00007ffa`72077041 _pywrap_tensorflow_internal!std::vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >::~vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >+0x72e2\n09 00000042`801ef860 00007ffa`720778b4 _pywrap_tensorflow_internal!tensorflow::GrpcRemoteWorker::RPCState<google::protobuf::Message>::~RPCState<google::protobuf::Message>+0xf1\n0a 00000042`801ef8a0 00007ffa`72078803 _pywrap_tensorflow_internal!tensorflow::WorkerInterface::~WorkerInterface+0x574\n0b 00000042`801ef8d0 00007ffa`72082cf0 _pywrap_tensorflow_internal!tensorflow::GrpcRemoteWorker::RPCState<google::protobuf::Message>::OnCompleted+0x283\n0c 00000042`801efa10 00007ffa`71b8ae25 _pywrap_tensorflow_internal!tensorflow::WorkerCachePartial::~WorkerCachePartial+0xf0\n\nBoth indicating that tensorflow rpc framework may have some bug.", "body": "I built tensorflow v1.4.0 from source code, sometimes it crashed inside kernel. This happened on both Linux and Windows platform.\r\n\r\nLinux call stack:\r\n```\r\nC  [_pywrap_tensorflow_internal.so+0x1117eef]  cc_destroy_call_elem+0xdf\r\nC  [_pywrap_tensorflow_internal.so+0x1138c77]  grpc_call_stack_destroy+0x57\r\nC  [_pywrap_tensorflow_internal.so+0x114b2fc]  grpc_exec_ctx_flush+0x5c\r\nC  [_pywrap_tensorflow_internal.so+0x115d8ad]  grpc_call_unref+0xed\r\nC  [_pywrap_tensorflow_internal.so+0x10fa9ae]  grpc::ClientContext::~ClientContext()+0x1e\r\nC  [_pywrap_tensorflow_internal.so+0x1027e07]  tensorflow::GrpcRemoteWorker::RPCState<tensorflow::TensorResponse>::~RPCState()+0x197\r\nC  [_pywrap_tensorflow_internal.so+0x103180e]  tensorflow::GrpcRemoteWorker::RPCState<tensorflow::TensorResponse>::OnCompleted(bool)+0x29e\r\n```\r\n\r\nWindows call stack:\r\n```\r\n00 00000042`801ef5c0 00007ffa`737e3c67 ucrtbase!abort+0x4e [d:\\rs1\\minkernel\\crts\\ucrt\\src\\appcrt\\startup\\abort.cpp @ 77]\r\n01 00000042`801ef5f0 00007ffa`737a96d8 _pywrap_tensorflow_internal!tensorflow::Allocator::AllocatedSize+0x227d7\r\n02 00000042`801ef630 00007ffa`737ba61f _pywrap_tensorflow_internal!tensorflow::lookup::SubtleMustCopyUnlessStringOrFloat<__int64>+0x10ee8\r\n03 00000042`801ef660 00007ffa`737cc5ac _pywrap_tensorflow_internal!tensorflow::lookup::SubtleMustCopyUnlessStringOrFloat<__int64>+0x21e2f\r\n04 00000042`801ef6a0 00007ffa`737a4eb7 _pywrap_tensorflow_internal!tensorflow::Allocator::AllocatedSize+0xb11c\r\n05 00000042`801ef6d0 00007ffa`7379111e _pywrap_tensorflow_internal!tensorflow::lookup::SubtleMustCopyUnlessStringOrFloat<__int64>+0xc6c7\r\n06 00000042`801ef740 00007ffa`737964ca _pywrap_tensorflow_internal!std::vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >::~vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >+0x1244e\r\n07 00000042`801ef790 00007ffa`73785fb2 _pywrap_tensorflow_internal!std::vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >::~vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >+0x177fa\r\n08 00000042`801ef810 00007ffa`72077041 _pywrap_tensorflow_internal!std::vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >::~vector<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> >,std::allocator<std::unique_ptr<tensorflow::NodeDef,std::default_delete<tensorflow::NodeDef> > > >+0x72e2\r\n09 00000042`801ef860 00007ffa`720778b4 _pywrap_tensorflow_internal!tensorflow::GrpcRemoteWorker::RPCState<google::protobuf::Message>::~RPCState<google::protobuf::Message>+0xf1\r\n0a 00000042`801ef8a0 00007ffa`72078803 _pywrap_tensorflow_internal!tensorflow::WorkerInterface::~WorkerInterface+0x574\r\n0b 00000042`801ef8d0 00007ffa`72082cf0 _pywrap_tensorflow_internal!tensorflow::GrpcRemoteWorker::RPCState<google::protobuf::Message>::OnCompleted+0x283\r\n0c 00000042`801efa10 00007ffa`71b8ae25 _pywrap_tensorflow_internal!tensorflow::WorkerCachePartial::~WorkerCachePartial+0xf0\r\n```\r\nBoth indicating that tensorflow rpc framework may have some bug."}
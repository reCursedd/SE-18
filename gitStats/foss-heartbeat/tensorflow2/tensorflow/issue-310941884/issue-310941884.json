{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18211", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18211/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18211/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18211/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18211", "id": 310941884, "node_id": "MDU6SXNzdWUzMTA5NDE4ODQ=", "number": 18211, "title": "freeze_graph.py generates error messages when run on sample model (census / wide_deep)", "user": {"login": "kjancke", "id": 19283886, "node_id": "MDQ6VXNlcjE5MjgzODg2", "avatar_url": "https://avatars2.githubusercontent.com/u/19283886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjancke", "html_url": "https://github.com/kjancke", "followers_url": "https://api.github.com/users/kjancke/followers", "following_url": "https://api.github.com/users/kjancke/following{/other_user}", "gists_url": "https://api.github.com/users/kjancke/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjancke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjancke/subscriptions", "organizations_url": "https://api.github.com/users/kjancke/orgs", "repos_url": "https://api.github.com/users/kjancke/repos", "events_url": "https://api.github.com/users/kjancke/events{/privacy}", "received_events_url": "https://api.github.com/users/kjancke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-04-03T18:12:14Z", "updated_at": "2018-11-22T18:55:13Z", "closed_at": null, "author_association": "NONE", "body_html": "<ol>\n<li>It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).</li>\n<li>The form below must be filled out.</li>\n<li>It shouldn't be a TensorBoard issue. Those go <a href=\"https://github.com/tensorflow/tensorboard/issues\">here</a>.</li>\n</ol>\n<p><strong>Here's why we have that policy</strong>: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.</p>\n<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: ('v1.6.0-0-gd2e24b6039', '1.6.0')</li>\n<li><strong>Python version</strong>: Python 2.7.12 (default, Dec  4 2017, 14:50:18) [GCC 5.4.0 20160609] on linux2</li>\n<li><strong>CUDA/cuDNN version</strong>: Not using GPU</li>\n<li><strong>GPU model and memory</strong>: Not using GPU</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nFollow the \"wide_deep\" tutorial<br>\nTry to freeze the generated model by running:<br>\npython freeze_graph.py<br>\n--input_graph=/tmp/census_model/graph.pbtxt<br>\n--input_checkpoint=/tmp/census_model/model.ckpt-190<br>\n--output_graph=/tmp/census_model/frozen_graph.pb<br>\n--output_node_names=softmax</li>\n</ul>\n<p>An error is generated:<br>\nTypeError: names_to_saveables must be a dict mapping string names to Tensors/Variables. Not a variable: Tensor(\"dnn/hiddenlayer_0/bias:0\", shape=(100,), dtype=float32)</p>\n<h3>Describe the problem</h3>\n<p>I would think that the freeze_graph script should finish successfully, hence I believe the problem is that an error message is generated.</p>\n<h3>Source code / logs</h3>\n<p>Traceback (most recent call last):<br>\nFile \"freeze_graph.py\", line 380, in <br>\napp.run(main=main, argv=[sys.argv[0]] + unparsed)<br>\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 126, in run<br>\n_sys.exit(main(argv))<br>\nFile \"freeze_graph.py\", line 274, in main<br>\nFLAGS.saved_model_tags, checkpoint_version)<br>\nFile \"freeze_graph.py\", line 256, in freeze_graph<br>\ncheckpoint_version=checkpoint_version)<br>\nFile \"freeze_graph.py\", line 130, in freeze_graph_with_def_protos<br>\nvar_list=var_list, write_version=checkpoint_version)<br>\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1293, in <strong>init</strong><br>\nself.build()<br>\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1302, in build<br>\nself._build(self._filename, build_save=True, build_restore=True)<br>\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1339, in _build<br>\nbuild_save=build_save, build_restore=build_restore)<br>\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 774, in _build_internal<br>\nsaveables = self._ValidateAndSliceInputs(names_to_saveables)<br>\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 677, in _ValidateAndSliceInputs<br>\nvariable)<br>\nTypeError: names_to_saveables must be a dict mapping string names to Tensors/Variables. Not a variable: Tensor(\"dnn/hiddenlayer_0/bias:0\", shape=(100,), dtype=float32)</p>", "body_text": "It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\nThe form below must be filled out.\nIt shouldn't be a TensorBoard issue. Those go here.\n\nHere's why we have that policy: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\n\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): ('v1.6.0-0-gd2e24b6039', '1.6.0')\nPython version: Python 2.7.12 (default, Dec  4 2017, 14:50:18) [GCC 5.4.0 20160609] on linux2\nCUDA/cuDNN version: Not using GPU\nGPU model and memory: Not using GPU\nExact command to reproduce:\nFollow the \"wide_deep\" tutorial\nTry to freeze the generated model by running:\npython freeze_graph.py\n--input_graph=/tmp/census_model/graph.pbtxt\n--input_checkpoint=/tmp/census_model/model.ckpt-190\n--output_graph=/tmp/census_model/frozen_graph.pb\n--output_node_names=softmax\n\nAn error is generated:\nTypeError: names_to_saveables must be a dict mapping string names to Tensors/Variables. Not a variable: Tensor(\"dnn/hiddenlayer_0/bias:0\", shape=(100,), dtype=float32)\nDescribe the problem\nI would think that the freeze_graph script should finish successfully, hence I believe the problem is that an error message is generated.\nSource code / logs\nTraceback (most recent call last):\nFile \"freeze_graph.py\", line 380, in \napp.run(main=main, argv=[sys.argv[0]] + unparsed)\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 126, in run\n_sys.exit(main(argv))\nFile \"freeze_graph.py\", line 274, in main\nFLAGS.saved_model_tags, checkpoint_version)\nFile \"freeze_graph.py\", line 256, in freeze_graph\ncheckpoint_version=checkpoint_version)\nFile \"freeze_graph.py\", line 130, in freeze_graph_with_def_protos\nvar_list=var_list, write_version=checkpoint_version)\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1293, in init\nself.build()\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1302, in build\nself._build(self._filename, build_save=True, build_restore=True)\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1339, in _build\nbuild_save=build_save, build_restore=build_restore)\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 774, in _build_internal\nsaveables = self._ValidateAndSliceInputs(names_to_saveables)\nFile \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 677, in _ValidateAndSliceInputs\nvariable)\nTypeError: names_to_saveables must be a dict mapping string names to Tensors/Variables. Not a variable: Tensor(\"dnn/hiddenlayer_0/bias:0\", shape=(100,), dtype=float32)", "body": "1. It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: ('v1.6.0-0-gd2e24b6039', '1.6.0')\r\n- **Python version**: Python 2.7.12 (default, Dec  4 2017, 14:50:18) [GCC 5.4.0 20160609] on linux2\r\n- **CUDA/cuDNN version**: Not using GPU\r\n- **GPU model and memory**: Not using GPU\r\n- **Exact command to reproduce**:\r\nFollow the \"wide_deep\" tutorial\r\nTry to freeze the generated model by running: \r\npython freeze_graph.py \r\n  --input_graph=/tmp/census_model/graph.pbtxt \r\n  --input_checkpoint=/tmp/census_model/model.ckpt-190 \r\n  --output_graph=/tmp/census_model/frozen_graph.pb\r\n  --output_node_names=softmax\r\n\r\nAn error is generated:\r\nTypeError: names_to_saveables must be a dict mapping string names to Tensors/Variables. Not a variable: Tensor(\"dnn/hiddenlayer_0/bias:0\", shape=(100,), dtype=float32)\r\n\r\n### Describe the problem\r\nI would think that the freeze_graph script should finish successfully, hence I believe the problem is that an error message is generated.\r\n\r\n### Source code / logs\r\nTraceback (most recent call last):\r\n  File \"freeze_graph.py\", line 380, in <module>\r\n    app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 126, in run\r\n    _sys.exit(main(argv))\r\n  File \"freeze_graph.py\", line 274, in main\r\n    FLAGS.saved_model_tags, checkpoint_version)\r\n  File \"freeze_graph.py\", line 256, in freeze_graph\r\n    checkpoint_version=checkpoint_version)\r\n  File \"freeze_graph.py\", line 130, in freeze_graph_with_def_protos\r\n    var_list=var_list, write_version=checkpoint_version)\r\n  File \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1293, in __init__\r\n    self.build()\r\n  File \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1302, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1339, in _build\r\n    build_save=build_save, build_restore=build_restore)\r\n  File \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 774, in _build_internal\r\n    saveables = self._ValidateAndSliceInputs(names_to_saveables)\r\n  File \"/media/LinuxApps/home/karsten/.local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 677, in _ValidateAndSliceInputs\r\n    variable)\r\nTypeError: names_to_saveables must be a dict mapping string names to Tensors/Variables. Not a variable: Tensor(\"dnn/hiddenlayer_0/bias:0\", shape=(100,), dtype=float32)\r\n"}
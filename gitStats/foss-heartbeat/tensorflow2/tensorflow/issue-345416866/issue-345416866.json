{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21200", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21200/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21200/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21200/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21200", "id": 345416866, "node_id": "MDU6SXNzdWUzNDU0MTY4NjY=", "number": 21200, "title": "the weights of tf.contrib.rnn.BasicLSTMCell can't be updated", "user": {"login": "ztwe", "id": 7899459, "node_id": "MDQ6VXNlcjc4OTk0NTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/7899459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ztwe", "html_url": "https://github.com/ztwe", "followers_url": "https://api.github.com/users/ztwe/followers", "following_url": "https://api.github.com/users/ztwe/following{/other_user}", "gists_url": "https://api.github.com/users/ztwe/gists{/gist_id}", "starred_url": "https://api.github.com/users/ztwe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ztwe/subscriptions", "organizations_url": "https://api.github.com/users/ztwe/orgs", "repos_url": "https://api.github.com/users/ztwe/repos", "events_url": "https://api.github.com/users/ztwe/events{/privacy}", "received_events_url": "https://api.github.com/users/ztwe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-07-28T04:14:14Z", "updated_at": "2018-08-05T11:21:43Z", "closed_at": "2018-08-05T11:21:43Z", "author_association": "NONE", "body_html": "<p>Environment<br>\nOS: Ubuntu 16.04<br>\nTensorflow-gpu: 1.8</p>\n<pre><code>    lstm_cell = tf.contrib.rnn.BasicLSTMCell(\n        num_units=self.config.num_lstm_units, state_is_tuple=True)\n    if self.mode == \"train\":\n      lstm_cell = tf.contrib.rnn.DropoutWrapper(\n          lstm_cell,\n          input_keep_prob=self.config.lstm_dropout_keep_prob,\n          output_keep_prob=self.config.lstm_dropout_keep_prob)\n\n    with tf.variable_scope(\"lstm\", initializer=self.initializer) as lstm_scope:\n      # Feed the image embeddings to set the initial LSTM state.\n      zero_state = lstm_cell.zero_state(\n          batch_size=self.image_embeddings.get_shape()[0], dtype=tf.float32)\n\n      # Allow the LSTM variables to be reused.\n      #lstm_scope.reuse_variables()\n\n      ........\n\n      scores = tf.Variable(tf.random_normal(shape=[K, self.config.batch_size, C]), name=\"scores\")\n\n      M = tf.Variable(tf.random_normal(shape=[K+1, self.config.batch_size, 2, 3]), name=\"M\")\n      tf.assign(M[0], tf.convert_to_tensor([[1., 0., 0.], [0., 1., 0.]]))\n\n      lstm_input_size = 14\n      zk_size = 4096\n\n      hidden = zero_state\n\n      for k in range(0, K+1):\n          .......\n\n          lstm_outputs, hidden = lstm_cell(f_k, hidden) \n</code></pre>\n<p>M and Scores can be updated. Why BasicLSTMCell is not in the optimizeLoss module\uff1f</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/7899459/43352992-ce472a2a-925f-11e8-9f48-08c9d64fa503.png\"><img src=\"https://user-images.githubusercontent.com/7899459/43352992-ce472a2a-925f-11e8-9f48-08c9d64fa503.png\" alt=\"opimizeloss\" style=\"max-width:100%;\"></a></p>", "body_text": "Environment\nOS: Ubuntu 16.04\nTensorflow-gpu: 1.8\n    lstm_cell = tf.contrib.rnn.BasicLSTMCell(\n        num_units=self.config.num_lstm_units, state_is_tuple=True)\n    if self.mode == \"train\":\n      lstm_cell = tf.contrib.rnn.DropoutWrapper(\n          lstm_cell,\n          input_keep_prob=self.config.lstm_dropout_keep_prob,\n          output_keep_prob=self.config.lstm_dropout_keep_prob)\n\n    with tf.variable_scope(\"lstm\", initializer=self.initializer) as lstm_scope:\n      # Feed the image embeddings to set the initial LSTM state.\n      zero_state = lstm_cell.zero_state(\n          batch_size=self.image_embeddings.get_shape()[0], dtype=tf.float32)\n\n      # Allow the LSTM variables to be reused.\n      #lstm_scope.reuse_variables()\n\n      ........\n\n      scores = tf.Variable(tf.random_normal(shape=[K, self.config.batch_size, C]), name=\"scores\")\n\n      M = tf.Variable(tf.random_normal(shape=[K+1, self.config.batch_size, 2, 3]), name=\"M\")\n      tf.assign(M[0], tf.convert_to_tensor([[1., 0., 0.], [0., 1., 0.]]))\n\n      lstm_input_size = 14\n      zk_size = 4096\n\n      hidden = zero_state\n\n      for k in range(0, K+1):\n          .......\n\n          lstm_outputs, hidden = lstm_cell(f_k, hidden) \n\nM and Scores can be updated. Why BasicLSTMCell is not in the optimizeLoss module\uff1f", "body": "Environment\r\nOS: Ubuntu 16.04\r\nTensorflow-gpu: 1.8\r\n\r\n```\r\n    lstm_cell = tf.contrib.rnn.BasicLSTMCell(\r\n        num_units=self.config.num_lstm_units, state_is_tuple=True)\r\n    if self.mode == \"train\":\r\n      lstm_cell = tf.contrib.rnn.DropoutWrapper(\r\n          lstm_cell,\r\n          input_keep_prob=self.config.lstm_dropout_keep_prob,\r\n          output_keep_prob=self.config.lstm_dropout_keep_prob)\r\n\r\n    with tf.variable_scope(\"lstm\", initializer=self.initializer) as lstm_scope:\r\n      # Feed the image embeddings to set the initial LSTM state.\r\n      zero_state = lstm_cell.zero_state(\r\n          batch_size=self.image_embeddings.get_shape()[0], dtype=tf.float32)\r\n\r\n      # Allow the LSTM variables to be reused.\r\n      #lstm_scope.reuse_variables()\r\n\r\n      ........\r\n\r\n      scores = tf.Variable(tf.random_normal(shape=[K, self.config.batch_size, C]), name=\"scores\")\r\n\r\n      M = tf.Variable(tf.random_normal(shape=[K+1, self.config.batch_size, 2, 3]), name=\"M\")\r\n      tf.assign(M[0], tf.convert_to_tensor([[1., 0., 0.], [0., 1., 0.]]))\r\n\r\n      lstm_input_size = 14\r\n      zk_size = 4096\r\n\r\n      hidden = zero_state\r\n\r\n      for k in range(0, K+1):\r\n          .......\r\n\r\n          lstm_outputs, hidden = lstm_cell(f_k, hidden) \r\n```\r\n\r\nM and Scores can be updated. Why BasicLSTMCell is not in the optimizeLoss module\uff1f\r\n\r\n\r\n![opimizeloss](https://user-images.githubusercontent.com/7899459/43352992-ce472a2a-925f-11e8-9f48-08c9d64fa503.png)"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/313754349", "html_url": "https://github.com/tensorflow/tensorflow/issues/10003#issuecomment-313754349", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10003", "id": 313754349, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzc1NDM0OQ==", "user": {"login": "tjingrant", "id": 6410074, "node_id": "MDQ6VXNlcjY0MTAwNzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6410074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjingrant", "html_url": "https://github.com/tjingrant", "followers_url": "https://api.github.com/users/tjingrant/followers", "following_url": "https://api.github.com/users/tjingrant/following{/other_user}", "gists_url": "https://api.github.com/users/tjingrant/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjingrant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjingrant/subscriptions", "organizations_url": "https://api.github.com/users/tjingrant/orgs", "repos_url": "https://api.github.com/users/tjingrant/repos", "events_url": "https://api.github.com/users/tjingrant/events{/privacy}", "received_events_url": "https://api.github.com/users/tjingrant/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-07T18:09:59Z", "updated_at": "2017-07-07T18:18:23Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Hi, so by reading up the code, I've found out that as <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2357304\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/asiakaczmar\">@asiakaczmar</a> pointed out, there is no <code>a_is_sparse</code> option in the implementation of multiply as in <a href=\"https://github.com/tensorflow/tensorflow/blob/cf18c6d384a96a53b448bd51a90c117af0ed7c96/tensorflow/python/ops/math_ops.py#L304\">link</a>. However, there is indeed the option of specifying <code>a_is_sparse</code> option in the implementation of <code>matmul</code> as in <a href=\"https://github.com/tensorflow/tensorflow/blob/cf18c6d384a96a53b448bd51a90c117af0ed7c96/tensorflow/python/ops/math_ops.py#L1686\">link</a>. I might be missing something, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2013379\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/cfperez\">@cfperez</a> can you make sure if <code>matmul</code> is what you mean instead of <code>multiply</code> in your comment?</p>\n<p>As I read through relevant sections of code related to sparse tensor multiplication, I see quite a bit of confusion surrounding what the word <code>sparse</code> actually mean both in the code and in people's comments. A comment by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=592670\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/concretevitamin\">@concretevitamin</a> in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"164677030\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3246\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3246/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/3246\">#3246</a> suggests that <code>a_is_sparse</code> or <code>b_is_sparse</code> does not specify that the input tensor is a SparseTensor; rather, it provides algorithmic hints suggesting that the input dense tensor contains large portion of zeros. Moreoever, the <code>sparse_matmul</code> function seems to follow suite on this line of thinking and in <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/ops/math_ops.py#L1821\">here</a>, the implementation suggests that it essentially performs the same operation as <code>multiply</code> do with sparse hints turned on. That is to say, the behavior described in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"164677030\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3246\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3246/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/3246\">#3246</a> is expected in order to remain consistent about what the word <code>sparse</code> means in the context of tensorflow.</p>\n<p>However, the problem is that what <code>sparse</code> means somehow fluctuates depending on which function you are in. For instance, the documentation indicates that <code>sparse_transpose</code> and <code>sparse_reduce_sum</code> take SparseTensor as inputs, which seems to contradicts the definition of <code>sparse</code> as seen in <code>multiply</code> or <code>sparse_matmul</code>. So, in light of the splitting definition of <code>sparse</code>, I would like to ask for opinions on how would sparse-sparse matrix multiplication fit into the picture.</p>\n<p>The most logical thing to do, in my opinion, is to implement in <code>math_ops.py</code> another function called <code>sparse_tensor_sparse_tensor_matmul</code> (the naming follows from <code>sparse_tensor_dense_matmul</code>). Also, I'm not sure if the current <code>sparse_matmul</code> function is a placeholder for future implementation or not; therefore, although it is the most intuitive to change the <code>sparse_matmul</code> function to handle sparse matrix sparse matrix multiplication, it might cause compatibility issue.</p>", "body_text": "Hi, so by reading up the code, I've found out that as @asiakaczmar pointed out, there is no a_is_sparse option in the implementation of multiply as in link. However, there is indeed the option of specifying a_is_sparse option in the implementation of matmul as in link. I might be missing something, @cfperez can you make sure if matmul is what you mean instead of multiply in your comment?\nAs I read through relevant sections of code related to sparse tensor multiplication, I see quite a bit of confusion surrounding what the word sparse actually mean both in the code and in people's comments. A comment by @concretevitamin in #3246 suggests that a_is_sparse or b_is_sparse does not specify that the input tensor is a SparseTensor; rather, it provides algorithmic hints suggesting that the input dense tensor contains large portion of zeros. Moreoever, the sparse_matmul function seems to follow suite on this line of thinking and in here, the implementation suggests that it essentially performs the same operation as multiply do with sparse hints turned on. That is to say, the behavior described in #3246 is expected in order to remain consistent about what the word sparse means in the context of tensorflow.\nHowever, the problem is that what sparse means somehow fluctuates depending on which function you are in. For instance, the documentation indicates that sparse_transpose and sparse_reduce_sum take SparseTensor as inputs, which seems to contradicts the definition of sparse as seen in multiply or sparse_matmul. So, in light of the splitting definition of sparse, I would like to ask for opinions on how would sparse-sparse matrix multiplication fit into the picture.\nThe most logical thing to do, in my opinion, is to implement in math_ops.py another function called sparse_tensor_sparse_tensor_matmul (the naming follows from sparse_tensor_dense_matmul). Also, I'm not sure if the current sparse_matmul function is a placeholder for future implementation or not; therefore, although it is the most intuitive to change the sparse_matmul function to handle sparse matrix sparse matrix multiplication, it might cause compatibility issue.", "body": "Hi, so by reading up the code, I've found out that as @asiakaczmar pointed out, there is no `a_is_sparse` option in the implementation of multiply as in [link](https://github.com/tensorflow/tensorflow/blob/cf18c6d384a96a53b448bd51a90c117af0ed7c96/tensorflow/python/ops/math_ops.py#L304). However, there is indeed the option of specifying `a_is_sparse` option in the implementation of `matmul` as in [link](https://github.com/tensorflow/tensorflow/blob/cf18c6d384a96a53b448bd51a90c117af0ed7c96/tensorflow/python/ops/math_ops.py#L1686). I might be missing something, @cfperez can you make sure if `matmul` is what you mean instead of `multiply` in your comment?\r\n\r\nAs I read through relevant sections of code related to sparse tensor multiplication, I see quite a bit of confusion surrounding what the word `sparse` actually mean both in the code and in people's comments. A comment by @concretevitamin in #3246 suggests that `a_is_sparse` or `b_is_sparse` does not specify that the input tensor is a SparseTensor; rather, it provides algorithmic hints suggesting that the input dense tensor contains large portion of zeros. Moreoever, the `sparse_matmul` function seems to follow suite on this line of thinking and in [here](https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/ops/math_ops.py#L1821), the implementation suggests that it essentially performs the same operation as `multiply` do with sparse hints turned on. That is to say, the behavior described in #3246 is expected in order to remain consistent about what the word `sparse` means in the context of tensorflow. \r\n\r\nHowever, the problem is that what `sparse` means somehow fluctuates depending on which function you are in. For instance, the documentation indicates that `sparse_transpose` and `sparse_reduce_sum` take SparseTensor as inputs, which seems to contradicts the definition of `sparse` as seen in `multiply` or `sparse_matmul`. So, in light of the splitting definition of `sparse`, I would like to ask for opinions on how would sparse-sparse matrix multiplication fit into the picture. \r\n\r\nThe most logical thing to do, in my opinion, is to implement in `math_ops.py` another function called `sparse_tensor_sparse_tensor_matmul` (the naming follows from `sparse_tensor_dense_matmul`). Also, I'm not sure if the current `sparse_matmul` function is a placeholder for future implementation or not; therefore, although it is the most intuitive to change the `sparse_matmul` function to handle sparse matrix sparse matrix multiplication, it might cause compatibility issue."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12650", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12650/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12650/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12650/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12650", "id": 253337021, "node_id": "MDU6SXNzdWUyNTMzMzcwMjE=", "number": 12650, "title": "TF build fails for simulator architectures on master", "user": {"login": "eaigner", "id": 112197, "node_id": "MDQ6VXNlcjExMjE5Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/112197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaigner", "html_url": "https://github.com/eaigner", "followers_url": "https://api.github.com/users/eaigner/followers", "following_url": "https://api.github.com/users/eaigner/following{/other_user}", "gists_url": "https://api.github.com/users/eaigner/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaigner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaigner/subscriptions", "organizations_url": "https://api.github.com/users/eaigner/orgs", "repos_url": "https://api.github.com/users/eaigner/repos", "events_url": "https://api.github.com/users/eaigner/events{/privacy}", "received_events_url": "https://api.github.com/users/eaigner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-08-28T13:56:36Z", "updated_at": "2018-01-22T17:42:58Z", "closed_at": "2018-01-22T17:42:58Z", "author_association": "CONTRIBUTOR", "body_html": "<p>When building TF for iOS from <code>master</code> with</p>\n<pre><code>./build_all_ios.sh\n</code></pre>\n<p>The build fails with</p>\n<pre><code>clang++ -x c++ -M -std=c++11 -DNSYNC_USE_CPP11_TIMEPOINT -DNSYNC_ATOMIC_CPP11 -I../../platform/c++11 -I../../platform/gcc_no_tls -I../../platform/macos -I../../platform/posix -pthread -I../../public -I../../internal ../../internal/*.c ../../testing/*.c ../../platform/posix/src/clock_gettime.c ../../platform/c++11/src/nsync_semaphore_mutex.cc ../../platform/posix/src/per_thread_waiter.c ../../platform/c++11/src/yield.cc ../../platform/c++11/src/time_rep_timespec.cc ../../platform/c++11/src/nsync_panic.cc \\\n\t\t  ../../platform/c++11/src/start_thread.cc &gt; dependfile\nclang++ -DNSYNC_USE_CPP11_TIMEPOINT -DNSYNC_ATOMIC_CPP11 -I../../platform/c++11 -I../../platform/gcc_no_tls -I../../platform/macos -I../../platform/posix -pthread -I../../public -I../../internal -O -arch i386 -fno-exceptions -stdlib=libc++ -fembed-bitcode  -mios-simulator-version-min=8.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk -fPIC -x c++ -std=c++11 -Werror -Wall -Wextra -pedantic -c ../../internal/common.c\nclang: error: no such sysroot directory: '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk' [-Werror,-Wmissing-sysroot]\nmake: *** [common.o] Error 1\n</code></pre>\n<p>For device architectures the build uses <code>iPhoneOS10.3.sdk</code>, which is there and correct, but not for the sim architecture (see missing SDK). If I manually symlink the current <code>iPhoneSimulator.sdk</code> as <code>iPhoneSimulator10.0.sdk</code> I get another error</p>\n<pre><code>clang++ -DNSYNC_USE_CPP11_TIMEPOINT -DNSYNC_ATOMIC_CPP11 -I../../platform/c++11 -I../../platform/gcc_no_tls -I../../platform/macos -I../../platform/posix -pthread -I../../public -I../../internal -O -arch i386 -fno-exceptions -stdlib=libc++ -fembed-bitcode  -mios-simulator-version-min=8.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk -fPIC -x c++ -std=c++11 -Werror -Wall -Wextra -pedantic -c ../../internal/common.c\nIn file included from ../../internal/common.c:18:\n../../platform/c++11/platform.h:19:10: fatal error: 'string.h' file not found\n#include &lt;string.h&gt;\n         ^\n1 error generated.\nmake: *** [common.o] Error 1\n</code></pre>\n<p>MacOS Sierra 10.12.6 (16G29)<br>\nXcode Version 8.3.3 (8E3004b)<br>\nApple LLVM version 8.1.0 (clang-802.0.42)<br>\nTarget: x86_64-apple-darwin16.7.0<br>\nThread model: posix<br>\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin</p>", "body_text": "When building TF for iOS from master with\n./build_all_ios.sh\n\nThe build fails with\nclang++ -x c++ -M -std=c++11 -DNSYNC_USE_CPP11_TIMEPOINT -DNSYNC_ATOMIC_CPP11 -I../../platform/c++11 -I../../platform/gcc_no_tls -I../../platform/macos -I../../platform/posix -pthread -I../../public -I../../internal ../../internal/*.c ../../testing/*.c ../../platform/posix/src/clock_gettime.c ../../platform/c++11/src/nsync_semaphore_mutex.cc ../../platform/posix/src/per_thread_waiter.c ../../platform/c++11/src/yield.cc ../../platform/c++11/src/time_rep_timespec.cc ../../platform/c++11/src/nsync_panic.cc \\\n\t\t  ../../platform/c++11/src/start_thread.cc > dependfile\nclang++ -DNSYNC_USE_CPP11_TIMEPOINT -DNSYNC_ATOMIC_CPP11 -I../../platform/c++11 -I../../platform/gcc_no_tls -I../../platform/macos -I../../platform/posix -pthread -I../../public -I../../internal -O -arch i386 -fno-exceptions -stdlib=libc++ -fembed-bitcode  -mios-simulator-version-min=8.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk -fPIC -x c++ -std=c++11 -Werror -Wall -Wextra -pedantic -c ../../internal/common.c\nclang: error: no such sysroot directory: '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk' [-Werror,-Wmissing-sysroot]\nmake: *** [common.o] Error 1\n\nFor device architectures the build uses iPhoneOS10.3.sdk, which is there and correct, but not for the sim architecture (see missing SDK). If I manually symlink the current iPhoneSimulator.sdk as iPhoneSimulator10.0.sdk I get another error\nclang++ -DNSYNC_USE_CPP11_TIMEPOINT -DNSYNC_ATOMIC_CPP11 -I../../platform/c++11 -I../../platform/gcc_no_tls -I../../platform/macos -I../../platform/posix -pthread -I../../public -I../../internal -O -arch i386 -fno-exceptions -stdlib=libc++ -fembed-bitcode  -mios-simulator-version-min=8.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk -fPIC -x c++ -std=c++11 -Werror -Wall -Wextra -pedantic -c ../../internal/common.c\nIn file included from ../../internal/common.c:18:\n../../platform/c++11/platform.h:19:10: fatal error: 'string.h' file not found\n#include <string.h>\n         ^\n1 error generated.\nmake: *** [common.o] Error 1\n\nMacOS Sierra 10.12.6 (16G29)\nXcode Version 8.3.3 (8E3004b)\nApple LLVM version 8.1.0 (clang-802.0.42)\nTarget: x86_64-apple-darwin16.7.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin", "body": "When building TF for iOS from `master` with\r\n\r\n    ./build_all_ios.sh\r\n\r\nThe build fails with\r\n\r\n```\r\nclang++ -x c++ -M -std=c++11 -DNSYNC_USE_CPP11_TIMEPOINT -DNSYNC_ATOMIC_CPP11 -I../../platform/c++11 -I../../platform/gcc_no_tls -I../../platform/macos -I../../platform/posix -pthread -I../../public -I../../internal ../../internal/*.c ../../testing/*.c ../../platform/posix/src/clock_gettime.c ../../platform/c++11/src/nsync_semaphore_mutex.cc ../../platform/posix/src/per_thread_waiter.c ../../platform/c++11/src/yield.cc ../../platform/c++11/src/time_rep_timespec.cc ../../platform/c++11/src/nsync_panic.cc \\\r\n\t\t  ../../platform/c++11/src/start_thread.cc > dependfile\r\nclang++ -DNSYNC_USE_CPP11_TIMEPOINT -DNSYNC_ATOMIC_CPP11 -I../../platform/c++11 -I../../platform/gcc_no_tls -I../../platform/macos -I../../platform/posix -pthread -I../../public -I../../internal -O -arch i386 -fno-exceptions -stdlib=libc++ -fembed-bitcode  -mios-simulator-version-min=8.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk -fPIC -x c++ -std=c++11 -Werror -Wall -Wextra -pedantic -c ../../internal/common.c\r\nclang: error: no such sysroot directory: '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk' [-Werror,-Wmissing-sysroot]\r\nmake: *** [common.o] Error 1\r\n```\r\n\r\nFor device architectures the build uses `iPhoneOS10.3.sdk`, which is there and correct, but not for the sim architecture (see missing SDK). If I manually symlink the current `iPhoneSimulator.sdk` as `iPhoneSimulator10.0.sdk` I get another error\r\n\r\n```\r\nclang++ -DNSYNC_USE_CPP11_TIMEPOINT -DNSYNC_ATOMIC_CPP11 -I../../platform/c++11 -I../../platform/gcc_no_tls -I../../platform/macos -I../../platform/posix -pthread -I../../public -I../../internal -O -arch i386 -fno-exceptions -stdlib=libc++ -fembed-bitcode  -mios-simulator-version-min=8.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.0.sdk -fPIC -x c++ -std=c++11 -Werror -Wall -Wextra -pedantic -c ../../internal/common.c\r\nIn file included from ../../internal/common.c:18:\r\n../../platform/c++11/platform.h:19:10: fatal error: 'string.h' file not found\r\n#include <string.h>\r\n         ^\r\n1 error generated.\r\nmake: *** [common.o] Error 1\r\n```\r\n\r\nMacOS Sierra 10.12.6 (16G29)\r\nXcode Version 8.3.3 (8E3004b)\r\nApple LLVM version 8.1.0 (clang-802.0.42)\r\nTarget: x86_64-apple-darwin16.7.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/316772915", "html_url": "https://github.com/tensorflow/tensorflow/issues/6087#issuecomment-316772915", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6087", "id": 316772915, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjc3MjkxNQ==", "user": {"login": "epiception", "id": 13215333, "node_id": "MDQ6VXNlcjEzMjE1MzMz", "avatar_url": "https://avatars3.githubusercontent.com/u/13215333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/epiception", "html_url": "https://github.com/epiception", "followers_url": "https://api.github.com/users/epiception/followers", "following_url": "https://api.github.com/users/epiception/following{/other_user}", "gists_url": "https://api.github.com/users/epiception/gists{/gist_id}", "starred_url": "https://api.github.com/users/epiception/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/epiception/subscriptions", "organizations_url": "https://api.github.com/users/epiception/orgs", "repos_url": "https://api.github.com/users/epiception/repos", "events_url": "https://api.github.com/users/epiception/events{/privacy}", "received_events_url": "https://api.github.com/users/epiception/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-20T17:22:15Z", "updated_at": "2017-07-20T17:22:15Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6234225\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/NaveenAri\">@NaveenAri</a> facing a similar problem while using a nested map_fn with batch normalization written separately :<br>\n<code>tensorflow.python.framework.errors_impl.InvalidArgumentError: The node 'gradients/map/while/map/while/Conv2D_grad/Conv2DBackpropFilter/Enter' has inputs from different frames. The input 'gradients/map/while/map/while/Conv2D_grad/Conv2DBackpropFilter/StackPop' is in frame 'gradients/map/while/map/while/'. The input 'BatchNorm_1/AssignMovingAvg_1' is in frame ''.</code></p>\n<p>Does your solution ensure that moving_mean and moving_variance also get updated accordingly, similar to normally using <code>tf.control_dependencies(update_ops)</code>?</p>", "body_text": "@NaveenAri facing a similar problem while using a nested map_fn with batch normalization written separately :\ntensorflow.python.framework.errors_impl.InvalidArgumentError: The node 'gradients/map/while/map/while/Conv2D_grad/Conv2DBackpropFilter/Enter' has inputs from different frames. The input 'gradients/map/while/map/while/Conv2D_grad/Conv2DBackpropFilter/StackPop' is in frame 'gradients/map/while/map/while/'. The input 'BatchNorm_1/AssignMovingAvg_1' is in frame ''.\nDoes your solution ensure that moving_mean and moving_variance also get updated accordingly, similar to normally using tf.control_dependencies(update_ops)?", "body": "@NaveenAri facing a similar problem while using a nested map_fn with batch normalization written separately :\r\n`tensorflow.python.framework.errors_impl.InvalidArgumentError: The node 'gradients/map/while/map/while/Conv2D_grad/Conv2DBackpropFilter/Enter' has inputs from different frames. The input 'gradients/map/while/map/while/Conv2D_grad/Conv2DBackpropFilter/StackPop' is in frame 'gradients/map/while/map/while/'. The input 'BatchNorm_1/AssignMovingAvg_1' is in frame ''.`\r\n\r\nDoes your solution ensure that moving_mean and moving_variance also get updated accordingly, similar to normally using `tf.control_dependencies(update_ops)`?"}
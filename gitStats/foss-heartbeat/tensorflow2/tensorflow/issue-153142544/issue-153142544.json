{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2226", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2226/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2226/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2226/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2226", "id": 153142544, "node_id": "MDU6SXNzdWUxNTMxNDI1NDQ=", "number": 2226, "title": "Evaluated expressions of variables differ sometimes when using the GPU", "user": {"login": "alexlee-gk", "id": 839426, "node_id": "MDQ6VXNlcjgzOTQyNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/839426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexlee-gk", "html_url": "https://github.com/alexlee-gk", "followers_url": "https://api.github.com/users/alexlee-gk/followers", "following_url": "https://api.github.com/users/alexlee-gk/following{/other_user}", "gists_url": "https://api.github.com/users/alexlee-gk/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexlee-gk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexlee-gk/subscriptions", "organizations_url": "https://api.github.com/users/alexlee-gk/orgs", "repos_url": "https://api.github.com/users/alexlee-gk/repos", "events_url": "https://api.github.com/users/alexlee-gk/events{/privacy}", "received_events_url": "https://api.github.com/users/alexlee-gk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2016-05-05T00:00:52Z", "updated_at": "2016-06-08T18:53:22Z", "closed_at": "2016-06-08T18:40:49Z", "author_association": "NONE", "body_html": "<p>The evaluated value of the l1 or l2 loss of variables differ sometimes when using the GPU. This seems to happen when the variables are \"large\".</p>\n<p>Even though the difference is not that much in the example below, these differences have resulted in a 98% test accuracy on a network trained on the CPU, but a 10% test accuracy on the same network trained on the GPU.</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04</p>\n<p>Installed version of CUDA and cuDNN: 7.5 and 7.0 <a href=\"https://github.com/tensorflow/tensorflow/files/249768/cuda_info.txt\">cuda_info.txt</a><br>\nGPU: Titan X</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>Which pip package you installed.<br>\npip install --upgrade <a href=\"https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl</a></li>\n<li>The output from python -c \"import tensorflow; print(tensorflow.<strong>version</strong>)\".<br>\npython -c \"import tensorflow; print(tensorflow.<strong>version</strong>)\"I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally<br>\n0.8.0</li>\n</ol>\n<h3>Steps to reproduce</h3>\n<pre><code>import tensorflow as tf\nW1 = tf.Variable(tf.truncated_normal([5, 5, 1, 32], stddev=0.1))\nW2 = tf.Variable(tf.truncated_normal([5, 5, 1, 32], stddev=0.1))\nsess = tf.InteractiveSession()\nsess.run(tf.initialize_all_variables())\nl2 = tf.reduce_sum(W1 * W1) + tf.reduce_sum(W2 * W2)\nfor i in range(100):\n    print('%.10f' % sess.run(l2))\n</code></pre>", "body_text": "The evaluated value of the l1 or l2 loss of variables differ sometimes when using the GPU. This seems to happen when the variables are \"large\".\nEven though the difference is not that much in the example below, these differences have resulted in a 98% test accuracy on a network trained on the CPU, but a 10% test accuracy on the same network trained on the GPU.\nEnvironment info\nOperating System: Ubuntu 14.04\nInstalled version of CUDA and cuDNN: 7.5 and 7.0 cuda_info.txt\nGPU: Titan X\nIf installed from binary pip package, provide:\n\nWhich pip package you installed.\npip install --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\nThe output from python -c \"import tensorflow; print(tensorflow.version)\".\npython -c \"import tensorflow; print(tensorflow.version)\"I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n0.8.0\n\nSteps to reproduce\nimport tensorflow as tf\nW1 = tf.Variable(tf.truncated_normal([5, 5, 1, 32], stddev=0.1))\nW2 = tf.Variable(tf.truncated_normal([5, 5, 1, 32], stddev=0.1))\nsess = tf.InteractiveSession()\nsess.run(tf.initialize_all_variables())\nl2 = tf.reduce_sum(W1 * W1) + tf.reduce_sum(W2 * W2)\nfor i in range(100):\n    print('%.10f' % sess.run(l2))", "body": "The evaluated value of the l1 or l2 loss of variables differ sometimes when using the GPU. This seems to happen when the variables are \"large\".\n\nEven though the difference is not that much in the example below, these differences have resulted in a 98% test accuracy on a network trained on the CPU, but a 10% test accuracy on the same network trained on the GPU.\n### Environment info\n\nOperating System: Ubuntu 14.04\n\nInstalled version of CUDA and cuDNN: 7.5 and 7.0 [cuda_info.txt](https://github.com/tensorflow/tensorflow/files/249768/cuda_info.txt)\nGPU: Titan X\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed.\npip install --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\n2. The output from python -c \"import tensorflow; print(tensorflow.**version**)\".\npython -c \"import tensorflow; print(tensorflow.**version**)\"I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n0.8.0\n### Steps to reproduce\n\n```\nimport tensorflow as tf\nW1 = tf.Variable(tf.truncated_normal([5, 5, 1, 32], stddev=0.1))\nW2 = tf.Variable(tf.truncated_normal([5, 5, 1, 32], stddev=0.1))\nsess = tf.InteractiveSession()\nsess.run(tf.initialize_all_variables())\nl2 = tf.reduce_sum(W1 * W1) + tf.reduce_sum(W2 * W2)\nfor i in range(100):\n    print('%.10f' % sess.run(l2))\n```\n"}
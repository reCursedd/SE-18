{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9413", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9413/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9413/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9413/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9413", "id": 223797262, "node_id": "MDU6SXNzdWUyMjM3OTcyNjI=", "number": 9413, "title": "Android ops - not supporting NCHW data format", "user": {"login": "es007", "id": 4059304, "node_id": "MDQ6VXNlcjQwNTkzMDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/4059304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/es007", "html_url": "https://github.com/es007", "followers_url": "https://api.github.com/users/es007/followers", "following_url": "https://api.github.com/users/es007/following{/other_user}", "gists_url": "https://api.github.com/users/es007/gists{/gist_id}", "starred_url": "https://api.github.com/users/es007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/es007/subscriptions", "organizations_url": "https://api.github.com/users/es007/orgs", "repos_url": "https://api.github.com/users/es007/repos", "events_url": "https://api.github.com/users/es007/events{/privacy}", "received_events_url": "https://api.github.com/users/es007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-04-24T12:06:23Z", "updated_at": "2017-06-16T21:07:35Z", "closed_at": "2017-06-16T21:07:35Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>I'm using my custom tensorflow v1.0.1 model freezed and exported to Android arm-ABI-v7a (I compiled tensorflow 1.0.1 with selective registration for the models ops).</p>\n<p>As a training time optimization we tried to convert the data format to NCHW format (as written in the tensorflow performance tutorial).</p>\n<p>But now, when I run inference on Android, I get the following error in the logcat:</p>\n<p>E/native: tensorflow_inference_jni.cc:233 Error during inference: Invalid argument: CPU BiasOp only supports NHWC. [[Node: conv_layer_1/BiasAdd = BiasAdd[T=DT_FLOAT, data_format=\"NCHW\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"](conv_layer_1/conv_l11, bc11_init)]]</p>\n<p>Are you going to add NCHW support for android CPU ops in the future versions?</p>\n<p>Thanks,<br>\nEran</p>\n<h3>System information</h3>\n<ul>\n<li>*<em>Have I written custom code: Yes - custom model</em>:</li>\n<li>**OS Linux Ubuntu 16.04:</li>\n<li>**TensorFlow installed from source:</li>\n<li>**TensorFlow version 1.0.1:</li>\n<li>*<em>Bazel version 0.4.5</em>:</li>\n<li>**CUDA/cuDNN version 5.1.10:</li>\n<li>**GPU model and memory GTX 1080 TI:</li>\n</ul>", "body_text": "Hi,\nI'm using my custom tensorflow v1.0.1 model freezed and exported to Android arm-ABI-v7a (I compiled tensorflow 1.0.1 with selective registration for the models ops).\nAs a training time optimization we tried to convert the data format to NCHW format (as written in the tensorflow performance tutorial).\nBut now, when I run inference on Android, I get the following error in the logcat:\nE/native: tensorflow_inference_jni.cc:233 Error during inference: Invalid argument: CPU BiasOp only supports NHWC. [[Node: conv_layer_1/BiasAdd = BiasAdd[T=DT_FLOAT, data_format=\"NCHW\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"](conv_layer_1/conv_l11, bc11_init)]]\nAre you going to add NCHW support for android CPU ops in the future versions?\nThanks,\nEran\nSystem information\n\n*Have I written custom code: Yes - custom model:\n**OS Linux Ubuntu 16.04:\n**TensorFlow installed from source:\n**TensorFlow version 1.0.1:\n*Bazel version 0.4.5:\n**CUDA/cuDNN version 5.1.10:\n**GPU model and memory GTX 1080 TI:", "body": "Hi,\r\n\r\nI'm using my custom tensorflow v1.0.1 model freezed and exported to Android arm-ABI-v7a (I compiled tensorflow 1.0.1 with selective registration for the models ops).\r\n\r\nAs a training time optimization we tried to convert the data format to NCHW format (as written in the tensorflow performance tutorial).\r\n\r\nBut now, when I run inference on Android, I get the following error in the logcat:\r\n\r\n E/native: tensorflow_inference_jni.cc:233 Error during inference: Invalid argument: CPU BiasOp only supports NHWC. [[Node: conv_layer_1/BiasAdd = BiasAdd[T=DT_FLOAT, data_format=\"NCHW\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"](conv_layer_1/conv_l11, bc11_init)]]\r\n\r\n\r\nAre you going to add NCHW support for android CPU ops in the future versions?\r\n\r\nThanks,\r\nEran\r\n\r\n\r\n### System information\r\n- **Have I written custom code: Yes - custom model*:\r\n- **OS Linux Ubuntu 16.04:\r\n- **TensorFlow installed from source:\r\n- **TensorFlow version 1.0.1:\r\n- **Bazel version 0.4.5*:\r\n- **CUDA/cuDNN version 5.1.10:\r\n- **GPU model and memory GTX 1080 TI:\r\n\r\n"}
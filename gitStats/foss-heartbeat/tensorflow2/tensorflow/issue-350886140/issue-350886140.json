{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21635", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21635/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21635/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21635/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21635", "id": 350886140, "node_id": "MDU6SXNzdWUzNTA4ODYxNDA=", "number": 21635, "title": "Can't compile frozen facenet graph ", "user": {"login": "Dima00782", "id": 5621716, "node_id": "MDQ6VXNlcjU2MjE3MTY=", "avatar_url": "https://avatars1.githubusercontent.com/u/5621716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dima00782", "html_url": "https://github.com/Dima00782", "followers_url": "https://api.github.com/users/Dima00782/followers", "following_url": "https://api.github.com/users/Dima00782/following{/other_user}", "gists_url": "https://api.github.com/users/Dima00782/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dima00782/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dima00782/subscriptions", "organizations_url": "https://api.github.com/users/Dima00782/orgs", "repos_url": "https://api.github.com/users/Dima00782/repos", "events_url": "https://api.github.com/users/Dima00782/events{/privacy}", "received_events_url": "https://api.github.com/users/Dima00782/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "robieta", "id": 13089297, "node_id": "MDQ6VXNlcjEzMDg5Mjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/13089297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robieta", "html_url": "https://github.com/robieta", "followers_url": "https://api.github.com/users/robieta/followers", "following_url": "https://api.github.com/users/robieta/following{/other_user}", "gists_url": "https://api.github.com/users/robieta/gists{/gist_id}", "starred_url": "https://api.github.com/users/robieta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robieta/subscriptions", "organizations_url": "https://api.github.com/users/robieta/orgs", "repos_url": "https://api.github.com/users/robieta/repos", "events_url": "https://api.github.com/users/robieta/events{/privacy}", "received_events_url": "https://api.github.com/users/robieta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "robieta", "id": 13089297, "node_id": "MDQ6VXNlcjEzMDg5Mjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/13089297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robieta", "html_url": "https://github.com/robieta", "followers_url": "https://api.github.com/users/robieta/followers", "following_url": "https://api.github.com/users/robieta/following{/other_user}", "gists_url": "https://api.github.com/users/robieta/gists{/gist_id}", "starred_url": "https://api.github.com/users/robieta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robieta/subscriptions", "organizations_url": "https://api.github.com/users/robieta/orgs", "repos_url": "https://api.github.com/users/robieta/repos", "events_url": "https://api.github.com/users/robieta/events{/privacy}", "received_events_url": "https://api.github.com/users/robieta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-08-15T16:58:30Z", "updated_at": "2018-08-20T08:34:22Z", "closed_at": "2018-08-20T08:34:22Z", "author_association": "NONE", "body_html": "<p>Have I written custom code: NO<br>\nOS Platform and Distribution: Ubuntu 16.04 x86_64<br>\nTensorFlow installed from: github, from source<br>\nTensorFlow version: 1.9<br>\nBazel version: 0.16.1<br>\nCUDA/cuDNN version: N/A<br>\nGPU model and memory: N/A<br>\nExact command to reproduce:<br>\n<code>./tfcompile --graph=frozen_20170512-110547.pb --config=frozen_20170512-110547.pbtxt --cpp_class=\"my_super_class\" --target_features=\"+avx2\"</code><br>\nMobile device: No</p>\n<p>My .pbtx:</p>\n<pre><code>feed {\n  id { node_name: \"input\" }\n  shape {\n    dim { size: 160 }\n    dim { size: 160 }\n  }\n}\n\nfetch {\n  id { node_name: \"embeddings\" }\n}\n</code></pre>\n<p>And I've got this:<br>\nINVALID ARGUMENTS: Unable to functionalize control flow in graph: Switch ('InceptionResnetV1/Conv2d_1a_3x3/BatchNorm/cond/Switch_1') has operands ('InceptionResnetV1/Conv2d_1a_3x3/BatchNorm/cond/Switch_1/Switch' and 'InceptionResnetV1/Conv2d_1a_3x3/BatchNorm/cond/pred_id') that have different switch depths (1 != 0)</p>\n<p>What Do I do wrong?</p>", "body_text": "Have I written custom code: NO\nOS Platform and Distribution: Ubuntu 16.04 x86_64\nTensorFlow installed from: github, from source\nTensorFlow version: 1.9\nBazel version: 0.16.1\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce:\n./tfcompile --graph=frozen_20170512-110547.pb --config=frozen_20170512-110547.pbtxt --cpp_class=\"my_super_class\" --target_features=\"+avx2\"\nMobile device: No\nMy .pbtx:\nfeed {\n  id { node_name: \"input\" }\n  shape {\n    dim { size: 160 }\n    dim { size: 160 }\n  }\n}\n\nfetch {\n  id { node_name: \"embeddings\" }\n}\n\nAnd I've got this:\nINVALID ARGUMENTS: Unable to functionalize control flow in graph: Switch ('InceptionResnetV1/Conv2d_1a_3x3/BatchNorm/cond/Switch_1') has operands ('InceptionResnetV1/Conv2d_1a_3x3/BatchNorm/cond/Switch_1/Switch' and 'InceptionResnetV1/Conv2d_1a_3x3/BatchNorm/cond/pred_id') that have different switch depths (1 != 0)\nWhat Do I do wrong?", "body": "Have I written custom code: NO\r\nOS Platform and Distribution: Ubuntu 16.04 x86_64\r\nTensorFlow installed from: github, from source\r\nTensorFlow version: 1.9\r\nBazel version: 0.16.1\r\nCUDA/cuDNN version: N/A\r\nGPU model and memory: N/A\r\nExact command to reproduce: \r\n`./tfcompile --graph=frozen_20170512-110547.pb --config=frozen_20170512-110547.pbtxt --cpp_class=\"my_super_class\" --target_features=\"+avx2\"`\r\nMobile device: No\r\n\r\nMy .pbtx:\r\n```\r\nfeed {\r\n  id { node_name: \"input\" }\r\n  shape {\r\n    dim { size: 160 }\r\n    dim { size: 160 }\r\n  }\r\n}\r\n\r\nfetch {\r\n  id { node_name: \"embeddings\" }\r\n}\r\n```\r\nAnd I've got this:\r\nINVALID ARGUMENTS: Unable to functionalize control flow in graph: Switch ('InceptionResnetV1/Conv2d_1a_3x3/BatchNorm/cond/Switch_1') has operands ('InceptionResnetV1/Conv2d_1a_3x3/BatchNorm/cond/Switch_1/Switch' and 'InceptionResnetV1/Conv2d_1a_3x3/BatchNorm/cond/pred_id') that have different switch depths (1 != 0)\r\n \r\nWhat Do I do wrong?"}
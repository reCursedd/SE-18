{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6462", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6462/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6462/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6462/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/6462", "id": 197268722, "node_id": "MDExOlB1bGxSZXF1ZXN0OTkxNzE1Mjk=", "number": 6462, "title": "Write rules to construct headers for jpeg-turbo using existing templates.", "user": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-22T21:20:02Z", "updated_at": "2016-12-24T08:58:53Z", "closed_at": "2016-12-24T08:58:53Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/6462", "html_url": "https://github.com/tensorflow/tensorflow/pull/6462", "diff_url": "https://github.com/tensorflow/tensorflow/pull/6462.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/6462.patch"}, "body_html": "<p><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #6442.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"197032832\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6442\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6442/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/6442\">#6442</a><br>\nTest build:<br>\n<a href=\"http://ci.tensorflow.org/view/Experimental/job/exp-win-bzl/8/console\" rel=\"nofollow\">http://ci.tensorflow.org/view/Experimental/job/exp-win-bzl/8/console</a></p>\n<p>Had to use a few hacks to get this fully working.<br>\nBazel did not allow me to add a <code>dict</code> type with a selector.<br>\nIt even did not let me use a selector in <code>expand_template</code>'s substitutions field.<br>\nSo I expanded the selector in genrule to accomodate simd/nosimd differences.</p>\n<p>I think I can also get rid of my <code>expand_template.bzl</code> , and use <code>expand_header_template</code> in <code>llvm.bzl</code>.<br>\nBut I am not sure how nice cross 3p usage. Maybe I can create a folder <code>third_party/skylark</code> and pull the skylark rules we are defining to that folder. Or simply <code>third_party/common.bzl</code><br>\nPlease let me know which looks nicer.</p>", "body_text": "Fixes #6442\nTest build:\nhttp://ci.tensorflow.org/view/Experimental/job/exp-win-bzl/8/console\nHad to use a few hacks to get this fully working.\nBazel did not allow me to add a dict type with a selector.\nIt even did not let me use a selector in expand_template's substitutions field.\nSo I expanded the selector in genrule to accomodate simd/nosimd differences.\nI think I can also get rid of my expand_template.bzl , and use expand_header_template in llvm.bzl.\nBut I am not sure how nice cross 3p usage. Maybe I can create a folder third_party/skylark and pull the skylark rules we are defining to that folder. Or simply third_party/common.bzl\nPlease let me know which looks nicer.", "body": "Fixes #6442 \r\nTest build:\r\nhttp://ci.tensorflow.org/view/Experimental/job/exp-win-bzl/8/console\r\n\r\nHad to use a few hacks to get this fully working.\r\nBazel did not allow me to add a `dict` type with a selector.\r\nIt even did not let me use a selector in `expand_template`'s substitutions field.\r\nSo I expanded the selector in genrule to accomodate simd/nosimd differences.\r\n\r\nI think I can also get rid of my `expand_template.bzl` , and use `expand_header_template` in `llvm.bzl`.\r\nBut I am not sure how nice cross 3p usage. Maybe I can create a folder `third_party/skylark` and pull the skylark rules we are defining to that folder. Or simply `third_party/common.bzl`\r\nPlease let me know which looks nicer."}
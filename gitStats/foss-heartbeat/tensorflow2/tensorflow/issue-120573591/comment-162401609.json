{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/162401609", "html_url": "https://github.com/tensorflow/tensorflow/issues/418#issuecomment-162401609", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/418", "id": 162401609, "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjQwMTYwOQ==", "user": {"login": "hugman", "id": 2958929, "node_id": "MDQ6VXNlcjI5NTg5Mjk=", "avatar_url": "https://avatars3.githubusercontent.com/u/2958929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugman", "html_url": "https://github.com/hugman", "followers_url": "https://api.github.com/users/hugman/followers", "following_url": "https://api.github.com/users/hugman/following{/other_user}", "gists_url": "https://api.github.com/users/hugman/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugman/subscriptions", "organizations_url": "https://api.github.com/users/hugman/orgs", "repos_url": "https://api.github.com/users/hugman/repos", "events_url": "https://api.github.com/users/hugman/events{/privacy}", "received_events_url": "https://api.github.com/users/hugman/received_events", "type": "User", "site_admin": false}, "created_at": "2015-12-07T03:35:38Z", "updated_at": "2015-12-07T03:39:08Z", "author_association": "NONE", "body_html": "<p>method 2 - errors (with /cpu:0 option)</p>\n<pre><code>...\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 24\n-0.196204\n!!! Training Time !!!\nW tensorflow/core/common_runtime/executor.cc:1027] 0x3ae60b0 Compute status: Invalid argument: ConcatOp : Expected concatenating dimensions in the range [0, 0), but got 0\n         [[Node: gradients/concat_7 = Concat[N=3, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](gradients/concat_7/concat_dim, Squeeze, Squeeze_2, Squeeze_4)]]\nTraceback (most recent call last):\n  File \"tf_gather_test.py\", line 76, in &lt;module&gt;\n    _ = sess.run(train_op, feed_dict=feed_data) # &lt;-- error!\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 345, in run\n    results = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 419, in _do_run\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: ConcatOp : Expected concatenating dimensions in the range [0, 0), but got 0\n         [[Node: gradients/concat_7 = Concat[N=3, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](gradients/concat_7/concat_dim, Squeeze, Squeeze_2, Squeeze_4)]]\nCaused by op u'gradients/concat_7', defined at:\n  File \"tf_gather_test.py\", line 62, in &lt;module&gt;\n    train_op    = optimizer.minimize(loss, global_step=global_step)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 165, in minimize\n    gate_gradients=gate_gradients)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 205, in compute_gradients\n    loss, var_list, gate_gradients=(gate_gradients == Optimizer.GATE_OP))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients.py\", line 385, in gradients\n    aggregation_method)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients.py\", line 605, in _AggregatedGrads\n    array_ops.concat(0, [x.indices for x in out_grad]),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 290, in concat\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 70, in _concat\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 988, in __init__\n    self._traceback = _extract_stack()\n</code></pre>\n<p>method 2 errors - with /gpu:0 option</p>\n<pre><code>I tensorflow/core/common_runtime/gpu/gpu_device.cc:643] Creating TensorFlow device (/gpu:1) -&gt; (device: 1, name: Tesla K80, pci bus id: 0000:85:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 284540928\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 11286332212\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 24\nTraceback (most recent call last):\n  File \"tf_gather_test.py\", line 66, in &lt;module&gt;\n    sess.run(init)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 345, in run\n    results = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 419, in _do_run\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: Cannot assign a device to node 'global_step': Could not satisfy explicit device specification '/gpu:0'\n         [[Node: global_step = Variable[container=\"\", dtype=DT_INT32, shape=[], shared_name=\"\", _device=\"/gpu:0\"]()]]\nCaused by op u'global_step', defined at:\n  File \"tf_gather_test.py\", line 61, in &lt;module&gt;\n    global_step = tf.Variable(0, name='global_step', trainable=False)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 187, in __init__\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/state_ops.py\", line 96, in variable_op\n    container=container, shared_name=shared_name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_state_ops.py\", line 334, in _variable\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 988, in __init__\n    self._traceback = _extract_stack()\n</code></pre>", "body_text": "method 2 - errors (with /cpu:0 option)\n...\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 24\n-0.196204\n!!! Training Time !!!\nW tensorflow/core/common_runtime/executor.cc:1027] 0x3ae60b0 Compute status: Invalid argument: ConcatOp : Expected concatenating dimensions in the range [0, 0), but got 0\n         [[Node: gradients/concat_7 = Concat[N=3, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](gradients/concat_7/concat_dim, Squeeze, Squeeze_2, Squeeze_4)]]\nTraceback (most recent call last):\n  File \"tf_gather_test.py\", line 76, in <module>\n    _ = sess.run(train_op, feed_dict=feed_data) # <-- error!\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 345, in run\n    results = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 419, in _do_run\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: ConcatOp : Expected concatenating dimensions in the range [0, 0), but got 0\n         [[Node: gradients/concat_7 = Concat[N=3, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](gradients/concat_7/concat_dim, Squeeze, Squeeze_2, Squeeze_4)]]\nCaused by op u'gradients/concat_7', defined at:\n  File \"tf_gather_test.py\", line 62, in <module>\n    train_op    = optimizer.minimize(loss, global_step=global_step)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 165, in minimize\n    gate_gradients=gate_gradients)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 205, in compute_gradients\n    loss, var_list, gate_gradients=(gate_gradients == Optimizer.GATE_OP))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients.py\", line 385, in gradients\n    aggregation_method)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients.py\", line 605, in _AggregatedGrads\n    array_ops.concat(0, [x.indices for x in out_grad]),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 290, in concat\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 70, in _concat\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 988, in __init__\n    self._traceback = _extract_stack()\n\nmethod 2 errors - with /gpu:0 option\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:643] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla K80, pci bus id: 0000:85:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 284540928\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 11286332212\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 24\nTraceback (most recent call last):\n  File \"tf_gather_test.py\", line 66, in <module>\n    sess.run(init)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 345, in run\n    results = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 419, in _do_run\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: Cannot assign a device to node 'global_step': Could not satisfy explicit device specification '/gpu:0'\n         [[Node: global_step = Variable[container=\"\", dtype=DT_INT32, shape=[], shared_name=\"\", _device=\"/gpu:0\"]()]]\nCaused by op u'global_step', defined at:\n  File \"tf_gather_test.py\", line 61, in <module>\n    global_step = tf.Variable(0, name='global_step', trainable=False)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 187, in __init__\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/state_ops.py\", line 96, in variable_op\n    container=container, shared_name=shared_name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_state_ops.py\", line 334, in _variable\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 988, in __init__\n    self._traceback = _extract_stack()", "body": "method 2 - errors (with /cpu:0 option)\n\n```\n...\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 24\n-0.196204\n!!! Training Time !!!\nW tensorflow/core/common_runtime/executor.cc:1027] 0x3ae60b0 Compute status: Invalid argument: ConcatOp : Expected concatenating dimensions in the range [0, 0), but got 0\n         [[Node: gradients/concat_7 = Concat[N=3, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](gradients/concat_7/concat_dim, Squeeze, Squeeze_2, Squeeze_4)]]\nTraceback (most recent call last):\n  File \"tf_gather_test.py\", line 76, in <module>\n    _ = sess.run(train_op, feed_dict=feed_data) # <-- error!\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 345, in run\n    results = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 419, in _do_run\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: ConcatOp : Expected concatenating dimensions in the range [0, 0), but got 0\n         [[Node: gradients/concat_7 = Concat[N=3, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](gradients/concat_7/concat_dim, Squeeze, Squeeze_2, Squeeze_4)]]\nCaused by op u'gradients/concat_7', defined at:\n  File \"tf_gather_test.py\", line 62, in <module>\n    train_op    = optimizer.minimize(loss, global_step=global_step)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 165, in minimize\n    gate_gradients=gate_gradients)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 205, in compute_gradients\n    loss, var_list, gate_gradients=(gate_gradients == Optimizer.GATE_OP))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients.py\", line 385, in gradients\n    aggregation_method)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients.py\", line 605, in _AggregatedGrads\n    array_ops.concat(0, [x.indices for x in out_grad]),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 290, in concat\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 70, in _concat\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 988, in __init__\n    self._traceback = _extract_stack()\n```\n\nmethod 2 errors - with /gpu:0 option\n\n```\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:643] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla K80, pci bus id: 0000:85:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 284540928\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 11286332212\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 24\nTraceback (most recent call last):\n  File \"tf_gather_test.py\", line 66, in <module>\n    sess.run(init)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 345, in run\n    results = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 419, in _do_run\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: Cannot assign a device to node 'global_step': Could not satisfy explicit device specification '/gpu:0'\n         [[Node: global_step = Variable[container=\"\", dtype=DT_INT32, shape=[], shared_name=\"\", _device=\"/gpu:0\"]()]]\nCaused by op u'global_step', defined at:\n  File \"tf_gather_test.py\", line 61, in <module>\n    global_step = tf.Variable(0, name='global_step', trainable=False)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 187, in __init__\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/state_ops.py\", line 96, in variable_op\n    container=container, shared_name=shared_name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_state_ops.py\", line 334, in _variable\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 988, in __init__\n    self._traceback = _extract_stack()\n```\n"}
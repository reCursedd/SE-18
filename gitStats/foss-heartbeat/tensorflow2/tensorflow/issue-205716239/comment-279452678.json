{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/279452678", "html_url": "https://github.com/tensorflow/tensorflow/issues/7306#issuecomment-279452678", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7306", "id": 279452678, "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTQ1MjY3OA==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-13T16:58:32Z", "updated_at": "2017-02-13T16:58:32Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Unfortunately I don't have easy access to a Windows Server 2012 box, so I haven't been able to reproduce the problem you are seeing. There is no obvious platform dependence in the <code>file_io</code> library that would explain different behavior on Windows Server 2012 and Windows 10.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=144114\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rohan100jain\">@rohan100jain</a>, since you wrote that library, can you suggest what steps could be useful to debug this further?</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=17458994\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mawah\">@mawah</a>, based on my high-level understanding of the file system code, the problem stems from a mismatch between the length of the file (as reported by <a href=\"https://github.com/tensorflow/tensorflow/blob/1bbb52426bd4f8046400731100b11e9ca767d303/tensorflow/python/lib/io/file_io.py#L470\"><code>file_io.stat()</code></a>) and the number of bytes that can be read from the file. When I ran your program, <code>labels.txt</code> is 10 bytes on disk (presumably because the <code>\\n</code> becomes <code>\\r\\n</code>), and the string read back in has length 10 (and contains the added <code>\\r</code> characters). Since you have access to both platforms, can you try to identify where the mismatch creeps in?</p>", "body_text": "Unfortunately I don't have easy access to a Windows Server 2012 box, so I haven't been able to reproduce the problem you are seeing. There is no obvious platform dependence in the file_io library that would explain different behavior on Windows Server 2012 and Windows 10.\n@rohan100jain, since you wrote that library, can you suggest what steps could be useful to debug this further?\n@mawah, based on my high-level understanding of the file system code, the problem stems from a mismatch between the length of the file (as reported by file_io.stat()) and the number of bytes that can be read from the file. When I ran your program, labels.txt is 10 bytes on disk (presumably because the \\n becomes \\r\\n), and the string read back in has length 10 (and contains the added \\r characters). Since you have access to both platforms, can you try to identify where the mismatch creeps in?", "body": "Unfortunately I don't have easy access to a Windows Server 2012 box, so I haven't been able to reproduce the problem you are seeing. There is no obvious platform dependence in the `file_io` library that would explain different behavior on Windows Server 2012 and Windows 10.\r\n\r\n@rohan100jain, since you wrote that library, can you suggest what steps could be useful to debug this further?\r\n\r\n@mawah, based on my high-level understanding of the file system code, the problem stems from a mismatch between the length of the file (as reported by [`file_io.stat()`](https://github.com/tensorflow/tensorflow/blob/1bbb52426bd4f8046400731100b11e9ca767d303/tensorflow/python/lib/io/file_io.py#L470)) and the number of bytes that can be read from the file. When I ran your program, `labels.txt` is 10 bytes on disk (presumably because the `\\n` becomes `\\r\\n`), and the string read back in has length 10 (and contains the added `\\r` characters). Since you have access to both platforms, can you try to identify where the mismatch creeps in?"}
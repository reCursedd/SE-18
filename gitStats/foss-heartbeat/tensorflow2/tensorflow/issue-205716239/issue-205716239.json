{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7306", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7306/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7306/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7306/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7306", "id": 205716239, "node_id": "MDU6SXNzdWUyMDU3MTYyMzk=", "number": 7306, "title": "OutOfRangeError/Early EOF on file read in Windows Server 2012", "user": {"login": "mawah", "id": 17458994, "node_id": "MDQ6VXNlcjE3NDU4OTk0", "avatar_url": "https://avatars3.githubusercontent.com/u/17458994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mawah", "html_url": "https://github.com/mawah", "followers_url": "https://api.github.com/users/mawah/followers", "following_url": "https://api.github.com/users/mawah/following{/other_user}", "gists_url": "https://api.github.com/users/mawah/gists{/gist_id}", "starred_url": "https://api.github.com/users/mawah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mawah/subscriptions", "organizations_url": "https://api.github.com/users/mawah/orgs", "repos_url": "https://api.github.com/users/mawah/repos", "events_url": "https://api.github.com/users/mawah/events{/privacy}", "received_events_url": "https://api.github.com/users/mawah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 20, "created_at": "2017-02-06T21:41:47Z", "updated_at": "2017-03-30T04:01:20Z", "closed_at": "2017-02-27T14:50:07Z", "author_association": "NONE", "body_html": "<p>Hi folks,</p>\n<p>I am finding that tensorflow code snippets which ran on Windows 10 are failing on Windows Server 2012/NTFS. In particular, anytime I try to load a file (with <code>tf.gfile.Open</code>, <code>tf.gfile.FastGFile</code>, or <code>tf.contrib.slim.assign_from_checkpoint_fn</code>), I encounter an \"out of range\" error.</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>I found <a href=\"https://github.com/tensorflow/tensorflow/issues/6791\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6791/hovercard\">Git issue #6791 (Contrib support for Windows) </a> where it was suggested that the fault lies with contrib packages. However, the code sample I provide below displays the problem without using any contrib imports.</p>\n<h3>Environment info</h3>\n<p>Operating System: Windows Server 2012 R2</p>\n<p>Installed version of CUDA and cuDNN: N/A<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>A link to the pip package you installed: <a href=\"https://pypi.python.org/packages/64/a3/0054a3329579de44d557f491adbcaf8127809a7992bc46af80f0a589e29b/tensorflow-0.12.1-cp35-cp35m-win_amd64.whl\" rel=\"nofollow\">tensorflow-0.12.1-cp35-cp35m-win_amd64.whl</a></li>\n<li>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>. <strong>0.12.1</strong></li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<pre><code>with tf.Graph().as_default():\n        with tf.Session('') as sess:\n                image_data = tf.gfile.FastGFile(filepath_to_image, 'r').read()\n---------------------------------------------------------------------------\nOutOfRangeError                           Traceback (most recent call last)\n&lt;ipython-input-11-a7847d42df75&gt; in &lt;module&gt;()\n      1 with tf.Graph().as_default():\n      2     with tf.Session('') as sess:\n----&gt; 3         image_data = tf.gfile.FastGFile(training_filenames[0], 'r').read()\nC:\\Anaconda\\envs\\py35\\lib\\site-packages\\tensorflow\\python\\lib\\io\\file_io.py in read(self, n)\n    110       else:\n    111         length = n\n--&gt; 112       return pywrap_tensorflow.ReadFromStream(self._read_buf, length, status)\n    113 \n    114   def seek(self, position):\nC:\\Anaconda\\envs\\py35\\lib\\contextlib.py in __exit__(self, type, value, traceback)\n     64         if type is None:\n     65             try:\n---&gt; 66                 next(self.gen)\n     67             except StopIteration:\n     68                 return\nC:\\Anaconda\\envs\\py35\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py in raise_exception_on_not_ok_status()\n    467           None, None,\n    468           compat.as_text(pywrap_tensorflow.TF_Message(status)),\n--&gt; 469           pywrap_tensorflow.TF_GetCode(status))\n    470   finally:\n    471     pywrap_tensorflow.TF_DeleteStatus(status)\nOutOfRangeError: reached end of file\n</code></pre>\n<p>A similar error is encountered when reading a text file, and a more complicated DataLossError occurs when trying to load a model from a checkpoint (but the trace includes references to \"out of range\" errors, so I assume the same underlying problem is responsible).</p>\n<p>The same code snippet gives no error and returns the image byte data when run on the same version of Tensorflow on Windows 10 (also NTFS).</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>I can workaround this problem for images and text files by using native Python to read the files. However, I really need to use tensorflow built-ins to e.g. read a trained model from a checkpoint.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).</p>\n<p>See above for output of MWE.</p>\n<p>Thanks very much for your help!</p>", "body_text": "Hi folks,\nI am finding that tensorflow code snippets which ran on Windows 10 are failing on Windows Server 2012/NTFS. In particular, anytime I try to load a file (with tf.gfile.Open, tf.gfile.FastGFile, or tf.contrib.slim.assign_from_checkpoint_fn), I encounter an \"out of range\" error.\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nI found Git issue #6791 (Contrib support for Windows)  where it was suggested that the fault lies with contrib packages. However, the code sample I provide below displays the problem without using any contrib imports.\nEnvironment info\nOperating System: Windows Server 2012 R2\nInstalled version of CUDA and cuDNN: N/A\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\nIf installed from binary pip package, provide:\n\nA link to the pip package you installed: tensorflow-0.12.1-cp35-cp35m-win_amd64.whl\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\". 0.12.1\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nwith tf.Graph().as_default():\n        with tf.Session('') as sess:\n                image_data = tf.gfile.FastGFile(filepath_to_image, 'r').read()\n---------------------------------------------------------------------------\nOutOfRangeError                           Traceback (most recent call last)\n<ipython-input-11-a7847d42df75> in <module>()\n      1 with tf.Graph().as_default():\n      2     with tf.Session('') as sess:\n----> 3         image_data = tf.gfile.FastGFile(training_filenames[0], 'r').read()\nC:\\Anaconda\\envs\\py35\\lib\\site-packages\\tensorflow\\python\\lib\\io\\file_io.py in read(self, n)\n    110       else:\n    111         length = n\n--> 112       return pywrap_tensorflow.ReadFromStream(self._read_buf, length, status)\n    113 \n    114   def seek(self, position):\nC:\\Anaconda\\envs\\py35\\lib\\contextlib.py in __exit__(self, type, value, traceback)\n     64         if type is None:\n     65             try:\n---> 66                 next(self.gen)\n     67             except StopIteration:\n     68                 return\nC:\\Anaconda\\envs\\py35\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py in raise_exception_on_not_ok_status()\n    467           None, None,\n    468           compat.as_text(pywrap_tensorflow.TF_Message(status)),\n--> 469           pywrap_tensorflow.TF_GetCode(status))\n    470   finally:\n    471     pywrap_tensorflow.TF_DeleteStatus(status)\nOutOfRangeError: reached end of file\n\nA similar error is encountered when reading a text file, and a more complicated DataLossError occurs when trying to load a model from a checkpoint (but the trace includes references to \"out of range\" errors, so I assume the same underlying problem is responsible).\nThe same code snippet gives no error and returns the image byte data when run on the same version of Tensorflow on Windows 10 (also NTFS).\nWhat other attempted solutions have you tried?\nI can workaround this problem for images and text files by using native Python to read the files. However, I really need to use tensorflow built-ins to e.g. read a trained model from a checkpoint.\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).\nSee above for output of MWE.\nThanks very much for your help!", "body": "Hi folks,\r\n\r\nI am finding that tensorflow code snippets which ran on Windows 10 are failing on Windows Server 2012/NTFS. In particular, anytime I try to load a file (with `tf.gfile.Open`, `tf.gfile.FastGFile`, or `tf.contrib.slim.assign_from_checkpoint_fn`), I encounter an \"out of range\" error.\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n\r\nI found [Git issue #6791 (Contrib support for Windows) ](https://github.com/tensorflow/tensorflow/issues/6791) where it was suggested that the fault lies with contrib packages. However, the code sample I provide below displays the problem without using any contrib imports.\r\n\r\n### Environment info\r\nOperating System: Windows Server 2012 R2\r\n\r\nInstalled version of CUDA and cuDNN: N/A\r\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\r\n\r\nIf installed from binary pip package, provide:\r\n\r\n1. A link to the pip package you installed: [tensorflow-0.12.1-cp35-cp35m-win_amd64.whl](https://pypi.python.org/packages/64/a3/0054a3329579de44d557f491adbcaf8127809a7992bc46af80f0a589e29b/tensorflow-0.12.1-cp35-cp35m-win_amd64.whl)\r\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`. **0.12.1**\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n\r\n```\r\nwith tf.Graph().as_default():\r\n        with tf.Session('') as sess:\r\n                image_data = tf.gfile.FastGFile(filepath_to_image, 'r').read()\r\n---------------------------------------------------------------------------\r\nOutOfRangeError                           Traceback (most recent call last)\r\n<ipython-input-11-a7847d42df75> in <module>()\r\n      1 with tf.Graph().as_default():\r\n      2     with tf.Session('') as sess:\r\n----> 3         image_data = tf.gfile.FastGFile(training_filenames[0], 'r').read()\r\nC:\\Anaconda\\envs\\py35\\lib\\site-packages\\tensorflow\\python\\lib\\io\\file_io.py in read(self, n)\r\n    110       else:\r\n    111         length = n\r\n--> 112       return pywrap_tensorflow.ReadFromStream(self._read_buf, length, status)\r\n    113 \r\n    114   def seek(self, position):\r\nC:\\Anaconda\\envs\\py35\\lib\\contextlib.py in __exit__(self, type, value, traceback)\r\n     64         if type is None:\r\n     65             try:\r\n---> 66                 next(self.gen)\r\n     67             except StopIteration:\r\n     68                 return\r\nC:\\Anaconda\\envs\\py35\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py in raise_exception_on_not_ok_status()\r\n    467           None, None,\r\n    468           compat.as_text(pywrap_tensorflow.TF_Message(status)),\r\n--> 469           pywrap_tensorflow.TF_GetCode(status))\r\n    470   finally:\r\n    471     pywrap_tensorflow.TF_DeleteStatus(status)\r\nOutOfRangeError: reached end of file\r\n```\r\n\r\nA similar error is encountered when reading a text file, and a more complicated DataLossError occurs when trying to load a model from a checkpoint (but the trace includes references to \"out of range\" errors, so I assume the same underlying problem is responsible).\r\n\r\nThe same code snippet gives no error and returns the image byte data when run on the same version of Tensorflow on Windows 10 (also NTFS).\r\n\r\n### What other attempted solutions have you tried?\r\n\r\nI can workaround this problem for images and text files by using native Python to read the files. However, I really need to use tensorflow built-ins to e.g. read a trained model from a checkpoint.\r\n\r\n### Logs or other output that would be helpful\r\n(If logs are large, please upload as attachment or provide link).\r\n\r\nSee above for output of MWE.\r\n\r\nThanks very much for your help!"}
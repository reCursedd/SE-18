{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/215461975", "html_url": "https://github.com/tensorflow/tensorflow/issues/2047#issuecomment-215461975", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2047", "id": 215461975, "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTQ2MTk3NQ==", "user": {"login": "InsightDev", "id": 18297757, "node_id": "MDQ6VXNlcjE4Mjk3NzU3", "avatar_url": "https://avatars0.githubusercontent.com/u/18297757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/InsightDev", "html_url": "https://github.com/InsightDev", "followers_url": "https://api.github.com/users/InsightDev/followers", "following_url": "https://api.github.com/users/InsightDev/following{/other_user}", "gists_url": "https://api.github.com/users/InsightDev/gists{/gist_id}", "starred_url": "https://api.github.com/users/InsightDev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/InsightDev/subscriptions", "organizations_url": "https://api.github.com/users/InsightDev/orgs", "repos_url": "https://api.github.com/users/InsightDev/repos", "events_url": "https://api.github.com/users/InsightDev/events{/privacy}", "received_events_url": "https://api.github.com/users/InsightDev/received_events", "type": "User", "site_admin": false}, "created_at": "2016-04-28T15:18:56Z", "updated_at": "2016-04-29T09:54:25Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3376817\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/andrewharp\">@andrewharp</a></p>\n<p>\"Not found: Could not find session factory for DIRECT_SESSION\"</p>\n<p>It seems that the DirectSessionFactory is not been regist.</p>\n<p>So I browse the codes, and in the end of direct_session.cc, i find:</p>\n<p>//////////<br>\nclass DirectSessionFactory : public SessionFactory {<br>\npublic:<br>\nDirectSessionFactory() {}</p>\n<p>Session* NewSession(const SessionOptions&amp; options) override {<br>\nstd::vector&lt;Device*&gt; devices;<br>\nDeviceFactory::AddDevices(options, \"/job:localhost/replica:0/task:0\",<br>\n&amp;devices);<br>\nreturn new DirectSession(options, new DeviceMgr(devices));<br>\n}<br>\n};</p>\n<p>class DirectSessionRegistrar {<br>\npublic:<br>\nDirectSessionRegistrar() {<br>\nSessionFactory::Register(\"DIRECT_SESSION\", new DirectSessionFactory());<br>\n}<br>\n};<br>\nstatic DirectSessionRegistrar registrar;<br>\n//////////</p>\n<p>today, i rebuild it with ndk api_level=9 and api_level=21</p>\n<p>libandroid_tensorflow_lib.a<br>\ndirect_session.o</p>\n<p>nm libandroid_tensorflow_lib.a | grep DirectSessionFactory    OK<br>\nnm libandroid_tensorflow_lib.a | grep DirectSessionRegistrar  Found Nothing</p>\n<p>direct_session.o is same.  api_level=9 and api_level=21 is same.</p>\n<p>so, you know, DIRECT_SESSION is not registed.</p>\n<p>and then, \"Not found: Could not find session factory for DIRECT_SESSION\"</p>\n<p>the code i clone is branch r0.7, and the build is successfully.</p>\n<h1></h1>\n<p>It really occur.  very very strange.</p>", "body_text": "@andrewharp\n\"Not found: Could not find session factory for DIRECT_SESSION\"\nIt seems that the DirectSessionFactory is not been regist.\nSo I browse the codes, and in the end of direct_session.cc, i find:\n//////////\nclass DirectSessionFactory : public SessionFactory {\npublic:\nDirectSessionFactory() {}\nSession* NewSession(const SessionOptions& options) override {\nstd::vector<Device*> devices;\nDeviceFactory::AddDevices(options, \"/job:localhost/replica:0/task:0\",\n&devices);\nreturn new DirectSession(options, new DeviceMgr(devices));\n}\n};\nclass DirectSessionRegistrar {\npublic:\nDirectSessionRegistrar() {\nSessionFactory::Register(\"DIRECT_SESSION\", new DirectSessionFactory());\n}\n};\nstatic DirectSessionRegistrar registrar;\n//////////\ntoday, i rebuild it with ndk api_level=9 and api_level=21\nlibandroid_tensorflow_lib.a\ndirect_session.o\nnm libandroid_tensorflow_lib.a | grep DirectSessionFactory    OK\nnm libandroid_tensorflow_lib.a | grep DirectSessionRegistrar  Found Nothing\ndirect_session.o is same.  api_level=9 and api_level=21 is same.\nso, you know, DIRECT_SESSION is not registed.\nand then, \"Not found: Could not find session factory for DIRECT_SESSION\"\nthe code i clone is branch r0.7, and the build is successfully.\n\nIt really occur.  very very strange.", "body": "@andrewharp \n\n\"Not found: Could not find session factory for DIRECT_SESSION\"\n\nIt seems that the DirectSessionFactory is not been regist.\n\nSo I browse the codes, and in the end of direct_session.cc, i find:\n\n//////////\nclass DirectSessionFactory : public SessionFactory {\n public:\n  DirectSessionFactory() {}\n\n  Session\\* NewSession(const SessionOptions& options) override {\n    std::vector<Device*> devices;\n    DeviceFactory::AddDevices(options, \"/job:localhost/replica:0/task:0\",\n                              &devices);\n    return new DirectSession(options, new DeviceMgr(devices));\n  }\n};\n\nclass DirectSessionRegistrar {\n public:\n  DirectSessionRegistrar() {\n    SessionFactory::Register(\"DIRECT_SESSION\", new DirectSessionFactory());\n  }\n};\nstatic DirectSessionRegistrar registrar;\n//////////\n\ntoday, i rebuild it with ndk api_level=9 and api_level=21\n\nlibandroid_tensorflow_lib.a\ndirect_session.o\n\nnm libandroid_tensorflow_lib.a | grep DirectSessionFactory    OK\nnm libandroid_tensorflow_lib.a | grep DirectSessionRegistrar  Found Nothing\n\ndirect_session.o is same.  api_level=9 and api_level=21 is same.\n\nso, you know, DIRECT_SESSION is not registed.\n\nand then, \"Not found: Could not find session factory for DIRECT_SESSION\"\n\nthe code i clone is branch r0.7, and the build is successfully.\n\n# \n\nIt really occur.  very very strange.\n"}
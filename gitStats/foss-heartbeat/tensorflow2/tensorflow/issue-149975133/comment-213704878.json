{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/213704878", "html_url": "https://github.com/tensorflow/tensorflow/issues/2047#issuecomment-213704878", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2047", "id": 213704878, "node_id": "MDEyOklzc3VlQ29tbWVudDIxMzcwNDg3OA==", "user": {"login": "InsightDev", "id": 18297757, "node_id": "MDQ6VXNlcjE4Mjk3NzU3", "avatar_url": "https://avatars0.githubusercontent.com/u/18297757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/InsightDev", "html_url": "https://github.com/InsightDev", "followers_url": "https://api.github.com/users/InsightDev/followers", "following_url": "https://api.github.com/users/InsightDev/following{/other_user}", "gists_url": "https://api.github.com/users/InsightDev/gists{/gist_id}", "starred_url": "https://api.github.com/users/InsightDev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/InsightDev/subscriptions", "organizations_url": "https://api.github.com/users/InsightDev/orgs", "repos_url": "https://api.github.com/users/InsightDev/repos", "events_url": "https://api.github.com/users/InsightDev/events{/privacy}", "received_events_url": "https://api.github.com/users/InsightDev/received_events", "type": "User", "site_admin": false}, "created_at": "2016-04-23T09:53:12Z", "updated_at": "2016-04-23T09:53:12Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3376817\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/andrewharp\">@andrewharp</a></p>\n<p>thanks for your replay.</p>\n<p>\"Not found: Could not find session factory for DIRECT_SESSION\"</p>\n<p>my ndk is always the NDK r10e, and i rebuild it,  the build is ok, but the problem still persists.</p>\n<blockquote>\n<p>libandroid_tensorflow_lib.a<br>\nlibprotobuf.a<br>\nlibprotobuf_lite.a<br>\nlibprotos_all_cc.a<br>\nlibre2.a</p>\n</blockquote>\n<p>I extract these static librarys, and write my jni code, just like 'android:tensorflow_demo'.</p>\n<pre><code>tensorflow::SessionOptions options;\ntensorflow::ConfigProto&amp; config = options.config;\nLOG(INFO) &lt;&lt; \"Got config, \" &lt;&lt; config.device_count_size() &lt;&lt; \" devices\";\ntensorflow::Session* tempSession = tensorflow::NewSession(options);\n</code></pre>\n<p>here, config.device_count_size() is 0,  and tempSession is nullptr, internal it print</p>\n<pre><code>    \"Not found: Could not find session factory for DIRECT_SESSION\"\n</code></pre>\n<p>the device count is importance, but it's zero.</p>\n<hr>\n<p>android-ndk-r10e-linux-x86_64.bin<br>\nbazel-0.2.1-installer-linux-x86_64.sh</p>\n<p>git clone --recurse-submodules <a href=\"https://github.com/tensorflow/tensorflow\">https://github.com/tensorflow/tensorflow</a> -b r0.7</p>\n<p>android_sdk_repository(<br>\nname = \"androidsdk\",<br>\napi_level = 23,<br>\nbuild_tools_version = \"23.0.1\",<br>\npath = \"/home/gzzhang/android-sdk\",<br>\n)</p>\n<p>android_ndk_repository(<br>\nname=\"androidndk\",<br>\npath=\"/opt/android-ndk\",<br>\napi_level=11,                                        &lt;&lt;==  this is diff, i want to down the api_level.<br>\n)</p>\n<p>bazel build //tensorflow/examples/android:tensorflow_demo --verbose_failures</p>\n<p>Target //tensorflow/examples/android:tensorflow_demo up-to-date:<br>\nbazel-bin/tensorflow/examples/android/tensorflow_demo_deploy.jar<br>\nbazel-bin/tensorflow/examples/android/tensorflow_demo_unsigned.apk<br>\nbazel-bin/tensorflow/examples/android/tensorflow_demo.apk<br>\nINFO: Elapsed time: 2363.175s, Critical Path: 2126.57s</p>", "body_text": "@andrewharp\nthanks for your replay.\n\"Not found: Could not find session factory for DIRECT_SESSION\"\nmy ndk is always the NDK r10e, and i rebuild it,  the build is ok, but the problem still persists.\n\nlibandroid_tensorflow_lib.a\nlibprotobuf.a\nlibprotobuf_lite.a\nlibprotos_all_cc.a\nlibre2.a\n\nI extract these static librarys, and write my jni code, just like 'android:tensorflow_demo'.\ntensorflow::SessionOptions options;\ntensorflow::ConfigProto& config = options.config;\nLOG(INFO) << \"Got config, \" << config.device_count_size() << \" devices\";\ntensorflow::Session* tempSession = tensorflow::NewSession(options);\n\nhere, config.device_count_size() is 0,  and tempSession is nullptr, internal it print\n    \"Not found: Could not find session factory for DIRECT_SESSION\"\n\nthe device count is importance, but it's zero.\n\nandroid-ndk-r10e-linux-x86_64.bin\nbazel-0.2.1-installer-linux-x86_64.sh\ngit clone --recurse-submodules https://github.com/tensorflow/tensorflow -b r0.7\nandroid_sdk_repository(\nname = \"androidsdk\",\napi_level = 23,\nbuild_tools_version = \"23.0.1\",\npath = \"/home/gzzhang/android-sdk\",\n)\nandroid_ndk_repository(\nname=\"androidndk\",\npath=\"/opt/android-ndk\",\napi_level=11,                                        <<==  this is diff, i want to down the api_level.\n)\nbazel build //tensorflow/examples/android:tensorflow_demo --verbose_failures\nTarget //tensorflow/examples/android:tensorflow_demo up-to-date:\nbazel-bin/tensorflow/examples/android/tensorflow_demo_deploy.jar\nbazel-bin/tensorflow/examples/android/tensorflow_demo_unsigned.apk\nbazel-bin/tensorflow/examples/android/tensorflow_demo.apk\nINFO: Elapsed time: 2363.175s, Critical Path: 2126.57s", "body": "@andrewharp \n\nthanks for your replay.\n\n\"Not found: Could not find session factory for DIRECT_SESSION\"\n\nmy ndk is always the NDK r10e, and i rebuild it,  the build is ok, but the problem still persists.\n\n> libandroid_tensorflow_lib.a\n> libprotobuf.a\n> libprotobuf_lite.a\n> libprotos_all_cc.a\n> libre2.a\n\nI extract these static librarys, and write my jni code, just like 'android:tensorflow_demo'.\n\n```\ntensorflow::SessionOptions options;\ntensorflow::ConfigProto& config = options.config;\nLOG(INFO) << \"Got config, \" << config.device_count_size() << \" devices\";\ntensorflow::Session* tempSession = tensorflow::NewSession(options);\n```\n\nhere, config.device_count_size() is 0,  and tempSession is nullptr, internal it print\n\n```\n    \"Not found: Could not find session factory for DIRECT_SESSION\"\n```\n\nthe device count is importance, but it's zero.\n\n---\n\nandroid-ndk-r10e-linux-x86_64.bin\nbazel-0.2.1-installer-linux-x86_64.sh\n\ngit clone --recurse-submodules https://github.com/tensorflow/tensorflow -b r0.7\n\nandroid_sdk_repository(\n    name = \"androidsdk\",\n    api_level = 23,\n    build_tools_version = \"23.0.1\",\n    path = \"/home/gzzhang/android-sdk\",\n)\n\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/opt/android-ndk\",\n    api_level=11,                                        <<==  this is diff, i want to down the api_level.\n)\n\nbazel build //tensorflow/examples/android:tensorflow_demo --verbose_failures\n\nTarget //tensorflow/examples/android:tensorflow_demo up-to-date:\n  bazel-bin/tensorflow/examples/android/tensorflow_demo_deploy.jar\n  bazel-bin/tensorflow/examples/android/tensorflow_demo_unsigned.apk\n  bazel-bin/tensorflow/examples/android/tensorflow_demo.apk\nINFO: Elapsed time: 2363.175s, Critical Path: 2126.57s\n"}
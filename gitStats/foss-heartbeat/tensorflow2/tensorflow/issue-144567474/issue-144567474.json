{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1707", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1707/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1707/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1707/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1707", "id": 144567474, "node_id": "MDU6SXNzdWUxNDQ1Njc0NzQ=", "number": 1707, "title": "Clip gradients option in contrib.layers.optimize_loss broken", "user": {"login": "mikowals", "id": 1331470, "node_id": "MDQ6VXNlcjEzMzE0NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1331470?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikowals", "html_url": "https://github.com/mikowals", "followers_url": "https://api.github.com/users/mikowals/followers", "following_url": "https://api.github.com/users/mikowals/following{/other_user}", "gists_url": "https://api.github.com/users/mikowals/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikowals/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikowals/subscriptions", "organizations_url": "https://api.github.com/users/mikowals/orgs", "repos_url": "https://api.github.com/users/mikowals/repos", "events_url": "https://api.github.com/users/mikowals/events{/privacy}", "received_events_url": "https://api.github.com/users/mikowals/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "ilblackdragon", "id": 175486, "node_id": "MDQ6VXNlcjE3NTQ4Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/175486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilblackdragon", "html_url": "https://github.com/ilblackdragon", "followers_url": "https://api.github.com/users/ilblackdragon/followers", "following_url": "https://api.github.com/users/ilblackdragon/following{/other_user}", "gists_url": "https://api.github.com/users/ilblackdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilblackdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilblackdragon/subscriptions", "organizations_url": "https://api.github.com/users/ilblackdragon/orgs", "repos_url": "https://api.github.com/users/ilblackdragon/repos", "events_url": "https://api.github.com/users/ilblackdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/ilblackdragon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ilblackdragon", "id": 175486, "node_id": "MDQ6VXNlcjE3NTQ4Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/175486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilblackdragon", "html_url": "https://github.com/ilblackdragon", "followers_url": "https://api.github.com/users/ilblackdragon/followers", "following_url": "https://api.github.com/users/ilblackdragon/following{/other_user}", "gists_url": "https://api.github.com/users/ilblackdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilblackdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilblackdragon/subscriptions", "organizations_url": "https://api.github.com/users/ilblackdragon/orgs", "repos_url": "https://api.github.com/users/ilblackdragon/repos", "events_url": "https://api.github.com/users/ilblackdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/ilblackdragon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-03-30T12:03:25Z", "updated_at": "2016-04-07T11:53:55Z", "closed_at": "2016-04-07T11:53:55Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Using the nightly build from 30 Mar 2016 trying to call:</p>\n<pre><code>train_op = tf.contrib.layers.optimize_loss(train_loss,\n              global_step,\n              0.002,\n              \"Adam\",\n              clip_gradients=10.0)\n</code></pre>\n<p>will throw:</p>\n<pre><code>TypeError: List of Tensors when single Tensor expected\n</code></pre>\n<p>I think <code>opt.compute_gradients()</code> returns a list of tuples not tensors so <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/layers/python/layers/optimizers.py#L106\">line 106</a> needs to replace <code>gradients</code> with <code>[g[0] for g in gradients]</code>.</p>", "body_text": "Using the nightly build from 30 Mar 2016 trying to call:\ntrain_op = tf.contrib.layers.optimize_loss(train_loss,\n              global_step,\n              0.002,\n              \"Adam\",\n              clip_gradients=10.0)\n\nwill throw:\nTypeError: List of Tensors when single Tensor expected\n\nI think opt.compute_gradients() returns a list of tuples not tensors so line 106 needs to replace gradients with [g[0] for g in gradients].", "body": "Using the nightly build from 30 Mar 2016 trying to call:\n\n```\ntrain_op = tf.contrib.layers.optimize_loss(train_loss,\n              global_step,\n              0.002,\n              \"Adam\",\n              clip_gradients=10.0)\n```\n\nwill throw:\n\n```\nTypeError: List of Tensors when single Tensor expected\n```\n\nI think `opt.compute_gradients()` returns a list of tuples not tensors so [line 106](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/layers/python/layers/optimizers.py#L106) needs to replace `gradients` with `[g[0] for g in gradients]`.\n"}
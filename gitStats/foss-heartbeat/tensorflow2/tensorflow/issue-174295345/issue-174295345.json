{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4127", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4127/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4127/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4127/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4127", "id": 174295345, "node_id": "MDU6SXNzdWUxNzQyOTUzNDU=", "number": 4127, "title": "Tensorflow build from source fails with C++ compilation of rule '//tensorflow/core:framework_internal' failed: crosstool_wrapper_driver_is_not_gcc failed:", "user": {"login": "nishanthgs", "id": 21118525, "node_id": "MDQ6VXNlcjIxMTE4NTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/21118525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nishanthgs", "html_url": "https://github.com/nishanthgs", "followers_url": "https://api.github.com/users/nishanthgs/followers", "following_url": "https://api.github.com/users/nishanthgs/following{/other_user}", "gists_url": "https://api.github.com/users/nishanthgs/gists{/gist_id}", "starred_url": "https://api.github.com/users/nishanthgs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nishanthgs/subscriptions", "organizations_url": "https://api.github.com/users/nishanthgs/orgs", "repos_url": "https://api.github.com/users/nishanthgs/repos", "events_url": "https://api.github.com/users/nishanthgs/events{/privacy}", "received_events_url": "https://api.github.com/users/nishanthgs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-08-31T14:55:12Z", "updated_at": "2016-09-07T16:49:49Z", "closed_at": "2016-09-01T05:01:45Z", "author_association": "NONE", "body_html": "<p>I am trying to build tensorflow from source (without external git access), can someone please let me know how to get this going, I have built most of the dependencies in a local system directory but end up with the following:</p>\n<p>ERROR: /usr/local/tensorflow/tensorflow/core/BUILD:927:1: C++ compilation of rule '//tensorflow/core:framework_internal' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command<br>\n(cd /root/.cache/bazel/bazel_root/e86f6fce5559de9e3e13fb6adb66b858/execroot/tensorflow &amp;&amp; <br>\nexec env - <br>\nPATH=/usr/local/tensorflow/protobuf/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/bin <br>\nthird_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIC -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -g0 '-std=c++11' '-frandom-seed=bazel-out/host/bin/tensorflow/core/objs/framework_internal/tensorflow/core/example/feature_util.o' -iquote . -iquote bazel-out/host/genfiles -iquote external/protobuf -iquote bazel-out/host/genfiles/external/protobuf -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -iquote external/highwayhash -iquote bazel-out/host/genfiles/external/highwayhash -iquote external/re2 -iquote bazel-out/host/genfiles/external/re2 -isystem external/protobuf/src -isystem bazel-out/host/genfiles/external/protobuf/src -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/highwayhash -isystem bazel-out/host/genfiles/external/highwayhash -isystem third_party/gpus/cuda/include -isystem bazel-out/host/genfiles/third_party/gpus/cuda/include -fno-exceptions -DEIGEN_AVOID_STL_ARRAY '-DGOOGLE_CUDA=1' -pthread '-DGOOGLE_CUDA=1' -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -MD -MF bazel-out/host/bin/tensorflow/core/_objs/framework_internal/tensorflow/core/example/feature_util.d -c tensorflow/core/example/feature_util.cc -o bazel-out/host/bin/tensorflow/core/_objs/framework_internal/tensorflow/core/example/feature_util.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.<br>\ntensorflow/core/example/feature_util.cc: In function 'const typename tensorflow::internal::RepeatedFieldTrait::Type&amp; tensorflow::GetFeatureValues(const string&amp;, const tensorflow::Example&amp;) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Type = google::protobuf::RepeatedField; std::string = std::basic_string]':<br>\ntensorflow/core/example/feature_util.cc:54:67: error: invalid initialization of reference of type 'const google::protobuf::RepeatedField&amp;' from expression of type 'const google::protobuf::RepeatedField'<br>\nreturn example.features().feature().at(name).int64_list().value();<br>\ntensorflow/core/example/feature_util.cc: In function 'typename tensorflow::internal::RepeatedFieldTrait::Type* tensorflow::GetFeatureValues(const string&amp;, tensorflow::Example) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Type = google::protobuf::RepeatedField; std::string = std::basic_string]':<br>\ntensorflow/core/example/feature_util.cc:62:23: error: cannot convert 'google::protobuf::RepeatedField' to 'google::protobuf::RepeatedField' in return<br>\n-&gt;mutable_value();<br>\n^<br>\ntensorflow/core/example/feature_util.cc: In function 'const typename tensorflow::internal::RepeatedFieldTrait::Type&amp; tensorflow::GetFeatureValues(const string&amp;, const tensorflow::Example&amp;) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Typ<br>\ne = google::protobuf::RepeatedField; std::string = std::basic_string]':<br>\ntensorflow/core/example/feature_util.cc:55:1: warning: control reaches end of non-void function [-Wreturn-type]<br>\n}<br>\n^<br>\ntensorflow/core/example/feature_util.cc: In function 'typename tensorflow::internal::RepeatedFieldTrait::Type tensorflow::GetFeatureValues<br>\n(const string&amp;, tensorflow::Example*) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Type = google::<br>\nprotobuf::RepeatedField; std::string = std::basic_string]':<br>\ntensorflow/core/example/feature_util.cc:63:1: warning: control reaches end of non-void function [-Wreturn-type]<br>\n}<br>\n^<br>\nTarget //tensorflow/cc:tutorials_example_trainer failed to build</p>\n<p>Any pointers is greatly appreciated, not sure what I am missing here.</p>\n<p>bash-4.2# cd /usr/local/<br>\nbazel-0.3.0 jpeg-9a libpng-1.2.53 tensorflow<br>\neigen-eigen-9e1b48c333aa giflib-5.1.4</p>\n<p>gmock-1.7.0 six-1.10.0 zlib-1.2.8<br>\nfarmhash-34c13ddfab0e35422f4c3979f360635a8c050260</p>\n<p>/usr/local/tensorflow<br>\nbash-4.2# ls<br>\nACKNOWLEDGMENTS bazel-genfiles boost/ bzip2.BUILD gif.BUILD jpeg.BUILD navbar.md re2/ third_party zlib.BUILD<br>\nAUTHORS bazel-out boost.BUILD configure grpc.BUILD jsoncpp.BUILD png.BUILD README.md tools<br>\navro.BUILD bazel-tensorflow boringssl.BUILD CONTRIBUTING.md highwayhash/ LICENSE protobuf/ RELEASE.md util<br>\nbazel-bin bazel-testlogs bower.BUILD farmhash.BUILD ISSUE_TEMPLATE.md nanopb.BUILD tensorflow WORKSPACE</p>\n<p>workspace.bzl and CROSSTOOL have all the necessary entries for the include libraries and packages.</p>", "body_text": "I am trying to build tensorflow from source (without external git access), can someone please let me know how to get this going, I have built most of the dependencies in a local system directory but end up with the following:\nERROR: /usr/local/tensorflow/tensorflow/core/BUILD:927:1: C++ compilation of rule '//tensorflow/core:framework_internal' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command\n(cd /root/.cache/bazel/bazel_root/e86f6fce5559de9e3e13fb6adb66b858/execroot/tensorflow && \nexec env - \nPATH=/usr/local/tensorflow/protobuf/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/bin \nthird_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIC -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -g0 '-std=c++11' '-frandom-seed=bazel-out/host/bin/tensorflow/core/objs/framework_internal/tensorflow/core/example/feature_util.o' -iquote . -iquote bazel-out/host/genfiles -iquote external/protobuf -iquote bazel-out/host/genfiles/external/protobuf -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -iquote external/highwayhash -iquote bazel-out/host/genfiles/external/highwayhash -iquote external/re2 -iquote bazel-out/host/genfiles/external/re2 -isystem external/protobuf/src -isystem bazel-out/host/genfiles/external/protobuf/src -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/highwayhash -isystem bazel-out/host/genfiles/external/highwayhash -isystem third_party/gpus/cuda/include -isystem bazel-out/host/genfiles/third_party/gpus/cuda/include -fno-exceptions -DEIGEN_AVOID_STL_ARRAY '-DGOOGLE_CUDA=1' -pthread '-DGOOGLE_CUDA=1' -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -MD -MF bazel-out/host/bin/tensorflow/core/_objs/framework_internal/tensorflow/core/example/feature_util.d -c tensorflow/core/example/feature_util.cc -o bazel-out/host/bin/tensorflow/core/_objs/framework_internal/tensorflow/core/example/feature_util.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\ntensorflow/core/example/feature_util.cc: In function 'const typename tensorflow::internal::RepeatedFieldTrait::Type& tensorflow::GetFeatureValues(const string&, const tensorflow::Example&) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Type = google::protobuf::RepeatedField; std::string = std::basic_string]':\ntensorflow/core/example/feature_util.cc:54:67: error: invalid initialization of reference of type 'const google::protobuf::RepeatedField&' from expression of type 'const google::protobuf::RepeatedField'\nreturn example.features().feature().at(name).int64_list().value();\ntensorflow/core/example/feature_util.cc: In function 'typename tensorflow::internal::RepeatedFieldTrait::Type* tensorflow::GetFeatureValues(const string&, tensorflow::Example) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Type = google::protobuf::RepeatedField; std::string = std::basic_string]':\ntensorflow/core/example/feature_util.cc:62:23: error: cannot convert 'google::protobuf::RepeatedField' to 'google::protobuf::RepeatedField' in return\n->mutable_value();\n^\ntensorflow/core/example/feature_util.cc: In function 'const typename tensorflow::internal::RepeatedFieldTrait::Type& tensorflow::GetFeatureValues(const string&, const tensorflow::Example&) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Typ\ne = google::protobuf::RepeatedField; std::string = std::basic_string]':\ntensorflow/core/example/feature_util.cc:55:1: warning: control reaches end of non-void function [-Wreturn-type]\n}\n^\ntensorflow/core/example/feature_util.cc: In function 'typename tensorflow::internal::RepeatedFieldTrait::Type tensorflow::GetFeatureValues\n(const string&, tensorflow::Example*) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Type = google::\nprotobuf::RepeatedField; std::string = std::basic_string]':\ntensorflow/core/example/feature_util.cc:63:1: warning: control reaches end of non-void function [-Wreturn-type]\n}\n^\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nAny pointers is greatly appreciated, not sure what I am missing here.\nbash-4.2# cd /usr/local/\nbazel-0.3.0 jpeg-9a libpng-1.2.53 tensorflow\neigen-eigen-9e1b48c333aa giflib-5.1.4\ngmock-1.7.0 six-1.10.0 zlib-1.2.8\nfarmhash-34c13ddfab0e35422f4c3979f360635a8c050260\n/usr/local/tensorflow\nbash-4.2# ls\nACKNOWLEDGMENTS bazel-genfiles boost/ bzip2.BUILD gif.BUILD jpeg.BUILD navbar.md re2/ third_party zlib.BUILD\nAUTHORS bazel-out boost.BUILD configure grpc.BUILD jsoncpp.BUILD png.BUILD README.md tools\navro.BUILD bazel-tensorflow boringssl.BUILD CONTRIBUTING.md highwayhash/ LICENSE protobuf/ RELEASE.md util\nbazel-bin bazel-testlogs bower.BUILD farmhash.BUILD ISSUE_TEMPLATE.md nanopb.BUILD tensorflow WORKSPACE\nworkspace.bzl and CROSSTOOL have all the necessary entries for the include libraries and packages.", "body": "I am trying to build tensorflow from source (without external git access), can someone please let me know how to get this going, I have built most of the dependencies in a local system directory but end up with the following:\n\nERROR: /usr/local/tensorflow/tensorflow/core/BUILD:927:1: C++ compilation of rule '//tensorflow/core:framework_internal' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command\n(cd /root/.cache/bazel/bazel_root/e86f6fce5559de9e3e13fb6adb66b858/execroot/tensorflow && \\\nexec env - \\\nPATH=/usr/local/tensorflow/protobuf/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/bin \\\nthird_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIC -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -g0 '-std=c++11' '-frandom-seed=bazel-out/host/bin/tensorflow/core/objs/framework_internal/tensorflow/core/example/feature_util.o' -iquote . -iquote bazel-out/host/genfiles -iquote external/protobuf -iquote bazel-out/host/genfiles/external/protobuf -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -iquote external/highwayhash -iquote bazel-out/host/genfiles/external/highwayhash -iquote external/re2 -iquote bazel-out/host/genfiles/external/re2 -isystem external/protobuf/src -isystem bazel-out/host/genfiles/external/protobuf/src -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/highwayhash -isystem bazel-out/host/genfiles/external/highwayhash -isystem third_party/gpus/cuda/include -isystem bazel-out/host/genfiles/third_party/gpus/cuda/include -fno-exceptions -DEIGEN_AVOID_STL_ARRAY '-DGOOGLE_CUDA=1' -pthread '-DGOOGLE_CUDA=1' -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -MD -MF bazel-out/host/bin/tensorflow/core/_objs/framework_internal/tensorflow/core/example/feature_util.d -c tensorflow/core/example/feature_util.cc -o bazel-out/host/bin/tensorflow/core/_objs/framework_internal/tensorflow/core/example/feature_util.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\ntensorflow/core/example/feature_util.cc: In function 'const typename tensorflow::internal::RepeatedFieldTrait::Type& tensorflow::GetFeatureValues(const string&, const tensorflow::Example&) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Type = google::protobuf::RepeatedField; std::string = std::basic_string]':\ntensorflow/core/example/feature_util.cc:54:67: error: invalid initialization of reference of type 'const google::protobuf::RepeatedField&' from expression of type 'const google::protobuf::RepeatedField'\nreturn example.features().feature().at(name).int64_list().value();\ntensorflow/core/example/feature_util.cc: In function 'typename tensorflow::internal::RepeatedFieldTrait::Type\\* tensorflow::GetFeatureValues(const string&, tensorflow::Example) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Type = google::protobuf::RepeatedField; std::string = std::basic_string]':\ntensorflow/core/example/feature_util.cc:62:23: error: cannot convert 'google::protobuf::RepeatedField' to 'google::protobuf::RepeatedField' in return\n->mutable_value();\n^\ntensorflow/core/example/feature_util.cc: In function 'const typename tensorflow::internal::RepeatedFieldTrait::Type& tensorflow::GetFeatureValues(const string&, const tensorflow::Example&) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Typ\ne = google::protobuf::RepeatedField; std::string = std::basic_string]':\ntensorflow/core/example/feature_util.cc:55:1: warning: control reaches end of non-void function [-Wreturn-type]\n}\n^\ntensorflow/core/example/feature_util.cc: In function 'typename tensorflow::internal::RepeatedFieldTrait::Type tensorflow::GetFeatureValues\n(const string&, tensorflow::Example*) [with FeatureType = long long int; typename tensorflow::internal::RepeatedFieldTrait::Type = google::\nprotobuf::RepeatedField; std::string = std::basic_string]':\ntensorflow/core/example/feature_util.cc:63:1: warning: control reaches end of non-void function [-Wreturn-type]\n}\n^\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\n\nAny pointers is greatly appreciated, not sure what I am missing here.\n\nbash-4.2# cd /usr/local/\nbazel-0.3.0 jpeg-9a libpng-1.2.53 tensorflow\neigen-eigen-9e1b48c333aa giflib-5.1.4\n\ngmock-1.7.0 six-1.10.0 zlib-1.2.8\nfarmhash-34c13ddfab0e35422f4c3979f360635a8c050260\n\n/usr/local/tensorflow\nbash-4.2# ls\nACKNOWLEDGMENTS bazel-genfiles boost/ bzip2.BUILD gif.BUILD jpeg.BUILD navbar.md re2/ third_party zlib.BUILD\nAUTHORS bazel-out boost.BUILD configure grpc.BUILD jsoncpp.BUILD png.BUILD README.md tools\navro.BUILD bazel-tensorflow boringssl.BUILD CONTRIBUTING.md highwayhash/ LICENSE protobuf/ RELEASE.md util\nbazel-bin bazel-testlogs bower.BUILD farmhash.BUILD ISSUE_TEMPLATE.md nanopb.BUILD tensorflow WORKSPACE\n\nworkspace.bzl and CROSSTOOL have all the necessary entries for the include libraries and packages.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3392", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3392/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3392/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3392/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3392", "id": 166366767, "node_id": "MDU6SXNzdWUxNjYzNjY3Njc=", "number": 3392, "title": "Remove unnecessary input-size requirement for convolutions with padding='SAME'", "user": {"login": "rdipietro", "id": 5150559, "node_id": "MDQ6VXNlcjUxNTA1NTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/5150559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rdipietro", "html_url": "https://github.com/rdipietro", "followers_url": "https://api.github.com/users/rdipietro/followers", "following_url": "https://api.github.com/users/rdipietro/following{/other_user}", "gists_url": "https://api.github.com/users/rdipietro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rdipietro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rdipietro/subscriptions", "organizations_url": "https://api.github.com/users/rdipietro/orgs", "repos_url": "https://api.github.com/users/rdipietro/repos", "events_url": "https://api.github.com/users/rdipietro/events{/privacy}", "received_events_url": "https://api.github.com/users/rdipietro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-07-19T15:50:59Z", "updated_at": "2018-02-07T23:53:35Z", "closed_at": "2018-02-07T23:53:35Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Right now there is conflicting behavior when <code>padding='SAME'</code>: If inputs have a defined height and width, then convolutions require that filters be no larger than input images (spatially). If inputs do not have a defined height and width, then it's okay for filters to be larger than images.</p>\n<p>I think this conflicting behavior should be removed, especially since <code>padding='SAME'</code> is used for convenience and with the intention of allowing some border effects, and because this way we can continue to use this convenience even when filter size &gt; input size.</p>\n<p>TensorFlow 0.9 example with defined height and width:</p>\n<pre><code>inputs = tf.placeholder(tf.float32, shape=[None, 2, 2, 3])\nweights = tf.get_variable('weights', [3, 3, 3, 10], tf.float32,\n                          initializer=tf.random_normal_initializer())\nt = tf.nn.conv2d(inputs, weights, [1, 1, 1, 1], 'SAME')\n\n# ValueError: Filter must not be larger than the input: Filter: (3, 3) Input: (2, 2)\n</code></pre>\n<p>TensorFlow 0.9 example without defined height and width:</p>\n<pre><code>inputs = tf.placeholder(tf.float32, shape=[None, None, None, 3])\nweights = tf.get_variable('weights', [3, 3, 3, 10], tf.float32,\n                          initializer=tf.random_normal_initializer())\nt = tf.nn.conv2d(inputs, weights, [1, 1, 1, 1], 'SAME')\n\nwith tf.Session() as sess:\n    sess.run(tf.initialize_all_variables())\n    print(sess.run(t, feed_dict={inputs: np.random.rand(1, 2, 2, 3)}).shape)\n\n# Shape is what we expect: (1, 2, 2, 10)\n</code></pre>", "body_text": "Right now there is conflicting behavior when padding='SAME': If inputs have a defined height and width, then convolutions require that filters be no larger than input images (spatially). If inputs do not have a defined height and width, then it's okay for filters to be larger than images.\nI think this conflicting behavior should be removed, especially since padding='SAME' is used for convenience and with the intention of allowing some border effects, and because this way we can continue to use this convenience even when filter size > input size.\nTensorFlow 0.9 example with defined height and width:\ninputs = tf.placeholder(tf.float32, shape=[None, 2, 2, 3])\nweights = tf.get_variable('weights', [3, 3, 3, 10], tf.float32,\n                          initializer=tf.random_normal_initializer())\nt = tf.nn.conv2d(inputs, weights, [1, 1, 1, 1], 'SAME')\n\n# ValueError: Filter must not be larger than the input: Filter: (3, 3) Input: (2, 2)\n\nTensorFlow 0.9 example without defined height and width:\ninputs = tf.placeholder(tf.float32, shape=[None, None, None, 3])\nweights = tf.get_variable('weights', [3, 3, 3, 10], tf.float32,\n                          initializer=tf.random_normal_initializer())\nt = tf.nn.conv2d(inputs, weights, [1, 1, 1, 1], 'SAME')\n\nwith tf.Session() as sess:\n    sess.run(tf.initialize_all_variables())\n    print(sess.run(t, feed_dict={inputs: np.random.rand(1, 2, 2, 3)}).shape)\n\n# Shape is what we expect: (1, 2, 2, 10)", "body": "Right now there is conflicting behavior when `padding='SAME'`: If inputs have a defined height and width, then convolutions require that filters be no larger than input images (spatially). If inputs do not have a defined height and width, then it's okay for filters to be larger than images.\n\nI think this conflicting behavior should be removed, especially since `padding='SAME'` is used for convenience and with the intention of allowing some border effects, and because this way we can continue to use this convenience even when filter size > input size.\n\nTensorFlow 0.9 example with defined height and width:\n\n```\ninputs = tf.placeholder(tf.float32, shape=[None, 2, 2, 3])\nweights = tf.get_variable('weights', [3, 3, 3, 10], tf.float32,\n                          initializer=tf.random_normal_initializer())\nt = tf.nn.conv2d(inputs, weights, [1, 1, 1, 1], 'SAME')\n\n# ValueError: Filter must not be larger than the input: Filter: (3, 3) Input: (2, 2)\n```\n\nTensorFlow 0.9 example without defined height and width:\n\n```\ninputs = tf.placeholder(tf.float32, shape=[None, None, None, 3])\nweights = tf.get_variable('weights', [3, 3, 3, 10], tf.float32,\n                          initializer=tf.random_normal_initializer())\nt = tf.nn.conv2d(inputs, weights, [1, 1, 1, 1], 'SAME')\n\nwith tf.Session() as sess:\n    sess.run(tf.initialize_all_variables())\n    print(sess.run(t, feed_dict={inputs: np.random.rand(1, 2, 2, 3)}).shape)\n\n# Shape is what we expect: (1, 2, 2, 10)\n```\n"}
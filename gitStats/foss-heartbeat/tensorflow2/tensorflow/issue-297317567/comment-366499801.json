{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/366499801", "html_url": "https://github.com/tensorflow/tensorflow/issues/17028#issuecomment-366499801", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17028", "id": 366499801, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjQ5OTgwMQ==", "user": {"login": "rajatmonga", "id": 15679194, "node_id": "MDQ6VXNlcjE1Njc5MTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/15679194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rajatmonga", "html_url": "https://github.com/rajatmonga", "followers_url": "https://api.github.com/users/rajatmonga/followers", "following_url": "https://api.github.com/users/rajatmonga/following{/other_user}", "gists_url": "https://api.github.com/users/rajatmonga/gists{/gist_id}", "starred_url": "https://api.github.com/users/rajatmonga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rajatmonga/subscriptions", "organizations_url": "https://api.github.com/users/rajatmonga/orgs", "repos_url": "https://api.github.com/users/rajatmonga/repos", "events_url": "https://api.github.com/users/rajatmonga/events{/privacy}", "received_events_url": "https://api.github.com/users/rajatmonga/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-18T08:17:47Z", "updated_at": "2018-02-18T08:17:47Z", "author_association": "NONE", "body_html": "<p>Looks like there's a fair bit of noise in how I have been trying this. One issue that does seem to hold:</p>\n<ul>\n<li>For TF 1.5 and before the default CPU binary isn't optimized e.g. isn't built with AVX etc.</li>\n<li>TF 1.6.0rc0 includes AVX (could still be better for the AMI you mention if built with the best options).</li>\n</ul>\n<p>Created a <a href=\"https://drive.google.com/file/d/1VTNncnaN0_4u6VT7hmiPd6WvjXohO_1H/view?usp=sharing\" rel=\"nofollow\">colab notebook</a> with some of your GIST  and running there (with TF 1.6rc) seems to give similar results. Note: It doesn't match your numbers for either PyTorch or TF, and there was some noise.</p>\n<p>See <a href=\"https://www.tensorflow.org/performance/performance_guide#optimizing_for_cpu\" rel=\"nofollow\">Optimizing for CPU</a> in the performance guide for more details.</p>", "body_text": "Looks like there's a fair bit of noise in how I have been trying this. One issue that does seem to hold:\n\nFor TF 1.5 and before the default CPU binary isn't optimized e.g. isn't built with AVX etc.\nTF 1.6.0rc0 includes AVX (could still be better for the AMI you mention if built with the best options).\n\nCreated a colab notebook with some of your GIST  and running there (with TF 1.6rc) seems to give similar results. Note: It doesn't match your numbers for either PyTorch or TF, and there was some noise.\nSee Optimizing for CPU in the performance guide for more details.", "body": "Looks like there's a fair bit of noise in how I have been trying this. One issue that does seem to hold:\r\n- For TF 1.5 and before the default CPU binary isn't optimized e.g. isn't built with AVX etc.\r\n- TF 1.6.0rc0 includes AVX (could still be better for the AMI you mention if built with the best options).\r\n\r\nCreated a [colab notebook](https://drive.google.com/file/d/1VTNncnaN0_4u6VT7hmiPd6WvjXohO_1H/view?usp=sharing) with some of your GIST  and running there (with TF 1.6rc) seems to give similar results. Note: It doesn't match your numbers for either PyTorch or TF, and there was some noise.\r\n\r\nSee [Optimizing for CPU](https://www.tensorflow.org/performance/performance_guide#optimizing_for_cpu) in the performance guide for more details."}
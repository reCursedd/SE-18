{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/340658001", "html_url": "https://github.com/tensorflow/tensorflow/issues/14116#issuecomment-340658001", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14116", "id": 340658001, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDY1ODAwMQ==", "user": {"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-31T04:39:43Z", "updated_at": "2017-10-31T04:39:43Z", "author_association": "MEMBER", "body_html": "<p>Your example will work if the <code>u</code> prefixes are removed from strings. An important thing to note is that <code>tf.py_func</code> needs to turn Python strings into tensors before calling the func. We have a byte string tensor but no unicode tensor.</p>\n<p>Things could still probably be improved on our end. It's likely we're forgetting to call compat.as_bytes() somewhere in our py_func implementation, which is causing Python's default behavior of crash-and-burn-if-not-ASCII to shine through. Assigning to <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2887803\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/panyx0718\">@panyx0718</a> who might be able to help us.</p>", "body_text": "Your example will work if the u prefixes are removed from strings. An important thing to note is that tf.py_func needs to turn Python strings into tensors before calling the func. We have a byte string tensor but no unicode tensor.\nThings could still probably be improved on our end. It's likely we're forgetting to call compat.as_bytes() somewhere in our py_func implementation, which is causing Python's default behavior of crash-and-burn-if-not-ASCII to shine through. Assigning to @panyx0718 who might be able to help us.", "body": "Your example will work if the `u` prefixes are removed from strings. An important thing to note is that `tf.py_func` needs to turn Python strings into tensors before calling the func. We have a byte string tensor but no unicode tensor.\r\n\r\nThings could still probably be improved on our end. It's likely we're forgetting to call compat.as_bytes() somewhere in our py_func implementation, which is causing Python's default behavior of crash-and-burn-if-not-ASCII to shine through. Assigning to @panyx0718 who might be able to help us."}
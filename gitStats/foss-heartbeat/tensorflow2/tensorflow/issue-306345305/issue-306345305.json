{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17817", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17817/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17817/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17817/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17817", "id": 306345305, "node_id": "MDU6SXNzdWUzMDYzNDUzMDU=", "number": 17817, "title": "Feature request: batch image input for exported model (image retraining)", "user": {"login": "chunkya", "id": 15236298, "node_id": "MDQ6VXNlcjE1MjM2Mjk4", "avatar_url": "https://avatars2.githubusercontent.com/u/15236298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chunkya", "html_url": "https://github.com/chunkya", "followers_url": "https://api.github.com/users/chunkya/followers", "following_url": "https://api.github.com/users/chunkya/following{/other_user}", "gists_url": "https://api.github.com/users/chunkya/gists{/gist_id}", "starred_url": "https://api.github.com/users/chunkya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chunkya/subscriptions", "organizations_url": "https://api.github.com/users/chunkya/orgs", "repos_url": "https://api.github.com/users/chunkya/repos", "events_url": "https://api.github.com/users/chunkya/events{/privacy}", "received_events_url": "https://api.github.com/users/chunkya/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "michaelisard", "id": 5376757, "node_id": "MDQ6VXNlcjUzNzY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5376757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelisard", "html_url": "https://github.com/michaelisard", "followers_url": "https://api.github.com/users/michaelisard/followers", "following_url": "https://api.github.com/users/michaelisard/following{/other_user}", "gists_url": "https://api.github.com/users/michaelisard/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelisard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelisard/subscriptions", "organizations_url": "https://api.github.com/users/michaelisard/orgs", "repos_url": "https://api.github.com/users/michaelisard/repos", "events_url": "https://api.github.com/users/michaelisard/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelisard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "michaelisard", "id": 5376757, "node_id": "MDQ6VXNlcjUzNzY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5376757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelisard", "html_url": "https://github.com/michaelisard", "followers_url": "https://api.github.com/users/michaelisard/followers", "following_url": "https://api.github.com/users/michaelisard/following{/other_user}", "gists_url": "https://api.github.com/users/michaelisard/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelisard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelisard/subscriptions", "organizations_url": "https://api.github.com/users/michaelisard/orgs", "repos_url": "https://api.github.com/users/michaelisard/repos", "events_url": "https://api.github.com/users/michaelisard/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelisard/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-03-19T06:21:13Z", "updated_at": "2018-04-10T23:59:30Z", "closed_at": "2018-04-10T23:59:30Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:  binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4.1</li>\n<li><strong>Python version</strong>: 3.6.1</li>\n<li><strong>Bazel version (if compiling from source)</strong>: -</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: -</li>\n<li><strong>CUDA/cuDNN version</strong>: 7.5/6</li>\n<li><strong>GPU model and memory</strong>: -</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Feature request:<br>\nI want to use the image retraining on my own image classes and then use the exported model as part of my data pipeline. But I noticed that the exported model only accepts input tensors of size (1, 299, 299, 3). It would be really great if it could accept batch images for example (32, 299, 299, 3) tensors. If you could advise me on how best to modify the code to do this that would be great too.</p>\n<h3>Source code / logs</h3>\n<p>How I trained my model:</p>\n<pre><code>python3 tensorflow/examples/image_retraining/retrain.py --image_dir $DATA_DIR\n</code></pre>\n<p>Here I tried feeding (2, 299, 299, 3) tensor as input to the model</p>\n<pre><code>Traceback (most recent call last):\n  File \"tensorflow/examples/label_image/label_image.py\", line 133, in &lt;module&gt;\n    input_operation.outputs[0]: t\n  File \"/home/beo/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 905, in run\n    run_metadata_ptr)\n  File \"/home/beo/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1113, in _run\n    str(subfeed_t.get_shape())))\nValueError: Cannot feed value of shape (2, 299, 299, 3) for Tensor u'import/Mul:0', which has shape '(1, 299, 299, 3)'\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04\nTensorFlow installed from (source or binary):  binary\nTensorFlow version (use command below): 1.4.1\nPython version: 3.6.1\nBazel version (if compiling from source): -\nGCC/Compiler version (if compiling from source): -\nCUDA/cuDNN version: 7.5/6\nGPU model and memory: -\nExact command to reproduce:\n\nDescribe the problem\nFeature request:\nI want to use the image retraining on my own image classes and then use the exported model as part of my data pipeline. But I noticed that the exported model only accepts input tensors of size (1, 299, 299, 3). It would be really great if it could accept batch images for example (32, 299, 299, 3) tensors. If you could advise me on how best to modify the code to do this that would be great too.\nSource code / logs\nHow I trained my model:\npython3 tensorflow/examples/image_retraining/retrain.py --image_dir $DATA_DIR\n\nHere I tried feeding (2, 299, 299, 3) tensor as input to the model\nTraceback (most recent call last):\n  File \"tensorflow/examples/label_image/label_image.py\", line 133, in <module>\n    input_operation.outputs[0]: t\n  File \"/home/beo/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 905, in run\n    run_metadata_ptr)\n  File \"/home/beo/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1113, in _run\n    str(subfeed_t.get_shape())))\nValueError: Cannot feed value of shape (2, 299, 299, 3) for Tensor u'import/Mul:0', which has shape '(1, 299, 299, 3)'", "body": "\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: 16.04\r\n- **TensorFlow installed from (source or binary)**:  binary\r\n- **TensorFlow version (use command below)**: 1.4.1\r\n- **Python version**: 3.6.1\r\n- **Bazel version (if compiling from source)**: - \r\n- **GCC/Compiler version (if compiling from source)**: -\r\n- **CUDA/cuDNN version**: 7.5/6\r\n- **GPU model and memory**: -\r\n- **Exact command to reproduce**: \r\n\r\n### Describe the problem\r\nFeature request:\r\nI want to use the image retraining on my own image classes and then use the exported model as part of my data pipeline. But I noticed that the exported model only accepts input tensors of size (1, 299, 299, 3). It would be really great if it could accept batch images for example (32, 299, 299, 3) tensors. If you could advise me on how best to modify the code to do this that would be great too.\r\n\r\n### Source code / logs\r\nHow I trained my model:\r\n```\r\npython3 tensorflow/examples/image_retraining/retrain.py --image_dir $DATA_DIR\r\n```\r\nHere I tried feeding (2, 299, 299, 3) tensor as input to the model\r\n```\r\nTraceback (most recent call last):\r\n  File \"tensorflow/examples/label_image/label_image.py\", line 133, in <module>\r\n    input_operation.outputs[0]: t\r\n  File \"/home/beo/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 905, in run\r\n    run_metadata_ptr)\r\n  File \"/home/beo/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1113, in _run\r\n    str(subfeed_t.get_shape())))\r\nValueError: Cannot feed value of shape (2, 299, 299, 3) for Tensor u'import/Mul:0', which has shape '(1, 299, 299, 3)'\r\n```\r\n"}
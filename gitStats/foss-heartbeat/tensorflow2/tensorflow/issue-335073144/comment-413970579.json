{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/413970579", "html_url": "https://github.com/tensorflow/tensorflow/pull/20239#issuecomment-413970579", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20239", "id": 413970579, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzk3MDU3OQ==", "user": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-17T19:47:22Z", "updated_at": "2018-08-17T19:47:22Z", "author_association": "MEMBER", "body_html": "<p>Sorry for the delay.</p>\n<p>Taking another look, is this not covered by <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/fe12159e60258d0b6cae9b580e248b22e80f3f7b/tensorflow/core/grappler/clusters/single_machine.cc#L108\">tensorflow/tensorflow/core/grappler/clusters/single_machine.cc</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 108\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/fe12159e60258d0b6cae9b580e248b22e80f3f7b\">fe12159</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L108\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"108\"></td>\n          <td id=\"LC108\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-c\"><span class=\"pl-c\">//</span> Overwrite the memory size since users might have requested to use only a</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n ?</p>\n<p>It seems like we should be setting memory_size to account for this fraction centrally (even though swapping is the major consumer) if it doesn't account for this fraction already. Is there some way we can unit test the effect of GPU memory limiting on Grappler's device information?</p>\n<p>(CC <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16907534\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rmlarsen\">@rmlarsen</a> who has reviewed some of that code)</p>", "body_text": "Sorry for the delay.\nTaking another look, is this not covered by \n  \n    \n      tensorflow/tensorflow/core/grappler/clusters/single_machine.cc\n    \n    \n         Line 108\n      in\n      fe12159\n    \n    \n    \n    \n\n        \n          \n           // Overwrite the memory size since users might have requested to use only a \n        \n    \n  \n\n ?\nIt seems like we should be setting memory_size to account for this fraction centrally (even though swapping is the major consumer) if it doesn't account for this fraction already. Is there some way we can unit test the effect of GPU memory limiting on Grappler's device information?\n(CC @rmlarsen who has reviewed some of that code)", "body": "Sorry for the delay.\r\n\r\nTaking another look, is this not covered by https://github.com/tensorflow/tensorflow/blob/fe12159e60258d0b6cae9b580e248b22e80f3f7b/tensorflow/core/grappler/clusters/single_machine.cc#L108 ?\r\n\r\nIt seems like we should be setting memory_size to account for this fraction centrally (even though swapping is the major consumer) if it doesn't account for this fraction already. Is there some way we can unit test the effect of GPU memory limiting on Grappler's device information?\r\n\r\n(CC @rmlarsen who has reviewed some of that code)"}
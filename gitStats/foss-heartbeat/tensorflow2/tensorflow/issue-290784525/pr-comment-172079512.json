{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/172079512", "pull_request_review_id": 101035174, "id": 172079512, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjA3OTUxMg==", "diff_hunk": "@@ -646,15 +699,31 @@ def _find_cudnn_header_dir(repository_ctx, cudnn_install_basedir):\n   Returns:\n     The path of the directory containing the cudnn header.\n   \"\"\"\n-  if repository_ctx.path(cudnn_install_basedir + \"/cudnn.h\").exists:\n-    return cudnn_install_basedir\n-  if repository_ctx.path(cudnn_install_basedir + \"/include/cudnn.h\").exists:\n-    return cudnn_install_basedir + \"/include\"\n+  for relative_path in CUDA_INCLUDE_PATHS:\n+    if repository_ctx.path(\"%s/%scudnn.h\" % (cudnn_install_basedir, relative_path)).exists:\n+        return (\"%s/%s\" % (cudnn_install_basedir, relative_path))[:-1]\n   if repository_ctx.path(\"/usr/include/cudnn.h\").exists:", "path": "third_party/gpus/cuda_configure.bzl", "position": 191, "original_position": 191, "commit_id": "67ccc672d5df26e8da8c82999419ac604cfe3fea", "original_commit_id": "78261480c226a18a8112f7c449756f65915e487a", "user": {"login": "pwnall", "id": 11460, "node_id": "MDQ6VXNlcjExNDYw", "avatar_url": "https://avatars1.githubusercontent.com/u/11460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pwnall", "html_url": "https://github.com/pwnall", "followers_url": "https://api.github.com/users/pwnall/followers", "following_url": "https://api.github.com/users/pwnall/following{/other_user}", "gists_url": "https://api.github.com/users/pwnall/gists{/gist_id}", "starred_url": "https://api.github.com/users/pwnall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pwnall/subscriptions", "organizations_url": "https://api.github.com/users/pwnall/orgs", "repos_url": "https://api.github.com/users/pwnall/repos", "events_url": "https://api.github.com/users/pwnall/events{/privacy}", "received_events_url": "https://api.github.com/users/pwnall/received_events", "type": "User", "site_admin": false}, "body": "This is a bit of a wrinkle. The alternatives I could think of are:\r\n\r\n1) Leave as-is -- not worth adding complexity for a single special case\r\n2) Add CUDA_INCLUDE_ABSOLUTE_PATHS\r\n3) Support leading \"/\" in paths and add logic for handling them. At that point the per-function logic gets complex enough that I'd want to extract helpers.\r\n\r\nWDYT?", "created_at": "2018-03-05T02:24:48Z", "updated_at": "2018-03-05T03:36:18Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/16319#discussion_r172079512", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/16319", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/172079512"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/16319#discussion_r172079512"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/16319"}}, "body_html": "<p>This is a bit of a wrinkle. The alternatives I could think of are:</p>\n<ol>\n<li>Leave as-is -- not worth adding complexity for a single special case</li>\n<li>Add CUDA_INCLUDE_ABSOLUTE_PATHS</li>\n<li>Support leading \"/\" in paths and add logic for handling them. At that point the per-function logic gets complex enough that I'd want to extract helpers.</li>\n</ol>\n<p>WDYT?</p>", "body_text": "This is a bit of a wrinkle. The alternatives I could think of are:\n\nLeave as-is -- not worth adding complexity for a single special case\nAdd CUDA_INCLUDE_ABSOLUTE_PATHS\nSupport leading \"/\" in paths and add logic for handling them. At that point the per-function logic gets complex enough that I'd want to extract helpers.\n\nWDYT?"}
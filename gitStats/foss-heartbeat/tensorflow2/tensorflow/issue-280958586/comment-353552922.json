{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/353552922", "html_url": "https://github.com/tensorflow/tensorflow/issues/15266#issuecomment-353552922", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15266", "id": 353552922, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzU1MjkyMg==", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-22T08:55:23Z", "updated_at": "2017-12-27T08:52:04Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Looks like this returns incorrect value on ppc64le i.e. <code>builder.ConstantR0&lt;float&gt;(NAN)</code></p>\n<p>The code flow for <code>builder.ConstantR0&lt;float&gt;(NAN)</code> :<br>\n<code> builder.ConstantR0&lt;float&gt;(NAN) --&gt; ConstantOp([value](Literal* literal) { literal-&gt;PopulateR0(value); });   --&gt;   ParseOpResponse(s, &amp;response)</code></p>\n<p>I was looking into the ConstantOp implementation in file  <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/compiler/xla/client/computation_builder.cc#L161-L180\">https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/compiler/xla/client/computation_builder.cc#L161-L180</a> , this function returns <code>ParseOpResponse(s, &amp;response)</code></p>\n<p>I have added these 2 lines before <code>ParseOpResponse(s, &amp;response)</code> (i.e. line 180 &amp; 181)</p>\n<pre><code>std::cout &lt;&lt; \"\\n Status :  \" &lt;&lt; s  &lt;&lt; \"\\n\";\nstd::cout &lt;&lt; \"\\n Response :  \"&lt;&lt; response.output().ShortDebugString() &lt;&lt; \" \\n\";\n</code></pre>\n<p>On power and x86 getting same output ;</p>\n<pre><code>Status :  OK\nResponse : handle: 1\n</code></pre>\n<p>Also understood that , 'ParseOpResponse' function returns <code>response-&gt;output()</code><br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/compiler/xla/client/computation_builder.cc#L50\">https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/compiler/xla/client/computation_builder.cc#L50</a></p>\n<p>I tried to print the value of <code>response-&gt;output()</code>, but I was getting errors.<br>\nUsing below line getting partial output , and that is mismatching with X86:</p>\n<pre><code>std::cout &lt;&lt; \"\\n response-&gt;mutable_output :  \" &lt;&lt; response.mutable_output() &lt;&lt; \"\\n\";\n</code></pre>\n<p>Output on ppc64le  : <code>response-&gt;mutable_output :  0x1002d4d7f70 </code><br>\nmismatching with x86 :  <code>response-&gt;mutable_output :  0x1c0a730</code></p>\n<p>Not sure but looks like this may be the reason of failure. Any comment on this ?<br>\nHow to print the entire value of <code>response-&gt;output()</code> ?</p>", "body_text": "Looks like this returns incorrect value on ppc64le i.e. builder.ConstantR0<float>(NAN)\nThe code flow for builder.ConstantR0<float>(NAN) :\n builder.ConstantR0<float>(NAN) --> ConstantOp([value](Literal* literal) { literal->PopulateR0(value); });   -->   ParseOpResponse(s, &response)\nI was looking into the ConstantOp implementation in file  https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/compiler/xla/client/computation_builder.cc#L161-L180 , this function returns ParseOpResponse(s, &response)\nI have added these 2 lines before ParseOpResponse(s, &response) (i.e. line 180 & 181)\nstd::cout << \"\\n Status :  \" << s  << \"\\n\";\nstd::cout << \"\\n Response :  \"<< response.output().ShortDebugString() << \" \\n\";\n\nOn power and x86 getting same output ;\nStatus :  OK\nResponse : handle: 1\n\nAlso understood that , 'ParseOpResponse' function returns response->output()\nhttps://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/compiler/xla/client/computation_builder.cc#L50\nI tried to print the value of response->output(), but I was getting errors.\nUsing below line getting partial output , and that is mismatching with X86:\nstd::cout << \"\\n response->mutable_output :  \" << response.mutable_output() << \"\\n\";\n\nOutput on ppc64le  : response->mutable_output :  0x1002d4d7f70 \nmismatching with x86 :  response->mutable_output :  0x1c0a730\nNot sure but looks like this may be the reason of failure. Any comment on this ?\nHow to print the entire value of response->output() ?", "body": "Looks like this returns incorrect value on ppc64le i.e. `builder.ConstantR0<float>(NAN)`\r\n\r\nThe code flow for `builder.ConstantR0<float>(NAN)` :\r\n` builder.ConstantR0<float>(NAN) --> ConstantOp([value](Literal* literal) { literal->PopulateR0(value); });   -->   ParseOpResponse(s, &response)`\r\n\r\nI was looking into the ConstantOp implementation in file  https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/compiler/xla/client/computation_builder.cc#L161-L180 , this function returns `ParseOpResponse(s, &response)`\r\n\r\nI have added these 2 lines before `ParseOpResponse(s, &response)` (i.e. line 180 & 181)\r\n```\r\nstd::cout << \"\\n Status :  \" << s  << \"\\n\";\r\nstd::cout << \"\\n Response :  \"<< response.output().ShortDebugString() << \" \\n\";\r\n```\r\nOn power and x86 getting same output ;\r\n```\r\nStatus :  OK\r\nResponse : handle: 1\r\n```\r\n\r\nAlso understood that , 'ParseOpResponse' function returns `response->output()`\r\nhttps://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/compiler/xla/client/computation_builder.cc#L50\r\n\r\nI tried to print the value of `response->output()`, but I was getting errors.\r\nUsing below line getting partial output , and that is mismatching with X86:  \r\n```\r\nstd::cout << \"\\n response->mutable_output :  \" << response.mutable_output() << \"\\n\";\r\n```\r\nOutput on ppc64le  : ` response->mutable_output :  0x1002d4d7f70  `\r\nmismatching with x86 :  `response->mutable_output :  0x1c0a730`\r\n\r\nNot sure but looks like this may be the reason of failure. Any comment on this ?\r\nHow to print the entire value of `response->output()` ?\r\n"}
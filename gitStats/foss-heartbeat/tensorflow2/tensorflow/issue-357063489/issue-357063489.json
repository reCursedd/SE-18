{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22078", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22078/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22078/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22078/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22078", "id": 357063489, "node_id": "MDU6SXNzdWUzNTcwNjM0ODk=", "number": 22078, "title": "Tensorflow runtime error (misaligned data) with ARM 32bit NEON.", "user": {"login": "myungjoo", "id": 1109011, "node_id": "MDQ6VXNlcjExMDkwMTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1109011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myungjoo", "html_url": "https://github.com/myungjoo", "followers_url": "https://api.github.com/users/myungjoo/followers", "following_url": "https://api.github.com/users/myungjoo/following{/other_user}", "gists_url": "https://api.github.com/users/myungjoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/myungjoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myungjoo/subscriptions", "organizations_url": "https://api.github.com/users/myungjoo/orgs", "repos_url": "https://api.github.com/users/myungjoo/repos", "events_url": "https://api.github.com/users/myungjoo/events{/privacy}", "received_events_url": "https://api.github.com/users/myungjoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "shashishekhar", "id": 1162712, "node_id": "MDQ6VXNlcjExNjI3MTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1162712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shashishekhar", "html_url": "https://github.com/shashishekhar", "followers_url": "https://api.github.com/users/shashishekhar/followers", "following_url": "https://api.github.com/users/shashishekhar/following{/other_user}", "gists_url": "https://api.github.com/users/shashishekhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/shashishekhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shashishekhar/subscriptions", "organizations_url": "https://api.github.com/users/shashishekhar/orgs", "repos_url": "https://api.github.com/users/shashishekhar/repos", "events_url": "https://api.github.com/users/shashishekhar/events{/privacy}", "received_events_url": "https://api.github.com/users/shashishekhar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shashishekhar", "id": 1162712, "node_id": "MDQ6VXNlcjExNjI3MTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1162712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shashishekhar", "html_url": "https://github.com/shashishekhar", "followers_url": "https://api.github.com/users/shashishekhar/followers", "following_url": "https://api.github.com/users/shashishekhar/following{/other_user}", "gists_url": "https://api.github.com/users/shashishekhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/shashishekhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shashishekhar/subscriptions", "organizations_url": "https://api.github.com/users/shashishekhar/orgs", "repos_url": "https://api.github.com/users/shashishekhar/repos", "events_url": "https://api.github.com/users/shashishekhar/events{/privacy}", "received_events_url": "https://api.github.com/users/shashishekhar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-09-05T04:41:03Z", "updated_at": "2018-11-20T02:01:00Z", "closed_at": "2018-10-23T22:51:06Z", "author_association": "CONTRIBUTOR", "body_html": "<p>With a c++ application using tensorflow in armv7 (32bit arm) + NEON, we had been experiencing the following errors in run-time:</p>\n<pre><code>[ 7128.415134] Alignment trap: not handling instruction f9048a1f at [&lt;b28ca130&gt;]\n[ 7128.420838] Unhandled fault: alignment exception (0x801) at 0xbef9d1d4\n[ 7128.427333] pgd = eb6dc000\n[ 7128.430014] [bef9d1d4] *pgd=6c6f5831, *pte=b2d5775f, *ppte=b2d57c7f\n[ 7128.436295] audit: type=1701 audit(1469483309.425:16): auid=0 uid=0 gid=0 ses=3 subj=User pid=8294 comm=\"hello-taos\" exe=\"/usr/bin/7\nBus error (core dumped)\n</code></pre>\n<p>We are experiencing it even though we are using tensorflow 1.9.0, which has <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/88103d000add4ea7f8d1a34ee3c898fc79d9e3c7/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/88103d000add4ea7f8d1a34ee3c898fc79d9e3c7\"><tt>88103d0</tt></a> included mentioned in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"321304323\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/19158\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/19158/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/19158\">#19158</a> .</p>\n<p>However, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=433435\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/again4you\">@again4you</a> has successfully fixed the issue with a few compiler options mandated although the current fix is created quick and dirty.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=433435\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/again4you\">@again4you</a> : Please send a PR when you embed the compiler options (for arm32) after rewriting the fix so that the compiler options are added in CMake script (and Bazel as well if it seems not too difficult) for ARM32.</p>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Happens both with and without custom codes.</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04 and Tizen</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>: No. But same architecture with such devices (armv7)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: github.com source, built with cmake.</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.9.0</li>\n<li><strong>Python version</strong>: 2.7.3</li>\n<li><strong>Bazel version (if compiling from source)</strong>: N/A (used cmake)</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: 6.2.1</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: ARM Mali. (not used)</li>\n<li><strong>Exact command to reproduce</strong>: Execute the C++ executable on a shell. (e.g., <code>$ ./app </code></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Memory misalignment error:</p>\n<pre><code>[ 7128.415134] Alignment trap: not handling instruction f9048a1f at [&lt;b28ca130&gt;]\n[ 7128.420838] Unhandled fault: alignment exception (0x801) at 0xbef9d1d4\n</code></pre>\n<p>However, we have a fix, which is going to be cleaned up to be sent as a PR.</p>", "body_text": "With a c++ application using tensorflow in armv7 (32bit arm) + NEON, we had been experiencing the following errors in run-time:\n[ 7128.415134] Alignment trap: not handling instruction f9048a1f at [<b28ca130>]\n[ 7128.420838] Unhandled fault: alignment exception (0x801) at 0xbef9d1d4\n[ 7128.427333] pgd = eb6dc000\n[ 7128.430014] [bef9d1d4] *pgd=6c6f5831, *pte=b2d5775f, *ppte=b2d57c7f\n[ 7128.436295] audit: type=1701 audit(1469483309.425:16): auid=0 uid=0 gid=0 ses=3 subj=User pid=8294 comm=\"hello-taos\" exe=\"/usr/bin/7\nBus error (core dumped)\n\nWe are experiencing it even though we are using tensorflow 1.9.0, which has 88103d0 included mentioned in #19158 .\nHowever, @again4you has successfully fixed the issue with a few compiler options mandated although the current fix is created quick and dirty.\n@again4you : Please send a PR when you embed the compiler options (for arm32) after rewriting the fix so that the compiler options are added in CMake script (and Bazel as well if it seems not too difficult) for ARM32.\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Happens both with and without custom codes.\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04 and Tizen\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No. But same architecture with such devices (armv7)\nTensorFlow installed from (source or binary): github.com source, built with cmake.\nTensorFlow version (use command below): 1.9.0\nPython version: 2.7.3\nBazel version (if compiling from source): N/A (used cmake)\nGCC/Compiler version (if compiling from source): 6.2.1\nCUDA/cuDNN version: N/A\nGPU model and memory: ARM Mali. (not used)\nExact command to reproduce: Execute the C++ executable on a shell. (e.g., $ ./app \n\nDescribe the problem\nMemory misalignment error:\n[ 7128.415134] Alignment trap: not handling instruction f9048a1f at [<b28ca130>]\n[ 7128.420838] Unhandled fault: alignment exception (0x801) at 0xbef9d1d4\n\nHowever, we have a fix, which is going to be cleaned up to be sent as a PR.", "body": "With a c++ application using tensorflow in armv7 (32bit arm) + NEON, we had been experiencing the following errors in run-time:\r\n```\r\n[ 7128.415134] Alignment trap: not handling instruction f9048a1f at [<b28ca130>]\r\n[ 7128.420838] Unhandled fault: alignment exception (0x801) at 0xbef9d1d4\r\n[ 7128.427333] pgd = eb6dc000\r\n[ 7128.430014] [bef9d1d4] *pgd=6c6f5831, *pte=b2d5775f, *ppte=b2d57c7f\r\n[ 7128.436295] audit: type=1701 audit(1469483309.425:16): auid=0 uid=0 gid=0 ses=3 subj=User pid=8294 comm=\"hello-taos\" exe=\"/usr/bin/7\r\nBus error (core dumped)\r\n```\r\n\r\nWe are experiencing it even though we are using tensorflow 1.9.0, which has https://github.com/tensorflow/tensorflow/commit/88103d000add4ea7f8d1a34ee3c898fc79d9e3c7 included mentioned in #19158 .\r\n\r\nHowever, @again4you has successfully fixed the issue with a few compiler options mandated although the current fix is created quick and dirty.\r\n\r\n@again4you : Please send a PR when you embed the compiler options (for arm32) after rewriting the fix so that the compiler options are added in CMake script (and Bazel as well if it seems not too difficult) for ARM32.\r\n\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Happens both with and without custom codes.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04 and Tizen\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: No. But same architecture with such devices (armv7)\r\n- **TensorFlow installed from (source or binary)**: github.com source, built with cmake.\r\n- **TensorFlow version (use command below)**: 1.9.0\r\n- **Python version**: 2.7.3\r\n- **Bazel version (if compiling from source)**: N/A (used cmake)\r\n- **GCC/Compiler version (if compiling from source)**: 6.2.1\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: ARM Mali. (not used)\r\n- **Exact command to reproduce**: Execute the C++ executable on a shell. (e.g., ```$ ./app ```\r\n\r\n### Describe the problem\r\nMemory misalignment error:\r\n```\r\n[ 7128.415134] Alignment trap: not handling instruction f9048a1f at [<b28ca130>]\r\n[ 7128.420838] Unhandled fault: alignment exception (0x801) at 0xbef9d1d4\r\n```\r\nHowever, we have a fix, which is going to be cleaned up to be sent as a PR.\r\n"}
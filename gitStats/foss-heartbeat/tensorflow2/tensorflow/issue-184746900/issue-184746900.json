{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5159", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5159/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5159/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5159/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5159", "id": 184746900, "node_id": "MDU6SXNzdWUxODQ3NDY5MDA=", "number": 5159, "title": "r0.11 iOS build and examples fail with duplicate symbols in libtensorflow-core.a", "user": {"login": "avalys", "id": 2547910, "node_id": "MDQ6VXNlcjI1NDc5MTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/2547910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avalys", "html_url": "https://github.com/avalys", "followers_url": "https://api.github.com/users/avalys/followers", "following_url": "https://api.github.com/users/avalys/following{/other_user}", "gists_url": "https://api.github.com/users/avalys/gists{/gist_id}", "starred_url": "https://api.github.com/users/avalys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avalys/subscriptions", "organizations_url": "https://api.github.com/users/avalys/orgs", "repos_url": "https://api.github.com/users/avalys/repos", "events_url": "https://api.github.com/users/avalys/events{/privacy}", "received_events_url": "https://api.github.com/users/avalys/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-10-24T04:33:30Z", "updated_at": "2016-10-25T02:02:27Z", "closed_at": "2016-10-24T05:26:52Z", "author_association": "NONE", "body_html": "<p>This is from a fresh checkout of commit-id <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/40d28e24df77130792dc20408e45dda3154b9bc2/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/40d28e24df77130792dc20408e45dda3154b9bc2\"><tt>40d28e2</tt></a>, the current r0.11 branch.</p>\n<p>On Mac OS 10.11.6 and Xcode 8.0, building the iOS library with build_ios_all.sh completes without errors, but attempting to actually build the Xcode projects in contrib/ios_examples or use the resulting libtensorflow-core.a in my own project fails with a linker error.</p>\n<pre><code>duplicate symbol __Z14tf_git_versionv in:\n    /Users/avalys/Desktop/tensorflow.build_ios/tensorflow/contrib/ios_examples/simple/../../makefile/gen/lib/libtensorflow-core.a(version_info.o)\nduplicate symbol __Z19tf_compiler_versionv in:\n    /Users/avalys/Desktop/tensorflow.build_ios/tensorflow/contrib/ios_examples/simple/../../makefile/gen/lib/libtensorflow-core.a(version_info.o)\nld: 2 duplicate symbols for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n<p>And indeed, nm -a libtensorflow-core.a | grep git_version gives:</p>\n<pre><code>0000000000000000 T __Z14tf_git_versionv\n0000000000000000 T __Z14tf_git_versionv\n</code></pre>", "body_text": "This is from a fresh checkout of commit-id 40d28e2, the current r0.11 branch.\nOn Mac OS 10.11.6 and Xcode 8.0, building the iOS library with build_ios_all.sh completes without errors, but attempting to actually build the Xcode projects in contrib/ios_examples or use the resulting libtensorflow-core.a in my own project fails with a linker error.\nduplicate symbol __Z14tf_git_versionv in:\n    /Users/avalys/Desktop/tensorflow.build_ios/tensorflow/contrib/ios_examples/simple/../../makefile/gen/lib/libtensorflow-core.a(version_info.o)\nduplicate symbol __Z19tf_compiler_versionv in:\n    /Users/avalys/Desktop/tensorflow.build_ios/tensorflow/contrib/ios_examples/simple/../../makefile/gen/lib/libtensorflow-core.a(version_info.o)\nld: 2 duplicate symbols for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n\nAnd indeed, nm -a libtensorflow-core.a | grep git_version gives:\n0000000000000000 T __Z14tf_git_versionv\n0000000000000000 T __Z14tf_git_versionv", "body": "This is from a fresh checkout of commit-id 40d28e24df77130792dc20408e45dda3154b9bc2, the current r0.11 branch.\n\nOn Mac OS 10.11.6 and Xcode 8.0, building the iOS library with build_ios_all.sh completes without errors, but attempting to actually build the Xcode projects in contrib/ios_examples or use the resulting libtensorflow-core.a in my own project fails with a linker error.\n\n```\nduplicate symbol __Z14tf_git_versionv in:\n    /Users/avalys/Desktop/tensorflow.build_ios/tensorflow/contrib/ios_examples/simple/../../makefile/gen/lib/libtensorflow-core.a(version_info.o)\nduplicate symbol __Z19tf_compiler_versionv in:\n    /Users/avalys/Desktop/tensorflow.build_ios/tensorflow/contrib/ios_examples/simple/../../makefile/gen/lib/libtensorflow-core.a(version_info.o)\nld: 2 duplicate symbols for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n```\n\nAnd indeed, nm -a libtensorflow-core.a | grep git_version gives:\n\n```\n0000000000000000 T __Z14tf_git_versionv\n0000000000000000 T __Z14tf_git_versionv\n```\n"}
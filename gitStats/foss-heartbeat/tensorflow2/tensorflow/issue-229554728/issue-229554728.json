{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9994", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9994/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9994/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9994/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/9994", "id": 229554728, "node_id": "MDExOlB1bGxSZXF1ZXN0MTIxMjAwODg5", "number": 9994, "title": "Make ResourceHandle private to tensorflow library", "user": {"login": "snnn", "id": 856316, "node_id": "MDQ6VXNlcjg1NjMxNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/856316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snnn", "html_url": "https://github.com/snnn", "followers_url": "https://api.github.com/users/snnn/followers", "following_url": "https://api.github.com/users/snnn/following{/other_user}", "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}", "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snnn/subscriptions", "organizations_url": "https://api.github.com/users/snnn/orgs", "repos_url": "https://api.github.com/users/snnn/repos", "events_url": "https://api.github.com/users/snnn/events{/privacy}", "received_events_url": "https://api.github.com/users/snnn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2017-05-18T04:54:01Z", "updated_at": "2017-05-19T23:28:43Z", "closed_at": "2017-05-19T22:12:13Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/9994", "html_url": "https://github.com/tensorflow/tensorflow/pull/9994", "diff_url": "https://github.com/tensorflow/tensorflow/pull/9994.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/9994.patch"}, "body_html": "<p>tensorflow::ResourceHandle is a protobuf object. The official protobuf document suggests:</p>\n<p>\"If your project is itself a DLL intended for use by third-party software, we recommend<br>\nthat you do NOT expose protocol buffer objects in your library's public interface, and<br>\nthat you statically link protocol buffers into your library\"</p>\n<p>Without this change, it is not possible to implement a ResourceOpKernel in DLL on Windows.</p>\n<p>Error message(before this change):</p>\n<div class=\"highlight highlight-source-wavefront-obj\"><pre>some.obj : error LNK2019: unresolved external symbol \"private: void __cdecl google::protobuf::Arena::AddListNode(void *,void (__cdecl*)(void *))\" (?AddListNode@Arena@protobuf@google@@AEAAXPEAXP6AX0@Z@Z) referenced in function \"public: void __cdecl google::protobuf::Arena::Own&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; &gt;(class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; *)\" (??$Own@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Arena@protobuf@google@@QEAAXPEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)```</pre></div>", "body_text": "tensorflow::ResourceHandle is a protobuf object. The official protobuf document suggests:\n\"If your project is itself a DLL intended for use by third-party software, we recommend\nthat you do NOT expose protocol buffer objects in your library's public interface, and\nthat you statically link protocol buffers into your library\"\nWithout this change, it is not possible to implement a ResourceOpKernel in DLL on Windows.\nError message(before this change):\nsome.obj : error LNK2019: unresolved external symbol \"private: void __cdecl google::protobuf::Arena::AddListNode(void *,void (__cdecl*)(void *))\" (?AddListNode@Arena@protobuf@google@@AEAAXPEAXP6AX0@Z@Z) referenced in function \"public: void __cdecl google::protobuf::Arena::Own<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > *)\" (??$Own@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Arena@protobuf@google@@QEAAXPEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)```", "body": "tensorflow::ResourceHandle is a protobuf object. The official protobuf document suggests:\r\n\r\n\"If your project is itself a DLL intended for use by third-party software, we recommend\r\nthat you do NOT expose protocol buffer objects in your library's public interface, and\r\nthat you statically link protocol buffers into your library\"\r\n\r\nWithout this change, it is not possible to implement a ResourceOpKernel in DLL on Windows.\r\n\r\nError message(before this change):\r\n\r\n```some.obj : error LNK2001: unresolved external symbol \"class google::protobuf::internal::ExplicitlyConstructed<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > google::protobuf::internal::fixed_address_empty_string\" (?fixed_address_empty_string@internal@protobuf@google@@3V?$ExplicitlyConstructed@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@123@A)\r\nsome.obj : error LNK2019: unresolved external symbol \"private: void __cdecl google::protobuf::Arena::AddListNode(void *,void (__cdecl*)(void *))\" (?AddListNode@Arena@protobuf@google@@AEAAXPEAXP6AX0@Z@Z) referenced in function \"public: void __cdecl google::protobuf::Arena::Own<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > *)\" (??$Own@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Arena@protobuf@google@@QEAAXPEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)```\r\n"}
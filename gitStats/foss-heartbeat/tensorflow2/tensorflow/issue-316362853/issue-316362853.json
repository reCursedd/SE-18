{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18739", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18739/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18739/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18739/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18739", "id": 316362853, "node_id": "MDU6SXNzdWUzMTYzNjI4NTM=", "number": 18739, "title": "Undefined References building example_trainer.cc with dynamic linking and Tensorflow r1.7 as external repository and CUDA9/CuDNN7", "user": {"login": "thomasyoung", "id": 583132, "node_id": "MDQ6VXNlcjU4MzEzMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/583132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasyoung", "html_url": "https://github.com/thomasyoung", "followers_url": "https://api.github.com/users/thomasyoung/followers", "following_url": "https://api.github.com/users/thomasyoung/following{/other_user}", "gists_url": "https://api.github.com/users/thomasyoung/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasyoung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasyoung/subscriptions", "organizations_url": "https://api.github.com/users/thomasyoung/orgs", "repos_url": "https://api.github.com/users/thomasyoung/repos", "events_url": "https://api.github.com/users/thomasyoung/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasyoung/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-04-20T18:11:17Z", "updated_at": "2018-04-23T17:28:32Z", "closed_at": "2018-04-23T17:28:32Z", "author_association": "NONE", "body_html": "<p>/.bazelrc</p>\n<pre><code>build --action_env PYTHON_BIN_PATH=\"/usr/bin/python\"\nbuild --action_env PYTHON_LIB_PATH=\"/usr/local/lib/python2.7/dist-packages\"\nbuild --force_python=py2\nbuild --host_force_python=py2\nbuild --python_path=\"/usr/bin/python\"\nbuild --define with_jemalloc=true\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\nbuild --action_env TF_NEED_CUDA=\"1\"\nbuild --action_env CUDA_TOOLKIT_PATH=\"/usr/local/cuda\"\nbuild --action_env TF_CUDA_VERSION=\"9.0\"\nbuild --action_env CUDNN_INSTALL_PATH=\"/usr/lib/x86_64-linux-gnu\"\nbuild --action_env TF_CUDNN_VERSION=\"7\"\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"\nbuild --action_env LD_LIBRARY_PATH=\"/usr/local/cuda-9.0/lib64:/usr/local/cuda/lib64:\"\nbuild --action_env TF_CUDA_CLANG=\"0\"\nbuild --action_env GCC_HOST_COMPILER_PATH=\"/usr/bin/gcc\"\nbuild --config=cuda\ntest --config=cuda\nbuild --define grpc_no_ares=true\nbuild:opt --copt=-march=native\nbuild:opt --host_copt=-march=native\nbuild:opt --define with_default_optimizations=true\nbuild --copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\nbuild --host_copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\n</code></pre>\n<p>/tools/bazel.rc</p>\n<pre><code>build:monolithic --define framework_shared_object=false\nbuild --define framework_shared_object=true\nbuild:cuda --crosstool_top=@local_config_cuda//crosstool:toolchain\nbuild:cuda --define=using_cuda=true --define=using_cuda_nvcc=true\nbuild:mkl --define=using_mkl=true\nbuild --define=use_fast_cpp_protos=true\nbuild --define=allow_oversize_protos=true\nbuild --define=grpc_no_ares=true\nbuild --spawn_strategy=standalone\nbuild --genrule_strategy=standalone\nbuild -c opt\n</code></pre>\n<p>/WORKSPACE:</p>\n<pre><code>workspace(name = \"proj\")\ngit_repository(\n    name = \"org_tensorflow\",\n    commit = \"024aecf414941e11eb643e29ceed3e1c47a115ad\",\n    remote = \"git@github.com:tensorflow/tensorflow.git\",\n)\n\nhttp_archive(\n    name = \"io_bazel_rules_closure\",\n    sha256 = \"6691c58a2cd30a86776dd9bb34898b041e37136f2dc7e24cadaeaf599c95c657\",\n    strip_prefix = \"rules_closure-08039ba8ca59f64248bb3b6ae016460fe9c9914f\",\n    urls = [\n        \"https://mirror.bazel.build/github.com/bazelbuild/rules_closure/archive/08039ba8ca59f64248bb3b6ae016460fe9c9914f.tar.gz\",\n        \"https://github.com/bazelbuild/rules_closure/archive/08039ba8ca59f64248bb3b6ae016460fe9c9914f.tar.gz\",  # 2018-01-16\n    ],\n)\n\nload(\"//src:workspace.bzl\", \"proj_workspace\")\nproj_workspace()\n</code></pre>\n<p>Source code: copied <code>@org_tensorflow//tensorflow/cc/tutorial/example_trainer.cc</code> to <code>//src/example_trainer.cc</code>.<br>\n/src/BUILD:</p>\n<pre><code>cc_binary(\n    name = \"example\",\n    srcs = [\"example_trainer.cc\"],\n    deps = [\n        \"@org_tensorflow//tensorflow/cc:cc_ops\",\n        \"@org_tensorflow//tensorflow/cc:client_session\",\n        \"@org_tensorflow//tensorflow/core:tensorflow\",\n    ],\n)\n</code></pre>\n<p>Build command:</p>\n<pre><code>bazel build src:example\n</code></pre>\n<p>Error:<br>\nTons of \"undefined reference\" errors pointing to functions like stringprintf().</p>\n<pre><code>naming.cc:(.text._ZN10tensorflow12DataFilenameB5cxx11ENS_11StringPieceEii+0x1f): undefined reference to `tensorflow::strings::Printf[abi:cxx11](char const*, ...)'\n</code></pre>\n<p>Adding <code>--monolithic</code> does make it compile and run properly:<br>\n<code>bazel build --monolithic src:example</code></p>", "body_text": "/.bazelrc\nbuild --action_env PYTHON_BIN_PATH=\"/usr/bin/python\"\nbuild --action_env PYTHON_LIB_PATH=\"/usr/local/lib/python2.7/dist-packages\"\nbuild --force_python=py2\nbuild --host_force_python=py2\nbuild --python_path=\"/usr/bin/python\"\nbuild --define with_jemalloc=true\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\nbuild --action_env TF_NEED_CUDA=\"1\"\nbuild --action_env CUDA_TOOLKIT_PATH=\"/usr/local/cuda\"\nbuild --action_env TF_CUDA_VERSION=\"9.0\"\nbuild --action_env CUDNN_INSTALL_PATH=\"/usr/lib/x86_64-linux-gnu\"\nbuild --action_env TF_CUDNN_VERSION=\"7\"\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"\nbuild --action_env LD_LIBRARY_PATH=\"/usr/local/cuda-9.0/lib64:/usr/local/cuda/lib64:\"\nbuild --action_env TF_CUDA_CLANG=\"0\"\nbuild --action_env GCC_HOST_COMPILER_PATH=\"/usr/bin/gcc\"\nbuild --config=cuda\ntest --config=cuda\nbuild --define grpc_no_ares=true\nbuild:opt --copt=-march=native\nbuild:opt --host_copt=-march=native\nbuild:opt --define with_default_optimizations=true\nbuild --copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\nbuild --host_copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\n\n/tools/bazel.rc\nbuild:monolithic --define framework_shared_object=false\nbuild --define framework_shared_object=true\nbuild:cuda --crosstool_top=@local_config_cuda//crosstool:toolchain\nbuild:cuda --define=using_cuda=true --define=using_cuda_nvcc=true\nbuild:mkl --define=using_mkl=true\nbuild --define=use_fast_cpp_protos=true\nbuild --define=allow_oversize_protos=true\nbuild --define=grpc_no_ares=true\nbuild --spawn_strategy=standalone\nbuild --genrule_strategy=standalone\nbuild -c opt\n\n/WORKSPACE:\nworkspace(name = \"proj\")\ngit_repository(\n    name = \"org_tensorflow\",\n    commit = \"024aecf414941e11eb643e29ceed3e1c47a115ad\",\n    remote = \"git@github.com:tensorflow/tensorflow.git\",\n)\n\nhttp_archive(\n    name = \"io_bazel_rules_closure\",\n    sha256 = \"6691c58a2cd30a86776dd9bb34898b041e37136f2dc7e24cadaeaf599c95c657\",\n    strip_prefix = \"rules_closure-08039ba8ca59f64248bb3b6ae016460fe9c9914f\",\n    urls = [\n        \"https://mirror.bazel.build/github.com/bazelbuild/rules_closure/archive/08039ba8ca59f64248bb3b6ae016460fe9c9914f.tar.gz\",\n        \"https://github.com/bazelbuild/rules_closure/archive/08039ba8ca59f64248bb3b6ae016460fe9c9914f.tar.gz\",  # 2018-01-16\n    ],\n)\n\nload(\"//src:workspace.bzl\", \"proj_workspace\")\nproj_workspace()\n\nSource code: copied @org_tensorflow//tensorflow/cc/tutorial/example_trainer.cc to //src/example_trainer.cc.\n/src/BUILD:\ncc_binary(\n    name = \"example\",\n    srcs = [\"example_trainer.cc\"],\n    deps = [\n        \"@org_tensorflow//tensorflow/cc:cc_ops\",\n        \"@org_tensorflow//tensorflow/cc:client_session\",\n        \"@org_tensorflow//tensorflow/core:tensorflow\",\n    ],\n)\n\nBuild command:\nbazel build src:example\n\nError:\nTons of \"undefined reference\" errors pointing to functions like stringprintf().\nnaming.cc:(.text._ZN10tensorflow12DataFilenameB5cxx11ENS_11StringPieceEii+0x1f): undefined reference to `tensorflow::strings::Printf[abi:cxx11](char const*, ...)'\n\nAdding --monolithic does make it compile and run properly:\nbazel build --monolithic src:example", "body": "/.bazelrc\r\n```\r\nbuild --action_env PYTHON_BIN_PATH=\"/usr/bin/python\"\r\nbuild --action_env PYTHON_LIB_PATH=\"/usr/local/lib/python2.7/dist-packages\"\r\nbuild --force_python=py2\r\nbuild --host_force_python=py2\r\nbuild --python_path=\"/usr/bin/python\"\r\nbuild --define with_jemalloc=true\r\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\r\nbuild --action_env TF_NEED_CUDA=\"1\"\r\nbuild --action_env CUDA_TOOLKIT_PATH=\"/usr/local/cuda\"\r\nbuild --action_env TF_CUDA_VERSION=\"9.0\"\r\nbuild --action_env CUDNN_INSTALL_PATH=\"/usr/lib/x86_64-linux-gnu\"\r\nbuild --action_env TF_CUDNN_VERSION=\"7\"\r\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"\r\nbuild --action_env LD_LIBRARY_PATH=\"/usr/local/cuda-9.0/lib64:/usr/local/cuda/lib64:\"\r\nbuild --action_env TF_CUDA_CLANG=\"0\"\r\nbuild --action_env GCC_HOST_COMPILER_PATH=\"/usr/bin/gcc\"\r\nbuild --config=cuda\r\ntest --config=cuda\r\nbuild --define grpc_no_ares=true\r\nbuild:opt --copt=-march=native\r\nbuild:opt --host_copt=-march=native\r\nbuild:opt --define with_default_optimizations=true\r\nbuild --copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\r\nbuild --host_copt=-DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK\r\n```\r\n/tools/bazel.rc\r\n```\r\nbuild:monolithic --define framework_shared_object=false\r\nbuild --define framework_shared_object=true\r\nbuild:cuda --crosstool_top=@local_config_cuda//crosstool:toolchain\r\nbuild:cuda --define=using_cuda=true --define=using_cuda_nvcc=true\r\nbuild:mkl --define=using_mkl=true\r\nbuild --define=use_fast_cpp_protos=true\r\nbuild --define=allow_oversize_protos=true\r\nbuild --define=grpc_no_ares=true\r\nbuild --spawn_strategy=standalone\r\nbuild --genrule_strategy=standalone\r\nbuild -c opt\r\n```\r\n/WORKSPACE:\r\n```\r\nworkspace(name = \"proj\")\r\ngit_repository(\r\n    name = \"org_tensorflow\",\r\n    commit = \"024aecf414941e11eb643e29ceed3e1c47a115ad\",\r\n    remote = \"git@github.com:tensorflow/tensorflow.git\",\r\n)\r\n\r\nhttp_archive(\r\n    name = \"io_bazel_rules_closure\",\r\n    sha256 = \"6691c58a2cd30a86776dd9bb34898b041e37136f2dc7e24cadaeaf599c95c657\",\r\n    strip_prefix = \"rules_closure-08039ba8ca59f64248bb3b6ae016460fe9c9914f\",\r\n    urls = [\r\n        \"https://mirror.bazel.build/github.com/bazelbuild/rules_closure/archive/08039ba8ca59f64248bb3b6ae016460fe9c9914f.tar.gz\",\r\n        \"https://github.com/bazelbuild/rules_closure/archive/08039ba8ca59f64248bb3b6ae016460fe9c9914f.tar.gz\",  # 2018-01-16\r\n    ],\r\n)\r\n\r\nload(\"//src:workspace.bzl\", \"proj_workspace\")\r\nproj_workspace()\r\n```\r\nSource code: copied `@org_tensorflow//tensorflow/cc/tutorial/example_trainer.cc` to `//src/example_trainer.cc`.\r\n/src/BUILD:\r\n```\r\ncc_binary(\r\n    name = \"example\",\r\n    srcs = [\"example_trainer.cc\"],\r\n    deps = [\r\n        \"@org_tensorflow//tensorflow/cc:cc_ops\",\r\n        \"@org_tensorflow//tensorflow/cc:client_session\",\r\n        \"@org_tensorflow//tensorflow/core:tensorflow\",\r\n    ],\r\n)\r\n```\r\nBuild command:\r\n```\r\nbazel build src:example\r\n```\r\nError:\r\nTons of \"undefined reference\" errors pointing to functions like stringprintf().\r\n```\r\nnaming.cc:(.text._ZN10tensorflow12DataFilenameB5cxx11ENS_11StringPieceEii+0x1f): undefined reference to `tensorflow::strings::Printf[abi:cxx11](char const*, ...)'\r\n```\r\nAdding ```--monolithic``` does make it compile and run properly:\r\n```bazel build --monolithic src:example```\r\n"}
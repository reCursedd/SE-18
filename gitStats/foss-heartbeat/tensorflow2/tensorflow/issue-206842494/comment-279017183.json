{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/279017183", "html_url": "https://github.com/tensorflow/tensorflow/issues/7419#issuecomment-279017183", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7419", "id": 279017183, "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTAxNzE4Mw==", "user": {"login": "davideb91", "id": 25665728, "node_id": "MDQ6VXNlcjI1NjY1NzI4", "avatar_url": "https://avatars0.githubusercontent.com/u/25665728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davideb91", "html_url": "https://github.com/davideb91", "followers_url": "https://api.github.com/users/davideb91/followers", "following_url": "https://api.github.com/users/davideb91/following{/other_user}", "gists_url": "https://api.github.com/users/davideb91/gists{/gist_id}", "starred_url": "https://api.github.com/users/davideb91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davideb91/subscriptions", "organizations_url": "https://api.github.com/users/davideb91/orgs", "repos_url": "https://api.github.com/users/davideb91/repos", "events_url": "https://api.github.com/users/davideb91/events{/privacy}", "received_events_url": "https://api.github.com/users/davideb91/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-10T17:56:59Z", "updated_at": "2017-02-10T17:57:34Z", "author_association": "NONE", "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3376817\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/andrewharp\">@andrewharp</a> , it works now!<br>\nHowever when I try to open the app on my android phone it is terminated.</p>\n<p>To build the app I ran</p>\n<pre><code>$ bazel-bin/tensorflow/python/tools/optimize_for_inference \\\n--input=tf_files/retrained_graph.pb \\\n--output=tensorflow/examples/android/assets/retrained_graph.pb\n--input_names=Mul \\\n--output_names=final_result\n</code></pre>\n<p>in order to optimize my graph, and I copied retrained_label.txt in /android/assets/ .<br>\nThen I added these line in /tensorflow/tensorflow/examples/android/src/org/tensorflow/demo/TensorFlowImageClassifier.java</p>\n<pre><code>private static final int INPUT_SIZE = 299;\nprivate static final int IMAGE_MEAN = 128;\nprivate static final float IMAGE_STD = 128;\nprivate static final String INPUT_NAME = \"Mul:0\";\nprivate static final String OUTPUT_NAME = \"final_result:0\";\n\nprivate static final String MODEL_FILE = \"file:///android_asset/retrained_graph.pb\";\nprivate static final String LABEL_FILE = \"file:///android_asset/retrained_labels.txt\";\n</code></pre>\n<p>And I removed other dependencies on the file archives in the tensorflow/examples/android/BUILD file:</p>\n<pre><code>    assets = [\n        \"//tensorflow/examples/android/assets:asset_files\",\n#        \"@inception5h//:model_files\",\n#        \"@mobile_multibox//:model_files\",\n#        \"@stylize//:model_files\",\n    ]\n</code></pre>\n<p>When I build my app with <code>bazel build //tensorflow/examples/android:tensorflow_demo</code>, it works correctly, but when I try to open the app on my phone, it gives error and is terminated.</p>\n<p>Do you have any suggestion please?<br>\nThank you very much!</p>", "body_text": "Thanks @andrewharp , it works now!\nHowever when I try to open the app on my android phone it is terminated.\nTo build the app I ran\n$ bazel-bin/tensorflow/python/tools/optimize_for_inference \\\n--input=tf_files/retrained_graph.pb \\\n--output=tensorflow/examples/android/assets/retrained_graph.pb\n--input_names=Mul \\\n--output_names=final_result\n\nin order to optimize my graph, and I copied retrained_label.txt in /android/assets/ .\nThen I added these line in /tensorflow/tensorflow/examples/android/src/org/tensorflow/demo/TensorFlowImageClassifier.java\nprivate static final int INPUT_SIZE = 299;\nprivate static final int IMAGE_MEAN = 128;\nprivate static final float IMAGE_STD = 128;\nprivate static final String INPUT_NAME = \"Mul:0\";\nprivate static final String OUTPUT_NAME = \"final_result:0\";\n\nprivate static final String MODEL_FILE = \"file:///android_asset/retrained_graph.pb\";\nprivate static final String LABEL_FILE = \"file:///android_asset/retrained_labels.txt\";\n\nAnd I removed other dependencies on the file archives in the tensorflow/examples/android/BUILD file:\n    assets = [\n        \"//tensorflow/examples/android/assets:asset_files\",\n#        \"@inception5h//:model_files\",\n#        \"@mobile_multibox//:model_files\",\n#        \"@stylize//:model_files\",\n    ]\n\nWhen I build my app with bazel build //tensorflow/examples/android:tensorflow_demo, it works correctly, but when I try to open the app on my phone, it gives error and is terminated.\nDo you have any suggestion please?\nThank you very much!", "body": "Thanks @andrewharp , it works now!\r\nHowever when I try to open the app on my android phone it is terminated.\r\n\r\nTo build the app I ran\r\n```\r\n$ bazel-bin/tensorflow/python/tools/optimize_for_inference \\\r\n--input=tf_files/retrained_graph.pb \\\r\n--output=tensorflow/examples/android/assets/retrained_graph.pb\r\n--input_names=Mul \\\r\n--output_names=final_result\r\n```\r\nin order to optimize my graph, and I copied retrained_label.txt in /android/assets/ .\r\nThen I added these line in /tensorflow/tensorflow/examples/android/src/org/tensorflow/demo/TensorFlowImageClassifier.java\r\n```\r\nprivate static final int INPUT_SIZE = 299;\r\nprivate static final int IMAGE_MEAN = 128;\r\nprivate static final float IMAGE_STD = 128;\r\nprivate static final String INPUT_NAME = \"Mul:0\";\r\nprivate static final String OUTPUT_NAME = \"final_result:0\";\r\n\r\nprivate static final String MODEL_FILE = \"file:///android_asset/retrained_graph.pb\";\r\nprivate static final String LABEL_FILE = \"file:///android_asset/retrained_labels.txt\";\r\n```\r\nAnd I removed other dependencies on the file archives in the tensorflow/examples/android/BUILD file:\r\n```\r\n    assets = [\r\n        \"//tensorflow/examples/android/assets:asset_files\",\r\n#        \"@inception5h//:model_files\",\r\n#        \"@mobile_multibox//:model_files\",\r\n#        \"@stylize//:model_files\",\r\n    ]\r\n```\r\n\r\nWhen I build my app with `bazel build //tensorflow/examples/android:tensorflow_demo`, it works correctly, but when I try to open the app on my phone, it gives error and is terminated.\r\n\r\nDo you have any suggestion please?\r\nThank you very much!"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/259351437", "html_url": "https://github.com/tensorflow/tensorflow/issues/5439#issuecomment-259351437", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5439", "id": 259351437, "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTM1MTQzNw==", "user": {"login": "jinhou", "id": 7037235, "node_id": "MDQ6VXNlcjcwMzcyMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/7037235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jinhou", "html_url": "https://github.com/jinhou", "followers_url": "https://api.github.com/users/jinhou/followers", "following_url": "https://api.github.com/users/jinhou/following{/other_user}", "gists_url": "https://api.github.com/users/jinhou/gists{/gist_id}", "starred_url": "https://api.github.com/users/jinhou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jinhou/subscriptions", "organizations_url": "https://api.github.com/users/jinhou/orgs", "repos_url": "https://api.github.com/users/jinhou/repos", "events_url": "https://api.github.com/users/jinhou/events{/privacy}", "received_events_url": "https://api.github.com/users/jinhou/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-09T07:40:26Z", "updated_at": "2016-11-10T06:04:32Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=326106\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/aselle\">@aselle</a> I used a grpc for a distruibed training, and it seemed that the graph will be finalized when i create the class Supervisor, see details in file \"<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/supervisor.py\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/supervisor.py</a>\".<br>\nAnd when i tried to dump the model with the following code, it said the above error.<br>\n`  # Export inference model.</p>\n<p>model_exporter = exporter.Exporter(saver)<br>\nsignature = exporter.generic_signature({\"Reshape_2:0\":i_indices_reshape,<br>\n\"Reshape_3:0\":i_values,<br>\n\"Cast_1:0\":i_shape,<br>\n\"Reshape_1:0\":indices_shape,<br>\n\"softmax_linear/add:0\":logits})<br>\nmodel_exporter.init(init_op=init_op,<br>\ngraph_def=sess.graph.as_graph_def(),<br>\ndefault_graph_signature=signature)<br>\nmodel_exporter.export(FLAGS.export_dir, tf.constant(FLAGS.export_version), sess)<br>\nprint ('Successfully exported model to %s' % FLAGS.export_dir)<br>\n`<br>\nI found a work around method to write the model successfully . Firstly, I saved the checkpoint file during the training process (grpc distributed version). Then I restored the checkpoint file with another session (single node version) which do not use grpc. And I can write the model for this situation.</p>\n<p>However, I am still wondered that how to save the model in the distributed version code?</p>", "body_text": "@aselle I used a grpc for a distruibed training, and it seemed that the graph will be finalized when i create the class Supervisor, see details in file \"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/supervisor.py\".\nAnd when i tried to dump the model with the following code, it said the above error.\n`  # Export inference model.\nmodel_exporter = exporter.Exporter(saver)\nsignature = exporter.generic_signature({\"Reshape_2:0\":i_indices_reshape,\n\"Reshape_3:0\":i_values,\n\"Cast_1:0\":i_shape,\n\"Reshape_1:0\":indices_shape,\n\"softmax_linear/add:0\":logits})\nmodel_exporter.init(init_op=init_op,\ngraph_def=sess.graph.as_graph_def(),\ndefault_graph_signature=signature)\nmodel_exporter.export(FLAGS.export_dir, tf.constant(FLAGS.export_version), sess)\nprint ('Successfully exported model to %s' % FLAGS.export_dir)\n`\nI found a work around method to write the model successfully . Firstly, I saved the checkpoint file during the training process (grpc distributed version). Then I restored the checkpoint file with another session (single node version) which do not use grpc. And I can write the model for this situation.\nHowever, I am still wondered that how to save the model in the distributed version code?", "body": "@aselle I used a grpc for a distruibed training, and it seemed that the graph will be finalized when i create the class Supervisor, see details in file \"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/supervisor.py\". \nAnd when i tried to dump the model with the following code, it said the above error.\n`  # Export inference model.\n\n  model_exporter = exporter.Exporter(saver)\n  signature = exporter.generic_signature({\"Reshape_2:0\":i_indices_reshape,\n                                          \"Reshape_3:0\":i_values,\n                                          \"Cast_1:0\":i_shape,\n                                          \"Reshape_1:0\":indices_shape,\n                                          \"softmax_linear/add:0\":logits})\n  model_exporter.init(init_op=init_op,\n                      graph_def=sess.graph.as_graph_def(),\n                      default_graph_signature=signature)\n  model_exporter.export(FLAGS.export_dir, tf.constant(FLAGS.export_version), sess)\n  print ('Successfully exported model to %s' % FLAGS.export_dir)\n`\nI found a work around method to write the model successfully . Firstly, I saved the checkpoint file during the training process (grpc distributed version). Then I restored the checkpoint file with another session (single node version) which do not use grpc. And I can write the model for this situation. \n\nHowever, I am still wondered that how to save the model in the distributed version code?\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/239932771", "html_url": "https://github.com/tensorflow/tensorflow/issues/3828#issuecomment-239932771", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3828", "id": 239932771, "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTkzMjc3MQ==", "user": {"login": "kuza55", "id": 387986, "node_id": "MDQ6VXNlcjM4Nzk4Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/387986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kuza55", "html_url": "https://github.com/kuza55", "followers_url": "https://api.github.com/users/kuza55/followers", "following_url": "https://api.github.com/users/kuza55/following{/other_user}", "gists_url": "https://api.github.com/users/kuza55/gists{/gist_id}", "starred_url": "https://api.github.com/users/kuza55/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kuza55/subscriptions", "organizations_url": "https://api.github.com/users/kuza55/orgs", "repos_url": "https://api.github.com/users/kuza55/repos", "events_url": "https://api.github.com/users/kuza55/events{/privacy}", "received_events_url": "https://api.github.com/users/kuza55/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-15T21:20:31Z", "updated_at": "2016-08-15T21:30:02Z", "author_association": "NONE", "body_html": "<p>Hmmm, I might just be doing this wrong, commenting the checks out worked with a small test batch, but then failed with a slightly larger test batch...</p>\n<p>FWIW these are the errors I'm looking at now</p>\n<pre><code>Training on length  1  shape:  (78, 1, 3) , target:  (78,)\nWARNING:tensorflow:The current implementation of partial_fit is not optimizedfor use in a loop. Consider using fit() instead.\nWARNING:tensorflow:Setting feature info to TensorSignature(dtype=tf.float32, shape=TensorShape([Dimension(None), Dimension(1), Dimension(3)]), is_sparse=False)\nWARNING:tensorflow:Setting targets info to TensorSignature(dtype=tf.int64, shape=TensorShape([Dimension(None)]), is_sparse=False)\nTraceback (most recent call last):\n  File \"mouse.py\", line 136, in &lt;module&gt;\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"mouse.py\", line 130, in main\n    y_predicted = classifier.predict(x_test)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 323, in predict\n    as_iterable=as_iterable)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 592, in _infer_model\n    predictions = self._get_predict_ops(features)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 824, in _get_predict_ops\n    predictions, _, _ = self._call_model_fn(features, targets, ModeKeys.INFER)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 733, in _call_model_fn\n    return self._model_fn(features, targets)\n  File \"mouse.py\", line 42, in rnn_model2\n    _, encoding = tf.nn.dynamic_rnn(cell, x, dtype=tf.float32)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 797, in dynamic_rnn\n    for input_ in flat_input)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 796, in &lt;genexpr&gt;\n    flat_input = tuple(array_ops.transpose(input_, [1, 0, 2])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 989, in transpose\n    ret = gen_array_ops.transpose(a, perm, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 2497, in transpose\n    result = _op_def_lib.apply_op(\"Transpose\", x=x, perm=perm, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2319, in create_op\n    set_shapes_for_outputs(ret)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1711, in set_shapes_for_outputs\n    shapes = shape_func(op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 2058, in _TransposeShape\n    input_shape.ndims))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_shape.py\", line 570, in merge_with\n    (self, other))\nValueError: Shapes (3,) and (2,) are not compatible\n</code></pre>", "body_text": "Hmmm, I might just be doing this wrong, commenting the checks out worked with a small test batch, but then failed with a slightly larger test batch...\nFWIW these are the errors I'm looking at now\nTraining on length  1  shape:  (78, 1, 3) , target:  (78,)\nWARNING:tensorflow:The current implementation of partial_fit is not optimizedfor use in a loop. Consider using fit() instead.\nWARNING:tensorflow:Setting feature info to TensorSignature(dtype=tf.float32, shape=TensorShape([Dimension(None), Dimension(1), Dimension(3)]), is_sparse=False)\nWARNING:tensorflow:Setting targets info to TensorSignature(dtype=tf.int64, shape=TensorShape([Dimension(None)]), is_sparse=False)\nTraceback (most recent call last):\n  File \"mouse.py\", line 136, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"mouse.py\", line 130, in main\n    y_predicted = classifier.predict(x_test)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 323, in predict\n    as_iterable=as_iterable)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 592, in _infer_model\n    predictions = self._get_predict_ops(features)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 824, in _get_predict_ops\n    predictions, _, _ = self._call_model_fn(features, targets, ModeKeys.INFER)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 733, in _call_model_fn\n    return self._model_fn(features, targets)\n  File \"mouse.py\", line 42, in rnn_model2\n    _, encoding = tf.nn.dynamic_rnn(cell, x, dtype=tf.float32)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 797, in dynamic_rnn\n    for input_ in flat_input)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 796, in <genexpr>\n    flat_input = tuple(array_ops.transpose(input_, [1, 0, 2])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 989, in transpose\n    ret = gen_array_ops.transpose(a, perm, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 2497, in transpose\n    result = _op_def_lib.apply_op(\"Transpose\", x=x, perm=perm, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2319, in create_op\n    set_shapes_for_outputs(ret)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1711, in set_shapes_for_outputs\n    shapes = shape_func(op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 2058, in _TransposeShape\n    input_shape.ndims))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_shape.py\", line 570, in merge_with\n    (self, other))\nValueError: Shapes (3,) and (2,) are not compatible", "body": "Hmmm, I might just be doing this wrong, commenting the checks out worked with a small test batch, but then failed with a slightly larger test batch...\n\nFWIW these are the errors I'm looking at now\n\n```\nTraining on length  1  shape:  (78, 1, 3) , target:  (78,)\nWARNING:tensorflow:The current implementation of partial_fit is not optimizedfor use in a loop. Consider using fit() instead.\nWARNING:tensorflow:Setting feature info to TensorSignature(dtype=tf.float32, shape=TensorShape([Dimension(None), Dimension(1), Dimension(3)]), is_sparse=False)\nWARNING:tensorflow:Setting targets info to TensorSignature(dtype=tf.int64, shape=TensorShape([Dimension(None)]), is_sparse=False)\nTraceback (most recent call last):\n  File \"mouse.py\", line 136, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"mouse.py\", line 130, in main\n    y_predicted = classifier.predict(x_test)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 323, in predict\n    as_iterable=as_iterable)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 592, in _infer_model\n    predictions = self._get_predict_ops(features)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 824, in _get_predict_ops\n    predictions, _, _ = self._call_model_fn(features, targets, ModeKeys.INFER)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 733, in _call_model_fn\n    return self._model_fn(features, targets)\n  File \"mouse.py\", line 42, in rnn_model2\n    _, encoding = tf.nn.dynamic_rnn(cell, x, dtype=tf.float32)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 797, in dynamic_rnn\n    for input_ in flat_input)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 796, in <genexpr>\n    flat_input = tuple(array_ops.transpose(input_, [1, 0, 2])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 989, in transpose\n    ret = gen_array_ops.transpose(a, perm, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 2497, in transpose\n    result = _op_def_lib.apply_op(\"Transpose\", x=x, perm=perm, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2319, in create_op\n    set_shapes_for_outputs(ret)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1711, in set_shapes_for_outputs\n    shapes = shape_func(op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 2058, in _TransposeShape\n    input_shape.ndims))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_shape.py\", line 570, in merge_with\n    (self, other))\nValueError: Shapes (3,) and (2,) are not compatible\n```\n"}
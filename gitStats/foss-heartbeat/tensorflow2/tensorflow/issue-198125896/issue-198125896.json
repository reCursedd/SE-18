{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6573", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6573/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6573/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6573/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6573", "id": 198125896, "node_id": "MDU6SXNzdWUxOTgxMjU4OTY=", "number": 6573, "title": "Error with bazel and protobuf building a project that depends on tensorflow in Windows", "user": {"login": "JosiahKane", "id": 6673752, "node_id": "MDQ6VXNlcjY2NzM3NTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/6673752?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JosiahKane", "html_url": "https://github.com/JosiahKane", "followers_url": "https://api.github.com/users/JosiahKane/followers", "following_url": "https://api.github.com/users/JosiahKane/following{/other_user}", "gists_url": "https://api.github.com/users/JosiahKane/gists{/gist_id}", "starred_url": "https://api.github.com/users/JosiahKane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JosiahKane/subscriptions", "organizations_url": "https://api.github.com/users/JosiahKane/orgs", "repos_url": "https://api.github.com/users/JosiahKane/repos", "events_url": "https://api.github.com/users/JosiahKane/events{/privacy}", "received_events_url": "https://api.github.com/users/JosiahKane/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-12-30T09:45:46Z", "updated_at": "2016-12-30T11:20:30Z", "closed_at": "2016-12-30T11:20:30Z", "author_association": "NONE", "body_html": "<p>We have a project that depends on Tensorflow, using the following in our WORKSPACE file:<br>\nlocal_repository(<br>\nname = \"org_tensorflow\",<br>\npath = <strong>workspace_dir</strong> + \"/Libraries/TensorFlow/\",<br>\n)<br>\nand<br>\n\"@org_tensorflow//tensorflow/core:tensorflow\"<br>\nunder deps in the BUILD file.<br>\nIt builds correctly on osX.</p>\n<p>We also have a Windows machine that we've set up to build tensorflow (Standard set up: VS 2015 community, java 8, Anaconda Python 3.5, etc) and running the simple build (e.g. build a PIP wheel) works.</p>\n<p>However, trying to build our project on Windows fails when it hits tensorflow's protos.<br>\nThe precise error message is<br>\nERROR: C:/tmp/Bazel/D6SVld$i/external/org_tensorflow/tensorflow/core/kernels/BUILD:272:1: null failed: protoc.exe failed: error executing command<br>\ncd C:/tmp/Bazel/D6SVld$i/execroot/face_tf_desktop<br>\nbazel-out/host/bin/external/protobuf/protoc.exe --cpp_out=bazel-out/vc_14_0_x64-opt/genfiles/external/org_tensorflow -Iexternal/org_tensorflow -Ibazel-out/vc_14_0_x64-opt/genfiles/external/org_tensorflow -Iexternal/protobuf/src -Ibazel-out/vc_14_0_x64-opt/genfiles/external/protobuf/src external/org_tensorflow/tensorflow/core/kernels/reader_base.proto: com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status -1073741515.</p>\n<p>Trying to run that command manually in the shell produces:<br>\nbazel-out/vc_14_0_x64-opt/genfiles/external/protobuf/src: warning: directory does not exist.<br>\n(Accurately: the protobuf folder doesn't exist)</p>\n<p>I'm not sure whether this is a bug in tensorflow or in Bazel (or, for that matter, whether the local_repository approach isn't meant to work and only works as a fluke on the Mac.)</p>\n<p>I have tried building with the newest Bazel release 0.4.3, and previously with 0.4.1.</p>", "body_text": "We have a project that depends on Tensorflow, using the following in our WORKSPACE file:\nlocal_repository(\nname = \"org_tensorflow\",\npath = workspace_dir + \"/Libraries/TensorFlow/\",\n)\nand\n\"@org_tensorflow//tensorflow/core:tensorflow\"\nunder deps in the BUILD file.\nIt builds correctly on osX.\nWe also have a Windows machine that we've set up to build tensorflow (Standard set up: VS 2015 community, java 8, Anaconda Python 3.5, etc) and running the simple build (e.g. build a PIP wheel) works.\nHowever, trying to build our project on Windows fails when it hits tensorflow's protos.\nThe precise error message is\nERROR: C:/tmp/Bazel/D6SVld$i/external/org_tensorflow/tensorflow/core/kernels/BUILD:272:1: null failed: protoc.exe failed: error executing command\ncd C:/tmp/Bazel/D6SVld$i/execroot/face_tf_desktop\nbazel-out/host/bin/external/protobuf/protoc.exe --cpp_out=bazel-out/vc_14_0_x64-opt/genfiles/external/org_tensorflow -Iexternal/org_tensorflow -Ibazel-out/vc_14_0_x64-opt/genfiles/external/org_tensorflow -Iexternal/protobuf/src -Ibazel-out/vc_14_0_x64-opt/genfiles/external/protobuf/src external/org_tensorflow/tensorflow/core/kernels/reader_base.proto: com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status -1073741515.\nTrying to run that command manually in the shell produces:\nbazel-out/vc_14_0_x64-opt/genfiles/external/protobuf/src: warning: directory does not exist.\n(Accurately: the protobuf folder doesn't exist)\nI'm not sure whether this is a bug in tensorflow or in Bazel (or, for that matter, whether the local_repository approach isn't meant to work and only works as a fluke on the Mac.)\nI have tried building with the newest Bazel release 0.4.3, and previously with 0.4.1.", "body": "We have a project that depends on Tensorflow, using the following in our WORKSPACE file:\r\nlocal_repository(\r\n  name = \"org_tensorflow\",\r\n  path = __workspace_dir__ + \"/Libraries/TensorFlow/\",\r\n)\r\nand \r\n\"@org_tensorflow//tensorflow/core:tensorflow\"\r\nunder deps in the BUILD file.\r\nIt builds correctly on osX.\r\n\r\nWe also have a Windows machine that we've set up to build tensorflow (Standard set up: VS 2015 community, java 8, Anaconda Python 3.5, etc) and running the simple build (e.g. build a PIP wheel) works.\r\n\r\nHowever, trying to build our project on Windows fails when it hits tensorflow's protos.\r\nThe precise error message is\r\nERROR: C:/tmp/Bazel/D6SVld$i/external/org_tensorflow/tensorflow/core/kernels/BUILD:272:1: null failed: protoc.exe failed: error executing command\r\n  cd C:/tmp/Bazel/D6SVld$i/execroot/face_tf_desktop\r\nbazel-out/host/bin/external/protobuf/protoc.exe --cpp_out=bazel-out/vc_14_0_x64-opt/genfiles/external/org_tensorflow -Iexternal/org_tensorflow -Ibazel-out/vc_14_0_x64-opt/genfiles/external/org_tensorflow -Iexternal/protobuf/src -Ibazel-out/vc_14_0_x64-opt/genfiles/external/protobuf/src external/org_tensorflow/tensorflow/core/kernels/reader_base.proto: com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status -1073741515.\r\n\r\nTrying to run that command manually in the shell produces: \r\nbazel-out/vc_14_0_x64-opt/genfiles/external/protobuf/src: warning: directory does not exist.\r\n(Accurately: the protobuf folder doesn't exist)\r\n\r\nI'm not sure whether this is a bug in tensorflow or in Bazel (or, for that matter, whether the local_repository approach isn't meant to work and only works as a fluke on the Mac.)\r\n\r\nI have tried building with the newest Bazel release 0.4.3, and previously with 0.4.1."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/238665634", "html_url": "https://github.com/tensorflow/tensorflow/issues/3699#issuecomment-238665634", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3699", "id": 238665634, "node_id": "MDEyOklzc3VlQ29tbWVudDIzODY2NTYzNA==", "user": {"login": "patfla", "id": 979871, "node_id": "MDQ6VXNlcjk3OTg3MQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/979871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patfla", "html_url": "https://github.com/patfla", "followers_url": "https://api.github.com/users/patfla/followers", "following_url": "https://api.github.com/users/patfla/following{/other_user}", "gists_url": "https://api.github.com/users/patfla/gists{/gist_id}", "starred_url": "https://api.github.com/users/patfla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patfla/subscriptions", "organizations_url": "https://api.github.com/users/patfla/orgs", "repos_url": "https://api.github.com/users/patfla/repos", "events_url": "https://api.github.com/users/patfla/events{/privacy}", "received_events_url": "https://api.github.com/users/patfla/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-09T19:34:31Z", "updated_at": "2016-08-09T19:34:31Z", "author_association": "NONE", "body_html": "<p>As I iteratively re-execute the build for tutorials_example_trainer I find that the target at which it fails can change:</p>\n<pre><code>patfla@patfla-N550JV:~/code/tensorflow$ bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer\n.\nINFO: Found 1 target...\nINFO: From Compiling tensorflow/core/kernels/batchtospace_op_gpu.cu.cc:\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\n/usr/include/string.h: In function 'void* __mempcpy_inline(void*, const void*, size_t)':\n/usr/include/string.h:652:42: error: 'memcpy' was not declared in this scope\n   return (char *) memcpy (__dest, __src, __n) + __n;\n                                          ^\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1498:1: output 'tensorflow/core/kernels/_objs/batchtospace_op_gpu/tensorflow/core/kernels/batchtospace_op_gpu.cu.o' was not created.\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1498:1: not all outputs were created.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 43.125s, Critical Path: 36.73s\npatfla@patfla-N550JV:~/code/tensorflow$ bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer\nINFO: Found 1 target...\nINFO: From Compiling tensorflow/core/kernels/cwise_op_gpu_mod.cu.cc:\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\n/usr/include/string.h: In function 'void* __mempcpy_inline(void*, const void*, size_t)':\n/usr/include/string.h:652:42: error: 'memcpy' was not declared in this scope\n   return (char *) memcpy (__dest, __src, __n) + __n;\n                                          ^\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1089:1: output 'tensorflow/core/kernels/_objs/cwise_op_gpu/tensorflow/core/kernels/cwise_op_gpu_mod.cu.o' was not created.\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1089:1: not all outputs were created.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 36.292s, Critical Path: 35.57s\n</code></pre>\n<p>That makes me begin to question how bazel keeps state.</p>\n<pre><code>patfla@patfla-N550JV:~/code/tensorflow$ bazel dump --action_cache | wc -l\n1164439\n</code></pre>\n<p>That's not a good indication (less state is usually better) and makes me wonder just what I'm investigating here.  Certainly not, neural net architectures.</p>\n<p>Maybe a different version of bazel would help?</p>\n<pre><code>patfla@patfla-N550JV:~/code/tensorflow$ bazel version\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Jan 01 00:00:00 1970 (0)\nBuild timestamp: Thu Jan 01 00:00:00 1970 (0)\nBuild timestamp as int: 0\npatfla@patfla-N550JV:~/code/tensorflow$ grep -i bazel /var/log/dpkg.log\n2016-08-07 19:47:13 install bazel:amd64 &lt;none&gt; 0.3.1\n2016-08-07 19:47:13 status half-installed bazel:amd64 0.3.1\n2016-08-07 19:47:13 status unpacked bazel:amd64 0.3.1\n2016-08-07 19:47:13 status unpacked bazel:amd64 0.3.1\n2016-08-07 19:47:13 configure bazel:amd64 0.3.1 &lt;none&gt;\n2016-08-07 19:47:13 status unpacked bazel:amd64 0.3.1\n2016-08-07 19:47:13 status half-configured bazel:amd64 0.3.1\n2016-08-07 19:47:13 status installed bazel:amd64 0.3.1\npatfla@patfla-N550JV:~/code/tensorflow$ \n</code></pre>\n<p>I seem to be at bazel 0.3.1.</p>", "body_text": "As I iteratively re-execute the build for tutorials_example_trainer I find that the target at which it fails can change:\npatfla@patfla-N550JV:~/code/tensorflow$ bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer\n.\nINFO: Found 1 target...\nINFO: From Compiling tensorflow/core/kernels/batchtospace_op_gpu.cu.cc:\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\n/usr/include/string.h: In function 'void* __mempcpy_inline(void*, const void*, size_t)':\n/usr/include/string.h:652:42: error: 'memcpy' was not declared in this scope\n   return (char *) memcpy (__dest, __src, __n) + __n;\n                                          ^\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1498:1: output 'tensorflow/core/kernels/_objs/batchtospace_op_gpu/tensorflow/core/kernels/batchtospace_op_gpu.cu.o' was not created.\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1498:1: not all outputs were created.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 43.125s, Critical Path: 36.73s\npatfla@patfla-N550JV:~/code/tensorflow$ bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer\nINFO: Found 1 target...\nINFO: From Compiling tensorflow/core/kernels/cwise_op_gpu_mod.cu.cc:\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\n/usr/include/string.h: In function 'void* __mempcpy_inline(void*, const void*, size_t)':\n/usr/include/string.h:652:42: error: 'memcpy' was not declared in this scope\n   return (char *) memcpy (__dest, __src, __n) + __n;\n                                          ^\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1089:1: output 'tensorflow/core/kernels/_objs/cwise_op_gpu/tensorflow/core/kernels/cwise_op_gpu_mod.cu.o' was not created.\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1089:1: not all outputs were created.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 36.292s, Critical Path: 35.57s\n\nThat makes me begin to question how bazel keeps state.\npatfla@patfla-N550JV:~/code/tensorflow$ bazel dump --action_cache | wc -l\n1164439\n\nThat's not a good indication (less state is usually better) and makes me wonder just what I'm investigating here.  Certainly not, neural net architectures.\nMaybe a different version of bazel would help?\npatfla@patfla-N550JV:~/code/tensorflow$ bazel version\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Jan 01 00:00:00 1970 (0)\nBuild timestamp: Thu Jan 01 00:00:00 1970 (0)\nBuild timestamp as int: 0\npatfla@patfla-N550JV:~/code/tensorflow$ grep -i bazel /var/log/dpkg.log\n2016-08-07 19:47:13 install bazel:amd64 <none> 0.3.1\n2016-08-07 19:47:13 status half-installed bazel:amd64 0.3.1\n2016-08-07 19:47:13 status unpacked bazel:amd64 0.3.1\n2016-08-07 19:47:13 status unpacked bazel:amd64 0.3.1\n2016-08-07 19:47:13 configure bazel:amd64 0.3.1 <none>\n2016-08-07 19:47:13 status unpacked bazel:amd64 0.3.1\n2016-08-07 19:47:13 status half-configured bazel:amd64 0.3.1\n2016-08-07 19:47:13 status installed bazel:amd64 0.3.1\npatfla@patfla-N550JV:~/code/tensorflow$ \n\nI seem to be at bazel 0.3.1.", "body": "As I iteratively re-execute the build for tutorials_example_trainer I find that the target at which it fails can change:\n\n```\npatfla@patfla-N550JV:~/code/tensorflow$ bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer\n.\nINFO: Found 1 target...\nINFO: From Compiling tensorflow/core/kernels/batchtospace_op_gpu.cu.cc:\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\n/usr/include/string.h: In function 'void* __mempcpy_inline(void*, const void*, size_t)':\n/usr/include/string.h:652:42: error: 'memcpy' was not declared in this scope\n   return (char *) memcpy (__dest, __src, __n) + __n;\n                                          ^\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1498:1: output 'tensorflow/core/kernels/_objs/batchtospace_op_gpu/tensorflow/core/kernels/batchtospace_op_gpu.cu.o' was not created.\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1498:1: not all outputs were created.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 43.125s, Critical Path: 36.73s\npatfla@patfla-N550JV:~/code/tensorflow$ bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer\nINFO: Found 1 target...\nINFO: From Compiling tensorflow/core/kernels/cwise_op_gpu_mod.cu.cc:\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\nnvcc warning : option '--relaxed-constexpr' has been deprecated and replaced by option '--expt-relaxed-constexpr'.\n/usr/include/string.h: In function 'void* __mempcpy_inline(void*, const void*, size_t)':\n/usr/include/string.h:652:42: error: 'memcpy' was not declared in this scope\n   return (char *) memcpy (__dest, __src, __n) + __n;\n                                          ^\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1089:1: output 'tensorflow/core/kernels/_objs/cwise_op_gpu/tensorflow/core/kernels/cwise_op_gpu_mod.cu.o' was not created.\nERROR: /home/patfla/code/tensorflow/tensorflow/core/kernels/BUILD:1089:1: not all outputs were created.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 36.292s, Critical Path: 35.57s\n```\n\nThat makes me begin to question how bazel keeps state.\n\n```\npatfla@patfla-N550JV:~/code/tensorflow$ bazel dump --action_cache | wc -l\n1164439\n```\n\nThat's not a good indication (less state is usually better) and makes me wonder just what I'm investigating here.  Certainly not, neural net architectures.\n\nMaybe a different version of bazel would help?\n\n```\npatfla@patfla-N550JV:~/code/tensorflow$ bazel version\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Jan 01 00:00:00 1970 (0)\nBuild timestamp: Thu Jan 01 00:00:00 1970 (0)\nBuild timestamp as int: 0\npatfla@patfla-N550JV:~/code/tensorflow$ grep -i bazel /var/log/dpkg.log\n2016-08-07 19:47:13 install bazel:amd64 <none> 0.3.1\n2016-08-07 19:47:13 status half-installed bazel:amd64 0.3.1\n2016-08-07 19:47:13 status unpacked bazel:amd64 0.3.1\n2016-08-07 19:47:13 status unpacked bazel:amd64 0.3.1\n2016-08-07 19:47:13 configure bazel:amd64 0.3.1 <none>\n2016-08-07 19:47:13 status unpacked bazel:amd64 0.3.1\n2016-08-07 19:47:13 status half-configured bazel:amd64 0.3.1\n2016-08-07 19:47:13 status installed bazel:amd64 0.3.1\npatfla@patfla-N550JV:~/code/tensorflow$ \n```\n\nI seem to be at bazel 0.3.1.\n"}
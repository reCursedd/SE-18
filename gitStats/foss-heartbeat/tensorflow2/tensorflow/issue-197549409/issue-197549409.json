{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6497", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6497/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6497/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6497/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6497", "id": 197549409, "node_id": "MDU6SXNzdWUxOTc1NDk0MDk=", "number": 6497, "title": "OpenCL isn't working", "user": {"login": "inferrna", "id": 4245277, "node_id": "MDQ6VXNlcjQyNDUyNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/4245277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inferrna", "html_url": "https://github.com/inferrna", "followers_url": "https://api.github.com/users/inferrna/followers", "following_url": "https://api.github.com/users/inferrna/following{/other_user}", "gists_url": "https://api.github.com/users/inferrna/gists{/gist_id}", "starred_url": "https://api.github.com/users/inferrna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inferrna/subscriptions", "organizations_url": "https://api.github.com/users/inferrna/orgs", "repos_url": "https://api.github.com/users/inferrna/repos", "events_url": "https://api.github.com/users/inferrna/events{/privacy}", "received_events_url": "https://api.github.com/users/inferrna/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-12-26T07:24:51Z", "updated_at": "2017-01-21T16:35:26Z", "closed_at": "2016-12-26T15:52:29Z", "author_association": "NONE", "body_html": "<p>TF is configured with OpenCL</p>\n<pre><code>$ ./configure \n/media/Compressed/Drivers_bios/src/dev/tensorflow /media/Compressed/Drivers_bios/src/dev/tensorflow\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \nNo Hadoop File System support will be enabled for TensorFlow\nFound possible Python library paths:\n  /usr/lib/python3/dist-packages\n  /usr/local/lib/python3.5/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3/dist-packages]\n/usr/local/lib/python3.5/dist-packages\nDo you wish to build TensorFlow with OpenCL support? [y/N] y\nOpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N] N\nNo CUDA support will be enabled for TensorFlow\nPlease specify which C++ compiler should be used as the host C++ compiler. [Default is ]: /usr/bin/g++\nPlease specify which C compiler should be used as the host C compiler. [Default is ]: /usr/bin/gcc\nPlease specify the location where ComputeCpp for SYCL 1.2 is installed. [Default is /usr/local/computecpp]:\n</code></pre>\n<p>ComputeCpp is also present</p>\n<pre><code>$ ls /usr/local/computecpp/*   \n/usr/local/computecpp/bin:\ncompute++  computecpp_info\n\n/usr/local/computecpp/doc:\nLICENSE.text  computecpp_error_codes.pdf      computecpp_glossary.pdf  computecpp_man.pdf                     computecpp_release_notes.pdf\napi_pages     computecpp_getting_started.pdf  computecpp_info_man.pdf  computecpp_platform_support_notes.pdf  computecpp_stream_class.pdf\n\n/usr/local/computecpp/include:\nCL  SYCL\n\n/usr/local/computecpp/lib:\nclang  libComputeCpp.so\n</code></pre>\n<p>I also has OpenCL</p>\n<pre><code>$ clinfo |grep -i version\n  Platform Version:\t\t\t\t OpenCL 2.0 AMD-APP (1912.5)\n  Device OpenCL C version:\t\t\t OpenCL C 1.2 \n  Driver version:\t\t\t\t 1912.5 (VM)\n  Version:\t\t\t\t\t OpenCL 1.2 AMD-APP (1912.5)\n  Device OpenCL C version:\t\t\t OpenCL C 1.2 \n  Driver version:\t\t\t\t 1912.5 (sse2,avx,fma4)\n  Version:\t\t\t\t\t OpenCL 1.2 AMD-APP (1912.5)\n</code></pre>\n<p>But it seems that TF don't see any OpenCL device in my system.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">from</span> tensorflow.python.client <span class=\"pl-k\">import</span> device_lib\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> [x.name <span class=\"pl-k\">for</span> x <span class=\"pl-k\">in</span> device_lib.list_local_devices()]\n[<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/cpu:0<span class=\"pl-pds\">'</span></span>]</pre></div>", "body_text": "TF is configured with OpenCL\n$ ./configure \n/media/Compressed/Drivers_bios/src/dev/tensorflow /media/Compressed/Drivers_bios/src/dev/tensorflow\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \nNo Hadoop File System support will be enabled for TensorFlow\nFound possible Python library paths:\n  /usr/lib/python3/dist-packages\n  /usr/local/lib/python3.5/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3/dist-packages]\n/usr/local/lib/python3.5/dist-packages\nDo you wish to build TensorFlow with OpenCL support? [y/N] y\nOpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N] N\nNo CUDA support will be enabled for TensorFlow\nPlease specify which C++ compiler should be used as the host C++ compiler. [Default is ]: /usr/bin/g++\nPlease specify which C compiler should be used as the host C compiler. [Default is ]: /usr/bin/gcc\nPlease specify the location where ComputeCpp for SYCL 1.2 is installed. [Default is /usr/local/computecpp]:\n\nComputeCpp is also present\n$ ls /usr/local/computecpp/*   \n/usr/local/computecpp/bin:\ncompute++  computecpp_info\n\n/usr/local/computecpp/doc:\nLICENSE.text  computecpp_error_codes.pdf      computecpp_glossary.pdf  computecpp_man.pdf                     computecpp_release_notes.pdf\napi_pages     computecpp_getting_started.pdf  computecpp_info_man.pdf  computecpp_platform_support_notes.pdf  computecpp_stream_class.pdf\n\n/usr/local/computecpp/include:\nCL  SYCL\n\n/usr/local/computecpp/lib:\nclang  libComputeCpp.so\n\nI also has OpenCL\n$ clinfo |grep -i version\n  Platform Version:\t\t\t\t OpenCL 2.0 AMD-APP (1912.5)\n  Device OpenCL C version:\t\t\t OpenCL C 1.2 \n  Driver version:\t\t\t\t 1912.5 (VM)\n  Version:\t\t\t\t\t OpenCL 1.2 AMD-APP (1912.5)\n  Device OpenCL C version:\t\t\t OpenCL C 1.2 \n  Driver version:\t\t\t\t 1912.5 (sse2,avx,fma4)\n  Version:\t\t\t\t\t OpenCL 1.2 AMD-APP (1912.5)\n\nBut it seems that TF don't see any OpenCL device in my system.\n>>> from tensorflow.python.client import device_lib\n>>> [x.name for x in device_lib.list_local_devices()]\n['/cpu:0']", "body": "TF is configured with OpenCL\r\n```\r\n$ ./configure \r\n/media/Compressed/Drivers_bios/src/dev/tensorflow /media/Compressed/Drivers_bios/src/dev/tensorflow\r\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \r\nNo Google Cloud Platform support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \r\nNo Hadoop File System support will be enabled for TensorFlow\r\nFound possible Python library paths:\r\n  /usr/lib/python3/dist-packages\r\n  /usr/local/lib/python3.5/dist-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3/dist-packages]\r\n/usr/local/lib/python3.5/dist-packages\r\nDo you wish to build TensorFlow with OpenCL support? [y/N] y\r\nOpenCL support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with CUDA support? [y/N] N\r\nNo CUDA support will be enabled for TensorFlow\r\nPlease specify which C++ compiler should be used as the host C++ compiler. [Default is ]: /usr/bin/g++\r\nPlease specify which C compiler should be used as the host C compiler. [Default is ]: /usr/bin/gcc\r\nPlease specify the location where ComputeCpp for SYCL 1.2 is installed. [Default is /usr/local/computecpp]:\r\n```\r\n\r\nComputeCpp is also present\r\n```\r\n$ ls /usr/local/computecpp/*   \r\n/usr/local/computecpp/bin:\r\ncompute++  computecpp_info\r\n\r\n/usr/local/computecpp/doc:\r\nLICENSE.text  computecpp_error_codes.pdf      computecpp_glossary.pdf  computecpp_man.pdf                     computecpp_release_notes.pdf\r\napi_pages     computecpp_getting_started.pdf  computecpp_info_man.pdf  computecpp_platform_support_notes.pdf  computecpp_stream_class.pdf\r\n\r\n/usr/local/computecpp/include:\r\nCL  SYCL\r\n\r\n/usr/local/computecpp/lib:\r\nclang  libComputeCpp.so\r\n```\r\n\r\nI also has OpenCL\r\n```\r\n$ clinfo |grep -i version\r\n  Platform Version:\t\t\t\t OpenCL 2.0 AMD-APP (1912.5)\r\n  Device OpenCL C version:\t\t\t OpenCL C 1.2 \r\n  Driver version:\t\t\t\t 1912.5 (VM)\r\n  Version:\t\t\t\t\t OpenCL 1.2 AMD-APP (1912.5)\r\n  Device OpenCL C version:\t\t\t OpenCL C 1.2 \r\n  Driver version:\t\t\t\t 1912.5 (sse2,avx,fma4)\r\n  Version:\t\t\t\t\t OpenCL 1.2 AMD-APP (1912.5)\r\n```\r\n\r\nBut it seems that TF don't see any OpenCL device in my system.\r\n```python\r\n>>> from tensorflow.python.client import device_lib\r\n>>> [x.name for x in device_lib.list_local_devices()]\r\n['/cpu:0']\r\n```"}
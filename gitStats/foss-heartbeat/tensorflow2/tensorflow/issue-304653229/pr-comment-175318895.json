{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/175318895", "pull_request_review_id": 104826931, "id": 175318895, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NTMxODg5NQ==", "diff_hunk": "@@ -368,11 +375,19 @@ class Flatten(base.Layer):\n   ```\n   \"\"\"\n \n-  def __init__(self, **kwargs):\n+  def __init__(self, data_format='channels_last', **kwargs):\n     super(Flatten, self).__init__(**kwargs)\n     self.input_spec = base.InputSpec(min_ndim=2)\n+    self.data_format = utils.normalize_data_format(data_format)\n \n   def call(self, inputs):\n+    if self.data_format == 'channels_first':\n+      # Ensure works for any dim, plus 2 due to [N, C, ...]\n+      permutation = [0]\n+      permutation.extend([i + 2 for i in\n+                          range(len(inputs.shape.as_list()[2:]))])", "path": "tensorflow/python/layers/core.py", "position": null, "original_position": 29, "commit_id": "1a56a3299e904d5a3352a3a15e4cf7401f72bbc3", "original_commit_id": "b8c1716050b4aea517466b212ff0071458daef06", "user": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "body": "`inputs.shape.as_list()` looks incorrect. It should be `inputs.get_shape().as_list()`. Also take into account the case where `inputs.get_shape()` returns None (in this case, do nothing).", "created_at": "2018-03-19T02:26:09Z", "updated_at": "2018-10-02T15:33:55Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/17672#discussion_r175318895", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17672", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/175318895"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/17672#discussion_r175318895"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17672"}}, "body_html": "<p><code>inputs.shape.as_list()</code> looks incorrect. It should be <code>inputs.get_shape().as_list()</code>. Also take into account the case where <code>inputs.get_shape()</code> returns None (in this case, do nothing).</p>", "body_text": "inputs.shape.as_list() looks incorrect. It should be inputs.get_shape().as_list(). Also take into account the case where inputs.get_shape() returns None (in this case, do nothing)."}
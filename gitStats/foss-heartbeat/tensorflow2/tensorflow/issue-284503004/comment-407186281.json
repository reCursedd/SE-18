{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/407186281", "html_url": "https://github.com/tensorflow/tensorflow/issues/15633#issuecomment-407186281", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15633", "id": 407186281, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzE4NjI4MQ==", "user": {"login": "Ali-Amir", "id": 6233985, "node_id": "MDQ6VXNlcjYyMzM5ODU=", "avatar_url": "https://avatars1.githubusercontent.com/u/6233985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ali-Amir", "html_url": "https://github.com/Ali-Amir", "followers_url": "https://api.github.com/users/Ali-Amir/followers", "following_url": "https://api.github.com/users/Ali-Amir/following{/other_user}", "gists_url": "https://api.github.com/users/Ali-Amir/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ali-Amir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ali-Amir/subscriptions", "organizations_url": "https://api.github.com/users/Ali-Amir/orgs", "repos_url": "https://api.github.com/users/Ali-Amir/repos", "events_url": "https://api.github.com/users/Ali-Amir/events{/privacy}", "received_events_url": "https://api.github.com/users/Ali-Amir/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-23T20:15:08Z", "updated_at": "2018-07-23T20:15:08Z", "author_association": "NONE", "body_html": "<p>I was looking at <code>TFLiteObjectDetectionAPIModel.java</code> in the example demo app. Is there a reason that <code>outputLocations</code>, <code>outputClasses</code>, <code>outputScores</code> and <code>numDetections</code> are allocated on each <code>recognizeImage</code> call <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/examples/android/app/src/main/java/org/tensorflow/demo/TFLiteObjectDetectionAPIModel.java#L179\">here</a>? It seems that they are meant to be preallocated.<br>\nI've tried running the code with preallocation and it seems to work fine, but I just wanted to make sure there's nothing going under the covers that would introduce problems later.</p>", "body_text": "I was looking at TFLiteObjectDetectionAPIModel.java in the example demo app. Is there a reason that outputLocations, outputClasses, outputScores and numDetections are allocated on each recognizeImage call here? It seems that they are meant to be preallocated.\nI've tried running the code with preallocation and it seems to work fine, but I just wanted to make sure there's nothing going under the covers that would introduce problems later.", "body": "I was looking at `TFLiteObjectDetectionAPIModel.java` in the example demo app. Is there a reason that `outputLocations`, `outputClasses`, `outputScores` and `numDetections` are allocated on each `recognizeImage` call [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/examples/android/app/src/main/java/org/tensorflow/demo/TFLiteObjectDetectionAPIModel.java#L179)? It seems that they are meant to be preallocated.\r\nI've tried running the code with preallocation and it seems to work fine, but I just wanted to make sure there's nothing going under the covers that would introduce problems later."}
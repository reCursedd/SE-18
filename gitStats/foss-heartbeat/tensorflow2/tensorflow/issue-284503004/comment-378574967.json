{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/378574967", "html_url": "https://github.com/tensorflow/tensorflow/issues/15633#issuecomment-378574967", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15633", "id": 378574967, "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODU3NDk2Nw==", "user": {"login": "Haijunlv", "id": 28926237, "node_id": "MDQ6VXNlcjI4OTI2MjM3", "avatar_url": "https://avatars2.githubusercontent.com/u/28926237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Haijunlv", "html_url": "https://github.com/Haijunlv", "followers_url": "https://api.github.com/users/Haijunlv/followers", "following_url": "https://api.github.com/users/Haijunlv/following{/other_user}", "gists_url": "https://api.github.com/users/Haijunlv/gists{/gist_id}", "starred_url": "https://api.github.com/users/Haijunlv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Haijunlv/subscriptions", "organizations_url": "https://api.github.com/users/Haijunlv/orgs", "repos_url": "https://api.github.com/users/Haijunlv/repos", "events_url": "https://api.github.com/users/Haijunlv/events{/privacy}", "received_events_url": "https://api.github.com/users/Haijunlv/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-04T11:58:28Z", "updated_at": "2018-04-04T12:22:56Z", "author_association": "NONE", "body_html": "<pre><code>@andrewharp  Hi, andrewharp. i just followed your quick steps for converting an SSD MobileNet model to tflite format, and then i tried to  build the demo to use it. But something accurred in apk.\nfor the tflite from mobilenet_ssd_tflite_v1.zip, everything is ok! i can use mobile to detecter things.\nAnd then i tried to use pet data to fine tune the model from the checkpoint in mobilenet_ssd_tflite_v1.zip. this process is also ok. i check the generated frozen_inference_graph.pb with the object_detection_tutorial.ipynb(https://github.com/tensorflow/models/blob/master/research/object_detection/object_detection_tutorial.ipynb). the result shown this pb can used to object detection. And then i followed the script to convert frozen pb to tflite. Then build demo with tflite, unfortunately something wrong ocurred. Then log is written below. \nIt seems the Shape of output target [1, 1917, 4] does not match with the shape of the Tensor [1, 1917, 1, 4]. Because i am new to use object detection api, i donot know how to deal with the problem. \nHope you can point out some solutions, Thx! \n</code></pre>\n<p>Mobile Log here:<br>\n04-04 19:46:36.099 28864-28882/org.tensorflow.lite.demo E/AndroidRuntime: FATAL EXCEPTION: inference Process: org.tensorflow.lite.demo, PID: 28864  java.lang.IllegalArgumentException: Shape of output target [1, 1917, 4] does not match with the shape of the Tensor [1, 1917, 1, 4].       at org.tensorflow.lite.Tensor.copyTo(Tensor.java:44)   at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:139)   at org.tensorflow.demo.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:226) at org.tensorflow.demo.DetectorActivity$3.run(DetectorActivity.java:248)   at android.os.Handler.handleCallback(Handler.java:761)  at android.os.Handler.dispatchMessage(Handler.java:98)at android.os.Looper.loop(Looper.java:156)  at android.os.HandlerThread.run(HandlerThread.java:61)</p>", "body_text": "@andrewharp  Hi, andrewharp. i just followed your quick steps for converting an SSD MobileNet model to tflite format, and then i tried to  build the demo to use it. But something accurred in apk.\nfor the tflite from mobilenet_ssd_tflite_v1.zip, everything is ok! i can use mobile to detecter things.\nAnd then i tried to use pet data to fine tune the model from the checkpoint in mobilenet_ssd_tflite_v1.zip. this process is also ok. i check the generated frozen_inference_graph.pb with the object_detection_tutorial.ipynb(https://github.com/tensorflow/models/blob/master/research/object_detection/object_detection_tutorial.ipynb). the result shown this pb can used to object detection. And then i followed the script to convert frozen pb to tflite. Then build demo with tflite, unfortunately something wrong ocurred. Then log is written below. \nIt seems the Shape of output target [1, 1917, 4] does not match with the shape of the Tensor [1, 1917, 1, 4]. Because i am new to use object detection api, i donot know how to deal with the problem. \nHope you can point out some solutions, Thx! \n\nMobile Log here:\n04-04 19:46:36.099 28864-28882/org.tensorflow.lite.demo E/AndroidRuntime: FATAL EXCEPTION: inference Process: org.tensorflow.lite.demo, PID: 28864  java.lang.IllegalArgumentException: Shape of output target [1, 1917, 4] does not match with the shape of the Tensor [1, 1917, 1, 4].       at org.tensorflow.lite.Tensor.copyTo(Tensor.java:44)   at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:139)   at org.tensorflow.demo.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:226) at org.tensorflow.demo.DetectorActivity$3.run(DetectorActivity.java:248)   at android.os.Handler.handleCallback(Handler.java:761)  at android.os.Handler.dispatchMessage(Handler.java:98)at android.os.Looper.loop(Looper.java:156)  at android.os.HandlerThread.run(HandlerThread.java:61)", "body": "    @andrewharp  Hi, andrewharp. i just followed your quick steps for converting an SSD MobileNet model to tflite format, and then i tried to  build the demo to use it. But something accurred in apk.\r\n    for the tflite from mobilenet_ssd_tflite_v1.zip, everything is ok! i can use mobile to detecter things.\r\n    And then i tried to use pet data to fine tune the model from the checkpoint in mobilenet_ssd_tflite_v1.zip. this process is also ok. i check the generated frozen_inference_graph.pb with the object_detection_tutorial.ipynb(https://github.com/tensorflow/models/blob/master/research/object_detection/object_detection_tutorial.ipynb). the result shown this pb can used to object detection. And then i followed the script to convert frozen pb to tflite. Then build demo with tflite, unfortunately something wrong ocurred. Then log is written below. \r\n    It seems the Shape of output target [1, 1917, 4] does not match with the shape of the Tensor [1, 1917, 1, 4]. Because i am new to use object detection api, i donot know how to deal with the problem. \r\n    Hope you can point out some solutions, Thx! \r\n\r\nMobile Log here:\r\n04-04 19:46:36.099 28864-28882/org.tensorflow.lite.demo E/AndroidRuntime: FATAL EXCEPTION: inference Process: org.tensorflow.lite.demo, PID: 28864  java.lang.IllegalArgumentException: Shape of output target [1, 1917, 4] does not match with the shape of the Tensor [1, 1917, 1, 4].       at org.tensorflow.lite.Tensor.copyTo(Tensor.java:44)   at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:139)   at org.tensorflow.demo.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:226) at org.tensorflow.demo.DetectorActivity$3.run(DetectorActivity.java:248)   at android.os.Handler.handleCallback(Handler.java:761)  at android.os.Handler.dispatchMessage(Handler.java:98)at android.os.Looper.loop(Looper.java:156)  at android.os.HandlerThread.run(HandlerThread.java:61)"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/383971970", "html_url": "https://github.com/tensorflow/tensorflow/issues/15633#issuecomment-383971970", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15633", "id": 383971970, "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mzk3MTk3MA==", "user": {"login": "FrozenGene", "id": 7287321, "node_id": "MDQ6VXNlcjcyODczMjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/7287321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FrozenGene", "html_url": "https://github.com/FrozenGene", "followers_url": "https://api.github.com/users/FrozenGene/followers", "following_url": "https://api.github.com/users/FrozenGene/following{/other_user}", "gists_url": "https://api.github.com/users/FrozenGene/gists{/gist_id}", "starred_url": "https://api.github.com/users/FrozenGene/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FrozenGene/subscriptions", "organizations_url": "https://api.github.com/users/FrozenGene/orgs", "repos_url": "https://api.github.com/users/FrozenGene/repos", "events_url": "https://api.github.com/users/FrozenGene/events{/privacy}", "received_events_url": "https://api.github.com/users/FrozenGene/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-24T15:19:12Z", "updated_at": "2018-04-24T15:19:12Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3376817\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/andrewharp\">@andrewharp</a> Thanks for your great posting. However, I have one question for your steps.</p>\n<h1>Strip out problematic nodes before even letting TOCO see the graphdef</h1>\n<p>bazel run -c opt tensorflow/python/tools/optimize_for_inference -- <br>\n--input=$DETECT_PB  --output=$STRIPPED_PB --frozen_graph=True <br>\n--input_names=Preprocessor/sub --output_names=concat,concat_1 <br>\n--alsologtostderr</p>\n<p>If I don't misunderstand, here you want to produce STRIPPED_PB, right? If so, currently, our input file's input should be image_tensor. So, I don't very understand why we use Preprocessor/sub. Could you explain more detail?</p>\n<p>Secondly, here we use optimize_for_inference, can we use transform_graph tool? because new tensorflow documentation recommend transform_graph instead of optimize_for_inference.</p>", "body_text": "@andrewharp Thanks for your great posting. However, I have one question for your steps.\nStrip out problematic nodes before even letting TOCO see the graphdef\nbazel run -c opt tensorflow/python/tools/optimize_for_inference -- \n--input=$DETECT_PB  --output=$STRIPPED_PB --frozen_graph=True \n--input_names=Preprocessor/sub --output_names=concat,concat_1 \n--alsologtostderr\nIf I don't misunderstand, here you want to produce STRIPPED_PB, right? If so, currently, our input file's input should be image_tensor. So, I don't very understand why we use Preprocessor/sub. Could you explain more detail?\nSecondly, here we use optimize_for_inference, can we use transform_graph tool? because new tensorflow documentation recommend transform_graph instead of optimize_for_inference.", "body": "@andrewharp Thanks for your great posting. However, I have one question for your steps.\r\n\r\n# Strip out problematic nodes before even letting TOCO see the graphdef\r\nbazel run -c opt tensorflow/python/tools/optimize_for_inference -- \\\r\n--input=$DETECT_PB  --output=$STRIPPED_PB --frozen_graph=True \\\r\n--input_names=Preprocessor/sub --output_names=concat,concat_1 \\\r\n--alsologtostderr\r\n\r\nIf I don't misunderstand, here you want to produce STRIPPED_PB, right? If so, currently, our input file's input should be image_tensor. So, I don't very understand why we use Preprocessor/sub. Could you explain more detail? \r\n\r\nSecondly, here we use optimize_for_inference, can we use transform_graph tool? because new tensorflow documentation recommend transform_graph instead of optimize_for_inference."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/404382331", "html_url": "https://github.com/tensorflow/tensorflow/issues/12328#issuecomment-404382331", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12328", "id": 404382331, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDM4MjMzMQ==", "user": {"login": "gbolcer", "id": 19297096, "node_id": "MDQ6VXNlcjE5Mjk3MDk2", "avatar_url": "https://avatars1.githubusercontent.com/u/19297096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbolcer", "html_url": "https://github.com/gbolcer", "followers_url": "https://api.github.com/users/gbolcer/followers", "following_url": "https://api.github.com/users/gbolcer/following{/other_user}", "gists_url": "https://api.github.com/users/gbolcer/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbolcer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbolcer/subscriptions", "organizations_url": "https://api.github.com/users/gbolcer/orgs", "repos_url": "https://api.github.com/users/gbolcer/repos", "events_url": "https://api.github.com/users/gbolcer/events{/privacy}", "received_events_url": "https://api.github.com/users/gbolcer/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-12T04:02:01Z", "updated_at": "2018-07-12T04:02:01Z", "author_association": "NONE", "body_html": "<p>Reverted to Java8 and Python27.  That eliminated all the cruft from the alternate configurations.  I also had to specify --config=monolithic (on windows), but it all compiled and linked. I'm compiling the OP now.  This is farther than I've gotten w/o errors, so it's looking promising.</p>\n<p>bazel build --config opt --config=monolithic //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni</p>\n<p>Creating library bazel-out/x64_windows-opt/bin/tensorflow/java/libtensorflow_jni.so.if.lib and object bazel-out/x64_windows-opt/bin/tensorflow/java/libtensorflow_jni.so.if.exp<br>\nbatch_kernels.lo.lib(batch_kernels.obj) : warning LNK4217: locally defined symbol ?DEVICE_CPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_CPU) imported in function \"void __cdecl tensorflow::<code>dynamic initializer for 'registrar__body__0__object''(void)\" (??__Eregistrar__body__0__object@tensorflow@@YAXXZ) arithmetic_optimizer.lib(arithmetic_optimizer.obj) : warning LNK4049: locally defined symbol ?DEVICE_CPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_CPU) imported arithmetic_optimizer.lib(arithmetic_optimizer.obj) : warning LNK4217: locally defined symbol ?DEVICE_GPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_GPU) imported in function \"private: bool __cdecl tensorflow::grappler::</code>anonymous namespace'::ReorderCastAndTranspose::NodeIsOnCpuOrGpu(class tensorflow::NodeDef const *)const \" (?NodeIsOnCpuOrGpu@ReorderCastAndTranspose@?A0xa1632fa2@grappler@tensorflow@@AEBA_NPEBVNodeDef@4@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=49380\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/z\">@z</a>)<br>\nlayout_optimizer.lib(layout_optimizer.obj) : warning LNK4049: locally defined symbol ?DEVICE_GPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_GPU) imported<br>\nINFO: Elapsed time: 2293.212s, Critical Path: 470.55s<br>\nINFO: 1893 processes: 1892 local, 1 worker.<br>\nINFO: Build completed successfully, 1962 total actions</p>", "body_text": "Reverted to Java8 and Python27.  That eliminated all the cruft from the alternate configurations.  I also had to specify --config=monolithic (on windows), but it all compiled and linked. I'm compiling the OP now.  This is farther than I've gotten w/o errors, so it's looking promising.\nbazel build --config opt --config=monolithic //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni\nCreating library bazel-out/x64_windows-opt/bin/tensorflow/java/libtensorflow_jni.so.if.lib and object bazel-out/x64_windows-opt/bin/tensorflow/java/libtensorflow_jni.so.if.exp\nbatch_kernels.lo.lib(batch_kernels.obj) : warning LNK4217: locally defined symbol ?DEVICE_CPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_CPU) imported in function \"void __cdecl tensorflow::dynamic initializer for 'registrar__body__0__object''(void)\" (??__Eregistrar__body__0__object@tensorflow@@YAXXZ) arithmetic_optimizer.lib(arithmetic_optimizer.obj) : warning LNK4049: locally defined symbol ?DEVICE_CPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_CPU) imported arithmetic_optimizer.lib(arithmetic_optimizer.obj) : warning LNK4217: locally defined symbol ?DEVICE_GPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_GPU) imported in function \"private: bool __cdecl tensorflow::grappler::anonymous namespace'::ReorderCastAndTranspose::NodeIsOnCpuOrGpu(class tensorflow::NodeDef const *)const \" (?NodeIsOnCpuOrGpu@ReorderCastAndTranspose@?A0xa1632fa2@grappler@tensorflow@@AEBA_NPEBVNodeDef@4@@z)\nlayout_optimizer.lib(layout_optimizer.obj) : warning LNK4049: locally defined symbol ?DEVICE_GPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_GPU) imported\nINFO: Elapsed time: 2293.212s, Critical Path: 470.55s\nINFO: 1893 processes: 1892 local, 1 worker.\nINFO: Build completed successfully, 1962 total actions", "body": "Reverted to Java8 and Python27.  That eliminated all the cruft from the alternate configurations.  I also had to specify --config=monolithic (on windows), but it all compiled and linked. I'm compiling the OP now.  This is farther than I've gotten w/o errors, so it's looking promising. \r\n\r\n bazel build --config opt --config=monolithic //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni\r\n\r\n   Creating library bazel-out/x64_windows-opt/bin/tensorflow/java/libtensorflow_jni.so.if.lib and object bazel-out/x64_windows-opt/bin/tensorflow/java/libtensorflow_jni.so.if.exp\r\nbatch_kernels.lo.lib(batch_kernels.obj) : warning LNK4217: locally defined symbol ?DEVICE_CPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_CPU) imported in function \"void __cdecl tensorflow::`dynamic initializer for 'registrar__body__0__object''(void)\" (??__Eregistrar__body__0__object@tensorflow@@YAXXZ)\r\narithmetic_optimizer.lib(arithmetic_optimizer.obj) : warning LNK4049: locally defined symbol ?DEVICE_CPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_CPU) imported\r\narithmetic_optimizer.lib(arithmetic_optimizer.obj) : warning LNK4217: locally defined symbol ?DEVICE_GPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_GPU) imported in function \"private: bool __cdecl tensorflow::grappler::`anonymous namespace'::ReorderCastAndTranspose::NodeIsOnCpuOrGpu(class tensorflow::NodeDef const *)const \" (?NodeIsOnCpuOrGpu@ReorderCastAndTranspose@?A0xa1632fa2@grappler@tensorflow@@AEBA_NPEBVNodeDef@4@@Z)\r\nlayout_optimizer.lib(layout_optimizer.obj) : warning LNK4049: locally defined symbol ?DEVICE_GPU@tensorflow@@3QEBDEB (char const * const tensorflow::DEVICE_GPU) imported\r\nINFO: Elapsed time: 2293.212s, Critical Path: 470.55s\r\nINFO: 1893 processes: 1892 local, 1 worker.\r\nINFO: Build completed successfully, 1962 total actions\r\n"}
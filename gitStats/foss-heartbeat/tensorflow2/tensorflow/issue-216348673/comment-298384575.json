{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/298384575", "html_url": "https://github.com/tensorflow/tensorflow/issues/8652#issuecomment-298384575", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8652", "id": 298384575, "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODM4NDU3NQ==", "user": {"login": "sffc", "id": 1145762, "node_id": "MDQ6VXNlcjExNDU3NjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1145762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sffc", "html_url": "https://github.com/sffc", "followers_url": "https://api.github.com/users/sffc/followers", "following_url": "https://api.github.com/users/sffc/following{/other_user}", "gists_url": "https://api.github.com/users/sffc/gists{/gist_id}", "starred_url": "https://api.github.com/users/sffc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sffc/subscriptions", "organizations_url": "https://api.github.com/users/sffc/orgs", "repos_url": "https://api.github.com/users/sffc/repos", "events_url": "https://api.github.com/users/sffc/events{/privacy}", "received_events_url": "https://api.github.com/users/sffc/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-01T17:44:53Z", "updated_at": "2017-05-01T17:53:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p>This issue reproduces with the following code, which is based on <a href=\"https://github.com/fchollet/keras/blob/master/examples/imdb_lstm.py\">this example</a>:</p>\n<pre><code>import sys\n\nimport numpy as np\nimport tensorflow as tf\nimport tensorflow.contrib.keras as keras\n\ndef main(argv):\n\t# Get data into numpy arrays of size (?,num_unroll) where ? is the number of\n\t# data points and num_unroll is the number of time steps...\n\tx_train = ...\n\tx_test = ...\n\ty_train = ...\n\ty_test = ...\n\n\t# Build and run the model\n\tmodel = keras.models.Sequential()\n\tmodel.add(keras.layers.Embedding(MAX_FEATURES, 128))\n\tmodel.add(keras.layers.LSTM(128, dropout=0.2, recurrent_dropout=0.2))\n\tmodel.add(keras.layers.Dense(1, activation='sigmoid'))\n\tmodel.compile(loss='binary_crossentropy',\n\t              optimizer='adam',\n\t              metrics=['accuracy'])\n\tprint('Train...')\n\tmodel.fit(x_train, y_train,\n\t          batch_size=FLAGS.batch_size,\n\t          epochs=15,\n\t          validation_data=(x_test, y_test))\n\tscore, acc = model.evaluate(x_test, y_test,\n\t                            batch_size=FLAGS.batch_size)\n\tprint('Validation score:', score)\n\tprint('Validation accuracy:', acc)\n\nif __name__ == \"__main__\":\n\tmain(sys.argv)\n</code></pre>\n<p>I don't get the error when I <code>import keras</code> instead of <code>import tensorflow.contrib.keras as keras</code>.  I'm using tensorflow 1.1.0 in Python 3 from <code>pip3 install tensorflow</code>.  <strong>Note:</strong> I also don't get the error if I run my script with Python 2 instead of Python 3.  Maybe could be some sort of 2/3 compatibility issue?</p>", "body_text": "This issue reproduces with the following code, which is based on this example:\nimport sys\n\nimport numpy as np\nimport tensorflow as tf\nimport tensorflow.contrib.keras as keras\n\ndef main(argv):\n\t# Get data into numpy arrays of size (?,num_unroll) where ? is the number of\n\t# data points and num_unroll is the number of time steps...\n\tx_train = ...\n\tx_test = ...\n\ty_train = ...\n\ty_test = ...\n\n\t# Build and run the model\n\tmodel = keras.models.Sequential()\n\tmodel.add(keras.layers.Embedding(MAX_FEATURES, 128))\n\tmodel.add(keras.layers.LSTM(128, dropout=0.2, recurrent_dropout=0.2))\n\tmodel.add(keras.layers.Dense(1, activation='sigmoid'))\n\tmodel.compile(loss='binary_crossentropy',\n\t              optimizer='adam',\n\t              metrics=['accuracy'])\n\tprint('Train...')\n\tmodel.fit(x_train, y_train,\n\t          batch_size=FLAGS.batch_size,\n\t          epochs=15,\n\t          validation_data=(x_test, y_test))\n\tscore, acc = model.evaluate(x_test, y_test,\n\t                            batch_size=FLAGS.batch_size)\n\tprint('Validation score:', score)\n\tprint('Validation accuracy:', acc)\n\nif __name__ == \"__main__\":\n\tmain(sys.argv)\n\nI don't get the error when I import keras instead of import tensorflow.contrib.keras as keras.  I'm using tensorflow 1.1.0 in Python 3 from pip3 install tensorflow.  Note: I also don't get the error if I run my script with Python 2 instead of Python 3.  Maybe could be some sort of 2/3 compatibility issue?", "body": "This issue reproduces with the following code, which is based on [this example](https://github.com/fchollet/keras/blob/master/examples/imdb_lstm.py):\r\n\r\n```\r\nimport sys\r\n\r\nimport numpy as np\r\nimport tensorflow as tf\r\nimport tensorflow.contrib.keras as keras\r\n\r\ndef main(argv):\r\n\t# Get data into numpy arrays of size (?,num_unroll) where ? is the number of\r\n\t# data points and num_unroll is the number of time steps...\r\n\tx_train = ...\r\n\tx_test = ...\r\n\ty_train = ...\r\n\ty_test = ...\r\n\r\n\t# Build and run the model\r\n\tmodel = keras.models.Sequential()\r\n\tmodel.add(keras.layers.Embedding(MAX_FEATURES, 128))\r\n\tmodel.add(keras.layers.LSTM(128, dropout=0.2, recurrent_dropout=0.2))\r\n\tmodel.add(keras.layers.Dense(1, activation='sigmoid'))\r\n\tmodel.compile(loss='binary_crossentropy',\r\n\t              optimizer='adam',\r\n\t              metrics=['accuracy'])\r\n\tprint('Train...')\r\n\tmodel.fit(x_train, y_train,\r\n\t          batch_size=FLAGS.batch_size,\r\n\t          epochs=15,\r\n\t          validation_data=(x_test, y_test))\r\n\tscore, acc = model.evaluate(x_test, y_test,\r\n\t                            batch_size=FLAGS.batch_size)\r\n\tprint('Validation score:', score)\r\n\tprint('Validation accuracy:', acc)\r\n\r\nif __name__ == \"__main__\":\r\n\tmain(sys.argv)\r\n```\r\n\r\nI don't get the error when I `import keras` instead of `import tensorflow.contrib.keras as keras`.  I'm using tensorflow 1.1.0 in Python 3 from `pip3 install tensorflow`.  **Note:** I also don't get the error if I run my script with Python 2 instead of Python 3.  Maybe could be some sort of 2/3 compatibility issue?"}
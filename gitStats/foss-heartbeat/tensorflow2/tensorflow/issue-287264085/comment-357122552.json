{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/357122552", "html_url": "https://github.com/tensorflow/tensorflow/issues/15985#issuecomment-357122552", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15985", "id": 357122552, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzEyMjU1Mg==", "user": {"login": "selcouthlyBlue", "id": 13268675, "node_id": "MDQ6VXNlcjEzMjY4Njc1", "avatar_url": "https://avatars2.githubusercontent.com/u/13268675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/selcouthlyBlue", "html_url": "https://github.com/selcouthlyBlue", "followers_url": "https://api.github.com/users/selcouthlyBlue/followers", "following_url": "https://api.github.com/users/selcouthlyBlue/following{/other_user}", "gists_url": "https://api.github.com/users/selcouthlyBlue/gists{/gist_id}", "starred_url": "https://api.github.com/users/selcouthlyBlue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/selcouthlyBlue/subscriptions", "organizations_url": "https://api.github.com/users/selcouthlyBlue/orgs", "repos_url": "https://api.github.com/users/selcouthlyBlue/repos", "events_url": "https://api.github.com/users/selcouthlyBlue/events{/privacy}", "received_events_url": "https://api.github.com/users/selcouthlyBlue/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-12T02:09:26Z", "updated_at": "2018-01-12T02:09:26Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Turns out, the conversion from dense to sparse is successful with this code:</p>\n<pre><code>#labels is a dense tensor\nindices = tf.where(tf.not_equal(labels, 0))\nvalues = tf.gather_nd(labels, indices)\nshape = tf.shape(labels, out_type=tf.int64)\nsparse_labels = tf.SparseTensor(indices, values, dense_shape=shape)\n</code></pre>\n<p>Now the only concern here is the ValueError thrown by ctc_loss:</p>\n<p><code>ValueError: Shape must be rank 1 but is rank 0 for 'CTCLoss' (op: 'CTCLoss') with input shapes: [?,?,80], [?,2], [?], [].</code></p>", "body_text": "Turns out, the conversion from dense to sparse is successful with this code:\n#labels is a dense tensor\nindices = tf.where(tf.not_equal(labels, 0))\nvalues = tf.gather_nd(labels, indices)\nshape = tf.shape(labels, out_type=tf.int64)\nsparse_labels = tf.SparseTensor(indices, values, dense_shape=shape)\n\nNow the only concern here is the ValueError thrown by ctc_loss:\nValueError: Shape must be rank 1 but is rank 0 for 'CTCLoss' (op: 'CTCLoss') with input shapes: [?,?,80], [?,2], [?], [].", "body": "Turns out, the conversion from dense to sparse is successful with this code:\r\n\r\n```\r\n#labels is a dense tensor\r\nindices = tf.where(tf.not_equal(labels, 0))\r\nvalues = tf.gather_nd(labels, indices)\r\nshape = tf.shape(labels, out_type=tf.int64)\r\nsparse_labels = tf.SparseTensor(indices, values, dense_shape=shape)\r\n```\r\n\r\nNow the only concern here is the ValueError thrown by ctc_loss:\r\n\r\n`ValueError: Shape must be rank 1 but is rank 0 for 'CTCLoss' (op: 'CTCLoss') with input shapes: [?,?,80], [?,2], [?], [].`"}
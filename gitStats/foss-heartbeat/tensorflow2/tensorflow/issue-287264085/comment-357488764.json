{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/357488764", "html_url": "https://github.com/tensorflow/tensorflow/issues/15985#issuecomment-357488764", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15985", "id": 357488764, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzQ4ODc2NA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-14T04:54:10Z", "updated_at": "2018-01-14T04:54:10Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">Your code makes the assumption that 0 signifies the EOS token, right?  I\nsuppose that's arbitrary, and would make that a required argument of the\nfunction.  I'd put it in tf.contrib.layers as ctc_loss_dense_labels or\nsomething.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Sat, Jan 13, 2018 at 3:26 PM, Jerome ***@***.***&gt; wrote:\n I already got it working! Turns out, the sequence_length parameter I was\n passing is a scalar but it should be a 1-d vector according to the\n documentation\n &lt;<a href=\"https://www.tensorflow.org/versions/r0.12/api_docs/python/nn/connectionist_temporal_classification__ctc_#ctc_loss\">https://www.tensorflow.org/versions/r0.12/api_docs/python/nn/connectionist_temporal_classification__ctc_#ctc_loss</a>&gt;\n :\n\n sequence_length: 1-D int32 vector, size [batch_size]. The sequence lengths.\n\n The code for converting a dense tensor into a sparse one is as follows:\n\n def dense_to_sparse(dense_tensor, out_type):\n     indices = tf.where(tf.not_equal(dense_tensor, tf.constant(0, dense_tensor.dtype)\n     values = tf.gather_nd(dense_tensor, indices)\n     shape = tf.shape(dense_tensor, out_type=out_type)\n     return tf.SparseTensor(indices, values, shape)\n\n Now the questions is whether to have this op exist or just put it inside\n tf.nn.ctc_loss. Thoughts, anyone?\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"287264085\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/15985\" href=\"https://github.com/tensorflow/tensorflow/issues/15985#issuecomment-357475661\">#15985 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABtim6sVq2LHUGsRN2LjQf5iOrxmY6usks5tKTu7gaJpZM4RYleR\">https://github.com/notifications/unsubscribe-auth/ABtim6sVq2LHUGsRN2LjQf5iOrxmY6usks5tKTu7gaJpZM4RYleR</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "Your code makes the assumption that 0 signifies the EOS token, right?  I\nsuppose that's arbitrary, and would make that a required argument of the\nfunction.  I'd put it in tf.contrib.layers as ctc_loss_dense_labels or\nsomething.\n\u2026\nOn Sat, Jan 13, 2018 at 3:26 PM, Jerome ***@***.***> wrote:\n I already got it working! Turns out, the sequence_length parameter I was\n passing is a scalar but it should be a 1-d vector according to the\n documentation\n <https://www.tensorflow.org/versions/r0.12/api_docs/python/nn/connectionist_temporal_classification__ctc_#ctc_loss>\n :\n\n sequence_length: 1-D int32 vector, size [batch_size]. The sequence lengths.\n\n The code for converting a dense tensor into a sparse one is as follows:\n\n def dense_to_sparse(dense_tensor, out_type):\n     indices = tf.where(tf.not_equal(dense_tensor, tf.constant(0, dense_tensor.dtype)\n     values = tf.gather_nd(dense_tensor, indices)\n     shape = tf.shape(dense_tensor, out_type=out_type)\n     return tf.SparseTensor(indices, values, shape)\n\n Now the questions is whether to have this op exist or just put it inside\n tf.nn.ctc_loss. Thoughts, anyone?\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#15985 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABtim6sVq2LHUGsRN2LjQf5iOrxmY6usks5tKTu7gaJpZM4RYleR>\n .", "body": "Your code makes the assumption that 0 signifies the EOS token, right?  I\nsuppose that's arbitrary, and would make that a required argument of the\nfunction.  I'd put it in tf.contrib.layers as ctc_loss_dense_labels or\nsomething.\n\nOn Sat, Jan 13, 2018 at 3:26 PM, Jerome <notifications@github.com> wrote:\n\n> I already got it working! Turns out, the sequence_length parameter I was\n> passing is a scalar but it should be a 1-d vector according to the\n> documentation\n> <https://www.tensorflow.org/versions/r0.12/api_docs/python/nn/connectionist_temporal_classification__ctc_#ctc_loss>\n> :\n>\n> sequence_length: 1-D int32 vector, size [batch_size]. The sequence lengths.\n>\n> The code for converting a dense tensor into a sparse one is as follows:\n>\n> def dense_to_sparse(dense_tensor, out_type):\n>     indices = tf.where(tf.not_equal(dense_tensor, tf.constant(0, dense_tensor.dtype)\n>     values = tf.gather_nd(dense_tensor, indices)\n>     shape = tf.shape(dense_tensor, out_type=out_type)\n>     return tf.SparseTensor(indices, values, shape)\n>\n> Now the questions is whether to have this op exist or just put it inside\n> tf.nn.ctc_loss. Thoughts, anyone?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/15985#issuecomment-357475661>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim6sVq2LHUGsRN2LjQf5iOrxmY6usks5tKTu7gaJpZM4RYleR>\n> .\n>\n"}
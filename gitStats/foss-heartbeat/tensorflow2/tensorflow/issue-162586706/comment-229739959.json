{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/229739959", "html_url": "https://github.com/tensorflow/tensorflow/issues/3067#issuecomment-229739959", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3067", "id": 229739959, "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTczOTk1OQ==", "user": {"login": "ibab", "id": 890531, "node_id": "MDQ6VXNlcjg5MDUzMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/890531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibab", "html_url": "https://github.com/ibab", "followers_url": "https://api.github.com/users/ibab/followers", "following_url": "https://api.github.com/users/ibab/following{/other_user}", "gists_url": "https://api.github.com/users/ibab/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibab/subscriptions", "organizations_url": "https://api.github.com/users/ibab/orgs", "repos_url": "https://api.github.com/users/ibab/repos", "events_url": "https://api.github.com/users/ibab/events{/privacy}", "received_events_url": "https://api.github.com/users/ibab/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-30T18:02:19Z", "updated_at": "2016-06-30T18:02:19Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The main reason this is so confusing is that <code>tf.gather</code> currently doesn't check its indices when running as a GPU op: <a href=\"https://github.com/tensorflow/tensorflow/blob/c8b59c0/tensorflow/core/kernels/gather_op_gpu.cu.cc#L65\">https://github.com/tensorflow/tensorflow/blob/c8b59c0/tensorflow/core/kernels/gather_op_gpu.cu.cc#L65</a><br>\nIf you pass in <code>[-1]</code>, as in your case, it will return a tensor containing zeros.<br>\nIt then continues to run until the gradient gives you an error.</p>\n<p>I think once <code>tf.gather</code> checks its inputs when running on the GPU, this issue should be considered fixed.</p>", "body_text": "The main reason this is so confusing is that tf.gather currently doesn't check its indices when running as a GPU op: https://github.com/tensorflow/tensorflow/blob/c8b59c0/tensorflow/core/kernels/gather_op_gpu.cu.cc#L65\nIf you pass in [-1], as in your case, it will return a tensor containing zeros.\nIt then continues to run until the gradient gives you an error.\nI think once tf.gather checks its inputs when running on the GPU, this issue should be considered fixed.", "body": "The main reason this is so confusing is that `tf.gather` currently doesn't check its indices when running as a GPU op: https://github.com/tensorflow/tensorflow/blob/c8b59c0/tensorflow/core/kernels/gather_op_gpu.cu.cc#L65\nIf you pass in `[-1]`, as in your case, it will return a tensor containing zeros.\nIt then continues to run until the gradient gives you an error.\n\nI think once `tf.gather` checks its inputs when running on the GPU, this issue should be considered fixed.\n"}
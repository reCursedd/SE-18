{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7088", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7088/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7088/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7088/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7088", "id": 203338412, "node_id": "MDU6SXNzdWUyMDMzMzg0MTI=", "number": 7088, "title": "Running optimized graph with two output nodes on android gives \u201cSession was not created with a graph before Run()\u201d error.", "user": {"login": "bazinac", "id": 19685528, "node_id": "MDQ6VXNlcjE5Njg1NTI4", "avatar_url": "https://avatars0.githubusercontent.com/u/19685528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bazinac", "html_url": "https://github.com/bazinac", "followers_url": "https://api.github.com/users/bazinac/followers", "following_url": "https://api.github.com/users/bazinac/following{/other_user}", "gists_url": "https://api.github.com/users/bazinac/gists{/gist_id}", "starred_url": "https://api.github.com/users/bazinac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bazinac/subscriptions", "organizations_url": "https://api.github.com/users/bazinac/orgs", "repos_url": "https://api.github.com/users/bazinac/repos", "events_url": "https://api.github.com/users/bazinac/events{/privacy}", "received_events_url": "https://api.github.com/users/bazinac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2017-01-26T10:34:02Z", "updated_at": "2017-01-28T08:48:20Z", "closed_at": "2017-01-28T08:48:20Z", "author_association": "NONE", "body_html": "<p>Hi, please would you please be so kind and help me with one issue that prevents me from moving forward. I have graph with two output layers (final_result_orig \u2013 which is basically coming form retraining example,final_result_added \u2013 my custom layer) and I am unable to strip/optimize_on_inference it in order to run on android device (on pc it runs fine)</p>\n<p>When I run:</p>\n<p>bazel-bin/tensorflow/python/tools/optimize_for_inference <br>\n\u2013input=/tmp/output.pb <br>\n\u2013output=/tmp/optimized.pb <br>\n\u2013input_names=Mul <br>\n\u2013output_names=\u201dfinal_result_orig,final_result_added\u201d<br>\nThen in my android application, I get \u201cSession was not created with a graph before Run()\u201d error, and both final_result_orig and final_result_added are not found.</p>\n<p>When I run:</p>\n<p>bazel-bin/tensorflow/python/tools/optimize_for_inference <br>\n\u2013input=/tmp/output.pb <br>\n\u2013output=/tmp/optimized.pb <br>\n\u2013input_names=Mul <br>\n\u2013output_names=\u201dfinal_result_orig\u201d</p>\n<p>It works fine, final_result_orig is available and works correctly, however final_result_added is obviously not found and not available for my app to use.</p>\n<p>And when I run:</p>\n<p>bazel-bin/tensorflow/python/tools/optimize_for_inference <br>\n\u2013input=/tmp/output.pb <br>\n\u2013output=/tmp/optimized.pb <br>\n\u2013input_names=Mul <br>\n\u2013output_names=\u201dfinal_result_added\u201d<br>\nIt does not work as well with \u201cSession was not created with a graph before Run()\u201d error, and both final_result_orig and final_result_added are not found.</p>\n<p>I do not understand what I am doing wrong \u2013 what could be wrong with \u201cfinal_result_added\u201d, as it works fine on PC and not android? Thank you very much.</p>\n<h2>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h2>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"188853593\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5553\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/5553/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/5553\">#5553</a></p>\n<h2>Environment info</h2>\n<p>Ubuntu 16.04 + Android 6.0</p>", "body_text": "Hi, please would you please be so kind and help me with one issue that prevents me from moving forward. I have graph with two output layers (final_result_orig \u2013 which is basically coming form retraining example,final_result_added \u2013 my custom layer) and I am unable to strip/optimize_on_inference it in order to run on android device (on pc it runs fine)\nWhen I run:\nbazel-bin/tensorflow/python/tools/optimize_for_inference \n\u2013input=/tmp/output.pb \n\u2013output=/tmp/optimized.pb \n\u2013input_names=Mul \n\u2013output_names=\u201dfinal_result_orig,final_result_added\u201d\nThen in my android application, I get \u201cSession was not created with a graph before Run()\u201d error, and both final_result_orig and final_result_added are not found.\nWhen I run:\nbazel-bin/tensorflow/python/tools/optimize_for_inference \n\u2013input=/tmp/output.pb \n\u2013output=/tmp/optimized.pb \n\u2013input_names=Mul \n\u2013output_names=\u201dfinal_result_orig\u201d\nIt works fine, final_result_orig is available and works correctly, however final_result_added is obviously not found and not available for my app to use.\nAnd when I run:\nbazel-bin/tensorflow/python/tools/optimize_for_inference \n\u2013input=/tmp/output.pb \n\u2013output=/tmp/optimized.pb \n\u2013input_names=Mul \n\u2013output_names=\u201dfinal_result_added\u201d\nIt does not work as well with \u201cSession was not created with a graph before Run()\u201d error, and both final_result_orig and final_result_added are not found.\nI do not understand what I am doing wrong \u2013 what could be wrong with \u201cfinal_result_added\u201d, as it works fine on PC and not android? Thank you very much.\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n#5553\nEnvironment info\nUbuntu 16.04 + Android 6.0", "body": "Hi, please would you please be so kind and help me with one issue that prevents me from moving forward. I have graph with two output layers (final_result_orig \u2013 which is basically coming form retraining example,final_result_added \u2013 my custom layer) and I am unable to strip/optimize_on_inference it in order to run on android device (on pc it runs fine)\r\n\r\nWhen I run:\r\n\r\nbazel-bin/tensorflow/python/tools/optimize_for_inference \\\r\n\u2013input=/tmp/output.pb \\\r\n\u2013output=/tmp/optimized.pb \\\r\n\u2013input_names=Mul \\\r\n\u2013output_names=\u201dfinal_result_orig,final_result_added\u201d\r\nThen in my android application, I get \u201cSession was not created with a graph before Run()\u201d error, and both final_result_orig and final_result_added are not found.\r\n\r\nWhen I run:\r\n\r\nbazel-bin/tensorflow/python/tools/optimize_for_inference \\\r\n\u2013input=/tmp/output.pb \\\r\n\u2013output=/tmp/optimized.pb \\\r\n\u2013input_names=Mul \\\r\n\u2013output_names=\u201dfinal_result_orig\u201d\r\n\r\nIt works fine, final_result_orig is available and works correctly, however final_result_added is obviously not found and not available for my app to use.\r\n\r\nAnd when I run:\r\n\r\nbazel-bin/tensorflow/python/tools/optimize_for_inference \\\r\n\u2013input=/tmp/output.pb \\\r\n\u2013output=/tmp/optimized.pb \\\r\n\u2013input_names=Mul \\\r\n\u2013output_names=\u201dfinal_result_added\u201d\r\nIt does not work as well with \u201cSession was not created with a graph before Run()\u201d error, and both final_result_orig and final_result_added are not found.\r\n\r\nI do not understand what I am doing wrong \u2013 what could be wrong with \u201cfinal_result_added\u201d, as it works fine on PC and not android? Thank you very much.\r\n\r\n## What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nhttps://github.com/tensorflow/tensorflow/issues/5553\r\n\r\n\r\n## Environment info\r\n\r\nUbuntu 16.04 + Android 6.0\r\n\r\n"}
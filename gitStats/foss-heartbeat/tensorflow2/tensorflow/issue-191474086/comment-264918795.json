{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/264918795", "html_url": "https://github.com/tensorflow/tensorflow/issues/5827#issuecomment-264918795", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5827", "id": 264918795, "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDkxODc5NQ==", "user": {"login": "joel-shor", "id": 6020988, "node_id": "MDQ6VXNlcjYwMjA5ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/6020988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joel-shor", "html_url": "https://github.com/joel-shor", "followers_url": "https://api.github.com/users/joel-shor/followers", "following_url": "https://api.github.com/users/joel-shor/following{/other_user}", "gists_url": "https://api.github.com/users/joel-shor/gists{/gist_id}", "starred_url": "https://api.github.com/users/joel-shor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joel-shor/subscriptions", "organizations_url": "https://api.github.com/users/joel-shor/orgs", "repos_url": "https://api.github.com/users/joel-shor/repos", "events_url": "https://api.github.com/users/joel-shor/events{/privacy}", "received_events_url": "https://api.github.com/users/joel-shor/received_events", "type": "User", "site_admin": false}, "created_at": "2016-12-05T17:29:08Z", "updated_at": "2016-12-05T17:29:08Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Either I'm not understanding your objection, or you've missed my point: if you accept that ExponentialMovingAverage.apply creates variables, and you believe that variables should respect variable scopes, then your example <em>should</em> throw an error.</p>\n<p>The reason EMAs haven't been broken in this case prior to this because they used the legacy <code>slot</code> system, which ignores variable scopes (incorrectly). We might be moving away from this, or incorporating variable scopes into slots (which would also break the code above).</p>\n<p>Does that clarify my comment?</p>", "body_text": "Either I'm not understanding your objection, or you've missed my point: if you accept that ExponentialMovingAverage.apply creates variables, and you believe that variables should respect variable scopes, then your example should throw an error.\nThe reason EMAs haven't been broken in this case prior to this because they used the legacy slot system, which ignores variable scopes (incorrectly). We might be moving away from this, or incorporating variable scopes into slots (which would also break the code above).\nDoes that clarify my comment?", "body": "Either I'm not understanding your objection, or you've missed my point: if you accept that ExponentialMovingAverage.apply creates variables, and you believe that variables should respect variable scopes, then your example *should* throw an error.\r\n\r\nThe reason EMAs haven't been broken in this case prior to this because they used the legacy `slot` system, which ignores variable scopes (incorrectly). We might be moving away from this, or incorporating variable scopes into slots (which would also break the code above).\r\n\r\nDoes that clarify my comment?"}
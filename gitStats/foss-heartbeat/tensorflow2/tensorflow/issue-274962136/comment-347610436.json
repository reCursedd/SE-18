{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/347610436", "html_url": "https://github.com/tensorflow/tensorflow/issues/14661#issuecomment-347610436", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14661", "id": 347610436, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzYxMDQzNg==", "user": {"login": "mohamedadaly", "id": 3480703, "node_id": "MDQ6VXNlcjM0ODA3MDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3480703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mohamedadaly", "html_url": "https://github.com/mohamedadaly", "followers_url": "https://api.github.com/users/mohamedadaly/followers", "following_url": "https://api.github.com/users/mohamedadaly/following{/other_user}", "gists_url": "https://api.github.com/users/mohamedadaly/gists{/gist_id}", "starred_url": "https://api.github.com/users/mohamedadaly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mohamedadaly/subscriptions", "organizations_url": "https://api.github.com/users/mohamedadaly/orgs", "repos_url": "https://api.github.com/users/mohamedadaly/repos", "events_url": "https://api.github.com/users/mohamedadaly/events{/privacy}", "received_events_url": "https://api.github.com/users/mohamedadaly/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-28T18:02:44Z", "updated_at": "2017-11-28T18:02:44Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Here is the command I use to convert from .pb to .tflite</p>\n<div class=\"highlight highlight-source-shell\"><pre>bazel run --config=opt tensorflow/contrib/lite/toco:toco -- \\\n  --input_file=/path/to/tiny-yolo-voc.pb \\\n  --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \\\n  --output_file=/path/to/tiny-yolo-voc.lite --inference_type=FLOAT \\\n  --input_type=FLOAT --input_arrays=input \\\n  --output_arrays=output --input_shapes=1,416,416,3</pre></div>\n<p>and here is the <a href=\"https://www.dropbox.com/s/hwqam5eo167tcsx/tiny-yolo-voc.pb?dl=0\" rel=\"nofollow\">model file</a> and here is the output I get:</p>\n<div class=\"highlight highlight-source-shell\"><pre>INFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).\nINFO: Found 1 target...\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:\n  bazel-bin/tensorflow/contrib/lite/toco/toco\nINFO: Elapsed time: 0.571s, Critical Path: 0.01s\nINFO: Build completed successfully, 1 total action\n\nINFO: Running <span class=\"pl-c1\">command</span> line: bazel-bin/tensorflow/contrib/lite/toco/toco <span class=\"pl-s\"><span class=\"pl-pds\">'</span>--input_file=/path/to/tiny-yolo-voc.pb<span class=\"pl-pds\">'</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>--input_format=TENSORFLOW_GRAPHDEF<span class=\"pl-pds\">'</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>--output_format=TFLITE<span class=\"pl-pds\">'</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>--output_file=/path/to/tiny-yolo-voc.lite<span class=\"pl-pds\">'</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>--inference_type=FLOAT<span class=\"pl-pds\">'</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>--input_type=FLOAT<span class=\"pl-pds\">'</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>--input_arrays=input<span class=\"pl-pds\">'</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>--output_arrays=output<span class=\"pl-pds\">'</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>--input_shapes=1,416,416,3<span class=\"pl-pds\">'</span></span>\n2017-11-28 09:58:11.208146: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 74 operators, 125 arrays (0 quantized)\n2017-11-28 09:58:11.553490: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 31 operators, 58 arrays (0 quantized)\n2017-11-28 09:58:11.553743: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 31 operators, 58 arrays (0 quantized)\n2017-11-28 09:58:11.553908: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:312] Total transient array allocated size: 33226752 bytes, theoretical optimal value: 33226752 bytes.\n2017-11-28 09:58:11.554142: I tensorflow/contrib/lite/toco/toco_tooling.cc:255] Estimated count of arithmetic ops: 6.98837 billion (note that a multiply-add is counted as 2 ops).\n2017-11-28 09:58:11.554394: F tensorflow/contrib/lite/toco/tflite/export.cc:192] Unsupported operator: TensorFlowMaximum</pre></div>", "body_text": "Here is the command I use to convert from .pb to .tflite\nbazel run --config=opt tensorflow/contrib/lite/toco:toco -- \\\n  --input_file=/path/to/tiny-yolo-voc.pb \\\n  --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \\\n  --output_file=/path/to/tiny-yolo-voc.lite --inference_type=FLOAT \\\n  --input_type=FLOAT --input_arrays=input \\\n  --output_arrays=output --input_shapes=1,416,416,3\nand here is the model file and here is the output I get:\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).\nINFO: Found 1 target...\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:\n  bazel-bin/tensorflow/contrib/lite/toco/toco\nINFO: Elapsed time: 0.571s, Critical Path: 0.01s\nINFO: Build completed successfully, 1 total action\n\nINFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/path/to/tiny-yolo-voc.pb' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--output_file=/path/to/tiny-yolo-voc.lite' '--inference_type=FLOAT' '--input_type=FLOAT' '--input_arrays=input' '--output_arrays=output' '--input_shapes=1,416,416,3'\n2017-11-28 09:58:11.208146: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 74 operators, 125 arrays (0 quantized)\n2017-11-28 09:58:11.553490: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 31 operators, 58 arrays (0 quantized)\n2017-11-28 09:58:11.553743: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 31 operators, 58 arrays (0 quantized)\n2017-11-28 09:58:11.553908: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:312] Total transient array allocated size: 33226752 bytes, theoretical optimal value: 33226752 bytes.\n2017-11-28 09:58:11.554142: I tensorflow/contrib/lite/toco/toco_tooling.cc:255] Estimated count of arithmetic ops: 6.98837 billion (note that a multiply-add is counted as 2 ops).\n2017-11-28 09:58:11.554394: F tensorflow/contrib/lite/toco/tflite/export.cc:192] Unsupported operator: TensorFlowMaximum", "body": "Here is the command I use to convert from .pb to .tflite\r\n\r\n```bash\r\nbazel run --config=opt tensorflow/contrib/lite/toco:toco -- \\\r\n  --input_file=/path/to/tiny-yolo-voc.pb \\\r\n  --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \\\r\n  --output_file=/path/to/tiny-yolo-voc.lite --inference_type=FLOAT \\\r\n  --input_type=FLOAT --input_arrays=input \\\r\n  --output_arrays=output --input_shapes=1,416,416,3\r\n```\r\n\r\nand here is the [model file](https://www.dropbox.com/s/hwqam5eo167tcsx/tiny-yolo-voc.pb?dl=0) and here is the output I get:\r\n\r\n```bash\r\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).\r\nINFO: Found 1 target...\r\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:\r\n  bazel-bin/tensorflow/contrib/lite/toco/toco\r\nINFO: Elapsed time: 0.571s, Critical Path: 0.01s\r\nINFO: Build completed successfully, 1 total action\r\n\r\nINFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/path/to/tiny-yolo-voc.pb' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--output_file=/path/to/tiny-yolo-voc.lite' '--inference_type=FLOAT' '--input_type=FLOAT' '--input_arrays=input' '--output_arrays=output' '--input_shapes=1,416,416,3'\r\n2017-11-28 09:58:11.208146: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 74 operators, 125 arrays (0 quantized)\r\n2017-11-28 09:58:11.553490: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 31 operators, 58 arrays (0 quantized)\r\n2017-11-28 09:58:11.553743: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 31 operators, 58 arrays (0 quantized)\r\n2017-11-28 09:58:11.553908: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:312] Total transient array allocated size: 33226752 bytes, theoretical optimal value: 33226752 bytes.\r\n2017-11-28 09:58:11.554142: I tensorflow/contrib/lite/toco/toco_tooling.cc:255] Estimated count of arithmetic ops: 6.98837 billion (note that a multiply-add is counted as 2 ops).\r\n2017-11-28 09:58:11.554394: F tensorflow/contrib/lite/toco/tflite/export.cc:192] Unsupported operator: TensorFlowMaximum\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/276115813", "html_url": "https://github.com/tensorflow/tensorflow/issues/5609#issuecomment-276115813", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5609", "id": 276115813, "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjExNTgxMw==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-30T16:46:13Z", "updated_at": "2017-01-30T16:46:13Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">It does seem that way.  When you say you pass in a list, are you saying you\nare literally passing in a python list of length 605742, each entry\ncontaining a tensor?\n\nIf so, then what you want to be doing is passing in a list with a single\ntensor whose leftmost dimension is 605742.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Mon, Jan 30, 2017 at 6:40 AM, KaosEngineer ***@***.***&gt; wrote:\n I have the same issue as sonalgupta . I pass in a list of roughly 605742\n sequence lengths, and I have 24 buckets, and it errors out with:\n\n File \"./step_train_rnnlm.py\", line 66, in &lt;module&gt; main() File\n \"./step_train_rnnlm.py\", line 61, in main n_epochs=10) File\n \"/home/malinin/dnn_lib/rnnlm.py\", line 138, in fit data =\n self._construct_bucket_queue(trn_data_list, batch_size, capacity=20000,\n num_threads=8) File \"/home/malinin/dnn_lib/base_model.py\", line 226, in\n _construct_bucket_queue name=None) File \"/usr/local/lib/python2.7/\n dist-packages/tensorflow/contrib/training/python/training/bucket_ops.py\",\n line 347, in bucket_by_sequence_length math_ops.less_equal(buckets_min,\n input_length), File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\",\n line 1189, in less_equal result = _op_def_lib.apply_op(\"LessEqual\", x=x,\n y=y, name=name) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/\n python/framework/op_def_library.py\", line 749, in apply_op op_def=op_def)\n File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\",\n line 2382, in create_op set_shapes_for_outputs(ret) File\n \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\",\n line 1783, in set_shapes_for_outputs shapes = shape_func(op) File\n \"/usr/local/lib/python2.7/dist-packages/tensorflow/\n python/framework/common_shapes.py\", line 596, in call_cpp_shape_fn raise\n ValueError(err.message) ValueError: Dimensions must be equal, but are 25\n and 605742\n\n I have a feeling something is not being broadcast correctly, but can't put\n my finger on it.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"189281953\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5609\" href=\"https://github.com/tensorflow/tensorflow/issues/5609#issuecomment-276078661\">#5609 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABtim-De_Ce5VESTPZPfofZpx2B3Nifsks5rXfZngaJpZM4KyDNA\">https://github.com/notifications/unsubscribe-auth/ABtim-De_Ce5VESTPZPfofZpx2B3Nifsks5rXfZngaJpZM4KyDNA</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "It does seem that way.  When you say you pass in a list, are you saying you\nare literally passing in a python list of length 605742, each entry\ncontaining a tensor?\n\nIf so, then what you want to be doing is passing in a list with a single\ntensor whose leftmost dimension is 605742.\n\u2026\nOn Mon, Jan 30, 2017 at 6:40 AM, KaosEngineer ***@***.***> wrote:\n I have the same issue as sonalgupta . I pass in a list of roughly 605742\n sequence lengths, and I have 24 buckets, and it errors out with:\n\n File \"./step_train_rnnlm.py\", line 66, in <module> main() File\n \"./step_train_rnnlm.py\", line 61, in main n_epochs=10) File\n \"/home/malinin/dnn_lib/rnnlm.py\", line 138, in fit data =\n self._construct_bucket_queue(trn_data_list, batch_size, capacity=20000,\n num_threads=8) File \"/home/malinin/dnn_lib/base_model.py\", line 226, in\n _construct_bucket_queue name=None) File \"/usr/local/lib/python2.7/\n dist-packages/tensorflow/contrib/training/python/training/bucket_ops.py\",\n line 347, in bucket_by_sequence_length math_ops.less_equal(buckets_min,\n input_length), File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\",\n line 1189, in less_equal result = _op_def_lib.apply_op(\"LessEqual\", x=x,\n y=y, name=name) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/\n python/framework/op_def_library.py\", line 749, in apply_op op_def=op_def)\n File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\",\n line 2382, in create_op set_shapes_for_outputs(ret) File\n \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\",\n line 1783, in set_shapes_for_outputs shapes = shape_func(op) File\n \"/usr/local/lib/python2.7/dist-packages/tensorflow/\n python/framework/common_shapes.py\", line 596, in call_cpp_shape_fn raise\n ValueError(err.message) ValueError: Dimensions must be equal, but are 25\n and 605742\n\n I have a feeling something is not being broadcast correctly, but can't put\n my finger on it.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#5609 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABtim-De_Ce5VESTPZPfofZpx2B3Nifsks5rXfZngaJpZM4KyDNA>\n .", "body": "It does seem that way.  When you say you pass in a list, are you saying you\nare literally passing in a python list of length 605742, each entry\ncontaining a tensor?\n\nIf so, then what you want to be doing is passing in a list with a single\ntensor whose leftmost dimension is 605742.\n\nOn Mon, Jan 30, 2017 at 6:40 AM, KaosEngineer <notifications@github.com>\nwrote:\n\n> I have the same issue as sonalgupta . I pass in a list of roughly 605742\n> sequence lengths, and I have 24 buckets, and it errors out with:\n>\n> File \"./step_train_rnnlm.py\", line 66, in <module> main() File\n> \"./step_train_rnnlm.py\", line 61, in main n_epochs=10) File\n> \"/home/malinin/dnn_lib/rnnlm.py\", line 138, in fit data =\n> self._construct_bucket_queue(trn_data_list, batch_size, capacity=20000,\n> num_threads=8) File \"/home/malinin/dnn_lib/base_model.py\", line 226, in\n> _construct_bucket_queue name=None) File \"/usr/local/lib/python2.7/\n> dist-packages/tensorflow/contrib/training/python/training/bucket_ops.py\",\n> line 347, in bucket_by_sequence_length math_ops.less_equal(buckets_min,\n> input_length), File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\",\n> line 1189, in less_equal result = _op_def_lib.apply_op(\"LessEqual\", x=x,\n> y=y, name=name) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/\n> python/framework/op_def_library.py\", line 749, in apply_op op_def=op_def)\n> File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\",\n> line 2382, in create_op set_shapes_for_outputs(ret) File\n> \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\",\n> line 1783, in set_shapes_for_outputs shapes = shape_func(op) File\n> \"/usr/local/lib/python2.7/dist-packages/tensorflow/\n> python/framework/common_shapes.py\", line 596, in call_cpp_shape_fn raise\n> ValueError(err.message) ValueError: Dimensions must be equal, but are 25\n> and 605742\n>\n> I have a feeling something is not being broadcast correctly, but can't put\n> my finger on it.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/5609#issuecomment-276078661>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim-De_Ce5VESTPZPfofZpx2B3Nifsks5rXfZngaJpZM4KyDNA>\n> .\n>\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/276078661", "html_url": "https://github.com/tensorflow/tensorflow/issues/5609#issuecomment-276078661", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5609", "id": 276078661, "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjA3ODY2MQ==", "user": {"login": "KaosEngineer", "id": 16974754, "node_id": "MDQ6VXNlcjE2OTc0NzU0", "avatar_url": "https://avatars0.githubusercontent.com/u/16974754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaosEngineer", "html_url": "https://github.com/KaosEngineer", "followers_url": "https://api.github.com/users/KaosEngineer/followers", "following_url": "https://api.github.com/users/KaosEngineer/following{/other_user}", "gists_url": "https://api.github.com/users/KaosEngineer/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaosEngineer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaosEngineer/subscriptions", "organizations_url": "https://api.github.com/users/KaosEngineer/orgs", "repos_url": "https://api.github.com/users/KaosEngineer/repos", "events_url": "https://api.github.com/users/KaosEngineer/events{/privacy}", "received_events_url": "https://api.github.com/users/KaosEngineer/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-30T14:39:57Z", "updated_at": "2017-01-30T14:39:57Z", "author_association": "NONE", "body_html": "<p>I have the same issue as  sonalgupta  . I pass in a list of roughly 605742 sequence lengths, and I have 24 buckets, and it errors out with:</p>\n<p><code>  File \"./step_train_rnnlm.py\", line 66, in &lt;module&gt; main() File \"./step_train_rnnlm.py\", line 61, in main n_epochs=10) File \"/home/malinin/dnn_lib/rnnlm.py\", line 138, in fit data = self._construct_bucket_queue(trn_data_list, batch_size, capacity=20000, num_threads=8) File \"/home/malinin/dnn_lib/base_model.py\", line 226, in _construct_bucket_queue name=None) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/training/python/training/bucket_ops.py\", line 347, in bucket_by_sequence_length math_ops.less_equal(buckets_min, input_length), File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 1189, in less_equal result = _op_def_lib.apply_op(\"LessEqual\", x=x, y=y, name=name) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 749, in apply_op op_def=op_def) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2382, in create_op set_shapes_for_outputs(ret) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1783, in set_shapes_for_outputs shapes = shape_func(op) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/common_shapes.py\", line 596, in call_cpp_shape_fn raise ValueError(err.message) ValueError: Dimensions must be equal, but are 25 and 605742</code></p>\n<p>I have a feeling something is not being broadcast correctly, but can't put my finger on it.</p>", "body_text": "I have the same issue as  sonalgupta  . I pass in a list of roughly 605742 sequence lengths, and I have 24 buckets, and it errors out with:\n  File \"./step_train_rnnlm.py\", line 66, in <module> main() File \"./step_train_rnnlm.py\", line 61, in main n_epochs=10) File \"/home/malinin/dnn_lib/rnnlm.py\", line 138, in fit data = self._construct_bucket_queue(trn_data_list, batch_size, capacity=20000, num_threads=8) File \"/home/malinin/dnn_lib/base_model.py\", line 226, in _construct_bucket_queue name=None) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/training/python/training/bucket_ops.py\", line 347, in bucket_by_sequence_length math_ops.less_equal(buckets_min, input_length), File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 1189, in less_equal result = _op_def_lib.apply_op(\"LessEqual\", x=x, y=y, name=name) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 749, in apply_op op_def=op_def) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2382, in create_op set_shapes_for_outputs(ret) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1783, in set_shapes_for_outputs shapes = shape_func(op) File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/common_shapes.py\", line 596, in call_cpp_shape_fn raise ValueError(err.message) ValueError: Dimensions must be equal, but are 25 and 605742\nI have a feeling something is not being broadcast correctly, but can't put my finger on it.", "body": "I have the same issue as  sonalgupta  . I pass in a list of roughly 605742 sequence lengths, and I have 24 buckets, and it errors out with:\r\n\r\n\r\n`  File \"./step_train_rnnlm.py\", line 66, in <module>\r\n    main()\r\n  File \"./step_train_rnnlm.py\", line 61, in main\r\n    n_epochs=10)\r\n  File \"/home/malinin/dnn_lib/rnnlm.py\", line 138, in fit\r\n    data = self._construct_bucket_queue(trn_data_list, batch_size, capacity=20000, num_threads=8)\r\n  File \"/home/malinin/dnn_lib/base_model.py\", line 226, in _construct_bucket_queue\r\n    name=None)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/training/python/training/bucket_ops.py\", line 347, in bucket_by_sequence_length\r\n    math_ops.less_equal(buckets_min, input_length),\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 1189, in less_equal\r\n    result = _op_def_lib.apply_op(\"LessEqual\", x=x, y=y, name=name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 749, in apply_op\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2382, in create_op\r\n    set_shapes_for_outputs(ret)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1783, in set_shapes_for_outputs\r\n    shapes = shape_func(op)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/common_shapes.py\", line 596, in call_cpp_shape_fn\r\n    raise ValueError(err.message)\r\nValueError: Dimensions must be equal, but are 25 and 605742`\r\n\r\n\r\nI have a feeling something is not being broadcast correctly, but can't put my finger on it.\r\n"}
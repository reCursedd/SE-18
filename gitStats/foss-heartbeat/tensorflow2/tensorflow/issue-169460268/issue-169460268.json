{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3648", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3648/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3648/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3648/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3648", "id": 169460268, "node_id": "MDU6SXNzdWUxNjk0NjAyNjg=", "number": 3648, "title": "SKFlow - RNN - Tuple does not have dtype", "user": {"login": "drcrook1", "id": 6099287, "node_id": "MDQ6VXNlcjYwOTkyODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/6099287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drcrook1", "html_url": "https://github.com/drcrook1", "followers_url": "https://api.github.com/users/drcrook1/followers", "following_url": "https://api.github.com/users/drcrook1/following{/other_user}", "gists_url": "https://api.github.com/users/drcrook1/gists{/gist_id}", "starred_url": "https://api.github.com/users/drcrook1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drcrook1/subscriptions", "organizations_url": "https://api.github.com/users/drcrook1/orgs", "repos_url": "https://api.github.com/users/drcrook1/repos", "events_url": "https://api.github.com/users/drcrook1/events{/privacy}", "received_events_url": "https://api.github.com/users/drcrook1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-08-04T19:58:49Z", "updated_at": "2016-08-05T13:55:46Z", "closed_at": "2016-08-05T13:55:46Z", "author_association": "NONE", "body_html": "<p>GitHub issues are for bugs / installation problems / feature requests.<br>\nFor general support from the community, see <a href=\"https://stackoverflow.com/questions/tagged/tensorflow\" rel=\"nofollow\">StackOverflow</a>.<br>\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed<br>\nout of scope for GitHub Issues and point people to StackOverflow.</p>\n<p>For bugs or installation issues, please provide the following information.<br>\nThe more information you provide, the more easily we will be able to offer<br>\nhelp and advice.</p>\n<h3>Environment info</h3>\n<p>Operating System: gcr docker image running in Ubuntu 16.04</p>\n<h3>Steps to reproduce</h3>\n<p>Contact me via private message or twitter (@Data4Bots) and I can give you access to my Python Notebook to replicate full issue and let you see the entire thing.</p>\n<h3>What have you tried?</h3>\n<ol>\n<li>Not really sure where to begin with this one, it seems pretty odd on the surface to me.  I'll be digging in and taking suggestions.</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment).</p>\n<p>$$$$$$$$$<br>\n$ Output $<br>\n$$$$$$$$$<br>\nAttributeErrorTraceback (most recent call last)<br>\n in ()<br>\n22                         continue_training=True)<br>\n23<br>\n---&gt; 24 classifier.fit(zip(_train)[0], zip(_test)[1])</p>\n<p>/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/base.pyc in fit(self, X, y, monitor, logdir)<br>\n216         self._data_feeder = setup_train_data_feeder(X, y,<br>\n217                                                     self.n_classes,<br>\n--&gt; 218                                                     self.batch_size)<br>\n219<br>\n220         if monitor is None:</p>\n<p>/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in setup_train_data_feeder(X, y, n_classes, batch_size)<br>\n97                              \"streaming learning to work.\")<br>\n98         data_feeder_cls = StreamingDataFeeder<br>\n---&gt; 99     return data_feeder_cls(X, y, n_classes, batch_size)<br>\n100<br>\n101</p>\n<p>/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in <strong>init</strong>(self, X, y, n_classes, batch_size, random_state)<br>\n187<br>\n188     def <strong>init</strong>(self, X, y, n_classes, batch_size, random_state=None):<br>\n--&gt; 189         x_dtype = np.int64 if X.dtype == np.int64 else np.float32<br>\n190         y_dtype = np.int64 if n_classes &gt; 1 else np.float32<br>\n191         self.X = check_array(X, dtype=x_dtype)</p>\n<p>AttributeError: 'tuple' object has no attribute 'dtype'</p>\n<p>$$$$$$$$$$$$$$$<br>\n$ Data Snapshot $<br>\n$$$$$$$$$$$$$$$<br>\nLabeled</p>\n<p>[array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 1]<br>\n[array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 3]<br>\n[array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 3]<br>\n[array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 2]</p>\n<p>Split using zip(_data)[0] to grab the list of arrays and zip(_data)[1] to grab the labels</p>\n<p>$$$$$$$$$$$$<br>\n$ Some Code $<br>\n$$$$$$$$$$$$$<br>\nindices = np.random.permutation(data)<br>\nvalid_cnt = int(len(data) * 0.25)</p>\n<p>test, train = indices[:valid_cnt], indices[valid_cnt:]</p>\n<p>def listify(x):<br>\nreturn [x]</p>\n<p>num_classes = 3</p>\n<h1>Hyper Params</h1>\n<p>state_size = 3<br>\nnum_layers = 4<br>\nsteps = 100<br>\nlearningRate = 0.01</p>\n<h1>One line model</h1>\n<p>classifier = skflow.TensorFlowRNNClassifier(<br>\nrnn_size=state_size,<br>\nn_classes = num_classes,<br>\ncell_type='rnn',<br>\ninput_op_fn = listify,<br>\nnum_layers = num_layers,<br>\nsteps = steps,<br>\noptimizer = 'Adam',<br>\nlearning_rate = learningRate,<br>\ncontinue_training=True)</p>\n<p>classifier.fit(zip(_train)[0], zip(_test)[1])</p>\n<p>$$$$$$$$$$$$<br>\n$ Final Notes $<br>\n$$$$$$$$$$$$<br>\nI'm just learning this thing, so bear with it.  Let me know what I can do to help.  Again, get hold of me and I'll open up the Jupyter notebook to you.</p>", "body_text": "GitHub issues are for bugs / installation problems / feature requests.\nFor general support from the community, see StackOverflow.\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\nout of scope for GitHub Issues and point people to StackOverflow.\nFor bugs or installation issues, please provide the following information.\nThe more information you provide, the more easily we will be able to offer\nhelp and advice.\nEnvironment info\nOperating System: gcr docker image running in Ubuntu 16.04\nSteps to reproduce\nContact me via private message or twitter (@Data4Bots) and I can give you access to my Python Notebook to replicate full issue and let you see the entire thing.\nWhat have you tried?\n\nNot really sure where to begin with this one, it seems pretty odd on the surface to me.  I'll be digging in and taking suggestions.\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment).\n$$$$$$$$$\n$ Output $\n$$$$$$$$$\nAttributeErrorTraceback (most recent call last)\n in ()\n22                         continue_training=True)\n23\n---> 24 classifier.fit(zip(_train)[0], zip(_test)[1])\n/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/base.pyc in fit(self, X, y, monitor, logdir)\n216         self._data_feeder = setup_train_data_feeder(X, y,\n217                                                     self.n_classes,\n--> 218                                                     self.batch_size)\n219\n220         if monitor is None:\n/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in setup_train_data_feeder(X, y, n_classes, batch_size)\n97                              \"streaming learning to work.\")\n98         data_feeder_cls = StreamingDataFeeder\n---> 99     return data_feeder_cls(X, y, n_classes, batch_size)\n100\n101\n/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in init(self, X, y, n_classes, batch_size, random_state)\n187\n188     def init(self, X, y, n_classes, batch_size, random_state=None):\n--> 189         x_dtype = np.int64 if X.dtype == np.int64 else np.float32\n190         y_dtype = np.int64 if n_classes > 1 else np.float32\n191         self.X = check_array(X, dtype=x_dtype)\nAttributeError: 'tuple' object has no attribute 'dtype'\n$$$$$$$$$$$$$$$\n$ Data Snapshot $\n$$$$$$$$$$$$$$$\nLabeled\n[array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 1]\n[array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 3]\n[array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 3]\n[array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 2]\nSplit using zip(_data)[0] to grab the list of arrays and zip(_data)[1] to grab the labels\n$$$$$$$$$$$$\n$ Some Code $\n$$$$$$$$$$$$$\nindices = np.random.permutation(data)\nvalid_cnt = int(len(data) * 0.25)\ntest, train = indices[:valid_cnt], indices[valid_cnt:]\ndef listify(x):\nreturn [x]\nnum_classes = 3\nHyper Params\nstate_size = 3\nnum_layers = 4\nsteps = 100\nlearningRate = 0.01\nOne line model\nclassifier = skflow.TensorFlowRNNClassifier(\nrnn_size=state_size,\nn_classes = num_classes,\ncell_type='rnn',\ninput_op_fn = listify,\nnum_layers = num_layers,\nsteps = steps,\noptimizer = 'Adam',\nlearning_rate = learningRate,\ncontinue_training=True)\nclassifier.fit(zip(_train)[0], zip(_test)[1])\n$$$$$$$$$$$$\n$ Final Notes $\n$$$$$$$$$$$$\nI'm just learning this thing, so bear with it.  Let me know what I can do to help.  Again, get hold of me and I'll open up the Jupyter notebook to you.", "body": "GitHub issues are for bugs / installation problems / feature requests.  \nFor general support from the community, see [StackOverflow](https://stackoverflow.com/questions/tagged/tensorflow).\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\nout of scope for GitHub Issues and point people to StackOverflow.\n\nFor bugs or installation issues, please provide the following information.\nThe more information you provide, the more easily we will be able to offer\nhelp and advice.\n### Environment info\n\nOperating System: gcr docker image running in Ubuntu 16.04\n### Steps to reproduce\n\nContact me via private message or twitter (@Data4Bots) and I can give you access to my Python Notebook to replicate full issue and let you see the entire thing.\n### What have you tried?\n1.  Not really sure where to begin with this one, it seems pretty odd on the surface to me.  I'll be digging in and taking suggestions.\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n\n$$$$$$$$$\n$ Output $\n$$$$$$$$$\nAttributeErrorTraceback (most recent call last)\n<ipython-input-9-ad53b65c4640> in <module>()\n     22                         continue_training=True)\n     23 \n---> 24 classifier.fit(zip(_train)[0], zip(_test)[1])\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/base.pyc in fit(self, X, y, monitor, logdir)\n    216         self._data_feeder = setup_train_data_feeder(X, y,\n    217                                                     self.n_classes,\n--> 218                                                     self.batch_size)\n    219 \n    220         if monitor is None:\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in setup_train_data_feeder(X, y, n_classes, batch_size)\n     97                              \"streaming learning to work.\")\n     98         data_feeder_cls = StreamingDataFeeder\n---> 99     return data_feeder_cls(X, y, n_classes, batch_size)\n    100 \n    101 \n\n/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in **init**(self, X, y, n_classes, batch_size, random_state)\n    187 \n    188     def **init**(self, X, y, n_classes, batch_size, random_state=None):\n--> 189         x_dtype = np.int64 if X.dtype == np.int64 else np.float32\n    190         y_dtype = np.int64 if n_classes > 1 else np.float32\n    191         self.X = check_array(X, dtype=x_dtype)\n\nAttributeError: 'tuple' object has no attribute 'dtype'\n\n$$$$$$$$$$$$$$$\n$ Data Snapshot $\n$$$$$$$$$$$$$$$\nLabeled\n\n [array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 1]\n [array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 3]\n [array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 3]\n [array([128, 128, 128, ..., 128, 128, 128], dtype=uint8) 2]\n\nSplit using zip(_data)[0] to grab the list of arrays and zip(_data)[1] to grab the labels\n\n$$$$$$$$$$$$\n$ Some Code $\n$$$$$$$$$$$$$\nindices = np.random.permutation(data)\nvalid_cnt = int(len(data) \\* 0.25)\n\ntest, train = indices[:valid_cnt], indices[valid_cnt:]\n\ndef listify(x):\n    return [x]\n\nnum_classes = 3\n# Hyper Params\n\nstate_size = 3\nnum_layers = 4\nsteps = 100\nlearningRate = 0.01\n# One line model\n\nclassifier = skflow.TensorFlowRNNClassifier(\n                        rnn_size=state_size, \n                        n_classes = num_classes, \n                        cell_type='rnn',\n                        input_op_fn = listify,\n                        num_layers = num_layers,\n                        steps = steps,\n                        optimizer = 'Adam',\n                        learning_rate = learningRate,\n                        continue_training=True)\n\nclassifier.fit(zip(_train)[0], zip(_test)[1])\n\n$$$$$$$$$$$$\n$ Final Notes $\n$$$$$$$$$$$$\nI'm just learning this thing, so bear with it.  Let me know what I can do to help.  Again, get hold of me and I'll open up the Jupyter notebook to you.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20973", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20973/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20973/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20973/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20973", "id": 342782502, "node_id": "MDU6SXNzdWUzNDI3ODI1MDI=", "number": 20973, "title": "TFLITE object detection api  SSD model export issue toco", "user": {"login": "rickragv", "id": 6717323, "node_id": "MDQ6VXNlcjY3MTczMjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6717323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickragv", "html_url": "https://github.com/rickragv", "followers_url": "https://api.github.com/users/rickragv/followers", "following_url": "https://api.github.com/users/rickragv/following{/other_user}", "gists_url": "https://api.github.com/users/rickragv/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickragv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickragv/subscriptions", "organizations_url": "https://api.github.com/users/rickragv/orgs", "repos_url": "https://api.github.com/users/rickragv/repos", "events_url": "https://api.github.com/users/rickragv/events{/privacy}", "received_events_url": "https://api.github.com/users/rickragv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-07-19T15:37:08Z", "updated_at": "2018-07-20T19:59:17Z", "closed_at": "2018-07-20T19:59:17Z", "author_association": "NONE", "body_html": "<p>Hi, while running</p>\n<p>export CONFIG_FILE=<del>/ssdlite_mobilenet_v2_coco_2018_05_09/pipeline.config<br>\nexport CHECKPOINT_PATH=</del>/ssdlite_mobilenet_v2_coco_2018_05_09/model.ckpt</p>\n<p>bazel run -c opt tensorflow/contrib/lite/toco:toco\u200a\u2014\u200a\u2014 input_file=$OUTPUT_DIR/tflite_graph.pb\u200a\u2014\u200aoutput_file=$OUTPUT_DIR/detect.tflite\u200a\u2014\u200ainput_shapes=1,300,300,3\u200a\u2014\u200ainput_arrays=normalized_input_image_tensor\u200a\u2014\u200aoutput_arrays=\u2019TFLite_Detection_PostProcess\u2019,\u2019TFLite_Detection_PostProcess:1',\u2019TFLite_Detection_PostProcess:2',\u2019TFLite_Detection_PostProcess:3'\u200a\u2014\u200ainference_type=QUANTIZED_UINT8\u200a\u2014\u200amean_values=128\u200a\u2014\u200astd_values=128\u200a\u2014\u200achange_concat_input_ranges=false\u200a\u2014\u200aallow_custom_ops</p>\n<p>INFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).</p>\n<p>INFO: Found 1 target\u2026</p>\n<p>Target //tensorflow/contrib/lite/toco:toco up-to-date:</p>\n<p>bazel-bin/tensorflow/contrib/lite/toco/toco</p>\n<p>INFO: Elapsed time: 0.392s, Critical Path: 0.01s</p>\n<p>INFO: 0 processes.</p>\n<p>INFO: Build completed successfully, 1 total action</p>\n<p>INFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco \u2018\u200a\u2014\u200ainput_file=/home/ubuntu/tflite/tflite_graph.pb\u2019 \u2018\u200a\u2014\u200aoutput_file=/home/ubuntu/tflite/detect.tflite\u2019 \u2018\u200a\u2014\u200ainput_shapes=1,300,300,3\u2019 \u2018\u200a\u2014\u200ainput_arrays=normalized_input_image_tensor\u2019 \u2018\u200a\u2014\u200aoutput_arrays=TFLite_Detection_PostProcess,TFLite_Detection_PostProcess:1,TFLite_Detection_PostProcess:2,TFLite_Detection_PostProcess:3\u2019 \u2018INFO: Build completed successfully, 1 total action</p>\n<p>2018\u201307\u201319 15:32:40.725811: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1048] Converting unsupported operation: TFLite_Detection_PostProcess</p>\n<p>2018\u201307\u201319 15:32:40.742690: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 1070 operators, 1570 arrays (0 quantized)</p>\n<p>2018\u201307\u201319 15:32:40.791000: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1070 operators, 1570 arrays (0 quantized)</p>\n<p>2018\u201307\u201319 15:32:40.849051: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 116 operators, 310 arrays (1 quantized)</p>\n<p>2018\u201307\u201319 15:32:40.852027: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 116 operators, 310 arrays (1 quantized)</p>\n<p>2018\u201307\u201319 15:32:40.853807: F tensorflow/contrib/lite/toco/tooling_util.cc:1621] Array FeatureExtractor/MobilenetV2/Conv/Relu6, which is an input to the DepthwiseConv operator producing the output array FeatureExtractor/MobilenetV2/expanded_conv/depthwise/Relu6, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass\u200a\u2014\u200adefault_ranges_min= and\u200a\u2014\u200adefault_ranges_max= if you do not care about the accuracy of results.</p>", "body_text": "Hi, while running\nexport CONFIG_FILE=/ssdlite_mobilenet_v2_coco_2018_05_09/pipeline.config\nexport CHECKPOINT_PATH=/ssdlite_mobilenet_v2_coco_2018_05_09/model.ckpt\nbazel run -c opt tensorflow/contrib/lite/toco:toco\u200a\u2014\u200a\u2014 input_file=$OUTPUT_DIR/tflite_graph.pb\u200a\u2014\u200aoutput_file=$OUTPUT_DIR/detect.tflite\u200a\u2014\u200ainput_shapes=1,300,300,3\u200a\u2014\u200ainput_arrays=normalized_input_image_tensor\u200a\u2014\u200aoutput_arrays=\u2019TFLite_Detection_PostProcess\u2019,\u2019TFLite_Detection_PostProcess:1',\u2019TFLite_Detection_PostProcess:2',\u2019TFLite_Detection_PostProcess:3'\u200a\u2014\u200ainference_type=QUANTIZED_UINT8\u200a\u2014\u200amean_values=128\u200a\u2014\u200astd_values=128\u200a\u2014\u200achange_concat_input_ranges=false\u200a\u2014\u200aallow_custom_ops\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).\nINFO: Found 1 target\u2026\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:\nbazel-bin/tensorflow/contrib/lite/toco/toco\nINFO: Elapsed time: 0.392s, Critical Path: 0.01s\nINFO: 0 processes.\nINFO: Build completed successfully, 1 total action\nINFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco \u2018\u200a\u2014\u200ainput_file=/home/ubuntu/tflite/tflite_graph.pb\u2019 \u2018\u200a\u2014\u200aoutput_file=/home/ubuntu/tflite/detect.tflite\u2019 \u2018\u200a\u2014\u200ainput_shapes=1,300,300,3\u2019 \u2018\u200a\u2014\u200ainput_arrays=normalized_input_image_tensor\u2019 \u2018\u200a\u2014\u200aoutput_arrays=TFLite_Detection_PostProcess,TFLite_Detection_PostProcess:1,TFLite_Detection_PostProcess:2,TFLite_Detection_PostProcess:3\u2019 \u2018INFO: Build completed successfully, 1 total action\n2018\u201307\u201319 15:32:40.725811: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1048] Converting unsupported operation: TFLite_Detection_PostProcess\n2018\u201307\u201319 15:32:40.742690: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 1070 operators, 1570 arrays (0 quantized)\n2018\u201307\u201319 15:32:40.791000: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1070 operators, 1570 arrays (0 quantized)\n2018\u201307\u201319 15:32:40.849051: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 116 operators, 310 arrays (1 quantized)\n2018\u201307\u201319 15:32:40.852027: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 116 operators, 310 arrays (1 quantized)\n2018\u201307\u201319 15:32:40.853807: F tensorflow/contrib/lite/toco/tooling_util.cc:1621] Array FeatureExtractor/MobilenetV2/Conv/Relu6, which is an input to the DepthwiseConv operator producing the output array FeatureExtractor/MobilenetV2/expanded_conv/depthwise/Relu6, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass\u200a\u2014\u200adefault_ranges_min= and\u200a\u2014\u200adefault_ranges_max= if you do not care about the accuracy of results.", "body": "Hi, while running\r\n\r\nexport CONFIG_FILE=~/ssdlite_mobilenet_v2_coco_2018_05_09/pipeline.config\r\nexport CHECKPOINT_PATH=~/ssdlite_mobilenet_v2_coco_2018_05_09/model.ckpt\r\n\r\nbazel run -c opt tensorflow/contrib/lite/toco:toco\u200a\u2014\u200a\u2014 input_file=$OUTPUT_DIR/tflite_graph.pb\u200a\u2014\u200aoutput_file=$OUTPUT_DIR/detect.tflite\u200a\u2014\u200ainput_shapes=1,300,300,3\u200a\u2014\u200ainput_arrays=normalized_input_image_tensor\u200a\u2014\u200aoutput_arrays=\u2019TFLite_Detection_PostProcess\u2019,\u2019TFLite_Detection_PostProcess:1',\u2019TFLite_Detection_PostProcess:2',\u2019TFLite_Detection_PostProcess:3'\u200a\u2014\u200ainference_type=QUANTIZED_UINT8\u200a\u2014\u200amean_values=128\u200a\u2014\u200astd_values=128\u200a\u2014\u200achange_concat_input_ranges=false\u200a\u2014\u200aallow_custom_ops\r\n\r\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).\r\n\r\nINFO: Found 1 target\u2026\r\n\r\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:\r\n\r\nbazel-bin/tensorflow/contrib/lite/toco/toco\r\n\r\nINFO: Elapsed time: 0.392s, Critical Path: 0.01s\r\n\r\nINFO: 0 processes.\r\n\r\nINFO: Build completed successfully, 1 total action\r\n\r\nINFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco \u2018\u200a\u2014\u200ainput_file=/home/ubuntu/tflite/tflite_graph.pb\u2019 \u2018\u200a\u2014\u200aoutput_file=/home/ubuntu/tflite/detect.tflite\u2019 \u2018\u200a\u2014\u200ainput_shapes=1,300,300,3\u2019 \u2018\u200a\u2014\u200ainput_arrays=normalized_input_image_tensor\u2019 \u2018\u200a\u2014\u200aoutput_arrays=TFLite_Detection_PostProcess,TFLite_Detection_PostProcess:1,TFLite_Detection_PostProcess:2,TFLite_Detection_PostProcess:3\u2019 \u2018INFO: Build completed successfully, 1 total action\r\n\r\n2018\u201307\u201319 15:32:40.725811: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1048] Converting unsupported operation: TFLite_Detection_PostProcess\r\n\r\n2018\u201307\u201319 15:32:40.742690: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 1070 operators, 1570 arrays (0 quantized)\r\n\r\n2018\u201307\u201319 15:32:40.791000: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1070 operators, 1570 arrays (0 quantized)\r\n\r\n2018\u201307\u201319 15:32:40.849051: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 116 operators, 310 arrays (1 quantized)\r\n\r\n2018\u201307\u201319 15:32:40.852027: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 116 operators, 310 arrays (1 quantized)\r\n\r\n2018\u201307\u201319 15:32:40.853807: F tensorflow/contrib/lite/toco/tooling_util.cc:1621] Array FeatureExtractor/MobilenetV2/Conv/Relu6, which is an input to the DepthwiseConv operator producing the output array FeatureExtractor/MobilenetV2/expanded_conv/depthwise/Relu6, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass\u200a\u2014\u200adefault_ranges_min= and\u200a\u2014\u200adefault_ranges_max= if you do not care about the accuracy of results."}
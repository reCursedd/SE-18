{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15291", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15291/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15291/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15291/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15291", "id": 281233730, "node_id": "MDU6SXNzdWUyODEyMzM3MzA=", "number": 15291, "title": "Dockerfile.devel-gpu: infinite prompt loop", "user": {"login": "flx42", "id": 3645581, "node_id": "MDQ6VXNlcjM2NDU1ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/3645581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flx42", "html_url": "https://github.com/flx42", "followers_url": "https://api.github.com/users/flx42/followers", "following_url": "https://api.github.com/users/flx42/following{/other_user}", "gists_url": "https://api.github.com/users/flx42/gists{/gist_id}", "starred_url": "https://api.github.com/users/flx42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flx42/subscriptions", "organizations_url": "https://api.github.com/users/flx42/orgs", "repos_url": "https://api.github.com/users/flx42/repos", "events_url": "https://api.github.com/users/flx42/events{/privacy}", "received_events_url": "https://api.github.com/users/flx42/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-12-12T02:16:44Z", "updated_at": "2017-12-13T23:55:58Z", "closed_at": "2017-12-13T23:55:58Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"highlight highlight-source-shell\"><pre>$ docker build -f Dockerfile.devel-gpu github.com/tensorflow/tensorflow.git#master:tensorflow/tools/docker\n[...]\nStep 19/22 <span class=\"pl-c1\">:</span> RUN ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1 <span class=\"pl-k\">&amp;&amp;</span>     LD_LIBRARY_PATH=/usr/local/cuda/lib64/stubs:<span class=\"pl-smi\">${LD_LIBRARY_PATH}</span>     tensorflow/tools/ci_build/builds/configured GPU     bazel build -c opt --config=cuda --cxxopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-D_GLIBCXX_USE_CXX11_ABI=0<span class=\"pl-pds\">\"</span></span>         tensorflow/tools/pip_package:build_pip_package <span class=\"pl-k\">&amp;&amp;</span>     rm /usr/local/cuda/lib64/stubs/libcuda.so.1 <span class=\"pl-k\">&amp;&amp;</span>     bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip <span class=\"pl-k\">&amp;&amp;</span>     pip --no-cache-dir install --upgrade /tmp/pip/tensorflow-<span class=\"pl-k\">*</span>.whl <span class=\"pl-k\">&amp;&amp;</span>     rm -rf /tmp/pip <span class=\"pl-k\">&amp;&amp;</span>     rm -rf /root/.cache\n ---<span class=\"pl-k\">&gt;</span> Running <span class=\"pl-k\">in</span> 3e8560e2d441\n/tensorflow /tensorflow\nINFO: Reading <span class=\"pl-s\"><span class=\"pl-pds\">'</span>startup<span class=\"pl-pds\">'</span></span> options from /etc/bazel.bazelrc: --batch\nExtracting Bazel installation...\nYou have bazel 0.5.4 installed.\nFound possible Python library paths:\n  /usr/local/lib/python2.7/dist-packages\n  /usr/lib/python2.7/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]\nDo you wish to build TensorFlow with jemalloc as malloc support<span class=\"pl-k\">?</span> [Y/n]: jemalloc as malloc support will be enabled <span class=\"pl-k\">for</span> TensorFlow.\n\nDo you wish to build TensorFlow with Google Cloud Platform support<span class=\"pl-k\">?</span> [Y/n]: Google Cloud Platform support will be enabled <span class=\"pl-k\">for</span> TensorFlow.\n\nDo you wish to build TensorFlow with Hadoop File System support<span class=\"pl-k\">?</span> [Y/n]: Hadoop File System support will be enabled <span class=\"pl-k\">for</span> TensorFlow.\n\nDo you wish to build TensorFlow with Amazon S3 File System support<span class=\"pl-k\">?</span> [Y/n]: Amazon S3 File System support will be enabled <span class=\"pl-k\">for</span> TensorFlow.\n\nDo you wish to build TensorFlow with XLA JIT support<span class=\"pl-k\">?</span> [y/N]: No XLA JIT support will be enabled <span class=\"pl-k\">for</span> TensorFlow.\n\nDo you wish to build TensorFlow with GDR support<span class=\"pl-k\">?</span> [y/N]: No GDR support will be enabled <span class=\"pl-k\">for</span> TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support<span class=\"pl-k\">?</span> [y/N]: No VERBS support will be enabled <span class=\"pl-k\">for</span> TensorFlow.\n\nDo you wish to build TensorFlow with OpenCL support<span class=\"pl-k\">?</span> [y/N]: No OpenCL support will be enabled <span class=\"pl-k\">for</span> TensorFlow.\n\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md <span class=\"pl-k\">for</span> more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md <span class=\"pl-k\">for</span> more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md <span class=\"pl-k\">for</span> more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md <span class=\"pl-k\">for</span> more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md <span class=\"pl-k\">for</span> more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md <span class=\"pl-k\">for</span> more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md <span class=\"pl-k\">for</span> more details. [Default is /usr/local/cuda]: \n\n[... ad infinitum ... ]</pre></div>\n<p>Is it because the <code>1.4</code> branch doesn't support CUDA 9.0?<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/abd5375ba8d373045321d1eebdb4501c36ab0ccd/tensorflow/tools/docker/Dockerfile.devel-gpu#L74-L76\">tensorflow/tensorflow/tools/docker/Dockerfile.devel-gpu</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n        Lines 74 to 76\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/abd5375ba8d373045321d1eebdb4501c36ab0ccd\">abd5375</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L74\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"74\"></td>\n          <td id=\"LC74\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> RUN git clone https://github.com/tensorflow/tensorflow.git &amp;&amp; \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L75\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"75\"></td>\n          <td id=\"LC75\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">     cd tensorflow &amp;&amp; \\ </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L76\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"76\"></td>\n          <td id=\"LC76\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">     git checkout r1.4 </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7946809\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gunan\">@gunan</a></p>", "body_text": "$ docker build -f Dockerfile.devel-gpu github.com/tensorflow/tensorflow.git#master:tensorflow/tools/docker\n[...]\nStep 19/22 : RUN ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1 &&     LD_LIBRARY_PATH=/usr/local/cuda/lib64/stubs:${LD_LIBRARY_PATH}     tensorflow/tools/ci_build/builds/configured GPU     bazel build -c opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"         tensorflow/tools/pip_package:build_pip_package &&     rm /usr/local/cuda/lib64/stubs/libcuda.so.1 &&     bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip &&     pip --no-cache-dir install --upgrade /tmp/pip/tensorflow-*.whl &&     rm -rf /tmp/pip &&     rm -rf /root/.cache\n ---> Running in 3e8560e2d441\n/tensorflow /tensorflow\nINFO: Reading 'startup' options from /etc/bazel.bazelrc: --batch\nExtracting Bazel installation...\nYou have bazel 0.5.4 installed.\nFound possible Python library paths:\n  /usr/local/lib/python2.7/dist-packages\n  /usr/lib/python2.7/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: jemalloc as malloc support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: Google Cloud Platform support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: Hadoop File System support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: Amazon S3 File System support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: No XLA JIT support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with GDR support? [y/N]: No GDR support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support? [y/N]: No VERBS support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with OpenCL support? [y/N]: No OpenCL support will be enabled for TensorFlow.\n\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \n\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \n\n[... ad infinitum ... ]\nIs it because the 1.4 branch doesn't support CUDA 9.0?\n\n  \n    \n      tensorflow/tensorflow/tools/docker/Dockerfile.devel-gpu\n    \n    \n        Lines 74 to 76\n      in\n      abd5375\n    \n    \n    \n    \n\n        \n          \n           RUN git clone https://github.com/tensorflow/tensorflow.git && \\ \n        \n\n        \n          \n               cd tensorflow && \\ \n        \n\n        \n          \n               git checkout r1.4 \n        \n    \n  \n\n\n@gunan", "body": "```sh\r\n$ docker build -f Dockerfile.devel-gpu github.com/tensorflow/tensorflow.git#master:tensorflow/tools/docker\r\n[...]\r\nStep 19/22 : RUN ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1 &&     LD_LIBRARY_PATH=/usr/local/cuda/lib64/stubs:${LD_LIBRARY_PATH}     tensorflow/tools/ci_build/builds/configured GPU     bazel build -c opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"         tensorflow/tools/pip_package:build_pip_package &&     rm /usr/local/cuda/lib64/stubs/libcuda.so.1 &&     bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip &&     pip --no-cache-dir install --upgrade /tmp/pip/tensorflow-*.whl &&     rm -rf /tmp/pip &&     rm -rf /root/.cache\r\n ---> Running in 3e8560e2d441\r\n/tensorflow /tensorflow\r\nINFO: Reading 'startup' options from /etc/bazel.bazelrc: --batch\r\nExtracting Bazel installation...\r\nYou have bazel 0.5.4 installed.\r\nFound possible Python library paths:\r\n  /usr/local/lib/python2.7/dist-packages\r\n  /usr/lib/python2.7/dist-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]\r\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: jemalloc as malloc support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: Google Cloud Platform support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: Hadoop File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: Amazon S3 File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: No XLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with GDR support? [y/N]: No GDR support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with VERBS support? [y/N]: No VERBS support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL support? [y/N]: No OpenCL support will be enabled for TensorFlow.\r\n\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \r\n\r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\n\r\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \r\n\r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\n\r\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \r\n\r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\n\r\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \r\n\r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\n\r\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \r\n\r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\n\r\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \r\n\r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\n\r\nInvalid path to CUDA 8.0 toolkit. /usr/local/cuda/lib64/libcudart.so.8.0 cannot be found\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \r\n\r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\n\r\n[... ad infinitum ... ]\r\n```\r\n\r\nIs it because the `1.4` branch doesn't support CUDA 9.0?\r\nhttps://github.com/tensorflow/tensorflow/blob/abd5375ba8d373045321d1eebdb4501c36ab0ccd/tensorflow/tools/docker/Dockerfile.devel-gpu#L74-L76\r\n\r\n@gunan"}
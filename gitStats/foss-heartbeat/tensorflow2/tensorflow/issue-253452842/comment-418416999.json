{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/418416999", "html_url": "https://github.com/tensorflow/tensorflow/issues/12659#issuecomment-418416999", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12659", "id": 418416999, "node_id": "MDEyOklzc3VlQ29tbWVudDQxODQxNjk5OQ==", "user": {"login": "smatzek", "id": 13350259, "node_id": "MDQ6VXNlcjEzMzUwMjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/13350259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smatzek", "html_url": "https://github.com/smatzek", "followers_url": "https://api.github.com/users/smatzek/followers", "following_url": "https://api.github.com/users/smatzek/following{/other_user}", "gists_url": "https://api.github.com/users/smatzek/gists{/gist_id}", "starred_url": "https://api.github.com/users/smatzek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smatzek/subscriptions", "organizations_url": "https://api.github.com/users/smatzek/orgs", "repos_url": "https://api.github.com/users/smatzek/repos", "events_url": "https://api.github.com/users/smatzek/events{/privacy}", "received_events_url": "https://api.github.com/users/smatzek/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-04T15:42:53Z", "updated_at": "2018-09-04T15:42:53Z", "author_association": "CONTRIBUTOR", "body_html": "<p>To my knowledge this is still an issue. The ALTIVEC (ppc64le) pmin/pmax functions in Eigen were changed to match x86 behavior, but there is still differing behavior between CPU and GPU calculations with NaNs in min/max.  The CUDA/GPU implementation in Eigen uses CUDA API calls which will give different results from the x86 and ppc64le CPU call as discussed in my comment above.</p>\n<p>I believe this CPU-GPU discrepancy needs to be addressed so operations give the same result regardless of the device they run on. It would help if TensorFlow weighed in on which behavior it desires in the Eigen functions / tensor operations and then chime in on <a href=\"http://eigen.tuxfamily.org/bz/show_bug.cgi?id=564\" rel=\"nofollow\">http://eigen.tuxfamily.org/bz/show_bug.cgi?id=564</a>.</p>\n<p>Once the desired behavior is chosen the appropriate changes can be pushed into the various architecture implementations in Eigen to make them align.</p>", "body_text": "To my knowledge this is still an issue. The ALTIVEC (ppc64le) pmin/pmax functions in Eigen were changed to match x86 behavior, but there is still differing behavior between CPU and GPU calculations with NaNs in min/max.  The CUDA/GPU implementation in Eigen uses CUDA API calls which will give different results from the x86 and ppc64le CPU call as discussed in my comment above.\nI believe this CPU-GPU discrepancy needs to be addressed so operations give the same result regardless of the device they run on. It would help if TensorFlow weighed in on which behavior it desires in the Eigen functions / tensor operations and then chime in on http://eigen.tuxfamily.org/bz/show_bug.cgi?id=564.\nOnce the desired behavior is chosen the appropriate changes can be pushed into the various architecture implementations in Eigen to make them align.", "body": "To my knowledge this is still an issue. The ALTIVEC (ppc64le) pmin/pmax functions in Eigen were changed to match x86 behavior, but there is still differing behavior between CPU and GPU calculations with NaNs in min/max.  The CUDA/GPU implementation in Eigen uses CUDA API calls which will give different results from the x86 and ppc64le CPU call as discussed in my comment above.\r\n\r\nI believe this CPU-GPU discrepancy needs to be addressed so operations give the same result regardless of the device they run on. It would help if TensorFlow weighed in on which behavior it desires in the Eigen functions / tensor operations and then chime in on http://eigen.tuxfamily.org/bz/show_bug.cgi?id=564.\r\n\r\nOnce the desired behavior is chosen the appropriate changes can be pushed into the various architecture implementations in Eigen to make them align."}
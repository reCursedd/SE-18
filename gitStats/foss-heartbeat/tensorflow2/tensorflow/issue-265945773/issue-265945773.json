{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13763", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13763/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13763/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13763/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13763", "id": 265945773, "node_id": "MDU6SXNzdWUyNjU5NDU3NzM=", "number": 13763, "title": "Modify the TensorFlow Scheduler and Runtime to Change the Operations Priority", "user": {"login": "Jiawen1991", "id": 11548424, "node_id": "MDQ6VXNlcjExNTQ4NDI0", "avatar_url": "https://avatars2.githubusercontent.com/u/11548424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jiawen1991", "html_url": "https://github.com/Jiawen1991", "followers_url": "https://api.github.com/users/Jiawen1991/followers", "following_url": "https://api.github.com/users/Jiawen1991/following{/other_user}", "gists_url": "https://api.github.com/users/Jiawen1991/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jiawen1991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jiawen1991/subscriptions", "organizations_url": "https://api.github.com/users/Jiawen1991/orgs", "repos_url": "https://api.github.com/users/Jiawen1991/repos", "events_url": "https://api.github.com/users/Jiawen1991/events{/privacy}", "received_events_url": "https://api.github.com/users/Jiawen1991/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-10-16T23:21:17Z", "updated_at": "2018-01-24T22:56:27Z", "closed_at": "2018-01-24T22:56:27Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>I am trying to modify the TensorFlow scheduler and runtime to change the operation priorities. As my understanding, TensorFlow has inter-operation and intra-operation thread pool with a scheduler scheduling operations for different threads and there is also a FIFO queue of operations for operations waiting. The workflow between them is that operations are sent to the inter-op thread pool from the executor, and then that work is running through XLA compiler to eventually be executed on the intra-op thread pool. Schedule() is in inside a specific ThreadPool and is to schedule function for the threads in the pool. The thread scheduler selects a subset of threads to run at any given moment. When the tasks are passed to the ThreadPool, they are added to one of the scheduler thread\u2019s FIFO queues and then the scheduler will pick up the tasks distributed to the available worker threads. I have all the control and data dependencies got from the Graph in TensorFlow by using TensorBoard. Now I am not sure whether my understanding for the TensorFlow scheduler and runtime is correct or not.</p>\n<p>The problem is that I still have no clue how and where to modify the threadpool/scheduler/ready_queue or others to change the operations priority/sequence for different threads at the TensorFlow runtime by modifying the source code. Does anyone have any ideas?</p>", "body_text": "Hi,\nI am trying to modify the TensorFlow scheduler and runtime to change the operation priorities. As my understanding, TensorFlow has inter-operation and intra-operation thread pool with a scheduler scheduling operations for different threads and there is also a FIFO queue of operations for operations waiting. The workflow between them is that operations are sent to the inter-op thread pool from the executor, and then that work is running through XLA compiler to eventually be executed on the intra-op thread pool. Schedule() is in inside a specific ThreadPool and is to schedule function for the threads in the pool. The thread scheduler selects a subset of threads to run at any given moment. When the tasks are passed to the ThreadPool, they are added to one of the scheduler thread\u2019s FIFO queues and then the scheduler will pick up the tasks distributed to the available worker threads. I have all the control and data dependencies got from the Graph in TensorFlow by using TensorBoard. Now I am not sure whether my understanding for the TensorFlow scheduler and runtime is correct or not.\nThe problem is that I still have no clue how and where to modify the threadpool/scheduler/ready_queue or others to change the operations priority/sequence for different threads at the TensorFlow runtime by modifying the source code. Does anyone have any ideas?", "body": "Hi,\r\n\r\nI am trying to modify the TensorFlow scheduler and runtime to change the operation priorities. As my understanding, TensorFlow has inter-operation and intra-operation thread pool with a scheduler scheduling operations for different threads and there is also a FIFO queue of operations for operations waiting. The workflow between them is that operations are sent to the inter-op thread pool from the executor, and then that work is running through XLA compiler to eventually be executed on the intra-op thread pool. Schedule() is in inside a specific ThreadPool and is to schedule function for the threads in the pool. The thread scheduler selects a subset of threads to run at any given moment. When the tasks are passed to the ThreadPool, they are added to one of the scheduler thread\u2019s FIFO queues and then the scheduler will pick up the tasks distributed to the available worker threads. I have all the control and data dependencies got from the Graph in TensorFlow by using TensorBoard. Now I am not sure whether my understanding for the TensorFlow scheduler and runtime is correct or not.\r\n\r\nThe problem is that I still have no clue how and where to modify the threadpool/scheduler/ready_queue or others to change the operations priority/sequence for different threads at the TensorFlow runtime by modifying the source code. Does anyone have any ideas?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19854", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19854/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19854/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19854/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19854", "id": 330620692, "node_id": "MDU6SXNzdWUzMzA2MjA2OTI=", "number": 19854, "title": "TensorFlowException: Op type not registered 'NonMaxSuppressionV3' in binary running on localhost.", "user": {"login": "japer21", "id": 17979719, "node_id": "MDQ6VXNlcjE3OTc5NzE5", "avatar_url": "https://avatars2.githubusercontent.com/u/17979719?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japer21", "html_url": "https://github.com/japer21", "followers_url": "https://api.github.com/users/japer21/followers", "following_url": "https://api.github.com/users/japer21/following{/other_user}", "gists_url": "https://api.github.com/users/japer21/gists{/gist_id}", "starred_url": "https://api.github.com/users/japer21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japer21/subscriptions", "organizations_url": "https://api.github.com/users/japer21/orgs", "repos_url": "https://api.github.com/users/japer21/repos", "events_url": "https://api.github.com/users/japer21/events{/privacy}", "received_events_url": "https://api.github.com/users/japer21/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2018-06-08T11:23:55Z", "updated_at": "2018-11-21T18:59:53Z", "closed_at": null, "author_association": "NONE", "body_html": "<pre><code>### System information\nLinux 4.4.0-127-generic #153-Ubuntu SMP Sat May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"16.04.4 LTS (Xenial Xerus)\"\nVERSION_ID=\"16.04\"\nVERSION_CODENAME=xenial\n\n== compiler =====================================================\nc++ (Ubuntu 5.5.0-12ubuntu1~16.04) 5.5.0 20171010\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n\n== uname -a =====================================================\nLinux 4.4.0-127-generic #153-Ubuntu SMP Sat May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n== check pips ===================================================\nnumpy                          1.14.2                \nprotobuf                       3.5.2.post1           \ntensorflow                     1.8.0                 \ntensorflow-serving-api-python3 1.4.0                 \n\n== check for virtualenv =========================================\nTrue\n\n== tensorflow import ============================================\ntf.VERSION = 1.8.0\ntf.GIT_VERSION = v1.8.0-0-g93bc2e2072\ntf.COMPILER_VERSION = v1.8.0-0-g93bc2e2072\nSanity check: array([1], dtype=int32)\n\n- **Exact command to reproduce**: I run my android application on Android Studio\n</code></pre>\n<h3>Describe the problem</h3>\n<p>I have an android application where for instance I make an initialization of my frozen model.<br>\nIt seems that there is a problem with the ops. I get this exception:</p>\n<p>`java.lang.RuntimeException: Unable to start activity ComponentInfo{myapp/myapp.MainActivity}:<br>\norg.tensorflow.TensorFlowException: Op type not registered 'NonMaxSuppressionV3' in binary running on localhost. Make sure the Op and Kernel are registered in the binary running in this process.</p>\n<pre><code>    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2666)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2727)\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1478)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:154)\n    at android.app.ActivityThread.main(ActivityThread.java:6121)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:890)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:780)\n Caused by: org.tensorflow.TensorFlowException: Op type not registered 'NonMaxSuppressionV3' in binary running on localhost. Make sure the Op and Kernel are registered in the binary running in this process.\n    at org.tensorflow.Graph.importGraphDef(Native Method)\n    at org.tensorflow.Graph.importGraphDef(Graph.java:130)\n    at org.tensorflow.Graph.importGraphDef(Graph.java:114)\n    at org.tensorflow.contrib.android.TensorFlowInferenceInterface.loadGraph(TensorFlowInferenceInterface.java:559)\n    at org.tensorflow.contrib.android.TensorFlowInferenceInterface.&lt;init&gt;(TensorFlowInferenceInterface.java:105)\n    at myapp.ActivityInference.&lt;init&gt;(ActivityInference.java:22)\n    at myapp.MainActivity.onCreate(MainActivity.java:21)\n    at android.app.Activity.performCreate(Activity.java:6692)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2619)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2727)\u00a0\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1478)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n    at android.os.Looper.loop(Looper.java:154)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6121)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:890)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:780)\u00a0` \n</code></pre>\n<p>I have checked the BUILD file in tensorflow/core/kernels/ and there is defined the kernel library:<br>\n<code>tf_kernel_library( name = \"non_max_suppression_op\", prefix = \"non_max_suppression_op\", deps = IMAGE_DEPS, )</code><br>\nI am new to this so I really do not know how I can fix it.<br>\nI am working on a pre-trained frozen model.</p>\n<h3>Source code / logs</h3>\n<p>Android code:</p>\n<pre><code>package myapp;\nimport android.content.Context;\nimport android.content.res.AssetManager;\n\nimport org.tensorflow.contrib.android.TensorFlowInferenceInterface;\n\n\npublic class ActivityInference {\n\n    private static ActivityInference activityInferenceInstance;\n    private TensorFlowInferenceInterface inferenceInterface;\n    private static AssetManager assetManager;\n    private static final String MODEL_FILE = \"file:///android_asset/frozen_inference_graph.pb\";\n    private static final String INPUT_NODE = \"input\";\n\n    public ActivityInference(final Context context) {\n        this.assetManager = context.getAssets();\n        inferenceInterface = new TensorFlowInferenceInterface(assetManager, MODEL_FILE);\n\n    }\n\n    public static ActivityInference getInstance(final Context context){\n        if (activityInferenceInstance == null)\n        {\n            activityInferenceInstance = new ActivityInference(context);\n        }\n        return activityInferenceInstance;\n    }\n}\n</code></pre>\n<p>and my main activity:</p>\n<pre><code>package myapp;\n\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.widget.TextView;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ActivityInference activityInference;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        final TextView textView = (TextView) findViewById(R.id.textView);\n        activityInference = new ActivityInference(getApplicationContext());\n    }\n}\n</code></pre>", "body_text": "### System information\nLinux 4.4.0-127-generic #153-Ubuntu SMP Sat May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"16.04.4 LTS (Xenial Xerus)\"\nVERSION_ID=\"16.04\"\nVERSION_CODENAME=xenial\n\n== compiler =====================================================\nc++ (Ubuntu 5.5.0-12ubuntu1~16.04) 5.5.0 20171010\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n\n== uname -a =====================================================\nLinux 4.4.0-127-generic #153-Ubuntu SMP Sat May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n== check pips ===================================================\nnumpy                          1.14.2                \nprotobuf                       3.5.2.post1           \ntensorflow                     1.8.0                 \ntensorflow-serving-api-python3 1.4.0                 \n\n== check for virtualenv =========================================\nTrue\n\n== tensorflow import ============================================\ntf.VERSION = 1.8.0\ntf.GIT_VERSION = v1.8.0-0-g93bc2e2072\ntf.COMPILER_VERSION = v1.8.0-0-g93bc2e2072\nSanity check: array([1], dtype=int32)\n\n- **Exact command to reproduce**: I run my android application on Android Studio\n\nDescribe the problem\nI have an android application where for instance I make an initialization of my frozen model.\nIt seems that there is a problem with the ops. I get this exception:\n`java.lang.RuntimeException: Unable to start activity ComponentInfo{myapp/myapp.MainActivity}:\norg.tensorflow.TensorFlowException: Op type not registered 'NonMaxSuppressionV3' in binary running on localhost. Make sure the Op and Kernel are registered in the binary running in this process.\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2666)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2727)\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1478)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:154)\n    at android.app.ActivityThread.main(ActivityThread.java:6121)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:890)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:780)\n Caused by: org.tensorflow.TensorFlowException: Op type not registered 'NonMaxSuppressionV3' in binary running on localhost. Make sure the Op and Kernel are registered in the binary running in this process.\n    at org.tensorflow.Graph.importGraphDef(Native Method)\n    at org.tensorflow.Graph.importGraphDef(Graph.java:130)\n    at org.tensorflow.Graph.importGraphDef(Graph.java:114)\n    at org.tensorflow.contrib.android.TensorFlowInferenceInterface.loadGraph(TensorFlowInferenceInterface.java:559)\n    at org.tensorflow.contrib.android.TensorFlowInferenceInterface.<init>(TensorFlowInferenceInterface.java:105)\n    at myapp.ActivityInference.<init>(ActivityInference.java:22)\n    at myapp.MainActivity.onCreate(MainActivity.java:21)\n    at android.app.Activity.performCreate(Activity.java:6692)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2619)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2727)\u00a0\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1478)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n    at android.os.Looper.loop(Looper.java:154)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6121)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:890)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:780)\u00a0` \n\nI have checked the BUILD file in tensorflow/core/kernels/ and there is defined the kernel library:\ntf_kernel_library( name = \"non_max_suppression_op\", prefix = \"non_max_suppression_op\", deps = IMAGE_DEPS, )\nI am new to this so I really do not know how I can fix it.\nI am working on a pre-trained frozen model.\nSource code / logs\nAndroid code:\npackage myapp;\nimport android.content.Context;\nimport android.content.res.AssetManager;\n\nimport org.tensorflow.contrib.android.TensorFlowInferenceInterface;\n\n\npublic class ActivityInference {\n\n    private static ActivityInference activityInferenceInstance;\n    private TensorFlowInferenceInterface inferenceInterface;\n    private static AssetManager assetManager;\n    private static final String MODEL_FILE = \"file:///android_asset/frozen_inference_graph.pb\";\n    private static final String INPUT_NODE = \"input\";\n\n    public ActivityInference(final Context context) {\n        this.assetManager = context.getAssets();\n        inferenceInterface = new TensorFlowInferenceInterface(assetManager, MODEL_FILE);\n\n    }\n\n    public static ActivityInference getInstance(final Context context){\n        if (activityInferenceInstance == null)\n        {\n            activityInferenceInstance = new ActivityInference(context);\n        }\n        return activityInferenceInstance;\n    }\n}\n\nand my main activity:\npackage myapp;\n\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.widget.TextView;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ActivityInference activityInference;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        final TextView textView = (TextView) findViewById(R.id.textView);\n        activityInference = new ActivityInference(getApplicationContext());\n    }\n}", "body": "```\r\n### System information\r\nLinux 4.4.0-127-generic #153-Ubuntu SMP Sat May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"16.04.4 LTS (Xenial Xerus)\"\r\nVERSION_ID=\"16.04\"\r\nVERSION_CODENAME=xenial\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 5.5.0-12ubuntu1~16.04) 5.5.0 20171010\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux 4.4.0-127-generic #153-Ubuntu SMP Sat May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy                          1.14.2                \r\nprotobuf                       3.5.2.post1           \r\ntensorflow                     1.8.0                 \r\ntensorflow-serving-api-python3 1.4.0                 \r\n\r\n== check for virtualenv =========================================\r\nTrue\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.8.0\r\ntf.GIT_VERSION = v1.8.0-0-g93bc2e2072\r\ntf.COMPILER_VERSION = v1.8.0-0-g93bc2e2072\r\nSanity check: array([1], dtype=int32)\r\n\r\n- **Exact command to reproduce**: I run my android application on Android Studio\r\n```\r\n\r\n### Describe the problem\r\nI have an android application where for instance I make an initialization of my frozen model. \r\nIt seems that there is a problem with the ops. I get this exception:\r\n\r\n`java.lang.RuntimeException: Unable to start activity ComponentInfo{myapp/myapp.MainActivity}: \r\norg.tensorflow.TensorFlowException: Op type not registered 'NonMaxSuppressionV3' in binary running on localhost. Make sure the Op and Kernel are registered in the binary running in this process.\r\n\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2666)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2727)\r\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1478)\r\n        at android.os.Handler.dispatchMessage(Handler.java:102)\r\n        at android.os.Looper.loop(Looper.java:154)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6121)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:890)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:780)\r\n     Caused by: org.tensorflow.TensorFlowException: Op type not registered 'NonMaxSuppressionV3' in binary running on localhost. Make sure the Op and Kernel are registered in the binary running in this process.\r\n        at org.tensorflow.Graph.importGraphDef(Native Method)\r\n        at org.tensorflow.Graph.importGraphDef(Graph.java:130)\r\n        at org.tensorflow.Graph.importGraphDef(Graph.java:114)\r\n        at org.tensorflow.contrib.android.TensorFlowInferenceInterface.loadGraph(TensorFlowInferenceInterface.java:559)\r\n        at org.tensorflow.contrib.android.TensorFlowInferenceInterface.<init>(TensorFlowInferenceInterface.java:105)\r\n        at myapp.ActivityInference.<init>(ActivityInference.java:22)\r\n        at myapp.MainActivity.onCreate(MainActivity.java:21)\r\n        at android.app.Activity.performCreate(Activity.java:6692)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2619)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2727)\u00a0\r\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1478)\u00a0\r\n        at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\r\n        at android.os.Looper.loop(Looper.java:154)\u00a0\r\n        at android.app.ActivityThread.main(ActivityThread.java:6121)\u00a0\r\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:890)\u00a0\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:780)\u00a0` \r\n\r\nI have checked the BUILD file in tensorflow/core/kernels/ and there is defined the kernel library:\r\n`tf_kernel_library(\r\n    name = \"non_max_suppression_op\",\r\n    prefix = \"non_max_suppression_op\",\r\n    deps = IMAGE_DEPS,\r\n)`\r\nI am new to this so I really do not know how I can fix it.\r\nI am working on a pre-trained frozen model.\r\n\r\n### Source code / logs\r\nAndroid code:\r\n\r\n\r\n```\r\npackage myapp;\r\nimport android.content.Context;\r\nimport android.content.res.AssetManager;\r\n\r\nimport org.tensorflow.contrib.android.TensorFlowInferenceInterface;\r\n\r\n\r\npublic class ActivityInference {\r\n\r\n    private static ActivityInference activityInferenceInstance;\r\n    private TensorFlowInferenceInterface inferenceInterface;\r\n    private static AssetManager assetManager;\r\n    private static final String MODEL_FILE = \"file:///android_asset/frozen_inference_graph.pb\";\r\n    private static final String INPUT_NODE = \"input\";\r\n\r\n    public ActivityInference(final Context context) {\r\n        this.assetManager = context.getAssets();\r\n        inferenceInterface = new TensorFlowInferenceInterface(assetManager, MODEL_FILE);\r\n\r\n    }\r\n\r\n    public static ActivityInference getInstance(final Context context){\r\n        if (activityInferenceInstance == null)\r\n        {\r\n            activityInferenceInstance = new ActivityInference(context);\r\n        }\r\n        return activityInferenceInstance;\r\n    }\r\n}\r\n```\r\n\r\nand my main activity:\r\n\r\n```\r\npackage myapp;\r\n\r\nimport android.support.v7.app.AppCompatActivity;\r\nimport android.os.Bundle;\r\nimport android.widget.TextView;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private ActivityInference activityInference;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        final TextView textView = (TextView) findViewById(R.id.textView);\r\n        activityInference = new ActivityInference(getApplicationContext());\r\n    }\r\n}\r\n```"}
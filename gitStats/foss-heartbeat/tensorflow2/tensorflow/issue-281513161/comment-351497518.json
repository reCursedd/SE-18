{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/351497518", "html_url": "https://github.com/tensorflow/tensorflow/issues/15320#issuecomment-351497518", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15320", "id": 351497518, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTQ5NzUxOA==", "user": {"login": "BogdanRuzh", "id": 20704139, "node_id": "MDQ6VXNlcjIwNzA0MTM5", "avatar_url": "https://avatars3.githubusercontent.com/u/20704139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BogdanRuzh", "html_url": "https://github.com/BogdanRuzh", "followers_url": "https://api.github.com/users/BogdanRuzh/followers", "following_url": "https://api.github.com/users/BogdanRuzh/following{/other_user}", "gists_url": "https://api.github.com/users/BogdanRuzh/gists{/gist_id}", "starred_url": "https://api.github.com/users/BogdanRuzh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BogdanRuzh/subscriptions", "organizations_url": "https://api.github.com/users/BogdanRuzh/orgs", "repos_url": "https://api.github.com/users/BogdanRuzh/repos", "events_url": "https://api.github.com/users/BogdanRuzh/events{/privacy}", "received_events_url": "https://api.github.com/users/BogdanRuzh/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-13T19:32:36Z", "updated_at": "2017-12-13T19:34:01Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=25373098\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vivek-rane\">@vivek-rane</a> Thanks for your response.<br>\nI'm testing performance on another machine (two Xeon X5650, 6 physical cores per CPU), so my current measurements will not match to previously reported. I've tried these variables and get some performance gain.</p>\n<p>Tested local variables:</p>\n<blockquote>\n<p>KMP_BLOCKTIME=0 KMP_AFFINITY=granularity=fine,verbose,compact,1,0 KMP_SETTINGS=1</p>\n</blockquote>\n<ul>\n<li>MKL Tensorflow:\n<ul>\n<li>Without local variables: 0.74s</li>\n<li>With local variables: 0.27s</li>\n</ul>\n</li>\n</ul>\n<p>Also with OMP_NUM_THREADS=2 I have the best performance: 0.22s<br>\nWith more or less threads performance dropped.</p>\n<ul>\n<li>Pip Tensorflow (all cores): 0.04s</li>\n</ul>\n<p>For all these tests I've removed session_conf.</p>\n<p>Still, pip installed Tensorflow achieve the best performance on all cores. Is it possible to outperform it?</p>", "body_text": "@vivek-rane Thanks for your response.\nI'm testing performance on another machine (two Xeon X5650, 6 physical cores per CPU), so my current measurements will not match to previously reported. I've tried these variables and get some performance gain.\nTested local variables:\n\nKMP_BLOCKTIME=0 KMP_AFFINITY=granularity=fine,verbose,compact,1,0 KMP_SETTINGS=1\n\n\nMKL Tensorflow:\n\nWithout local variables: 0.74s\nWith local variables: 0.27s\n\n\n\nAlso with OMP_NUM_THREADS=2 I have the best performance: 0.22s\nWith more or less threads performance dropped.\n\nPip Tensorflow (all cores): 0.04s\n\nFor all these tests I've removed session_conf.\nStill, pip installed Tensorflow achieve the best performance on all cores. Is it possible to outperform it?", "body": "@vivek-rane Thanks for your response. \r\nI'm testing performance on another machine (two Xeon X5650, 6 physical cores per CPU), so my current measurements will not match to previously reported. I've tried these variables and get some performance gain.\r\n\r\nTested local variables: \r\n> KMP_BLOCKTIME=0 KMP_AFFINITY=granularity=fine,verbose,compact,1,0 KMP_SETTINGS=1\r\n\r\n* MKL Tensorflow:\r\n    * Without local variables: 0.74s\r\n    * With local variables: 0.27s\r\n\r\nAlso with OMP_NUM_THREADS=2 I have the best performance: 0.22s \r\nWith more or less threads performance dropped.\r\n\r\n* Pip Tensorflow (all cores): 0.04s\r\n\r\nFor all these tests I've removed session_conf.\r\n\r\nStill, pip installed Tensorflow achieve the best performance on all cores. Is it possible to outperform it?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8667", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8667/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8667/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8667/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8667", "id": 216504663, "node_id": "MDU6SXNzdWUyMTY1MDQ2NjM=", "number": 8667, "title": "tf.nn.softmax -- the \"name\" argument is passed to the internal flattened tensor", "user": {"login": "ilya-edrenkin", "id": 13562803, "node_id": "MDQ6VXNlcjEzNTYyODAz", "avatar_url": "https://avatars2.githubusercontent.com/u/13562803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilya-edrenkin", "html_url": "https://github.com/ilya-edrenkin", "followers_url": "https://api.github.com/users/ilya-edrenkin/followers", "following_url": "https://api.github.com/users/ilya-edrenkin/following{/other_user}", "gists_url": "https://api.github.com/users/ilya-edrenkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilya-edrenkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilya-edrenkin/subscriptions", "organizations_url": "https://api.github.com/users/ilya-edrenkin/orgs", "repos_url": "https://api.github.com/users/ilya-edrenkin/repos", "events_url": "https://api.github.com/users/ilya-edrenkin/events{/privacy}", "received_events_url": "https://api.github.com/users/ilya-edrenkin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-23T17:11:32Z", "updated_at": "2017-04-10T23:20:22Z", "closed_at": "2017-04-10T23:20:22Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Hi, if I use tf.nn.softmax with the <code>name</code> argument, I expect the output tensor to be given this name.<br>\nHowever, the output tensor is always a Reshape op named <code>Reshape_...</code>, and the passed name refers to an internal (flattened) tensor.</p>\n<p>Steps to reproduce (TF v1.0.1):</p>\n<pre><code>In [1]: import tensorflow as tf\nIn [2]: a = tf.nn.softmax(tf.ones([2, 8, 20]), name=\"softmax_custom_name\")\nIn [3]: print a\nTensor(\"Reshape_1:0\", shape=(2, 8, 20), dtype=float32)\nIn [4]: print tf.get_default_graph().get_tensor_by_name(\"softmax_custom_name:0\")\nTensor(\"softmax_custom_name:0\", shape=(16, 20), dtype=float32)\n</code></pre>\n<p>Here is the relevant code from the master branch:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/nn_ops.py#L1501\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/nn_ops.py#L1501</a><br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/nn_ops.py#L1519\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/nn_ops.py#L1519</a></p>\n<p>Is this the expected behaviour? In this case it would probably make sense to mention it in the documentation?</p>\n<p>Otherwise I'd submit a fix.</p>", "body_text": "Hi, if I use tf.nn.softmax with the name argument, I expect the output tensor to be given this name.\nHowever, the output tensor is always a Reshape op named Reshape_..., and the passed name refers to an internal (flattened) tensor.\nSteps to reproduce (TF v1.0.1):\nIn [1]: import tensorflow as tf\nIn [2]: a = tf.nn.softmax(tf.ones([2, 8, 20]), name=\"softmax_custom_name\")\nIn [3]: print a\nTensor(\"Reshape_1:0\", shape=(2, 8, 20), dtype=float32)\nIn [4]: print tf.get_default_graph().get_tensor_by_name(\"softmax_custom_name:0\")\nTensor(\"softmax_custom_name:0\", shape=(16, 20), dtype=float32)\n\nHere is the relevant code from the master branch:\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/nn_ops.py#L1501\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/nn_ops.py#L1519\nIs this the expected behaviour? In this case it would probably make sense to mention it in the documentation?\nOtherwise I'd submit a fix.", "body": "Hi, if I use tf.nn.softmax with the `name` argument, I expect the output tensor to be given this name.\r\nHowever, the output tensor is always a Reshape op named `Reshape_...`, and the passed name refers to an internal (flattened) tensor.\r\n\r\nSteps to reproduce (TF v1.0.1):\r\n```\r\nIn [1]: import tensorflow as tf\r\nIn [2]: a = tf.nn.softmax(tf.ones([2, 8, 20]), name=\"softmax_custom_name\")\r\nIn [3]: print a\r\nTensor(\"Reshape_1:0\", shape=(2, 8, 20), dtype=float32)\r\nIn [4]: print tf.get_default_graph().get_tensor_by_name(\"softmax_custom_name:0\")\r\nTensor(\"softmax_custom_name:0\", shape=(16, 20), dtype=float32)\r\n```\r\n\r\nHere is the relevant code from the master branch:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/nn_ops.py#L1501\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/nn_ops.py#L1519\r\n\r\nIs this the expected behaviour? In this case it would probably make sense to mention it in the documentation?\r\n\r\nOtherwise I'd submit a fix."}
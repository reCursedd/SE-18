{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/405861819", "html_url": "https://github.com/tensorflow/tensorflow/issues/20677#issuecomment-405861819", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20677", "id": 405861819, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTg2MTgxOQ==", "user": {"login": "zjfheart", "id": 10344081, "node_id": "MDQ6VXNlcjEwMzQ0MDgx", "avatar_url": "https://avatars3.githubusercontent.com/u/10344081?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zjfheart", "html_url": "https://github.com/zjfheart", "followers_url": "https://api.github.com/users/zjfheart/followers", "following_url": "https://api.github.com/users/zjfheart/following{/other_user}", "gists_url": "https://api.github.com/users/zjfheart/gists{/gist_id}", "starred_url": "https://api.github.com/users/zjfheart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zjfheart/subscriptions", "organizations_url": "https://api.github.com/users/zjfheart/orgs", "repos_url": "https://api.github.com/users/zjfheart/repos", "events_url": "https://api.github.com/users/zjfheart/events{/privacy}", "received_events_url": "https://api.github.com/users/zjfheart/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-18T09:00:03Z", "updated_at": "2018-07-18T09:02:00Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=22967383\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/wdirons\">@wdirons</a></p>\n<p>I remove old tensorflow folder and git clone it again. Cherry pick the fix again.</p>\n<p>Installation works well, but verification fails.</p>\n<p>[root@Jingfeng_redhat tensorflow]# bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package<br>\n... ...<br>\nTarget //tensorflow/tools/pip_package:build_pip_package up-to-date:<br>\nbazel-bin/tensorflow/tools/pip_package/build_pip_package<br>\nINFO: Elapsed time: 916.321s, Critical Path: 539.31s<br>\nINFO: 7813 processes: 7813 local.<br>\nINFO: Build completed successfully, 10232 total actions</p>\n<p>Here is the part of info in the ~/tensorflow/tensorflow/workspace.bzl</p>\n<pre><code>tf_http_archive(\n      name = \"com_googlesource_code_re2\",\n      urls = [\n          \"https://mirror.bazel.build/github.com/google/re2/archive/2018-04-01.tar.gz\",\n          \"https://github.com/google/re2/archive/2018-04-01.tar.gz\",\n\n      ],\n      sha256 = \"2f945446b71336e7f5a2bcace1abcf0b23fbba368266c6a1be33de3de3b3c912\",\n      strip_prefix = \"re2-2018-04-01\",\n      system_build_file = clean_dep(\"//third_party/systemlibs:re2.BUILD\"),\n  )\n\n  tf_http_archive(\n      name = \"com_github_googlecloudplatform_google_cloud_cpp\",\n      urls = [\n          \"https://mirror.bazel.build/github.com/GoogleCloudPlatform/google-cloud-cpp/archive/f875700a023bdd706333cde45aee8758b272c357.tar.gz\",\n          \"https://github.com/GoogleCloudPlatform/google-cloud-cpp/archive/f875700a023bdd706333cde45aee8758b272c357.tar.gz\",\n      ],\n      sha256 = \"a34f3c50b237686dc870b13baaa6a5836ce3473f2f2a02717299f0ff318372db\",\n      strip_prefix = \"google-cloud-cpp-f875700a023bdd706333cde45aee8758b272c357\",\n  )\n\n  tf_http_archive(\n      name = \"com_github_googleapis_googleapis\",\n      urls = [\n          \"https://mirror.bazel.build/github.com/googleapis/googleapis/archive/f81082ea1e2f85c43649bee26e0d9871d4b41cdb.zip\",\n          \"https://github.com/googleapis/googleapis/archive/f81082ea1e2f85c43649bee26e0d9871d4b41cdb.zip\",\n      ],\n      sha256 = \"824870d87a176f26bcef663e92051f532fac756d1a06b404055dc078425f4378\",\n      strip_prefix=\"googleapis-f81082ea1e2f85c43649bee26e0d9871d4b41cdb\",\n      build_file = clean_dep(\"//third_party:googleapis.BUILD\"),\n  )\n</code></pre>\n<p>I continue with<br>\nbazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg<br>\npip install /tmp/tensorflow_pkg/tensorflow-1.9.0rc0-cp34-cp34m-linux_ppc64le.whl</p>\n<p>But after installation, there is another problem: I've managed to get a TF distribution with nothing in it.<br>\n[jingfeng@Jingfeng_redhat ~]$ python3.4</p>\n<pre><code>&gt;&gt;&gt; import tensorflow as tf\n&gt;&gt;&gt; var = tf.Variable(100, name=\"variable_counter\")\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'module' object has no attribute 'Variable'\n&gt;&gt;&gt; dir(tf)\n['__doc__', '__loader__', '__name__', '__package__', '__path__', '__spec__']\n</code></pre>", "body_text": "@wdirons\nI remove old tensorflow folder and git clone it again. Cherry pick the fix again.\nInstallation works well, but verification fails.\n[root@Jingfeng_redhat tensorflow]# bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n... ...\nTarget //tensorflow/tools/pip_package:build_pip_package up-to-date:\nbazel-bin/tensorflow/tools/pip_package/build_pip_package\nINFO: Elapsed time: 916.321s, Critical Path: 539.31s\nINFO: 7813 processes: 7813 local.\nINFO: Build completed successfully, 10232 total actions\nHere is the part of info in the ~/tensorflow/tensorflow/workspace.bzl\ntf_http_archive(\n      name = \"com_googlesource_code_re2\",\n      urls = [\n          \"https://mirror.bazel.build/github.com/google/re2/archive/2018-04-01.tar.gz\",\n          \"https://github.com/google/re2/archive/2018-04-01.tar.gz\",\n\n      ],\n      sha256 = \"2f945446b71336e7f5a2bcace1abcf0b23fbba368266c6a1be33de3de3b3c912\",\n      strip_prefix = \"re2-2018-04-01\",\n      system_build_file = clean_dep(\"//third_party/systemlibs:re2.BUILD\"),\n  )\n\n  tf_http_archive(\n      name = \"com_github_googlecloudplatform_google_cloud_cpp\",\n      urls = [\n          \"https://mirror.bazel.build/github.com/GoogleCloudPlatform/google-cloud-cpp/archive/f875700a023bdd706333cde45aee8758b272c357.tar.gz\",\n          \"https://github.com/GoogleCloudPlatform/google-cloud-cpp/archive/f875700a023bdd706333cde45aee8758b272c357.tar.gz\",\n      ],\n      sha256 = \"a34f3c50b237686dc870b13baaa6a5836ce3473f2f2a02717299f0ff318372db\",\n      strip_prefix = \"google-cloud-cpp-f875700a023bdd706333cde45aee8758b272c357\",\n  )\n\n  tf_http_archive(\n      name = \"com_github_googleapis_googleapis\",\n      urls = [\n          \"https://mirror.bazel.build/github.com/googleapis/googleapis/archive/f81082ea1e2f85c43649bee26e0d9871d4b41cdb.zip\",\n          \"https://github.com/googleapis/googleapis/archive/f81082ea1e2f85c43649bee26e0d9871d4b41cdb.zip\",\n      ],\n      sha256 = \"824870d87a176f26bcef663e92051f532fac756d1a06b404055dc078425f4378\",\n      strip_prefix=\"googleapis-f81082ea1e2f85c43649bee26e0d9871d4b41cdb\",\n      build_file = clean_dep(\"//third_party:googleapis.BUILD\"),\n  )\n\nI continue with\nbazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\npip install /tmp/tensorflow_pkg/tensorflow-1.9.0rc0-cp34-cp34m-linux_ppc64le.whl\nBut after installation, there is another problem: I've managed to get a TF distribution with nothing in it.\n[jingfeng@Jingfeng_redhat ~]$ python3.4\n>>> import tensorflow as tf\n>>> var = tf.Variable(100, name=\"variable_counter\")\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nAttributeError: 'module' object has no attribute 'Variable'\n>>> dir(tf)\n['__doc__', '__loader__', '__name__', '__package__', '__path__', '__spec__']", "body": "@wdirons \r\n\r\nI remove old tensorflow folder and git clone it again. Cherry pick the fix again. \r\n\r\nInstallation works well, but verification fails. \r\n\r\n[root@Jingfeng_redhat tensorflow]# bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\n... ...\r\nTarget //tensorflow/tools/pip_package:build_pip_package up-to-date:\r\nbazel-bin/tensorflow/tools/pip_package/build_pip_package\r\nINFO: Elapsed time: 916.321s, Critical Path: 539.31s\r\nINFO: 7813 processes: 7813 local.\r\nINFO: Build completed successfully, 10232 total actions\r\n\r\n\r\nHere is the part of info in the ~/tensorflow/tensorflow/workspace.bzl\r\n\r\n```\r\ntf_http_archive(\r\n      name = \"com_googlesource_code_re2\",\r\n      urls = [\r\n          \"https://mirror.bazel.build/github.com/google/re2/archive/2018-04-01.tar.gz\",\r\n          \"https://github.com/google/re2/archive/2018-04-01.tar.gz\",\r\n\r\n      ],\r\n      sha256 = \"2f945446b71336e7f5a2bcace1abcf0b23fbba368266c6a1be33de3de3b3c912\",\r\n      strip_prefix = \"re2-2018-04-01\",\r\n      system_build_file = clean_dep(\"//third_party/systemlibs:re2.BUILD\"),\r\n  )\r\n\r\n  tf_http_archive(\r\n      name = \"com_github_googlecloudplatform_google_cloud_cpp\",\r\n      urls = [\r\n          \"https://mirror.bazel.build/github.com/GoogleCloudPlatform/google-cloud-cpp/archive/f875700a023bdd706333cde45aee8758b272c357.tar.gz\",\r\n          \"https://github.com/GoogleCloudPlatform/google-cloud-cpp/archive/f875700a023bdd706333cde45aee8758b272c357.tar.gz\",\r\n      ],\r\n      sha256 = \"a34f3c50b237686dc870b13baaa6a5836ce3473f2f2a02717299f0ff318372db\",\r\n      strip_prefix = \"google-cloud-cpp-f875700a023bdd706333cde45aee8758b272c357\",\r\n  )\r\n\r\n  tf_http_archive(\r\n      name = \"com_github_googleapis_googleapis\",\r\n      urls = [\r\n          \"https://mirror.bazel.build/github.com/googleapis/googleapis/archive/f81082ea1e2f85c43649bee26e0d9871d4b41cdb.zip\",\r\n          \"https://github.com/googleapis/googleapis/archive/f81082ea1e2f85c43649bee26e0d9871d4b41cdb.zip\",\r\n      ],\r\n      sha256 = \"824870d87a176f26bcef663e92051f532fac756d1a06b404055dc078425f4378\",\r\n      strip_prefix=\"googleapis-f81082ea1e2f85c43649bee26e0d9871d4b41cdb\",\r\n      build_file = clean_dep(\"//third_party:googleapis.BUILD\"),\r\n  )\r\n```\r\n\r\nI continue with \r\nbazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\r\npip install /tmp/tensorflow_pkg/tensorflow-1.9.0rc0-cp34-cp34m-linux_ppc64le.whl\r\n\r\nBut after installation, there is another problem: I've managed to get a TF distribution with nothing in it. \r\n[jingfeng@Jingfeng_redhat ~]$ python3.4\r\n```\r\n>>> import tensorflow as tf\r\n>>> var = tf.Variable(100, name=\"variable_counter\")\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nAttributeError: 'module' object has no attribute 'Variable'\r\n>>> dir(tf)\r\n['__doc__', '__loader__', '__name__', '__package__', '__path__', '__spec__']\r\n```\r\n\r\n"}
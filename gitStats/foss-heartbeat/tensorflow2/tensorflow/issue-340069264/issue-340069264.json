{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20679", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20679/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20679/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20679/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20679", "id": 340069264, "node_id": "MDU6SXNzdWUzNDAwNjkyNjQ=", "number": 20679, "title": "convert the t2t model to tflite error", "user": {"login": "zhonghao0077", "id": 1762698, "node_id": "MDQ6VXNlcjE3NjI2OTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1762698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhonghao0077", "html_url": "https://github.com/zhonghao0077", "followers_url": "https://api.github.com/users/zhonghao0077/followers", "following_url": "https://api.github.com/users/zhonghao0077/following{/other_user}", "gists_url": "https://api.github.com/users/zhonghao0077/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhonghao0077/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhonghao0077/subscriptions", "organizations_url": "https://api.github.com/users/zhonghao0077/orgs", "repos_url": "https://api.github.com/users/zhonghao0077/repos", "events_url": "https://api.github.com/users/zhonghao0077/events{/privacy}", "received_events_url": "https://api.github.com/users/zhonghao0077/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2018-07-11T02:29:16Z", "updated_at": "2018-09-12T19:56:20Z", "closed_at": "2018-09-12T19:56:20Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>Recently I am trying to convert the tensor2tensor machine translation model to android. There showed an error when trying to use tflite-convert tool.<br>\nHere is the error code:</p>\n<pre><code>Traceback (most recent call last):\n  File \"/usr/local/bin/tflite_convert\", line 11, in &lt;module&gt;\n    sys.exit(main())\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 320, in main\n    app.run(main=run_main, argv=sys.argv[:1])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 125, in run\n    _sys.exit(main(argv))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 316, in run_main\n    _convert_model(tflite_flags)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 121, in _convert_model\n    output_data = converter.convert()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/lite.py\", line 309, in convert\n    allow_custom_ops=self.allow_custom_ops)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/convert.py\", line 206, in toco_convert\n    input_tensor.dtype))\nValueError: Tensors serialized_example:0 not known type tf.string\n</code></pre>\n<p>I am using tensorflow 1.9.0rc2, firstly I have convert the original model to saved model with t2t-exporter tool, then the error came out when trying to convert the saved model to tflite model.<br>\nCan someone help me fix this problem? Thanks.</p>\n<hr>\n<p>update<br>\nOS: Ubuntu 16.04<br>\nTensorFlow Install from pip<br>\nTensorFlow version 1.9.0rc2<br>\nBazel version:0.15.0<br>\nCUDA 9.0 cuDNN 7.0<br>\nGPU: Nvidia GTX Titan V 12GB<br>\nI firstly used the following command to export the model<br>\nt2t-exporter \\ --model=transformer \\ --hparams_set=transformer_base_single_gpu \\ --problem=translate_enzh_wmt32k \\ --data_dir=../\\ --output_dir=./<br>\nthen I got the exported model with a new folder \"export\"<br>\nafter that I used the command<br>\ntflite_convert --output_file=example.tflite --saved_model_dir=export/Servo/1531989270/<br>\nNow I got the error I have described before.</p>", "body_text": "Hi,\nRecently I am trying to convert the tensor2tensor machine translation model to android. There showed an error when trying to use tflite-convert tool.\nHere is the error code:\nTraceback (most recent call last):\n  File \"/usr/local/bin/tflite_convert\", line 11, in <module>\n    sys.exit(main())\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 320, in main\n    app.run(main=run_main, argv=sys.argv[:1])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 125, in run\n    _sys.exit(main(argv))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 316, in run_main\n    _convert_model(tflite_flags)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 121, in _convert_model\n    output_data = converter.convert()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/lite.py\", line 309, in convert\n    allow_custom_ops=self.allow_custom_ops)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/convert.py\", line 206, in toco_convert\n    input_tensor.dtype))\nValueError: Tensors serialized_example:0 not known type tf.string\n\nI am using tensorflow 1.9.0rc2, firstly I have convert the original model to saved model with t2t-exporter tool, then the error came out when trying to convert the saved model to tflite model.\nCan someone help me fix this problem? Thanks.\n\nupdate\nOS: Ubuntu 16.04\nTensorFlow Install from pip\nTensorFlow version 1.9.0rc2\nBazel version:0.15.0\nCUDA 9.0 cuDNN 7.0\nGPU: Nvidia GTX Titan V 12GB\nI firstly used the following command to export the model\nt2t-exporter \\ --model=transformer \\ --hparams_set=transformer_base_single_gpu \\ --problem=translate_enzh_wmt32k \\ --data_dir=../\\ --output_dir=./\nthen I got the exported model with a new folder \"export\"\nafter that I used the command\ntflite_convert --output_file=example.tflite --saved_model_dir=export/Servo/1531989270/\nNow I got the error I have described before.", "body": "Hi,\r\n\r\nRecently I am trying to convert the tensor2tensor machine translation model to android. There showed an error when trying to use tflite-convert tool.\r\nHere is the error code:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/tflite_convert\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 320, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 316, in run_main\r\n    _convert_model(tflite_flags)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 121, in _convert_model\r\n    output_data = converter.convert()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/lite.py\", line 309, in convert\r\n    allow_custom_ops=self.allow_custom_ops)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/convert.py\", line 206, in toco_convert\r\n    input_tensor.dtype))\r\nValueError: Tensors serialized_example:0 not known type tf.string\r\n```\r\nI am using tensorflow 1.9.0rc2, firstly I have convert the original model to saved model with t2t-exporter tool, then the error came out when trying to convert the saved model to tflite model. \r\nCan someone help me fix this problem? Thanks.\r\n\r\n-------------------------------------------------\r\nupdate\r\nOS: Ubuntu 16.04\r\nTensorFlow Install from pip\r\nTensorFlow version 1.9.0rc2\r\nBazel version:0.15.0\r\nCUDA 9.0 cuDNN 7.0\r\nGPU: Nvidia GTX Titan V 12GB\r\nI firstly used the following command to export the model\r\nt2t-exporter \\ --model=transformer \\ --hparams_set=transformer_base_single_gpu \\ --problem=translate_enzh_wmt32k \\ --data_dir=../\\ --output_dir=./\r\nthen I got the exported model with a new folder \"export\"\r\nafter that I used the command\r\ntflite_convert --output_file=example.tflite --saved_model_dir=export/Servo/1531989270/\r\nNow I got the error I have described before."}
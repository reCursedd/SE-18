{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17728", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17728/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17728/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17728/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17728", "id": 305394480, "node_id": "MDU6SXNzdWUzMDUzOTQ0ODA=", "number": 17728, "title": "pb-\u300btflite is ok\uff1f", "user": {"login": "zyxcambridge", "id": 1818981, "node_id": "MDQ6VXNlcjE4MTg5ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1818981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyxcambridge", "html_url": "https://github.com/zyxcambridge", "followers_url": "https://api.github.com/users/zyxcambridge/followers", "following_url": "https://api.github.com/users/zyxcambridge/following{/other_user}", "gists_url": "https://api.github.com/users/zyxcambridge/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyxcambridge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyxcambridge/subscriptions", "organizations_url": "https://api.github.com/users/zyxcambridge/orgs", "repos_url": "https://api.github.com/users/zyxcambridge/repos", "events_url": "https://api.github.com/users/zyxcambridge/events{/privacy}", "received_events_url": "https://api.github.com/users/zyxcambridge/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-15T02:32:42Z", "updated_at": "2018-03-15T09:51:18Z", "closed_at": "2018-03-15T09:51:18Z", "author_association": "NONE", "body_html": "<p>bazel run --config=opt <br>\n//tensorflow/contrib/lite/toco:toco -- <br>\n--input_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb <br>\n--output_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb.tflite <br>\n--input_format=TENSORFLOW_GRAPHDEF <br>\n--output_format=TFLITE <br>\n--inference_type=FLOAT <br>\n--input_shape=1,128,128,3 <br>\n--input_array=image <br>\n--output_arrays=Openpose/concat_stage7<br>\nWARNING: Config values are not defined in any .rc file: opt<br>\nWARNING: /home/ubuntu/.cache/bazel/_bazel_ubuntu/bb7db75967eaf264207472309623127f/external/protobuf_archive/WORKSPACE:1: Workspace name in /home/ubuntu/.cache/bazel/_bazel_ubuntu/bb7db75967eaf264207472309623127f/external/protobuf_archive/WORKSPACE (@com_google_protobuf) does not match the name given in the repository's definition (@protobuf_archive); this will cause a build error in future versions<br>\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).<br>\nINFO: Found 1 target...<br>\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:<br>\nbazel-bin/tensorflow/contrib/lite/toco/toco<br>\nINFO: Elapsed time: 0.643s, Critical Path: 0.01s<br>\nINFO: Build completed successfully, 1 total action</p>\n<p>INFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb' '--output_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb.tflite' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--inference_type=FLOAT' '--input_shape=1,128,128,3' '--input_array=image' '--output_arrays=Openpose/concat_stage7'<br>\n2018-03-14 17:06:23.573744: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 426 operators, 649 arrays (0 quantized)<br>\n2018-03-14 17:06:23.590727: I INFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb' '--output_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb.tflite' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--inference_type=FLOAT' '--input_shape=1,128,128,3' '--input_array=image' '--output_arrays=Openpose/concat_stage7'<br>\n2018-03-14 17:06:23.573744: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 426 operators, 649 arrays (0 quantized)<br>\n2018-03-14 17:06:23.590727: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 426 operators, 649 arrays (0 quantized)<br>\n2018-03-14 17:06:23.608262: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 151 operators, 438 arrays (0 quantized)<br>\n2018-03-14 17:06:23.614578: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 151 operators, 438 arrays (0 quantized)<br>\n2018-03-14 17:06:23.620831: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:311] Total transient array allocated size: 3400704 bytes, theoretical optimal value: 1886208 bytes.<br>\n2018-03-14 17:06:23.621951: I tensorflow/contrib/lite/toco/toco_tooling.cc:309] Estimated count of arithmetic ops: 1.03065 billion (note that a multiply-add is counted as 2 ops).</p>\n<p>\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014</p>\n<p>but i run the  tflite get the error</p>\n<p>03-15 10:26:22.109 14024-14074/android.example.com.tflitecamerademo E/AndroidRuntime: FATAL EXCEPTION: CameraBackground<br>\nProcess: android.example.com.tflitecamerademo, PID: 14024<br>\njava.lang.IllegalArgumentException: Failed to get input dimensions. 0-th input should have 196608 bytes, but found 406272 bytes.<br>\nat org.tensorflow.lite.NativeInterpreterWrapper.getInputDims(Native Method)<br>\nat org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:82)<br>\nat org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:112)<br>\nat org.tensorflow.lite.Interpreter.run(Interpreter.java:93)<br>\nat com.example.android.tflitecamerademo.ImageClassifierQuantizedMobileNet.runInference(ImageClassifierQuantizedMobileNet.java:95)<br>\nat com.example.android.tflitecamerademo.ImageClassifier.classifyFrame(ImageClassifier.java:110)<br>\nat com.example.android.tflitecamerademo.Camera2BasicFragment.classifyFrame(Camera2BasicFragment.java:663)<br>\nat com.example.android.tflitecamerademo.Camera2BasicFragment.-wrap0(Camera2BasicFragment.java)<br>\nat com.example.android.tflitecamerademo.Camera2BasicFragment$4.run(Camera2BasicFragment.java:559)<br>\nat android.os.Handler.handleCallback(Handler.java:815)<br>\nat android.os.Handler.dispatchMessage(Handler.java:104)<br>\nat android.os.Looper.loop(Looper.java:207)<br>\nat android.os.HandlerThread.run(HandlerThread.java:61)<br>\n03-15 10:26:22.119 1125-1823/? E/ActivityManager: Invalid thumbnail dimensions: 0x0</p>", "body_text": "bazel run --config=opt \n//tensorflow/contrib/lite/toco:toco -- \n--input_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb \n--output_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb.tflite \n--input_format=TENSORFLOW_GRAPHDEF \n--output_format=TFLITE \n--inference_type=FLOAT \n--input_shape=1,128,128,3 \n--input_array=image \n--output_arrays=Openpose/concat_stage7\nWARNING: Config values are not defined in any .rc file: opt\nWARNING: /home/ubuntu/.cache/bazel/_bazel_ubuntu/bb7db75967eaf264207472309623127f/external/protobuf_archive/WORKSPACE:1: Workspace name in /home/ubuntu/.cache/bazel/_bazel_ubuntu/bb7db75967eaf264207472309623127f/external/protobuf_archive/WORKSPACE (@com_google_protobuf) does not match the name given in the repository's definition (@protobuf_archive); this will cause a build error in future versions\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).\nINFO: Found 1 target...\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:\nbazel-bin/tensorflow/contrib/lite/toco/toco\nINFO: Elapsed time: 0.643s, Critical Path: 0.01s\nINFO: Build completed successfully, 1 total action\nINFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb' '--output_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb.tflite' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--inference_type=FLOAT' '--input_shape=1,128,128,3' '--input_array=image' '--output_arrays=Openpose/concat_stage7'\n2018-03-14 17:06:23.573744: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 426 operators, 649 arrays (0 quantized)\n2018-03-14 17:06:23.590727: I INFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb' '--output_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb.tflite' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--inference_type=FLOAT' '--input_shape=1,128,128,3' '--input_array=image' '--output_arrays=Openpose/concat_stage7'\n2018-03-14 17:06:23.573744: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 426 operators, 649 arrays (0 quantized)\n2018-03-14 17:06:23.590727: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 426 operators, 649 arrays (0 quantized)\n2018-03-14 17:06:23.608262: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 151 operators, 438 arrays (0 quantized)\n2018-03-14 17:06:23.614578: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 151 operators, 438 arrays (0 quantized)\n2018-03-14 17:06:23.620831: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:311] Total transient array allocated size: 3400704 bytes, theoretical optimal value: 1886208 bytes.\n2018-03-14 17:06:23.621951: I tensorflow/contrib/lite/toco/toco_tooling.cc:309] Estimated count of arithmetic ops: 1.03065 billion (note that a multiply-add is counted as 2 ops).\n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\nbut i run the  tflite get the error\n03-15 10:26:22.109 14024-14074/android.example.com.tflitecamerademo E/AndroidRuntime: FATAL EXCEPTION: CameraBackground\nProcess: android.example.com.tflitecamerademo, PID: 14024\njava.lang.IllegalArgumentException: Failed to get input dimensions. 0-th input should have 196608 bytes, but found 406272 bytes.\nat org.tensorflow.lite.NativeInterpreterWrapper.getInputDims(Native Method)\nat org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:82)\nat org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:112)\nat org.tensorflow.lite.Interpreter.run(Interpreter.java:93)\nat com.example.android.tflitecamerademo.ImageClassifierQuantizedMobileNet.runInference(ImageClassifierQuantizedMobileNet.java:95)\nat com.example.android.tflitecamerademo.ImageClassifier.classifyFrame(ImageClassifier.java:110)\nat com.example.android.tflitecamerademo.Camera2BasicFragment.classifyFrame(Camera2BasicFragment.java:663)\nat com.example.android.tflitecamerademo.Camera2BasicFragment.-wrap0(Camera2BasicFragment.java)\nat com.example.android.tflitecamerademo.Camera2BasicFragment$4.run(Camera2BasicFragment.java:559)\nat android.os.Handler.handleCallback(Handler.java:815)\nat android.os.Handler.dispatchMessage(Handler.java:104)\nat android.os.Looper.loop(Looper.java:207)\nat android.os.HandlerThread.run(HandlerThread.java:61)\n03-15 10:26:22.119 1125-1823/? E/ActivityManager: Invalid thumbnail dimensions: 0x0", "body": "bazel run --config=opt \\\r\n  //tensorflow/contrib/lite/toco:toco -- \\\r\n --input_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb \\\r\n --output_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb.tflite \\\r\n--input_format=TENSORFLOW_GRAPHDEF \\\r\n --output_format=TFLITE \\\r\n--inference_type=FLOAT \\\r\n--input_shape=1,128,128,3 \\\r\n --input_array=image \\\r\n--output_arrays=Openpose/concat_stage7\r\nWARNING: Config values are not defined in any .rc file: opt\r\nWARNING: /home/ubuntu/.cache/bazel/_bazel_ubuntu/bb7db75967eaf264207472309623127f/external/protobuf_archive/WORKSPACE:1: Workspace name in /home/ubuntu/.cache/bazel/_bazel_ubuntu/bb7db75967eaf264207472309623127f/external/protobuf_archive/WORKSPACE (@com_google_protobuf) does not match the name given in the repository's definition (@protobuf_archive); this will cause a build error in future versions\r\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).\r\nINFO: Found 1 target...\r\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:\r\n  bazel-bin/tensorflow/contrib/lite/toco/toco\r\nINFO: Elapsed time: 0.643s, Critical Path: 0.01s\r\nINFO: Build completed successfully, 1 total action\r\n\r\nINFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb' '--output_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb.tflite' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--inference_type=FLOAT' '--input_shape=1,128,128,3' '--input_array=image' '--output_arrays=Openpose/concat_stage7'\r\n2018-03-14 17:06:23.573744: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 426 operators, 649 arrays (0 quantized)\r\n2018-03-14 17:06:23.590727: I INFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb' '--output_file=/home/ubuntu/Desktop/code/tensorflow/graph_opt.pb.tflite' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--inference_type=FLOAT' '--input_shape=1,128,128,3' '--input_array=image' '--output_arrays=Openpose/concat_stage7'\r\n2018-03-14 17:06:23.573744: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 426 operators, 649 arrays (0 quantized)\r\n2018-03-14 17:06:23.590727: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 426 operators, 649 arrays (0 quantized)\r\n2018-03-14 17:06:23.608262: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 151 operators, 438 arrays (0 quantized)\r\n2018-03-14 17:06:23.614578: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 151 operators, 438 arrays (0 quantized)\r\n2018-03-14 17:06:23.620831: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:311] Total transient array allocated size: 3400704 bytes, theoretical optimal value: 1886208 bytes.\r\n2018-03-14 17:06:23.621951: I tensorflow/contrib/lite/toco/toco_tooling.cc:309] Estimated count of arithmetic ops: 1.03065 billion (note that a multiply-add is counted as 2 ops).\r\n\r\n\r\n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\r\n\r\n\r\nbut i run the  tflite get the error\r\n\r\n\r\n03-15 10:26:22.109 14024-14074/android.example.com.tflitecamerademo E/AndroidRuntime: FATAL EXCEPTION: CameraBackground\r\n                                                                                      Process: android.example.com.tflitecamerademo, PID: 14024\r\n                                                                                      java.lang.IllegalArgumentException: Failed to get input dimensions. 0-th input should have 196608 bytes, but found 406272 bytes.\r\n                                                                                          at org.tensorflow.lite.NativeInterpreterWrapper.getInputDims(Native Method)\r\n                                                                                          at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:82)\r\n                                                                                          at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:112)\r\n                                                                                          at org.tensorflow.lite.Interpreter.run(Interpreter.java:93)\r\n                                                                                          at com.example.android.tflitecamerademo.ImageClassifierQuantizedMobileNet.runInference(ImageClassifierQuantizedMobileNet.java:95)\r\n                                                                                          at com.example.android.tflitecamerademo.ImageClassifier.classifyFrame(ImageClassifier.java:110)\r\n                                                                                          at com.example.android.tflitecamerademo.Camera2BasicFragment.classifyFrame(Camera2BasicFragment.java:663)\r\n                                                                                          at com.example.android.tflitecamerademo.Camera2BasicFragment.-wrap0(Camera2BasicFragment.java)\r\n                                                                                          at com.example.android.tflitecamerademo.Camera2BasicFragment$4.run(Camera2BasicFragment.java:559)\r\n                                                                                          at android.os.Handler.handleCallback(Handler.java:815)\r\n                                                                                          at android.os.Handler.dispatchMessage(Handler.java:104)\r\n                                                                                          at android.os.Looper.loop(Looper.java:207)\r\n                                                                                          at android.os.HandlerThread.run(HandlerThread.java:61)\r\n03-15 10:26:22.119 1125-1823/? E/ActivityManager: Invalid thumbnail dimensions: 0x0\r\n\r\n"}
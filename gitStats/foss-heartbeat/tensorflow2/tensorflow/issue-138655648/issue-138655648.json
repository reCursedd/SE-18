{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1390", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1390/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1390/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1390/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1390", "id": 138655648, "node_id": "MDU6SXNzdWUxMzg2NTU2NDg=", "number": 1390, "title": "Attempting to use uninitialized value lstm/LSTMCell/W_0", "user": {"login": "shiyemin", "id": 1501158, "node_id": "MDQ6VXNlcjE1MDExNTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1501158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shiyemin", "html_url": "https://github.com/shiyemin", "followers_url": "https://api.github.com/users/shiyemin/followers", "following_url": "https://api.github.com/users/shiyemin/following{/other_user}", "gists_url": "https://api.github.com/users/shiyemin/gists{/gist_id}", "starred_url": "https://api.github.com/users/shiyemin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shiyemin/subscriptions", "organizations_url": "https://api.github.com/users/shiyemin/orgs", "repos_url": "https://api.github.com/users/shiyemin/repos", "events_url": "https://api.github.com/users/shiyemin/events{/privacy}", "received_events_url": "https://api.github.com/users/shiyemin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "lukaszkaiser", "id": 684901, "node_id": "MDQ6VXNlcjY4NDkwMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/684901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukaszkaiser", "html_url": "https://github.com/lukaszkaiser", "followers_url": "https://api.github.com/users/lukaszkaiser/followers", "following_url": "https://api.github.com/users/lukaszkaiser/following{/other_user}", "gists_url": "https://api.github.com/users/lukaszkaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukaszkaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukaszkaiser/subscriptions", "organizations_url": "https://api.github.com/users/lukaszkaiser/orgs", "repos_url": "https://api.github.com/users/lukaszkaiser/repos", "events_url": "https://api.github.com/users/lukaszkaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/lukaszkaiser/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lukaszkaiser", "id": 684901, "node_id": "MDQ6VXNlcjY4NDkwMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/684901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukaszkaiser", "html_url": "https://github.com/lukaszkaiser", "followers_url": "https://api.github.com/users/lukaszkaiser/followers", "following_url": "https://api.github.com/users/lukaszkaiser/following{/other_user}", "gists_url": "https://api.github.com/users/lukaszkaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukaszkaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukaszkaiser/subscriptions", "organizations_url": "https://api.github.com/users/lukaszkaiser/orgs", "repos_url": "https://api.github.com/users/lukaszkaiser/repos", "events_url": "https://api.github.com/users/lukaszkaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/lukaszkaiser/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 20, "created_at": "2016-03-05T06:56:34Z", "updated_at": "2018-03-27T13:09:56Z", "closed_at": "2016-03-10T00:37:04Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System: Rocks OS (Centos 6.5)</p>\n<p>I installed from sources, and here is my version:<br>\n<a href=\"https://github.com/shiyemin/tensorflow/\">https://github.com/shiyemin/tensorflow/</a><br>\nNothing changed but to make it compile successfully on our server.</p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>\n<p>add a LSTM layer between local3 and local4 in cifar10.py</p>\n<pre><code># lstm\nwith tf.variable_scope('lstm') as scope:\n  lstm_cell = rnn_cell.LSTMCell(512, input_size=384)\n  feed_in = tf.split(0, 16, local3)\n  outputs, states = rnn.rnn(lstm_cell, feed_in, scope=scope, dtype=tf.float32)\n  lstm1 = tf.concat(0, outputs)\n\n# local4\nwith tf.variable_scope('local4') as scope:\n  weights = _variable_with_weight_decay('weights', shape=[512, 192],\n                                        stddev=0.04, wd=0.004)\n  biases = _variable_on_cpu('biases', [192], tf.constant_initializer(0.1))\n  local4 = tf.nn.relu(tf.matmul(lstm1, weights) + biases, name=scope.name)\n  _activation_summary(local4)\n</code></pre>\n</li>\n<li>\n<p>run cifar10_multi_gpu_train.py</p>\n</li>\n<li>\n<p>Error: Attempting to use uninitialized value lstm/LSTMCell/W_0</p>\n</li>\n</ol>\n<h3>What have you tried?</h3>\n<ol>\n<li>Run this network in Test mode, and everything is fine.</li>\n<li>Run this network in Train mode, error \"Attempting to use uninitialized value lstm/LSTMCell/W_0\" occurs.</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>I tensorflow/core/common_runtime/gpu/gpu_bfc_allocator.cc:107] Allocating 10.60GiB bytes.<br>\nI tensorflow/core/common_runtime/gpu/gpu_bfc_allocator.cc:118] GPU 0 memory begins at 0x23ee00000 extends to 0x4e573199a<br>\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0<br>\n[[Node: lstm/LSTMCell/W_0/_9 = _Send<a href=\"lstm/LSTMCell/W_0\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\n[[Node: Identity_7/_8 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_267_Identity_7\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0<br>\n[[Node: lstm/LSTMCell/W_0/_9 = _Send<a href=\"lstm/LSTMCell/W_0\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\n[[Node: Identity_6/_16 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_295_Identity_6\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb255bf0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0<br>\n[[Node: lstm/LSTMCell/W_0/_9 = _Send<a href=\"lstm/LSTMCell/W_0\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\n[[Node: lstm/LSTMCell/B/Assign/_5 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_265_lstm/LSTMCell/B/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb255bf0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0<br>\n[[Node: lstm/LSTMCell/W_0/_9 = _Send<a href=\"lstm/LSTMCell/W_0\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\n[[Node: lstm/LSTMCell/W_0/Assign/_13 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_293_lstm/LSTMCell/W_0/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb255bf0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0<br>\n[[Node: lstm/LSTMCell/W_0/_9 = _Send<a href=\"lstm/LSTMCell/W_0\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\n[[Node: init/NoOp_1/_19 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_5848_init/NoOp_1\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0<br>\n[[Node: lstm/LSTMCell/W_0/_9 = _Send<a href=\"lstm/LSTMCell/W_0\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\n[[Node: lstm/LSTMCell/B/Assign/_4 = _Send<a href=\"lstm/LSTMCell/B/Assign/_3\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_265_lstm/LSTMCell/B/Assign\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0<br>\n[[Node: lstm/LSTMCell/W_0/_9 = _Send<a href=\"lstm/LSTMCell/W_0\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\n[[Node: lstm/LSTMCell/W_0/Assign/_12 = _Send<a href=\"lstm/LSTMCell/W_0/Assign/_11\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_293_lstm/LSTMCell/W_0/Assign\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\nTraceback (most recent call last):<br>\nFile \"cifar10_multi_gpu_train.py\", line 282, in <br>\ntf.app.run()<br>\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/platform/default/_app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"cifar10_multi_gpu_train.py\", line 278, in main<br>\ntrain()<br>\nFile \"cifar10_multi_gpu_train.py\", line 237, in train<br>\nsess.run(init)<br>\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 315, in run<br>\nreturn self._run(None, fetches, feed_dict)<br>\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 511, in _run<br>\nfeed_dict_string)<br>\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 564, in _do_run<br>\ntarget_list)<br>\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 586, in _do_call<br>\ne.code)<br>\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value lstm/LSTMCell/W_0<br>\n[[Node: lstm/LSTMCell/W_0/_9 = _Send<a href=\"lstm/LSTMCell/W_0\">T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"</a>]]<br>\n[[Node: lstm/LSTMCell/B/Assign/_5 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_265_lstm/LSTMCell/B/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]</p>", "body_text": "Environment info\nOperating System: Rocks OS (Centos 6.5)\nI installed from sources, and here is my version:\nhttps://github.com/shiyemin/tensorflow/\nNothing changed but to make it compile successfully on our server.\nSteps to reproduce\n\n\nadd a LSTM layer between local3 and local4 in cifar10.py\n# lstm\nwith tf.variable_scope('lstm') as scope:\n  lstm_cell = rnn_cell.LSTMCell(512, input_size=384)\n  feed_in = tf.split(0, 16, local3)\n  outputs, states = rnn.rnn(lstm_cell, feed_in, scope=scope, dtype=tf.float32)\n  lstm1 = tf.concat(0, outputs)\n\n# local4\nwith tf.variable_scope('local4') as scope:\n  weights = _variable_with_weight_decay('weights', shape=[512, 192],\n                                        stddev=0.04, wd=0.004)\n  biases = _variable_on_cpu('biases', [192], tf.constant_initializer(0.1))\n  local4 = tf.nn.relu(tf.matmul(lstm1, weights) + biases, name=scope.name)\n  _activation_summary(local4)\n\n\n\nrun cifar10_multi_gpu_train.py\n\n\nError: Attempting to use uninitialized value lstm/LSTMCell/W_0\n\n\nWhat have you tried?\n\nRun this network in Test mode, and everything is fine.\nRun this network in Train mode, error \"Attempting to use uninitialized value lstm/LSTMCell/W_0\" occurs.\n\nLogs or other output that would be helpful\nI tensorflow/core/common_runtime/gpu/gpu_bfc_allocator.cc:107] Allocating 10.60GiB bytes.\nI tensorflow/core/common_runtime/gpu/gpu_bfc_allocator.cc:118] GPU 0 memory begins at 0x23ee00000 extends to 0x4e573199a\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n[[Node: lstm/LSTMCell/W_0/_9 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\n[[Node: Identity_7/_8 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_267_Identity_7\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n[[Node: lstm/LSTMCell/W_0/_9 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\n[[Node: Identity_6/_16 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_295_Identity_6\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb255bf0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n[[Node: lstm/LSTMCell/W_0/_9 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\n[[Node: lstm/LSTMCell/B/Assign/_5 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_265_lstm/LSTMCell/B/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb255bf0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n[[Node: lstm/LSTMCell/W_0/_9 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\n[[Node: lstm/LSTMCell/W_0/Assign/_13 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_293_lstm/LSTMCell/W_0/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb255bf0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n[[Node: lstm/LSTMCell/W_0/_9 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\n[[Node: init/NoOp_1/_19 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_5848_init/NoOp_1\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n[[Node: lstm/LSTMCell/W_0/_9 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\n[[Node: lstm/LSTMCell/B/Assign/_4 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_265_lstm/LSTMCell/B/Assign\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n[[Node: lstm/LSTMCell/W_0/_9 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\n[[Node: lstm/LSTMCell/W_0/Assign/_12 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_293_lstm/LSTMCell/W_0/Assign\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\nTraceback (most recent call last):\nFile \"cifar10_multi_gpu_train.py\", line 282, in \ntf.app.run()\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/platform/default/_app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"cifar10_multi_gpu_train.py\", line 278, in main\ntrain()\nFile \"cifar10_multi_gpu_train.py\", line 237, in train\nsess.run(init)\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 315, in run\nreturn self._run(None, fetches, feed_dict)\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 511, in _run\nfeed_dict_string)\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 564, in _do_run\ntarget_list)\nFile \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 586, in _do_call\ne.code)\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value lstm/LSTMCell/W_0\n[[Node: lstm/LSTMCell/W_0/_9 = _SendT=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"]]\n[[Node: lstm/LSTMCell/B/Assign/_5 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_265_lstm/LSTMCell/B/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]", "body": "### Environment info\n\nOperating System: Rocks OS (Centos 6.5)\n\nI installed from sources, and here is my version:\nhttps://github.com/shiyemin/tensorflow/\nNothing changed but to make it compile successfully on our server.\n### Steps to reproduce\n1. add a LSTM layer between local3 and local4 in cifar10.py\n   \n   ```\n   # lstm\n   with tf.variable_scope('lstm') as scope:\n     lstm_cell = rnn_cell.LSTMCell(512, input_size=384)\n     feed_in = tf.split(0, 16, local3)\n     outputs, states = rnn.rnn(lstm_cell, feed_in, scope=scope, dtype=tf.float32)\n     lstm1 = tf.concat(0, outputs)\n   \n   # local4\n   with tf.variable_scope('local4') as scope:\n     weights = _variable_with_weight_decay('weights', shape=[512, 192],\n                                           stddev=0.04, wd=0.004)\n     biases = _variable_on_cpu('biases', [192], tf.constant_initializer(0.1))\n     local4 = tf.nn.relu(tf.matmul(lstm1, weights) + biases, name=scope.name)\n     _activation_summary(local4)\n   ```\n2. run cifar10_multi_gpu_train.py\n3. Error: Attempting to use uninitialized value lstm/LSTMCell/W_0\n### What have you tried?\n1. Run this network in Test mode, and everything is fine. \n2. Run this network in Train mode, error \"Attempting to use uninitialized value lstm/LSTMCell/W_0\" occurs.\n### Logs or other output that would be helpful\n\nI tensorflow/core/common_runtime/gpu/gpu_bfc_allocator.cc:107] Allocating 10.60GiB bytes.\nI tensorflow/core/common_runtime/gpu/gpu_bfc_allocator.cc:118] GPU 0 memory begins at 0x23ee00000 extends to 0x4e573199a\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n     [[Node: lstm/LSTMCell/W_0/_9 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/W_0)]]\n     [[Node: Identity_7/_8 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_267_Identity_7\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n     [[Node: lstm/LSTMCell/W_0/_9 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/W_0)]]\n     [[Node: Identity_6/_16 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_295_Identity_6\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb255bf0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n     [[Node: lstm/LSTMCell/W_0/_9 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/W_0)]]\n     [[Node: lstm/LSTMCell/B/Assign/_5 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_265_lstm/LSTMCell/B/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb255bf0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n     [[Node: lstm/LSTMCell/W_0/_9 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/W_0)]]\n     [[Node: lstm/LSTMCell/W_0/Assign/_13 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_293_lstm/LSTMCell/W_0/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb255bf0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n     [[Node: lstm/LSTMCell/W_0/_9 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/W_0)]]\n     [[Node: init/NoOp_1/_19 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_5848_init/NoOp_1\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n     [[Node: lstm/LSTMCell/W_0/_9 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/W_0)]]\n     [[Node: lstm/LSTMCell/B/Assign/_4 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_265_lstm/LSTMCell/B/Assign\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/B/Assign/_3)]]\nW tensorflow/core/common_runtime/executor.cc:1221] 0xb26c6f0 Compute status: Failed precondition: Attempting to use uninitialized value lstm/LSTMCell/W_0\n     [[Node: lstm/LSTMCell/W_0/_9 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/W_0)]]\n     [[Node: lstm/LSTMCell/W_0/Assign/_12 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_293_lstm/LSTMCell/W_0/Assign\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/W_0/Assign/_11)]]\nTraceback (most recent call last):\n  File \"cifar10_multi_gpu_train.py\", line 282, in <module>\n    tf.app.run()\n  File \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/platform/default/_app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"cifar10_multi_gpu_train.py\", line 278, in main\n    train()\n  File \"cifar10_multi_gpu_train.py\", line 237, in train\n    sess.run(init)\n  File \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 315, in run\n    return self._run(None, fetches, feed_dict)\n  File \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 511, in _run\n    feed_dict_string)\n  File \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 564, in _do_run\n    target_list)\n  File \"/home/shiyemin/code/tensorflow/_python_build/tensorflow/python/client/session.py\", line 586, in _do_call\n    e.code)\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value lstm/LSTMCell/W_0\n     [[Node: lstm/LSTMCell/W_0/_9 = _Send[T=DT_FLOAT, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_292_lstm/LSTMCell/W_0\", _device=\"/job:localhost/replica:0/task:0/gpu:0\"](lstm/LSTMCell/W_0)]]\n     [[Node: lstm/LSTMCell/B/Assign/_5 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_265_lstm/LSTMCell/B/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\n"}
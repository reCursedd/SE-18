{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/242896098", "html_url": "https://github.com/tensorflow/tensorflow/issues/1390#issuecomment-242896098", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1390", "id": 242896098, "node_id": "MDEyOklzc3VlQ29tbWVudDI0Mjg5NjA5OA==", "user": {"login": "hashbangCoder", "id": 16652882, "node_id": "MDQ6VXNlcjE2NjUyODgy", "avatar_url": "https://avatars3.githubusercontent.com/u/16652882?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hashbangCoder", "html_url": "https://github.com/hashbangCoder", "followers_url": "https://api.github.com/users/hashbangCoder/followers", "following_url": "https://api.github.com/users/hashbangCoder/following{/other_user}", "gists_url": "https://api.github.com/users/hashbangCoder/gists{/gist_id}", "starred_url": "https://api.github.com/users/hashbangCoder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hashbangCoder/subscriptions", "organizations_url": "https://api.github.com/users/hashbangCoder/orgs", "repos_url": "https://api.github.com/users/hashbangCoder/repos", "events_url": "https://api.github.com/users/hashbangCoder/events{/privacy}", "received_events_url": "https://api.github.com/users/hashbangCoder/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-27T04:53:47Z", "updated_at": "2016-08-27T04:53:47Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1501158\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/shiyemin\">@shiyemin</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=684901\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/lukaszkaiser\">@lukaszkaiser</a><br>\nHi,<br>\nI have the same issue but with GRUCell using dynamic_rnn. I'm using them in a slightly modified seq-seq model. To be sure you're solution was something like this ? :</p>\n<pre><code>gru_cell = rnn_cell.GRUCell(1000)\nwith tf.device('/cpu:0'):    \n    output,final_state = rnn.dynamic_rnn(gru_cell,decoder_batch,initial_state = encoder_state,sequence_length = lens)\n</code></pre>\n<p>Its not working for me :/</p>\n<p>Relevant error stack -</p>\n<pre><code>tensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value seqToseq/RNN/GRUCell/Candidate/Linear/Matrix\n         [[Node: seqToseq/RNN/GRUCell/Candidate/Linear/Matrix/read = Identity[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](seqT\noseq/RNN/GRUCell/Candidate/Linear/Matrix)]]\nCaused by op u'seqToseq/RNN/GRUCell/Candidate/Linear/Matrix/read', defined at:\n\nFile \"chatbot.py\", line 85, in &lt;module&gt;\n    output,final_state = rnn.dynamic_rnn(gru_cell,decoder_batch,initial_state = encoder_state,sequence_length = decoder_lens)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 580, in dynamic_rnn\n    swap_memory=swap_memory, sequence_length=sequence_length)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 709, in _dynamic_rnn_loop\n    swap_memory=swap_memory)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1873, in while_loop\n    result = context.BuildLoop(cond, body, loop_vars)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1749, in BuildLoop\n    body_result = body(*vars_for_body_with_tensor_arrays)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 692, in _time_step\n    skip_conditionals=True)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 326, in _rnn_step\n    new_output, new_state = call_cell()\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 680, in &lt;lambda&gt;\n    call_cell = lambda: cell(input_t, state)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn_cell.py\", line 266, in __call__\n    self._num_units, True))\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn_cell.py\", line 910, in _linear\n    matrix = vs.get_variable(\"Matrix\", [total_arg_size, output_size])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 732, in get_variable\n    partitioner=partitioner, validate_shape=validate_shape)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 161, in get_variable\n    caching_device=caching_device, validate_shape=validate_shape)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 478, in _get_single_variable\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 211, in __init__\n    dtype=dtype)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 316, in _init_from_args\n    self._snapshot = array_ops.identity(self._variable, name=\"read\")\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 831, in identity\n    result = _op_def_lib.apply_op(\"Identity\", input=input, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 704, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2260, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1230, in __init__\n    self._traceback = _extract_stack()\n</code></pre>", "body_text": "@shiyemin @lukaszkaiser\nHi,\nI have the same issue but with GRUCell using dynamic_rnn. I'm using them in a slightly modified seq-seq model. To be sure you're solution was something like this ? :\ngru_cell = rnn_cell.GRUCell(1000)\nwith tf.device('/cpu:0'):    \n    output,final_state = rnn.dynamic_rnn(gru_cell,decoder_batch,initial_state = encoder_state,sequence_length = lens)\n\nIts not working for me :/\nRelevant error stack -\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value seqToseq/RNN/GRUCell/Candidate/Linear/Matrix\n         [[Node: seqToseq/RNN/GRUCell/Candidate/Linear/Matrix/read = Identity[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](seqT\noseq/RNN/GRUCell/Candidate/Linear/Matrix)]]\nCaused by op u'seqToseq/RNN/GRUCell/Candidate/Linear/Matrix/read', defined at:\n\nFile \"chatbot.py\", line 85, in <module>\n    output,final_state = rnn.dynamic_rnn(gru_cell,decoder_batch,initial_state = encoder_state,sequence_length = decoder_lens)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 580, in dynamic_rnn\n    swap_memory=swap_memory, sequence_length=sequence_length)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 709, in _dynamic_rnn_loop\n    swap_memory=swap_memory)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1873, in while_loop\n    result = context.BuildLoop(cond, body, loop_vars)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1749, in BuildLoop\n    body_result = body(*vars_for_body_with_tensor_arrays)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 692, in _time_step\n    skip_conditionals=True)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 326, in _rnn_step\n    new_output, new_state = call_cell()\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 680, in <lambda>\n    call_cell = lambda: cell(input_t, state)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn_cell.py\", line 266, in __call__\n    self._num_units, True))\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn_cell.py\", line 910, in _linear\n    matrix = vs.get_variable(\"Matrix\", [total_arg_size, output_size])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 732, in get_variable\n    partitioner=partitioner, validate_shape=validate_shape)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 161, in get_variable\n    caching_device=caching_device, validate_shape=validate_shape)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 478, in _get_single_variable\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 211, in __init__\n    dtype=dtype)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 316, in _init_from_args\n    self._snapshot = array_ops.identity(self._variable, name=\"read\")\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 831, in identity\n    result = _op_def_lib.apply_op(\"Identity\", input=input, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 704, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2260, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1230, in __init__\n    self._traceback = _extract_stack()", "body": "@shiyemin @lukaszkaiser \nHi, \nI have the same issue but with GRUCell using dynamic_rnn. I'm using them in a slightly modified seq-seq model. To be sure you're solution was something like this ? : \n\n```\ngru_cell = rnn_cell.GRUCell(1000)\nwith tf.device('/cpu:0'):    \n    output,final_state = rnn.dynamic_rnn(gru_cell,decoder_batch,initial_state = encoder_state,sequence_length = lens)\n```\n\nIts not working for me :/\n\nRelevant error stack - \n\n```\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value seqToseq/RNN/GRUCell/Candidate/Linear/Matrix\n         [[Node: seqToseq/RNN/GRUCell/Candidate/Linear/Matrix/read = Identity[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](seqT\noseq/RNN/GRUCell/Candidate/Linear/Matrix)]]\nCaused by op u'seqToseq/RNN/GRUCell/Candidate/Linear/Matrix/read', defined at:\n\nFile \"chatbot.py\", line 85, in <module>\n    output,final_state = rnn.dynamic_rnn(gru_cell,decoder_batch,initial_state = encoder_state,sequence_length = decoder_lens)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 580, in dynamic_rnn\n    swap_memory=swap_memory, sequence_length=sequence_length)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 709, in _dynamic_rnn_loop\n    swap_memory=swap_memory)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1873, in while_loop\n    result = context.BuildLoop(cond, body, loop_vars)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1749, in BuildLoop\n    body_result = body(*vars_for_body_with_tensor_arrays)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 692, in _time_step\n    skip_conditionals=True)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 326, in _rnn_step\n    new_output, new_state = call_cell()\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn.py\", line 680, in <lambda>\n    call_cell = lambda: cell(input_t, state)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn_cell.py\", line 266, in __call__\n    self._num_units, True))\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/rnn_cell.py\", line 910, in _linear\n    matrix = vs.get_variable(\"Matrix\", [total_arg_size, output_size])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 732, in get_variable\n    partitioner=partitioner, validate_shape=validate_shape)\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 161, in get_variable\n    caching_device=caching_device, validate_shape=validate_shape)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 478, in _get_single_variable\n\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 211, in __init__\n    dtype=dtype)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 316, in _init_from_args\n    self._snapshot = array_ops.identity(self._variable, name=\"read\")\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 831, in identity\n    result = _op_def_lib.apply_op(\"Identity\", input=input, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 704, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2260, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1230, in __init__\n    self._traceback = _extract_stack()\n```\n"}
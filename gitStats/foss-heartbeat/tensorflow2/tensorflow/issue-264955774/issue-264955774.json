{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13664", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13664/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13664/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13664/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13664", "id": 264955774, "node_id": "MDU6SXNzdWUyNjQ5NTU3NzQ=", "number": 13664, "title": "MaxPoolingOp only supports NHWC. ERROR in my benchmark we would use NCHW dataformat", "user": {"login": "Leslie-Fang", "id": 16850179, "node_id": "MDQ6VXNlcjE2ODUwMTc5", "avatar_url": "https://avatars2.githubusercontent.com/u/16850179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Leslie-Fang", "html_url": "https://github.com/Leslie-Fang", "followers_url": "https://api.github.com/users/Leslie-Fang/followers", "following_url": "https://api.github.com/users/Leslie-Fang/following{/other_user}", "gists_url": "https://api.github.com/users/Leslie-Fang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Leslie-Fang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Leslie-Fang/subscriptions", "organizations_url": "https://api.github.com/users/Leslie-Fang/orgs", "repos_url": "https://api.github.com/users/Leslie-Fang/repos", "events_url": "https://api.github.com/users/Leslie-Fang/events{/privacy}", "received_events_url": "https://api.github.com/users/Leslie-Fang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-10-12T14:07:22Z", "updated_at": "2018-07-11T06:19:52Z", "closed_at": "2017-10-13T18:25:34Z", "author_association": "NONE", "body_html": "<p>Please go to Stack Overflow for help and support:</p>\n<p><a href=\"https://stackoverflow.com/questions/tagged/tensorflow\" rel=\"nofollow\">https://stackoverflow.com/questions/tagged/tensorflow</a></p>\n<p>If you open a GitHub issue, here is our policy:</p>\n<ol>\n<li>It must be a bug or a feature request.</li>\n<li>The form below must be filled out.</li>\n<li>It shouldn't be a TensorBoard issue. Those go <a href=\"https://github.com/tensorflow/tensorboard/issues\">here</a>.</li>\n</ol>\n<p><strong>Here's why we have that policy</strong>: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.</p>\n<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 17.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4.0-rc0</li>\n<li><strong>Python version</strong>: 2.7.13</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.6.1</li>\n<li><strong>CUDA/cuDNN version</strong>:</li>\n<li><strong>GPU model and memory</strong>:</li>\n<li><strong>Exact command to reproduce</strong>:<br>\n<strong>numactl -m 1 python ./tensorflow/models/image/convnet-benchmark-alexnet/benchmark_alexnet_MKL.py --batch_size 256 --num_batches 100 -forward_backward_only --cpu knl 2&gt;&amp;1|tee tensorflow_alexnet_mkl.txt</strong></li>\n</ul>\n<p>You can collect some of this information using our environment capture script:</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\">https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh</a></p>\n<p>You can obtain the TensorFlow version with</p>\n<p>python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"</p>\n<h3>Describe the problem</h3>\n<p>Describe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.</p>\n<p>I have compiled tensorflow with bazel 0.6.1 and install it on my xeon phi TM platform.<br>\nMeanwhile I have got a benchmark related with alexnet.</p>\n<p>When I run the benchmark I got the error:<br>\n<em>2017-10-12 09:38:14.503463: E tensorflow/core/common_runtime/executor.cc:643] Executor failed to create kernel. Invalid argument: Default MaxPoolingOp only supports NHWC.<br>\n[[Node: pool1 = MaxPool<a href=\"conv1\">T=DT_FLOAT, data_format=\"NCHW\", ksize=[1, 1, 3, 3], padding=\"VALID\", strides=[1, 1, 2, 2], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"</a>]]</em></p>\n<p>Also I find that in the benchmark, it has take both <strong>\"NCHW\"</strong> and <strong>\"NHWC\"</strong> data format into consideration. So the benchmark should support both data format.<br>\nI couldn't figure out why,  is this error relates with out compile process, or might I need to add some other option into the compile process.<br>\nHere is my compile command:</p>\n<p><em>bazel build --config=mkl --copt=\"-g\" --copt=\"-DEIGEN_USE_VML\" --copt=\"-mavx2\" --copt=\"-mfma\" --copt=\"-O3\" --verbose_failures  --copt=\"-L/opt/intel/gcc/lib64\" -s -c opt //tensorflow/tools/pip_package:build_pip_package</em></p>\n<p>anyone could help!</p>\n<h3>Source code / logs</h3>\n<p>Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.</p>", "body_text": "Please go to Stack Overflow for help and support:\nhttps://stackoverflow.com/questions/tagged/tensorflow\nIf you open a GitHub issue, here is our policy:\n\nIt must be a bug or a feature request.\nThe form below must be filled out.\nIt shouldn't be a TensorBoard issue. Those go here.\n\nHere's why we have that policy: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\n\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 17.04\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 1.4.0-rc0\nPython version: 2.7.13\nBazel version (if compiling from source): 0.6.1\nCUDA/cuDNN version:\nGPU model and memory:\nExact command to reproduce:\nnumactl -m 1 python ./tensorflow/models/image/convnet-benchmark-alexnet/benchmark_alexnet_MKL.py --batch_size 256 --num_batches 100 -forward_backward_only --cpu knl 2>&1|tee tensorflow_alexnet_mkl.txt\n\nYou can collect some of this information using our environment capture script:\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\nYou can obtain the TensorFlow version with\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\nDescribe the problem\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\nI have compiled tensorflow with bazel 0.6.1 and install it on my xeon phi TM platform.\nMeanwhile I have got a benchmark related with alexnet.\nWhen I run the benchmark I got the error:\n2017-10-12 09:38:14.503463: E tensorflow/core/common_runtime/executor.cc:643] Executor failed to create kernel. Invalid argument: Default MaxPoolingOp only supports NHWC.\n[[Node: pool1 = MaxPoolT=DT_FLOAT, data_format=\"NCHW\", ksize=[1, 1, 3, 3], padding=\"VALID\", strides=[1, 1, 2, 2], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]]\nAlso I find that in the benchmark, it has take both \"NCHW\" and \"NHWC\" data format into consideration. So the benchmark should support both data format.\nI couldn't figure out why,  is this error relates with out compile process, or might I need to add some other option into the compile process.\nHere is my compile command:\nbazel build --config=mkl --copt=\"-g\" --copt=\"-DEIGEN_USE_VML\" --copt=\"-mavx2\" --copt=\"-mfma\" --copt=\"-O3\" --verbose_failures  --copt=\"-L/opt/intel/gcc/lib64\" -s -c opt //tensorflow/tools/pip_package:build_pip_package\nanyone could help!\nSource code / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.", "body": "Please go to Stack Overflow for help and support:\r\n\r\nhttps://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug or a feature request.\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 17.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.4.0-rc0\r\n- **Python version**: 2.7.13\r\n- **Bazel version (if compiling from source)**: 0.6.1\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\n**numactl -m 1 python ./tensorflow/models/image/convnet-benchmark-alexnet/benchmark_alexnet_MKL.py --batch_size 256 --num_batches 100 -forward_backward_only --cpu knl 2>&1|tee tensorflow_alexnet_mkl.txt**\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nI have compiled tensorflow with bazel 0.6.1 and install it on my xeon phi TM platform.\r\nMeanwhile I have got a benchmark related with alexnet.\r\n\r\nWhen I run the benchmark I got the error:\r\n_2017-10-12 09:38:14.503463: E tensorflow/core/common_runtime/executor.cc:643] Executor failed to create kernel. Invalid argument: Default MaxPoolingOp only supports NHWC.\r\n         [[Node: pool1 = MaxPool[T=DT_FLOAT, data_format=\"NCHW\", ksize=[1, 1, 3, 3], padding=\"VALID\", strides=[1, 1, 2, 2], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](conv1)]]_\r\n\r\nAlso I find that in the benchmark, it has take both **\"NCHW\"** and **\"NHWC\"** data format into consideration. So the benchmark should support both data format.\r\nI couldn't figure out why,  is this error relates with out compile process, or might I need to add some other option into the compile process.\r\nHere is my compile command:\r\n\r\n_bazel build --config=mkl --copt=\"-g\" --copt=\"-DEIGEN_USE_VML\" --copt=\"-mavx2\" --copt=\"-mfma\" --copt=\"-O3\" --verbose_failures  --copt=\"-L/opt/intel/gcc/lib64\" -s -c opt //tensorflow/tools/pip_package:build_pip_package_\r\n\r\nanyone could help!\r\n\r\n\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n"}
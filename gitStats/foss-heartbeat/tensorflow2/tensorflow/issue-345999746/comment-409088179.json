{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/409088179", "html_url": "https://github.com/tensorflow/tensorflow/issues/21259#issuecomment-409088179", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21259", "id": 409088179, "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTA4ODE3OQ==", "user": {"login": "superhg2012", "id": 8817309, "node_id": "MDQ6VXNlcjg4MTczMDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/8817309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/superhg2012", "html_url": "https://github.com/superhg2012", "followers_url": "https://api.github.com/users/superhg2012/followers", "following_url": "https://api.github.com/users/superhg2012/following{/other_user}", "gists_url": "https://api.github.com/users/superhg2012/gists{/gist_id}", "starred_url": "https://api.github.com/users/superhg2012/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/superhg2012/subscriptions", "organizations_url": "https://api.github.com/users/superhg2012/orgs", "repos_url": "https://api.github.com/users/superhg2012/repos", "events_url": "https://api.github.com/users/superhg2012/events{/privacy}", "received_events_url": "https://api.github.com/users/superhg2012/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-31T04:08:40Z", "updated_at": "2018-07-31T04:08:40Z", "author_association": "NONE", "body_html": "<p>The full stack trace is below:</p>\n<p>Traceback (most recent call last):<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py\", line 468, in make_tensor_proto<br>\nstr_values = [compat.as_bytes(x) for x in proto_values]<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py\", line 468, in <br>\nstr_values = [compat.as_bytes(x) for x in proto_values]<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/util/compat.py\", line 65, in as_bytes<br>\n(bytes_or_text,))<br>\nTypeError: Expected binary or unicode string, got {'sgram': {'sgram': &lt;tf.Tensor 'IteratorGetNext:0' shape=(?, ?, ?, ?) dtype=float32&gt;}}</p>\n<p>During handling of the above exception, another exception occurred:</p>\n<p>Traceback (most recent call last):<br>\nFile \"main.py\", line 416, in <br>\ntf.app.run(main=train_or_predict)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"main.py\", line 407, in train_or_predict<br>\nhparams=params,<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 218, in run<br>\nreturn _execute_schedule(experiment, schedule)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 46, in _execute_schedule<br>\nreturn task()<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/experiment.py\", line 625, in train_and_evaluate<br>\nself.train(delay_secs=0)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/experiment.py\", line 367, in train<br>\nhooks=self._train_monitors + extra_hooks)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/experiment.py\", line 807, in _call_train<br>\nhooks=hooks)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 302, in train<br>\nloss = self._train_model(input_fn, hooks, saving_listeners)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 711, in _train_model<br>\nfeatures, labels, model_fn_lib.ModeKeys.TRAIN, self.config)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 694, in _call_model_fn<br>\nmodel_fn_results = self._model_fn(features=features, **kwargs)<br>\nFile \"/data0/hegang/utils/spoken-language-id/models/base.py\", line 28, in base_model_fn<br>\nmodel = model_class(features, training=mode == tf.estimator.ModeKeys.TRAIN, params=params)<br>\nFile \"/data0/hegang/utils/spoken-language-id/models/cnn.py\", line 8, in <strong>init</strong><br>\nbatch_size = tf.shape(features)[0]<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py\", line 271, in shape<br>\nreturn shape_internal(input, name, optimize=True, out_type=out_type)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py\", line 295, in shape_internal<br>\ninput_tensor = ops.convert_to_tensor(input)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 836, in convert_to_tensor<br>\nas_ref=False)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 926, in internal_convert_to_tensor<br>\nret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py\", line 229, in _constant_tensor_conversion_function<br>\nreturn constant(v, dtype=dtype, name=name)<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py\", line 208, in constant<br>\nvalue, dtype=dtype, shape=shape, verify_shape=verify_shape))<br>\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py\", line 472, in make_tensor_proto<br>\n\"supported type.\" % (type(values), values))<br>\nTypeError: Failed to convert object of type &lt;class 'dict'&gt; to Tensor. Contents: {'sgram': {'sgram': &lt;tf.Tensor 'IteratorGetNext:0' shape=(?, ?, ?, ?) dtype=float32&gt;}}. Consider casting elements to a supported type.</p>", "body_text": "The full stack trace is below:\nTraceback (most recent call last):\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py\", line 468, in make_tensor_proto\nstr_values = [compat.as_bytes(x) for x in proto_values]\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py\", line 468, in \nstr_values = [compat.as_bytes(x) for x in proto_values]\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/util/compat.py\", line 65, in as_bytes\n(bytes_or_text,))\nTypeError: Expected binary or unicode string, got {'sgram': {'sgram': <tf.Tensor 'IteratorGetNext:0' shape=(?, ?, ?, ?) dtype=float32>}}\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\nFile \"main.py\", line 416, in \ntf.app.run(main=train_or_predict)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"main.py\", line 407, in train_or_predict\nhparams=params,\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 218, in run\nreturn _execute_schedule(experiment, schedule)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 46, in _execute_schedule\nreturn task()\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/experiment.py\", line 625, in train_and_evaluate\nself.train(delay_secs=0)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/experiment.py\", line 367, in train\nhooks=self._train_monitors + extra_hooks)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/experiment.py\", line 807, in _call_train\nhooks=hooks)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 302, in train\nloss = self._train_model(input_fn, hooks, saving_listeners)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 711, in _train_model\nfeatures, labels, model_fn_lib.ModeKeys.TRAIN, self.config)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 694, in _call_model_fn\nmodel_fn_results = self._model_fn(features=features, **kwargs)\nFile \"/data0/hegang/utils/spoken-language-id/models/base.py\", line 28, in base_model_fn\nmodel = model_class(features, training=mode == tf.estimator.ModeKeys.TRAIN, params=params)\nFile \"/data0/hegang/utils/spoken-language-id/models/cnn.py\", line 8, in init\nbatch_size = tf.shape(features)[0]\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py\", line 271, in shape\nreturn shape_internal(input, name, optimize=True, out_type=out_type)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py\", line 295, in shape_internal\ninput_tensor = ops.convert_to_tensor(input)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 836, in convert_to_tensor\nas_ref=False)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 926, in internal_convert_to_tensor\nret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py\", line 229, in _constant_tensor_conversion_function\nreturn constant(v, dtype=dtype, name=name)\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py\", line 208, in constant\nvalue, dtype=dtype, shape=shape, verify_shape=verify_shape))\nFile \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py\", line 472, in make_tensor_proto\n\"supported type.\" % (type(values), values))\nTypeError: Failed to convert object of type <class 'dict'> to Tensor. Contents: {'sgram': {'sgram': <tf.Tensor 'IteratorGetNext:0' shape=(?, ?, ?, ?) dtype=float32>}}. Consider casting elements to a supported type.", "body": "The full stack trace is below:\r\n\r\nTraceback (most recent call last):\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py\", line 468, in make_tensor_proto\r\n    str_values = [compat.as_bytes(x) for x in proto_values]\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py\", line 468, in <listcomp>\r\n    str_values = [compat.as_bytes(x) for x in proto_values]\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/util/compat.py\", line 65, in as_bytes\r\n    (bytes_or_text,))\r\nTypeError: Expected binary or unicode string, got {'sgram': {'sgram': <tf.Tensor 'IteratorGetNext:0' shape=(?, ?, ?, ?) dtype=float32>}}\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 416, in <module>\r\n    tf.app.run(main=train_or_predict)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"main.py\", line 407, in train_or_predict\r\n    hparams=params,\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 218, in run\r\n    return _execute_schedule(experiment, schedule)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 46, in _execute_schedule\r\n    return task()\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/experiment.py\", line 625, in train_and_evaluate\r\n    self.train(delay_secs=0)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/experiment.py\", line 367, in train\r\n    hooks=self._train_monitors + extra_hooks)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/learn/python/learn/experiment.py\", line 807, in _call_train\r\n    hooks=hooks)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 302, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 711, in _train_model\r\n    features, labels, model_fn_lib.ModeKeys.TRAIN, self.config)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 694, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"/data0/hegang/utils/spoken-language-id/models/base.py\", line 28, in base_model_fn\r\n    model = model_class(features, training=mode == tf.estimator.ModeKeys.TRAIN, params=params)\r\n  File \"/data0/hegang/utils/spoken-language-id/models/cnn.py\", line 8, in __init__\r\n    batch_size = tf.shape(features)[0]\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py\", line 271, in shape\r\n    return shape_internal(input, name, optimize=True, out_type=out_type)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py\", line 295, in shape_internal\r\n    input_tensor = ops.convert_to_tensor(input)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 836, in convert_to_tensor\r\n    as_ref=False)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 926, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py\", line 229, in _constant_tensor_conversion_function\r\n    return constant(v, dtype=dtype, name=name)\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py\", line 208, in constant\r\n    value, dtype=dtype, shape=shape, verify_shape=verify_shape))\r\n  File \"/data0/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py\", line 472, in make_tensor_proto\r\n    \"supported type.\" % (type(values), values))\r\nTypeError: Failed to convert object of type <class 'dict'> to Tensor. Contents: {'sgram': {'sgram': <tf.Tensor 'IteratorGetNext:0' shape=(?, ?, ?, ?) dtype=float32>}}. Consider casting elements to a supported type."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/373", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/373/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/373/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/373/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/373", "id": 119320102, "node_id": "MDU6SXNzdWUxMTkzMjAxMDI=", "number": 373, "title": "Random numbers with None value in shape", "user": {"login": "bayerj", "id": 50352, "node_id": "MDQ6VXNlcjUwMzUy", "avatar_url": "https://avatars3.githubusercontent.com/u/50352?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bayerj", "html_url": "https://github.com/bayerj", "followers_url": "https://api.github.com/users/bayerj/followers", "following_url": "https://api.github.com/users/bayerj/following{/other_user}", "gists_url": "https://api.github.com/users/bayerj/gists{/gist_id}", "starred_url": "https://api.github.com/users/bayerj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bayerj/subscriptions", "organizations_url": "https://api.github.com/users/bayerj/orgs", "repos_url": "https://api.github.com/users/bayerj/repos", "events_url": "https://api.github.com/users/bayerj/events{/privacy}", "received_events_url": "https://api.github.com/users/bayerj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-11-28T21:57:25Z", "updated_at": "2017-11-29T08:53:21Z", "closed_at": "2015-11-29T06:37:43Z", "author_association": "NONE", "body_html": "<p>There are several use cases where the shape of random numbers is to be determined at runtime. E.g. for variational auto encoder or injection of noise into an MLPs units. As of now, this seems not possible in an elegant way with tensorflow:</p>\n<pre><code>import tensorflow as tf\nx = tf.placeholder('float32', [None, 784])\nnoised = x + tf.random_normal(x.get_shape())\n</code></pre>\n<p>The above throws <a href=\"https://gist.github.com/bayerj/12e6a80c36593173a489\">this traceback</a>. I have to replace <code>None</code> above with a number known before runtime. But then I have to fix my batch size beforehand (to which the None corresponds) and need different expressions for each batch size.</p>", "body_text": "There are several use cases where the shape of random numbers is to be determined at runtime. E.g. for variational auto encoder or injection of noise into an MLPs units. As of now, this seems not possible in an elegant way with tensorflow:\nimport tensorflow as tf\nx = tf.placeholder('float32', [None, 784])\nnoised = x + tf.random_normal(x.get_shape())\n\nThe above throws this traceback. I have to replace None above with a number known before runtime. But then I have to fix my batch size beforehand (to which the None corresponds) and need different expressions for each batch size.", "body": "There are several use cases where the shape of random numbers is to be determined at runtime. E.g. for variational auto encoder or injection of noise into an MLPs units. As of now, this seems not possible in an elegant way with tensorflow:\n\n```\nimport tensorflow as tf\nx = tf.placeholder('float32', [None, 784])\nnoised = x + tf.random_normal(x.get_shape())\n```\n\nThe above throws [this traceback](https://gist.github.com/bayerj/12e6a80c36593173a489). I have to replace `None` above with a number known before runtime. But then I have to fix my batch size beforehand (to which the None corresponds) and need different expressions for each batch size.\n"}
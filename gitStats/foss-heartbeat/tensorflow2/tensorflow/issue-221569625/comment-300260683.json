{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300260683", "html_url": "https://github.com/tensorflow/tensorflow/pull/9189#issuecomment-300260683", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9189", "id": 300260683, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDI2MDY4Mw==", "user": {"login": "gaohuazuo", "id": 10446514, "node_id": "MDQ6VXNlcjEwNDQ2NTE0", "avatar_url": "https://avatars0.githubusercontent.com/u/10446514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gaohuazuo", "html_url": "https://github.com/gaohuazuo", "followers_url": "https://api.github.com/users/gaohuazuo/followers", "following_url": "https://api.github.com/users/gaohuazuo/following{/other_user}", "gists_url": "https://api.github.com/users/gaohuazuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/gaohuazuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaohuazuo/subscriptions", "organizations_url": "https://api.github.com/users/gaohuazuo/orgs", "repos_url": "https://api.github.com/users/gaohuazuo/repos", "events_url": "https://api.github.com/users/gaohuazuo/events{/privacy}", "received_events_url": "https://api.github.com/users/gaohuazuo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-09T18:32:54Z", "updated_at": "2017-05-09T18:43:37Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2342391\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yuanbyu\">@yuanbyu</a>  <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=463737\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vrv\">@vrv</a> <code>cond_v2</code> has passed almost all tests in <code>ControlFlowTest</code> (see previous comment and <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/2d882220c3ccaf161e9d243a382121b030b762cf/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/2d882220c3ccaf161e9d243a382121b030b762cf\"><tt>2d88222</tt></a>). I will complete docs and code comments soon. What else has to be done before I may ask for review? Additionally, which contrib module should I use?</p>\n<p>Notes on gradient:<br>\nThe current naive approach is to register a gradient function for <code>Mux</code>, as if it were an ordinary op. It works, but the optimization that is enjoyed by <code>tf.cond</code> is missing. Even so, it is already more efficient in some scenarios, for example <code>y = do_something(tf.cond(tf.constant(False), lambda: x1, lambda: x2)); tf.gradients(y, x1)[0].eval()</code>.</p>", "body_text": "@yuanbyu  @vrv cond_v2 has passed almost all tests in ControlFlowTest (see previous comment and 2d88222). I will complete docs and code comments soon. What else has to be done before I may ask for review? Additionally, which contrib module should I use?\nNotes on gradient:\nThe current naive approach is to register a gradient function for Mux, as if it were an ordinary op. It works, but the optimization that is enjoyed by tf.cond is missing. Even so, it is already more efficient in some scenarios, for example y = do_something(tf.cond(tf.constant(False), lambda: x1, lambda: x2)); tf.gradients(y, x1)[0].eval().", "body": "@yuanbyu  @vrv `cond_v2` has passed almost all tests in `ControlFlowTest` (see previous comment and https://github.com/tensorflow/tensorflow/pull/9189/commits/2d882220c3ccaf161e9d243a382121b030b762cf). I will complete docs and code comments soon. What else has to be done before I may ask for review? Additionally, which contrib module should I use?\r\n\r\nNotes on gradient:\r\nThe current naive approach is to register a gradient function for `Mux`, as if it were an ordinary op. It works, but the optimization that is enjoyed by `tf.cond` is missing. Even so, it is already more efficient in some scenarios, for example `y = do_something(tf.cond(tf.constant(False), lambda: x1, lambda: x2)); tf.gradients(y, x1)[0].eval()`."}
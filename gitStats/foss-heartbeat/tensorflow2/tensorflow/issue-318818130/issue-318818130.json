{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18976", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18976/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18976/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18976/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18976", "id": 318818130, "node_id": "MDU6SXNzdWUzMTg4MTgxMzA=", "number": 18976, "title": "TFlite TransposeConv op supported but unregistered", "user": {"login": "dbarta", "id": 920935, "node_id": "MDQ6VXNlcjkyMDkzNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/920935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbarta", "html_url": "https://github.com/dbarta", "followers_url": "https://api.github.com/users/dbarta/followers", "following_url": "https://api.github.com/users/dbarta/following{/other_user}", "gists_url": "https://api.github.com/users/dbarta/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbarta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbarta/subscriptions", "organizations_url": "https://api.github.com/users/dbarta/orgs", "repos_url": "https://api.github.com/users/dbarta/repos", "events_url": "https://api.github.com/users/dbarta/events{/privacy}", "received_events_url": "https://api.github.com/users/dbarta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-04-30T08:32:41Z", "updated_at": "2018-11-21T20:55:41Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: MacOS 10.13.3</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Source</li>\n<li><strong>TensorFlow version (use command below)</strong>: v1.8.0-rc1-1107-g8a428cd 1.8.0-rc1</li>\n<li><strong>Python version</strong>: 3.5.4</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.11.1</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: 9.1.0</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>: N/A</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I'm trying to convert my custom model to tflite using tf.contrib.lite.toco_convert.<br>\nThe model has some TransposeConv in it. I expect these to convert as looking at commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/58fe7d26afa435560e7a0d8ca6fc8d670d2477da/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/58fe7d26afa435560e7a0d8ca6fc8d670d2477da\"><tt>58fe7d2</tt></a> there does seem to be quite a bit of code in place to support transposeconv, including the actual implementation and graph transformations. However when I run the conversion it tells me it's not supported (see below output).</p>\n<p>It seems like this op is supported but simply unregistered for some reason, which might be a bug or maybe there is some mysterious reason it cannot be registered?</p>\n<p>Thanks</p>\n<h3>Source code / logs</h3>\n<p>2018-04-30 11:11:07.554671: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 204 operators, 314 arrays (0 quantized)<br>\n2018-04-30 11:11:07.557853: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 204 operators, 314 arrays (0 quantized)<br>\n2018-04-30 11:11:07.562549: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 52 operators, 108 arrays (0 quantized)<br>\n2018-04-30 11:11:07.566535: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 48 operators, 103 arrays (0 quantized)<br>\n2018-04-30 11:11:07.567162: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 43 operators, 95 arrays (0 quantized)<br>\n2018-04-30 11:11:07.567617: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 43 operators, 95 arrays (0 quantized)<br>\n2018-04-30 11:11:07.568085: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:329] Total transient array allocated size: 934336 bytes, theoretical optimalvalue: 933120 bytes.<br>\n2018-04-3011:11:07.569157: F tensorflow/contrib/lite/toco/tflite/export.cc:315] Some of the operators in the model are not supported by the standard TensorFlow Literuntime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need customimplementations: TransposeConv.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.13.3\nTensorFlow installed from (source or binary): Source\nTensorFlow version (use command below): v1.8.0-rc1-1107-g8a428cd 1.8.0-rc1\nPython version: 3.5.4\nBazel version (if compiling from source): 0.11.1\nGCC/Compiler version (if compiling from source): 9.1.0\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce: N/A\n\nDescribe the problem\nI'm trying to convert my custom model to tflite using tf.contrib.lite.toco_convert.\nThe model has some TransposeConv in it. I expect these to convert as looking at commit 58fe7d2 there does seem to be quite a bit of code in place to support transposeconv, including the actual implementation and graph transformations. However when I run the conversion it tells me it's not supported (see below output).\nIt seems like this op is supported but simply unregistered for some reason, which might be a bug or maybe there is some mysterious reason it cannot be registered?\nThanks\nSource code / logs\n2018-04-30 11:11:07.554671: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 204 operators, 314 arrays (0 quantized)\n2018-04-30 11:11:07.557853: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 204 operators, 314 arrays (0 quantized)\n2018-04-30 11:11:07.562549: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 52 operators, 108 arrays (0 quantized)\n2018-04-30 11:11:07.566535: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 48 operators, 103 arrays (0 quantized)\n2018-04-30 11:11:07.567162: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 43 operators, 95 arrays (0 quantized)\n2018-04-30 11:11:07.567617: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 43 operators, 95 arrays (0 quantized)\n2018-04-30 11:11:07.568085: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:329] Total transient array allocated size: 934336 bytes, theoretical optimalvalue: 933120 bytes.\n2018-04-3011:11:07.569157: F tensorflow/contrib/lite/toco/tflite/export.cc:315] Some of the operators in the model are not supported by the standard TensorFlow Literuntime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need customimplementations: TransposeConv.", "body": "\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: MacOS 10.13.3\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: v1.8.0-rc1-1107-g8a428cd 1.8.0-rc1\r\n- **Python version**: 3.5.4\r\n- **Bazel version (if compiling from source)**: 0.11.1\r\n- **GCC/Compiler version (if compiling from source)**: 9.1.0\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: N/A\r\n\r\n### Describe the problem\r\n\r\nI'm trying to convert my custom model to tflite using tf.contrib.lite.toco_convert. \r\nThe model has some TransposeConv in it. I expect these to convert as looking at commit https://github.com/tensorflow/tensorflow/commit/58fe7d26afa435560e7a0d8ca6fc8d670d2477da there does seem to be quite a bit of code in place to support transposeconv, including the actual implementation and graph transformations. However when I run the conversion it tells me it's not supported (see below output).\r\n\r\n\r\nIt seems like this op is supported but simply unregistered for some reason, which might be a bug or maybe there is some mysterious reason it cannot be registered?\r\n\r\nThanks\r\n\r\n\r\n\r\n### Source code / logs\r\n\r\n2018-04-30 11:11:07.554671: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 204 operators, 314 arrays (0 quantized)\r\n2018-04-30 11:11:07.557853: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 204 operators, 314 arrays (0 quantized)\r\n2018-04-30 11:11:07.562549: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 52 operators, 108 arrays (0 quantized)\r\n2018-04-30 11:11:07.566535: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 48 operators, 103 arrays (0 quantized)\r\n2018-04-30 11:11:07.567162: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 43 operators, 95 arrays (0 quantized)\r\n2018-04-30 11:11:07.567617: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 43 operators, 95 arrays (0 quantized)\r\n2018-04-30 11:11:07.568085: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:329] Total transient array allocated size: 934336 bytes, theoretical optimalvalue: 933120 bytes.\r\n2018-04-3011:11:07.569157: F tensorflow/contrib/lite/toco/tflite/export.cc:315] Some of the operators in the model are not supported by the standard TensorFlow Literuntime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need customimplementations: TransposeConv.\r\n"}
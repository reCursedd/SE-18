{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14366", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14366/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14366/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14366/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14366", "id": 272240419, "node_id": "MDU6SXNzdWUyNzIyNDA0MTk=", "number": 14366, "title": "Question: How to feed a batch of variable sized images to the Tensorflow C/C++ or Java API on Android?", "user": {"login": "andreas-eberle", "id": 9267365, "node_id": "MDQ6VXNlcjkyNjczNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/9267365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-eberle", "html_url": "https://github.com/andreas-eberle", "followers_url": "https://api.github.com/users/andreas-eberle/followers", "following_url": "https://api.github.com/users/andreas-eberle/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-eberle/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-eberle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-eberle/subscriptions", "organizations_url": "https://api.github.com/users/andreas-eberle/orgs", "repos_url": "https://api.github.com/users/andreas-eberle/repos", "events_url": "https://api.github.com/users/andreas-eberle/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-eberle/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 21, "created_at": "2017-11-08T15:30:32Z", "updated_at": "2018-08-22T02:23:11Z", "closed_at": "2018-08-22T02:22:03Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I asked this question on Stackoverflow before but got no answers: <a href=\"https://stackoverflow.com/questions/46906269/how-to-process-variable-sized-images-with-tensorflow-java-api\" rel=\"nofollow\">https://stackoverflow.com/questions/46906269/how-to-process-variable-sized-images-with-tensorflow-java-api</a></p>\n<p>In short: I have a CNN model that is doing some preprocessing of the images in the tensorflow graph before running the CNN on the data. This preprocessing includes resizing the images after normalizing them etc. Thus, I need to feed my model with a batch of differently sized images. While I could try to do this in OpenCV, I don't want to, as it seems messy to reimplement the complicated preprocessing and not as efficient.</p>\n<p>I found a way to do it in the standard version of tensorflow. I encoded the images as png strings and used the new Java API 1.4 to feed a batch of these strings to my tensorflow model. There I first decoded the png string to get back the image.</p>\n<p>Unfortunately, this does not work on Android. There are several problems:</p>\n<ul>\n<li>png encoding is not available (I then used .bmp; but that has no grayscale support; I then made my gray image colored and make it gray again in the model (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"267968492\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/13942\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/13942/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/13942\">#13942</a>) )</li>\n<li>The Android API does not seem to be able to handle string tensors (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"271491285\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14291\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/14291/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/14291\">#14291</a>)</li>\n</ul>\n<p>So my question is, if it is possible to feed a model with a batch of differently sized images via the C/C++ or Java API on Android.</p>", "body_text": "I asked this question on Stackoverflow before but got no answers: https://stackoverflow.com/questions/46906269/how-to-process-variable-sized-images-with-tensorflow-java-api\nIn short: I have a CNN model that is doing some preprocessing of the images in the tensorflow graph before running the CNN on the data. This preprocessing includes resizing the images after normalizing them etc. Thus, I need to feed my model with a batch of differently sized images. While I could try to do this in OpenCV, I don't want to, as it seems messy to reimplement the complicated preprocessing and not as efficient.\nI found a way to do it in the standard version of tensorflow. I encoded the images as png strings and used the new Java API 1.4 to feed a batch of these strings to my tensorflow model. There I first decoded the png string to get back the image.\nUnfortunately, this does not work on Android. There are several problems:\n\npng encoding is not available (I then used .bmp; but that has no grayscale support; I then made my gray image colored and make it gray again in the model (#13942) )\nThe Android API does not seem to be able to handle string tensors (#14291)\n\nSo my question is, if it is possible to feed a model with a batch of differently sized images via the C/C++ or Java API on Android.", "body": "I asked this question on Stackoverflow before but got no answers: https://stackoverflow.com/questions/46906269/how-to-process-variable-sized-images-with-tensorflow-java-api\r\n\r\nIn short: I have a CNN model that is doing some preprocessing of the images in the tensorflow graph before running the CNN on the data. This preprocessing includes resizing the images after normalizing them etc. Thus, I need to feed my model with a batch of differently sized images. While I could try to do this in OpenCV, I don't want to, as it seems messy to reimplement the complicated preprocessing and not as efficient. \r\n\r\nI found a way to do it in the standard version of tensorflow. I encoded the images as png strings and used the new Java API 1.4 to feed a batch of these strings to my tensorflow model. There I first decoded the png string to get back the image.\r\n\r\nUnfortunately, this does not work on Android. There are several problems:\r\n* png encoding is not available (I then used .bmp; but that has no grayscale support; I then made my gray image colored and make it gray again in the model (https://github.com/tensorflow/tensorflow/issues/13942) )\r\n* The Android API does not seem to be able to handle string tensors (https://github.com/tensorflow/tensorflow/issues/14291)\r\n\r\nSo my question is, if it is possible to feed a model with a batch of differently sized images via the C/C++ or Java API on Android."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6598", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6598/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6598/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6598/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6598", "id": 198322239, "node_id": "MDU6SXNzdWUxOTgzMjIyMzk=", "number": 6598, "title": "Type Error", "user": {"login": "keithyin", "id": 7200537, "node_id": "MDQ6VXNlcjcyMDA1Mzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7200537?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keithyin", "html_url": "https://github.com/keithyin", "followers_url": "https://api.github.com/users/keithyin/followers", "following_url": "https://api.github.com/users/keithyin/following{/other_user}", "gists_url": "https://api.github.com/users/keithyin/gists{/gist_id}", "starred_url": "https://api.github.com/users/keithyin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keithyin/subscriptions", "organizations_url": "https://api.github.com/users/keithyin/orgs", "repos_url": "https://api.github.com/users/keithyin/repos", "events_url": "https://api.github.com/users/keithyin/events{/privacy}", "received_events_url": "https://api.github.com/users/keithyin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-01-02T11:17:00Z", "updated_at": "2017-01-04T01:08:01Z", "closed_at": "2017-01-04T01:08:00Z", "author_association": "NONE", "body_html": "<p>i have encounter an type error issue, and tried <code>import sys; reload(sys); sys.setdefaultencoding('UTF8')</code>.but i didn't work.<br>\nhere is the detail<br>\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so.8.0 locally<br>\nE tensorflow/core/framework/op_kernel.cc:925] OpKernel ('op: \"NegTrain\" device_type: \"CPU\"') for unknown op: NegTrain<br>\nE tensorflow/core/framework/op_kernel.cc:925] OpKernel ('op: \"Skipgram\" device_type: \"CPU\"') for unknown op: Skipgram<br>\nTraceback (most recent call last):<br>\nFile \"Model_Multi_Gpu.py\", line 371, in <br>\ntf.app.run()<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 44, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"Model_Multi_Gpu.py\", line 355, in main<br>\nmodel = Model(train_scope,4)<br>\nFile \"Model_Multi_Gpu.py\", line 85, in <strong>init</strong><br>\navaraged_grads = self.avg_grads()<br>\nFile \"Model_Multi_Gpu.py\", line 91, in avg_grads<br>\naveraged_grads.append(tf.reduce_mean(grads_per_var))<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 1329, in reduce_mean<br>\n_ReductionDims(input_tensor, axis, reduction_indices),<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 1178, in _ReductionDims<br>\nreturn range(0, array_ops.rank(x))<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 342, in rank<br>\nreturn rank_internal(input, name, optimize=True)<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 362, in rank_internal<br>\ninput_tensor = ops.convert_to_tensor(input)<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 645, in convert_to_tensor<br>\nas_ref=False)<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 710, in internal_convert_to_tensor<br>\nret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function<br>\nreturn constant(v, dtype=dtype, name=name)<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 165, in constant<br>\ntensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.py\", line 441, in make_tensor_proto<br>\ntensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])<br>\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/util/compat.py\", line 65, in as_bytes<br>\n(bytes_or_text,))<br>\nTypeError: Expected binary or unicode string, got &lt;tensorflow.python.framework.ops.IndexedSlices object at 0x7fa82ab1cf50&gt;</p>\n<p>what should i do to correct it? thanks a lot</p>", "body_text": "i have encounter an type error issue, and tried import sys; reload(sys); sys.setdefaultencoding('UTF8').but i didn't work.\nhere is the detail\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so.8.0 locally\nE tensorflow/core/framework/op_kernel.cc:925] OpKernel ('op: \"NegTrain\" device_type: \"CPU\"') for unknown op: NegTrain\nE tensorflow/core/framework/op_kernel.cc:925] OpKernel ('op: \"Skipgram\" device_type: \"CPU\"') for unknown op: Skipgram\nTraceback (most recent call last):\nFile \"Model_Multi_Gpu.py\", line 371, in \ntf.app.run()\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 44, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"Model_Multi_Gpu.py\", line 355, in main\nmodel = Model(train_scope,4)\nFile \"Model_Multi_Gpu.py\", line 85, in init\navaraged_grads = self.avg_grads()\nFile \"Model_Multi_Gpu.py\", line 91, in avg_grads\naveraged_grads.append(tf.reduce_mean(grads_per_var))\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 1329, in reduce_mean\n_ReductionDims(input_tensor, axis, reduction_indices),\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 1178, in _ReductionDims\nreturn range(0, array_ops.rank(x))\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 342, in rank\nreturn rank_internal(input, name, optimize=True)\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 362, in rank_internal\ninput_tensor = ops.convert_to_tensor(input)\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 645, in convert_to_tensor\nas_ref=False)\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 710, in internal_convert_to_tensor\nret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function\nreturn constant(v, dtype=dtype, name=name)\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 165, in constant\ntensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.py\", line 441, in make_tensor_proto\ntensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])\nFile \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/util/compat.py\", line 65, in as_bytes\n(bytes_or_text,))\nTypeError: Expected binary or unicode string, got <tensorflow.python.framework.ops.IndexedSlices object at 0x7fa82ab1cf50>\nwhat should i do to correct it? thanks a lot", "body": "i have encounter an type error issue, and tried `import sys; reload(sys); sys.setdefaultencoding('UTF8')`.but i didn't work.\r\nhere is the detail\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so.8.0 locally\r\nE tensorflow/core/framework/op_kernel.cc:925] OpKernel ('op: \"NegTrain\" device_type: \"CPU\"') for unknown op: NegTrain\r\nE tensorflow/core/framework/op_kernel.cc:925] OpKernel ('op: \"Skipgram\" device_type: \"CPU\"') for unknown op: Skipgram\r\nTraceback (most recent call last):\r\n  File \"Model_Multi_Gpu.py\", line 371, in <module>\r\n    tf.app.run()\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"Model_Multi_Gpu.py\", line 355, in main\r\n    model = Model(train_scope,4)\r\n  File \"Model_Multi_Gpu.py\", line 85, in __init__\r\n    avaraged_grads = self.avg_grads()\r\n  File \"Model_Multi_Gpu.py\", line 91, in avg_grads\r\n    averaged_grads.append(tf.reduce_mean(grads_per_var))\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 1329, in reduce_mean\r\n    _ReductionDims(input_tensor, axis, reduction_indices),\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 1178, in _ReductionDims\r\n    return range(0, array_ops.rank(x))\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 342, in rank\r\n    return rank_internal(input, name, optimize=True)\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 362, in rank_internal\r\n    input_tensor = ops.convert_to_tensor(input)\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 645, in convert_to_tensor\r\n    as_ref=False)\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 710, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 176, in _constant_tensor_conversion_function\r\n    return constant(v, dtype=dtype, name=name)\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py\", line 165, in constant\r\n    tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.py\", line 441, in make_tensor_proto\r\n    tensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])\r\n  File \"/home/rootuser/.virtualenvs/tfrc1py2/local/lib/python2.7/site-packages/tensorflow/python/util/compat.py\", line 65, in as_bytes\r\n    (bytes_or_text,))\r\nTypeError: Expected binary or unicode string, got <tensorflow.python.framework.ops.IndexedSlices object at 0x7fa82ab1cf50>\r\n\r\nwhat should i do to correct it? thanks a lot"}
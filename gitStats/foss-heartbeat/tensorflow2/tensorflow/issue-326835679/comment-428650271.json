{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/428650271", "html_url": "https://github.com/tensorflow/tensorflow/issues/19583#issuecomment-428650271", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19583", "id": 428650271, "node_id": "MDEyOklzc3VlQ29tbWVudDQyODY1MDI3MQ==", "user": {"login": "shakeel", "id": 19921, "node_id": "MDQ6VXNlcjE5OTIx", "avatar_url": "https://avatars2.githubusercontent.com/u/19921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shakeel", "html_url": "https://github.com/shakeel", "followers_url": "https://api.github.com/users/shakeel/followers", "following_url": "https://api.github.com/users/shakeel/following{/other_user}", "gists_url": "https://api.github.com/users/shakeel/gists{/gist_id}", "starred_url": "https://api.github.com/users/shakeel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shakeel/subscriptions", "organizations_url": "https://api.github.com/users/shakeel/orgs", "repos_url": "https://api.github.com/users/shakeel/repos", "events_url": "https://api.github.com/users/shakeel/events{/privacy}", "received_events_url": "https://api.github.com/users/shakeel/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-10T16:58:55Z", "updated_at": "2018-10-10T16:58:55Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=11807206\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/taotaolin\">@taotaolin</a> and <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4171702\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/meteorcloudy\">@meteorcloudy</a> I had the same problem on Windows 10 running the <code>bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package</code> command. It would fail on png archive patch.</p>\n<p>The root cause of the failure is that Bazel should quote the patch command, without the quotes the <code>bash -l -c patch ...</code> command just hangs and never returns.</p>\n<p>However with the quotes, the command completes and returns successfully. <code>bash -l -c \"patch ...\"</code>.</p>\n<p>I could not figure out how to hack Bazel to quote the patch command.</p>\n<p>If you manually patch the png_archive file, you can comment out the <code>patch_file = clean_dep(\"//third_party:png_fix_rpi.patch\"), </code> line  in the tensorflow/tensorflow/workspace.bzl file. Then you are not held back by the patch failure anymore.</p>\n<p>To comment out a line in bzl file, use <code>#</code>.</p>", "body_text": "@taotaolin and @meteorcloudy I had the same problem on Windows 10 running the bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package command. It would fail on png archive patch.\nThe root cause of the failure is that Bazel should quote the patch command, without the quotes the bash -l -c patch ... command just hangs and never returns.\nHowever with the quotes, the command completes and returns successfully. bash -l -c \"patch ...\".\nI could not figure out how to hack Bazel to quote the patch command.\nIf you manually patch the png_archive file, you can comment out the patch_file = clean_dep(\"//third_party:png_fix_rpi.patch\"),  line  in the tensorflow/tensorflow/workspace.bzl file. Then you are not held back by the patch failure anymore.\nTo comment out a line in bzl file, use #.", "body": "@taotaolin and @meteorcloudy I had the same problem on Windows 10 running the `bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package` command. It would fail on png archive patch. \r\n\r\nThe root cause of the failure is that Bazel should quote the patch command, without the quotes the `bash -l -c patch ...` command just hangs and never returns.\r\n\r\nHowever with the quotes, the command completes and returns successfully. `bash -l -c \"patch ...\"`.\r\n\r\nI could not figure out how to hack Bazel to quote the patch command. \r\n\r\nIf you manually patch the png_archive file, you can comment out the `patch_file = clean_dep(\"//third_party:png_fix_rpi.patch\"), ` line  in the tensorflow/tensorflow/workspace.bzl file. Then you are not held back by the patch failure anymore.\r\n\r\nTo comment out a line in bzl file, use `#`.\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/392815797", "html_url": "https://github.com/tensorflow/tensorflow/issues/19583#issuecomment-392815797", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19583", "id": 392815797, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjgxNTc5Nw==", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-29T15:17:28Z", "updated_at": "2018-05-29T15:17:28Z", "author_association": "MEMBER", "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4171702\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/meteorcloudy\">@meteorcloudy</a> for the help! The PR helps and the bash issue is resolved. However, after another run I encountered the following issue:</p>\n<pre><code>C:\\Users\\user\\tensorflow&gt;bazel build -s --verbose_failures --config=opt //tensorflow/tools/pip_package:build_pip_package\nStarting local Bazel server and connecting to it...\n....................\nWARNING: C:/users/user/_bazel_user/4opxzgxi/external/protobuf_archive/WORKSPACE:1: Workspace name in C:/users/user/_bazel_user/4opxzgxi/external/protobuf_archive/WORKSPACE (@com_google_protobuf) does not match the name given in the repository's definition (@protobuf_archive); this will cause a build error in future versions\nWARNING: C:/users/user/_bazel_user/4opxzgxi/external/absl_py/WORKSPACE:1: Workspace name in C:/users/user/_bazel_user/4opxzgxi/external/absl_py/WORKSPACE (@io_abseil_py) does not match the name given in the repository's definition (@absl_py); this will cause a build error in future versions\nERROR: C:/users/user/tensorflow/tensorflow/tools/pip_package/BUILD:117:1: no such package '@png_archive//': Traceback (most recent call last):\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 88\n                _apply_patch(ctx, ctx.attr.patch_file)\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 59, in _apply_patch\n                _execute_and_check_ret_code(ctx, cmd)\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 44, in _execute_and_check_ret_code\n                fail(\"Non-zero return code({1}) when ...))\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/user/_bazel_user/4opxzgxi/external/png_archive -i C:/users/user/tensorflow/third_party/png_fix_rpi.patch':\nStdout:\nStderr: Timed out and referenced by '//tensorflow/tools/pip_package:licenses'\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@png_archive//': Traceback (most recent call last):\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 88\n                _apply_patch(ctx, ctx.attr.patch_file)\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 59, in _apply_patch\n                _execute_and_check_ret_code(ctx, cmd)\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 44, in _execute_and_check_ret_code\n                fail(\"Non-zero return code({1}) when ...))\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/user/_bazel_user/4opxzgxi/external/png_archive -i C:/users/user/tensorflow/third_party/png_fix_rpi.patch':\nStdout:\nStderr: Timed out\nINFO: Elapsed time: 78.668s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (139 packages loaded)\n\nC:\\Users\\user\\tensorflow&gt;\n</code></pre>\n<p>It seems bash is not able to invoke <code>patch</code>. I installed <code>patch</code> inside the <code>msys2</code> with <code>pacman</code>.</p>\n<p>Should I install <code>patch</code> to <code>PATH</code> or there are other configuration needed?</p>", "body_text": "Thanks @meteorcloudy for the help! The PR helps and the bash issue is resolved. However, after another run I encountered the following issue:\nC:\\Users\\user\\tensorflow>bazel build -s --verbose_failures --config=opt //tensorflow/tools/pip_package:build_pip_package\nStarting local Bazel server and connecting to it...\n....................\nWARNING: C:/users/user/_bazel_user/4opxzgxi/external/protobuf_archive/WORKSPACE:1: Workspace name in C:/users/user/_bazel_user/4opxzgxi/external/protobuf_archive/WORKSPACE (@com_google_protobuf) does not match the name given in the repository's definition (@protobuf_archive); this will cause a build error in future versions\nWARNING: C:/users/user/_bazel_user/4opxzgxi/external/absl_py/WORKSPACE:1: Workspace name in C:/users/user/_bazel_user/4opxzgxi/external/absl_py/WORKSPACE (@io_abseil_py) does not match the name given in the repository's definition (@absl_py); this will cause a build error in future versions\nERROR: C:/users/user/tensorflow/tensorflow/tools/pip_package/BUILD:117:1: no such package '@png_archive//': Traceback (most recent call last):\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 88\n                _apply_patch(ctx, ctx.attr.patch_file)\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 59, in _apply_patch\n                _execute_and_check_ret_code(ctx, cmd)\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 44, in _execute_and_check_ret_code\n                fail(\"Non-zero return code({1}) when ...))\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/user/_bazel_user/4opxzgxi/external/png_archive -i C:/users/user/tensorflow/third_party/png_fix_rpi.patch':\nStdout:\nStderr: Timed out and referenced by '//tensorflow/tools/pip_package:licenses'\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@png_archive//': Traceback (most recent call last):\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 88\n                _apply_patch(ctx, ctx.attr.patch_file)\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 59, in _apply_patch\n                _execute_and_check_ret_code(ctx, cmd)\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 44, in _execute_and_check_ret_code\n                fail(\"Non-zero return code({1}) when ...))\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/user/_bazel_user/4opxzgxi/external/png_archive -i C:/users/user/tensorflow/third_party/png_fix_rpi.patch':\nStdout:\nStderr: Timed out\nINFO: Elapsed time: 78.668s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (139 packages loaded)\n\nC:\\Users\\user\\tensorflow>\n\nIt seems bash is not able to invoke patch. I installed patch inside the msys2 with pacman.\nShould I install patch to PATH or there are other configuration needed?", "body": "Thanks @meteorcloudy for the help! The PR helps and the bash issue is resolved. However, after another run I encountered the following issue:\r\n```\r\nC:\\Users\\user\\tensorflow>bazel build -s --verbose_failures --config=opt //tensorflow/tools/pip_package:build_pip_package\r\nStarting local Bazel server and connecting to it...\r\n....................\r\nWARNING: C:/users/user/_bazel_user/4opxzgxi/external/protobuf_archive/WORKSPACE:1: Workspace name in C:/users/user/_bazel_user/4opxzgxi/external/protobuf_archive/WORKSPACE (@com_google_protobuf) does not match the name given in the repository's definition (@protobuf_archive); this will cause a build error in future versions\r\nWARNING: C:/users/user/_bazel_user/4opxzgxi/external/absl_py/WORKSPACE:1: Workspace name in C:/users/user/_bazel_user/4opxzgxi/external/absl_py/WORKSPACE (@io_abseil_py) does not match the name given in the repository's definition (@absl_py); this will cause a build error in future versions\r\nERROR: C:/users/user/tensorflow/tensorflow/tools/pip_package/BUILD:117:1: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 88\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 59, in _apply_patch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 44, in _execute_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/user/_bazel_user/4opxzgxi/external/png_archive -i C:/users/user/tensorflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: Timed out and referenced by '//tensorflow/tools/pip_package:licenses'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 88\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 59, in _apply_patch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/user/tensorflow/third_party/repo.bzl\", line 44, in _execute_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/user/_bazel_user/4opxzgxi/external/png_archive -i C:/users/user/tensorflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: Timed out\r\nINFO: Elapsed time: 78.668s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (139 packages loaded)\r\n\r\nC:\\Users\\user\\tensorflow>\r\n```\r\n\r\nIt seems bash is not able to invoke `patch`. I installed `patch` inside the `msys2` with `pacman`.\r\n\r\nShould I install `patch` to `PATH` or there are other configuration needed?"}
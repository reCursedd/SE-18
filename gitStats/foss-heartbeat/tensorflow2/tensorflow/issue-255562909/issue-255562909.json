{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12844", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12844/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12844/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12844/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12844", "id": 255562909, "node_id": "MDU6SXNzdWUyNTU1NjI5MDk=", "number": 12844, "title": "//tensorflow/python:saver_test is failing in Windows Bazel build", "user": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2017-09-06T10:56:31Z", "updated_at": "2017-11-14T10:51:03Z", "closed_at": "2017-11-14T10:51:03Z", "author_association": "MEMBER", "body_html": "<p><a href=\"http://ci.tensorflow.org/job/tf-master-win-bzl/1515/console\" rel=\"nofollow\">http://ci.tensorflow.org/job/tf-master-win-bzl/1515/console</a></p>\n<pre><code>17:24:51 ERROR: testSaveRestore (__main__.LenientNamesTest)\n17:24:51 ----------------------------------------------------------------------\n17:24:51 Traceback (most recent call last):\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1321, in _do_call\n17:24:51     return fn(*args)\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1300, in _run_fn\n17:24:51     status, run_metadata)\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\contextlib.py\", line 66, in __exit__\n17:24:51     next(self.gen)\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status\n17:24:51     c_api.TF_GetCode(status))\n17:24:51 tensorflow.python.framework.errors_impl.NotFoundError: Key v0 not found in checkpoint\n17:24:51 \t [[Node: save_1/RestoreV2 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_save_1/Const_0_0, save_1/RestoreV2/tensor_names, save_1/RestoreV2/shape_and_slices)]]\n</code></pre>\n<p>I found out that <code>TF_SAVER_LENIENT_NAMES</code> environment variable set at<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/saver_test.py#L2474\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/saver_test.py#L2474</a> is not propagated to the <a href=\"https://github.com/tensorflow/tensorflow/blob/bf6df5e2330dff8383869999840578fa5128e794/tensorflow/core/util/tensor_bundle/tensor_bundle.cc#L597\">C++ module</a>.</p>\n<p>The test passes when running with <code>--test_env=TF_SAVER_LENIENT_NAMES=True</code>.</p>\n<p>This is only happening in the Bazel build, but not in the CMake build. We need to investigate the reason.</p>", "body_text": "http://ci.tensorflow.org/job/tf-master-win-bzl/1515/console\n17:24:51 ERROR: testSaveRestore (__main__.LenientNamesTest)\n17:24:51 ----------------------------------------------------------------------\n17:24:51 Traceback (most recent call last):\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1321, in _do_call\n17:24:51     return fn(*args)\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1300, in _run_fn\n17:24:51     status, run_metadata)\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\contextlib.py\", line 66, in __exit__\n17:24:51     next(self.gen)\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status\n17:24:51     c_api.TF_GetCode(status))\n17:24:51 tensorflow.python.framework.errors_impl.NotFoundError: Key v0 not found in checkpoint\n17:24:51 \t [[Node: save_1/RestoreV2 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_save_1/Const_0_0, save_1/RestoreV2/tensor_names, save_1/RestoreV2/shape_and_slices)]]\n\nI found out that TF_SAVER_LENIENT_NAMES environment variable set at\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/saver_test.py#L2474 is not propagated to the C++ module.\nThe test passes when running with --test_env=TF_SAVER_LENIENT_NAMES=True.\nThis is only happening in the Bazel build, but not in the CMake build. We need to investigate the reason.", "body": "http://ci.tensorflow.org/job/tf-master-win-bzl/1515/console\r\n\r\n```\r\n17:24:51 ERROR: testSaveRestore (__main__.LenientNamesTest)\r\n17:24:51 ----------------------------------------------------------------------\r\n17:24:51 Traceback (most recent call last):\r\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1321, in _do_call\r\n17:24:51     return fn(*args)\r\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1300, in _run_fn\r\n17:24:51     status, run_metadata)\r\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\contextlib.py\", line 66, in __exit__\r\n17:24:51     next(self.gen)\r\n17:24:51   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status\r\n17:24:51     c_api.TF_GetCode(status))\r\n17:24:51 tensorflow.python.framework.errors_impl.NotFoundError: Key v0 not found in checkpoint\r\n17:24:51 \t [[Node: save_1/RestoreV2 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_save_1/Const_0_0, save_1/RestoreV2/tensor_names, save_1/RestoreV2/shape_and_slices)]]\r\n```\r\nI found out that `TF_SAVER_LENIENT_NAMES` environment variable set at\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/saver_test.py#L2474 is not propagated to the [C++ module](https://github.com/tensorflow/tensorflow/blob/bf6df5e2330dff8383869999840578fa5128e794/tensorflow/core/util/tensor_bundle/tensor_bundle.cc#L597).\r\n\r\nThe test passes when running with `--test_env=TF_SAVER_LENIENT_NAMES=True`.\r\n\r\nThis is only happening in the Bazel build, but not in the CMake build. We need to investigate the reason.\r\n\r\n"}
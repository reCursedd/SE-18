{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/279", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/279/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/279/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/279", "id": 117671145, "node_id": "MDU6SXNzdWUxMTc2NzExNDU=", "number": 279, "title": "ResourceExhaustedError when testing Deep MNIST for experts", "user": {"login": "andorremus", "id": 9131872, "node_id": "MDQ6VXNlcjkxMzE4NzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/9131872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andorremus", "html_url": "https://github.com/andorremus", "followers_url": "https://api.github.com/users/andorremus/followers", "following_url": "https://api.github.com/users/andorremus/following{/other_user}", "gists_url": "https://api.github.com/users/andorremus/gists{/gist_id}", "starred_url": "https://api.github.com/users/andorremus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andorremus/subscriptions", "organizations_url": "https://api.github.com/users/andorremus/orgs", "repos_url": "https://api.github.com/users/andorremus/repos", "events_url": "https://api.github.com/users/andorremus/events{/privacy}", "received_events_url": "https://api.github.com/users/andorremus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-11-18T20:13:16Z", "updated_at": "2017-02-27T09:34:11Z", "closed_at": "2015-11-18T20:17:06Z", "author_association": "NONE", "body_html": "<p>tensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }<br>\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]<br>\n[[Node: range_3/_21 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_207_range_3\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nCaused by op u'Conv2D_1', defined at:</p>\n<p>A bit more info here</p>\n<p>I tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 256 (256B) Pool: chunks: 64 free: 24 cumulative malloc: 73160 cumulative freed: 73120<br>\nNumber of chunks: 64, in_use chunks: 40<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 512 (512B) Pool: chunks: 8 free: 8 cumulative malloc: 3040 cumulative freed: 3040<br>\nNumber of chunks: 8, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2048 (2.0KiB) Pool: chunks: 16 free: 16 cumulative malloc: 28080 cumulative freed: 28080<br>\nNumber of chunks: 16, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4096 (4.0KiB) Pool: chunks: 16 free: 5 cumulative malloc: 24035 cumulative freed: 24024<br>\nNumber of chunks: 16, in_use chunks: 11<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 16384 (16.0KiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1<br>\nNumber of chunks: 1, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 32768 (32.0KiB) Pool: chunks: 4 free: 2 cumulative malloc: 1002 cumulative freed: 1000<br>\nNumber of chunks: 4, in_use chunks: 2<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 65536 (64.0KiB) Pool: chunks: 8 free: 3 cumulative malloc: 2011 cumulative freed: 2006<br>\nNumber of chunks: 8, in_use chunks: 5<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 81920 (80.0KiB) Pool: chunks: 2 free: 1 cumulative malloc: 3 cumulative freed: 2<br>\nNumber of chunks: 2, in_use chunks: 1<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 163840 (160.0KiB) Pool: chunks: 8 free: 8 cumulative malloc: 8020 cumulative freed: 8020<br>\nNumber of chunks: 8, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 212992 (208.0KiB) Pool: chunks: 20 free: 15 cumulative malloc: 42248 cumulative freed: 42243<br>\nNumber of chunks: 20, in_use chunks: 5<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 327680 (320.0KiB) Pool: chunks: 4 free: 4 cumulative malloc: 2000 cumulative freed: 2000<br>\nNumber of chunks: 4, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 425984 (416.0KiB) Pool: chunks: 4 free: 4 cumulative malloc: 5 cumulative freed: 5<br>\nNumber of chunks: 4, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 655360 (640.0KiB) Pool: chunks: 4 free: 4 cumulative malloc: 8020 cumulative freed: 8020<br>\nNumber of chunks: 4, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1310720 (1.25MiB) Pool: chunks: 6 free: 6 cumulative malloc: 12020 cumulative freed: 12020<br>\nNumber of chunks: 6, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2097152 (2.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2020 cumulative freed: 2020<br>\nNumber of chunks: 1, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2621440 (2.50MiB) Pool: chunks: 8 free: 8 cumulative malloc: 16040 cumulative freed: 16040<br>\nNumber of chunks: 8, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 5242880 (5.00MiB) Pool: chunks: 8 free: 8 cumulative malloc: 18060 cumulative freed: 18060<br>\nNumber of chunks: 8, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 13631488 (13.00MiB) Pool: chunks: 8 free: 3 cumulative malloc: 2008 cumulative freed: 2003<br>\nNumber of chunks: 8, in_use chunks: 5<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 31457280 (30.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2 cumulative freed: 2<br>\nNumber of chunks: 1, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 41943040 (40.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1<br>\nNumber of chunks: 1, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 251658240 (240.00MiB) Pool: chunks: 1 free: 0 cumulative malloc: 1 cumulative freed: 0<br>\nNumber of chunks: 1, in_use chunks: 1<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 503316480 (480.00MiB) Pool: chunks: 0 free: 0 cumulative malloc: 0 cumulative freed: 0<br>\nNumber of chunks: 0, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1006632960 (960.00MiB) Pool: chunks: 3 free: 3 cumulative malloc: 3 cumulative freed: 3<br>\nNumber of chunks: 3, in_use chunks: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:345] Aggregate Region Memory: 3576057856 (3.33GiB)<br>\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:347] Aggregate Chunk Memory: 3539046400 (3.30GiB)<br>\nW tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:89] Out of GPU memory, see memory state dump above<br>\nW tensorflow/core/kernels/conv_ops.cc:162] Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }<br>\nW tensorflow/core/common_runtime/executor.cc:1027] 0x3c81ab0 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }<br>\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]<br>\nW tensorflow/core/common_runtime/executor.cc:1027] 0x49fab20 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }<br>\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]<br>\n[[Node: range_3/_21 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_207_range_3\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nW tensorflow/core/common_runtime/executor.cc:1027] 0x49fab20 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }<br>\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]<br>\n[[Node: Cast_1/_19 = <em>Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_206_Cast_1\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nTraceback (most recent call last):<br>\nFile \"/home/andorremus/PycharmProjects/facial-keypoints/mnist.py\", line 93, in <br>\nprint \"test accuracy %g\" % accuracy.eval(feed_dict={x: mnist.test.images, y</em>: mnist.test.labels, keep_prob:1.0}, session=sess)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 405, in eval<br>\nreturn _eval_using_default_session(self, feed_dict, self.graph, session)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2728, in _eval_using_default_session<br>\nreturn session.run(tensors, feed_dict)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 345, in run<br>\nresults = self._do_run(target_list, unique_fetch_targets, feed_dict_string)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 419, in _do_run<br>\ne.code)<br>\ntensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }<br>\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]<br>\n[[Node: range_3/_21 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_207_range_3\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nCaused by op u'Conv2D_1', defined at:<br>\nFile \"/home/andorremus/PycharmProjects/facial-keypoints/mnist.py\", line 63, in <br>\nh_conv2 = tf.nn.relu(conv2d(h_pool1, W_conv2))<br>\nFile \"/home/andorremus/PycharmProjects/facial-keypoints/mnist.py\", line 42, in conv2d<br>\nreturn tf.nn.conv2d(x, W, strides=[1, 1, 1, 1], padding='SAME')<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 207, in conv2d<br>\nuse_cudnn_on_gpu=use_cudnn_on_gpu, name=name)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op<br>\nop_def=op_def)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 988, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>", "body_text": "tensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\n[[Node: range_3/_21 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_207_range_3\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nCaused by op u'Conv2D_1', defined at:\nA bit more info here\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 256 (256B) Pool: chunks: 64 free: 24 cumulative malloc: 73160 cumulative freed: 73120\nNumber of chunks: 64, in_use chunks: 40\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 512 (512B) Pool: chunks: 8 free: 8 cumulative malloc: 3040 cumulative freed: 3040\nNumber of chunks: 8, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2048 (2.0KiB) Pool: chunks: 16 free: 16 cumulative malloc: 28080 cumulative freed: 28080\nNumber of chunks: 16, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4096 (4.0KiB) Pool: chunks: 16 free: 5 cumulative malloc: 24035 cumulative freed: 24024\nNumber of chunks: 16, in_use chunks: 11\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 16384 (16.0KiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 32768 (32.0KiB) Pool: chunks: 4 free: 2 cumulative malloc: 1002 cumulative freed: 1000\nNumber of chunks: 4, in_use chunks: 2\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 65536 (64.0KiB) Pool: chunks: 8 free: 3 cumulative malloc: 2011 cumulative freed: 2006\nNumber of chunks: 8, in_use chunks: 5\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 81920 (80.0KiB) Pool: chunks: 2 free: 1 cumulative malloc: 3 cumulative freed: 2\nNumber of chunks: 2, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 163840 (160.0KiB) Pool: chunks: 8 free: 8 cumulative malloc: 8020 cumulative freed: 8020\nNumber of chunks: 8, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 212992 (208.0KiB) Pool: chunks: 20 free: 15 cumulative malloc: 42248 cumulative freed: 42243\nNumber of chunks: 20, in_use chunks: 5\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 327680 (320.0KiB) Pool: chunks: 4 free: 4 cumulative malloc: 2000 cumulative freed: 2000\nNumber of chunks: 4, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 425984 (416.0KiB) Pool: chunks: 4 free: 4 cumulative malloc: 5 cumulative freed: 5\nNumber of chunks: 4, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 655360 (640.0KiB) Pool: chunks: 4 free: 4 cumulative malloc: 8020 cumulative freed: 8020\nNumber of chunks: 4, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1310720 (1.25MiB) Pool: chunks: 6 free: 6 cumulative malloc: 12020 cumulative freed: 12020\nNumber of chunks: 6, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2097152 (2.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2020 cumulative freed: 2020\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2621440 (2.50MiB) Pool: chunks: 8 free: 8 cumulative malloc: 16040 cumulative freed: 16040\nNumber of chunks: 8, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 5242880 (5.00MiB) Pool: chunks: 8 free: 8 cumulative malloc: 18060 cumulative freed: 18060\nNumber of chunks: 8, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 13631488 (13.00MiB) Pool: chunks: 8 free: 3 cumulative malloc: 2008 cumulative freed: 2003\nNumber of chunks: 8, in_use chunks: 5\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 31457280 (30.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2 cumulative freed: 2\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 41943040 (40.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 251658240 (240.00MiB) Pool: chunks: 1 free: 0 cumulative malloc: 1 cumulative freed: 0\nNumber of chunks: 1, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 503316480 (480.00MiB) Pool: chunks: 0 free: 0 cumulative malloc: 0 cumulative freed: 0\nNumber of chunks: 0, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1006632960 (960.00MiB) Pool: chunks: 3 free: 3 cumulative malloc: 3 cumulative freed: 3\nNumber of chunks: 3, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:345] Aggregate Region Memory: 3576057856 (3.33GiB)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:347] Aggregate Chunk Memory: 3539046400 (3.30GiB)\nW tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:89] Out of GPU memory, see memory state dump above\nW tensorflow/core/kernels/conv_ops.cc:162] Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\nW tensorflow/core/common_runtime/executor.cc:1027] 0x3c81ab0 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\nW tensorflow/core/common_runtime/executor.cc:1027] 0x49fab20 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\n[[Node: range_3/_21 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_207_range_3\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nW tensorflow/core/common_runtime/executor.cc:1027] 0x49fab20 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\n[[Node: Cast_1/_19 = Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_206_Cast_1\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nTraceback (most recent call last):\nFile \"/home/andorremus/PycharmProjects/facial-keypoints/mnist.py\", line 93, in \nprint \"test accuracy %g\" % accuracy.eval(feed_dict={x: mnist.test.images, y: mnist.test.labels, keep_prob:1.0}, session=sess)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 405, in eval\nreturn _eval_using_default_session(self, feed_dict, self.graph, session)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2728, in _eval_using_default_session\nreturn session.run(tensors, feed_dict)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 345, in run\nresults = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 419, in _do_run\ne.code)\ntensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n[[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\n[[Node: range_3/_21 = _Recvclient_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_207_range_3\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nCaused by op u'Conv2D_1', defined at:\nFile \"/home/andorremus/PycharmProjects/facial-keypoints/mnist.py\", line 63, in \nh_conv2 = tf.nn.relu(conv2d(h_pool1, W_conv2))\nFile \"/home/andorremus/PycharmProjects/facial-keypoints/mnist.py\", line 42, in conv2d\nreturn tf.nn.conv2d(x, W, strides=[1, 1, 1, 1], padding='SAME')\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 207, in conv2d\nuse_cudnn_on_gpu=use_cudnn_on_gpu, name=name)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op\nop_def=op_def)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 988, in init\nself._traceback = _extract_stack()", "body": "tensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n     [[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\n     [[Node: range_3/_21 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_207_range_3\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\nCaused by op u'Conv2D_1', defined at:\n\nA bit more info here \n\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 256 (256B) Pool: chunks: 64 free: 24 cumulative malloc: 73160 cumulative freed: 73120\nNumber of chunks: 64, in_use chunks: 40\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 512 (512B) Pool: chunks: 8 free: 8 cumulative malloc: 3040 cumulative freed: 3040\nNumber of chunks: 8, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2048 (2.0KiB) Pool: chunks: 16 free: 16 cumulative malloc: 28080 cumulative freed: 28080\nNumber of chunks: 16, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 4096 (4.0KiB) Pool: chunks: 16 free: 5 cumulative malloc: 24035 cumulative freed: 24024\nNumber of chunks: 16, in_use chunks: 11\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 16384 (16.0KiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 32768 (32.0KiB) Pool: chunks: 4 free: 2 cumulative malloc: 1002 cumulative freed: 1000\nNumber of chunks: 4, in_use chunks: 2\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 65536 (64.0KiB) Pool: chunks: 8 free: 3 cumulative malloc: 2011 cumulative freed: 2006\nNumber of chunks: 8, in_use chunks: 5\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 81920 (80.0KiB) Pool: chunks: 2 free: 1 cumulative malloc: 3 cumulative freed: 2\nNumber of chunks: 2, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 163840 (160.0KiB) Pool: chunks: 8 free: 8 cumulative malloc: 8020 cumulative freed: 8020\nNumber of chunks: 8, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 212992 (208.0KiB) Pool: chunks: 20 free: 15 cumulative malloc: 42248 cumulative freed: 42243\nNumber of chunks: 20, in_use chunks: 5\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 327680 (320.0KiB) Pool: chunks: 4 free: 4 cumulative malloc: 2000 cumulative freed: 2000\nNumber of chunks: 4, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 425984 (416.0KiB) Pool: chunks: 4 free: 4 cumulative malloc: 5 cumulative freed: 5\nNumber of chunks: 4, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 655360 (640.0KiB) Pool: chunks: 4 free: 4 cumulative malloc: 8020 cumulative freed: 8020\nNumber of chunks: 4, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1310720 (1.25MiB) Pool: chunks: 6 free: 6 cumulative malloc: 12020 cumulative freed: 12020\nNumber of chunks: 6, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2097152 (2.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2020 cumulative freed: 2020\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 2621440 (2.50MiB) Pool: chunks: 8 free: 8 cumulative malloc: 16040 cumulative freed: 16040\nNumber of chunks: 8, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 5242880 (5.00MiB) Pool: chunks: 8 free: 8 cumulative malloc: 18060 cumulative freed: 18060\nNumber of chunks: 8, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 13631488 (13.00MiB) Pool: chunks: 8 free: 3 cumulative malloc: 2008 cumulative freed: 2003\nNumber of chunks: 8, in_use chunks: 5\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 31457280 (30.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 2 cumulative freed: 2\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 41943040 (40.00MiB) Pool: chunks: 1 free: 1 cumulative malloc: 1 cumulative freed: 1\nNumber of chunks: 1, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 251658240 (240.00MiB) Pool: chunks: 1 free: 0 cumulative malloc: 1 cumulative freed: 0\nNumber of chunks: 1, in_use chunks: 1\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 503316480 (480.00MiB) Pool: chunks: 0 free: 0 cumulative malloc: 0 cumulative freed: 0\nNumber of chunks: 0, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:339] Chunk size: 1006632960 (960.00MiB) Pool: chunks: 3 free: 3 cumulative malloc: 3 cumulative freed: 3\nNumber of chunks: 3, in_use chunks: 0\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:345] Aggregate Region Memory: 3576057856 (3.33GiB)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:347] Aggregate Chunk Memory: 3539046400 (3.30GiB)\nW tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:89] Out of GPU memory, see memory state dump above\nW tensorflow/core/kernels/conv_ops.cc:162] Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\nW tensorflow/core/common_runtime/executor.cc:1027] 0x3c81ab0 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n     [[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\nW tensorflow/core/common_runtime/executor.cc:1027] 0x49fab20 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n     [[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\n     [[Node: range_3/_21 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_207_range_3\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\nW tensorflow/core/common_runtime/executor.cc:1027] 0x49fab20 Compute status: Resource exhausted: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n     [[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\n     [[Node: Cast_1/_19 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_206_Cast_1\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\nTraceback (most recent call last):\n  File \"/home/andorremus/PycharmProjects/facial-keypoints/mnist.py\", line 93, in <module>\n    print \"test accuracy %g\" % accuracy.eval(feed_dict={x: mnist.test.images, y_: mnist.test.labels, keep_prob:1.0}, session=sess)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 405, in eval\n    return _eval_using_default_session(self, feed_dict, self.graph, session)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2728, in _eval_using_default_session\n    return session.run(tensors, feed_dict)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 345, in run\n    results = self._do_run(target_list, unique_fetch_targets, feed_dict_string)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 419, in _do_run\n    e.code)\ntensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shapedim { size: 10000 } dim { size: 14 } dim { size: 14 } dim { size: 64 }\n     [[Node: Conv2D_1 = Conv2D[T=DT_FLOAT, padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](MaxPool, Variable_4)]]\n     [[Node: range_3/_21 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_207_range_3\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\nCaused by op u'Conv2D_1', defined at:\n  File \"/home/andorremus/PycharmProjects/facial-keypoints/mnist.py\", line 63, in <module>\n    h_conv2 = tf.nn.relu(conv2d(h_pool1, W_conv2))\n  File \"/home/andorremus/PycharmProjects/facial-keypoints/mnist.py\", line 42, in conv2d\n    return tf.nn.conv2d(x, W, strides=[1, 1, 1, 1], padding='SAME')\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 207, in conv2d\n    use_cudnn_on_gpu=use_cudnn_on_gpu, name=name)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 633, in apply_op\n    op_def=op_def)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1710, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 988, in __init__\n    self._traceback = _extract_stack()\n"}
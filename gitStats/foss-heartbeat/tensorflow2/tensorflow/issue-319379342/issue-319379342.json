{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19013", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19013/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19013/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19013/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19013", "id": 319379342, "node_id": "MDU6SXNzdWUzMTkzNzkzNDI=", "number": 19013, "title": "[Feature Request] Reuse curl handle in CurlHttpRequest class", "user": {"login": "damienpontifex", "id": 1321276, "node_id": "MDQ6VXNlcjEzMjEyNzY=", "avatar_url": "https://avatars1.githubusercontent.com/u/1321276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/damienpontifex", "html_url": "https://github.com/damienpontifex", "followers_url": "https://api.github.com/users/damienpontifex/followers", "following_url": "https://api.github.com/users/damienpontifex/following{/other_user}", "gists_url": "https://api.github.com/users/damienpontifex/gists{/gist_id}", "starred_url": "https://api.github.com/users/damienpontifex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/damienpontifex/subscriptions", "organizations_url": "https://api.github.com/users/damienpontifex/orgs", "repos_url": "https://api.github.com/users/damienpontifex/repos", "events_url": "https://api.github.com/users/damienpontifex/events{/privacy}", "received_events_url": "https://api.github.com/users/damienpontifex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-05-02T01:15:18Z", "updated_at": "2018-06-15T03:36:29Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: no</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: macOS</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: v1.7.0-3-g024aecf414 1.7.0</li>\n<li><strong>Python version</strong>: 3.6.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.12.0-homebrew</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: Apple LLVM version 9.1.0 (clang-902.0.39.1)</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>: N/A</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>In the <a href=\"https://curl.haxx.se/libcurl/c/libcurl-tutorial.html\" rel=\"nofollow\">libcurl programming tutorial</a> under the section \"Persistence Is The Way to Happiness\" it notes that re-cycling the same easy handle can give several benefits. This could lead to performance improvements when using remote filesystems that utilise this class (e.g. gcs file system and I've been working on azure blob storage). Currently it seems that a single instance of the <code>CurlHttpRequest</code> and hence curl handle can only be used once and must be instantiated per request.</p>\n<p>Is this worth investigating to integrate some sort of 'reset' method to this class along with <a href=\"https://curl.haxx.se/libcurl/c/curl_easy_reset.html\" rel=\"nofollow\">curl_easy_reset</a> plus extract defaults set in the constructor into a 'setup defaults' method? Plus some profiling to ensure the change is better?</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): v1.7.0-3-g024aecf414 1.7.0\nPython version: 3.6.5\nBazel version (if compiling from source): 0.12.0-homebrew\nGCC/Compiler version (if compiling from source): Apple LLVM version 9.1.0 (clang-902.0.39.1)\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce: N/A\n\nDescribe the problem\nIn the libcurl programming tutorial under the section \"Persistence Is The Way to Happiness\" it notes that re-cycling the same easy handle can give several benefits. This could lead to performance improvements when using remote filesystems that utilise this class (e.g. gcs file system and I've been working on azure blob storage). Currently it seems that a single instance of the CurlHttpRequest and hence curl handle can only be used once and must be instantiated per request.\nIs this worth investigating to integrate some sort of 'reset' method to this class along with curl_easy_reset plus extract defaults set in the constructor into a 'setup defaults' method? Plus some profiling to ensure the change is better?", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: macOS\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: v1.7.0-3-g024aecf414 1.7.0\r\n- **Python version**: 3.6.5\r\n- **Bazel version (if compiling from source)**: 0.12.0-homebrew\r\n- **GCC/Compiler version (if compiling from source)**: Apple LLVM version 9.1.0 (clang-902.0.39.1)\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: N/A\r\n\r\n### Describe the problem\r\nIn the [libcurl programming tutorial](https://curl.haxx.se/libcurl/c/libcurl-tutorial.html) under the section \"Persistence Is The Way to Happiness\" it notes that re-cycling the same easy handle can give several benefits. This could lead to performance improvements when using remote filesystems that utilise this class (e.g. gcs file system and I've been working on azure blob storage). Currently it seems that a single instance of the `CurlHttpRequest` and hence curl handle can only be used once and must be instantiated per request.\r\n\r\nIs this worth investigating to integrate some sort of 'reset' method to this class along with [curl_easy_reset](https://curl.haxx.se/libcurl/c/curl_easy_reset.html) plus extract defaults set in the constructor into a 'setup defaults' method? Plus some profiling to ensure the change is better?"}
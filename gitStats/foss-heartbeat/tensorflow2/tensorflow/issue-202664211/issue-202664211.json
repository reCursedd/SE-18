{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7021", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7021/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7021/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7021/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/7021", "id": 202664211, "node_id": "MDExOlB1bGxSZXF1ZXN0MTAyODEwNDQ1", "number": 7021, "title": "Remove errorneous squeeze in `tf.contrib.losses.sparse_softmax_cross_entropy_loss`", "user": {"login": "foxik", "id": 560016, "node_id": "MDQ6VXNlcjU2MDAxNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/560016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/foxik", "html_url": "https://github.com/foxik", "followers_url": "https://api.github.com/users/foxik/followers", "following_url": "https://api.github.com/users/foxik/following{/other_user}", "gists_url": "https://api.github.com/users/foxik/gists{/gist_id}", "starred_url": "https://api.github.com/users/foxik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/foxik/subscriptions", "organizations_url": "https://api.github.com/users/foxik/orgs", "repos_url": "https://api.github.com/users/foxik/repos", "events_url": "https://api.github.com/users/foxik/events{/privacy}", "received_events_url": "https://api.github.com/users/foxik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2017-01-23T22:04:05Z", "updated_at": "2017-02-01T21:27:23Z", "closed_at": "2017-02-01T21:27:14Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/7021", "html_url": "https://github.com/tensorflow/tensorflow/pull/7021", "diff_url": "https://github.com/tensorflow/tensorflow/pull/7021.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/7021.patch"}, "body_html": "<p>The <code>tf.contrib.losses.sparse_softmax_cross_entropy_loss</code> has an weights parameter which can be used to weight the individual batch elements. The weights parameter can have various shape, which are all taken care of in <code>compute_weighted_loss</code>.</p>\n<p>However, the <code>sparse_softmax_cross_entropy_loss</code> methods contains an errorneous squeeze of the weights. If some dimension of weights is not known, the number of dimensions after the squeeze is unknown, which causes the <code>compute_weighted_loss</code> method to throw an exception. However, if the squeeze in <code>sparse_softmax_cross_entropy_loss</code> is not called, <code>compute_weighted_loss</code> can deal even with unknown dimensions of weights.</p>\n<p>Note that <code>tf.contrib.losses.softmax_cross_entropy_loss</code> does not contain the squeeze of the weights, even if it uses the weights argument in an equal way.</p>\n<p>Should <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #6846.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"200788455\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6846\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6846/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/6846\">#6846</a>.</p>", "body_text": "The tf.contrib.losses.sparse_softmax_cross_entropy_loss has an weights parameter which can be used to weight the individual batch elements. The weights parameter can have various shape, which are all taken care of in compute_weighted_loss.\nHowever, the sparse_softmax_cross_entropy_loss methods contains an errorneous squeeze of the weights. If some dimension of weights is not known, the number of dimensions after the squeeze is unknown, which causes the compute_weighted_loss method to throw an exception. However, if the squeeze in sparse_softmax_cross_entropy_loss is not called, compute_weighted_loss can deal even with unknown dimensions of weights.\nNote that tf.contrib.losses.softmax_cross_entropy_loss does not contain the squeeze of the weights, even if it uses the weights argument in an equal way.\nShould fix #6846.", "body": "The `tf.contrib.losses.sparse_softmax_cross_entropy_loss` has an weights parameter which can be used to weight the individual batch elements. The weights parameter can have various shape, which are all taken care of in `compute_weighted_loss`.\r\n\r\nHowever, the `sparse_softmax_cross_entropy_loss` methods contains an errorneous squeeze of the weights. If some dimension of weights is not known, the number of dimensions after the squeeze is unknown, which causes the `compute_weighted_loss` method to throw an exception. However, if the squeeze in `sparse_softmax_cross_entropy_loss` is not called, `compute_weighted_loss` can deal even with unknown dimensions of weights.\r\n\r\nNote that `tf.contrib.losses.softmax_cross_entropy_loss` does not contain the squeeze of the weights, even if it uses the weights argument in an equal way.\r\n\r\nShould fix #6846."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4525", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4525/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4525/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4525/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4525", "id": 178492751, "node_id": "MDU6SXNzdWUxNzg0OTI3NTE=", "number": 4525, "title": "Python Exceptions lead to CUDA Memory Leak", "user": {"login": "kuza55", "id": 387986, "node_id": "MDQ6VXNlcjM4Nzk4Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/387986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kuza55", "html_url": "https://github.com/kuza55", "followers_url": "https://api.github.com/users/kuza55/followers", "following_url": "https://api.github.com/users/kuza55/following{/other_user}", "gists_url": "https://api.github.com/users/kuza55/gists{/gist_id}", "starred_url": "https://api.github.com/users/kuza55/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kuza55/subscriptions", "organizations_url": "https://api.github.com/users/kuza55/orgs", "repos_url": "https://api.github.com/users/kuza55/repos", "events_url": "https://api.github.com/users/kuza55/events{/privacy}", "received_events_url": "https://api.github.com/users/kuza55/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-09-22T00:15:56Z", "updated_at": "2016-09-22T05:04:22Z", "closed_at": "2016-09-22T05:04:22Z", "author_association": "NONE", "body_html": "<p>I've been using hyperopt in it's MondoTrials configuration to do a grid search of my hyperparameters and the process has been slow going since every time my python program crashes for whatever reason, my CUDA memory is not freed</p>\n<p>Here is the output i see from nvidia-smi:</p>\n<pre><code>$ nvidia-smi\nWed Sep 21 20:09:42 2016       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.44                 Driver Version: 367.44                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX TIT...  Off  | 0000:03:00.0      On |                  N/A |\n| 22%   32C    P8    15W / 250W |  11848MiB / 12198MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      3475    G   /usr/lib/xorg/Xorg                             207MiB |\n|    0      4579    G   compiz                                          52MiB |\n|    0      5258    G   /opt/google/chrom                               86MiB |\n|    0      6144    G   ...s-passed-by-fd --v8-snapshot-passed-by-fd    37MiB |\n+-----------------------------------------------------------------------------+\n</code></pre>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>Lots of people asking questions, no-one with answers.</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 16.04</p>\n<p>Installed version of CUDA and cuDNN: CUDA 7.5 cuDNN 5.1</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li><a href=\"https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.10.0-cp27-none-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.10.0-cp27-none-linux_x86_64.whl</a></li>\n<li>0.10.0</li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>I don't have a minimal sample yet.</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>Rebooting works, but is painful</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>Please let me know what logs would be useful.</p>", "body_text": "I've been using hyperopt in it's MondoTrials configuration to do a grid search of my hyperparameters and the process has been slow going since every time my python program crashes for whatever reason, my CUDA memory is not freed\nHere is the output i see from nvidia-smi:\n$ nvidia-smi\nWed Sep 21 20:09:42 2016       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.44                 Driver Version: 367.44                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX TIT...  Off  | 0000:03:00.0      On |                  N/A |\n| 22%   32C    P8    15W / 250W |  11848MiB / 12198MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      3475    G   /usr/lib/xorg/Xorg                             207MiB |\n|    0      4579    G   compiz                                          52MiB |\n|    0      5258    G   /opt/google/chrom                               86MiB |\n|    0      6144    G   ...s-passed-by-fd --v8-snapshot-passed-by-fd    37MiB |\n+-----------------------------------------------------------------------------+\n\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nLots of people asking questions, no-one with answers.\nEnvironment info\nOperating System: Ubuntu 16.04\nInstalled version of CUDA and cuDNN: CUDA 7.5 cuDNN 5.1\nIf installed from binary pip package, provide:\n\nhttps://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.10.0-cp27-none-linux_x86_64.whl\n0.10.0\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nI don't have a minimal sample yet.\nWhat other attempted solutions have you tried?\nRebooting works, but is painful\nLogs or other output that would be helpful\nPlease let me know what logs would be useful.", "body": "I've been using hyperopt in it's MondoTrials configuration to do a grid search of my hyperparameters and the process has been slow going since every time my python program crashes for whatever reason, my CUDA memory is not freed\n\nHere is the output i see from nvidia-smi:\n\n```\n$ nvidia-smi\nWed Sep 21 20:09:42 2016       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.44                 Driver Version: 367.44                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX TIT...  Off  | 0000:03:00.0      On |                  N/A |\n| 22%   32C    P8    15W / 250W |  11848MiB / 12198MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      3475    G   /usr/lib/xorg/Xorg                             207MiB |\n|    0      4579    G   compiz                                          52MiB |\n|    0      5258    G   /opt/google/chrom                               86MiB |\n|    0      6144    G   ...s-passed-by-fd --v8-snapshot-passed-by-fd    37MiB |\n+-----------------------------------------------------------------------------+\n```\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n\nLots of people asking questions, no-one with answers.\n### Environment info\n\nOperating System: Ubuntu 16.04\n\nInstalled version of CUDA and cuDNN: CUDA 7.5 cuDNN 5.1\n\nIf installed from binary pip package, provide:\n1. https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.10.0-cp27-none-linux_x86_64.whl\n2. 0.10.0\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n\nI don't have a minimal sample yet.\n### What other attempted solutions have you tried?\n\nRebooting works, but is painful\n### Logs or other output that would be helpful\n\nPlease let me know what logs would be useful.\n"}
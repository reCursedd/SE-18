{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/212560004", "html_url": "https://github.com/tensorflow/tensorflow/pull/1771#issuecomment-212560004", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1771", "id": 212560004, "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjU2MDAwNA==", "user": {"login": "alonsovidales", "id": 1468785, "node_id": "MDQ6VXNlcjE0Njg3ODU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1468785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alonsovidales", "html_url": "https://github.com/alonsovidales", "followers_url": "https://api.github.com/users/alonsovidales/followers", "following_url": "https://api.github.com/users/alonsovidales/following{/other_user}", "gists_url": "https://api.github.com/users/alonsovidales/gists{/gist_id}", "starred_url": "https://api.github.com/users/alonsovidales/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alonsovidales/subscriptions", "organizations_url": "https://api.github.com/users/alonsovidales/orgs", "repos_url": "https://api.github.com/users/alonsovidales/repos", "events_url": "https://api.github.com/users/alonsovidales/events{/privacy}", "received_events_url": "https://api.github.com/users/alonsovidales/received_events", "type": "User", "site_admin": false}, "created_at": "2016-04-20T19:03:09Z", "updated_at": "2016-04-20T19:03:09Z", "author_association": "NONE", "body_html": "<p>I have been trying to prepare the package to be go-gettable but since the *.pb.go files have to be generated, is not possible to do it with a simple \"go get\". The good news are that go get clones the repository using the --recurse-submodules, so with just a \"go get\" we have all the code in place to execute the \"go generate\".<br>\nI've added the section \"Installation\" to the README.md with an only one necessary command to get the package:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/<span class=\"pl-k\">;</span>go get <span class=\"pl-smi\">$TF_REPO</span> <span class=\"pl-k\">||</span> (go generate <span class=\"pl-smi\">$TF_REPO</span> <span class=\"pl-k\">&amp;&amp;</span> go get <span class=\"pl-smi\">$TF_REPO</span>)</pre></div>\n<p>Basically, the command tries to do the \"go get\", if it success doesn't continue, but this only can happen an odd situation where the package was previously installed. If the go get returns an error, since the code is already in place, it executes the \"go generate\" to compile the shared libraries, generate the .pb.go files and prepare all the other stuff leaving all ready to install the package with the last \"go get\".<br>\nI tested this solution and it works:</p>\n<div class=\"highlight highlight-source-shell\"><pre>\u279c <span class=\"pl-k\">~</span>/go-src/src/github.com rm -rf tensorflow/tensorflow/\n\u279c <span class=\"pl-k\">~</span>/go-src/src/github.com rm -rf tensorflow\n\u279c <span class=\"pl-k\">~</span>/go-src/src/github.com ln -s alonsovidales tensorflow\n\u279c <span class=\"pl-k\">~</span>/go-src/src/github.com TF_REPO_AUX=github.com/alonsovidales/tensorflow/tensorflow/contrib/go/<span class=\"pl-k\">;</span> TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/<span class=\"pl-k\">;</span>go get <span class=\"pl-smi\">$TF_REPO_AUX</span> <span class=\"pl-k\">||</span> (go generate <span class=\"pl-smi\">$TF_REPO</span> <span class=\"pl-k\">&amp;&amp;</span> go get <span class=\"pl-smi\">$TF_REPO</span>)\npackage github.com/alonsovidales/tensorflow/tensorflow/contrib/go: cannot find package <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>github.com/alonsovidales/tensorflow/tensorflow/contrib/go<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">in</span> any of:\n    /usr/local/go/src/github.com/alonsovidales/tensorflow/tensorflow/contrib/go (from <span class=\"pl-smi\">$GOROOT</span>)\n    /home/avidales/go-src/src/github.com/alonsovidales/tensorflow/tensorflow/contrib/go (from <span class=\"pl-smi\">$GOPATH</span>)\ncan<span class=\"pl-s\"><span class=\"pl-pds\">'</span>t load package: package github.com/tensorflow/tensorflow/tensorflow/contrib/go: cannot find package \"github.com/tensorflow/tensorflow/tensorflow/contrib/go\" in any of:</span>\n<span class=\"pl-s\">    /usr/local/go/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (from $GOROOT)</span>\n<span class=\"pl-s\">    /home/avidales/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (from $GOPATH)</span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com cd tensorflow/tensorflow/</span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com/tensorflow/tensorflow (master) git checkout go_bindings_tensors</span>\n<span class=\"pl-s\">Branch go_bindings_tensors set up to track remote branch go_bindings_tensors from origin.</span>\n<span class=\"pl-s\">Switched to a new branch <span class=\"pl-pds\">'</span></span>go_bindings_tensors<span class=\"pl-s\"><span class=\"pl-pds\">'</span></span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) TF_REPO_AUX=github.com/alonsovidales/tensorflow/tensorflow/contrib/go/; TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/;go get $TF_REPO_AUX || (go generate $TF_REPO &amp;&amp; go get $TF_REPO)</span>\n<span class=\"pl-s\">../../alonsovidales/tensorflow/tensorflow/contrib/go/graph.go:11:2: no buildable Go source files in /home/avidales/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go/proto</span>\n<span class=\"pl-s\">.......</span>\n<span class=\"pl-s\">(...)</span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) cd tensorflow/contrib/go/</span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (go_bindings_tensors) go test</span>\n<span class=\"pl-s\">PASS</span>\n<span class=\"pl-s\">ok      github.com/tensorflow/tensorflow/tensorflow/contrib/go  0.499s</span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (go_bindings_tensors) cd ../../../</span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) mkdir tensorflow/examples/label_image_go/data/</span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) wget https://storage.googleapis.com/download.tensorflow.org/models/inception_dec_2015.zip -O tensorflow/examples/label_image_go/data/inception_dec_2015.zip</span>\n<span class=\"pl-s\">--2016-04-20 20:55:14--  https://storage.googleapis.com/download.tensorflow.org/models/inception_dec_2015.zip</span>\n<span class=\"pl-s\">Resolving storage.googleapis.com (storage.googleapis.com)... 2a00:1450:4013:c01::80, 74.125.136.128</span>\n<span class=\"pl-s\">Connecting to storage.googleapis.com (storage.googleapis.com)|2a00:1450:4013:c01::80|:443... connected.</span>\n<span class=\"pl-s\">HTTP request sent, awaiting response... 200 OK</span>\n<span class=\"pl-s\">Length: 88631107 (85M) [application/zip]</span>\n<span class=\"pl-s\">Saving to: \u2018tensorflow/examples/label_image_go/data/inception_dec_2015.zip\u2019</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">100%[==========================================================&gt;] 88,631,107   716KB/s   in 1m 51s</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">2016-04-20 20:57:05 (781 KB/s) - \u2018tensorflow/examples/label_image_go/data/inception_dec_2015.zip\u2019 saved [88631107/88631107]</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) unzip tensorflow/examples/label_image_go/data/inception_dec_2015.zip -d tensorflow/examples/label_image_go/data/</span>\n<span class=\"pl-s\">Archive:  tensorflow/examples/label_image_go/data/inception_dec_2015.zip</span>\n<span class=\"pl-s\">  inflating: tensorflow/examples/label_image_go/data/imagenet_comp_graph_label_strings.txt</span>\n<span class=\"pl-s\">  inflating: tensorflow/examples/label_image_go/data/LICENSE</span>\n<span class=\"pl-s\">  inflating: tensorflow/examples/label_image_go/data/tensorflow_inception_graph.pb</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) go run ./tensorflow/examples/label_image_go/main.go ./tensorflow/examples/label_image/data/grace_hopper.jpg</span>\n<span class=\"pl-s\">military uniform : 0.6472986</span>\n<span class=\"pl-s\">suit : 0.04771947</span>\n<span class=\"pl-s\">academic gown : 0.02324065</span>\n<span class=\"pl-s\">bow tie : 0.015735544</span>\n<span class=\"pl-s\">bolo tie : 0.01450234</span></pre></div>\n<p>I had to do some tricks since it is still under my github account and not in the master branch, but it has to work with the line in the README.md after merge the PR.</p>\n<p>I also modified the code according to the last comments, fixed typos and relocated the Err* types :)</p>", "body_text": "I have been trying to prepare the package to be go-gettable but since the *.pb.go files have to be generated, is not possible to do it with a simple \"go get\". The good news are that go get clones the repository using the --recurse-submodules, so with just a \"go get\" we have all the code in place to execute the \"go generate\".\nI've added the section \"Installation\" to the README.md with an only one necessary command to get the package:\n$ TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/;go get $TF_REPO || (go generate $TF_REPO && go get $TF_REPO)\nBasically, the command tries to do the \"go get\", if it success doesn't continue, but this only can happen an odd situation where the package was previously installed. If the go get returns an error, since the code is already in place, it executes the \"go generate\" to compile the shared libraries, generate the .pb.go files and prepare all the other stuff leaving all ready to install the package with the last \"go get\".\nI tested this solution and it works:\n\u279c ~/go-src/src/github.com rm -rf tensorflow/tensorflow/\n\u279c ~/go-src/src/github.com rm -rf tensorflow\n\u279c ~/go-src/src/github.com ln -s alonsovidales tensorflow\n\u279c ~/go-src/src/github.com TF_REPO_AUX=github.com/alonsovidales/tensorflow/tensorflow/contrib/go/; TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/;go get $TF_REPO_AUX || (go generate $TF_REPO && go get $TF_REPO)\npackage github.com/alonsovidales/tensorflow/tensorflow/contrib/go: cannot find package \"github.com/alonsovidales/tensorflow/tensorflow/contrib/go\" in any of:\n    /usr/local/go/src/github.com/alonsovidales/tensorflow/tensorflow/contrib/go (from $GOROOT)\n    /home/avidales/go-src/src/github.com/alonsovidales/tensorflow/tensorflow/contrib/go (from $GOPATH)\ncan't load package: package github.com/tensorflow/tensorflow/tensorflow/contrib/go: cannot find package \"github.com/tensorflow/tensorflow/tensorflow/contrib/go\" in any of:\n    /usr/local/go/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (from $GOROOT)\n    /home/avidales/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (from $GOPATH)\n\u279c ~/go-src/src/github.com cd tensorflow/tensorflow/\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (master) git checkout go_bindings_tensors\nBranch go_bindings_tensors set up to track remote branch go_bindings_tensors from origin.\nSwitched to a new branch 'go_bindings_tensors'\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) TF_REPO_AUX=github.com/alonsovidales/tensorflow/tensorflow/contrib/go/; TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/;go get $TF_REPO_AUX || (go generate $TF_REPO && go get $TF_REPO)\n../../alonsovidales/tensorflow/tensorflow/contrib/go/graph.go:11:2: no buildable Go source files in /home/avidales/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go/proto\n.......\n(...)\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) cd tensorflow/contrib/go/\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (go_bindings_tensors) go test\nPASS\nok      github.com/tensorflow/tensorflow/tensorflow/contrib/go  0.499s\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (go_bindings_tensors) cd ../../../\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) mkdir tensorflow/examples/label_image_go/data/\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) wget https://storage.googleapis.com/download.tensorflow.org/models/inception_dec_2015.zip -O tensorflow/examples/label_image_go/data/inception_dec_2015.zip\n--2016-04-20 20:55:14--  https://storage.googleapis.com/download.tensorflow.org/models/inception_dec_2015.zip\nResolving storage.googleapis.com (storage.googleapis.com)... 2a00:1450:4013:c01::80, 74.125.136.128\nConnecting to storage.googleapis.com (storage.googleapis.com)|2a00:1450:4013:c01::80|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 88631107 (85M) [application/zip]\nSaving to: \u2018tensorflow/examples/label_image_go/data/inception_dec_2015.zip\u2019\n\n100%[==========================================================>] 88,631,107   716KB/s   in 1m 51s\n\n2016-04-20 20:57:05 (781 KB/s) - \u2018tensorflow/examples/label_image_go/data/inception_dec_2015.zip\u2019 saved [88631107/88631107]\n\n\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) unzip tensorflow/examples/label_image_go/data/inception_dec_2015.zip -d tensorflow/examples/label_image_go/data/\nArchive:  tensorflow/examples/label_image_go/data/inception_dec_2015.zip\n  inflating: tensorflow/examples/label_image_go/data/imagenet_comp_graph_label_strings.txt\n  inflating: tensorflow/examples/label_image_go/data/LICENSE\n  inflating: tensorflow/examples/label_image_go/data/tensorflow_inception_graph.pb\n\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) go run ./tensorflow/examples/label_image_go/main.go ./tensorflow/examples/label_image/data/grace_hopper.jpg\nmilitary uniform : 0.6472986\nsuit : 0.04771947\nacademic gown : 0.02324065\nbow tie : 0.015735544\nbolo tie : 0.01450234\nI had to do some tricks since it is still under my github account and not in the master branch, but it has to work with the line in the README.md after merge the PR.\nI also modified the code according to the last comments, fixed typos and relocated the Err* types :)", "body": "I have been trying to prepare the package to be go-gettable but since the *.pb.go files have to be generated, is not possible to do it with a simple \"go get\". The good news are that go get clones the repository using the --recurse-submodules, so with just a \"go get\" we have all the code in place to execute the \"go generate\".\nI've added the section \"Installation\" to the README.md with an only one necessary command to get the package:\n\n``` sh\n$ TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/;go get $TF_REPO || (go generate $TF_REPO && go get $TF_REPO)\n```\n\nBasically, the command tries to do the \"go get\", if it success doesn't continue, but this only can happen an odd situation where the package was previously installed. If the go get returns an error, since the code is already in place, it executes the \"go generate\" to compile the shared libraries, generate the .pb.go files and prepare all the other stuff leaving all ready to install the package with the last \"go get\".\nI tested this solution and it works:\n\n``` sh\n\u279c ~/go-src/src/github.com rm -rf tensorflow/tensorflow/\n\u279c ~/go-src/src/github.com rm -rf tensorflow\n\u279c ~/go-src/src/github.com ln -s alonsovidales tensorflow\n\u279c ~/go-src/src/github.com TF_REPO_AUX=github.com/alonsovidales/tensorflow/tensorflow/contrib/go/; TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/;go get $TF_REPO_AUX || (go generate $TF_REPO && go get $TF_REPO)\npackage github.com/alonsovidales/tensorflow/tensorflow/contrib/go: cannot find package \"github.com/alonsovidales/tensorflow/tensorflow/contrib/go\" in any of:\n    /usr/local/go/src/github.com/alonsovidales/tensorflow/tensorflow/contrib/go (from $GOROOT)\n    /home/avidales/go-src/src/github.com/alonsovidales/tensorflow/tensorflow/contrib/go (from $GOPATH)\ncan't load package: package github.com/tensorflow/tensorflow/tensorflow/contrib/go: cannot find package \"github.com/tensorflow/tensorflow/tensorflow/contrib/go\" in any of:\n    /usr/local/go/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (from $GOROOT)\n    /home/avidales/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (from $GOPATH)\n\u279c ~/go-src/src/github.com cd tensorflow/tensorflow/\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (master) git checkout go_bindings_tensors\nBranch go_bindings_tensors set up to track remote branch go_bindings_tensors from origin.\nSwitched to a new branch 'go_bindings_tensors'\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) TF_REPO_AUX=github.com/alonsovidales/tensorflow/tensorflow/contrib/go/; TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/;go get $TF_REPO_AUX || (go generate $TF_REPO && go get $TF_REPO)\n../../alonsovidales/tensorflow/tensorflow/contrib/go/graph.go:11:2: no buildable Go source files in /home/avidales/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go/proto\n.......\n(...)\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) cd tensorflow/contrib/go/\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (go_bindings_tensors) go test\nPASS\nok      github.com/tensorflow/tensorflow/tensorflow/contrib/go  0.499s\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow/tensorflow/contrib/go (go_bindings_tensors) cd ../../../\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) mkdir tensorflow/examples/label_image_go/data/\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) wget https://storage.googleapis.com/download.tensorflow.org/models/inception_dec_2015.zip -O tensorflow/examples/label_image_go/data/inception_dec_2015.zip\n--2016-04-20 20:55:14--  https://storage.googleapis.com/download.tensorflow.org/models/inception_dec_2015.zip\nResolving storage.googleapis.com (storage.googleapis.com)... 2a00:1450:4013:c01::80, 74.125.136.128\nConnecting to storage.googleapis.com (storage.googleapis.com)|2a00:1450:4013:c01::80|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 88631107 (85M) [application/zip]\nSaving to: \u2018tensorflow/examples/label_image_go/data/inception_dec_2015.zip\u2019\n\n100%[==========================================================>] 88,631,107   716KB/s   in 1m 51s\n\n2016-04-20 20:57:05 (781 KB/s) - \u2018tensorflow/examples/label_image_go/data/inception_dec_2015.zip\u2019 saved [88631107/88631107]\n\n\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) unzip tensorflow/examples/label_image_go/data/inception_dec_2015.zip -d tensorflow/examples/label_image_go/data/\nArchive:  tensorflow/examples/label_image_go/data/inception_dec_2015.zip\n  inflating: tensorflow/examples/label_image_go/data/imagenet_comp_graph_label_strings.txt\n  inflating: tensorflow/examples/label_image_go/data/LICENSE\n  inflating: tensorflow/examples/label_image_go/data/tensorflow_inception_graph.pb\n\n\u279c ~/go-src/src/github.com/tensorflow/tensorflow (go_bindings_tensors) go run ./tensorflow/examples/label_image_go/main.go ./tensorflow/examples/label_image/data/grace_hopper.jpg\nmilitary uniform : 0.6472986\nsuit : 0.04771947\nacademic gown : 0.02324065\nbow tie : 0.015735544\nbolo tie : 0.01450234\n```\n\nI had to do some tricks since it is still under my github account and not in the master branch, but it has to work with the line in the README.md after merge the PR.\n\nI also modified the code according to the last comments, fixed typos and relocated the Err\\* types :)\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/59919381", "pull_request_review_id": null, "id": 59919381, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTE5Mzgx", "diff_hunk": "@@ -0,0 +1,147 @@\n+package tensorflow\n+\n+import (\n+\t\"fmt\"\n+\t\"runtime\"\n+\n+\t\"github.com/golang/protobuf/proto\"\n+)\n+\n+// Session A Session instance lets a caller drive a TensorFlow graph\n+// computation.\n+type Session struct {\n+\tops     TF_SessionOptions\n+\tsession TF_Session\n+\tstatus  TF_Status\n+\tgraph   *Graph\n+}\n+\n+// NewSession initializes a new TensorFlow session.\n+func NewSession() (s *Session, err error) {\n+\tstatus := TF_NewStatus()\n+\tops := TF_NewSessionOptions()\n+\ts = &Session{\n+\t\tops:    ops,\n+\t\tstatus: status,\n+\t\tsession: TF_NewSession(\n+\t\t\tops,\n+\t\t\tstatus,\n+\t\t),\n+\t}\n+\n+\terr = s.statusToError(status)\n+\n+\t// Release the C allocated memory when the instance is destroyed\n+\truntime.SetFinalizer(s, (*Session).FreeAllocMem)\n+\n+\treturn\n+}\n+\n+// Run Runs the operations on the target nodes, or all the operations if not\n+// targets are specified. the Parameter Input in a dictionary where the key is\n+// the tensor name on the graph, and the value the Tensor. The parameter\n+// outputs is used to specify the tensors from the graph to be returned in the\n+// same order as they occur on the slice.\n+func (s *Session) Run(inputs map[string]*Tensor, outputs []string, targets []string) ([]*Tensor, error) {\n+\tinputNames := NewStringVector()\n+\tinputValues := NewTensorVector()\n+\tfor k, v := range inputs {\n+\t\tv.setCMemAsAlreadyRelease()\n+\t\tinputValues.Add(v.tensor)\n+\t\tinputNames.Add(k)\n+\t}\n+\toutputNames := NewStringVector()\n+\tfor _, n := range outputs {\n+\t\toutputNames.Add(n)\n+\t}\n+\n+\ttargetNames := NewStringVector()\n+\tfor _, n := range targets {\n+\t\ttargetNames.Add(n)\n+\t}\n+\n+\toutputValues := NewTensorVector()\n+\tstatus := TF_NewStatus()\n+\tdefer TF_DeleteStatus(status)\n+\n+\tTF_Run_wrapper(\n+\t\ts.session,\n+\t\tinputNames,\n+\t\tinputValues,\n+\t\toutputNames,\n+\t\toutputValues,\n+\t\ttargetNames,\n+\t\tstatus)\n+\n+\tresult := make([]*Tensor, 0, outputValues.Size())\n+\tfor i := int64(0); i < outputValues.Size(); i++ {\n+\t\tresult = append(result, &Tensor{\n+\t\t\ttensor: outputValues.Get(int(i)),\n+\t\t})\n+\t}\n+\n+\treturn result, s.statusToError(status)\n+}\n+\n+// ExtendGraph Loads the graph definition on the session.", "path": "tensorflow/contrib/go/session.go", "position": null, "original_position": 86, "commit_id": "942760424141d0f5a930982d5e78aaeb05869488", "original_commit_id": "210180befbd05694aa3285fef7d498bbd1be2dcc", "user": {"login": "dave-andersen", "id": 827870, "node_id": "MDQ6VXNlcjgyNzg3MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/827870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dave-andersen", "html_url": "https://github.com/dave-andersen", "followers_url": "https://api.github.com/users/dave-andersen/followers", "following_url": "https://api.github.com/users/dave-andersen/following{/other_user}", "gists_url": "https://api.github.com/users/dave-andersen/gists{/gist_id}", "starred_url": "https://api.github.com/users/dave-andersen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dave-andersen/subscriptions", "organizations_url": "https://api.github.com/users/dave-andersen/orgs", "repos_url": "https://api.github.com/users/dave-andersen/repos", "events_url": "https://api.github.com/users/dave-andersen/events{/privacy}", "received_events_url": "https://api.github.com/users/dave-andersen/received_events", "type": "User", "site_admin": false}, "body": "s/Loads/loads/\n\"on\" the session?  hrm.  \"into\"?\n", "created_at": "2016-04-15T18:30:19Z", "updated_at": "2016-05-05T08:12:14Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/1771#discussion_r59919381", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/1771", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/59919381"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/1771#discussion_r59919381"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/1771"}}, "body_html": "<p>s/Loads/loads/<br>\n\"on\" the session?  hrm.  \"into\"?</p>", "body_text": "s/Loads/loads/\n\"on\" the session?  hrm.  \"into\"?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/212622768", "html_url": "https://github.com/tensorflow/tensorflow/pull/1771#issuecomment-212622768", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1771", "id": 212622768, "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjYyMjc2OA==", "user": {"login": "alonsovidales", "id": 1468785, "node_id": "MDQ6VXNlcjE0Njg3ODU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1468785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alonsovidales", "html_url": "https://github.com/alonsovidales", "followers_url": "https://api.github.com/users/alonsovidales/followers", "following_url": "https://api.github.com/users/alonsovidales/following{/other_user}", "gists_url": "https://api.github.com/users/alonsovidales/gists{/gist_id}", "starred_url": "https://api.github.com/users/alonsovidales/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alonsovidales/subscriptions", "organizations_url": "https://api.github.com/users/alonsovidales/orgs", "repos_url": "https://api.github.com/users/alonsovidales/repos", "events_url": "https://api.github.com/users/alonsovidales/events{/privacy}", "received_events_url": "https://api.github.com/users/alonsovidales/received_events", "type": "User", "site_admin": false}, "created_at": "2016-04-20T21:49:40Z", "updated_at": "2016-04-20T22:09:47Z", "author_association": "NONE", "body_html": "<p>I think that for the <strong>a</strong> point we have some things that can be improved:</p>\n<ol>\n<li>Include the .pb.go files, so we can do the go get directly. But <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=463737\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vrv\">@vrv</a> mentioned that on other APIs the protobuf files are being generated from bazel, I agree with him, put this files on the repo is not a good idea since we would need to maintain them updated, if we generate them during the install process we only need to check if the Go code keeps working on mayor updates. Perhaps we could integrate all the process using Bazel instead of go get and go generate, but I'm not really sure about how to do this nor if the result would be better than the proposed process.</li>\n<li>I had to do <a href=\"https://github.com/tensorflow/tensorflow/pull/1771/files#diff-a080565cf0a14f4c35a129e9ab6881cfR15\">this</a> in order to place the shared library because, I don't know why, even with <a href=\"https://github.com/tensorflow/tensorflow/pull/1771/files#diff-35661cd888164ff2c91156ebaf138ed3R3\">this ld flag</a> it was not working. I think that is not possible to do it in any other way since the route on that line is relative, but I'm not really sure about this, I don't have too much experience working with cgo. I think that this is not a mayor issue, but it would be nice to don't require sudo during the install process.</li>\n</ol>\n<p>Regarding to the point <strong>b</strong>, let me know if I can help, I could prepare the script to install and run the tests, but more or less with:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/<span class=\"pl-k\">;</span>go get <span class=\"pl-smi\">$TF_REPO</span> <span class=\"pl-k\">||</span> (go generate <span class=\"pl-smi\">$TF_REPO</span> <span class=\"pl-k\">&amp;&amp;</span> go get <span class=\"pl-smi\">$TF_REPO</span>)\n$ go <span class=\"pl-c1\">test</span> github.com/tensorflow/tensorflow/tensorflow/contrib/go/</pre></div>\n<p>could be enough.</p>", "body_text": "I think that for the a point we have some things that can be improved:\n\nInclude the .pb.go files, so we can do the go get directly. But @vrv mentioned that on other APIs the protobuf files are being generated from bazel, I agree with him, put this files on the repo is not a good idea since we would need to maintain them updated, if we generate them during the install process we only need to check if the Go code keeps working on mayor updates. Perhaps we could integrate all the process using Bazel instead of go get and go generate, but I'm not really sure about how to do this nor if the result would be better than the proposed process.\nI had to do this in order to place the shared library because, I don't know why, even with this ld flag it was not working. I think that is not possible to do it in any other way since the route on that line is relative, but I'm not really sure about this, I don't have too much experience working with cgo. I think that this is not a mayor issue, but it would be nice to don't require sudo during the install process.\n\nRegarding to the point b, let me know if I can help, I could prepare the script to install and run the tests, but more or less with:\n$ TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/;go get $TF_REPO || (go generate $TF_REPO && go get $TF_REPO)\n$ go test github.com/tensorflow/tensorflow/tensorflow/contrib/go/\ncould be enough.", "body": "I think that for the **a** point we have some things that can be improved:\n1. Include the .pb.go files, so we can do the go get directly. But @vrv mentioned that on other APIs the protobuf files are being generated from bazel, I agree with him, put this files on the repo is not a good idea since we would need to maintain them updated, if we generate them during the install process we only need to check if the Go code keeps working on mayor updates. Perhaps we could integrate all the process using Bazel instead of go get and go generate, but I'm not really sure about how to do this nor if the result would be better than the proposed process.\n2. I had to do [this](https://github.com/tensorflow/tensorflow/pull/1771/files#diff-a080565cf0a14f4c35a129e9ab6881cfR15) in order to place the shared library because, I don't know why, even with [this ld flag](https://github.com/tensorflow/tensorflow/pull/1771/files#diff-35661cd888164ff2c91156ebaf138ed3R3) it was not working. I think that is not possible to do it in any other way since the route on that line is relative, but I'm not really sure about this, I don't have too much experience working with cgo. I think that this is not a mayor issue, but it would be nice to don't require sudo during the install process.\n\nRegarding to the point **b**, let me know if I can help, I could prepare the script to install and run the tests, but more or less with:\n\n``` sh\n$ TF_REPO=github.com/tensorflow/tensorflow/tensorflow/contrib/go/;go get $TF_REPO || (go generate $TF_REPO && go get $TF_REPO)\n$ go test github.com/tensorflow/tensorflow/tensorflow/contrib/go/\n```\n\ncould be enough.\n"}
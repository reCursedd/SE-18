{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/410148782", "html_url": "https://github.com/tensorflow/tensorflow/issues/21198#issuecomment-410148782", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21198", "id": 410148782, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDE0ODc4Mg==", "user": {"login": "gragundier", "id": 3095335, "node_id": "MDQ6VXNlcjMwOTUzMzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3095335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gragundier", "html_url": "https://github.com/gragundier", "followers_url": "https://api.github.com/users/gragundier/followers", "following_url": "https://api.github.com/users/gragundier/following{/other_user}", "gists_url": "https://api.github.com/users/gragundier/gists{/gist_id}", "starred_url": "https://api.github.com/users/gragundier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gragundier/subscriptions", "organizations_url": "https://api.github.com/users/gragundier/orgs", "repos_url": "https://api.github.com/users/gragundier/repos", "events_url": "https://api.github.com/users/gragundier/events{/privacy}", "received_events_url": "https://api.github.com/users/gragundier/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-03T05:30:29Z", "updated_at": "2018-08-03T05:30:49Z", "author_association": "NONE", "body_html": "<p>TL;DR: Script mention earlier doesn't fix interpreter issue.  Interpreter and more specifically the interpreter wrapper seems to be the problem.</p>\n<p>Long story:<br>\nthortex's script \"worked.\"  If I open a terminal, go:<br>\n<code>python3</code><br>\n<code>import tensorflow as tf</code><br>\n<code>dir(tf.contrib.lite)</code><br>\nI get:<br>\n<code>['DecodeError', 'Interpreter', 'OpHint', 'PY3', 'TocoConverter', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', '_freeze_graph', '_graph_pb2', '_is_frozen_graph', '_session', '_text_format', 'absolute_import', 'constants', 'convert_op_hints_to_stubs', 'division', 'freeze_saved_model', 'get_tensors_from_tensor_names', 'global_variables_initializer', 'import_graph_def', 'print_function', 'set_tensor_shapes', 'signature_constants', 'tag_constants', 'tensor_name', 'tf_graph_util', 'toco_convert', 'toco_convert_protos']</code><br>\nBUT as soon as I try freedomtan.py's <a href=\"https://github.com/tensorflow/tensorflow/pull/19736/commits\">label_image.py</a> script, I get something like:<br>\n<code>2018-08-03 04:58:17.421863: F tensorflow/core/framework/variant_op_registry.cc:104] Check failed: existing == nullptr (0x212ae74 vs. nullptr)Unary VariantDecodeFn for type_name: tensorflow::Tensor already registered Aborted</code><br>\nI enabled <code>tf.enable_eager_execution()</code> and ran the script on thonny:<br>\n::Start Thonny Copy Pasta::<br>\n%Run freedomtan.py<br>\nBackend terminated (returncode: -6)<br>\nFatal Python error: Aborted</p>\n<p>Current thread 0x76fdb010 (most recent call first):<br>\nFile \"\", line 222 in _call_with_frames_removed<br>\nFile \"\", line 914 in create_module<br>\nFile \"\", line 577 in module_from_spec<br>\nFile \"\", line 666 in _load_unlocked<br>\nFile \"\", line 693 in _load<br>\nFile \"/usr/lib/python3.5/imp.py\", line 342 in load_dynamic<br>\nFile \"/usr/lib/python3.5/imp.py\", line 242 in load_module<br>\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 24 in swig_import_helper<br>\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 28 in <br>\nFile \"\", line 222 in _call_with_frames_removed<br>\nFile \"\", line 673 in exec_module<br>\nFile \"\", line 673 in _load_unlocked<br>\nFile \"\", line 958 in _find_and_load_unlocked<br>\nFile \"\", line 969 in _find_and_load<br>\nFile \"\", line 986 in _gcd_import<br>\nFile \"/usr/lib/python3.5/importlib/<strong>init</strong>.py\", line 126 in import_module<br>\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/python/util/lazy_loader.py\", line 42 in _load<br>\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/python/util/lazy_loader.py\", line 53 in <strong>getattr</strong><br>\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/interpreter.py\", line 50 in <strong>init</strong><br>\nFile \"/home/pi/wontae-cv/freedomtan.py\", line 65 in <br>\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 588 in execute_source<br>\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 427 in _execute_source_ex<br>\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 374 in _execute_file<br>\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 155 in _cmd_Run<br>\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 119 in handle_command<br>\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 97 in mainloop<br>\nFile \"/usr/lib/python3/dist-packages/thonny/shared/backend_launcher.py\", line 41 in <br>\nResetting ...</p>\n<blockquote>\n<blockquote>\n<blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>::End Thonny Copy Pasta::<br>\nAnyways, the interpreter is most definitely the issue, specifically the wrapper.<br>\nI'm going to rerun spec scripts again because I'm going to wipe my OS to see if I can fix my broken python/pip issue.<br>\npi@pi:~/wontae-cv $ python3 -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"<br>\nunknown 1.9.0<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/2256092/tf_env.txt\">tf_env.txt</a></p>", "body_text": "TL;DR: Script mention earlier doesn't fix interpreter issue.  Interpreter and more specifically the interpreter wrapper seems to be the problem.\nLong story:\nthortex's script \"worked.\"  If I open a terminal, go:\npython3\nimport tensorflow as tf\ndir(tf.contrib.lite)\nI get:\n['DecodeError', 'Interpreter', 'OpHint', 'PY3', 'TocoConverter', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', '_freeze_graph', '_graph_pb2', '_is_frozen_graph', '_session', '_text_format', 'absolute_import', 'constants', 'convert_op_hints_to_stubs', 'division', 'freeze_saved_model', 'get_tensors_from_tensor_names', 'global_variables_initializer', 'import_graph_def', 'print_function', 'set_tensor_shapes', 'signature_constants', 'tag_constants', 'tensor_name', 'tf_graph_util', 'toco_convert', 'toco_convert_protos']\nBUT as soon as I try freedomtan.py's label_image.py script, I get something like:\n2018-08-03 04:58:17.421863: F tensorflow/core/framework/variant_op_registry.cc:104] Check failed: existing == nullptr (0x212ae74 vs. nullptr)Unary VariantDecodeFn for type_name: tensorflow::Tensor already registered Aborted\nI enabled tf.enable_eager_execution() and ran the script on thonny:\n::Start Thonny Copy Pasta::\n%Run freedomtan.py\nBackend terminated (returncode: -6)\nFatal Python error: Aborted\nCurrent thread 0x76fdb010 (most recent call first):\nFile \"\", line 222 in _call_with_frames_removed\nFile \"\", line 914 in create_module\nFile \"\", line 577 in module_from_spec\nFile \"\", line 666 in _load_unlocked\nFile \"\", line 693 in _load\nFile \"/usr/lib/python3.5/imp.py\", line 342 in load_dynamic\nFile \"/usr/lib/python3.5/imp.py\", line 242 in load_module\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 24 in swig_import_helper\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 28 in \nFile \"\", line 222 in _call_with_frames_removed\nFile \"\", line 673 in exec_module\nFile \"\", line 673 in _load_unlocked\nFile \"\", line 958 in _find_and_load_unlocked\nFile \"\", line 969 in _find_and_load\nFile \"\", line 986 in _gcd_import\nFile \"/usr/lib/python3.5/importlib/init.py\", line 126 in import_module\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/python/util/lazy_loader.py\", line 42 in _load\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/python/util/lazy_loader.py\", line 53 in getattr\nFile \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/interpreter.py\", line 50 in init\nFile \"/home/pi/wontae-cv/freedomtan.py\", line 65 in \nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 588 in execute_source\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 427 in _execute_source_ex\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 374 in _execute_file\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 155 in _cmd_Run\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 119 in handle_command\nFile \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 97 in mainloop\nFile \"/usr/lib/python3/dist-packages/thonny/shared/backend_launcher.py\", line 41 in \nResetting ...\n\n\n\n\n\n\n::End Thonny Copy Pasta::\nAnyways, the interpreter is most definitely the issue, specifically the wrapper.\nI'm going to rerun spec scripts again because I'm going to wipe my OS to see if I can fix my broken python/pip issue.\npi@pi:~/wontae-cv $ python3 -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\nunknown 1.9.0\ntf_env.txt", "body": "TL;DR: Script mention earlier doesn't fix interpreter issue.  Interpreter and more specifically the interpreter wrapper seems to be the problem.  \r\n\r\nLong story:\r\nthortex's script \"worked.\"  If I open a terminal, go:\r\n`python3`\r\n`import tensorflow as tf`\r\n`dir(tf.contrib.lite)`\r\nI get:\r\n`['DecodeError', 'Interpreter', 'OpHint', 'PY3', 'TocoConverter', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', '_freeze_graph', '_graph_pb2', '_is_frozen_graph', '_session', '_text_format', 'absolute_import', 'constants', 'convert_op_hints_to_stubs', 'division', 'freeze_saved_model', 'get_tensors_from_tensor_names', 'global_variables_initializer', 'import_graph_def', 'print_function', 'set_tensor_shapes', 'signature_constants', 'tag_constants', 'tensor_name', 'tf_graph_util', 'toco_convert', 'toco_convert_protos']`\r\nBUT as soon as I try freedomtan.py's [label_image.py](https://github.com/tensorflow/tensorflow/pull/19736/commits) script, I get something like:\r\n`2018-08-03 04:58:17.421863: F tensorflow/core/framework/variant_op_registry.cc:104] Check failed: existing == nullptr (0x212ae74 vs. nullptr)Unary VariantDecodeFn for type_name: tensorflow::Tensor already registered\r\nAborted`\r\nI enabled `tf.enable_eager_execution()` and ran the script on thonny:\r\n::Start Thonny Copy Pasta::\r\n%Run freedomtan.py\r\nBackend terminated (returncode: -6)\r\nFatal Python error: Aborted\r\n\r\nCurrent thread 0x76fdb010 (most recent call first):\r\n  File \"<frozen importlib._bootstrap>\", line 222 in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap_external>\", line 914 in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 577 in module_from_spec\r\n  File \"<frozen importlib._bootstrap>\", line 666 in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 693 in _load\r\n  File \"/usr/lib/python3.5/imp.py\", line 342 in load_dynamic\r\n  File \"/usr/lib/python3.5/imp.py\", line 242 in load_module\r\n  File \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 24 in swig_import_helper\r\n  File \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 28 in <module>\r\n  File \"<frozen importlib._bootstrap>\", line 222 in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap_external>\", line 673 in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 673 in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 958 in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 969 in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 986 in _gcd_import\r\n  File \"/usr/lib/python3.5/importlib/__init__.py\", line 126 in import_module\r\n  File \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/python/util/lazy_loader.py\", line 42 in _load\r\n  File \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/python/util/lazy_loader.py\", line 53 in __getattr__\r\n  File \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/interpreter.py\", line 50 in __init__\r\n  File \"/home/pi/wontae-cv/freedomtan.py\", line 65 in <module>\r\n  File \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 588 in execute_source\r\n  File \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 427 in _execute_source_ex\r\n  File \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 374 in _execute_file\r\n  File \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 155 in _cmd_Run\r\n  File \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 119 in handle_command\r\n  File \"/usr/lib/python3/dist-packages/thonny/shared/thonny/backend.py\", line 97 in mainloop\r\n  File \"/usr/lib/python3/dist-packages/thonny/shared/backend_launcher.py\", line 41 in <module>\r\nResetting ...\r\n>>> \r\n::End Thonny Copy Pasta::\r\nAnyways, the interpreter is most definitely the issue, specifically the wrapper.  \r\nI'm going to rerun spec scripts again because I'm going to wipe my OS to see if I can fix my broken python/pip issue.\r\npi@pi:~/wontae-cv $ python3 -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\nunknown 1.9.0\r\n[tf_env.txt](https://github.com/tensorflow/tensorflow/files/2256092/tf_env.txt)\r\n\r\n"}
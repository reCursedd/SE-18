{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10218", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10218/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10218/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10218/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10218", "id": 231626043, "node_id": "MDU6SXNzdWUyMzE2MjYwNDM=", "number": 10218, "title": "time and memory cost more and more while using keras.backend.ctc_decoder()", "user": {"login": "jkmiao", "id": 10141385, "node_id": "MDQ6VXNlcjEwMTQxMzg1", "avatar_url": "https://avatars3.githubusercontent.com/u/10141385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkmiao", "html_url": "https://github.com/jkmiao", "followers_url": "https://api.github.com/users/jkmiao/followers", "following_url": "https://api.github.com/users/jkmiao/following{/other_user}", "gists_url": "https://api.github.com/users/jkmiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkmiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkmiao/subscriptions", "organizations_url": "https://api.github.com/users/jkmiao/orgs", "repos_url": "https://api.github.com/users/jkmiao/repos", "events_url": "https://api.github.com/users/jkmiao/events{/privacy}", "received_events_url": "https://api.github.com/users/jkmiao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-26T13:25:49Z", "updated_at": "2017-09-08T04:56:18Z", "closed_at": "2017-09-08T04:56:18Z", "author_association": "NONE", "body_html": "<h3>memory not released bug with tf.python.ops.gen_ctc_ops  both with ctc_greedy_decoder and ctc_beam_search_decoder...</h3>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> time\n\n<span class=\"pl-k\">from</span> keras <span class=\"pl-k\">import</span> backend <span class=\"pl-k\">as</span> K\n\nstart_time <span class=\"pl-k\">=</span> time.time()\n<span class=\"pl-k\">while</span> <span class=\"pl-c1\">True</span>:\n     y_pred  <span class=\"pl-k\">=</span> K.ctc_decode(args)\n     cost_time <span class=\"pl-k\">=</span> time.time()<span class=\"pl-k\">-</span>start_time\n     <span class=\"pl-c1\">print</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>cost time<span class=\"pl-pds\">'</span></span>, cost_time   <span class=\"pl-c\"><span class=\"pl-c\">#</span> time cost more and more with the same input args. why ??!! </span>\n <span class=\"pl-c1\">...</span></pre></div>\n<p>when using  K.ctc_decode() in a large loop, time cost longer  loop become larger...</p>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: ubuntu 14.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source ( pip install -U tensorflow)</li>\n<li><strong>TensorFlow version (use command below)</strong>: (1.1.0)</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>: None ( same problem occured if has CUDA7.5)</li>\n<li><strong>GPU model and memory</strong>: None ( same problem occured with GPU of 32G)</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h4>function in file  tensorflow.python.ops.ctc_ops.py</h4>\n<p>Please help, thank you very much!</p>", "body_text": "memory not released bug with tf.python.ops.gen_ctc_ops  both with ctc_greedy_decoder and ctc_beam_search_decoder...\nimport time\n\nfrom keras import backend as K\n\nstart_time = time.time()\nwhile True:\n     y_pred  = K.ctc_decode(args)\n     cost_time = time.time()-start_time\n     print 'cost time', cost_time   # time cost more and more with the same input args. why ??!! \n ...\nwhen using  K.ctc_decode() in a large loop, time cost longer  loop become larger...\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): ubuntu 14.04\nTensorFlow installed from (source or binary): source ( pip install -U tensorflow)\nTensorFlow version (use command below): (1.1.0)\nBazel version (if compiling from source):\nCUDA/cuDNN version: None ( same problem occured if has CUDA7.5)\nGPU model and memory: None ( same problem occured with GPU of 32G)\nExact command to reproduce:\n\nfunction in file  tensorflow.python.ops.ctc_ops.py\nPlease help, thank you very much!", "body": "### memory not released bug with tf.python.ops.gen_ctc_ops  both with ctc_greedy_decoder and ctc_beam_search_decoder...\r\n\r\n\r\n```python\r\nimport time\r\n\r\nfrom keras import backend as K\r\n\r\nstart_time = time.time()\r\nwhile True:\r\n     y_pred  = K.ctc_decode(args)\r\n     cost_time = time.time()-start_time\r\n     print 'cost time', cost_time   # time cost more and more with the same input args. why ??!! \r\n ...\r\n```\r\nwhen using  K.ctc_decode() in a large loop, time cost longer  loop become larger...\r\n\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: ubuntu 14.04\r\n- **TensorFlow installed from (source or binary)**: source ( pip install -U tensorflow)\r\n- **TensorFlow version (use command below)**: (1.1.0)\r\n- **Bazel version (if compiling from source)**:\r\n- **CUDA/cuDNN version**: None ( same problem occured if has CUDA7.5)\r\n- **GPU model and memory**: None ( same problem occured with GPU of 32G)\r\n- **Exact command to reproduce**:\r\n\r\n####  function in file  tensorflow.python.ops.ctc_ops.py\r\n\r\nPlease help, thank you very much!"}
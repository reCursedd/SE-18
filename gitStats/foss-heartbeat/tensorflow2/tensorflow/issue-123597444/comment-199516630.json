{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/199516630", "html_url": "https://github.com/tensorflow/tensorflow/issues/593#issuecomment-199516630", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/593", "id": 199516630, "node_id": "MDEyOklzc3VlQ29tbWVudDE5OTUxNjYzMA==", "user": {"login": "trubin", "id": 890936, "node_id": "MDQ6VXNlcjg5MDkzNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/890936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trubin", "html_url": "https://github.com/trubin", "followers_url": "https://api.github.com/users/trubin/followers", "following_url": "https://api.github.com/users/trubin/following{/other_user}", "gists_url": "https://api.github.com/users/trubin/gists{/gist_id}", "starred_url": "https://api.github.com/users/trubin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trubin/subscriptions", "organizations_url": "https://api.github.com/users/trubin/orgs", "repos_url": "https://api.github.com/users/trubin/repos", "events_url": "https://api.github.com/users/trubin/events{/privacy}", "received_events_url": "https://api.github.com/users/trubin/received_events", "type": "User", "site_admin": false}, "created_at": "2016-03-21T22:27:41Z", "updated_at": "2016-03-21T22:28:20Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1794715\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ebrevdo\">@ebrevdo</a> To be a little clearer, the error happens at graph construction time (see below). I'd be really excited to help solve this bug, but the last time I went down this path it turned out major changes were being made to the entire ControlFlow infrastructure. Could you let me know if that's the case again?</p>\n<p>Thanks,<br>\nTyler</p>\n<p>Traceback (most recent call last):<br>\nFile \"/home/tyler/code/Sphere/SideProjects/TKGVS/test.py\", line 40, in <br>\ntrain_op = tf.train.GradientDescentOptimizer(learning_rate=0.1).minimize(loss)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 190, in minimize<br>\ncolocate_gradients_with_ops=colocate_gradients_with_ops)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 241, in compute_gradients<br>\ncolocate_gradients_with_ops=colocate_gradients_with_ops)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients.py\", line 481, in gradients<br>\nin_grads = _AsList(grad_fn(op, *out_grads))<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/math_grad.py\", line 365, in _MulGrad<br>\nreturn (array_ops.reshape(math_ops.reduce_sum(grad * y, rx), sx),<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/math_ops.py\", line 502, in binary_op_wrapper<br>\nreturn func(x, y, name=name)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 829, in mul<br>\nreturn _op_def_lib.apply_op(\"Mul\", x=x, y=y, name=name)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 655, in apply_op<br>\nop_def=op_def)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2104, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1133, in <strong>init</strong><br>\nself._control_flow_context.AddOp(self)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1286, in AddOp<br>\nself._AddOpInternal(op)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1307, in _AddOpInternal<br>\nself.AddValue(x)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1244, in AddValue<br>\nreal_val = grad_ctxt.grad_state.GetRealValue(val)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 655, in GetRealValue<br>\nh_value = cur_grad_state.AddForwardAccumulator(cur_value)<br>\nAttributeError: 'NoneType' object has no attribute 'AddForwardAccumulator'</p>", "body_text": "@ebrevdo To be a little clearer, the error happens at graph construction time (see below). I'd be really excited to help solve this bug, but the last time I went down this path it turned out major changes were being made to the entire ControlFlow infrastructure. Could you let me know if that's the case again?\nThanks,\nTyler\nTraceback (most recent call last):\nFile \"/home/tyler/code/Sphere/SideProjects/TKGVS/test.py\", line 40, in \ntrain_op = tf.train.GradientDescentOptimizer(learning_rate=0.1).minimize(loss)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 190, in minimize\ncolocate_gradients_with_ops=colocate_gradients_with_ops)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 241, in compute_gradients\ncolocate_gradients_with_ops=colocate_gradients_with_ops)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients.py\", line 481, in gradients\nin_grads = _AsList(grad_fn(op, *out_grads))\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/math_grad.py\", line 365, in _MulGrad\nreturn (array_ops.reshape(math_ops.reduce_sum(grad * y, rx), sx),\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/math_ops.py\", line 502, in binary_op_wrapper\nreturn func(x, y, name=name)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 829, in mul\nreturn _op_def_lib.apply_op(\"Mul\", x=x, y=y, name=name)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 655, in apply_op\nop_def=op_def)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2104, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1133, in init\nself._control_flow_context.AddOp(self)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1286, in AddOp\nself._AddOpInternal(op)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1307, in _AddOpInternal\nself.AddValue(x)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1244, in AddValue\nreal_val = grad_ctxt.grad_state.GetRealValue(val)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 655, in GetRealValue\nh_value = cur_grad_state.AddForwardAccumulator(cur_value)\nAttributeError: 'NoneType' object has no attribute 'AddForwardAccumulator'", "body": "@ebrevdo To be a little clearer, the error happens at graph construction time (see below). I'd be really excited to help solve this bug, but the last time I went down this path it turned out major changes were being made to the entire ControlFlow infrastructure. Could you let me know if that's the case again? \n\nThanks,\nTyler\n\nTraceback (most recent call last):\n  File \"/home/tyler/code/Sphere/SideProjects/TKGVS/test.py\", line 40, in <module>\n    train_op = tf.train.GradientDescentOptimizer(learning_rate=0.1).minimize(loss)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 190, in minimize\n    colocate_gradients_with_ops=colocate_gradients_with_ops)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 241, in compute_gradients\n    colocate_gradients_with_ops=colocate_gradients_with_ops)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients.py\", line 481, in gradients\n    in_grads = _AsList(grad_fn(op, *out_grads))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/math_grad.py\", line 365, in _MulGrad\n    return (array_ops.reshape(math_ops.reduce_sum(grad \\* y, rx), sx),\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/math_ops.py\", line 502, in binary_op_wrapper\n    return func(x, y, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 829, in mul\n    return _op_def_lib.apply_op(\"Mul\", x=x, y=y, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/op_def_library.py\", line 655, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2104, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1133, in __init__\n    self._control_flow_context.AddOp(self)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1286, in AddOp\n    self._AddOpInternal(op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1307, in _AddOpInternal\n    self.AddValue(x)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1244, in AddValue\n    real_val = grad_ctxt.grad_state.GetRealValue(val)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 655, in GetRealValue\n    h_value = cur_grad_state.AddForwardAccumulator(cur_value)\nAttributeError: 'NoneType' object has no attribute 'AddForwardAccumulator'\n"}
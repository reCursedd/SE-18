{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/199072718", "html_url": "https://github.com/tensorflow/tensorflow/issues/593#issuecomment-199072718", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/593", "id": 199072718, "node_id": "MDEyOklzc3VlQ29tbWVudDE5OTA3MjcxOA==", "user": {"login": "trubin", "id": 890936, "node_id": "MDQ6VXNlcjg5MDkzNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/890936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trubin", "html_url": "https://github.com/trubin", "followers_url": "https://api.github.com/users/trubin/followers", "following_url": "https://api.github.com/users/trubin/following{/other_user}", "gists_url": "https://api.github.com/users/trubin/gists{/gist_id}", "starred_url": "https://api.github.com/users/trubin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trubin/subscriptions", "organizations_url": "https://api.github.com/users/trubin/orgs", "repos_url": "https://api.github.com/users/trubin/repos", "events_url": "https://api.github.com/users/trubin/events{/privacy}", "received_events_url": "https://api.github.com/users/trubin/received_events", "type": "User", "site_admin": false}, "created_at": "2016-03-21T00:57:21Z", "updated_at": "2016-03-21T00:57:21Z", "author_association": "NONE", "body_html": "<p>I am still getting the error in 0.7.1. See the following test that demonstrates the error:</p>\n<p>import tensorflow as tf<br>\nfrom tensorflow.python.ops import control_flow_ops</p>\n<p>OUTER_LOOP_MAX = 5<br>\nINNER_LOOP_MAX = 3</p>\n<p>inner = tf.placeholder(\"float32\", [INNER_LOOP_MAX])<br>\nouter = tf.placeholder(\"float32\", [OUTER_LOOP_MAX])</p>\n<p>X = tf.Variable(tf.zeros([1], dtype=\"float32\"))</p>\n<p>def outer_cond_func(c1, outer_acc, outer_array):<br>\nreturn tf.less(c1, OUTER_LOOP_MAX)</p>\n<p>def outer_body_func(c1, outer_acc, outer_array):<br>\nslice = tf.slice(outer_array, tf.expand_dims(c1, 0), [1])<br>\nouter_num = tf.reduce_sum(slice)</p>\n<pre><code>def inner_cond_func(c2, inner_acc, inner_array):\n    return tf.less(c2, INNER_LOOP_MAX)\n\ndef inner_body_func(c2, inner_acc, inner_array):\n    inner_num = tf.reduce_sum(tf.slice(inner_array, tf.expand_dims(c2, 0), [1]))\n    inner_acc += inner_num * outer_num * X\n\n    c2 += 1\n    return c2, inner_acc, inner_array\n\n_, inside_summed_products, _ = control_flow_ops.While(inner_cond_func, inner_body_func, [tf.constant(0), tf.constant(0.0), inner])\n\nouter_acc = tf.add(outer_acc, inside_summed_products)\nc1 += 1\nreturn c1, outer_acc, outer_array\n</code></pre>\n<p>_, value, __ = control_flow_ops.While(outer_cond_func, outer_body_func, [tf.constant(0), tf.constant(0.0), outer])</p>\n<p>loss = value * X<br>\ntrain_op = tf.train.GradientDescentOptimizer(learning_rate=0.1).minimize(loss)</p>\n<p>sess = tf.Session()<br>\ninit = tf.initialize_all_variables()<br>\nsess.run(init)</p>\n<p>for i in xrange(1, 10):<br>\nfeed_dict = {inner: [1.0, 2.0, 3.0], outer: [4.0, 5.0, 6.0, 7.0, 8.0]}<br>\nprint sess.run([train_op, loss], feed_dict=feed_dict)</p>", "body_text": "I am still getting the error in 0.7.1. See the following test that demonstrates the error:\nimport tensorflow as tf\nfrom tensorflow.python.ops import control_flow_ops\nOUTER_LOOP_MAX = 5\nINNER_LOOP_MAX = 3\ninner = tf.placeholder(\"float32\", [INNER_LOOP_MAX])\nouter = tf.placeholder(\"float32\", [OUTER_LOOP_MAX])\nX = tf.Variable(tf.zeros([1], dtype=\"float32\"))\ndef outer_cond_func(c1, outer_acc, outer_array):\nreturn tf.less(c1, OUTER_LOOP_MAX)\ndef outer_body_func(c1, outer_acc, outer_array):\nslice = tf.slice(outer_array, tf.expand_dims(c1, 0), [1])\nouter_num = tf.reduce_sum(slice)\ndef inner_cond_func(c2, inner_acc, inner_array):\n    return tf.less(c2, INNER_LOOP_MAX)\n\ndef inner_body_func(c2, inner_acc, inner_array):\n    inner_num = tf.reduce_sum(tf.slice(inner_array, tf.expand_dims(c2, 0), [1]))\n    inner_acc += inner_num * outer_num * X\n\n    c2 += 1\n    return c2, inner_acc, inner_array\n\n_, inside_summed_products, _ = control_flow_ops.While(inner_cond_func, inner_body_func, [tf.constant(0), tf.constant(0.0), inner])\n\nouter_acc = tf.add(outer_acc, inside_summed_products)\nc1 += 1\nreturn c1, outer_acc, outer_array\n\n_, value, __ = control_flow_ops.While(outer_cond_func, outer_body_func, [tf.constant(0), tf.constant(0.0), outer])\nloss = value * X\ntrain_op = tf.train.GradientDescentOptimizer(learning_rate=0.1).minimize(loss)\nsess = tf.Session()\ninit = tf.initialize_all_variables()\nsess.run(init)\nfor i in xrange(1, 10):\nfeed_dict = {inner: [1.0, 2.0, 3.0], outer: [4.0, 5.0, 6.0, 7.0, 8.0]}\nprint sess.run([train_op, loss], feed_dict=feed_dict)", "body": "I am still getting the error in 0.7.1. See the following test that demonstrates the error:\n\nimport tensorflow as tf\nfrom tensorflow.python.ops import control_flow_ops\n\nOUTER_LOOP_MAX = 5\nINNER_LOOP_MAX = 3\n\ninner = tf.placeholder(\"float32\", [INNER_LOOP_MAX])\nouter = tf.placeholder(\"float32\", [OUTER_LOOP_MAX])\n\nX = tf.Variable(tf.zeros([1], dtype=\"float32\"))\n\ndef outer_cond_func(c1, outer_acc, outer_array):\n    return tf.less(c1, OUTER_LOOP_MAX)\n\ndef outer_body_func(c1, outer_acc, outer_array):\n    slice = tf.slice(outer_array, tf.expand_dims(c1, 0), [1])\n    outer_num = tf.reduce_sum(slice)\n\n```\ndef inner_cond_func(c2, inner_acc, inner_array):\n    return tf.less(c2, INNER_LOOP_MAX)\n\ndef inner_body_func(c2, inner_acc, inner_array):\n    inner_num = tf.reduce_sum(tf.slice(inner_array, tf.expand_dims(c2, 0), [1]))\n    inner_acc += inner_num * outer_num * X\n\n    c2 += 1\n    return c2, inner_acc, inner_array\n\n_, inside_summed_products, _ = control_flow_ops.While(inner_cond_func, inner_body_func, [tf.constant(0), tf.constant(0.0), inner])\n\nouter_acc = tf.add(outer_acc, inside_summed_products)\nc1 += 1\nreturn c1, outer_acc, outer_array\n```\n\n_, value, __ = control_flow_ops.While(outer_cond_func, outer_body_func, [tf.constant(0), tf.constant(0.0), outer])\n\nloss = value \\* X\ntrain_op = tf.train.GradientDescentOptimizer(learning_rate=0.1).minimize(loss)\n\nsess = tf.Session()\ninit = tf.initialize_all_variables()\nsess.run(init)\n\nfor i in xrange(1, 10):\n    feed_dict = {inner: [1.0, 2.0, 3.0], outer: [4.0, 5.0, 6.0, 7.0, 8.0]}\n    print sess.run([train_op, loss], feed_dict=feed_dict)\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3595", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3595/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3595/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3595/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3595", "id": 168552409, "node_id": "MDU6SXNzdWUxNjg1NTI0MDk=", "number": 3595, "title": "Unable to replicate RNN results on a different dataset", "user": {"login": "pranjaldaga", "id": 3074134, "node_id": "MDQ6VXNlcjMwNzQxMzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/3074134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pranjaldaga", "html_url": "https://github.com/pranjaldaga", "followers_url": "https://api.github.com/users/pranjaldaga/followers", "following_url": "https://api.github.com/users/pranjaldaga/following{/other_user}", "gists_url": "https://api.github.com/users/pranjaldaga/gists{/gist_id}", "starred_url": "https://api.github.com/users/pranjaldaga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pranjaldaga/subscriptions", "organizations_url": "https://api.github.com/users/pranjaldaga/orgs", "repos_url": "https://api.github.com/users/pranjaldaga/repos", "events_url": "https://api.github.com/users/pranjaldaga/events{/privacy}", "received_events_url": "https://api.github.com/users/pranjaldaga/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-08-01T01:57:51Z", "updated_at": "2016-08-01T23:26:46Z", "closed_at": "2016-08-01T23:23:40Z", "author_association": "NONE", "body_html": "<h3>What is the problem?</h3>\n<p><a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/ptb_word_lm.py\">This RNN tutorial script </a> works perfectly fine until the contents of the files are unchanged, but once changed a <strong>KeyError</strong> is encountered. (see the error log below)</p>\n<h3>Environment info</h3>\n<p>Operating System:</p>\n<p>Installed version of CUDA and cuDNN:</p>\n<p>lrwxrwxrwx 1 root root       12 May 24 00:01 libcuda.so -&gt; libcuda.so.1<br>\nlrwxrwxrwx 1 root root       17 May 24 00:01 libcuda.so.1 -&gt; libcuda.so.352.41<br>\n-rwxr-xr-x 1 root root 14280360 May 24 00:01 libcuda.so.352.41<br>\nlrwxrwxrwx 1 root root       29 May 24 00:02 libcudnn.so -&gt; /etc/alternatives/libcudnn_so<br>\nlrwxrwxrwx 1 root root       17 Feb  9 07:47 libcudnn.so.4 -&gt; libcudnn.so.4.0.7<br>\n-rw-r--r-- 1 root root 61453024 Feb  9 07:47 libcudnn.so.4.0.7<br>\nlrwxrwxrwx 1 root root       32 May 24 00:02 libcudnn_static.a -&gt; /etc/alternatives/libcudnn_stlib<br>\n-rw-r--r-- 1 root root 62025862 Feb  9 07:47 libcudnn_static_v4.a</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>Which pip package you installed:<br>\n<strong>_Ubuntu/Linux 64-bit, GPU enabled, Python 2.7</strong>_</li>\n<li>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.</li>\n</ol>\n<p>I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally<br>\n0.9.0</p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Download data from here: <a href=\"http://www.fit.vutbr.cz/~imikolov/rnnlm/simple-examples.tgz\" rel=\"nofollow\">http://www.fit.vutbr.cz/~imikolov/rnnlm/simple-examples.tgz</a></li>\n<li>Cloned the tensorflow git repository, and be in the root of the git tree.</li>\n<li>cd tensorflow/models/rnn/ptb</li>\n<li>python ptb_word_lm.py --data_path=/tmp/simple-examples/data/ --model small</li>\n</ol>\n<h3>What have you tried?</h3>\n<ol>\n<li>Change the contents of the file ptb.train.txt OR ptb.valid.txt OR ptb.test.txt</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>Traceback (most recent call last):<br>\nFile \"ptb_word_lm.py\", line 350, in <br>\ntf.app.run()<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"ptb_word_lm.py\", line 289, in main<br>\nraw_data = reader.ptb_raw_data(FLAGS.data_path)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/ptb/reader.py\", line 76, in ptb_raw_data<br>\nvalid_data = _file_to_word_ids(valid_path, word_to_id)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/ptb/reader.py\", line 48, in _file_to_word_ids<br>\nreturn [word_to_id[word] for word in data]<br>\nKeyError: '[The'</p>\n<p><strong>_NOTE</strong>_: For this specific example, the contents of ptb.valid.txt were changed and the first line of this file is \"[The Parent's Assistant, by Maria Edgeworth]\"</p>", "body_text": "What is the problem?\nThis RNN tutorial script  works perfectly fine until the contents of the files are unchanged, but once changed a KeyError is encountered. (see the error log below)\nEnvironment info\nOperating System:\nInstalled version of CUDA and cuDNN:\nlrwxrwxrwx 1 root root       12 May 24 00:01 libcuda.so -> libcuda.so.1\nlrwxrwxrwx 1 root root       17 May 24 00:01 libcuda.so.1 -> libcuda.so.352.41\n-rwxr-xr-x 1 root root 14280360 May 24 00:01 libcuda.so.352.41\nlrwxrwxrwx 1 root root       29 May 24 00:02 libcudnn.so -> /etc/alternatives/libcudnn_so\nlrwxrwxrwx 1 root root       17 Feb  9 07:47 libcudnn.so.4 -> libcudnn.so.4.0.7\n-rw-r--r-- 1 root root 61453024 Feb  9 07:47 libcudnn.so.4.0.7\nlrwxrwxrwx 1 root root       32 May 24 00:02 libcudnn_static.a -> /etc/alternatives/libcudnn_stlib\n-rw-r--r-- 1 root root 62025862 Feb  9 07:47 libcudnn_static_v4.a\nIf installed from binary pip package, provide:\n\nWhich pip package you installed:\n_Ubuntu/Linux 64-bit, GPU enabled, Python 2.7_\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\n\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\n0.9.0\nSteps to reproduce\n\nDownload data from here: http://www.fit.vutbr.cz/~imikolov/rnnlm/simple-examples.tgz\nCloned the tensorflow git repository, and be in the root of the git tree.\ncd tensorflow/models/rnn/ptb\npython ptb_word_lm.py --data_path=/tmp/simple-examples/data/ --model small\n\nWhat have you tried?\n\nChange the contents of the file ptb.train.txt OR ptb.valid.txt OR ptb.test.txt\n\nLogs or other output that would be helpful\nTraceback (most recent call last):\nFile \"ptb_word_lm.py\", line 350, in \ntf.app.run()\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"ptb_word_lm.py\", line 289, in main\nraw_data = reader.ptb_raw_data(FLAGS.data_path)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/ptb/reader.py\", line 76, in ptb_raw_data\nvalid_data = _file_to_word_ids(valid_path, word_to_id)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/ptb/reader.py\", line 48, in _file_to_word_ids\nreturn [word_to_id[word] for word in data]\nKeyError: '[The'\n_NOTE_: For this specific example, the contents of ptb.valid.txt were changed and the first line of this file is \"[The Parent's Assistant, by Maria Edgeworth]\"", "body": "### What is the problem?\n\n[This RNN tutorial script ](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/ptb_word_lm.py) works perfectly fine until the contents of the files are unchanged, but once changed a **KeyError** is encountered. (see the error log below)\n### Environment info\n\nOperating System:\n\nInstalled version of CUDA and cuDNN: \n\nlrwxrwxrwx 1 root root       12 May 24 00:01 libcuda.so -> libcuda.so.1\nlrwxrwxrwx 1 root root       17 May 24 00:01 libcuda.so.1 -> libcuda.so.352.41\n-rwxr-xr-x 1 root root 14280360 May 24 00:01 libcuda.so.352.41\nlrwxrwxrwx 1 root root       29 May 24 00:02 libcudnn.so -> /etc/alternatives/libcudnn_so\nlrwxrwxrwx 1 root root       17 Feb  9 07:47 libcudnn.so.4 -> libcudnn.so.4.0.7\n-rw-r--r-- 1 root root 61453024 Feb  9 07:47 libcudnn.so.4.0.7\nlrwxrwxrwx 1 root root       32 May 24 00:02 libcudnn_static.a -> /etc/alternatives/libcudnn_stlib\n-rw-r--r-- 1 root root 62025862 Feb  9 07:47 libcudnn_static_v4.a\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed: \n   **_Ubuntu/Linux 64-bit, GPU enabled, Python 2.7**_\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\n0.9.0\n### Steps to reproduce\n1. Download data from here: http://www.fit.vutbr.cz/~imikolov/rnnlm/simple-examples.tgz \n2. Cloned the tensorflow git repository, and be in the root of the git tree.\n3. cd tensorflow/models/rnn/ptb\n4. python ptb_word_lm.py --data_path=/tmp/simple-examples/data/ --model small\n### What have you tried?\n1. Change the contents of the file ptb.train.txt OR ptb.valid.txt OR ptb.test.txt\n### Logs or other output that would be helpful\n\nTraceback (most recent call last):\n  File \"ptb_word_lm.py\", line 350, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"ptb_word_lm.py\", line 289, in main\n    raw_data = reader.ptb_raw_data(FLAGS.data_path)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/ptb/reader.py\", line 76, in ptb_raw_data\n    valid_data = _file_to_word_ids(valid_path, word_to_id)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/ptb/reader.py\", line 48, in _file_to_word_ids\n    return [word_to_id[word] for word in data]\nKeyError: '[The'\n\n**_NOTE**_: For this specific example, the contents of ptb.valid.txt were changed and the first line of this file is \"[The Parent's Assistant, by Maria Edgeworth]\"\n"}
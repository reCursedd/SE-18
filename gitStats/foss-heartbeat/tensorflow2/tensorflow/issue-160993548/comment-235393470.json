{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/235393470", "html_url": "https://github.com/tensorflow/tensorflow/issues/2940#issuecomment-235393470", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2940", "id": 235393470, "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTM5MzQ3MA==", "user": {"login": "hbfs", "id": 2048786, "node_id": "MDQ6VXNlcjIwNDg3ODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2048786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hbfs", "html_url": "https://github.com/hbfs", "followers_url": "https://api.github.com/users/hbfs/followers", "following_url": "https://api.github.com/users/hbfs/following{/other_user}", "gists_url": "https://api.github.com/users/hbfs/gists{/gist_id}", "starred_url": "https://api.github.com/users/hbfs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hbfs/subscriptions", "organizations_url": "https://api.github.com/users/hbfs/orgs", "repos_url": "https://api.github.com/users/hbfs/repos", "events_url": "https://api.github.com/users/hbfs/events{/privacy}", "received_events_url": "https://api.github.com/users/hbfs/received_events", "type": "User", "site_admin": false}, "created_at": "2016-07-26T20:24:42Z", "updated_at": "2016-07-26T20:24:55Z", "author_association": "NONE", "body_html": "<p>Previously I was following these instructions <a href=\"https://gist.github.com/Mistobaan/dd32287eeb6859c6668d\">https://gist.github.com/Mistobaan/dd32287eeb6859c6668d</a> and built from <code>master</code>. Now I used <a href=\"https://gist.github.com/ageitgey/819a51afa4613649bd18\">https://gist.github.com/ageitgey/819a51afa4613649bd18</a> and built from tag <code>cuda_osx</code>  and it worked. Note: I had to run <code>git submodule update --init</code> prior to bazel build commands and also prior to creating the pip packages <code>cp -r bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/__main__/* bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/ </code> from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"149914823\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2040\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2040/hovercard?comment_id=217833442&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/2040#issuecomment-217833442\">#2040 (comment)</a> Notice the amount of free memory available!</p>\n<pre><code>python test.py\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.1.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.7.5.dylib locally\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] OS X does not support NUMA - returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties:\nname: GeForce GTX 960\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.367\npciBusID 0000:04:00.0\nTotal memory: 2.00GiB\nFree memory: 176.32MiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:841] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX 960, pci bus id: 0000:04:00.0)\nDevice mapping:\n/job:localhost/replica:0/task:0/gpu:0 -&gt; device: 0, name: GeForce GTX 960, pci bus id: 0000:04:00.0\nI tensorflow/core/common_runtime/direct_session.cc:175] Device mapping:\n/job:localhost/replica:0/task:0/gpu:0 -&gt; device: 0, name: GeForce GTX 960, pci bus id: 0000:04:00.0\n\nMatMul: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:818] MatMul: /job:localhost/replica:0/task:0/gpu:0\nb: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:818] b: /job:localhost/replica:0/task:0/gpu:0\na: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:818] a: /job:localhost/replica:0/task:0/gpu:0\n[[ 22.  28.]\n [ 49.  64.]]\n</code></pre>\n<p>I also rebuilt this using <code>master</code> branch and it worked. I think the key is <code>TF_UNOFFICIAL_SETTING=1 ./configure</code></p>", "body_text": "Previously I was following these instructions https://gist.github.com/Mistobaan/dd32287eeb6859c6668d and built from master. Now I used https://gist.github.com/ageitgey/819a51afa4613649bd18 and built from tag cuda_osx  and it worked. Note: I had to run git submodule update --init prior to bazel build commands and also prior to creating the pip packages cp -r bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/__main__/* bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/  from #2040 (comment) Notice the amount of free memory available!\npython test.py\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.1.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.7.5.dylib locally\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] OS X does not support NUMA - returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties:\nname: GeForce GTX 960\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.367\npciBusID 0000:04:00.0\nTotal memory: 2.00GiB\nFree memory: 176.32MiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:841] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 960, pci bus id: 0000:04:00.0)\nDevice mapping:\n/job:localhost/replica:0/task:0/gpu:0 -> device: 0, name: GeForce GTX 960, pci bus id: 0000:04:00.0\nI tensorflow/core/common_runtime/direct_session.cc:175] Device mapping:\n/job:localhost/replica:0/task:0/gpu:0 -> device: 0, name: GeForce GTX 960, pci bus id: 0000:04:00.0\n\nMatMul: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:818] MatMul: /job:localhost/replica:0/task:0/gpu:0\nb: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:818] b: /job:localhost/replica:0/task:0/gpu:0\na: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:818] a: /job:localhost/replica:0/task:0/gpu:0\n[[ 22.  28.]\n [ 49.  64.]]\n\nI also rebuilt this using master branch and it worked. I think the key is TF_UNOFFICIAL_SETTING=1 ./configure", "body": "Previously I was following these instructions https://gist.github.com/Mistobaan/dd32287eeb6859c6668d and built from `master`. Now I used https://gist.github.com/ageitgey/819a51afa4613649bd18 and built from tag `cuda_osx`  and it worked. Note: I had to run `git submodule update --init` prior to bazel build commands and also prior to creating the pip packages `cp -r bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/__main__/* bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/\n` from https://github.com/tensorflow/tensorflow/issues/2040#issuecomment-217833442 Notice the amount of free memory available!\n\n```\npython test.py\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.1.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.7.5.dylib locally\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] OS X does not support NUMA - returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties:\nname: GeForce GTX 960\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.367\npciBusID 0000:04:00.0\nTotal memory: 2.00GiB\nFree memory: 176.32MiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:841] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 960, pci bus id: 0000:04:00.0)\nDevice mapping:\n/job:localhost/replica:0/task:0/gpu:0 -> device: 0, name: GeForce GTX 960, pci bus id: 0000:04:00.0\nI tensorflow/core/common_runtime/direct_session.cc:175] Device mapping:\n/job:localhost/replica:0/task:0/gpu:0 -> device: 0, name: GeForce GTX 960, pci bus id: 0000:04:00.0\n\nMatMul: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:818] MatMul: /job:localhost/replica:0/task:0/gpu:0\nb: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:818] b: /job:localhost/replica:0/task:0/gpu:0\na: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:818] a: /job:localhost/replica:0/task:0/gpu:0\n[[ 22.  28.]\n [ 49.  64.]]\n```\n\nI also rebuilt this using `master` branch and it worked. I think the key is `TF_UNOFFICIAL_SETTING=1 ./configure`\n"}
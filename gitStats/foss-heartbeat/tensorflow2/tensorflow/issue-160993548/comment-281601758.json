{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/281601758", "html_url": "https://github.com/tensorflow/tensorflow/issues/2940#issuecomment-281601758", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2940", "id": 281601758, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTYwMTc1OA==", "user": {"login": "peterswang", "id": 10738534, "node_id": "MDQ6VXNlcjEwNzM4NTM0", "avatar_url": "https://avatars3.githubusercontent.com/u/10738534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peterswang", "html_url": "https://github.com/peterswang", "followers_url": "https://api.github.com/users/peterswang/followers", "following_url": "https://api.github.com/users/peterswang/following{/other_user}", "gists_url": "https://api.github.com/users/peterswang/gists{/gist_id}", "starred_url": "https://api.github.com/users/peterswang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peterswang/subscriptions", "organizations_url": "https://api.github.com/users/peterswang/orgs", "repos_url": "https://api.github.com/users/peterswang/repos", "events_url": "https://api.github.com/users/peterswang/events{/privacy}", "received_events_url": "https://api.github.com/users/peterswang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-22T08:27:33Z", "updated_at": "2017-02-22T08:27:33Z", "author_association": "NONE", "body_html": "<p>Had managed to build TF 0.12 by following <a href=\"https://github.com/JimmyKon/tensorflow_build_issue_fix/tree/master\">How to fix dyld: Library not loaded: @rpath/libcudart.7.5.dylib issue when you build tensorflow on your Mac</a>.</p>\n<p>Just tried the building TF 1.0 from source using the same method and now the following error shows up after the patch in genrule-setup.sh:<br>\nERROR: /Users/peter_wang/TF/tensorflow-1.0/tensorflow/python/BUILD:2279:1: Linking of rule '//tensorflow/python:_pywrap_tensorflow.so' failed: link_dynamic_library.sh failed: error executing command external/bazel_tools/tools/cpp/link_dynamic_library.sh no ignored ignored ignored external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o ... (remaining 648 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.<br>\nclang: warning: argument unused during compilation: '-pthread'<br>\nld: file not found: -lcudart.8.0<br>\nclang: error: linker command failed with exit code 1 (use -v to see invocation)<br>\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build</p>\n<p>Environment: 2012 MBP with Nvidia 650M, OS X 10.12.3, Python 2.7.13.</p>\n<p>Links in /usr/local/cuda/lib, as suggested by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=59046\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/victorv\">@victorv</a> was set before, though this doesn't seem to be the same issue.<br>\nlrwxr-xr-x  1 root  wheel     33 Feb 10 14:30 /usr/local/cuda/lib/libcuda.1.dylib -&gt; /usr/local/cuda/lib/libcuda.dylib<br>\n-rwxr-xr-x  1 root  wheel  13504 Jan 24 11:58 /usr/local/cuda/lib/libcuda.dylib<br>\nlrwxr-xr-x@ 1 root  wheel     45 Nov  3 11:40 /usr/local/cuda/lib/libcudadevrt.a -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudadevrt.a<br>\nlrwxr-xr-x@ 1 root  wheel     50 Nov  3 11:40 /usr/local/cuda/lib/libcudart.8.0.dylib -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudart.8.0.dylib<br>\nlrwxr-xr-x@ 1 root  wheel     46 Nov  3 11:40 /usr/local/cuda/lib/libcudart.dylib -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudart.dylib<br>\nlrwxr-xr-x@ 1 root  wheel     49 Nov  3 11:40 /usr/local/cuda/lib/libcudart_static.a -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudart_static.a</p>\n<p>\"pip install tensorflow-gpu\" does work. However, the standard build apparently doesn't include AVX &amp; SSE, which I'd like to make use of as well.</p>", "body_text": "Had managed to build TF 0.12 by following How to fix dyld: Library not loaded: @rpath/libcudart.7.5.dylib issue when you build tensorflow on your Mac.\nJust tried the building TF 1.0 from source using the same method and now the following error shows up after the patch in genrule-setup.sh:\nERROR: /Users/peter_wang/TF/tensorflow-1.0/tensorflow/python/BUILD:2279:1: Linking of rule '//tensorflow/python:_pywrap_tensorflow.so' failed: link_dynamic_library.sh failed: error executing command external/bazel_tools/tools/cpp/link_dynamic_library.sh no ignored ignored ignored external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o ... (remaining 648 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nclang: warning: argument unused during compilation: '-pthread'\nld: file not found: -lcudart.8.0\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nEnvironment: 2012 MBP with Nvidia 650M, OS X 10.12.3, Python 2.7.13.\nLinks in /usr/local/cuda/lib, as suggested by @victorv was set before, though this doesn't seem to be the same issue.\nlrwxr-xr-x  1 root  wheel     33 Feb 10 14:30 /usr/local/cuda/lib/libcuda.1.dylib -> /usr/local/cuda/lib/libcuda.dylib\n-rwxr-xr-x  1 root  wheel  13504 Jan 24 11:58 /usr/local/cuda/lib/libcuda.dylib\nlrwxr-xr-x@ 1 root  wheel     45 Nov  3 11:40 /usr/local/cuda/lib/libcudadevrt.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudadevrt.a\nlrwxr-xr-x@ 1 root  wheel     50 Nov  3 11:40 /usr/local/cuda/lib/libcudart.8.0.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart.8.0.dylib\nlrwxr-xr-x@ 1 root  wheel     46 Nov  3 11:40 /usr/local/cuda/lib/libcudart.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart.dylib\nlrwxr-xr-x@ 1 root  wheel     49 Nov  3 11:40 /usr/local/cuda/lib/libcudart_static.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart_static.a\n\"pip install tensorflow-gpu\" does work. However, the standard build apparently doesn't include AVX & SSE, which I'd like to make use of as well.", "body": "Had managed to build TF 0.12 by following [How to fix dyld: Library not loaded: @rpath/libcudart.7.5.dylib issue when you build tensorflow on your Mac](https://github.com/JimmyKon/tensorflow_build_issue_fix/tree/master).\r\n\r\nJust tried the building TF 1.0 from source using the same method and now the following error shows up after the patch in genrule-setup.sh:\r\nERROR: /Users/peter_wang/TF/tensorflow-1.0/tensorflow/python/BUILD:2279:1: Linking of rule '//tensorflow/python:_pywrap_tensorflow.so' failed: link_dynamic_library.sh failed: error executing command external/bazel_tools/tools/cpp/link_dynamic_library.sh no ignored ignored ignored external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o ... (remaining 648 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\nclang: warning: argument unused during compilation: '-pthread'\r\nld: file not found: -lcudart.8.0\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n\r\nEnvironment: 2012 MBP with Nvidia 650M, OS X 10.12.3, Python 2.7.13. \r\n\r\nLinks in /usr/local/cuda/lib, as suggested by @victorv was set before, though this doesn't seem to be the same issue.\r\nlrwxr-xr-x  1 root  wheel     33 Feb 10 14:30 /usr/local/cuda/lib/libcuda.1.dylib -> /usr/local/cuda/lib/libcuda.dylib\r\n-rwxr-xr-x  1 root  wheel  13504 Jan 24 11:58 /usr/local/cuda/lib/libcuda.dylib\r\nlrwxr-xr-x@ 1 root  wheel     45 Nov  3 11:40 /usr/local/cuda/lib/libcudadevrt.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudadevrt.a\r\nlrwxr-xr-x@ 1 root  wheel     50 Nov  3 11:40 /usr/local/cuda/lib/libcudart.8.0.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart.8.0.dylib\r\nlrwxr-xr-x@ 1 root  wheel     46 Nov  3 11:40 /usr/local/cuda/lib/libcudart.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart.dylib\r\nlrwxr-xr-x@ 1 root  wheel     49 Nov  3 11:40 /usr/local/cuda/lib/libcudart_static.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart_static.a\r\n\r\n\"pip install tensorflow-gpu\" does work. However, the standard build apparently doesn't include AVX & SSE, which I'd like to make use of as well."}
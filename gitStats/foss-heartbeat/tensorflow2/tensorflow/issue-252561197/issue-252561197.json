{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12556", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12556/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12556/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12556/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12556", "id": 252561197, "node_id": "MDU6SXNzdWUyNTI1NjExOTc=", "number": 12556, "title": "MonitoredTrainingSession can't add summary and checkpoint hook", "user": {"login": "luvwinnie", "id": 13714992, "node_id": "MDQ6VXNlcjEzNzE0OTky", "avatar_url": "https://avatars1.githubusercontent.com/u/13714992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luvwinnie", "html_url": "https://github.com/luvwinnie", "followers_url": "https://api.github.com/users/luvwinnie/followers", "following_url": "https://api.github.com/users/luvwinnie/following{/other_user}", "gists_url": "https://api.github.com/users/luvwinnie/gists{/gist_id}", "starred_url": "https://api.github.com/users/luvwinnie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luvwinnie/subscriptions", "organizations_url": "https://api.github.com/users/luvwinnie/orgs", "repos_url": "https://api.github.com/users/luvwinnie/repos", "events_url": "https://api.github.com/users/luvwinnie/events{/privacy}", "received_events_url": "https://api.github.com/users/luvwinnie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2017-08-24T10:42:49Z", "updated_at": "2017-08-25T23:49:44Z", "closed_at": "2017-08-25T23:01:57Z", "author_association": "NONE", "body_html": "<p>I trying to add summary and checkpoint to my distributed tensorflow training with custom data</p>\n<pre>summary_hook = tf.train.SummarySaverHook(save_secs=600,output_dir=FLAGS.log_dir,summary_op=summary_op)\ncheckpoint_hook = tf.train.CheckpointSaverHook(save_steps=test_timing,checkpoint_dir=FLAGS.log_dir,saver=saver)\nwith tf.train.MonitoredTrainingSession(server.target,is_chief=is_chief,hooks=[sync_replicas_hook,summary_hook,checkpoint_hook],config=sess_config) as sess:</pre>\n<p>with above I can't run the sess with error of below</p>\n<pre>2017-08-24 19:38:31.250556: W tensorflow/core/framework/op_kernel.cc:1148] Invalid argument: Shape [-1,13] has negative dimensions\n2017-08-24 19:38:31.250633: E tensorflow/core/common_runtime/executor.cc:644] Executor failed to create kernel. Invalid argument: Shape [-1,13] has negative dimensions\n      [[Node: mfcc_input = Placeholder[dtype=DT_FLOAT, shape=[?,13], _device=\"/job:worker/replica:0/task:0/gpu:0\"]()]]\n2017-08-24 19:38:31.251688: W tensorflow/core/framework/op_kernel.cc:1148] Invalid argument: Shape [-1,13] has negative dimensions\n2017-08-24 19:38:31.251734: E tensorflow/core/common_runtime/executor.cc:644] Executor failed to create kernel. Invalid argument: Shape [-1,13] has negative dimensions\n      [[Node: mfcc_input = Placeholder[dtype=DT_FLOAT, shape=[?,13], _device=\"/job:worker/replica:0/task:0/gpu:0\"]()]]\n2017-08-24 19:38:31.253478: W tensorflow/core/framework/op_kernel.cc:1148] Invalid argument: Shape [-1,3] has negative dimensions\n2017-08-24 19:38:31.253522: E tensorflow/core/common_runtime/executor.cc:644] Executor failed to create kernel. Invalid argument: Shape [-1,3] has negative dimensions\n      [[Node: labels = Placeholder[dtype=DT_INT32, shape=[?,3], _device=\"/job:worker/replica:0/task:0/gpu:0\"]()]]</pre>\n<p>how ever if I run without the summary and checkpoint hook it just work fine....<br>\nI want to specify which timing and which directory to view my summary and save the checkpoint.<br>\nDoes anyone have an idea how to solve this problem?</p>", "body_text": "I trying to add summary and checkpoint to my distributed tensorflow training with custom data\nsummary_hook = tf.train.SummarySaverHook(save_secs=600,output_dir=FLAGS.log_dir,summary_op=summary_op)\ncheckpoint_hook = tf.train.CheckpointSaverHook(save_steps=test_timing,checkpoint_dir=FLAGS.log_dir,saver=saver)\nwith tf.train.MonitoredTrainingSession(server.target,is_chief=is_chief,hooks=[sync_replicas_hook,summary_hook,checkpoint_hook],config=sess_config) as sess:\nwith above I can't run the sess with error of below\n2017-08-24 19:38:31.250556: W tensorflow/core/framework/op_kernel.cc:1148] Invalid argument: Shape [-1,13] has negative dimensions\n2017-08-24 19:38:31.250633: E tensorflow/core/common_runtime/executor.cc:644] Executor failed to create kernel. Invalid argument: Shape [-1,13] has negative dimensions\n      [[Node: mfcc_input = Placeholder[dtype=DT_FLOAT, shape=[?,13], _device=\"/job:worker/replica:0/task:0/gpu:0\"]()]]\n2017-08-24 19:38:31.251688: W tensorflow/core/framework/op_kernel.cc:1148] Invalid argument: Shape [-1,13] has negative dimensions\n2017-08-24 19:38:31.251734: E tensorflow/core/common_runtime/executor.cc:644] Executor failed to create kernel. Invalid argument: Shape [-1,13] has negative dimensions\n      [[Node: mfcc_input = Placeholder[dtype=DT_FLOAT, shape=[?,13], _device=\"/job:worker/replica:0/task:0/gpu:0\"]()]]\n2017-08-24 19:38:31.253478: W tensorflow/core/framework/op_kernel.cc:1148] Invalid argument: Shape [-1,3] has negative dimensions\n2017-08-24 19:38:31.253522: E tensorflow/core/common_runtime/executor.cc:644] Executor failed to create kernel. Invalid argument: Shape [-1,3] has negative dimensions\n      [[Node: labels = Placeholder[dtype=DT_INT32, shape=[?,3], _device=\"/job:worker/replica:0/task:0/gpu:0\"]()]]\nhow ever if I run without the summary and checkpoint hook it just work fine....\nI want to specify which timing and which directory to view my summary and save the checkpoint.\nDoes anyone have an idea how to solve this problem?", "body": "I trying to add summary and checkpoint to my distributed tensorflow training with custom data \r\n\r\n<pre>summary_hook = tf.train.SummarySaverHook(save_secs=600,output_dir=FLAGS.log_dir,summary_op=summary_op)\r\ncheckpoint_hook = tf.train.CheckpointSaverHook(save_steps=test_timing,checkpoint_dir=FLAGS.log_dir,saver=saver)\r\nwith tf.train.MonitoredTrainingSession(server.target,is_chief=is_chief,hooks=[sync_replicas_hook,summary_hook,checkpoint_hook],config=sess_config) as sess:</pre>\r\n\r\nwith above I can't run the sess with error of below\r\n<pre>2017-08-24 19:38:31.250556: W tensorflow/core/framework/op_kernel.cc:1148] Invalid argument: Shape [-1,13] has negative dimensions\r\n2017-08-24 19:38:31.250633: E tensorflow/core/common_runtime/executor.cc:644] Executor failed to create kernel. Invalid argument: Shape [-1,13] has negative dimensions\r\n      [[Node: mfcc_input = Placeholder[dtype=DT_FLOAT, shape=[?,13], _device=\"/job:worker/replica:0/task:0/gpu:0\"]()]]\r\n2017-08-24 19:38:31.251688: W tensorflow/core/framework/op_kernel.cc:1148] Invalid argument: Shape [-1,13] has negative dimensions\r\n2017-08-24 19:38:31.251734: E tensorflow/core/common_runtime/executor.cc:644] Executor failed to create kernel. Invalid argument: Shape [-1,13] has negative dimensions\r\n      [[Node: mfcc_input = Placeholder[dtype=DT_FLOAT, shape=[?,13], _device=\"/job:worker/replica:0/task:0/gpu:0\"]()]]\r\n2017-08-24 19:38:31.253478: W tensorflow/core/framework/op_kernel.cc:1148] Invalid argument: Shape [-1,3] has negative dimensions\r\n2017-08-24 19:38:31.253522: E tensorflow/core/common_runtime/executor.cc:644] Executor failed to create kernel. Invalid argument: Shape [-1,3] has negative dimensions\r\n      [[Node: labels = Placeholder[dtype=DT_INT32, shape=[?,3], _device=\"/job:worker/replica:0/task:0/gpu:0\"]()]]</pre>\r\n\r\nhow ever if I run without the summary and checkpoint hook it just work fine....\r\nI want to specify which timing and which directory to view my summary and save the checkpoint.\r\nDoes anyone have an idea how to solve this problem?\r\n"}
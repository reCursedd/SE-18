{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3168", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3168/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3168/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3168/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3168", "id": 163558306, "node_id": "MDU6SXNzdWUxNjM1NTgzMDY=", "number": 3168, "title": "fully_connected_preloaded example: Attempting to use uninitialized value input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs", "user": {"login": "MatthieuBizien", "id": 173090, "node_id": "MDQ6VXNlcjE3MzA5MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/173090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MatthieuBizien", "html_url": "https://github.com/MatthieuBizien", "followers_url": "https://api.github.com/users/MatthieuBizien/followers", "following_url": "https://api.github.com/users/MatthieuBizien/following{/other_user}", "gists_url": "https://api.github.com/users/MatthieuBizien/gists{/gist_id}", "starred_url": "https://api.github.com/users/MatthieuBizien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MatthieuBizien/subscriptions", "organizations_url": "https://api.github.com/users/MatthieuBizien/orgs", "repos_url": "https://api.github.com/users/MatthieuBizien/repos", "events_url": "https://api.github.com/users/MatthieuBizien/events{/privacy}", "received_events_url": "https://api.github.com/users/MatthieuBizien/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-07-03T11:29:36Z", "updated_at": "2016-10-14T04:34:29Z", "closed_at": "2016-07-13T21:28:12Z", "author_association": "NONE", "body_html": "<p>I have the error <code>Attempting to use uninitialized value input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs</code> when I load data in my code. I have found the same issue on the fully_connected_preloaded example, so I think it may be a regression.</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 16.04</p>\n<p>Installed version of CUDA and cuDNN: Cuda 8.0 and CuDnn 8.0</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ ls -l /path/to/cuda/lib<span class=\"pl-k\">*</span>/libcud<span class=\"pl-k\">*</span>\n-rw-r--r-- 1 root root   560184 juin  30 00:45 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 juin  30 00:45 /usr/local/cuda/lib64/libcudart.so -<span class=\"pl-k\">&gt;</span> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 juin  30 00:45 /usr/local/cuda/lib64/libcudart.so.8.0 -<span class=\"pl-k\">&gt;</span> libcudart.so.8.0.27\n-rwxr-xr-x 1 root root   394472 juin  30 00:45 /usr/local/cuda/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 juin  30 00:45 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 78065952 juin  30 01:08 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 78065952 juin  30 01:08 /usr/local/cuda/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 78065952 juin  30 01:08 /usr/local/cuda/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 juin  30 01:08 /usr/local/cuda/lib64/libcudnn_static.a</pre></div>\n<p>If installed from sources, provide the commit hash: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/db90885e9f27b1e069dd689ddd2dd3b743ed1cb7/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/db90885e9f27b1e069dd689ddd2dd3b743ed1cb7\"><tt>db90885</tt></a></p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>cd tensorflow/examples/how_tos/reading_data</li>\n<li>python fully_connected_preloaded.py</li>\n</ol>\n<h3>What have you tried?</h3>\n<ol>\n<li>`bazel run -c opt tensorflow/examples/how_tos/reading_data:fully_connected_preloaded``</li>\n<li><code>python fully_connected_preloaded.py</code></li>\n<li>My code, which is similar</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment).</p>\n<div class=\"highlight highlight-source-python\"><pre>python fully_connected_preloaded.py\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">108</span>] successfully opened <span class=\"pl-c1\">CUDA</span> library libcublas.so locally\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">108</span>] successfully opened <span class=\"pl-c1\">CUDA</span> library libcudnn.so locally\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">108</span>] successfully opened <span class=\"pl-c1\">CUDA</span> library libcufft.so locally\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">108</span>] successfully opened <span class=\"pl-c1\">CUDA</span> library libcuda.so.1 locally\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">108</span>] successfully opened <span class=\"pl-c1\">CUDA</span> library libcurand.so locally\nExtracting <span class=\"pl-k\">/</span>tmp<span class=\"pl-k\">/</span>data<span class=\"pl-k\">/</span>train<span class=\"pl-k\">-</span>images<span class=\"pl-k\">-</span>idx3<span class=\"pl-k\">-</span>ubyte.gz\nExtracting <span class=\"pl-k\">/</span>tmp<span class=\"pl-k\">/</span>data<span class=\"pl-k\">/</span>train<span class=\"pl-k\">-</span>labels<span class=\"pl-k\">-</span>idx1<span class=\"pl-k\">-</span>ubyte.gz\nExtracting <span class=\"pl-k\">/</span>tmp<span class=\"pl-k\">/</span>data<span class=\"pl-k\">/</span>t10k<span class=\"pl-k\">-</span>images<span class=\"pl-k\">-</span>idx3<span class=\"pl-k\">-</span>ubyte.gz\nExtracting <span class=\"pl-k\">/</span>tmp<span class=\"pl-k\">/</span>data<span class=\"pl-k\">/</span>t10k<span class=\"pl-k\">-</span>labels<span class=\"pl-k\">-</span>idx1<span class=\"pl-k\">-</span>ubyte.gz\nI tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_init.cc:<span class=\"pl-c1\">102</span>] Found device <span class=\"pl-c1\">0</span> <span class=\"pl-k\">with</span> properties:\nname: GeForce <span class=\"pl-c1\">GTX</span> <span class=\"pl-c1\">1080</span>\nmajor: <span class=\"pl-c1\">6</span> minor: <span class=\"pl-c1\">1</span> memoryClockRate (GHz) <span class=\"pl-c1\">1.7335</span>\npciBusID <span class=\"pl-c1\">0000</span>:<span class=\"pl-c1\">0<span class=\"pl-ii\">2</span></span>:<span class=\"pl-c1\">00.0</span>\nTotal memory: <span class=\"pl-c1\">7.</span><span class=\"pl-ii\">92GiB</span>\nFree memory: <span class=\"pl-c1\">7.</span><span class=\"pl-ii\">52GiB</span>\nI tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_init.cc:<span class=\"pl-c1\">126</span>] <span class=\"pl-c1\">DMA</span>: <span class=\"pl-c1\">0</span>\nI tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_init.cc:<span class=\"pl-c1\">136</span>] <span class=\"pl-c1\">0</span>:   Y\nI tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_device.cc:<span class=\"pl-c1\">838</span>] Creating TensorFlow device (<span class=\"pl-k\">/</span>gpu:<span class=\"pl-c1\">0</span>) <span class=\"pl-ii\">-&gt;</span> (device: <span class=\"pl-c1\">0</span>, name: GeForce <span class=\"pl-c1\">GTX</span> <span class=\"pl-c1\">1080</span>, pci bus <span class=\"pl-c1\">id</span>: <span class=\"pl-c1\">0000</span>:<span class=\"pl-c1\">0<span class=\"pl-ii\">2</span></span>:<span class=\"pl-c1\">00.0</span>)\nSaving\nW tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>framework<span class=\"pl-k\">/</span>op_kernel.cc:<span class=\"pl-c1\">936</span>] Out of <span class=\"pl-c1\">range</span>: FIFOQueue <span class=\"pl-s\"><span class=\"pl-pds\">'</span>_1_input/input_producer/input_producer/fraction_of_32_full/fraction_of_32_full<span class=\"pl-pds\">'</span></span> <span class=\"pl-k\">is</span> closed <span class=\"pl-k\">and</span> has insufficient elements (requested <span class=\"pl-c1\">1</span>, current size <span class=\"pl-c1\">0</span>)\n     [[Node: <span class=\"pl-c1\">input</span><span class=\"pl-k\">/</span>input_producer<span class=\"pl-k\">/</span>fraction_of_32_full_Dequeue = QueueDequeue[_class=[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>loc:@input/input_producer/input_producer/fraction_of_32_full/fraction_of_32_full<span class=\"pl-pds\">\"</span></span>], component_types=[<span class=\"pl-c1\">DT_INT32</span>], timeout_ms=<span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/cpu:0<span class=\"pl-pds\">\"</span></span>](<span class=\"pl-c1\">input</span><span class=\"pl-k\">/</span>input_producer<span class=\"pl-k\">/</span>input_producer<span class=\"pl-k\">/</span>fraction_of_32_full<span class=\"pl-k\">/</span>fraction_of_32_full)]]\nDone training <span class=\"pl-k\">for</span> <span class=\"pl-c1\">2</span> epochs, <span class=\"pl-c1\">0</span> steps.\nTraceback (most recent call last):\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>fully_connected_preloaded.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">157</span>, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n    tf.app.run()\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">30</span>, <span class=\"pl-k\">in</span> run\n    sys.exit(main(sys.argv))\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>fully_connected_preloaded.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">153</span>, <span class=\"pl-k\">in</span> main\n    run_training()\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>fully_connected_preloaded.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">148</span>, <span class=\"pl-k\">in</span> run_training\n    coord.join(threads)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/coordinator.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">333</span>, <span class=\"pl-k\">in</span> join\n    six.reraise(<span class=\"pl-k\">*</span><span class=\"pl-c1\">self</span>._exc_info_to_raise)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/queue_runner.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">185</span>, <span class=\"pl-k\">in</span> _run\n    sess.run(enqueue_op)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">382</span>, <span class=\"pl-k\">in</span> run\n    run_metadata_ptr)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">655</span>, <span class=\"pl-k\">in</span> _run\n    feed_dict_string, options, run_metadata)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">723</span>, <span class=\"pl-k\">in</span> _do_run\n    target_list, options, run_metadata)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">743</span>, <span class=\"pl-k\">in</span> _do_call\n    <span class=\"pl-k\">raise</span> <span class=\"pl-c1\">type</span>(e)(node_def, op, message)\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value <span class=\"pl-c1\">input</span><span class=\"pl-k\">/</span>input_producer<span class=\"pl-k\">/</span>input_producer<span class=\"pl-k\">/</span>fraction_of_32_full<span class=\"pl-k\">/</span>limit_epochs<span class=\"pl-k\">/</span>epochs\n     [[Node: <span class=\"pl-c1\">input</span><span class=\"pl-k\">/</span>input_producer<span class=\"pl-k\">/</span>input_producer<span class=\"pl-k\">/</span>fraction_of_32_full<span class=\"pl-k\">/</span>limit_epochs<span class=\"pl-k\">/</span>CountUpTo = CountUpTo[T=<span class=\"pl-c1\">DT_INT64</span>, _class=[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>loc:@input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs<span class=\"pl-pds\">\"</span></span>], limit=<span class=\"pl-c1\">2</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/cpu:0<span class=\"pl-pds\">\"</span></span>](<span class=\"pl-c1\">input</span><span class=\"pl-k\">/</span>input_producer<span class=\"pl-k\">/</span>input_producer<span class=\"pl-k\">/</span>fraction_of_32_full<span class=\"pl-k\">/</span>limit_epochs<span class=\"pl-k\">/</span>epochs)]]\nCaused by op <span class=\"pl-s\"><span class=\"pl-k\">u</span><span class=\"pl-pds\">'</span>input/input_producer/input_producer/fraction_of_32_full/limit_epochs/CountUpTo<span class=\"pl-pds\">'</span></span>, defined at:\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>fully_connected_preloaded.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">157</span>, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n    tf.app.run()\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">30</span>, <span class=\"pl-k\">in</span> run\n    sys.exit(main(sys.argv))\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>fully_connected_preloaded.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">153</span>, <span class=\"pl-k\">in</span> main\n    run_training()\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>fully_connected_preloaded.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">73</span>, <span class=\"pl-k\">in</span> run_training\n    [input_images, input_labels], num_epochs<span class=\"pl-k\">=</span><span class=\"pl-c1\">FLAGS</span>.num_epochs)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">266</span>, <span class=\"pl-k\">in</span> slice_input_producer\n    shared_name<span class=\"pl-k\">=</span>shared_name)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">223</span>, <span class=\"pl-k\">in</span> range_input_producer\n    shared_name, name, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>fraction_of_<span class=\"pl-c1\">%d</span>_full<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">%</span> capacity)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">133</span>, <span class=\"pl-k\">in</span> input_producer\n    input_tensor <span class=\"pl-k\">=</span> limit_epochs(input_tensor, num_epochs)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">84</span>, <span class=\"pl-k\">in</span> limit_epochs\n    counter <span class=\"pl-k\">=</span> epochs.count_up_to(num_epochs)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">573</span>, <span class=\"pl-k\">in</span> count_up_to\n    <span class=\"pl-k\">return</span> state_ops.count_up_to(<span class=\"pl-c1\">self</span>._variable, <span class=\"pl-v\">limit</span><span class=\"pl-k\">=</span>limit)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_state_ops.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">127</span>, <span class=\"pl-k\">in</span> count_up_to\n    result <span class=\"pl-k\">=</span> _op_def_lib.apply_op(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>CountUpTo<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-v\">ref</span><span class=\"pl-k\">=</span>ref, <span class=\"pl-v\">limit</span><span class=\"pl-k\">=</span>limit, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span>name)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">703</span>, <span class=\"pl-k\">in</span> apply_op\n    op_def<span class=\"pl-k\">=</span>op_def)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">2297</span>, <span class=\"pl-k\">in</span> create_op\n    original_op<span class=\"pl-k\">=</span><span class=\"pl-c1\">self</span>._default_original_op, op_def<span class=\"pl-k\">=</span>op_def)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">1231</span>, <span class=\"pl-k\">in</span> <span class=\"pl-c1\">__init__</span>\n    <span class=\"pl-c1\">self</span>._traceback <span class=\"pl-k\">=</span> _extract_stack()</pre></div>", "body_text": "I have the error Attempting to use uninitialized value input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs when I load data in my code. I have found the same issue on the fully_connected_preloaded example, so I think it may be a regression.\nEnvironment info\nOperating System: Ubuntu 16.04\nInstalled version of CUDA and cuDNN: Cuda 8.0 and CuDnn 8.0\n$ ls -l /path/to/cuda/lib*/libcud*\n-rw-r--r-- 1 root root   560184 juin  30 00:45 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 juin  30 00:45 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 juin  30 00:45 /usr/local/cuda/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 root root   394472 juin  30 00:45 /usr/local/cuda/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 juin  30 00:45 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 78065952 juin  30 01:08 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 78065952 juin  30 01:08 /usr/local/cuda/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 78065952 juin  30 01:08 /usr/local/cuda/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 juin  30 01:08 /usr/local/cuda/lib64/libcudnn_static.a\nIf installed from sources, provide the commit hash: db90885\nSteps to reproduce\n\ncd tensorflow/examples/how_tos/reading_data\npython fully_connected_preloaded.py\n\nWhat have you tried?\n\n`bazel run -c opt tensorflow/examples/how_tos/reading_data:fully_connected_preloaded``\npython fully_connected_preloaded.py\nMy code, which is similar\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment).\npython fully_connected_preloaded.py\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\nExtracting /tmp/data/train-images-idx3-ubyte.gz\nExtracting /tmp/data/train-labels-idx1-ubyte.gz\nExtracting /tmp/data/t10k-images-idx3-ubyte.gz\nExtracting /tmp/data/t10k-labels-idx1-ubyte.gz\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties:\nname: GeForce GTX 1080\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.7335\npciBusID 0000:02:00.0\nTotal memory: 7.92GiB\nFree memory: 7.52GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:838] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:02:00.0)\nSaving\nW tensorflow/core/framework/op_kernel.cc:936] Out of range: FIFOQueue '_1_input/input_producer/input_producer/fraction_of_32_full/fraction_of_32_full' is closed and has insufficient elements (requested 1, current size 0)\n     [[Node: input/input_producer/fraction_of_32_full_Dequeue = QueueDequeue[_class=[\"loc:@input/input_producer/input_producer/fraction_of_32_full/fraction_of_32_full\"], component_types=[DT_INT32], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](input/input_producer/input_producer/fraction_of_32_full/fraction_of_32_full)]]\nDone training for 2 epochs, 0 steps.\nTraceback (most recent call last):\n  File \"fully_connected_preloaded.py\", line 157, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"fully_connected_preloaded.py\", line 153, in main\n    run_training()\n  File \"fully_connected_preloaded.py\", line 148, in run_training\n    coord.join(threads)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/coordinator.py\", line 333, in join\n    six.reraise(*self._exc_info_to_raise)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/queue_runner.py\", line 185, in _run\n    sess.run(enqueue_op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 382, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 655, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 723, in _do_run\n    target_list, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 743, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs\n     [[Node: input/input_producer/input_producer/fraction_of_32_full/limit_epochs/CountUpTo = CountUpTo[T=DT_INT64, _class=[\"loc:@input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs\"], limit=2, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs)]]\nCaused by op u'input/input_producer/input_producer/fraction_of_32_full/limit_epochs/CountUpTo', defined at:\n  File \"fully_connected_preloaded.py\", line 157, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"fully_connected_preloaded.py\", line 153, in main\n    run_training()\n  File \"fully_connected_preloaded.py\", line 73, in run_training\n    [input_images, input_labels], num_epochs=FLAGS.num_epochs)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py\", line 266, in slice_input_producer\n    shared_name=shared_name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py\", line 223, in range_input_producer\n    shared_name, name, \"fraction_of_%d_full\" % capacity)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py\", line 133, in input_producer\n    input_tensor = limit_epochs(input_tensor, num_epochs)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py\", line 84, in limit_epochs\n    counter = epochs.count_up_to(num_epochs)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 573, in count_up_to\n    return state_ops.count_up_to(self._variable, limit=limit)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_state_ops.py\", line 127, in count_up_to\n    result = _op_def_lib.apply_op(\"CountUpTo\", ref=ref, limit=limit, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2297, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1231, in __init__\n    self._traceback = _extract_stack()", "body": "I have the error `Attempting to use uninitialized value input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs` when I load data in my code. I have found the same issue on the fully_connected_preloaded example, so I think it may be a regression.\n### Environment info\n\nOperating System: Ubuntu 16.04\n\nInstalled version of CUDA and cuDNN: Cuda 8.0 and CuDnn 8.0\n\n``` bash\n$ ls -l /path/to/cuda/lib*/libcud*\n-rw-r--r-- 1 root root   560184 juin  30 00:45 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 juin  30 00:45 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 juin  30 00:45 /usr/local/cuda/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 root root   394472 juin  30 00:45 /usr/local/cuda/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 juin  30 00:45 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 78065952 juin  30 01:08 /usr/local/cuda/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 78065952 juin  30 01:08 /usr/local/cuda/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 78065952 juin  30 01:08 /usr/local/cuda/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 juin  30 01:08 /usr/local/cuda/lib64/libcudnn_static.a\n```\n\nIf installed from sources, provide the commit hash: db90885e9f27b1e069dd689ddd2dd3b743ed1cb7\n### Steps to reproduce\n1. cd tensorflow/examples/how_tos/reading_data\n2. python fully_connected_preloaded.py\n### What have you tried?\n1. `bazel run -c opt tensorflow/examples/how_tos/reading_data:fully_connected_preloaded``\n2. `python fully_connected_preloaded.py`\n3. My code, which is similar\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n\n``` python\npython fully_connected_preloaded.py\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\nExtracting /tmp/data/train-images-idx3-ubyte.gz\nExtracting /tmp/data/train-labels-idx1-ubyte.gz\nExtracting /tmp/data/t10k-images-idx3-ubyte.gz\nExtracting /tmp/data/t10k-labels-idx1-ubyte.gz\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties:\nname: GeForce GTX 1080\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.7335\npciBusID 0000:02:00.0\nTotal memory: 7.92GiB\nFree memory: 7.52GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:838] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:02:00.0)\nSaving\nW tensorflow/core/framework/op_kernel.cc:936] Out of range: FIFOQueue '_1_input/input_producer/input_producer/fraction_of_32_full/fraction_of_32_full' is closed and has insufficient elements (requested 1, current size 0)\n     [[Node: input/input_producer/fraction_of_32_full_Dequeue = QueueDequeue[_class=[\"loc:@input/input_producer/input_producer/fraction_of_32_full/fraction_of_32_full\"], component_types=[DT_INT32], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](input/input_producer/input_producer/fraction_of_32_full/fraction_of_32_full)]]\nDone training for 2 epochs, 0 steps.\nTraceback (most recent call last):\n  File \"fully_connected_preloaded.py\", line 157, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"fully_connected_preloaded.py\", line 153, in main\n    run_training()\n  File \"fully_connected_preloaded.py\", line 148, in run_training\n    coord.join(threads)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/coordinator.py\", line 333, in join\n    six.reraise(*self._exc_info_to_raise)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/queue_runner.py\", line 185, in _run\n    sess.run(enqueue_op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 382, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 655, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 723, in _do_run\n    target_list, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 743, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.FailedPreconditionError: Attempting to use uninitialized value input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs\n     [[Node: input/input_producer/input_producer/fraction_of_32_full/limit_epochs/CountUpTo = CountUpTo[T=DT_INT64, _class=[\"loc:@input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs\"], limit=2, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](input/input_producer/input_producer/fraction_of_32_full/limit_epochs/epochs)]]\nCaused by op u'input/input_producer/input_producer/fraction_of_32_full/limit_epochs/CountUpTo', defined at:\n  File \"fully_connected_preloaded.py\", line 157, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"fully_connected_preloaded.py\", line 153, in main\n    run_training()\n  File \"fully_connected_preloaded.py\", line 73, in run_training\n    [input_images, input_labels], num_epochs=FLAGS.num_epochs)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py\", line 266, in slice_input_producer\n    shared_name=shared_name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py\", line 223, in range_input_producer\n    shared_name, name, \"fraction_of_%d_full\" % capacity)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py\", line 133, in input_producer\n    input_tensor = limit_epochs(input_tensor, num_epochs)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py\", line 84, in limit_epochs\n    counter = epochs.count_up_to(num_epochs)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 573, in count_up_to\n    return state_ops.count_up_to(self._variable, limit=limit)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_state_ops.py\", line 127, in count_up_to\n    result = _op_def_lib.apply_op(\"CountUpTo\", ref=ref, limit=limit, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2297, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1231, in __init__\n    self._traceback = _extract_stack()\n```\n"}
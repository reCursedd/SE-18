{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10102", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10102/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10102/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10102/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10102", "id": 230419075, "node_id": "MDU6SXNzdWUyMzA0MTkwNzU=", "number": 10102, "title": "Tensorflow gpu vs cpu problem", "user": {"login": "Yaredoh", "id": 26883172, "node_id": "MDQ6VXNlcjI2ODgzMTcy", "avatar_url": "https://avatars3.githubusercontent.com/u/26883172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yaredoh", "html_url": "https://github.com/Yaredoh", "followers_url": "https://api.github.com/users/Yaredoh/followers", "following_url": "https://api.github.com/users/Yaredoh/following{/other_user}", "gists_url": "https://api.github.com/users/Yaredoh/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yaredoh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yaredoh/subscriptions", "organizations_url": "https://api.github.com/users/Yaredoh/orgs", "repos_url": "https://api.github.com/users/Yaredoh/repos", "events_url": "https://api.github.com/users/Yaredoh/events{/privacy}", "received_events_url": "https://api.github.com/users/Yaredoh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-05-22T14:44:18Z", "updated_at": "2017-05-22T17:11:36Z", "closed_at": "2017-05-22T15:49:53Z", "author_association": "NONE", "body_html": "<p>I am using Tenosrflow 1.0.1. I can run my program tensorflow installed on CPU, but when I run it on different computer tensorflow installed GPU, it says out of memory. What is the problem with the GPU Tensorflow.</p>\n<p>What is the reason I can run it on CPU but not on GPU? To run it on GUP I have to decrease the batch size and the image size of my data set. Why has the GPU tensorflow become very poor?</p>\n<p>The error message for GPU Tensorflow is :</p>\n<p>`2017-05-04 14:24:03.511879: W c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:1152] Resource exhausted: OOM when allocating tensor with shape[1,6000,6000,64]<br>\nTraceback (most recent call last):<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1039, in _do_call<br>\nreturn fn(*args)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1021, in _run_fn<br>\nstatus, run_metadata)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\contextlib.py\", line 66, in <strong>exit</strong><br>\nnext(self.gen)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status<br>\npywrap_tensorflow.TF_GetCode(status))<br>\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[1,6000,6000,64]<br>\n[[Node: inference/Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](sub, inference/conv1_1_w/read)]]</p>\n<p>During handling of the above exception, another exception occurred:</p>\n<p>Traceback (most recent call last):<br>\nFile \"FCN.py\", line 225, in <br>\ntf.app.run()<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"FCN.py\", line 196, in main<br>\nsess.run(train_op, feed_dict=feed_dict)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 778, in run<br>\nrun_metadata_ptr)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 982, in _run<br>\nfeed_dict_string, options, run_metadata)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1032, in _do_run<br>\ntarget_list, options, run_metadata)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1052, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[1,6000,6000,64]<br>\n[[Node: inference/Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](sub, inference/conv1_1_w/read)]]</p>\n<p>Caused by op 'inference/Conv2D', defined at:<br>\nFile \"FCN.py\", line 225, in <br>\ntf.app.run()<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"FCN.py\", line 149, in main<br>\npred_annotation, logits = inference(image, keep_probability)<br>\nFile \"FCN.py\", line 84, in inference<br>\nimage_net = vgg_net(weights, processed_image)<br>\nFile \"FCN.py\", line 54, in vgg_net<br>\ncurrent = utils.conv2d_basic(current, kernels, bias)<br>\nFile \"C:\\Users\\admin\\Documents\\gray\\TensorflowUtils.py\", line 89, in conv2d_basic<br>\nconv = tf.nn.conv2d(x, W, strides=[1, 1, 1, 1], padding=\"SAME\")<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_nn_ops.py\", line 403, in conv2d<br>\ndata_format=data_format, name=name)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 768, in apply_op<br>\nop_def=op_def)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2336, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1228, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>ResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[1,6000,6000,64]<br>\n[[Node: inference/Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](sub, inference/conv1_1_w/read)]]<br>\n`</p>", "body_text": "I am using Tenosrflow 1.0.1. I can run my program tensorflow installed on CPU, but when I run it on different computer tensorflow installed GPU, it says out of memory. What is the problem with the GPU Tensorflow.\nWhat is the reason I can run it on CPU but not on GPU? To run it on GUP I have to decrease the batch size and the image size of my data set. Why has the GPU tensorflow become very poor?\nThe error message for GPU Tensorflow is :\n`2017-05-04 14:24:03.511879: W c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:1152] Resource exhausted: OOM when allocating tensor with shape[1,6000,6000,64]\nTraceback (most recent call last):\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1039, in _do_call\nreturn fn(*args)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1021, in _run_fn\nstatus, run_metadata)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\contextlib.py\", line 66, in exit\nnext(self.gen)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status\npywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[1,6000,6000,64]\n[[Node: inference/Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](sub, inference/conv1_1_w/read)]]\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\nFile \"FCN.py\", line 225, in \ntf.app.run()\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"FCN.py\", line 196, in main\nsess.run(train_op, feed_dict=feed_dict)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 778, in run\nrun_metadata_ptr)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 982, in _run\nfeed_dict_string, options, run_metadata)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1032, in _do_run\ntarget_list, options, run_metadata)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1052, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[1,6000,6000,64]\n[[Node: inference/Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](sub, inference/conv1_1_w/read)]]\nCaused by op 'inference/Conv2D', defined at:\nFile \"FCN.py\", line 225, in \ntf.app.run()\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"FCN.py\", line 149, in main\npred_annotation, logits = inference(image, keep_probability)\nFile \"FCN.py\", line 84, in inference\nimage_net = vgg_net(weights, processed_image)\nFile \"FCN.py\", line 54, in vgg_net\ncurrent = utils.conv2d_basic(current, kernels, bias)\nFile \"C:\\Users\\admin\\Documents\\gray\\TensorflowUtils.py\", line 89, in conv2d_basic\nconv = tf.nn.conv2d(x, W, strides=[1, 1, 1, 1], padding=\"SAME\")\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_nn_ops.py\", line 403, in conv2d\ndata_format=data_format, name=name)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 768, in apply_op\nop_def=op_def)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2336, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1228, in init\nself._traceback = _extract_stack()\nResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[1,6000,6000,64]\n[[Node: inference/Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](sub, inference/conv1_1_w/read)]]\n`", "body": "I am using Tenosrflow 1.0.1. I can run my program tensorflow installed on CPU, but when I run it on different computer tensorflow installed GPU, it says out of memory. What is the problem with the GPU Tensorflow. \r\n\r\nWhat is the reason I can run it on CPU but not on GPU? To run it on GUP I have to decrease the batch size and the image size of my data set. Why has the GPU tensorflow become very poor?\r\n\r\nThe error message for GPU Tensorflow is : \r\n\r\n`2017-05-04 14:24:03.511879: W c:\\tf_jenkins\\home\\workspace\\release-win\\device\\gpu\\os\\windows\\tensorflow\\core\\framework\\op_kernel.cc:1152] Resource exhausted: OOM when allocating tensor with shape[1,6000,6000,64]\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1039, in _do_call\r\n    return fn(*args)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1021, in _run_fn\r\n    status, run_metadata)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\contextlib.py\", line 66, in __exit__\r\n    next(self.gen)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status\r\n    pywrap_tensorflow.TF_GetCode(status))\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[1,6000,6000,64]\r\n         [[Node: inference/Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](sub, inference/conv1_1_w/read)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"FCN.py\", line 225, in <module>\r\n    tf.app.run()\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"FCN.py\", line 196, in main\r\n    sess.run(train_op, feed_dict=feed_dict)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 778, in run\r\n    run_metadata_ptr)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 982, in _run\r\n    feed_dict_string, options, run_metadata)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1032, in _do_run\r\n    target_list, options, run_metadata)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1052, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[1,6000,6000,64]\r\n         [[Node: inference/Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](sub, inference/conv1_1_w/read)]]\r\n\r\nCaused by op 'inference/Conv2D', defined at:\r\n  File \"FCN.py\", line 225, in <module>\r\n    tf.app.run()\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"FCN.py\", line 149, in main\r\n    pred_annotation, logits = inference(image, keep_probability)\r\n  File \"FCN.py\", line 84, in inference\r\n    image_net = vgg_net(weights, processed_image)\r\n  File \"FCN.py\", line 54, in vgg_net\r\n    current = utils.conv2d_basic(current, kernels, bias)\r\n  File \"C:\\Users\\admin\\Documents\\gray\\TensorflowUtils.py\", line 89, in conv2d_basic\r\n    conv = tf.nn.conv2d(x, W, strides=[1, 1, 1, 1], padding=\"SAME\")\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_nn_ops.py\", line 403, in conv2d\r\n    data_format=data_format, name=name)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 768, in apply_op\r\n    op_def=op_def)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2336, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1228, in __init__\r\n    self._traceback = _extract_stack()\r\n\r\nResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[1,6000,6000,64]\r\n         [[Node: inference/Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](sub, inference/conv1_1_w/read)]]\r\n`\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/370509444", "html_url": "https://github.com/tensorflow/tensorflow/issues/17361#issuecomment-370509444", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17361", "id": 370509444, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDUwOTQ0NA==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-05T18:07:45Z", "updated_at": "2018-03-05T18:07:45Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The difficulty here is that <code>Dataset.padded_batch()</code> is quite low level currently has no concept of \"sequences\", and it might complicate the interface to do so.<br>\nI think I'd prefer this specific calculation to be separate from the padded batch, e.g. in a <code>Dataset.map()</code> that precedes the <code>Dataset.padded_batch()</code> and reads off the appropriate length using <code>tf.shape()</code>.<br>\nIf there were a higher-level API for handling sequential data, this feature might make more sense. For example, <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/c54a6ce4b53172569caa19991ec36be04121a359/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/c54a6ce4b53172569caa19991ec36be04121a359\"><tt>c54a6ce</tt></a> added <code>tf.contrib.data.batch_by_sequence_length()</code>, which wraps <code>Dataset.padded_batch()</code>, and it could make sense to expose the sequence length from that API somehow.</p>", "body_text": "The difficulty here is that Dataset.padded_batch() is quite low level currently has no concept of \"sequences\", and it might complicate the interface to do so.\nI think I'd prefer this specific calculation to be separate from the padded batch, e.g. in a Dataset.map() that precedes the Dataset.padded_batch() and reads off the appropriate length using tf.shape().\nIf there were a higher-level API for handling sequential data, this feature might make more sense. For example, c54a6ce added tf.contrib.data.batch_by_sequence_length(), which wraps Dataset.padded_batch(), and it could make sense to expose the sequence length from that API somehow.", "body": "The difficulty here is that `Dataset.padded_batch()` is quite low level currently has no concept of \"sequences\", and it might complicate the interface to do so. \r\nI think I'd prefer this specific calculation to be separate from the padded batch, e.g. in a `Dataset.map()` that precedes the `Dataset.padded_batch()` and reads off the appropriate length using `tf.shape()`.\r\nIf there were a higher-level API for handling sequential data, this feature might make more sense. For example, c54a6ce4b53172569caa19991ec36be04121a359 added `tf.contrib.data.batch_by_sequence_length()`, which wraps `Dataset.padded_batch()`, and it could make sense to expose the sequence length from that API somehow."}
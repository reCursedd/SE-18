{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/191276437", "html_url": "https://github.com/tensorflow/tensorflow/issues/1307#issuecomment-191276437", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1307", "id": 191276437, "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTI3NjQzNw==", "user": {"login": "plazonic", "id": 1123957, "node_id": "MDQ6VXNlcjExMjM5NTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1123957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/plazonic", "html_url": "https://github.com/plazonic", "followers_url": "https://api.github.com/users/plazonic/followers", "following_url": "https://api.github.com/users/plazonic/following{/other_user}", "gists_url": "https://api.github.com/users/plazonic/gists{/gist_id}", "starred_url": "https://api.github.com/users/plazonic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/plazonic/subscriptions", "organizations_url": "https://api.github.com/users/plazonic/orgs", "repos_url": "https://api.github.com/users/plazonic/repos", "events_url": "https://api.github.com/users/plazonic/events{/privacy}", "received_events_url": "https://api.github.com/users/plazonic/received_events", "type": "User", "site_admin": false}, "created_at": "2016-03-02T15:03:20Z", "updated_at": "2016-03-02T15:03:20Z", "author_association": "NONE", "body_html": "<p>The problem is in the external dependency gprc which uses secure_getenv which only appeared in glibc 2.17 - <a href=\"https://sourceware.org/glibc/wiki/Tips_and_Tricks/secure_getenv\" rel=\"nofollow\">https://sourceware.org/glibc/wiki/Tips_and_Tricks/secure_getenv</a></p>\n<p>Turns out that gprc can be told to try to use other symbols as well but it needs the -DGPR_BACKWARDS_COMPATIBILITY_MODE option, e.g. I've managed to compile CPU only version by doing this:<br>\nbazel build --linkopt '-lrt' --copt '-DGPR_BACKWARDS_COMPATIBILITY_MODE' -c opt //tensorflow/tools/pip_package:build_pip_package<br>\nIt would be more correct to add that option only to gprc but I am far from fluent in bazel-ize.</p>", "body_text": "The problem is in the external dependency gprc which uses secure_getenv which only appeared in glibc 2.17 - https://sourceware.org/glibc/wiki/Tips_and_Tricks/secure_getenv\nTurns out that gprc can be told to try to use other symbols as well but it needs the -DGPR_BACKWARDS_COMPATIBILITY_MODE option, e.g. I've managed to compile CPU only version by doing this:\nbazel build --linkopt '-lrt' --copt '-DGPR_BACKWARDS_COMPATIBILITY_MODE' -c opt //tensorflow/tools/pip_package:build_pip_package\nIt would be more correct to add that option only to gprc but I am far from fluent in bazel-ize.", "body": "The problem is in the external dependency gprc which uses secure_getenv which only appeared in glibc 2.17 - https://sourceware.org/glibc/wiki/Tips_and_Tricks/secure_getenv\n\nTurns out that gprc can be told to try to use other symbols as well but it needs the -DGPR_BACKWARDS_COMPATIBILITY_MODE option, e.g. I've managed to compile CPU only version by doing this:\nbazel build --linkopt '-lrt' --copt '-DGPR_BACKWARDS_COMPATIBILITY_MODE' -c opt //tensorflow/tools/pip_package:build_pip_package \nIt would be more correct to add that option only to gprc but I am far from fluent in bazel-ize.\n"}
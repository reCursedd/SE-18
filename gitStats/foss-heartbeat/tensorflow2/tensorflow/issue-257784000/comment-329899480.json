{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/329899480", "html_url": "https://github.com/tensorflow/tensorflow/issues/13044#issuecomment-329899480", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13044", "id": 329899480, "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTg5OTQ4MA==", "user": {"login": "Coderx7", "id": 5382892, "node_id": "MDQ6VXNlcjUzODI4OTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/5382892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Coderx7", "html_url": "https://github.com/Coderx7", "followers_url": "https://api.github.com/users/Coderx7/followers", "following_url": "https://api.github.com/users/Coderx7/following{/other_user}", "gists_url": "https://api.github.com/users/Coderx7/gists{/gist_id}", "starred_url": "https://api.github.com/users/Coderx7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Coderx7/subscriptions", "organizations_url": "https://api.github.com/users/Coderx7/orgs", "repos_url": "https://api.github.com/users/Coderx7/repos", "events_url": "https://api.github.com/users/Coderx7/events{/privacy}", "received_events_url": "https://api.github.com/users/Coderx7/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-15T20:57:01Z", "updated_at": "2017-09-15T20:57:01Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=29663194\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/cy89\">@cy89</a> : Thank you very much for your attention,<br>\nBut thats what I did and thats why I think there is a need for better error messages. If there is an issue in the input, this must be caught when a tfrecord is being created.<br>\nI have checked multiple times that my images are consistent i.e a png is indeed a png and not mistakenly saved as a jpg or vice versa and also their correct depth is retrieved and used.<br>\nI checked all image headers for such discrepancies and fixed them. yet I get this error.<br>\nhere is the code I used to check each image and retrieve its true type:</p>\n<pre><code>private string IsImage(Stream stream)\n{\n\tstring jpg = \"FFD8\";\n\tstring bmp = \"424D\" ;\n\tstring gif = \"474946\" ;\n\tstring png = \"89504E470D0A1A0A\" ;\n\tstring sig = \"\";\n\n\tstream.Seek(0, SeekOrigin.Begin);\n\tfor (int i = 0; i &lt; 8; i++)\n\t{\n\t\tsig += stream.ReadByte().ToString(\"X2\");\n\t\tif (sig.Length == 4 &amp;&amp; sig == jpg)\n\t\t{\n\t\t\tsig = \"jpg\";\n\t\t\tbreak;\n\t\t}\n\t\telse if(sig.Length == 4 &amp;&amp; sig == bmp)\n\t\t{\n\t\t\tsig = \"bmp\";\n\t\t\tbreak;\n\t\t}\n\t\telse if (sig.Length == 6 &amp;&amp; sig == gif)\n\t\t{\n\t\t\tsig = \"gif\";\n\t\t\tbreak;\n\t\t}\n\t\telse if (sig.Length == 16 &amp;&amp; sig == png)\n\t\t{\n\t\t\tsig = \"png\";\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn sig;\n}\n\n</code></pre>\n<p>And for image depth( # of channels) I used OpenCV (EmguCV).</p>\n<p>I don't know what else I was supposed to do that I have not done already. that's why it strikes me as a bug or if its not a bug, its clear that error message is not helping at all and more information needs to be disclosed.<br>\nyet better, all input related checks need to be done at the time of creating the dataset (i.e. tfrecords for easier error handling or trouble shooting!)<br>\nright now I'm clueless and I have no idea where to dig in!</p>", "body_text": "@cy89 : Thank you very much for your attention,\nBut thats what I did and thats why I think there is a need for better error messages. If there is an issue in the input, this must be caught when a tfrecord is being created.\nI have checked multiple times that my images are consistent i.e a png is indeed a png and not mistakenly saved as a jpg or vice versa and also their correct depth is retrieved and used.\nI checked all image headers for such discrepancies and fixed them. yet I get this error.\nhere is the code I used to check each image and retrieve its true type:\nprivate string IsImage(Stream stream)\n{\n\tstring jpg = \"FFD8\";\n\tstring bmp = \"424D\" ;\n\tstring gif = \"474946\" ;\n\tstring png = \"89504E470D0A1A0A\" ;\n\tstring sig = \"\";\n\n\tstream.Seek(0, SeekOrigin.Begin);\n\tfor (int i = 0; i < 8; i++)\n\t{\n\t\tsig += stream.ReadByte().ToString(\"X2\");\n\t\tif (sig.Length == 4 && sig == jpg)\n\t\t{\n\t\t\tsig = \"jpg\";\n\t\t\tbreak;\n\t\t}\n\t\telse if(sig.Length == 4 && sig == bmp)\n\t\t{\n\t\t\tsig = \"bmp\";\n\t\t\tbreak;\n\t\t}\n\t\telse if (sig.Length == 6 && sig == gif)\n\t\t{\n\t\t\tsig = \"gif\";\n\t\t\tbreak;\n\t\t}\n\t\telse if (sig.Length == 16 && sig == png)\n\t\t{\n\t\t\tsig = \"png\";\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn sig;\n}\n\n\nAnd for image depth( # of channels) I used OpenCV (EmguCV).\nI don't know what else I was supposed to do that I have not done already. that's why it strikes me as a bug or if its not a bug, its clear that error message is not helping at all and more information needs to be disclosed.\nyet better, all input related checks need to be done at the time of creating the dataset (i.e. tfrecords for easier error handling or trouble shooting!)\nright now I'm clueless and I have no idea where to dig in!", "body": "@cy89 : Thank you very much for your attention, \r\nBut thats what I did and thats why I think there is a need for better error messages. If there is an issue in the input, this must be caught when a tfrecord is being created.\r\nI have checked multiple times that my images are consistent i.e a png is indeed a png and not mistakenly saved as a jpg or vice versa and also their correct depth is retrieved and used. \r\nI checked all image headers for such discrepancies and fixed them. yet I get this error. \r\nhere is the code I used to check each image and retrieve its true type: \r\n```\r\nprivate string IsImage(Stream stream)\r\n{\r\n\tstring jpg = \"FFD8\";\r\n\tstring bmp = \"424D\" ;\r\n\tstring gif = \"474946\" ;\r\n\tstring png = \"89504E470D0A1A0A\" ;\r\n\tstring sig = \"\";\r\n\r\n\tstream.Seek(0, SeekOrigin.Begin);\r\n\tfor (int i = 0; i < 8; i++)\r\n\t{\r\n\t\tsig += stream.ReadByte().ToString(\"X2\");\r\n\t\tif (sig.Length == 4 && sig == jpg)\r\n\t\t{\r\n\t\t\tsig = \"jpg\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\telse if(sig.Length == 4 && sig == bmp)\r\n\t\t{\r\n\t\t\tsig = \"bmp\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\telse if (sig.Length == 6 && sig == gif)\r\n\t\t{\r\n\t\t\tsig = \"gif\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\telse if (sig.Length == 16 && sig == png)\r\n\t\t{\r\n\t\t\tsig = \"png\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn sig;\r\n}\r\n\r\n```\r\nAnd for image depth( # of channels) I used OpenCV (EmguCV). \r\n\r\nI don't know what else I was supposed to do that I have not done already. that's why it strikes me as a bug or if its not a bug, its clear that error message is not helping at all and more information needs to be disclosed. \r\nyet better, all input related checks need to be done at the time of creating the dataset (i.e. tfrecords for easier error handling or trouble shooting!) \r\nright now I'm clueless and I have no idea where to dig in! "}
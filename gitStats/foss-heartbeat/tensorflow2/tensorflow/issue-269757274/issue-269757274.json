{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14109", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14109/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14109/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14109/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14109", "id": 269757274, "node_id": "MDU6SXNzdWUyNjk3NTcyNzQ=", "number": 14109, "title": "The implementation in source code of Backpropagation in TensorFlow (Conv2DBackpropFilter and Conv2DBackpropInput)", "user": {"login": "Jiawen1991", "id": 11548424, "node_id": "MDQ6VXNlcjExNTQ4NDI0", "avatar_url": "https://avatars2.githubusercontent.com/u/11548424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jiawen1991", "html_url": "https://github.com/Jiawen1991", "followers_url": "https://api.github.com/users/Jiawen1991/followers", "following_url": "https://api.github.com/users/Jiawen1991/following{/other_user}", "gists_url": "https://api.github.com/users/Jiawen1991/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jiawen1991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jiawen1991/subscriptions", "organizations_url": "https://api.github.com/users/Jiawen1991/orgs", "repos_url": "https://api.github.com/users/Jiawen1991/repos", "events_url": "https://api.github.com/users/Jiawen1991/events{/privacy}", "received_events_url": "https://api.github.com/users/Jiawen1991/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-10-30T21:17:08Z", "updated_at": "2017-11-06T23:46:59Z", "closed_at": "2017-11-06T23:46:59Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>Since two operations Conv2DBackpropFilter and Conv2DBackpropInput count most of the time for lots of applications(AlexNet/VGG/GAN/Inception, etc.), I am analyzing the complexity of these two operations (back-propagation) in TensorFlow and I found out that there are three implementation versions (custom, fast and slot) for Conv2DBackpropFilter (<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/conv_grad_filter_ops.cc\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/conv_grad_filter_ops.cc</a> ) and Conv2DBackpropInput (<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/conv_grad_input_ops.cc\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/conv_grad_input_ops.cc</a>). While I profile, all computations are passed to \"custom\" version instead of \"fast\" or \"slow\" which directly calls Eigen function SpatialConvolutionBackwardInput to do that.</p>\n<p>The issue is:<br>\nConv2DBackpropFilter uses Eigen:\u201cTensorMap.contract\" to do the tensor contraction and Conv2DBackpropInput uses Eigen:\"MatrixMap.transpose\" to do the matrix transposition in the Compute() function. Beside these two functions, I didn't see any convolutional operations which are needed for back-propagation theoretically. Beside convolutions, what else would be run inside these two operations for back-propagation? Does anyone know how to analyze the computation complexity of \"back propagation\" operation in TensorFlow?</p>\n<p>I am looking for any advise/suggestion. Thank you!</p>", "body_text": "Hi,\nSince two operations Conv2DBackpropFilter and Conv2DBackpropInput count most of the time for lots of applications(AlexNet/VGG/GAN/Inception, etc.), I am analyzing the complexity of these two operations (back-propagation) in TensorFlow and I found out that there are three implementation versions (custom, fast and slot) for Conv2DBackpropFilter (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/conv_grad_filter_ops.cc ) and Conv2DBackpropInput (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/conv_grad_input_ops.cc). While I profile, all computations are passed to \"custom\" version instead of \"fast\" or \"slow\" which directly calls Eigen function SpatialConvolutionBackwardInput to do that.\nThe issue is:\nConv2DBackpropFilter uses Eigen:\u201cTensorMap.contract\" to do the tensor contraction and Conv2DBackpropInput uses Eigen:\"MatrixMap.transpose\" to do the matrix transposition in the Compute() function. Beside these two functions, I didn't see any convolutional operations which are needed for back-propagation theoretically. Beside convolutions, what else would be run inside these two operations for back-propagation? Does anyone know how to analyze the computation complexity of \"back propagation\" operation in TensorFlow?\nI am looking for any advise/suggestion. Thank you!", "body": "Hi,\r\n\r\nSince two operations Conv2DBackpropFilter and Conv2DBackpropInput count most of the time for lots of applications(AlexNet/VGG/GAN/Inception, etc.), I am analyzing the complexity of these two operations (back-propagation) in TensorFlow and I found out that there are three implementation versions (custom, fast and slot) for Conv2DBackpropFilter (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/conv_grad_filter_ops.cc ) and Conv2DBackpropInput (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/conv_grad_input_ops.cc). While I profile, all computations are passed to \"custom\" version instead of \"fast\" or \"slow\" which directly calls Eigen function SpatialConvolutionBackwardInput to do that. \r\n\r\nThe issue is:\r\nConv2DBackpropFilter uses Eigen:\u201cTensorMap.contract\" to do the tensor contraction and Conv2DBackpropInput uses Eigen:\"MatrixMap.transpose\" to do the matrix transposition in the Compute() function. Beside these two functions, I didn't see any convolutional operations which are needed for back-propagation theoretically. Beside convolutions, what else would be run inside these two operations for back-propagation? Does anyone know how to analyze the computation complexity of \"back propagation\" operation in TensorFlow?\r\n\r\nI am looking for any advise/suggestion. Thank you!"}
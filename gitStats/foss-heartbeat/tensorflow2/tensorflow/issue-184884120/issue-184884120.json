{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5169", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5169/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5169/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5169/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5169", "id": 184884120, "node_id": "MDU6SXNzdWUxODQ4ODQxMjA=", "number": 5169, "title": "Windows GPU random initialization not working", "user": {"login": "RobinKa", "id": 2614101, "node_id": "MDQ6VXNlcjI2MTQxMDE=", "avatar_url": "https://avatars0.githubusercontent.com/u/2614101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RobinKa", "html_url": "https://github.com/RobinKa", "followers_url": "https://api.github.com/users/RobinKa/followers", "following_url": "https://api.github.com/users/RobinKa/following{/other_user}", "gists_url": "https://api.github.com/users/RobinKa/gists{/gist_id}", "starred_url": "https://api.github.com/users/RobinKa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RobinKa/subscriptions", "organizations_url": "https://api.github.com/users/RobinKa/orgs", "repos_url": "https://api.github.com/users/RobinKa/repos", "events_url": "https://api.github.com/users/RobinKa/events{/privacy}", "received_events_url": "https://api.github.com/users/RobinKa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2016-10-24T16:05:03Z", "updated_at": "2016-10-25T20:35:56Z", "closed_at": "2016-10-25T19:32:25Z", "author_association": "NONE", "body_html": "<p>Using <code>tf.truncated_normal</code> (and possibly the other random functions too) on my GPU (GTX 1060) with the new Windows build produces only zeros whereas running it on my CPU works as expected.</p>\n<p>Example code:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/cpu:0<span class=\"pl-pds\">'</span></span>):\n    <span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n        <span class=\"pl-c\"><span class=\"pl-c\">#</span> Something random, as expected</span>\n        <span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>CPU:<span class=\"pl-pds\">\"</span></span>, sess.run(tf.truncated_normal([<span class=\"pl-c1\">5</span>])))\n\n<span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/gpu:0<span class=\"pl-pds\">'</span></span>):\n    <span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n        <span class=\"pl-c\"><span class=\"pl-c\">#</span> All zeros</span>\n        <span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>GPU:<span class=\"pl-pds\">\"</span></span>, sess.run(tf.truncated_normal([<span class=\"pl-c1\">5</span>])))</pre></div>\n<p>I used the same setup as <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/README.md\">here</a> with CMake 3.6 and rolled back to <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/41ba1e0e6fbf443f1a972ff0130ba6741b9b7a50/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/41ba1e0e6fbf443f1a972ff0130ba6741b9b7a50\"><tt>41ba1e0</tt></a> to fix the issue with eigen not compiling.</p>\n<p>// Also it seems the result of any calculation involving a tf.Variable becomes 0, while just running / printing the variable itself shows its correct value (CPU works fine though).</p>", "body_text": "Using tf.truncated_normal (and possibly the other random functions too) on my GPU (GTX 1060) with the new Windows build produces only zeros whereas running it on my CPU works as expected.\nExample code:\nwith tf.device('/cpu:0'):\n    with tf.Session() as sess:\n        # Something random, as expected\n        print(\"CPU:\", sess.run(tf.truncated_normal([5])))\n\nwith tf.device('/gpu:0'):\n    with tf.Session() as sess:\n        # All zeros\n        print(\"GPU:\", sess.run(tf.truncated_normal([5])))\nI used the same setup as here with CMake 3.6 and rolled back to 41ba1e0 to fix the issue with eigen not compiling.\n// Also it seems the result of any calculation involving a tf.Variable becomes 0, while just running / printing the variable itself shows its correct value (CPU works fine though).", "body": "Using `tf.truncated_normal` (and possibly the other random functions too) on my GPU (GTX 1060) with the new Windows build produces only zeros whereas running it on my CPU works as expected.\n\nExample code:\n\n``` Python\nwith tf.device('/cpu:0'):\n    with tf.Session() as sess:\n        # Something random, as expected\n        print(\"CPU:\", sess.run(tf.truncated_normal([5])))\n\nwith tf.device('/gpu:0'):\n    with tf.Session() as sess:\n        # All zeros\n        print(\"GPU:\", sess.run(tf.truncated_normal([5])))\n```\n\nI used the same setup as [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/README.md) with CMake 3.6 and rolled back to https://github.com/tensorflow/tensorflow/commit/41ba1e0e6fbf443f1a972ff0130ba6741b9b7a50 to fix the issue with eigen not compiling.\n\n// Also it seems the result of any calculation involving a tf.Variable becomes 0, while just running / printing the variable itself shows its correct value (CPU works fine though).\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/140026698", "pull_request_review_id": 64041895, "id": 140026698, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MDAyNjY5OA==", "diff_hunk": "@@ -246,15 +259,15 @@ class MklAddNOp : public OpKernel {\n       bool input1_in_mkl_format = input1_shape.IsMklTensor();\n       bool input2_in_mkl_format = input2_shape.IsMklTensor();\n       dnnDelete_F32(Eltwise);\n+      if (!input1_in_mkl_format || !input2_in_mkl_format) {", "path": "tensorflow/core/kernels/mkl_aggregate_ops.cc", "position": 144, "original_position": 146, "commit_id": "2b199df4fe36f8752fe9c1771f3edc3f73f0b794", "original_commit_id": "74fa12da12201d05244e5c2c16089a00e0678689", "user": {"login": "jinghuangintel", "id": 16885162, "node_id": "MDQ6VXNlcjE2ODg1MTYy", "avatar_url": "https://avatars1.githubusercontent.com/u/16885162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jinghuangintel", "html_url": "https://github.com/jinghuangintel", "followers_url": "https://api.github.com/users/jinghuangintel/followers", "following_url": "https://api.github.com/users/jinghuangintel/following{/other_user}", "gists_url": "https://api.github.com/users/jinghuangintel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jinghuangintel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jinghuangintel/subscriptions", "organizations_url": "https://api.github.com/users/jinghuangintel/orgs", "repos_url": "https://api.github.com/users/jinghuangintel/repos", "events_url": "https://api.github.com/users/jinghuangintel/events{/privacy}", "received_events_url": "https://api.github.com/users/jinghuangintel/received_events", "type": "User", "site_admin": false}, "body": "@rmlarsen this part is the opposite of line 173 and 182, only in the case that input 1 and input 2 are not in mkl format, we will need to allocate the array. so we will release the buffer only in the case these two are not in mkl format. Thank you ~ please let me know if you have any suggestions. :)", "created_at": "2017-09-20T16:45:58Z", "updated_at": "2017-09-20T16:48:48Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/13021#discussion_r140026698", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13021", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/140026698"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/13021#discussion_r140026698"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13021"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16907534\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rmlarsen\">@rmlarsen</a> this part is the opposite of line 173 and 182, only in the case that input 1 and input 2 are not in mkl format, we will need to allocate the array. so we will release the buffer only in the case these two are not in mkl format. Thank you ~ please let me know if you have any suggestions. :)</p>", "body_text": "@rmlarsen this part is the opposite of line 173 and 182, only in the case that input 1 and input 2 are not in mkl format, we will need to allocate the array. so we will release the buffer only in the case these two are not in mkl format. Thank you ~ please let me know if you have any suggestions. :)", "in_reply_to_id": 139839513}
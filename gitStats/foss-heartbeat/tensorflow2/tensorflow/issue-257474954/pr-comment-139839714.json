{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/139839714", "pull_request_review_id": 63826214, "id": 139839714, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzOTgzOTcxNA==", "diff_hunk": "@@ -113,44 +159,11 @@ class MklAddNOp : public OpKernel {\n     mkl_context.MklCleanup();\n   }\n \n-  void ExtractMklOpParams(size_t** out_sizes, size_t** out_strides,\n-    const Tensor& input, const MklShape* input_shape) {\n-    bool input_in_mkl_format = input_shape->IsMklTensor();\n-    int in_dims = input_in_mkl_format\n-                              ? input_shape->GetDimension()\n-                              : input.dims();\n-    size_t* in_sizes = new size_t[in_dims];\n-    size_t* in_strides = new size_t[in_dims];\n-\n-    if (input_in_mkl_format) {\n-      for (int i = 0; i < in_dims; i++) {\n-        in_sizes[i] = input_shape->GetSizes()[i];\n-        in_strides[i] = input_shape->GetStrides()[i];\n-      }\n-    } else {\n-      for (int i = 0; i < in_dims; i++) {\n-        in_sizes[i] =\n-            input.dim_size((in_dims - 1) - i);\n-      }\n-      in_strides[0] = 1;\n-      for (int i = 1; i < in_dims; i++) {\n-        in_strides[i] =\n-            in_strides[i - 1] * in_sizes[i - 1];\n-      }\n-    }\n-    *out_sizes = in_sizes;\n-    *out_strides = in_strides;\n-  }\n-\n-\n  private:\n   typedef struct {\n     int in_dims;\n-    size_t* in1_sizes;\n-    size_t* in1_strides;\n-\n-    size_t* in2_sizes;\n-    size_t* in2_strides;\n+    size_t* in_sizes;", "path": "tensorflow/core/kernels/mkl_aggregate_ops.cc", "position": null, "original_position": 119, "commit_id": "2b199df4fe36f8752fe9c1771f3edc3f73f0b794", "original_commit_id": "74fa12da12201d05244e5c2c16089a00e0678689", "user": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "body": "set both to nullptr either here or in initializer list of constructor.", "created_at": "2017-09-19T23:02:07Z", "updated_at": "2017-09-20T16:48:48Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/13021#discussion_r139839714", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13021", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/139839714"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/13021#discussion_r139839714"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13021"}}, "body_html": "<p>set both to nullptr either here or in initializer list of constructor.</p>", "body_text": "set both to nullptr either here or in initializer list of constructor."}
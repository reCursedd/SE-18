{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/135979224", "pull_request_review_id": 59454736, "id": 135979224, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTk3OTIyNA==", "diff_hunk": "@@ -809,14 +830,17 @@ def _FusedBatchNormGradGrad(op, *grad):\n   \"\"\"\n   data_format = op.get_attr(\"data_format\")\n   epsilon = op.get_attr(\"epsilon\")\n+  is_training = op.get_attr(\"is_training\")\n   grad_y = op.inputs[0]\n   x = op.inputs[1]\n   scale = op.inputs[2]\n+  pop_mean = op.inputs[3]", "path": "tensorflow/python/ops/nn_grad.py", "position": 135, "original_position": 135, "commit_id": "f33ea380e3615e052929b635e5fa998d27cefa11", "original_commit_id": "fcca24e2f7640fcd882418033b6f5baf128c205f", "user": {"login": "zhangyaobit", "id": 1034716, "node_id": "MDQ6VXNlcjEwMzQ3MTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1034716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangyaobit", "html_url": "https://github.com/zhangyaobit", "followers_url": "https://api.github.com/users/zhangyaobit/followers", "following_url": "https://api.github.com/users/zhangyaobit/following{/other_user}", "gists_url": "https://api.github.com/users/zhangyaobit/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangyaobit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangyaobit/subscriptions", "organizations_url": "https://api.github.com/users/zhangyaobit/orgs", "repos_url": "https://api.github.com/users/zhangyaobit/repos", "events_url": "https://api.github.com/users/zhangyaobit/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangyaobit/received_events", "type": "User", "site_admin": false}, "body": "Note that input 3 and 4 are reserve_space_1 and reserve_space_2, which are not pop mean and pop var, but \r\nreserve_space_1: A 1D Tensor for the computed batch mean, to be reused\r\n                 in the gradient computation.\r\nreserve_space_2: A 1D Tensor for the computed batch variance (inverted variance\r\n                 in the cuDNN case), to be used in the gradient computation.\r\n\r\nREGISTER_OP(\"FusedBatchNormGrad\")\r\n    .Input(\"y_backprop: T\")\r\n    .Input(\"x: T\")\r\n    .Input(\"scale: T\")\r\n    .Input(\"reserve_space_1: T\")\r\n    .Input(\"reserve_space_2: T\")\r\n    .Output(\"x_backprop: T\")\r\n    .Output(\"scale_backprop: T\")\r\n    .Output(\"offset_backprop: T\")\r\n    .Output(\"reserve_space_3: T\")\r\n    .Output(\"reserve_space_4: T\")\r\n    .Attr(\"T: {float}\")\r\n    .Attr(\"epsilon: float = 0.0001\")\r\n    .Attr(\"data_format: string = 'NHWC'\")\r\n    .Attr(\"is_training: bool = true\")\r\n......", "created_at": "2017-08-30T06:22:26Z", "updated_at": "2017-09-20T02:21:36Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/12580#discussion_r135979224", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12580", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/135979224"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/12580#discussion_r135979224"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12580"}}, "body_html": "<p>Note that input 3 and 4 are reserve_space_1 and reserve_space_2, which are not pop mean and pop var, but<br>\nreserve_space_1: A 1D Tensor for the computed batch mean, to be reused<br>\nin the gradient computation.<br>\nreserve_space_2: A 1D Tensor for the computed batch variance (inverted variance<br>\nin the cuDNN case), to be used in the gradient computation.</p>\n<p>REGISTER_OP(\"FusedBatchNormGrad\")<br>\n.Input(\"y_backprop: T\")<br>\n.Input(\"x: T\")<br>\n.Input(\"scale: T\")<br>\n.Input(\"reserve_space_1: T\")<br>\n.Input(\"reserve_space_2: T\")<br>\n.Output(\"x_backprop: T\")<br>\n.Output(\"scale_backprop: T\")<br>\n.Output(\"offset_backprop: T\")<br>\n.Output(\"reserve_space_3: T\")<br>\n.Output(\"reserve_space_4: T\")<br>\n.Attr(\"T: {float}\")<br>\n.Attr(\"epsilon: float = 0.0001\")<br>\n.Attr(\"data_format: string = 'NHWC'\")<br>\n.Attr(\"is_training: bool = true\")<br>\n......</p>", "body_text": "Note that input 3 and 4 are reserve_space_1 and reserve_space_2, which are not pop mean and pop var, but\nreserve_space_1: A 1D Tensor for the computed batch mean, to be reused\nin the gradient computation.\nreserve_space_2: A 1D Tensor for the computed batch variance (inverted variance\nin the cuDNN case), to be used in the gradient computation.\nREGISTER_OP(\"FusedBatchNormGrad\")\n.Input(\"y_backprop: T\")\n.Input(\"x: T\")\n.Input(\"scale: T\")\n.Input(\"reserve_space_1: T\")\n.Input(\"reserve_space_2: T\")\n.Output(\"x_backprop: T\")\n.Output(\"scale_backprop: T\")\n.Output(\"offset_backprop: T\")\n.Output(\"reserve_space_3: T\")\n.Output(\"reserve_space_4: T\")\n.Attr(\"T: {float}\")\n.Attr(\"epsilon: float = 0.0001\")\n.Attr(\"data_format: string = 'NHWC'\")\n.Attr(\"is_training: bool = true\")\n......", "in_reply_to_id": 135907347}
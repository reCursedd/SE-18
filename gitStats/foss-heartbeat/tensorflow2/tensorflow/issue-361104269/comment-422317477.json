{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/422317477", "html_url": "https://github.com/tensorflow/tensorflow/issues/22333#issuecomment-422317477", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22333", "id": 422317477, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjMxNzQ3Nw==", "user": {"login": "adityakamble49", "id": 4979475, "node_id": "MDQ6VXNlcjQ5Nzk0NzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/4979475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adityakamble49", "html_url": "https://github.com/adityakamble49", "followers_url": "https://api.github.com/users/adityakamble49/followers", "following_url": "https://api.github.com/users/adityakamble49/following{/other_user}", "gists_url": "https://api.github.com/users/adityakamble49/gists{/gist_id}", "starred_url": "https://api.github.com/users/adityakamble49/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adityakamble49/subscriptions", "organizations_url": "https://api.github.com/users/adityakamble49/orgs", "repos_url": "https://api.github.com/users/adityakamble49/repos", "events_url": "https://api.github.com/users/adityakamble49/events{/privacy}", "received_events_url": "https://api.github.com/users/adityakamble49/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-18T09:09:46Z", "updated_at": "2018-09-18T09:09:46Z", "author_association": "NONE", "body_html": "<p>I am facing the same issue<br>\nI referred <a href=\"https://github.com/googlecodelabs/tensorflow-for-poets-2\">TFLite Poets 2</a> example and <a href=\"https://www.youtube.com/watch?v=MZx1fhbL2q4\" rel=\"nofollow\">TFLite using Keras</a></p>\n<p>I have <em><strong>linear.tflite</strong></em> file in <strong>android assets</strong> directory<br>\nI am able to generate linear.tflite model but while accessing it from loadModel() method I am getting</p>\n<pre><code>java.io.FileNotFoundException: This file can not be opened as a file descriptor; it is probably compressed\n</code></pre>\n<p>at line</p>\n<pre><code>AssetFileDescriptor fileDescriptor = activity.getAssets().openFd(\"linear.tflite\"); // &lt;- This Line\n</code></pre>\n<pre><code>private MappedByteBuffer loadModelFile(Activity activity) throws IOException {\n        AssetFileDescriptor fileDescriptor = activity.getAssets().openFd(\"linear.tflite\"); // &lt;- This Line\n        FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());\n        FileChannel fileChannel = inputStream.getChannel();\n        long startOffset = fileDescriptor.getStartOffset();\n        long declaredLength = fileDescriptor.getDeclaredLength();\n        return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\n    }\n</code></pre>\n<p>Is there any other way to load <strong><em>tflite</em></strong> model to run prediction ?</p>", "body_text": "I am facing the same issue\nI referred TFLite Poets 2 example and TFLite using Keras\nI have linear.tflite file in android assets directory\nI am able to generate linear.tflite model but while accessing it from loadModel() method I am getting\njava.io.FileNotFoundException: This file can not be opened as a file descriptor; it is probably compressed\n\nat line\nAssetFileDescriptor fileDescriptor = activity.getAssets().openFd(\"linear.tflite\"); // <- This Line\n\nprivate MappedByteBuffer loadModelFile(Activity activity) throws IOException {\n        AssetFileDescriptor fileDescriptor = activity.getAssets().openFd(\"linear.tflite\"); // <- This Line\n        FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());\n        FileChannel fileChannel = inputStream.getChannel();\n        long startOffset = fileDescriptor.getStartOffset();\n        long declaredLength = fileDescriptor.getDeclaredLength();\n        return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\n    }\n\nIs there any other way to load tflite model to run prediction ?", "body": "I am facing the same issue\r\nI referred [TFLite Poets 2](https://github.com/googlecodelabs/tensorflow-for-poets-2) example and [TFLite using Keras](https://www.youtube.com/watch?v=MZx1fhbL2q4)\r\n\r\nI have _**linear.tflite**_ file in **android assets** directory\r\nI am able to generate linear.tflite model but while accessing it from loadModel() method I am getting\r\n```\r\njava.io.FileNotFoundException: This file can not be opened as a file descriptor; it is probably compressed\r\n```\r\n\r\nat line\r\n\r\n```\r\nAssetFileDescriptor fileDescriptor = activity.getAssets().openFd(\"linear.tflite\"); // <- This Line\r\n```\r\n\r\n```\r\nprivate MappedByteBuffer loadModelFile(Activity activity) throws IOException {\r\n        AssetFileDescriptor fileDescriptor = activity.getAssets().openFd(\"linear.tflite\"); // <- This Line\r\n        FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());\r\n        FileChannel fileChannel = inputStream.getChannel();\r\n        long startOffset = fileDescriptor.getStartOffset();\r\n        long declaredLength = fileDescriptor.getDeclaredLength();\r\n        return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\r\n    }\r\n```\r\n\r\nIs there any other way to load **_tflite_** model to run prediction ?"}
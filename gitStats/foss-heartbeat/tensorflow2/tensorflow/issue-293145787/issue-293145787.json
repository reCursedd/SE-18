{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16623", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16623/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16623/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16623/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16623", "id": 293145787, "node_id": "MDU6SXNzdWUyOTMxNDU3ODc=", "number": 16623, "title": "toco crashed while change model to lite", "user": {"login": "jeyawn", "id": 10908651, "node_id": "MDQ6VXNlcjEwOTA4NjUx", "avatar_url": "https://avatars1.githubusercontent.com/u/10908651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeyawn", "html_url": "https://github.com/jeyawn", "followers_url": "https://api.github.com/users/jeyawn/followers", "following_url": "https://api.github.com/users/jeyawn/following{/other_user}", "gists_url": "https://api.github.com/users/jeyawn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeyawn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeyawn/subscriptions", "organizations_url": "https://api.github.com/users/jeyawn/orgs", "repos_url": "https://api.github.com/users/jeyawn/repos", "events_url": "https://api.github.com/users/jeyawn/events{/privacy}", "received_events_url": "https://api.github.com/users/jeyawn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "cy89", "id": 29663194, "node_id": "MDQ6VXNlcjI5NjYzMTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/29663194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cy89", "html_url": "https://github.com/cy89", "followers_url": "https://api.github.com/users/cy89/followers", "following_url": "https://api.github.com/users/cy89/following{/other_user}", "gists_url": "https://api.github.com/users/cy89/gists{/gist_id}", "starred_url": "https://api.github.com/users/cy89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cy89/subscriptions", "organizations_url": "https://api.github.com/users/cy89/orgs", "repos_url": "https://api.github.com/users/cy89/repos", "events_url": "https://api.github.com/users/cy89/events{/privacy}", "received_events_url": "https://api.github.com/users/cy89/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cy89", "id": 29663194, "node_id": "MDQ6VXNlcjI5NjYzMTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/29663194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cy89", "html_url": "https://github.com/cy89", "followers_url": "https://api.github.com/users/cy89/followers", "following_url": "https://api.github.com/users/cy89/following{/other_user}", "gists_url": "https://api.github.com/users/cy89/gists{/gist_id}", "starred_url": "https://api.github.com/users/cy89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cy89/subscriptions", "organizations_url": "https://api.github.com/users/cy89/orgs", "repos_url": "https://api.github.com/users/cy89/repos", "events_url": "https://api.github.com/users/cy89/events{/privacy}", "received_events_url": "https://api.github.com/users/cy89/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2018-01-31T12:48:06Z", "updated_at": "2018-06-12T16:14:38Z", "closed_at": "2018-06-12T16:14:37Z", "author_association": "NONE", "body_html": "<p>I use toco to change model to lite format, it crashed like the following statck (PS: toco was compiled in my own machine with the tensorflow code. The git commit is <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/9fb9ac66ce5236ff045630cad6793f0531bf9d2c/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/9fb9ac66ce5236ff045630cad6793f0531bf9d2c\"><tt>9fb9ac6</tt></a>, with date Sun Jan 21 07:43:08 2018 +0800 )</p>\n<p>Program received signal SIGSEGV, Segmentation fault.<br>\n0x000000000046bdf8 in void toco::(anonymous namespace)::EvaluateBinaryOperatorOnConstantInputs&lt;(toco::ArrayDataType)2, (toco::ArrayDataType)2&gt;(toco::Model*, toco::Operator const*) ()<br>\n(gdb) bt<br>\n#0  0x000000000046bdf8 in void toco::(anonymous namespace)::EvaluateBinaryOperatorOnConstantInputs&lt;(toco::ArrayDataType)2, (toco::ArrayDataType)2&gt;(toco::Model*, toco::Operator const*) ()<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a>  0x000000000046e3e9 in toco::ResolveConstantBinaryOperator::Run(toco::Model*, unsigned long) ()<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115894138\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/2\">#2</a>  0x0000000000489dd3 in toco::(anonymous namespace)::GraphTransformationsPass(int, toco::Model*, toco::GraphTransformationsSet const&amp;) ()<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115896656\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/3\">#3</a>  0x000000000048aae0 in toco::RunGraphTransformations(toco::Model*, std::string const&amp;, toco::GraphTransformationsSet const&amp;) ()<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115898449\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4\">#4</a>  0x000000000042b608 in toco::Transform(toco::TocoFlags const&amp;, toco::Model*) ()<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115910900\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/5/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/5\">#5</a>  0x000000000041c5e8 in main ()</p>\n<p>It can reproduce by unzip my attached file<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1681710/test.zip\">test.zip</a><br>\n, and run the command<br>\ntoco --input_file=/home/jeyawn/ML/test.pb --output_file=/home/jeyawn/ML/test.lite --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --inference_type=FLOAT --input_shape=1,368,368,3 --input_array=image --input_data_type=FLOAT --output_arrays=Openpose/MConv_Stage6_L1_5_pointwise/BatchNorm/FusedBatchNorm,Openpose/MConv_Stage6_L2_5_pointwise/BatchNorm/FusedBatchNorm</p>\n<p>Following is my env:</p>\n<p>== cat /etc/issue ===============================================<br>\nLinux jeyawn-virtual-machine 3.13.0-128-generic <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116593008\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/177\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/177/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/177\">#177</a>-Ubuntu SMP Tue Aug 8 11:40:23 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux<br>\nVERSION=\"14.04.5 LTS, Trusty Tahr\"<br>\nVERSION_ID=\"14.04\"</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4<br>\nCopyright (C) 2013 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux jeyawn-virtual-machine 3.13.0-128-generic <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116593008\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/177\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/177/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/177\">#177</a>-Ubuntu SMP Tue Aug 8 11:40:23 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nnumpy (1.8.2)<br>\nprotobuf (2.5.0)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\nTraceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nImportError: No module named tensorflow</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH is unset<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\nnvidia-smi: command not found</p>\n<h2>== cuda libs  ===================================================</h2>", "body_text": "I use toco to change model to lite format, it crashed like the following statck (PS: toco was compiled in my own machine with the tensorflow code. The git commit is 9fb9ac6, with date Sun Jan 21 07:43:08 2018 +0800 )\nProgram received signal SIGSEGV, Segmentation fault.\n0x000000000046bdf8 in void toco::(anonymous namespace)::EvaluateBinaryOperatorOnConstantInputs<(toco::ArrayDataType)2, (toco::ArrayDataType)2>(toco::Model*, toco::Operator const*) ()\n(gdb) bt\n#0  0x000000000046bdf8 in void toco::(anonymous namespace)::EvaluateBinaryOperatorOnConstantInputs<(toco::ArrayDataType)2, (toco::ArrayDataType)2>(toco::Model*, toco::Operator const*) ()\n#1  0x000000000046e3e9 in toco::ResolveConstantBinaryOperator::Run(toco::Model*, unsigned long) ()\n#2  0x0000000000489dd3 in toco::(anonymous namespace)::GraphTransformationsPass(int, toco::Model*, toco::GraphTransformationsSet const&) ()\n#3  0x000000000048aae0 in toco::RunGraphTransformations(toco::Model*, std::string const&, toco::GraphTransformationsSet const&) ()\n#4  0x000000000042b608 in toco::Transform(toco::TocoFlags const&, toco::Model*) ()\n#5  0x000000000041c5e8 in main ()\nIt can reproduce by unzip my attached file\ntest.zip\n, and run the command\ntoco --input_file=/home/jeyawn/ML/test.pb --output_file=/home/jeyawn/ML/test.lite --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --inference_type=FLOAT --input_shape=1,368,368,3 --input_array=image --input_data_type=FLOAT --output_arrays=Openpose/MConv_Stage6_L1_5_pointwise/BatchNorm/FusedBatchNorm,Openpose/MConv_Stage6_L2_5_pointwise/BatchNorm/FusedBatchNorm\nFollowing is my env:\n== cat /etc/issue ===============================================\nLinux jeyawn-virtual-machine 3.13.0-128-generic #177-Ubuntu SMP Tue Aug 8 11:40:23 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"14.04.5 LTS, Trusty Tahr\"\nVERSION_ID=\"14.04\"\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4\nCopyright (C) 2013 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux jeyawn-virtual-machine 3.13.0-128-generic #177-Ubuntu SMP Tue Aug 8 11:40:23 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n== check pips ===================================================\nnumpy (1.8.2)\nprotobuf (2.5.0)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\nTraceback (most recent call last):\nFile \"\", line 1, in \nImportError: No module named tensorflow\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\nnvidia-smi: command not found\n== cuda libs  ===================================================", "body": "I use toco to change model to lite format, it crashed like the following statck (PS: toco was compiled in my own machine with the tensorflow code. The git commit is 9fb9ac66ce5236ff045630cad6793f0531bf9d2c, with date Sun Jan 21 07:43:08 2018 +0800 )\r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n0x000000000046bdf8 in void toco::(anonymous namespace)::EvaluateBinaryOperatorOnConstantInputs<(toco::ArrayDataType)2, (toco::ArrayDataType)2>(toco::Model*, toco::Operator const*) ()\r\n(gdb) bt\r\n#0  0x000000000046bdf8 in void toco::(anonymous namespace)::EvaluateBinaryOperatorOnConstantInputs<(toco::ArrayDataType)2, (toco::ArrayDataType)2>(toco::Model*, toco::Operator const*) ()\r\n#1  0x000000000046e3e9 in toco::ResolveConstantBinaryOperator::Run(toco::Model*, unsigned long) ()\r\n#2  0x0000000000489dd3 in toco::(anonymous namespace)::GraphTransformationsPass(int, toco::Model*, toco::GraphTransformationsSet const&) ()\r\n#3  0x000000000048aae0 in toco::RunGraphTransformations(toco::Model*, std::string const&, toco::GraphTransformationsSet const&) ()\r\n#4  0x000000000042b608 in toco::Transform(toco::TocoFlags const&, toco::Model*) ()\r\n#5  0x000000000041c5e8 in main ()\r\n\r\n\r\nIt can reproduce by unzip my attached file\r\n[test.zip](https://github.com/tensorflow/tensorflow/files/1681710/test.zip)\r\n, and run the command \r\ntoco --input_file=/home/jeyawn/ML/test.pb --output_file=/home/jeyawn/ML/test.lite --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --inference_type=FLOAT --input_shape=1,368,368,3 --input_array=image --input_data_type=FLOAT --output_arrays=Openpose/MConv_Stage6_L1_5_pointwise/BatchNorm/FusedBatchNorm,Openpose/MConv_Stage6_L2_5_pointwise/BatchNorm/FusedBatchNorm\r\n\r\n\r\nFollowing is my env:\r\n\r\n== cat /etc/issue ===============================================\r\nLinux jeyawn-virtual-machine 3.13.0-128-generic #177-Ubuntu SMP Tue Aug 8 11:40:23 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"14.04.5 LTS, Trusty Tahr\"\r\nVERSION_ID=\"14.04\"\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4\r\nCopyright (C) 2013 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux jeyawn-virtual-machine 3.13.0-128-generic #177-Ubuntu SMP Tue Aug 8 11:40:23 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy (1.8.2)\r\nprotobuf (2.5.0)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nImportError: No module named tensorflow\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\nnvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n----------------------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/352110138", "html_url": "https://github.com/tensorflow/tensorflow/pull/15166#issuecomment-352110138", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15166", "id": 352110138, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjExMDEzOA==", "user": {"login": "Androbin", "id": 16437156, "node_id": "MDQ6VXNlcjE2NDM3MTU2", "avatar_url": "https://avatars1.githubusercontent.com/u/16437156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Androbin", "html_url": "https://github.com/Androbin", "followers_url": "https://api.github.com/users/Androbin/followers", "following_url": "https://api.github.com/users/Androbin/following{/other_user}", "gists_url": "https://api.github.com/users/Androbin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Androbin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Androbin/subscriptions", "organizations_url": "https://api.github.com/users/Androbin/orgs", "repos_url": "https://api.github.com/users/Androbin/repos", "events_url": "https://api.github.com/users/Androbin/events{/privacy}", "received_events_url": "https://api.github.com/users/Androbin/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-15T20:58:03Z", "updated_at": "2017-12-15T21:12:54Z", "author_association": "CONTRIBUTOR", "body_html": "<blockquote>\n<p>where we just depend on the things we need</p>\n</blockquote>\n<p>There is no way of knowing what (let's say) <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/python_modules.txt\"><code>python_modules.txt</code></a> contains upfront. They are not even guaranteed to be valid which is what these tests are for.</p>\n<p>Also, some of the tests depend on knowing about the filetree structure.</p>\n<blockquote>\n<p>similar to what our pip package building process</p>\n</blockquote>\n<p>This PR tests directory entries \"similar\" to <code>pip_smoke_test</code> testing dependencies. As long as <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/pip_package/BUILD#L51\">it depends on <code>//tensorflow:all_opensource_files</code></a> as well, why would this need to work without?</p>\n<blockquote>\n<p>There are other ways of doing it.</p>\n</blockquote>\n<p>Until we find a better alternative for <code>cmake</code> (this PR) and <code>pip_smoke_test</code> and <code>makefile</code> and all other things that depend on <code>//tensorflow:all_opensource_files</code>, I don't see why having it would be an issue.</p>\n<p>Even if we were to write a script to dump a summary of the filetree structure into a file and use that, we would still need some way of requiring \"all files\" for its <code>runfiles</code> directory.</p>", "body_text": "where we just depend on the things we need\n\nThere is no way of knowing what (let's say) python_modules.txt contains upfront. They are not even guaranteed to be valid which is what these tests are for.\nAlso, some of the tests depend on knowing about the filetree structure.\n\nsimilar to what our pip package building process\n\nThis PR tests directory entries \"similar\" to pip_smoke_test testing dependencies. As long as it depends on //tensorflow:all_opensource_files as well, why would this need to work without?\n\nThere are other ways of doing it.\n\nUntil we find a better alternative for cmake (this PR) and pip_smoke_test and makefile and all other things that depend on //tensorflow:all_opensource_files, I don't see why having it would be an issue.\nEven if we were to write a script to dump a summary of the filetree structure into a file and use that, we would still need some way of requiring \"all files\" for its runfiles directory.", "body": "> where we just depend on the things we need\r\n\r\nThere is no way of knowing what (let's say) [`python_modules.txt`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/python_modules.txt) contains upfront. They are not even guaranteed to be valid which is what these tests are for.\r\n\r\nAlso, some of the tests depend on knowing about the filetree structure.\r\n\r\n> similar to what our pip package building process\r\n\r\nThis PR tests directory entries \"similar\" to `pip_smoke_test` testing dependencies. As long as [it depends on `//tensorflow:all_opensource_files`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/pip_package/BUILD#L51) as well, why would this need to work without?\r\n\r\n> There are other ways of doing it.\r\n\r\nUntil we find a better alternative for `cmake` (this PR) and `pip_smoke_test` and `makefile` and all other things that depend on `//tensorflow:all_opensource_files`, I don't see why having it would be an issue.\r\n\r\nEven if we were to write a script to dump a summary of the filetree structure into a file and use that, we would still need some way of requiring \"all files\" for its `runfiles` directory."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/423027401", "html_url": "https://github.com/tensorflow/tensorflow/issues/21336#issuecomment-423027401", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21336", "id": 423027401, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzAyNzQwMQ==", "user": {"login": "minizon", "id": 11333107, "node_id": "MDQ6VXNlcjExMzMzMTA3", "avatar_url": "https://avatars2.githubusercontent.com/u/11333107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minizon", "html_url": "https://github.com/minizon", "followers_url": "https://api.github.com/users/minizon/followers", "following_url": "https://api.github.com/users/minizon/following{/other_user}", "gists_url": "https://api.github.com/users/minizon/gists{/gist_id}", "starred_url": "https://api.github.com/users/minizon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minizon/subscriptions", "organizations_url": "https://api.github.com/users/minizon/orgs", "repos_url": "https://api.github.com/users/minizon/repos", "events_url": "https://api.github.com/users/minizon/events{/privacy}", "received_events_url": "https://api.github.com/users/minizon/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-20T03:21:09Z", "updated_at": "2018-09-20T03:22:21Z", "author_association": "NONE", "body_html": "<p>Same issue encountered when I tried to quantized the model given by the example <a href=\"https://codelabs.developers.google.com/codelabs/tensorflow-for-poets-2-tflite/#2\" rel=\"nofollow\">TensorFlow for Poets 2: TFLite Android</a>. If no quantization the tf-lite works, but after quantization (using tf-nightly), the model only works in python env (though the result is not accurate). However, when deploying to android, it throws the same exception.</p>\n<p>beginning of crash<br>\n09-20 03:05:24.821 7759-7759/android.example.com.tflitecamerademo E/AndroidRuntime: FATAL EXCEPTION: main<br>\nProcess: android.example.com.tflitecamerademo, PID: 7759<br>\njava.lang.RuntimeException: Unable to start activity ComponentInfo{android.example.com.tflitecamerademo/com.example.android.tflitecamerademo.CameraActivity}: java.lang.NullPointerException: Internal error: Cannot allocate memory for the interpreter: tensorflow/contrib/lite/kernels/conv.cc:201 filter-&gt;type != data_type (3 != 1)Node 4 failed to prepare.</p>\n<pre><code>    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2665)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:154)\n    at android.app.ActivityThread.main(ActivityThread.java:6119)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n Caused by: java.lang.NullPointerException: Internal error: Cannot allocate memory for the interpreter: tensorflow/contrib/lite/kernels/conv.cc:201 filter-&gt;type != data_type (3 != 1)Node 4 failed to prepare.\n\n    at org.tensorflow.lite.NativeInterpreterWrapper.createInterpreter(Native Method)\n    at org.tensorflow.lite.NativeInterpreterWrapper.&lt;init&gt;(NativeInterpreterWrapper.java:75)\n    at org.tensorflow.lite.NativeInterpreterWrapper.&lt;init&gt;(NativeInterpreterWrapper.java:54)\n    at org.tensorflow.lite.Interpreter.&lt;init&gt;(Interpreter.java:114)\n    at com.example.android.tflitecamerademo.ImageClassifier.&lt;init&gt;(ImageClassifier.java:97)\n    at com.example.android.tflitecamerademo.Camera2BasicFragment.onActivityCreated(Camera2BasicFragment.java:299)\n    at android.app.Fragment.performActivityCreated(Fragment.java:2362)\n    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1014)\n    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1171)\n    at android.app.BackStackRecord.run(BackStackRecord.java:816)\n    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1578)\n    at android.app.FragmentController.execPendingActions(FragmentController.java:371)\n    at android.app.Activity.performStart(Activity.java:6695)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2628)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\u00a0\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n    at android.os.Looper.loop(Looper.java:154)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6119)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\u00a0\n</code></pre>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/2399485/assets.zip\">assets.zip</a></p>", "body_text": "Same issue encountered when I tried to quantized the model given by the example TensorFlow for Poets 2: TFLite Android. If no quantization the tf-lite works, but after quantization (using tf-nightly), the model only works in python env (though the result is not accurate). However, when deploying to android, it throws the same exception.\nbeginning of crash\n09-20 03:05:24.821 7759-7759/android.example.com.tflitecamerademo E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: android.example.com.tflitecamerademo, PID: 7759\njava.lang.RuntimeException: Unable to start activity ComponentInfo{android.example.com.tflitecamerademo/com.example.android.tflitecamerademo.CameraActivity}: java.lang.NullPointerException: Internal error: Cannot allocate memory for the interpreter: tensorflow/contrib/lite/kernels/conv.cc:201 filter->type != data_type (3 != 1)Node 4 failed to prepare.\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2665)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:154)\n    at android.app.ActivityThread.main(ActivityThread.java:6119)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n Caused by: java.lang.NullPointerException: Internal error: Cannot allocate memory for the interpreter: tensorflow/contrib/lite/kernels/conv.cc:201 filter->type != data_type (3 != 1)Node 4 failed to prepare.\n\n    at org.tensorflow.lite.NativeInterpreterWrapper.createInterpreter(Native Method)\n    at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:75)\n    at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:54)\n    at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:114)\n    at com.example.android.tflitecamerademo.ImageClassifier.<init>(ImageClassifier.java:97)\n    at com.example.android.tflitecamerademo.Camera2BasicFragment.onActivityCreated(Camera2BasicFragment.java:299)\n    at android.app.Fragment.performActivityCreated(Fragment.java:2362)\n    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1014)\n    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1171)\n    at android.app.BackStackRecord.run(BackStackRecord.java:816)\n    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1578)\n    at android.app.FragmentController.execPendingActions(FragmentController.java:371)\n    at android.app.Activity.performStart(Activity.java:6695)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2628)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\u00a0\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n    at android.os.Looper.loop(Looper.java:154)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6119)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\u00a0\n\nassets.zip", "body": "Same issue encountered when I tried to quantized the model given by the example [TensorFlow for Poets 2: TFLite Android](https://codelabs.developers.google.com/codelabs/tensorflow-for-poets-2-tflite/#2). If no quantization the tf-lite works, but after quantization (using tf-nightly), the model only works in python env (though the result is not accurate). However, when deploying to android, it throws the same exception. \r\n\r\nbeginning of crash\r\n09-20 03:05:24.821 7759-7759/android.example.com.tflitecamerademo E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: android.example.com.tflitecamerademo, PID: 7759\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{android.example.com.tflitecamerademo/com.example.android.tflitecamerademo.CameraActivity}: java.lang.NullPointerException: Internal error: Cannot allocate memory for the interpreter: tensorflow/contrib/lite/kernels/conv.cc:201 filter->type != data_type (3 != 1)Node 4 failed to prepare.\r\n    \r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2665)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\r\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\r\n        at android.os.Handler.dispatchMessage(Handler.java:102)\r\n        at android.os.Looper.loop(Looper.java:154)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6119)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\r\n     Caused by: java.lang.NullPointerException: Internal error: Cannot allocate memory for the interpreter: tensorflow/contrib/lite/kernels/conv.cc:201 filter->type != data_type (3 != 1)Node 4 failed to prepare.\r\n    \r\n        at org.tensorflow.lite.NativeInterpreterWrapper.createInterpreter(Native Method)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:75)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:54)\r\n        at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:114)\r\n        at com.example.android.tflitecamerademo.ImageClassifier.<init>(ImageClassifier.java:97)\r\n        at com.example.android.tflitecamerademo.Camera2BasicFragment.onActivityCreated(Camera2BasicFragment.java:299)\r\n        at android.app.Fragment.performActivityCreated(Fragment.java:2362)\r\n        at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1014)\r\n        at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1171)\r\n        at android.app.BackStackRecord.run(BackStackRecord.java:816)\r\n        at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1578)\r\n        at android.app.FragmentController.execPendingActions(FragmentController.java:371)\r\n        at android.app.Activity.performStart(Activity.java:6695)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2628)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\u00a0\r\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\u00a0\r\n        at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\r\n        at android.os.Looper.loop(Looper.java:154)\u00a0\r\n        at android.app.ActivityThread.main(ActivityThread.java:6119)\u00a0\r\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\u00a0\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\u00a0\r\n\r\n[assets.zip](https://github.com/tensorflow/tensorflow/files/2399485/assets.zip)\r\n\r\n"}
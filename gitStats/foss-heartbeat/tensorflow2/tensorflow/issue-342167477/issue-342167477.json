{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20905", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20905/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20905/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20905/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20905", "id": 342167477, "node_id": "MDU6SXNzdWUzNDIxNjc0Nzc=", "number": 20905, "title": "Supporting a TF lite shared library target", "user": {"login": "martis-chromium", "id": 37162146, "node_id": "MDQ6VXNlcjM3MTYyMTQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/37162146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martis-chromium", "html_url": "https://github.com/martis-chromium", "followers_url": "https://api.github.com/users/martis-chromium/followers", "following_url": "https://api.github.com/users/martis-chromium/following{/other_user}", "gists_url": "https://api.github.com/users/martis-chromium/gists{/gist_id}", "starred_url": "https://api.github.com/users/martis-chromium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martis-chromium/subscriptions", "organizations_url": "https://api.github.com/users/martis-chromium/orgs", "repos_url": "https://api.github.com/users/martis-chromium/repos", "events_url": "https://api.github.com/users/martis-chromium/events{/privacy}", "received_events_url": "https://api.github.com/users/martis-chromium/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2018-07-18T03:54:06Z", "updated_at": "2018-11-21T02:04:00Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>Describe the problem</h3>\n<p>Would the TF project be open to supporting a TF lite shared library target (as is done already with <code>libtensorflow.so</code> and <code>libtensorflow_cc.so</code>)?</p>\n<p>I believe many people would benefit from this, based on recent related issues:<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"309508973\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/18060\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/18060/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/18060\">#18060</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"306496780\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/17826\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/17826/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/17826\">#17826</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"289574687\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16219\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/16219/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/16219\">#16219</a></p>\n<p>I am happy to do the upfront work, but I would require assistance from TF devs for e.g. correct build configuration and on-going support.</p>\n<h3>Source code / logs</h3>\n<p>We could add a <code>tf_cc_shared_object</code> target to <code>tensorflow/contrib/lite/BUILD</code>:</p>\n<pre><code>tf_cc_shared_object(\n    name = \"libtensorflow_lite.so\",\n    framework_so = [],\n    linkopts = tflite_linkopts() + [\"-s\"],  # Strip library.\n    visibility = [\"//visibility:public\"],\n    deps = [\n        \":framework\",\n        \"//tensorflow/contrib/lite/kernels:builtin_ops\",\n    ]\n)\n</code></pre>\n<p>We could also add a header-only target to define the headers for use with <code>libtensorflow_lite.so</code> (although this won't be useful until <a href=\"https://github.com/bazelbuild/bazel/issues/5192\" data-hovercard-type=\"issue\" data-hovercard-url=\"/bazelbuild/bazel/issues/5192/hovercard\">issue 5192</a> has been resolved).</p>\n<p>As mentioned above, I'd need some input to decide the correct build config (e.g. <code>linkopts</code>, use of <code>framework_so</code>).</p>", "body_text": "Describe the problem\nWould the TF project be open to supporting a TF lite shared library target (as is done already with libtensorflow.so and libtensorflow_cc.so)?\nI believe many people would benefit from this, based on recent related issues:\n#18060\n#17826\n#16219\nI am happy to do the upfront work, but I would require assistance from TF devs for e.g. correct build configuration and on-going support.\nSource code / logs\nWe could add a tf_cc_shared_object target to tensorflow/contrib/lite/BUILD:\ntf_cc_shared_object(\n    name = \"libtensorflow_lite.so\",\n    framework_so = [],\n    linkopts = tflite_linkopts() + [\"-s\"],  # Strip library.\n    visibility = [\"//visibility:public\"],\n    deps = [\n        \":framework\",\n        \"//tensorflow/contrib/lite/kernels:builtin_ops\",\n    ]\n)\n\nWe could also add a header-only target to define the headers for use with libtensorflow_lite.so (although this won't be useful until issue 5192 has been resolved).\nAs mentioned above, I'd need some input to decide the correct build config (e.g. linkopts, use of framework_so).", "body": "### Describe the problem\r\nWould the TF project be open to supporting a TF lite shared library target (as is done already with `libtensorflow.so` and `libtensorflow_cc.so`)?\r\n\r\nI believe many people would benefit from this, based on recent related issues:\r\nhttps://github.com/tensorflow/tensorflow/issues/18060\r\nhttps://github.com/tensorflow/tensorflow/issues/17826\r\nhttps://github.com/tensorflow/tensorflow/issues/16219\r\n\r\nI am happy to do the upfront work, but I would require assistance from TF devs for e.g. correct build configuration and on-going support.\r\n\r\n### Source code / logs\r\n\r\nWe could add a `tf_cc_shared_object` target to `tensorflow/contrib/lite/BUILD`:\r\n```\r\ntf_cc_shared_object(\r\n    name = \"libtensorflow_lite.so\",\r\n    framework_so = [],\r\n    linkopts = tflite_linkopts() + [\"-s\"],  # Strip library.\r\n    visibility = [\"//visibility:public\"],\r\n    deps = [\r\n        \":framework\",\r\n        \"//tensorflow/contrib/lite/kernels:builtin_ops\",\r\n    ]\r\n)\r\n```\r\n\r\nWe could also add a header-only target to define the headers for use with `libtensorflow_lite.so` (although this won't be useful until [issue 5192](https://github.com/bazelbuild/bazel/issues/5192) has been resolved).\r\n\r\nAs mentioned above, I'd need some input to decide the correct build config (e.g. `linkopts`, use of `framework_so`)."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/314232201", "html_url": "https://github.com/tensorflow/tensorflow/issues/11416#issuecomment-314232201", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11416", "id": 314232201, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDIzMjIwMQ==", "user": {"login": "on-the-run", "id": 5404419, "node_id": "MDQ6VXNlcjU0MDQ0MTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/5404419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/on-the-run", "html_url": "https://github.com/on-the-run", "followers_url": "https://api.github.com/users/on-the-run/followers", "following_url": "https://api.github.com/users/on-the-run/following{/other_user}", "gists_url": "https://api.github.com/users/on-the-run/gists{/gist_id}", "starred_url": "https://api.github.com/users/on-the-run/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/on-the-run/subscriptions", "organizations_url": "https://api.github.com/users/on-the-run/orgs", "repos_url": "https://api.github.com/users/on-the-run/repos", "events_url": "https://api.github.com/users/on-the-run/events{/privacy}", "received_events_url": "https://api.github.com/users/on-the-run/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-10T20:45:53Z", "updated_at": "2017-07-10T20:45:53Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=22274255\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/shamoya\">@shamoya</a>, the RDMA I am using is Infiniband, instead of RoCE. <code>ib_write_bw</code> runs fine. The workers and the parameter sever can talk to each other via RDMA. Posting the output from running <code>ib_write_bw</code> between one worker and one parameter server below.</p>\n<pre><code>---------------------------------------------------------------------------------------\n                    RDMA_Write BW Test\n Dual-port       : OFF          Device         : mlx4_0\n Number of qps   : 1            Transport type : IB\n Connection type : RC           Using SRQ      : OFF\n CQ Moderation   : 100\n Mtu             : 2048[B]\n Link type       : IB\n Max inline data : 0[B]\n rdma_cm QPs     : OFF\n Data ex. method : Ethernet\n---------------------------------------------------------------------------------------\n local address: LID 0x15 QPN 0x32da PSN 0xebb028 RKey 0xa0010194 VAddr 0x007f11bbfc2000\n remote address: LID 0x12 QPN 0x0337 PSN 0x198251 RKey 0xd001018f VAddr 0x007f728f89f000\n---------------------------------------------------------------------------------------\n #bytes     #iterations    BW peak[MB/sec]    BW average[MB/sec]   MsgRate[Mpps]\n 65536      5000             6071.23            6071.03            0.097136\n---------------------------------------------------------------------------------------\n</code></pre>", "body_text": "@shamoya, the RDMA I am using is Infiniband, instead of RoCE. ib_write_bw runs fine. The workers and the parameter sever can talk to each other via RDMA. Posting the output from running ib_write_bw between one worker and one parameter server below.\n---------------------------------------------------------------------------------------\n                    RDMA_Write BW Test\n Dual-port       : OFF          Device         : mlx4_0\n Number of qps   : 1            Transport type : IB\n Connection type : RC           Using SRQ      : OFF\n CQ Moderation   : 100\n Mtu             : 2048[B]\n Link type       : IB\n Max inline data : 0[B]\n rdma_cm QPs     : OFF\n Data ex. method : Ethernet\n---------------------------------------------------------------------------------------\n local address: LID 0x15 QPN 0x32da PSN 0xebb028 RKey 0xa0010194 VAddr 0x007f11bbfc2000\n remote address: LID 0x12 QPN 0x0337 PSN 0x198251 RKey 0xd001018f VAddr 0x007f728f89f000\n---------------------------------------------------------------------------------------\n #bytes     #iterations    BW peak[MB/sec]    BW average[MB/sec]   MsgRate[Mpps]\n 65536      5000             6071.23            6071.03            0.097136\n---------------------------------------------------------------------------------------", "body": "@shamoya, the RDMA I am using is Infiniband, instead of RoCE. `ib_write_bw` runs fine. The workers and the parameter sever can talk to each other via RDMA. Posting the output from running `ib_write_bw` between one worker and one parameter server below. \r\n```\r\n---------------------------------------------------------------------------------------\r\n                    RDMA_Write BW Test\r\n Dual-port       : OFF          Device         : mlx4_0\r\n Number of qps   : 1            Transport type : IB\r\n Connection type : RC           Using SRQ      : OFF\r\n CQ Moderation   : 100\r\n Mtu             : 2048[B]\r\n Link type       : IB\r\n Max inline data : 0[B]\r\n rdma_cm QPs     : OFF\r\n Data ex. method : Ethernet\r\n---------------------------------------------------------------------------------------\r\n local address: LID 0x15 QPN 0x32da PSN 0xebb028 RKey 0xa0010194 VAddr 0x007f11bbfc2000\r\n remote address: LID 0x12 QPN 0x0337 PSN 0x198251 RKey 0xd001018f VAddr 0x007f728f89f000\r\n---------------------------------------------------------------------------------------\r\n #bytes     #iterations    BW peak[MB/sec]    BW average[MB/sec]   MsgRate[Mpps]\r\n 65536      5000             6071.23            6071.03            0.097136\r\n---------------------------------------------------------------------------------------\r\n```"}
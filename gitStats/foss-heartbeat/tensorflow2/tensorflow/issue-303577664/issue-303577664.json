{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17566", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17566/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17566/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17566/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17566", "id": 303577664, "node_id": "MDU6SXNzdWUzMDM1Nzc2NjQ=", "number": 17566, "title": "tensorflow-gpu pip package is not compatible with cuda9 docker image", "user": {"login": "rongou", "id": 497101, "node_id": "MDQ6VXNlcjQ5NzEwMQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/497101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rongou", "html_url": "https://github.com/rongou", "followers_url": "https://api.github.com/users/rongou/followers", "following_url": "https://api.github.com/users/rongou/following{/other_user}", "gists_url": "https://api.github.com/users/rongou/gists{/gist_id}", "starred_url": "https://api.github.com/users/rongou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rongou/subscriptions", "organizations_url": "https://api.github.com/users/rongou/orgs", "repos_url": "https://api.github.com/users/rongou/repos", "events_url": "https://api.github.com/users/rongou/events{/privacy}", "received_events_url": "https://api.github.com/users/rongou/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "tfboyd", "id": 23486130, "node_id": "MDQ6VXNlcjIzNDg2MTMw", "avatar_url": "https://avatars1.githubusercontent.com/u/23486130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tfboyd", "html_url": "https://github.com/tfboyd", "followers_url": "https://api.github.com/users/tfboyd/followers", "following_url": "https://api.github.com/users/tfboyd/following{/other_user}", "gists_url": "https://api.github.com/users/tfboyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tfboyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tfboyd/subscriptions", "organizations_url": "https://api.github.com/users/tfboyd/orgs", "repos_url": "https://api.github.com/users/tfboyd/repos", "events_url": "https://api.github.com/users/tfboyd/events{/privacy}", "received_events_url": "https://api.github.com/users/tfboyd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tfboyd", "id": 23486130, "node_id": "MDQ6VXNlcjIzNDg2MTMw", "avatar_url": "https://avatars1.githubusercontent.com/u/23486130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tfboyd", "html_url": "https://github.com/tfboyd", "followers_url": "https://api.github.com/users/tfboyd/followers", "following_url": "https://api.github.com/users/tfboyd/following{/other_user}", "gists_url": "https://api.github.com/users/tfboyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tfboyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tfboyd/subscriptions", "organizations_url": "https://api.github.com/users/tfboyd/orgs", "repos_url": "https://api.github.com/users/tfboyd/repos", "events_url": "https://api.github.com/users/tfboyd/events{/privacy}", "received_events_url": "https://api.github.com/users/tfboyd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 34, "created_at": "2018-03-08T18:08:57Z", "updated_at": "2018-04-02T20:14:06Z", "closed_at": "2018-04-02T20:14:06Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nNo</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nLinux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nbinary (<code>pip install tensorflow-gpu</code>)</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.6.0</li>\n<li><strong>Python version</strong>:<br>\n2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nCUDA 9, cuDNN 7</li>\n<li><strong>GPU model and memory</strong>:</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nI was trying to build a horovod image, but this would affect anyone using the <code>nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04</code> base image:</li>\n</ul>\n<div class=\"highlight highlight-source-shell\"><pre>docker build -t horovod https://raw.githubusercontent.com/uber/horovod/master/Dockerfile\ndocker run -it --rm horovod python tensorflow_mnist.py</pre></div>\n<h3>Describe the problem</h3>\n<p>When building a docker image based on <code>nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04</code> and doing a <code>pip install tensorflow-gpu==1.6.0</code>, the resulting image causes a crash because the base image contains cuDNN 7.1, while the tensorflow-gpu pip package was built against cuDNN 7.0.</p>\n<h3>Source code / logs</h3>\n<p>Error messages:</p>\n<div class=\"highlight highlight-source-shell\"><pre>2018-03-08 17:46:50.845206: E tensorflow/stream_executor/cuda/cuda_dnn.cc:378] Loaded runtime CuDNN library: 7101 (compatibility version 7100) but <span class=\"pl-c1\">source</span> was compiled with 7004 (compatibility version 7000).  If using a binary install, upgrade your CuDNN library to match.  If building from sources, make sure the library loaded at runtime matches a compatible version specified during compile configuration.\n2018-03-08 17:46:50.845868: F tensorflow/core/kernels/conv_ops.cc:717] Check failed: <span class=\"pl-en\">stream-&gt;parent</span>()-<span class=\"pl-k\">&gt;</span>GetConvolveAlgorithms( <span class=\"pl-en\">conv_parameters.ShouldIncludeWinogradNonfusedAlgo&lt;T&gt;</span>(), &amp;algorithms) </pre></div>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3645581\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/flx42\">@flx42</a></p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nNo\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nLinux Ubuntu 16.04\nTensorFlow installed from (source or binary):\nbinary (pip install tensorflow-gpu)\nTensorFlow version (use command below):\n1.6.0\nPython version:\n2.7\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source):\nCUDA/cuDNN version:\nCUDA 9, cuDNN 7\nGPU model and memory:\nExact command to reproduce:\nI was trying to build a horovod image, but this would affect anyone using the nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04 base image:\n\ndocker build -t horovod https://raw.githubusercontent.com/uber/horovod/master/Dockerfile\ndocker run -it --rm horovod python tensorflow_mnist.py\nDescribe the problem\nWhen building a docker image based on nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04 and doing a pip install tensorflow-gpu==1.6.0, the resulting image causes a crash because the base image contains cuDNN 7.1, while the tensorflow-gpu pip package was built against cuDNN 7.0.\nSource code / logs\nError messages:\n2018-03-08 17:46:50.845206: E tensorflow/stream_executor/cuda/cuda_dnn.cc:378] Loaded runtime CuDNN library: 7101 (compatibility version 7100) but source was compiled with 7004 (compatibility version 7000).  If using a binary install, upgrade your CuDNN library to match.  If building from sources, make sure the library loaded at runtime matches a compatible version specified during compile configuration.\n2018-03-08 17:46:50.845868: F tensorflow/core/kernels/conv_ops.cc:717] Check failed: stream->parent()->GetConvolveAlgorithms( conv_parameters.ShouldIncludeWinogradNonfusedAlgo<T>(), &algorithms) \n@flx42", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: \r\nNo\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nLinux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary (`pip install tensorflow-gpu`)\r\n- **TensorFlow version (use command below)**:\r\n1.6.0\r\n- **Python version**: \r\n2.7\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\nCUDA 9, cuDNN 7\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\nI was trying to build a horovod image, but this would affect anyone using the `nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04` base image:\r\n\r\n```shell\r\ndocker build -t horovod https://raw.githubusercontent.com/uber/horovod/master/Dockerfile\r\ndocker run -it --rm horovod python tensorflow_mnist.py\r\n```\r\n### Describe the problem\r\nWhen building a docker image based on `nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04` and doing a `pip install tensorflow-gpu==1.6.0`, the resulting image causes a crash because the base image contains cuDNN 7.1, while the tensorflow-gpu pip package was built against cuDNN 7.0.\r\n\r\n### Source code / logs\r\nError messages:\r\n```shell\r\n2018-03-08 17:46:50.845206: E tensorflow/stream_executor/cuda/cuda_dnn.cc:378] Loaded runtime CuDNN library: 7101 (compatibility version 7100) but source was compiled with 7004 (compatibility version 7000).  If using a binary install, upgrade your CuDNN library to match.  If building from sources, make sure the library loaded at runtime matches a compatible version specified during compile configuration.\r\n2018-03-08 17:46:50.845868: F tensorflow/core/kernels/conv_ops.cc:717] Check failed: stream->parent()->GetConvolveAlgorithms( conv_parameters.ShouldIncludeWinogradNonfusedAlgo<T>(), &algorithms) \r\n```\r\n\r\n@flx42 "}
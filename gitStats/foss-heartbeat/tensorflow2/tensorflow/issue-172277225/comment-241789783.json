{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/241789783", "html_url": "https://github.com/tensorflow/tensorflow/issues/3942#issuecomment-241789783", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3942", "id": 241789783, "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTc4OTc4Mw==", "user": {"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-23T16:21:13Z", "updated_at": "2016-08-23T16:21:27Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I think if you have multiple files like this, tf.app.flags must be used with 'tf.app.run()'.</p>\n<p>tf.app.run() is where the flags you have declared are parsed, so if run code that inspects FLAGS before tf.app.run(), it won't work.</p>\n<p>My suggestion would be to set it up so that:</p>\n<p>model.py and util.py define functions but don't inspect FLAGS on import<br>\nAnd then your 'train.py' would define its code in a main function</p>\n<pre><code>def main(argv):\n  .. your code ...\n</code></pre>\n<p>Then at the bottom:</p>\n<pre><code>if __name__ == \"__main__\":\n  tf.app.run()\n</code></pre>\n<p>As for the default values, I'll have to look</p>", "body_text": "I think if you have multiple files like this, tf.app.flags must be used with 'tf.app.run()'.\ntf.app.run() is where the flags you have declared are parsed, so if run code that inspects FLAGS before tf.app.run(), it won't work.\nMy suggestion would be to set it up so that:\nmodel.py and util.py define functions but don't inspect FLAGS on import\nAnd then your 'train.py' would define its code in a main function\ndef main(argv):\n  .. your code ...\n\nThen at the bottom:\nif __name__ == \"__main__\":\n  tf.app.run()\n\nAs for the default values, I'll have to look", "body": "I think if you have multiple files like this, tf.app.flags must be used with 'tf.app.run()'.\n\ntf.app.run() is where the flags you have declared are parsed, so if run code that inspects FLAGS before tf.app.run(), it won't work.\n\nMy suggestion would be to set it up so that:\n\nmodel.py and util.py define functions but don't inspect FLAGS on import\nAnd then your 'train.py' would define its code in a main function \n\n```\ndef main(argv):\n  .. your code ...\n```\n\nThen at the bottom:\n\n```\nif __name__ == \"__main__\":\n  tf.app.run()\n```\n\nAs for the default values, I'll have to look\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9494", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9494/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9494/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9494/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9494", "id": 224851546, "node_id": "MDU6SXNzdWUyMjQ4NTE1NDY=", "number": 9494, "title": "graph_transforms tool obfuscate_names won't work", "user": {"login": "thisismohitgupta", "id": 13066358, "node_id": "MDQ6VXNlcjEzMDY2MzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13066358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thisismohitgupta", "html_url": "https://github.com/thisismohitgupta", "followers_url": "https://api.github.com/users/thisismohitgupta/followers", "following_url": "https://api.github.com/users/thisismohitgupta/following{/other_user}", "gists_url": "https://api.github.com/users/thisismohitgupta/gists{/gist_id}", "starred_url": "https://api.github.com/users/thisismohitgupta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thisismohitgupta/subscriptions", "organizations_url": "https://api.github.com/users/thisismohitgupta/orgs", "repos_url": "https://api.github.com/users/thisismohitgupta/repos", "events_url": "https://api.github.com/users/thisismohitgupta/events{/privacy}", "received_events_url": "https://api.github.com/users/thisismohitgupta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-04-27T17:05:59Z", "updated_at": "2017-04-27T18:25:55Z", "closed_at": "2017-04-27T18:25:55Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution : Ubuntu 16.04</strong><br>\n<strong>GIT_VERSION: v1.1.0-rc0-61-g1ec6ed5</strong><br>\n<strong>Tensorflow Version: 1.1.0</strong></li>\n</ul>\n<pre><code>bazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\n--in_graph=MYMODEL.pb \\\n--out_graph=MYMODEL_OPT.pb \\\n--inputs='input_feed:0,Squeeze_1:0,lstm/state_feed:0' \\\n--outputs='lstm/initial_state:0,softmax:0,lstm/state:0' \\\n--transforms='\n  obfuscate_names'\n</code></pre>\n<p>Bug: Model as follows (Inception V3) -&gt; (LSTM)<br>\nI used the graph_transform tool to obfuscate names using the obfuscate_names command for android deployment. model seems to work fine on android but when I try to obfuscate names problems start to surface.</p>\n<p>logs</p>\n<pre><code>Caused by: java.io.IOException: Not a valid TensorFlow Graph serialization: Node 'rY' expects to be colocated with unknown node 'logits/biases'\n                                                                                 at org.tensorflow.contrib.android.TensorFlowInferenceInterface.loadGraph(TensorFlowInferenceInterface.java:392)\n                                                                                 at org.tensorflow.contrib.android.TensorFlowInferenceInterface.&lt;init&gt;(TensorFlowInferenceInterface.java:96)\n                                                                                 at com.example.thisismohit.local.MainActivity.onCreate(MainActivity.java:158)\u00a0\n                                                                                 at android.app.Activity.performCreate(Activity.java:6283)\u00a0\n                                                                                 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1119)\u00a0\n                                                                                 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2646)\u00a0\n                                                                                 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2758)\u00a0\n                                                                                 at android.app.ActivityThread.access$900(ActivityThread.java:177)\u00a0\n                                                                                 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1448)\u00a0\n                                                                                 at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n                                                                                 at android.os.Looper.loop(Looper.java:145)\u00a0\n                                                                                 at android.app.ActivityThread.main(ActivityThread.java:5942)\u00a0\n                                                                                 at java.lang.reflect.Method.invoke(Native Method)\u00a0\n                                                                                 at java.lang.reflect.Method.invoke(Method.java:372)\u00a0\n                                                                                 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1400)\u00a0\n                                                                                 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1195)\u00a0\n\n</code></pre>", "body_text": "System information\n\nOS Platform and Distribution : Ubuntu 16.04\nGIT_VERSION: v1.1.0-rc0-61-g1ec6ed5\nTensorflow Version: 1.1.0\n\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\n--in_graph=MYMODEL.pb \\\n--out_graph=MYMODEL_OPT.pb \\\n--inputs='input_feed:0,Squeeze_1:0,lstm/state_feed:0' \\\n--outputs='lstm/initial_state:0,softmax:0,lstm/state:0' \\\n--transforms='\n  obfuscate_names'\n\nBug: Model as follows (Inception V3) -> (LSTM)\nI used the graph_transform tool to obfuscate names using the obfuscate_names command for android deployment. model seems to work fine on android but when I try to obfuscate names problems start to surface.\nlogs\nCaused by: java.io.IOException: Not a valid TensorFlow Graph serialization: Node 'rY' expects to be colocated with unknown node 'logits/biases'\n                                                                                 at org.tensorflow.contrib.android.TensorFlowInferenceInterface.loadGraph(TensorFlowInferenceInterface.java:392)\n                                                                                 at org.tensorflow.contrib.android.TensorFlowInferenceInterface.<init>(TensorFlowInferenceInterface.java:96)\n                                                                                 at com.example.thisismohit.local.MainActivity.onCreate(MainActivity.java:158)\u00a0\n                                                                                 at android.app.Activity.performCreate(Activity.java:6283)\u00a0\n                                                                                 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1119)\u00a0\n                                                                                 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2646)\u00a0\n                                                                                 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2758)\u00a0\n                                                                                 at android.app.ActivityThread.access$900(ActivityThread.java:177)\u00a0\n                                                                                 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1448)\u00a0\n                                                                                 at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n                                                                                 at android.os.Looper.loop(Looper.java:145)\u00a0\n                                                                                 at android.app.ActivityThread.main(ActivityThread.java:5942)\u00a0\n                                                                                 at java.lang.reflect.Method.invoke(Native Method)\u00a0\n                                                                                 at java.lang.reflect.Method.invoke(Method.java:372)\u00a0\n                                                                                 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1400)\u00a0\n                                                                                 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1195)\u00a0", "body": "### System information\r\n\r\n- **OS Platform and Distribution : Ubuntu 16.04**\r\n**GIT_VERSION: v1.1.0-rc0-61-g1ec6ed5**\r\n**Tensorflow Version: 1.1.0**\r\n\r\n```\r\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\r\n--in_graph=MYMODEL.pb \\\r\n--out_graph=MYMODEL_OPT.pb \\\r\n--inputs='input_feed:0,Squeeze_1:0,lstm/state_feed:0' \\\r\n--outputs='lstm/initial_state:0,softmax:0,lstm/state:0' \\\r\n--transforms='\r\n  obfuscate_names'\r\n```\r\n\r\n\r\n\r\n\r\n\r\nBug: Model as follows (Inception V3) -> (LSTM)\r\nI used the graph_transform tool to obfuscate names using the obfuscate_names command for android deployment. model seems to work fine on android but when I try to obfuscate names problems start to surface.\r\n\r\n\r\nlogs\r\n```\r\nCaused by: java.io.IOException: Not a valid TensorFlow Graph serialization: Node 'rY' expects to be colocated with unknown node 'logits/biases'\r\n                                                                                 at org.tensorflow.contrib.android.TensorFlowInferenceInterface.loadGraph(TensorFlowInferenceInterface.java:392)\r\n                                                                                 at org.tensorflow.contrib.android.TensorFlowInferenceInterface.<init>(TensorFlowInferenceInterface.java:96)\r\n                                                                                 at com.example.thisismohit.local.MainActivity.onCreate(MainActivity.java:158)\u00a0\r\n                                                                                 at android.app.Activity.performCreate(Activity.java:6283)\u00a0\r\n                                                                                 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1119)\u00a0\r\n                                                                                 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2646)\u00a0\r\n                                                                                 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2758)\u00a0\r\n                                                                                 at android.app.ActivityThread.access$900(ActivityThread.java:177)\u00a0\r\n                                                                                 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1448)\u00a0\r\n                                                                                 at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\r\n                                                                                 at android.os.Looper.loop(Looper.java:145)\u00a0\r\n                                                                                 at android.app.ActivityThread.main(ActivityThread.java:5942)\u00a0\r\n                                                                                 at java.lang.reflect.Method.invoke(Native Method)\u00a0\r\n                                                                                 at java.lang.reflect.Method.invoke(Method.java:372)\u00a0\r\n                                                                                 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1400)\u00a0\r\n                                                                                 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1195)\u00a0\r\n\r\n```"}
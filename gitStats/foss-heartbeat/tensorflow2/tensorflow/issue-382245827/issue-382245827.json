{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23855", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23855/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23855/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23855/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23855", "id": 382245827, "node_id": "MDU6SXNzdWUzODIyNDU4Mjc=", "number": 23855, "title": "Tf Lite only support 4D(or less) tensors stack op?", "user": {"login": "PK15946", "id": 34185974, "node_id": "MDQ6VXNlcjM0MTg1OTc0", "avatar_url": "https://avatars3.githubusercontent.com/u/34185974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PK15946", "html_url": "https://github.com/PK15946", "followers_url": "https://api.github.com/users/PK15946/followers", "following_url": "https://api.github.com/users/PK15946/following{/other_user}", "gists_url": "https://api.github.com/users/PK15946/gists{/gist_id}", "starred_url": "https://api.github.com/users/PK15946/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PK15946/subscriptions", "organizations_url": "https://api.github.com/users/PK15946/orgs", "repos_url": "https://api.github.com/users/PK15946/repos", "events_url": "https://api.github.com/users/PK15946/events{/privacy}", "received_events_url": "https://api.github.com/users/PK15946/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-19T14:43:20Z", "updated_at": "2018-11-19T14:43:20Z", "closed_at": null, "author_association": "NONE", "body_html": "<p><strong>System information</strong></p>\n<ul>\n<li>Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, that is a custom model</li>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04</li>\n<li>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: None</li>\n<li>TensorFlow installed from (source or binary): source</li>\n<li>TensorFlow version (use command below):1.12-gpu</li>\n<li>Python version:3.6</li>\n<li>Bazel version (if compiling from source):0.19</li>\n<li>GCC/Compiler version (if compiling from source):5.4</li>\n<li>CUDA/cuDNN version:9.0/7.3.1</li>\n<li>GPU model and memory:GTX 1080 ti</li>\n</ul>\n<p><strong>Describe the current behavior</strong><br>\nI created a custom TensorFlow model and converted it tflite with<br>\n<code>converter = tf.lite.TFLiteConverter.from_session(sess, [img], [out])</code><br>\n<code>tflite_model = converter.convert()</code><br>\n<code>open(\"converted_model.tflite\", \"wb\").write(tflite_model).</code><br>\nThe process was fine. Then I tried to test the file with interpreter. But when I run<br>\n<code>interpreter = tf.lite.Interpreter(model_path=\"converted_model.tflite\")</code><br>\n<code>interpreter.allocate_tensors()</code><br>\nI get the following runtime error:<br>\n<code>tensorflow/contrib/lite/kernels/pack.cc:38 NumDimensions(input0) &lt; 4 was not true.Node number 14 (PACK) failed to prepare.</code></p>\n<p><strong>Code to reproduce the issue</strong><br>\n<code>z = tf.stack([x, y], axis=3), where x and y both are 4D tensor.</code><br>\nWhat can I do to get the interpreter run? Any help will be appreciated.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, that is a custom model\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: None\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below):1.12-gpu\nPython version:3.6\nBazel version (if compiling from source):0.19\nGCC/Compiler version (if compiling from source):5.4\nCUDA/cuDNN version:9.0/7.3.1\nGPU model and memory:GTX 1080 ti\n\nDescribe the current behavior\nI created a custom TensorFlow model and converted it tflite with\nconverter = tf.lite.TFLiteConverter.from_session(sess, [img], [out])\ntflite_model = converter.convert()\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model).\nThe process was fine. Then I tried to test the file with interpreter. But when I run\ninterpreter = tf.lite.Interpreter(model_path=\"converted_model.tflite\")\ninterpreter.allocate_tensors()\nI get the following runtime error:\ntensorflow/contrib/lite/kernels/pack.cc:38 NumDimensions(input0) < 4 was not true.Node number 14 (PACK) failed to prepare.\nCode to reproduce the issue\nz = tf.stack([x, y], axis=3), where x and y both are 4D tensor.\nWhat can I do to get the interpreter run? Any help will be appreciated.", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, that is a custom model\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: None\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below):1.12-gpu\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):0.19\r\n- GCC/Compiler version (if compiling from source):5.4\r\n- CUDA/cuDNN version:9.0/7.3.1\r\n- GPU model and memory:GTX 1080 ti\r\n\r\n**Describe the current behavior**\r\nI created a custom TensorFlow model and converted it tflite with \r\n`converter = tf.lite.TFLiteConverter.from_session(sess, [img], [out])`\r\n`tflite_model = converter.convert()`\r\n`open(\"converted_model.tflite\", \"wb\").write(tflite_model).`\r\nThe process was fine. Then I tried to test the file with interpreter. But when I run\r\n`interpreter = tf.lite.Interpreter(model_path=\"converted_model.tflite\")`\r\n `interpreter.allocate_tensors()`\r\nI get the following runtime error:\r\n`tensorflow/contrib/lite/kernels/pack.cc:38 NumDimensions(input0) < 4 was not true.Node number 14 (PACK) failed to prepare.`\r\n\r\n**Code to reproduce the issue**\r\n`z = tf.stack([x, y], axis=3), where x and y both are 4D tensor.` \r\nWhat can I do to get the interpreter run? Any help will be appreciated.\r\n"}
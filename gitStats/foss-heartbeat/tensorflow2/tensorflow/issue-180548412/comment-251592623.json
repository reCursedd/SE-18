{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/251592623", "html_url": "https://github.com/tensorflow/tensorflow/issues/4722#issuecomment-251592623", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4722", "id": 251592623, "node_id": "MDEyOklzc3VlQ29tbWVudDI1MTU5MjYyMw==", "user": {"login": "nikhilmishra000", "id": 9015977, "node_id": "MDQ6VXNlcjkwMTU5Nzc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9015977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilmishra000", "html_url": "https://github.com/nikhilmishra000", "followers_url": "https://api.github.com/users/nikhilmishra000/followers", "following_url": "https://api.github.com/users/nikhilmishra000/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilmishra000/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilmishra000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilmishra000/subscriptions", "organizations_url": "https://api.github.com/users/nikhilmishra000/orgs", "repos_url": "https://api.github.com/users/nikhilmishra000/repos", "events_url": "https://api.github.com/users/nikhilmishra000/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilmishra000/received_events", "type": "User", "site_admin": false}, "created_at": "2016-10-05T06:27:45Z", "updated_at": "2016-10-05T06:27:45Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I can verify that <code>tf.einsum</code> is working correctly as follows:</p>\n<pre><code>Av = np.random.random(a_shape)\nBv = np.random.random(b_shape)\nAt = tf.constant(Av)\nBt = tf.constant(Bv)\n\nCt = tf.einsum('ijk,kl-&gt;ijl', At, Bt)\nCv = np.einsum('ijk,kl-&gt;ijl', Av, Bv)\n\nprint np.abs(session.run(Ct) - Cv).max()\n</code></pre>\n<p>Which gives me an output of 0.0, and suggests that think the discrepancy is coming from elsewhere in your code. Are you perhaps initializing your variables or choosing batches randomly?</p>", "body_text": "I can verify that tf.einsum is working correctly as follows:\nAv = np.random.random(a_shape)\nBv = np.random.random(b_shape)\nAt = tf.constant(Av)\nBt = tf.constant(Bv)\n\nCt = tf.einsum('ijk,kl->ijl', At, Bt)\nCv = np.einsum('ijk,kl->ijl', Av, Bv)\n\nprint np.abs(session.run(Ct) - Cv).max()\n\nWhich gives me an output of 0.0, and suggests that think the discrepancy is coming from elsewhere in your code. Are you perhaps initializing your variables or choosing batches randomly?", "body": "I can verify that `tf.einsum` is working correctly as follows:\n\n```\nAv = np.random.random(a_shape)\nBv = np.random.random(b_shape)\nAt = tf.constant(Av)\nBt = tf.constant(Bv)\n\nCt = tf.einsum('ijk,kl->ijl', At, Bt)\nCv = np.einsum('ijk,kl->ijl', Av, Bv)\n\nprint np.abs(session.run(Ct) - Cv).max()\n```\n\nWhich gives me an output of 0.0, and suggests that think the discrepancy is coming from elsewhere in your code. Are you perhaps initializing your variables or choosing batches randomly?\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/207684602", "html_url": "https://github.com/tensorflow/tensorflow/issues/206#issuecomment-207684602", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/206", "id": 207684602, "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzY4NDYwMg==", "user": {"login": "waleedka", "id": 106472, "node_id": "MDQ6VXNlcjEwNjQ3Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/106472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waleedka", "html_url": "https://github.com/waleedka", "followers_url": "https://api.github.com/users/waleedka/followers", "following_url": "https://api.github.com/users/waleedka/following{/other_user}", "gists_url": "https://api.github.com/users/waleedka/gists{/gist_id}", "starred_url": "https://api.github.com/users/waleedka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waleedka/subscriptions", "organizations_url": "https://api.github.com/users/waleedka/orgs", "repos_url": "https://api.github.com/users/waleedka/repos", "events_url": "https://api.github.com/users/waleedka/events{/privacy}", "received_events_url": "https://api.github.com/users/waleedka/received_events", "type": "User", "site_admin": false}, "created_at": "2016-04-09T02:23:32Z", "updated_at": "2016-04-09T02:23:32Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1794715\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ebrevdo\">@ebrevdo</a> I tried using the gather_nd op to get the last relevant output from a variable length LSTM network. I'm passing sequence_length to the RNN, which means that the last few outputs of most examples are zeros, so I'm trying to read the last non-zero output. I'm getting this error, though, in the training phase:</p>\n<p><strong>NotImplementedError: Gradient for gather_nd is not implemented.</strong></p>\n<pre><code>  outputs, state = rnn.rnn(multi_rnn_cell, inputs, dtype=tf.float32, sequence_length=lengths_ph)\n\n  indicies = tf.concat(1, [\n      tf.expand_dims(lengths_ph - 1, 1),\n      tf.expand_dims(tf.range(tf.shape(vectors_ph)[0]), 1),\n      tf.expand_dims(tf.zeros_like(lengths_ph), 1),\n      ])\n  output_tensor = tf.pack(outputs)\n  relevant_output = tf.gather_nd(output_tensor, indicies)\n</code></pre>", "body_text": "@ebrevdo I tried using the gather_nd op to get the last relevant output from a variable length LSTM network. I'm passing sequence_length to the RNN, which means that the last few outputs of most examples are zeros, so I'm trying to read the last non-zero output. I'm getting this error, though, in the training phase:\nNotImplementedError: Gradient for gather_nd is not implemented.\n  outputs, state = rnn.rnn(multi_rnn_cell, inputs, dtype=tf.float32, sequence_length=lengths_ph)\n\n  indicies = tf.concat(1, [\n      tf.expand_dims(lengths_ph - 1, 1),\n      tf.expand_dims(tf.range(tf.shape(vectors_ph)[0]), 1),\n      tf.expand_dims(tf.zeros_like(lengths_ph), 1),\n      ])\n  output_tensor = tf.pack(outputs)\n  relevant_output = tf.gather_nd(output_tensor, indicies)", "body": "@ebrevdo I tried using the gather_nd op to get the last relevant output from a variable length LSTM network. I'm passing sequence_length to the RNN, which means that the last few outputs of most examples are zeros, so I'm trying to read the last non-zero output. I'm getting this error, though, in the training phase:\n\n**NotImplementedError: Gradient for gather_nd is not implemented.**\n\n```\n  outputs, state = rnn.rnn(multi_rnn_cell, inputs, dtype=tf.float32, sequence_length=lengths_ph)\n\n  indicies = tf.concat(1, [\n      tf.expand_dims(lengths_ph - 1, 1),\n      tf.expand_dims(tf.range(tf.shape(vectors_ph)[0]), 1),\n      tf.expand_dims(tf.zeros_like(lengths_ph), 1),\n      ])\n  output_tensor = tf.pack(outputs)\n  relevant_output = tf.gather_nd(output_tensor, indicies)\n```\n"}
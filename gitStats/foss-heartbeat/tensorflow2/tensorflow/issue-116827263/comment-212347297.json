{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/212347297", "html_url": "https://github.com/tensorflow/tensorflow/issues/206#issuecomment-212347297", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/206", "id": 212347297, "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjM0NzI5Nw==", "user": {"login": "nova77", "id": 72538, "node_id": "MDQ6VXNlcjcyNTM4", "avatar_url": "https://avatars2.githubusercontent.com/u/72538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nova77", "html_url": "https://github.com/nova77", "followers_url": "https://api.github.com/users/nova77/followers", "following_url": "https://api.github.com/users/nova77/following{/other_user}", "gists_url": "https://api.github.com/users/nova77/gists{/gist_id}", "starred_url": "https://api.github.com/users/nova77/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nova77/subscriptions", "organizations_url": "https://api.github.com/users/nova77/orgs", "repos_url": "https://api.github.com/users/nova77/repos", "events_url": "https://api.github.com/users/nova77/events{/privacy}", "received_events_url": "https://api.github.com/users/nova77/received_events", "type": "User", "site_admin": false}, "created_at": "2016-04-20T09:26:31Z", "updated_at": "2016-04-20T09:33:12Z", "author_association": "NONE", "body_html": "<p>While we wait for gather_nd for supporting gradients, this is a temporary solution:</p>\n<div class=\"highlight highlight-source-python\"><pre>x <span class=\"pl-k\">=</span> tf.constant([[<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">3</span>],\n                 [<span class=\"pl-c1\">4</span>, <span class=\"pl-c1\">5</span>, <span class=\"pl-c1\">6</span>],\n                 [<span class=\"pl-c1\">7</span>, <span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">9</span>]])\nidx <span class=\"pl-k\">=</span> tf.constant([<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span>])\nidx_flattened <span class=\"pl-k\">=</span> tf.range(<span class=\"pl-c1\">0</span>, x.shape[<span class=\"pl-c1\">0</span>]) <span class=\"pl-k\">*</span> x.shape[<span class=\"pl-c1\">1</span>] <span class=\"pl-k\">+</span> idx\ny <span class=\"pl-k\">=</span> tf.gather(tf.reshape(x, [<span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>]),  <span class=\"pl-c\"><span class=\"pl-c\">#</span> flatten input</span>\n              idx_flattened)  <span class=\"pl-c\"><span class=\"pl-c\">#</span> use flattened indices</span>\n\n<span class=\"pl-k\">with</span> tf.Session(<span class=\"pl-s\"><span class=\"pl-pds\">'</span><span class=\"pl-pds\">'</span></span>):\n  <span class=\"pl-c1\">print</span> y.eval()  <span class=\"pl-c\"><span class=\"pl-c\">#</span> [2 4 9]</span></pre></div>", "body_text": "While we wait for gather_nd for supporting gradients, this is a temporary solution:\nx = tf.constant([[1, 2, 3],\n                 [4, 5, 6],\n                 [7, 8, 9]])\nidx = tf.constant([1, 0, 2])\nidx_flattened = tf.range(0, x.shape[0]) * x.shape[1] + idx\ny = tf.gather(tf.reshape(x, [-1]),  # flatten input\n              idx_flattened)  # use flattened indices\n\nwith tf.Session(''):\n  print y.eval()  # [2 4 9]", "body": "While we wait for gather_nd for supporting gradients, this is a temporary solution:\n\n``` python\nx = tf.constant([[1, 2, 3],\n                 [4, 5, 6],\n                 [7, 8, 9]])\nidx = tf.constant([1, 0, 2])\nidx_flattened = tf.range(0, x.shape[0]) * x.shape[1] + idx\ny = tf.gather(tf.reshape(x, [-1]),  # flatten input\n              idx_flattened)  # use flattened indices\n\nwith tf.Session(''):\n  print y.eval()  # [2 4 9]\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/146116312", "pull_request_review_id": 71017985, "id": 146116312, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjExNjMxMg==", "diff_hunk": "@@ -252,7 +252,7 @@ def _FilterInt(v):\n def _FilterFloat(v):\n   if isinstance(v, (list, tuple)):\n     return _FirstNotNone([_FilterFloat(x) for x in v])\n-  return None if isinstance(v, compat.real_types) else _NotNone(v)\n+  return None if isinstance(v, compat.real_types) or v is None else _NotNone(v)", "path": "tensorflow/python/framework/tensor_util.py", "position": null, "original_position": 5, "commit_id": "d0d7576bb8f6a259771eb838a2f4b616562b687e", "original_commit_id": "46fa50e1d8ec80a3dd6ae207c2b8714b776097a3", "user": {"login": "Ouwen", "id": 5455421, "node_id": "MDQ6VXNlcjU0NTU0MjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5455421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ouwen", "html_url": "https://github.com/Ouwen", "followers_url": "https://api.github.com/users/Ouwen/followers", "following_url": "https://api.github.com/users/Ouwen/following{/other_user}", "gists_url": "https://api.github.com/users/Ouwen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ouwen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ouwen/subscriptions", "organizations_url": "https://api.github.com/users/Ouwen/orgs", "repos_url": "https://api.github.com/users/Ouwen/repos", "events_url": "https://api.github.com/users/Ouwen/events{/privacy}", "received_events_url": "https://api.github.com/users/Ouwen/received_events", "type": "User", "site_admin": false}, "body": "> So the purpose of _NotNone is to wrap None values so that failure can be reported for a None value.\r\n\r\nRight, so if the wrong data type is placed into a `tf.float32` tensor. The correct error message is returned.\r\n```\r\nsess = tf.Session()\r\nprint(sess.run(tf.constant([1, 2, 3, 4, 5, 6, 'foo'], dtype=tf.float32)))\r\n# TypeError: Expected float32, got 'string' of type 'str' instead.\r\n```\r\n\r\nnumpy floats allow `nan` values and numpy converts `None` to `nan`; however, the current `make_tensor_proto` and `tf.constant` do not convert `None` to `nan` for float types.", "created_at": "2017-10-21T21:45:22Z", "updated_at": "2017-11-05T02:13:55Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/13834#discussion_r146116312", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13834", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/146116312"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/13834#discussion_r146116312"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13834"}}, "body_html": "<blockquote>\n<p>So the purpose of _NotNone is to wrap None values so that failure can be reported for a None value.</p>\n</blockquote>\n<p>Right, so if the wrong data type is placed into a <code>tf.float32</code> tensor. The correct error message is returned.</p>\n<pre><code>sess = tf.Session()\nprint(sess.run(tf.constant([1, 2, 3, 4, 5, 6, 'foo'], dtype=tf.float32)))\n# TypeError: Expected float32, got 'string' of type 'str' instead.\n</code></pre>\n<p>numpy floats allow <code>nan</code> values and numpy converts <code>None</code> to <code>nan</code>; however, the current <code>make_tensor_proto</code> and <code>tf.constant</code> do not convert <code>None</code> to <code>nan</code> for float types.</p>", "body_text": "So the purpose of _NotNone is to wrap None values so that failure can be reported for a None value.\n\nRight, so if the wrong data type is placed into a tf.float32 tensor. The correct error message is returned.\nsess = tf.Session()\nprint(sess.run(tf.constant([1, 2, 3, 4, 5, 6, 'foo'], dtype=tf.float32)))\n# TypeError: Expected float32, got 'string' of type 'str' instead.\n\nnumpy floats allow nan values and numpy converts None to nan; however, the current make_tensor_proto and tf.constant do not convert None to nan for float types.", "in_reply_to_id": 145866804}
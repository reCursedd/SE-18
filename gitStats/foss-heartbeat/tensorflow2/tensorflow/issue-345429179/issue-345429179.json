{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21201", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21201/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21201/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21201/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/21201", "id": 345429179, "node_id": "MDExOlB1bGxSZXF1ZXN0MjA0NTgyMDY2", "number": 21201, "title": "[CMAKE] Add MKL to PATH", "user": {"login": "bstriner", "id": 12462956, "node_id": "MDQ6VXNlcjEyNDYyOTU2", "avatar_url": "https://avatars3.githubusercontent.com/u/12462956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstriner", "html_url": "https://github.com/bstriner", "followers_url": "https://api.github.com/users/bstriner/followers", "following_url": "https://api.github.com/users/bstriner/following{/other_user}", "gists_url": "https://api.github.com/users/bstriner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstriner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstriner/subscriptions", "organizations_url": "https://api.github.com/users/bstriner/orgs", "repos_url": "https://api.github.com/users/bstriner/repos", "events_url": "https://api.github.com/users/bstriner/events{/privacy}", "received_events_url": "https://api.github.com/users/bstriner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-07-28T07:46:45Z", "updated_at": "2018-08-09T04:05:18Z", "closed_at": "2018-08-09T04:05:18Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21201", "html_url": "https://github.com/tensorflow/tensorflow/pull/21201", "diff_url": "https://github.com/tensorflow/tensorflow/pull/21201.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/21201.patch"}, "body_html": "<p>Currently, instead of adding <code>mkl_BIN_DIRS</code> to the path, the path is replaced by <code>mkl_BIN_DIRS</code>.  I was getting weird errors from the generated command because my <code>PATH</code> was now gone. This PR adds the MKL binary path to the front of <code>PATH</code>  instead of replacing <code>PATH</code> .</p>\n<p>Brief discussion of why this wasn't done before is in the CMake file comments. Refer to those comments for details. It appears there were some issues with having more than one path in <code>PATH</code>. I've tested this on Windows to generate the correct syntax, but haven't tested on a Linux build.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=11640576\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/LoSealL\">@LoSealL</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> It looks like both of you worked on that section.  What kinds of issues were happening with multiple items in <code>PATH</code>? With only MKL on the path, generated commands fail for me at importing numpy.</p>\n<p>If the command fails it shows up in the build log as <code>error MSB6006: \"cmd.exe\" exited with code 1.</code></p>\n<p>BTW, the other minor changes are from tab to space.</p>\n<p>Cheers</p>", "body_text": "Currently, instead of adding mkl_BIN_DIRS to the path, the path is replaced by mkl_BIN_DIRS.  I was getting weird errors from the generated command because my PATH was now gone. This PR adds the MKL binary path to the front of PATH  instead of replacing PATH .\nBrief discussion of why this wasn't done before is in the CMake file comments. Refer to those comments for details. It appears there were some issues with having more than one path in PATH. I've tested this on Windows to generate the correct syntax, but haven't tested on a Linux build.\n@LoSealL @mrry It looks like both of you worked on that section.  What kinds of issues were happening with multiple items in PATH? With only MKL on the path, generated commands fail for me at importing numpy.\nIf the command fails it shows up in the build log as error MSB6006: \"cmd.exe\" exited with code 1.\nBTW, the other minor changes are from tab to space.\nCheers", "body": "Currently, instead of adding `mkl_BIN_DIRS` to the path, the path is replaced by `mkl_BIN_DIRS`.  I was getting weird errors from the generated command because my `PATH` was now gone. This PR adds the MKL binary path to the front of `PATH`  instead of replacing `PATH` .\r\n\r\nBrief discussion of why this wasn't done before is in the CMake file comments. Refer to those comments for details. It appears there were some issues with having more than one path in `PATH`. I've tested this on Windows to generate the correct syntax, but haven't tested on a Linux build.\r\n\r\n@LoSealL @mrry It looks like both of you worked on that section.  What kinds of issues were happening with multiple items in `PATH`? With only MKL on the path, generated commands fail for me at importing numpy.\r\n\r\nIf the command fails it shows up in the build log as `error MSB6006: \"cmd.exe\" exited with code 1.`\r\n\r\nBTW, the other minor changes are from tab to space.\r\n\r\nCheers"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/433055912", "html_url": "https://github.com/tensorflow/tensorflow/issues/23012#issuecomment-433055912", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23012", "id": 433055912, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzA1NTkxMg==", "user": {"login": "KineticCookie", "id": 2300703, "node_id": "MDQ6VXNlcjIzMDA3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2300703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KineticCookie", "html_url": "https://github.com/KineticCookie", "followers_url": "https://api.github.com/users/KineticCookie/followers", "following_url": "https://api.github.com/users/KineticCookie/following{/other_user}", "gists_url": "https://api.github.com/users/KineticCookie/gists{/gist_id}", "starred_url": "https://api.github.com/users/KineticCookie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KineticCookie/subscriptions", "organizations_url": "https://api.github.com/users/KineticCookie/orgs", "repos_url": "https://api.github.com/users/KineticCookie/repos", "events_url": "https://api.github.com/users/KineticCookie/events{/privacy}", "received_events_url": "https://api.github.com/users/KineticCookie/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-25T13:42:35Z", "updated_at": "2018-10-25T13:42:35Z", "author_association": "NONE", "body_html": "<p>I fixed the <code>tensor_content</code> issue in my code by using the forked version of the function.<br>\nBy removing the following <code>if</code> clause I restored the documented behavior.<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/4bb45e6cdddfd8f818ee037216e732f3fd133413/tensorflow/python/framework/tensor_util.py#L503-L508\">tensorflow/tensorflow/python/framework/tensor_util.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n        Lines 503 to 508\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/4bb45e6cdddfd8f818ee037216e732f3fd133413\">4bb45e6</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L503\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"503\"></td>\n          <td id=\"LC503\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-k\">if</span> is_same_size <span class=\"pl-k\">and</span> numpy_dtype <span class=\"pl-k\">in</span> <span class=\"pl-c1\">_TENSOR_CONTENT_TYPES</span> <span class=\"pl-k\">and</span> shape_size <span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">1</span>: </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L504\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"504\"></td>\n          <td id=\"LC504\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-k\">if</span> nparray.size <span class=\"pl-k\">*</span> nparray.itemsize <span class=\"pl-k\">&gt;=</span> (<span class=\"pl-c1\">1</span> <span class=\"pl-k\">&lt;&lt;</span> <span class=\"pl-c1\">31</span>): </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L505\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"505\"></td>\n          <td id=\"LC505\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">     <span class=\"pl-k\">raise</span> <span class=\"pl-c1\">ValueError</span>( </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L506\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"506\"></td>\n          <td id=\"LC506\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">         <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Cannot create a tensor proto whose content is larger than 2GB.<span class=\"pl-pds\">\"</span></span>) </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L507\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"507\"></td>\n          <td id=\"LC507\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   tensor_proto.tensor_content <span class=\"pl-k\">=</span> nparray.tostring() </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L508\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"508\"></td>\n          <td id=\"LC508\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-k\">return</span> tensor_proto </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>However, I'm don't know what is the purpose of<code>_TENSOR_CONTENT_TYPES</code>.</p>", "body_text": "I fixed the tensor_content issue in my code by using the forked version of the function.\nBy removing the following if clause I restored the documented behavior.\n\n  \n    \n      tensorflow/tensorflow/python/framework/tensor_util.py\n    \n    \n        Lines 503 to 508\n      in\n      4bb45e6\n    \n    \n    \n    \n\n        \n          \n           if is_same_size and numpy_dtype in _TENSOR_CONTENT_TYPES and shape_size > 1: \n        \n\n        \n          \n             if nparray.size * nparray.itemsize >= (1 << 31): \n        \n\n        \n          \n               raise ValueError( \n        \n\n        \n          \n                   \"Cannot create a tensor proto whose content is larger than 2GB.\") \n        \n\n        \n          \n             tensor_proto.tensor_content = nparray.tostring() \n        \n\n        \n          \n             return tensor_proto \n        \n    \n  \n\n\nHowever, I'm don't know what is the purpose of_TENSOR_CONTENT_TYPES.", "body": "I fixed the `tensor_content` issue in my code by using the forked version of the function.\r\nBy removing the following `if` clause I restored the documented behavior.\r\nhttps://github.com/tensorflow/tensorflow/blob/4bb45e6cdddfd8f818ee037216e732f3fd133413/tensorflow/python/framework/tensor_util.py#L503-L508\r\n\r\nHowever, I'm don't know what is the purpose of`_TENSOR_CONTENT_TYPES`."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19778", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19778/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19778/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19778/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19778", "id": 329525191, "node_id": "MDU6SXNzdWUzMjk1MjUxOTE=", "number": 19778, "title": "tensorflow.contrib.model_pruning: using illegal summary names", "user": {"login": "Huizerd", "id": 15855769, "node_id": "MDQ6VXNlcjE1ODU1NzY5", "avatar_url": "https://avatars0.githubusercontent.com/u/15855769?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Huizerd", "html_url": "https://github.com/Huizerd", "followers_url": "https://api.github.com/users/Huizerd/followers", "following_url": "https://api.github.com/users/Huizerd/following{/other_user}", "gists_url": "https://api.github.com/users/Huizerd/gists{/gist_id}", "starred_url": "https://api.github.com/users/Huizerd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Huizerd/subscriptions", "organizations_url": "https://api.github.com/users/Huizerd/orgs", "repos_url": "https://api.github.com/users/Huizerd/repos", "events_url": "https://api.github.com/users/Huizerd/events{/privacy}", "received_events_url": "https://api.github.com/users/Huizerd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-06-05T16:06:13Z", "updated_at": "2018-07-19T18:57:46Z", "closed_at": "2018-07-19T18:57:46Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: no</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 18.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: v1.8.0-0-g93bc2e2072</li>\n<li><strong>Python version</strong>: 3.6.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>: N/A</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: N/A</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>: N/A</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Calling <a href=\"https://github.com/tensorflow/tensorflow/blob/83543deedb68fef61ea7e709de3f462a1edd13ce/tensorflow/contrib/model_pruning/python/pruning.py#L509\"><code>add_pruning_summaries()</code></a> leads to illegal summary names for the masks that contain colons, due to <code>tf.Variable.name</code> being used instead of <code>tf.Variable.op.name</code> (as is done for the <a href=\"https://github.com/tensorflow/tensorflow/blob/83543deedb68fef61ea7e709de3f462a1edd13ce/tensorflow/contrib/model_pruning/python/pruning.py#L524\">thresholds</a>). This leads to TensorFlow printing the following info:</p>\n<blockquote>\n<p>INFO:tensorflow:Summary name model/Conv/mask:0/sparsity is illegal; using model/Conv/mask_0/sparsity instead.</p>\n</blockquote>\n<p>Which I think is unnecessary. I will create a PR to let the summary name for masks make use of <code>tf.Variable.op.name</code> as well.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): v1.8.0-0-g93bc2e2072\nPython version: 3.6.5\nBazel version (if compiling from source): N/A\nGCC/Compiler version (if compiling from source): N/A\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce: N/A\n\nDescribe the problem\nCalling add_pruning_summaries() leads to illegal summary names for the masks that contain colons, due to tf.Variable.name being used instead of tf.Variable.op.name (as is done for the thresholds). This leads to TensorFlow printing the following info:\n\nINFO:tensorflow:Summary name model/Conv/mask:0/sparsity is illegal; using model/Conv/mask_0/sparsity instead.\n\nWhich I think is unnecessary. I will create a PR to let the summary name for masks make use of tf.Variable.op.name as well.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 18.04\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: v1.8.0-0-g93bc2e2072\r\n- **Python version**: 3.6.5\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **GCC/Compiler version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: N/A\r\n\r\n### Describe the problem\r\n\r\nCalling [`add_pruning_summaries()`](https://github.com/tensorflow/tensorflow/blob/83543deedb68fef61ea7e709de3f462a1edd13ce/tensorflow/contrib/model_pruning/python/pruning.py#L509) leads to illegal summary names for the masks that contain colons, due to `tf.Variable.name` being used instead of `tf.Variable.op.name` (as is done for the [thresholds](https://github.com/tensorflow/tensorflow/blob/83543deedb68fef61ea7e709de3f462a1edd13ce/tensorflow/contrib/model_pruning/python/pruning.py#L524)). This leads to TensorFlow printing the following info:\r\n\r\n> INFO:tensorflow:Summary name model/Conv/mask:0/sparsity is illegal; using model/Conv/mask_0/sparsity instead.\r\n\r\nWhich I think is unnecessary. I will create a PR to let the summary name for masks make use of `tf.Variable.op.name` as well.\r\n"}
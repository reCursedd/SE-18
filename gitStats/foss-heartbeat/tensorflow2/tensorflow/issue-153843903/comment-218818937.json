{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/218818937", "html_url": "https://github.com/tensorflow/tensorflow/issues/2295#issuecomment-218818937", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2295", "id": 218818937, "node_id": "MDEyOklzc3VlQ29tbWVudDIxODgxODkzNw==", "user": {"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}, "created_at": "2016-05-12T16:55:46Z", "updated_at": "2016-05-12T16:55:46Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The fast way to solve this is an add an extra op that does <code>x * log y</code> and does the right thing for <code>x = y = 0</code>.  The slow way is to do that in Python via <code>tf.select(tf.equal(x, 0), 0, x * tf.log(y))</code>.  Unfortunate that simplistic code doesn't work out of the box because <code>tf.select</code> doesn't broadcast.</p>\n<p>The simple way to solve it is to use <code>x * tf.log(y + y.dtype.epsilon)</code> in the gradient.  Probably we should just do that.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=238700\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sesse\">@sesse</a>: I'm happy to review if you want to make the change, but won't be able to work on this soon.</p>", "body_text": "The fast way to solve this is an add an extra op that does x * log y and does the right thing for x = y = 0.  The slow way is to do that in Python via tf.select(tf.equal(x, 0), 0, x * tf.log(y)).  Unfortunate that simplistic code doesn't work out of the box because tf.select doesn't broadcast.\nThe simple way to solve it is to use x * tf.log(y + y.dtype.epsilon) in the gradient.  Probably we should just do that.\n@sesse: I'm happy to review if you want to make the change, but won't be able to work on this soon.", "body": "The fast way to solve this is an add an extra op that does `x * log y` and does the right thing for `x = y = 0`.  The slow way is to do that in Python via `tf.select(tf.equal(x, 0), 0, x * tf.log(y))`.  Unfortunate that simplistic code doesn't work out of the box because `tf.select` doesn't broadcast.\n\nThe simple way to solve it is to use `x * tf.log(y + y.dtype.epsilon)` in the gradient.  Probably we should just do that.\n\n@sesse: I'm happy to review if you want to make the change, but won't be able to work on this soon.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4498", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4498/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4498/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4498/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4498", "id": 178173180, "node_id": "MDU6SXNzdWUxNzgxNzMxODA=", "number": 4498, "title": "TF Distributed not using the full network bandwith", "user": {"login": "JianbangZ", "id": 15835199, "node_id": "MDQ6VXNlcjE1ODM1MTk5", "avatar_url": "https://avatars1.githubusercontent.com/u/15835199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JianbangZ", "html_url": "https://github.com/JianbangZ", "followers_url": "https://api.github.com/users/JianbangZ/followers", "following_url": "https://api.github.com/users/JianbangZ/following{/other_user}", "gists_url": "https://api.github.com/users/JianbangZ/gists{/gist_id}", "starred_url": "https://api.github.com/users/JianbangZ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JianbangZ/subscriptions", "organizations_url": "https://api.github.com/users/JianbangZ/orgs", "repos_url": "https://api.github.com/users/JianbangZ/repos", "events_url": "https://api.github.com/users/JianbangZ/events{/privacy}", "received_events_url": "https://api.github.com/users/JianbangZ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-09-20T20:34:44Z", "updated_at": "2016-12-06T09:04:57Z", "closed_at": "2016-11-11T17:44:33Z", "author_association": "NONE", "body_html": "<p>Hi,<br>\nI have a one ps, 4 worker setup (2 workers are in the same machine as ps), I found no matter what batch size I choose, the network usage is always around 1.3 Gbit/s, which leads to very slow performance with small batch size. However, I do have 40 Gbit network, and when I run iperf -s/c between these two machines, I can usually get over 30 Gbit/s speed.</p>\n<p>I am not sure if the issue is in TF implementation or my network setup. but since iperf proved, I doubt it's my infrastructure problem.</p>\n<p>Below is the configuration<br>\nps machine: Ubuntu 14.04, TF v0.10.0<br>\nworker machine: CentOS 7, TF v0.10.0<br>\nPython 2.7<br>\nGPU is Tesla M40</p>", "body_text": "Hi,\nI have a one ps, 4 worker setup (2 workers are in the same machine as ps), I found no matter what batch size I choose, the network usage is always around 1.3 Gbit/s, which leads to very slow performance with small batch size. However, I do have 40 Gbit network, and when I run iperf -s/c between these two machines, I can usually get over 30 Gbit/s speed.\nI am not sure if the issue is in TF implementation or my network setup. but since iperf proved, I doubt it's my infrastructure problem.\nBelow is the configuration\nps machine: Ubuntu 14.04, TF v0.10.0\nworker machine: CentOS 7, TF v0.10.0\nPython 2.7\nGPU is Tesla M40", "body": "Hi,\nI have a one ps, 4 worker setup (2 workers are in the same machine as ps), I found no matter what batch size I choose, the network usage is always around 1.3 Gbit/s, which leads to very slow performance with small batch size. However, I do have 40 Gbit network, and when I run iperf -s/c between these two machines, I can usually get over 30 Gbit/s speed. \n\nI am not sure if the issue is in TF implementation or my network setup. but since iperf proved, I doubt it's my infrastructure problem.  \n\nBelow is the configuration \nps machine: Ubuntu 14.04, TF v0.10.0\nworker machine: CentOS 7, TF v0.10.0 \nPython 2.7\nGPU is Tesla M40 \n"}
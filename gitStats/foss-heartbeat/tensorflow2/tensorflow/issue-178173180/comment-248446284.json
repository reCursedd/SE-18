{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/248446284", "html_url": "https://github.com/tensorflow/tensorflow/issues/4498#issuecomment-248446284", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4498", "id": 248446284, "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODQ0NjI4NA==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-20T21:52:51Z", "updated_at": "2016-09-20T21:52:51Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Are you bottlenecked by CPU?</p>\n<p>On Tue, Sep 20, 2016 at 1:34 PM, Jianbang Zhang <a href=\"mailto:notifications@github.com\">notifications@github.com</a><br>\nwrote:</p>\n<blockquote>\n<p>Hi,<br>\nI have a one ps, 4 worker setup (2 workers are in the same machine as ps),<br>\nI found no matter what batch size I choose, the network usage is always<br>\naround 1.3 Gbit/s, which leads to very slow performance with small batch<br>\nsize. However, I do have 40 Gbit network, and when I run iperf -s/c between<br>\nthese two machines, I can usually get over 30 Gbit/s speed.</p>\n<p>I am not sure if the issue is in TF implementation or my network setup.<br>\nbut since iperf proved, I doubt it's my infrastructure problem.</p>\n<p>Below is the configuration<br>\nps machine: Ubuntu 14.04, TF v0.10.0<br>\nworker machine: CentOS 7, TF v0.10.0<br>\nPython 2.7<br>\nGPU is Tesla M40</p>\n<p>\u2014<br>\nYou are receiving this because you are subscribed to this thread.<br>\nReply to this email directly, view it on GitHub<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"178173180\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4498\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4498/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4498\">#4498</a>, or mute the thread<br>\n<a href=\"https://github.com/notifications/unsubscribe-auth/AABaHFzFkchi5igJlrx18-rAS-FSK3dNks5qsENngaJpZM4KCHMD\">https://github.com/notifications/unsubscribe-auth/AABaHFzFkchi5igJlrx18-rAS-FSK3dNks5qsENngaJpZM4KCHMD</a><br>\n.</p>\n</blockquote>", "body_text": "Are you bottlenecked by CPU?\nOn Tue, Sep 20, 2016 at 1:34 PM, Jianbang Zhang notifications@github.com\nwrote:\n\nHi,\nI have a one ps, 4 worker setup (2 workers are in the same machine as ps),\nI found no matter what batch size I choose, the network usage is always\naround 1.3 Gbit/s, which leads to very slow performance with small batch\nsize. However, I do have 40 Gbit network, and when I run iperf -s/c between\nthese two machines, I can usually get over 30 Gbit/s speed.\nI am not sure if the issue is in TF implementation or my network setup.\nbut since iperf proved, I doubt it's my infrastructure problem.\nBelow is the configuration\nps machine: Ubuntu 14.04, TF v0.10.0\nworker machine: CentOS 7, TF v0.10.0\nPython 2.7\nGPU is Tesla M40\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\n#4498, or mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AABaHFzFkchi5igJlrx18-rAS-FSK3dNks5qsENngaJpZM4KCHMD\n.", "body": "Are you bottlenecked by CPU?\n\nOn Tue, Sep 20, 2016 at 1:34 PM, Jianbang Zhang notifications@github.com\nwrote:\n\n> Hi,\n> I have a one ps, 4 worker setup (2 workers are in the same machine as ps),\n> I found no matter what batch size I choose, the network usage is always\n> around 1.3 Gbit/s, which leads to very slow performance with small batch\n> size. However, I do have 40 Gbit network, and when I run iperf -s/c between\n> these two machines, I can usually get over 30 Gbit/s speed.\n> \n> I am not sure if the issue is in TF implementation or my network setup.\n> but since iperf proved, I doubt it's my infrastructure problem.\n> \n> Below is the configuration\n> ps machine: Ubuntu 14.04, TF v0.10.0\n> worker machine: CentOS 7, TF v0.10.0\n> Python 2.7\n> GPU is Tesla M40\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/4498, or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AABaHFzFkchi5igJlrx18-rAS-FSK3dNks5qsENngaJpZM4KCHMD\n> .\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/413110216", "html_url": "https://github.com/tensorflow/tensorflow/issues/20833#issuecomment-413110216", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20833", "id": 413110216, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzExMDIxNg==", "user": {"login": "ashahba", "id": 12436063, "node_id": "MDQ6VXNlcjEyNDM2MDYz", "avatar_url": "https://avatars3.githubusercontent.com/u/12436063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashahba", "html_url": "https://github.com/ashahba", "followers_url": "https://api.github.com/users/ashahba/followers", "following_url": "https://api.github.com/users/ashahba/following{/other_user}", "gists_url": "https://api.github.com/users/ashahba/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashahba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashahba/subscriptions", "organizations_url": "https://api.github.com/users/ashahba/orgs", "repos_url": "https://api.github.com/users/ashahba/repos", "events_url": "https://api.github.com/users/ashahba/events{/privacy}", "received_events_url": "https://api.github.com/users/ashahba/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-15T06:52:13Z", "updated_at": "2018-08-15T06:52:13Z", "author_association": "NONE", "body_html": "<p>I even tried modifying <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/coordinator.py#L322\">coordinator.py</a> as follows:</p>\n<div class=\"highlight highlight-source-python\"><pre>  <span class=\"pl-k\">def</span> <span class=\"pl-en\">join</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">threads</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">None</span>, <span class=\"pl-smi\">stop_grace_period_secs</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">120</span>,\n           <span class=\"pl-smi\">ignore_live_threads</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>):\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span>Wait for threads to terminate.</span></pre></div>\n<p>and deployed the TfJob again but still same behavior and I get:</p>\n<pre><code>[my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e68-worker-g1qj-1-urvjt] INFO:root:Finished on task 1 in 99.67636966705322 seconds \n[my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e68-worker-g1qj-1-urvjt] INFO:root:Session from worker 1 closed cleanly \n[my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e68-worker-g1qj-0-3oxfi] INFO:tensorflow:Coordinator stopped with threads still running: QueueRunnerThread-dummy_queue-sync_token_q_EnqueueMany \n</code></pre>", "body_text": "I even tried modifying coordinator.py as follows:\n  def join(self, threads=None, stop_grace_period_secs=120,\n           ignore_live_threads=True):\n    \"\"\"Wait for threads to terminate.\nand deployed the TfJob again but still same behavior and I get:\n[my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e68-worker-g1qj-1-urvjt] INFO:root:Finished on task 1 in 99.67636966705322 seconds \n[my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e68-worker-g1qj-1-urvjt] INFO:root:Session from worker 1 closed cleanly \n[my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e68-worker-g1qj-0-3oxfi] INFO:tensorflow:Coordinator stopped with threads still running: QueueRunnerThread-dummy_queue-sync_token_q_EnqueueMany", "body": "I even tried modifying [coordinator.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/coordinator.py#L322) as follows:\r\n```python\r\n  def join(self, threads=None, stop_grace_period_secs=120,\r\n           ignore_live_threads=True):\r\n    \"\"\"Wait for threads to terminate.\r\n```\r\nand deployed the TfJob again but still same behavior and I get:\r\n```\r\n[my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e68-worker-g1qj-1-urvjt] INFO:root:Finished on task 1 in 99.67636966705322 seconds \r\n[my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e68-worker-g1qj-1-urvjt] INFO:root:Session from worker 1 closed cleanly \r\n[my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e68-worker-g1qj-0-3oxfi] INFO:tensorflow:Coordinator stopped with threads still running: QueueRunnerThread-dummy_queue-sync_token_q_EnqueueMany \r\n```"}
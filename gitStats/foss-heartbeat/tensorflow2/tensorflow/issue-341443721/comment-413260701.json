{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/413260701", "html_url": "https://github.com/tensorflow/tensorflow/issues/20833#issuecomment-413260701", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20833", "id": 413260701, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzI2MDcwMQ==", "user": {"login": "ashahba", "id": 12436063, "node_id": "MDQ6VXNlcjEyNDM2MDYz", "avatar_url": "https://avatars3.githubusercontent.com/u/12436063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashahba", "html_url": "https://github.com/ashahba", "followers_url": "https://api.github.com/users/ashahba/followers", "following_url": "https://api.github.com/users/ashahba/following{/other_user}", "gists_url": "https://api.github.com/users/ashahba/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashahba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashahba/subscriptions", "organizations_url": "https://api.github.com/users/ashahba/orgs", "repos_url": "https://api.github.com/users/ashahba/repos", "events_url": "https://api.github.com/users/ashahba/events{/privacy}", "received_events_url": "https://api.github.com/users/ashahba/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-15T16:51:09Z", "updated_at": "2018-08-15T16:51:09Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2715000\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tobegit3hub\">@tobegit3hub</a> Thanks for the update.<br>\nI'm seeing that error in my <code>kubetail</code> logs too, but it seems like for some reason <code>TfOperator</code> won't see that as a show stopper and marks the jobs as <code>Succeeded</code>:<br>\nSo on <code>1.9.0</code> I have (<code>State:                Running</code>):</p>\n<pre><code>$ kubectl describe tfjob my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e685f157da \nName:         my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e685f157da\nNamespace:    ashahba\nLabels:       mlt-app-name=my-tf-dist\nAnnotations:  kubectl.kubernetes.io/last-applied-configuration={\"apiVersion\":\"kubeflow.org/v1alpha1\",\"kind\":\"TFJob\",\"metadata\":{\"annotations\":{},\"labels\":{\"mlt-app-name\":\"my-tf-dist\"},\"name\":\"my-tf-dist-7bd9faec-bd...\nAPI Version:  kubeflow.org/v1alpha1\nKind:         TFJob\nMetadata:\n  Cluster Name:        \n  Creation Timestamp:  2018-08-15T06:43:54Z\n  Generation:          1\n  Resource Version:    36154858\n  Self Link:           /apis/kubeflow.org/v1alpha1/namespaces/ashahba/tfjobs/my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e685f157da\n  UID:                 93d30628-a056-11e8-8f32-42010a8a0062\nSpec:\n  Runtime Id:  g1qj\n  Replica Specs:\n    Replicas:  1\n    Template:\n      Metadata:\n        Creation Timestamp:  &lt;nil&gt;\n      Spec:\n        Containers:\n          Image:  &lt;MY_IMAGE_REPOSITORY&gt;/my-tf-dist:ee01f210-692a-4f5f-9211-1b57ddc35250\n          Name:   tensorflow\n          Resources:\n        Restart Policy:  OnFailure\n    Tf Port:             2222\n    Tf Replica Type:     PS\n    Replicas:            2\n    Template:\n      Metadata:\n        Creation Timestamp:  &lt;nil&gt;\n      Spec:\n        Containers:\n          Image:  &lt;MY_IMAGE_REPOSITORY&gt;/my-tf-dist:ee01f210-692a-4f5f-9211-1b57ddc35250\n          Name:   tensorflow\n          Resources:\n        Restart Policy:  OnFailure\n    Tf Port:             2222\n    Tf Replica Type:     WORKER\n  Termination Policy:\n    Chief:\n      Replica Index:  0\n      Replica Name:   WORKER\n  Tf Image:           tensorflow/tensorflow:1.3.0\nStatus:\n  Phase:   Running\n  Reason:  \n  Replica Statuses:\n    Replicas States:\n      Running:            1\n    State:                Running\n    Tf _ Replica _ Type:  PS\n    Replicas States:\n      Running:            1\n      Succeeded:          1\n    State:                Running\n    Tf _ Replica _ Type:  WORKER\n  State:                  Running\nEvents:                   &lt;none&gt;\n</code></pre>\n<p>and on <code>1.8.0</code> we get (<code>State:                  Succeeded</code>):</p>\n<pre><code>$ kubectl describe tfjob my-tf-dist-edb61c5c-6ef4-4d90-baac-752956f59978\nName:         my-tf-dist-edb61c5c-6ef4-4d90-baac-752956f59978\nNamespace:    ashahba\nLabels:       mlt-app-name=my-tf-dist\nAnnotations:  kubectl.kubernetes.io/last-applied-configuration={\"apiVersion\":\"kubeflow.org/v1alpha1\",\"kind\":\"TFJob\",\"metadata\":{\"annotations\":{},\"labels\":{\"mlt-app-name\":\"my-tf-dist\"},\"name\":\"my-tf-dist-edb61c5c-6e...\nAPI Version:  kubeflow.org/v1alpha1\nKind:         TFJob\nMetadata:\n  Cluster Name:        \n  Creation Timestamp:  2018-08-15T07:03:24Z\n  Generation:          1\n  Resource Version:    36158966\n  Self Link:           /apis/kubeflow.org/v1alpha1/namespaces/ashahba/tfjobs/my-tf-dist-edb61c5c-6ef4-4d90-baac-752956f59978\n  UID:                 4d73f22e-a059-11e8-8f32-42010a8a0062\nSpec:\n  Runtime Id:  qt9l\n  Replica Specs:\n    Replicas:  1\n    Template:\n      Metadata:\n        Creation Timestamp:  &lt;nil&gt;\n      Spec:\n        Containers:\n          Image:  gcr.io/constant-cubist-173123/my-tf-dist:15e9dd11-22a0-45e0-9a8e-9f72bd445703\n          Name:   tensorflow\n          Resources:\n        Restart Policy:  OnFailure\n    Tf Port:             2222\n    Tf Replica Type:     PS\n    Replicas:            2\n    Template:\n      Metadata:\n        Creation Timestamp:  &lt;nil&gt;\n      Spec:\n        Containers:\n          Image:  &lt;MY_IMAGE_REPOSITORY&gt;/my-tf-dist:15e9dd11-22a0-45e0-9a8e-9f72bd445703\n          Name:   tensorflow\n          Resources:\n        Restart Policy:  OnFailure\n    Tf Port:             2222\n    Tf Replica Type:     WORKER\n  Termination Policy:\n    Chief:\n      Replica Index:  0\n      Replica Name:   WORKER\n  Tf Image:           tensorflow/tensorflow:1.3.0\nStatus:\n  Phase:   Done\n  Reason:  \n  Replica Statuses:\n    Replicas States:\n      Running:            1\n    State:                Running\n    Tf _ Replica _ Type:  PS\n    Replicas States:\n      Running:            1\n      Succeeded:          1\n    State:                Running\n    Tf _ Replica _ Type:  WORKER\n  State:                  Succeeded\nEvents:                   &lt;none&gt;\n</code></pre>\n<p>and we have the first one with</p>", "body_text": "@tobegit3hub Thanks for the update.\nI'm seeing that error in my kubetail logs too, but it seems like for some reason TfOperator won't see that as a show stopper and marks the jobs as Succeeded:\nSo on 1.9.0 I have (State:                Running):\n$ kubectl describe tfjob my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e685f157da \nName:         my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e685f157da\nNamespace:    ashahba\nLabels:       mlt-app-name=my-tf-dist\nAnnotations:  kubectl.kubernetes.io/last-applied-configuration={\"apiVersion\":\"kubeflow.org/v1alpha1\",\"kind\":\"TFJob\",\"metadata\":{\"annotations\":{},\"labels\":{\"mlt-app-name\":\"my-tf-dist\"},\"name\":\"my-tf-dist-7bd9faec-bd...\nAPI Version:  kubeflow.org/v1alpha1\nKind:         TFJob\nMetadata:\n  Cluster Name:        \n  Creation Timestamp:  2018-08-15T06:43:54Z\n  Generation:          1\n  Resource Version:    36154858\n  Self Link:           /apis/kubeflow.org/v1alpha1/namespaces/ashahba/tfjobs/my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e685f157da\n  UID:                 93d30628-a056-11e8-8f32-42010a8a0062\nSpec:\n  Runtime Id:  g1qj\n  Replica Specs:\n    Replicas:  1\n    Template:\n      Metadata:\n        Creation Timestamp:  <nil>\n      Spec:\n        Containers:\n          Image:  <MY_IMAGE_REPOSITORY>/my-tf-dist:ee01f210-692a-4f5f-9211-1b57ddc35250\n          Name:   tensorflow\n          Resources:\n        Restart Policy:  OnFailure\n    Tf Port:             2222\n    Tf Replica Type:     PS\n    Replicas:            2\n    Template:\n      Metadata:\n        Creation Timestamp:  <nil>\n      Spec:\n        Containers:\n          Image:  <MY_IMAGE_REPOSITORY>/my-tf-dist:ee01f210-692a-4f5f-9211-1b57ddc35250\n          Name:   tensorflow\n          Resources:\n        Restart Policy:  OnFailure\n    Tf Port:             2222\n    Tf Replica Type:     WORKER\n  Termination Policy:\n    Chief:\n      Replica Index:  0\n      Replica Name:   WORKER\n  Tf Image:           tensorflow/tensorflow:1.3.0\nStatus:\n  Phase:   Running\n  Reason:  \n  Replica Statuses:\n    Replicas States:\n      Running:            1\n    State:                Running\n    Tf _ Replica _ Type:  PS\n    Replicas States:\n      Running:            1\n      Succeeded:          1\n    State:                Running\n    Tf _ Replica _ Type:  WORKER\n  State:                  Running\nEvents:                   <none>\n\nand on 1.8.0 we get (State:                  Succeeded):\n$ kubectl describe tfjob my-tf-dist-edb61c5c-6ef4-4d90-baac-752956f59978\nName:         my-tf-dist-edb61c5c-6ef4-4d90-baac-752956f59978\nNamespace:    ashahba\nLabels:       mlt-app-name=my-tf-dist\nAnnotations:  kubectl.kubernetes.io/last-applied-configuration={\"apiVersion\":\"kubeflow.org/v1alpha1\",\"kind\":\"TFJob\",\"metadata\":{\"annotations\":{},\"labels\":{\"mlt-app-name\":\"my-tf-dist\"},\"name\":\"my-tf-dist-edb61c5c-6e...\nAPI Version:  kubeflow.org/v1alpha1\nKind:         TFJob\nMetadata:\n  Cluster Name:        \n  Creation Timestamp:  2018-08-15T07:03:24Z\n  Generation:          1\n  Resource Version:    36158966\n  Self Link:           /apis/kubeflow.org/v1alpha1/namespaces/ashahba/tfjobs/my-tf-dist-edb61c5c-6ef4-4d90-baac-752956f59978\n  UID:                 4d73f22e-a059-11e8-8f32-42010a8a0062\nSpec:\n  Runtime Id:  qt9l\n  Replica Specs:\n    Replicas:  1\n    Template:\n      Metadata:\n        Creation Timestamp:  <nil>\n      Spec:\n        Containers:\n          Image:  gcr.io/constant-cubist-173123/my-tf-dist:15e9dd11-22a0-45e0-9a8e-9f72bd445703\n          Name:   tensorflow\n          Resources:\n        Restart Policy:  OnFailure\n    Tf Port:             2222\n    Tf Replica Type:     PS\n    Replicas:            2\n    Template:\n      Metadata:\n        Creation Timestamp:  <nil>\n      Spec:\n        Containers:\n          Image:  <MY_IMAGE_REPOSITORY>/my-tf-dist:15e9dd11-22a0-45e0-9a8e-9f72bd445703\n          Name:   tensorflow\n          Resources:\n        Restart Policy:  OnFailure\n    Tf Port:             2222\n    Tf Replica Type:     WORKER\n  Termination Policy:\n    Chief:\n      Replica Index:  0\n      Replica Name:   WORKER\n  Tf Image:           tensorflow/tensorflow:1.3.0\nStatus:\n  Phase:   Done\n  Reason:  \n  Replica Statuses:\n    Replicas States:\n      Running:            1\n    State:                Running\n    Tf _ Replica _ Type:  PS\n    Replicas States:\n      Running:            1\n      Succeeded:          1\n    State:                Running\n    Tf _ Replica _ Type:  WORKER\n  State:                  Succeeded\nEvents:                   <none>\n\nand we have the first one with", "body": "@tobegit3hub Thanks for the update.\r\nI'm seeing that error in my `kubetail` logs too, but it seems like for some reason `TfOperator` won't see that as a show stopper and marks the jobs as `Succeeded`:\r\nSo on `1.9.0` I have (`State:                Running`):\r\n```\r\n$ kubectl describe tfjob my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e685f157da \r\nName:         my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e685f157da\r\nNamespace:    ashahba\r\nLabels:       mlt-app-name=my-tf-dist\r\nAnnotations:  kubectl.kubernetes.io/last-applied-configuration={\"apiVersion\":\"kubeflow.org/v1alpha1\",\"kind\":\"TFJob\",\"metadata\":{\"annotations\":{},\"labels\":{\"mlt-app-name\":\"my-tf-dist\"},\"name\":\"my-tf-dist-7bd9faec-bd...\r\nAPI Version:  kubeflow.org/v1alpha1\r\nKind:         TFJob\r\nMetadata:\r\n  Cluster Name:        \r\n  Creation Timestamp:  2018-08-15T06:43:54Z\r\n  Generation:          1\r\n  Resource Version:    36154858\r\n  Self Link:           /apis/kubeflow.org/v1alpha1/namespaces/ashahba/tfjobs/my-tf-dist-7bd9faec-bd67-41cc-a9c2-86e685f157da\r\n  UID:                 93d30628-a056-11e8-8f32-42010a8a0062\r\nSpec:\r\n  Runtime Id:  g1qj\r\n  Replica Specs:\r\n    Replicas:  1\r\n    Template:\r\n      Metadata:\r\n        Creation Timestamp:  <nil>\r\n      Spec:\r\n        Containers:\r\n          Image:  <MY_IMAGE_REPOSITORY>/my-tf-dist:ee01f210-692a-4f5f-9211-1b57ddc35250\r\n          Name:   tensorflow\r\n          Resources:\r\n        Restart Policy:  OnFailure\r\n    Tf Port:             2222\r\n    Tf Replica Type:     PS\r\n    Replicas:            2\r\n    Template:\r\n      Metadata:\r\n        Creation Timestamp:  <nil>\r\n      Spec:\r\n        Containers:\r\n          Image:  <MY_IMAGE_REPOSITORY>/my-tf-dist:ee01f210-692a-4f5f-9211-1b57ddc35250\r\n          Name:   tensorflow\r\n          Resources:\r\n        Restart Policy:  OnFailure\r\n    Tf Port:             2222\r\n    Tf Replica Type:     WORKER\r\n  Termination Policy:\r\n    Chief:\r\n      Replica Index:  0\r\n      Replica Name:   WORKER\r\n  Tf Image:           tensorflow/tensorflow:1.3.0\r\nStatus:\r\n  Phase:   Running\r\n  Reason:  \r\n  Replica Statuses:\r\n    Replicas States:\r\n      Running:            1\r\n    State:                Running\r\n    Tf _ Replica _ Type:  PS\r\n    Replicas States:\r\n      Running:            1\r\n      Succeeded:          1\r\n    State:                Running\r\n    Tf _ Replica _ Type:  WORKER\r\n  State:                  Running\r\nEvents:                   <none>\r\n```\r\nand on `1.8.0` we get (`State:                  Succeeded`):\r\n```\r\n$ kubectl describe tfjob my-tf-dist-edb61c5c-6ef4-4d90-baac-752956f59978\r\nName:         my-tf-dist-edb61c5c-6ef4-4d90-baac-752956f59978\r\nNamespace:    ashahba\r\nLabels:       mlt-app-name=my-tf-dist\r\nAnnotations:  kubectl.kubernetes.io/last-applied-configuration={\"apiVersion\":\"kubeflow.org/v1alpha1\",\"kind\":\"TFJob\",\"metadata\":{\"annotations\":{},\"labels\":{\"mlt-app-name\":\"my-tf-dist\"},\"name\":\"my-tf-dist-edb61c5c-6e...\r\nAPI Version:  kubeflow.org/v1alpha1\r\nKind:         TFJob\r\nMetadata:\r\n  Cluster Name:        \r\n  Creation Timestamp:  2018-08-15T07:03:24Z\r\n  Generation:          1\r\n  Resource Version:    36158966\r\n  Self Link:           /apis/kubeflow.org/v1alpha1/namespaces/ashahba/tfjobs/my-tf-dist-edb61c5c-6ef4-4d90-baac-752956f59978\r\n  UID:                 4d73f22e-a059-11e8-8f32-42010a8a0062\r\nSpec:\r\n  Runtime Id:  qt9l\r\n  Replica Specs:\r\n    Replicas:  1\r\n    Template:\r\n      Metadata:\r\n        Creation Timestamp:  <nil>\r\n      Spec:\r\n        Containers:\r\n          Image:  gcr.io/constant-cubist-173123/my-tf-dist:15e9dd11-22a0-45e0-9a8e-9f72bd445703\r\n          Name:   tensorflow\r\n          Resources:\r\n        Restart Policy:  OnFailure\r\n    Tf Port:             2222\r\n    Tf Replica Type:     PS\r\n    Replicas:            2\r\n    Template:\r\n      Metadata:\r\n        Creation Timestamp:  <nil>\r\n      Spec:\r\n        Containers:\r\n          Image:  <MY_IMAGE_REPOSITORY>/my-tf-dist:15e9dd11-22a0-45e0-9a8e-9f72bd445703\r\n          Name:   tensorflow\r\n          Resources:\r\n        Restart Policy:  OnFailure\r\n    Tf Port:             2222\r\n    Tf Replica Type:     WORKER\r\n  Termination Policy:\r\n    Chief:\r\n      Replica Index:  0\r\n      Replica Name:   WORKER\r\n  Tf Image:           tensorflow/tensorflow:1.3.0\r\nStatus:\r\n  Phase:   Done\r\n  Reason:  \r\n  Replica Statuses:\r\n    Replicas States:\r\n      Running:            1\r\n    State:                Running\r\n    Tf _ Replica _ Type:  PS\r\n    Replicas States:\r\n      Running:            1\r\n      Succeeded:          1\r\n    State:                Running\r\n    Tf _ Replica _ Type:  WORKER\r\n  State:                  Succeeded\r\nEvents:                   <none>\r\n```\r\n\r\nand we have the first one with "}
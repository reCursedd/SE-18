{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/437761378", "html_url": "https://github.com/tensorflow/tensorflow/pull/23152#issuecomment-437761378", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23152", "id": 437761378, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzc2MTM3OA==", "user": {"login": "wenxizhu", "id": 33611326, "node_id": "MDQ6VXNlcjMzNjExMzI2", "avatar_url": "https://avatars1.githubusercontent.com/u/33611326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wenxizhu", "html_url": "https://github.com/wenxizhu", "followers_url": "https://api.github.com/users/wenxizhu/followers", "following_url": "https://api.github.com/users/wenxizhu/following{/other_user}", "gists_url": "https://api.github.com/users/wenxizhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wenxizhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wenxizhu/subscriptions", "organizations_url": "https://api.github.com/users/wenxizhu/orgs", "repos_url": "https://api.github.com/users/wenxizhu/repos", "events_url": "https://api.github.com/users/wenxizhu/events{/privacy}", "received_events_url": "https://api.github.com/users/wenxizhu/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-12T05:30:55Z", "updated_at": "2018-11-12T05:30:55Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=38085909\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/penpornk\">@penpornk</a> Your modifications adopted, and also clang-format-3.8 applied.</p>\n<p>And about the test cases, I'm afraid there is no way to add such test cases, because:</p>\n<ol>\n<li>As you know, \"transpose-removal\" is a very constrained pattern, those 3 test cases won't take effect on this pattern;</li>\n<li>What we need is actually some \"dummy\" patterns, which have \"multiple input\" and \"multiple output\", and don't exist in our existing \"mlk_layout_pass.cc \" code. Any attempt to add these kind of \"dummy\" patterns through testing code will be destructive to existing \"mkl_layout_pass.cc\" code, at least a bunch of interfaces have to be added and implemented.</li>\n</ol>\n<p>So can we leave these test cases to be added when some day a real-world pattern is met? That does make more sense I think.</p>", "body_text": "@penpornk Your modifications adopted, and also clang-format-3.8 applied.\nAnd about the test cases, I'm afraid there is no way to add such test cases, because:\n\nAs you know, \"transpose-removal\" is a very constrained pattern, those 3 test cases won't take effect on this pattern;\nWhat we need is actually some \"dummy\" patterns, which have \"multiple input\" and \"multiple output\", and don't exist in our existing \"mlk_layout_pass.cc \" code. Any attempt to add these kind of \"dummy\" patterns through testing code will be destructive to existing \"mkl_layout_pass.cc\" code, at least a bunch of interfaces have to be added and implemented.\n\nSo can we leave these test cases to be added when some day a real-world pattern is met? That does make more sense I think.", "body": "@penpornk Your modifications adopted, and also clang-format-3.8 applied. \r\n\r\nAnd about the test cases, I'm afraid there is no way to add such test cases, because:\r\n1. As you know, \"transpose-removal\" is a very constrained pattern, those 3 test cases won't take effect on this pattern;\r\n2. What we need is actually some \"dummy\" patterns, which have \"multiple input\" and \"multiple output\", and don't exist in our existing \"mlk_layout_pass.cc \" code. Any attempt to add these kind of \"dummy\" patterns through testing code will be destructive to existing \"mkl_layout_pass.cc\" code, at least a bunch of interfaces have to be added and implemented.\r\n\r\nSo can we leave these test cases to be added when some day a real-world pattern is met? That does make more sense I think."}
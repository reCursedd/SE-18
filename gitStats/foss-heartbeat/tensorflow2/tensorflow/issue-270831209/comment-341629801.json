{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/341629801", "html_url": "https://github.com/tensorflow/tensorflow/issues/14193#issuecomment-341629801", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14193", "id": 341629801, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTYyOTgwMQ==", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-03T06:25:17Z", "updated_at": "2017-11-03T06:25:17Z", "author_association": "MEMBER", "body_html": "<p>It's hard to help without the details asked for in the new issue template (which includes information about the version of TensorFlow being used) and detailed instructions to reproduce the problem (ideally ones which do not involve having to install additional libraries, scan through some other code  and manually merge snippets).</p>\n<p>I tried the following in TensorFlow 1.4.0 and 1.3.0 but was unable to reproduce the problem you observed:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">save</span>():\n  W_conv1 <span class=\"pl-k\">=</span> tf.Variable(tf.zeros([<span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">4</span>, <span class=\"pl-c1\">32</span>]), <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>W_conv1<span class=\"pl-pds\">'</span></span>)\n  saver <span class=\"pl-k\">=</span> tf.train.Saver()\n  <span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    sess.run(tf.global_variables_initializer())\n    saver.save(sess, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>/tmp/foo<span class=\"pl-pds\">'</span></span>)\n\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">load</span>():\n  <span class=\"pl-k\">with</span> tf.Graph().as_default():\n    saver <span class=\"pl-k\">=</span> tf.train.import_meta_graph(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/tmp/foo.meta<span class=\"pl-pds\">'</span></span>)\n    <span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n      saver.restore(sess, tf.train.latest_checkpoint(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/tmp<span class=\"pl-pds\">'</span></span>))\n      \n      graph <span class=\"pl-k\">=</span> tf.get_default_graph()\n      <span class=\"pl-c1\">print</span>(graph.get_tensor_by_name(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>W_conv1:0<span class=\"pl-pds\">\"</span></span>))\n\nsave()\ntf.reset_default_graph()\nload()</pre></div>\n<p>Perhaps this isn't accurately reproducing what you're trying. If you could provide a similar self-contained snippet, that would enable us to debug and help.</p>", "body_text": "It's hard to help without the details asked for in the new issue template (which includes information about the version of TensorFlow being used) and detailed instructions to reproduce the problem (ideally ones which do not involve having to install additional libraries, scan through some other code  and manually merge snippets).\nI tried the following in TensorFlow 1.4.0 and 1.3.0 but was unable to reproduce the problem you observed:\nimport tensorflow as tf\n\ndef save():\n  W_conv1 = tf.Variable(tf.zeros([8, 8, 4, 32]), name='W_conv1')\n  saver = tf.train.Saver()\n  with tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n    saver.save(sess, '/tmp/foo')\n\ndef load():\n  with tf.Graph().as_default():\n    saver = tf.train.import_meta_graph('/tmp/foo.meta')\n    with tf.Session() as sess:\n      saver.restore(sess, tf.train.latest_checkpoint('/tmp'))\n      \n      graph = tf.get_default_graph()\n      print(graph.get_tensor_by_name(\"W_conv1:0\"))\n\nsave()\ntf.reset_default_graph()\nload()\nPerhaps this isn't accurately reproducing what you're trying. If you could provide a similar self-contained snippet, that would enable us to debug and help.", "body": "It's hard to help without the details asked for in the new issue template (which includes information about the version of TensorFlow being used) and detailed instructions to reproduce the problem (ideally ones which do not involve having to install additional libraries, scan through some other code  and manually merge snippets).\r\n\r\nI tried the following in TensorFlow 1.4.0 and 1.3.0 but was unable to reproduce the problem you observed:\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\ndef save():\r\n  W_conv1 = tf.Variable(tf.zeros([8, 8, 4, 32]), name='W_conv1')\r\n  saver = tf.train.Saver()\r\n  with tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    saver.save(sess, '/tmp/foo')\r\n\r\ndef load():\r\n  with tf.Graph().as_default():\r\n    saver = tf.train.import_meta_graph('/tmp/foo.meta')\r\n    with tf.Session() as sess:\r\n      saver.restore(sess, tf.train.latest_checkpoint('/tmp'))\r\n      \r\n      graph = tf.get_default_graph()\r\n      print(graph.get_tensor_by_name(\"W_conv1:0\"))\r\n\r\nsave()\r\ntf.reset_default_graph()\r\nload()\r\n```\r\n\r\nPerhaps this isn't accurately reproducing what you're trying. If you could provide a similar self-contained snippet, that would enable us to debug and help."}
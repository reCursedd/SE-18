{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7896", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7896/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7896/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7896/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7896", "id": 210303549, "node_id": "MDU6SXNzdWUyMTAzMDM1NDk=", "number": 7896, "title": "Issue with while_loop in tf.scan", "user": {"login": "RiaanZoetmulder", "id": 9432938, "node_id": "MDQ6VXNlcjk0MzI5Mzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/9432938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RiaanZoetmulder", "html_url": "https://github.com/RiaanZoetmulder", "followers_url": "https://api.github.com/users/RiaanZoetmulder/followers", "following_url": "https://api.github.com/users/RiaanZoetmulder/following{/other_user}", "gists_url": "https://api.github.com/users/RiaanZoetmulder/gists{/gist_id}", "starred_url": "https://api.github.com/users/RiaanZoetmulder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RiaanZoetmulder/subscriptions", "organizations_url": "https://api.github.com/users/RiaanZoetmulder/orgs", "repos_url": "https://api.github.com/users/RiaanZoetmulder/repos", "events_url": "https://api.github.com/users/RiaanZoetmulder/events{/privacy}", "received_events_url": "https://api.github.com/users/RiaanZoetmulder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-02-26T09:43:07Z", "updated_at": "2017-09-08T04:55:12Z", "closed_at": "2017-09-08T04:55:12Z", "author_association": "NONE", "body_html": "<p>Hello,</p>\n<p>I have recently updated to the newest version of tensorflow (v1.0) and am suddenly having some trouble when I use tf.scan.</p>\n<p>I have already tried setting shapes for all of the variables. Which didn't work! Don't really know what else i could do since that is the solution that is recommended for the error in tf.while_loop...</p>\n<p>Here is the code snippet:</p>\n<p><code>h, z = tf.scan( self.sample, x, initializer = [ h0, tf.expand_dims(z0, 1 )] )</code></p>\n<p>Where h0 is [256, 90], z0 is expanded to [256, 1] and x is [None, 256, 400]. It worked in the previous version so I am assuming the trouble is related to the tf.scan code.</p>\n<p>ValueError: The shape for scan/while/Merge_2:0 is not an invariant for the loop. It enters the loop with shape (256, 1), but has shape (256,) after one iteration. Provide shape invariants using either the <code>shape_invariants</code> argument of tf.while_loop or set_shape() on the loop variables.</p>", "body_text": "Hello,\nI have recently updated to the newest version of tensorflow (v1.0) and am suddenly having some trouble when I use tf.scan.\nI have already tried setting shapes for all of the variables. Which didn't work! Don't really know what else i could do since that is the solution that is recommended for the error in tf.while_loop...\nHere is the code snippet:\nh, z = tf.scan( self.sample, x, initializer = [ h0, tf.expand_dims(z0, 1 )] )\nWhere h0 is [256, 90], z0 is expanded to [256, 1] and x is [None, 256, 400]. It worked in the previous version so I am assuming the trouble is related to the tf.scan code.\nValueError: The shape for scan/while/Merge_2:0 is not an invariant for the loop. It enters the loop with shape (256, 1), but has shape (256,) after one iteration. Provide shape invariants using either the shape_invariants argument of tf.while_loop or set_shape() on the loop variables.", "body": "Hello,\r\n\r\nI have recently updated to the newest version of tensorflow (v1.0) and am suddenly having some trouble when I use tf.scan.\r\n\r\nI have already tried setting shapes for all of the variables. Which didn't work! Don't really know what else i could do since that is the solution that is recommended for the error in tf.while_loop...\r\n\r\nHere is the code snippet:\r\n\r\n`\r\nh, z = tf.scan(\r\n                    self.sample,\r\n                    x,\r\n                    initializer = [ h0, tf.expand_dims(z0, 1 )]\r\n                    )\r\n`\r\n\r\nWhere h0 is [256, 90], z0 is expanded to [256, 1] and x is [None, 256, 400]. It worked in the previous version so I am assuming the trouble is related to the tf.scan code.\r\n\r\n\r\nValueError: The shape for scan/while/Merge_2:0 is not an invariant for the loop. It enters the loop with shape (256, 1), but has shape (256,) after one iteration. Provide shape invariants using either the `shape_invariants` argument of tf.while_loop or set_shape() on the loop variables.\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/399732525", "html_url": "https://github.com/tensorflow/tensorflow/issues/4614#issuecomment-399732525", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4614", "id": 399732525, "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTczMjUyNQ==", "user": {"login": "haamoon", "id": 8838247, "node_id": "MDQ6VXNlcjg4MzgyNDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8838247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haamoon", "html_url": "https://github.com/haamoon", "followers_url": "https://api.github.com/users/haamoon/followers", "following_url": "https://api.github.com/users/haamoon/following{/other_user}", "gists_url": "https://api.github.com/users/haamoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/haamoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haamoon/subscriptions", "organizations_url": "https://api.github.com/users/haamoon/orgs", "repos_url": "https://api.github.com/users/haamoon/repos", "events_url": "https://api.github.com/users/haamoon/events{/privacy}", "received_events_url": "https://api.github.com/users/haamoon/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-24T06:16:34Z", "updated_at": "2018-06-24T06:23:36Z", "author_association": "NONE", "body_html": "<p>This code gives the equivalent functionality and does not require the input array to be sorted:</p>\n<pre><code>def unique_with_inverse(x):\n  y, idx = tf.unique(x)\n  num_segments = tf.shape(y)[0]\n  num_elems = tf.shape(x)[0]\n  return (y, idx,  tf.unsorted_segment_min(tf.range(num_elems), idx, num_segments))\n</code></pre>\n<p>I slightly changed <a href=\"https://stackoverflow.com/questions/38233821/merge-duplicate-indices-in-a-sparse-tensor\" rel=\"nofollow\">this</a>.</p>", "body_text": "This code gives the equivalent functionality and does not require the input array to be sorted:\ndef unique_with_inverse(x):\n  y, idx = tf.unique(x)\n  num_segments = tf.shape(y)[0]\n  num_elems = tf.shape(x)[0]\n  return (y, idx,  tf.unsorted_segment_min(tf.range(num_elems), idx, num_segments))\n\nI slightly changed this.", "body": "This code gives the equivalent functionality and does not require the input array to be sorted:\r\n```\r\ndef unique_with_inverse(x):\r\n  y, idx = tf.unique(x)\r\n  num_segments = tf.shape(y)[0]\r\n  num_elems = tf.shape(x)[0]\r\n  return (y, idx,  tf.unsorted_segment_min(tf.range(num_elems), idx, num_segments))\r\n```\r\nI slightly changed [this](https://stackoverflow.com/questions/38233821/merge-duplicate-indices-in-a-sparse-tensor)."}
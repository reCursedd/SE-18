{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/270573258", "html_url": "https://github.com/tensorflow/tensorflow/issues/6653#issuecomment-270573258", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6653", "id": 270573258, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDU3MzI1OA==", "user": {"login": "DjangoPeng", "id": 16943353, "node_id": "MDQ6VXNlcjE2OTQzMzUz", "avatar_url": "https://avatars3.githubusercontent.com/u/16943353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DjangoPeng", "html_url": "https://github.com/DjangoPeng", "followers_url": "https://api.github.com/users/DjangoPeng/followers", "following_url": "https://api.github.com/users/DjangoPeng/following{/other_user}", "gists_url": "https://api.github.com/users/DjangoPeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/DjangoPeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DjangoPeng/subscriptions", "organizations_url": "https://api.github.com/users/DjangoPeng/orgs", "repos_url": "https://api.github.com/users/DjangoPeng/repos", "events_url": "https://api.github.com/users/DjangoPeng/events{/privacy}", "received_events_url": "https://api.github.com/users/DjangoPeng/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-05T06:25:03Z", "updated_at": "2017-01-05T06:26:12Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19201532\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zakizhou\">@zakizhou</a> Thanks for your advice. I tried it, and got some interesting and unreasonable results.</p>\n<h3>Write graph</h3>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\na <span class=\"pl-k\">=</span> tf.Variable(<span class=\"pl-c1\">1</span>, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>a<span class=\"pl-pds\">'</span></span>, <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.int32)\nb <span class=\"pl-k\">=</span> tf.Variable(<span class=\"pl-c1\">2</span>, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>b<span class=\"pl-pds\">'</span></span>, <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.int32)\ninit_op <span class=\"pl-k\">=</span> tf.global_variables_initializer() \nsess <span class=\"pl-k\">=</span> tf.Session()\ntf.train.write_graph(sess.graph, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>/tmp/PJT<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>test.pb<span class=\"pl-pds\">'</span></span>, <span class=\"pl-v\">as_text</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>)</pre></div>\n<h3>Import graph</h3>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">from</span> tensorflow.core.framework <span class=\"pl-k\">import</span> graph_pb2\n\ngraph_pb <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>/tmp/PJT/test.pb<span class=\"pl-pds\">'</span></span>\ngraph_def <span class=\"pl-k\">=</span> graph_pb2.GraphDef()\n<span class=\"pl-k\">with</span> <span class=\"pl-c1\">open</span>(graph_pb, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>rb<span class=\"pl-pds\">'</span></span>) <span class=\"pl-k\">as</span> f:\n    graph_def.ParseFromString(f.read())\ntf.import_graph_def(graph_def, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span><span class=\"pl-pds\">'</span></span>)\nsess <span class=\"pl-k\">=</span> tf.Session()\na <span class=\"pl-k\">=</span> sess.graph.get_tensor_by_name(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>a:0<span class=\"pl-pds\">'</span></span>)\nd <span class=\"pl-k\">=</span> sess.graph.as_graph_element(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>d:0<span class=\"pl-pds\">'</span></span>)\ninit_op <span class=\"pl-k\">=</span> sess.graph.get_operation_by_name(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>init<span class=\"pl-pds\">'</span></span>)\n\nsess.run(init_op)\nsess.run(a)</pre></div>\n<p>At first time I run the <code>import graph</code> snippet, it raise same error as below:</p>\n<pre><code>FailedPreconditionError: Attempting to use uninitialized value b\n\t [[Node: b/read = Identity[T=DT_INT32, _class=[\"loc:@b\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](b)]]\n\t [[Node: b/Assign/_12 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_14_b/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\n\nCaused by op u'b/read', defined at:\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/__main__.py\", line 3, in &lt;module&gt;\n    app.launch_new_instance()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/traitlets/config/application.py\", line 658, in launch_instance\n    app.start()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelapp.py\", line 474, in start\n    ioloop.IOLoop.instance().start()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/ioloop.py\", line 177, in start\n    super(ZMQIOLoop, self).start()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tornado/ioloop.py\", line 887, in start\n    handler_func(fd_obj, events)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 440, in _handle_events\n    self._handle_recv()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 472, in _handle_recv\n    self._run_callback(callback, msg)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 414, in _run_callback\n    callback(*args, **kwargs)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelbase.py\", line 276, in dispatcher\n    return self.dispatch_shell(stream, msg)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelbase.py\", line 228, in dispatch_shell\n    handler(stream, idents, msg)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelbase.py\", line 390, in execute_request\n    user_expressions, allow_stdin)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/ipkernel.py\", line 196, in do_execute\n    res = shell.run_cell(code, store_history=store_history, silent=silent)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/zmqshell.py\", line 501, in run_cell\n    return super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2717, in run_cell\n    interactivity=interactivity, compiler=compiler, result=result)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2827, in run_ast_nodes\n    if self.run_code(code, result):\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2881, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"&lt;ipython-input-3-e62bd92e6511&gt;\", line 1, in &lt;module&gt;\n    tf.import_graph_def(graph_def, name='')\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tensorflow/python/framework/importer.py\", line 285, in import_graph_def\n    op_def=op_def)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\n    self._traceback = _extract_stack()\n\nFailedPreconditionError (see above for traceback): Attempting to use uninitialized value b\n\t [[Node: b/read = Identity[T=DT_INT32, _class=[\"loc:@b\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](b)]]\n\t [[Node: b/Assign/_12 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_14_b/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\n</code></pre>\n<p>The most unreasonable thing is when I separately run <code>sess.run(init_op)</code> again, everything goes well. I don't know why it works, and I think you can reproduce it.</p>\n<h3>Run again</h3>\n<div class=\"highlight highlight-source-python\"><pre>sess.run(init_op)\nsess.run(a)</pre></div>\n<p>output:</p>\n<pre><code>1\n</code></pre>", "body_text": "@zakizhou Thanks for your advice. I tried it, and got some interesting and unreasonable results.\nWrite graph\nimport tensorflow as tf\na = tf.Variable(1, name='a', dtype=tf.int32)\nb = tf.Variable(2, name='b', dtype=tf.int32)\ninit_op = tf.global_variables_initializer() \nsess = tf.Session()\ntf.train.write_graph(sess.graph, '/tmp/PJT', 'test.pb', as_text=False)\nImport graph\nimport tensorflow as tf\nfrom tensorflow.core.framework import graph_pb2\n\ngraph_pb = '/tmp/PJT/test.pb'\ngraph_def = graph_pb2.GraphDef()\nwith open(graph_pb, 'rb') as f:\n    graph_def.ParseFromString(f.read())\ntf.import_graph_def(graph_def, name='')\nsess = tf.Session()\na = sess.graph.get_tensor_by_name('a:0')\nd = sess.graph.as_graph_element('d:0')\ninit_op = sess.graph.get_operation_by_name('init')\n\nsess.run(init_op)\nsess.run(a)\nAt first time I run the import graph snippet, it raise same error as below:\nFailedPreconditionError: Attempting to use uninitialized value b\n\t [[Node: b/read = Identity[T=DT_INT32, _class=[\"loc:@b\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](b)]]\n\t [[Node: b/Assign/_12 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_14_b/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\n\nCaused by op u'b/read', defined at:\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/__main__.py\", line 3, in <module>\n    app.launch_new_instance()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/traitlets/config/application.py\", line 658, in launch_instance\n    app.start()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelapp.py\", line 474, in start\n    ioloop.IOLoop.instance().start()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/ioloop.py\", line 177, in start\n    super(ZMQIOLoop, self).start()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tornado/ioloop.py\", line 887, in start\n    handler_func(fd_obj, events)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 440, in _handle_events\n    self._handle_recv()\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 472, in _handle_recv\n    self._run_callback(callback, msg)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 414, in _run_callback\n    callback(*args, **kwargs)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelbase.py\", line 276, in dispatcher\n    return self.dispatch_shell(stream, msg)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelbase.py\", line 228, in dispatch_shell\n    handler(stream, idents, msg)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelbase.py\", line 390, in execute_request\n    user_expressions, allow_stdin)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/ipkernel.py\", line 196, in do_execute\n    res = shell.run_cell(code, store_history=store_history, silent=silent)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/zmqshell.py\", line 501, in run_cell\n    return super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2717, in run_cell\n    interactivity=interactivity, compiler=compiler, result=result)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2827, in run_ast_nodes\n    if self.run_code(code, result):\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2881, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"<ipython-input-3-e62bd92e6511>\", line 1, in <module>\n    tf.import_graph_def(graph_def, name='')\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tensorflow/python/framework/importer.py\", line 285, in import_graph_def\n    op_def=op_def)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\n    self._traceback = _extract_stack()\n\nFailedPreconditionError (see above for traceback): Attempting to use uninitialized value b\n\t [[Node: b/read = Identity[T=DT_INT32, _class=[\"loc:@b\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](b)]]\n\t [[Node: b/Assign/_12 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_14_b/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\n\nThe most unreasonable thing is when I separately run sess.run(init_op) again, everything goes well. I don't know why it works, and I think you can reproduce it.\nRun again\nsess.run(init_op)\nsess.run(a)\noutput:\n1", "body": "@zakizhou Thanks for your advice. I tried it, and got some interesting and unreasonable results.\r\n### Write graph\r\n```python\r\nimport tensorflow as tf\r\na = tf.Variable(1, name='a', dtype=tf.int32)\r\nb = tf.Variable(2, name='b', dtype=tf.int32)\r\ninit_op = tf.global_variables_initializer() \r\nsess = tf.Session()\r\ntf.train.write_graph(sess.graph, '/tmp/PJT', 'test.pb', as_text=False)\r\n```\r\n### Import graph\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.core.framework import graph_pb2\r\n\r\ngraph_pb = '/tmp/PJT/test.pb'\r\ngraph_def = graph_pb2.GraphDef()\r\nwith open(graph_pb, 'rb') as f:\r\n    graph_def.ParseFromString(f.read())\r\ntf.import_graph_def(graph_def, name='')\r\nsess = tf.Session()\r\na = sess.graph.get_tensor_by_name('a:0')\r\nd = sess.graph.as_graph_element('d:0')\r\ninit_op = sess.graph.get_operation_by_name('init')\r\n\r\nsess.run(init_op)\r\nsess.run(a)\r\n```\r\nAt first time I run the `import graph` snippet, it raise same error as below:\r\n```\r\nFailedPreconditionError: Attempting to use uninitialized value b\r\n\t [[Node: b/read = Identity[T=DT_INT32, _class=[\"loc:@b\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](b)]]\r\n\t [[Node: b/Assign/_12 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_14_b/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\r\n\r\nCaused by op u'b/read', defined at:\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\r\n    \"__main__\", fname, loader, pkg_name)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/runpy.py\", line 72, in _run_code\r\n    exec code in run_globals\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/__main__.py\", line 3, in <module>\r\n    app.launch_new_instance()\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/traitlets/config/application.py\", line 658, in launch_instance\r\n    app.start()\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelapp.py\", line 474, in start\r\n    ioloop.IOLoop.instance().start()\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/ioloop.py\", line 177, in start\r\n    super(ZMQIOLoop, self).start()\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tornado/ioloop.py\", line 887, in start\r\n    handler_func(fd_obj, events)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\r\n    return fn(*args, **kwargs)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 440, in _handle_events\r\n    self._handle_recv()\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 472, in _handle_recv\r\n    self._run_callback(callback, msg)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 414, in _run_callback\r\n    callback(*args, **kwargs)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\r\n    return fn(*args, **kwargs)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelbase.py\", line 276, in dispatcher\r\n    return self.dispatch_shell(stream, msg)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelbase.py\", line 228, in dispatch_shell\r\n    handler(stream, idents, msg)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/kernelbase.py\", line 390, in execute_request\r\n    user_expressions, allow_stdin)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/ipkernel.py\", line 196, in do_execute\r\n    res = shell.run_cell(code, store_history=store_history, silent=silent)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/ipykernel/zmqshell.py\", line 501, in run_cell\r\n    return super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2717, in run_cell\r\n    interactivity=interactivity, compiler=compiler, result=result)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2827, in run_ast_nodes\r\n    if self.run_code(code, result):\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2881, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-3-e62bd92e6511>\", line 1, in <module>\r\n    tf.import_graph_def(graph_def, name='')\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tensorflow/python/framework/importer.py\", line 285, in import_graph_def\r\n    op_def=op_def)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"/home/mind/anaconda2/envs/tf_0.12/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\r\n    self._traceback = _extract_stack()\r\n\r\nFailedPreconditionError (see above for traceback): Attempting to use uninitialized value b\r\n\t [[Node: b/read = Identity[T=DT_INT32, _class=[\"loc:@b\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](b)]]\r\n\t [[Node: b/Assign/_12 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_14_b/Assign\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\r\n```\r\n\r\nThe most unreasonable thing is when I separately run `sess.run(init_op)` again, everything goes well. I don't know why it works, and I think you can reproduce it.\r\n### Run again\r\n```python\r\nsess.run(init_op)\r\nsess.run(a)\r\n```\r\noutput:\r\n```\r\n1\r\n```"}
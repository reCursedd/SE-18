{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/270584695", "html_url": "https://github.com/tensorflow/tensorflow/issues/6653#issuecomment-270584695", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6653", "id": 270584695, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDU4NDY5NQ==", "user": {"login": "zakizhou", "id": 19201532, "node_id": "MDQ6VXNlcjE5MjAxNTMy", "avatar_url": "https://avatars0.githubusercontent.com/u/19201532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zakizhou", "html_url": "https://github.com/zakizhou", "followers_url": "https://api.github.com/users/zakizhou/followers", "following_url": "https://api.github.com/users/zakizhou/following{/other_user}", "gists_url": "https://api.github.com/users/zakizhou/gists{/gist_id}", "starred_url": "https://api.github.com/users/zakizhou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zakizhou/subscriptions", "organizations_url": "https://api.github.com/users/zakizhou/orgs", "repos_url": "https://api.github.com/users/zakizhou/repos", "events_url": "https://api.github.com/users/zakizhou/events{/privacy}", "received_events_url": "https://api.github.com/users/zakizhou/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-05T07:56:37Z", "updated_at": "2017-01-05T08:01:23Z", "author_association": "NONE", "body_html": "<p>change <code>new_saver.restore(sess, 'model-0.data-00000-of-00001')</code> to <code>new_saver.restore(sess, 'model-0')</code> and have a try, <strong>take care of the path</strong></p>\n<p>I successfully restored with the following code</p>\n<pre><code>import tensorflow as tf\na = tf.Variable(1, name='a', dtype=tf.int32)\nb = tf.Variable(2, name='b', dtype=tf.int32)\nc = a + b\ninit_op = tf.global_variables_initializer()\nsaver = tf.train.Saver(tf.trainable_variables())\nsess = tf.Session()\nsess.run(init_op)  #  I have to run it twice to avoid the same error above.\nsaver.save(sess, 'data/model-0')\n</code></pre>\n<p>restore:</p>\n<pre><code>import tensorflow as tf\nsess = tf.Session()\nnew_saver = tf.train.import_meta_graph('data/model-0.meta')\nnew_saver.restore(sess, 'data/model-0')\n</code></pre>\n<p><strong>just drop the suffix of your ckpt file</strong></p>", "body_text": "change new_saver.restore(sess, 'model-0.data-00000-of-00001') to new_saver.restore(sess, 'model-0') and have a try, take care of the path\nI successfully restored with the following code\nimport tensorflow as tf\na = tf.Variable(1, name='a', dtype=tf.int32)\nb = tf.Variable(2, name='b', dtype=tf.int32)\nc = a + b\ninit_op = tf.global_variables_initializer()\nsaver = tf.train.Saver(tf.trainable_variables())\nsess = tf.Session()\nsess.run(init_op)  #  I have to run it twice to avoid the same error above.\nsaver.save(sess, 'data/model-0')\n\nrestore:\nimport tensorflow as tf\nsess = tf.Session()\nnew_saver = tf.train.import_meta_graph('data/model-0.meta')\nnew_saver.restore(sess, 'data/model-0')\n\njust drop the suffix of your ckpt file", "body": "change `new_saver.restore(sess, 'model-0.data-00000-of-00001')` to `new_saver.restore(sess, 'model-0')` and have a try, **take care of the path**\r\n\r\nI successfully restored with the following code\r\n\r\n```\r\nimport tensorflow as tf\r\na = tf.Variable(1, name='a', dtype=tf.int32)\r\nb = tf.Variable(2, name='b', dtype=tf.int32)\r\nc = a + b\r\ninit_op = tf.global_variables_initializer()\r\nsaver = tf.train.Saver(tf.trainable_variables())\r\nsess = tf.Session()\r\nsess.run(init_op)  #  I have to run it twice to avoid the same error above.\r\nsaver.save(sess, 'data/model-0')\r\n```\r\n\r\nrestore:\r\n```\r\nimport tensorflow as tf\r\nsess = tf.Session()\r\nnew_saver = tf.train.import_meta_graph('data/model-0.meta')\r\nnew_saver.restore(sess, 'data/model-0')\r\n```\r\n**just drop the suffix of your ckpt file**"}
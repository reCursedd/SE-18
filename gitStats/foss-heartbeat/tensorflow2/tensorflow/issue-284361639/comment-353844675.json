{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/353844675", "html_url": "https://github.com/tensorflow/tensorflow/pull/15614#issuecomment-353844675", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15614", "id": 353844675, "node_id": "MDEyOklzc3VlQ29tbWVudDM1Mzg0NDY3NQ==", "user": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-25T07:54:57Z", "updated_at": "2017-12-25T07:55:25Z", "author_association": "MEMBER", "body_html": "<p>I am not sure about if the added complexity warrants the benefit we will get with the new code.<br>\nWe can rely on <code>LD_LIBRARY_PATH</code> to find most of the binaries for cuda anyway, if you add <code>/usr/lib64</code> to your library path, do you still need all the patches?</p>\n<p>If we are to add support for these drivers, I think this needs to be done the following way:</p>\n<ul>\n<li>The code needs more comments (for example, what is nvvm).</li>\n<li>It needs to be written into <code>cuda_configure.bzl</code>.</li>\n<li>Most importantly, rather than adding specific logic for this driver, we should add support for this specific driver package by making <code>cuda_configure.bzl</code> more flexible. What I mean by this is rather than hardcoding all the locations for the specific package, the cuda configuration code should search for more alternate locations for the libraries it needs.</li>\n</ul>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=577277\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/martinwicke\">@martinwicke</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15736910\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zheng-xq\">@zheng-xq</a> to comment on support for this unofficial driver package<br>\n<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5283042\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/davidzchen\">@davidzchen</a> to comment on cuda_configure code.</p>\n<p>After we receive comments from CCd people above, I will probably clsoe this PR, and maybe we can start a github issue and continue conversation there.</p>", "body_text": "I am not sure about if the added complexity warrants the benefit we will get with the new code.\nWe can rely on LD_LIBRARY_PATH to find most of the binaries for cuda anyway, if you add /usr/lib64 to your library path, do you still need all the patches?\nIf we are to add support for these drivers, I think this needs to be done the following way:\n\nThe code needs more comments (for example, what is nvvm).\nIt needs to be written into cuda_configure.bzl.\nMost importantly, rather than adding specific logic for this driver, we should add support for this specific driver package by making cuda_configure.bzl more flexible. What I mean by this is rather than hardcoding all the locations for the specific package, the cuda configuration code should search for more alternate locations for the libraries it needs.\n\n@martinwicke @zheng-xq to comment on support for this unofficial driver package\n@davidzchen to comment on cuda_configure code.\nAfter we receive comments from CCd people above, I will probably clsoe this PR, and maybe we can start a github issue and continue conversation there.", "body": "I am not sure about if the added complexity warrants the benefit we will get with the new code.\r\nWe can rely on `LD_LIBRARY_PATH` to find most of the binaries for cuda anyway, if you add `/usr/lib64` to your library path, do you still need all the patches?\r\n\r\nIf we are to add support for these drivers, I think this needs to be done the following way:\r\n * The code needs more comments (for example, what is nvvm).\r\n * It needs to be written into `cuda_configure.bzl`.\r\n * Most importantly, rather than adding specific logic for this driver, we should add support for this specific driver package by making `cuda_configure.bzl` more flexible. What I mean by this is rather than hardcoding all the locations for the specific package, the cuda configuration code should search for more alternate locations for the libraries it needs.\r\n\r\n@martinwicke @zheng-xq to comment on support for this unofficial driver package\r\n@davidzchen to comment on cuda_configure code.\r\n\r\nAfter we receive comments from CCd people above, I will probably clsoe this PR, and maybe we can start a github issue and continue conversation there."}
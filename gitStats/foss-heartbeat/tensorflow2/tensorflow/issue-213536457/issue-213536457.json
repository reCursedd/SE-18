{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8306", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8306/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8306/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8306/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8306", "id": 213536457, "node_id": "MDU6SXNzdWUyMTM1MzY0NTc=", "number": 8306, "title": "tf.contrib.distributions.Multinomial initialization problem", "user": {"login": "yc14600", "id": 18592195, "node_id": "MDQ6VXNlcjE4NTkyMTk1", "avatar_url": "https://avatars0.githubusercontent.com/u/18592195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yc14600", "html_url": "https://github.com/yc14600", "followers_url": "https://api.github.com/users/yc14600/followers", "following_url": "https://api.github.com/users/yc14600/following{/other_user}", "gists_url": "https://api.github.com/users/yc14600/gists{/gist_id}", "starred_url": "https://api.github.com/users/yc14600/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yc14600/subscriptions", "organizations_url": "https://api.github.com/users/yc14600/orgs", "repos_url": "https://api.github.com/users/yc14600/repos", "events_url": "https://api.github.com/users/yc14600/events{/privacy}", "received_events_url": "https://api.github.com/users/yc14600/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-11T15:38:29Z", "updated_at": "2017-03-12T13:45:01Z", "closed_at": "2017-03-11T19:29:01Z", "author_association": "NONE", "body_html": "<p>Hi<br>\nI can't initialize a multinomial distribution with more than 1 dimension probabilities. The version of installed TF is 1.0.0. I tried the example code in tensorflow website (<a href=\"https://www.tensorflow.org/api_docs/python/tf/contrib/distributions/Multinomial\" rel=\"nofollow\">https://www.tensorflow.org/api_docs/python/tf/contrib/distributions/Multinomial</a>), it gets the same problem and the error doesn't make any sense to require probabilities to be integers. I'm not sure if the guide in the website is obsolete or I got something wrong. Please give some help here, thanks.</p>\n<pre><code>r=tf.contrib.distributions.Multinomial(n=[4, 5], p=[[.1, .3, .6], [.4, .05, .55]])\n\nValueErrorTraceback (most recent call last)\n&lt;ipython-input-92-7d05643707f2&gt; in &lt;module&gt;()\n----&gt; 1 r=tf.contrib.distributions.Multinomial([4, 5], p=[[.1, .3, .6], [.4, .05, .55]])\n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distributions/python/ops/multinomial.pyc in __init__(self, n, logits, p, validate_args, allow_nan_stats, name)\n    164             multidimensional=True)\n    165         self._n = array_ops.identity(n, name=\"convert_n\")\n--&gt; 166         self._mean_val = array_ops.expand_dims(n, -1) * self._p\n    167         self._broadcast_shape = math_ops.reduce_sum(\n    168             self._mean_val, reduction_indices=[-1], keep_dims=False)\n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.pyc in binary_op_wrapper(x, y)\n    881     with ops.name_scope(None, op_name, [x, y]) as name:\n    882       if not isinstance(y, sparse_tensor.SparseTensor):\n--&gt; 883         y = ops.convert_to_tensor(y, dtype=x.dtype.base_dtype, name=\"y\")\n    884       return func(x, y, name=name)\n    885 \n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in convert_to_tensor(value, dtype, name, preferred_dtype)\n    649       name=name,\n    650       preferred_dtype=preferred_dtype,\n--&gt; 651       as_ref=False)\n    652 \n    653 \n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in internal_convert_to_tensor(value, dtype, name, as_ref, preferred_dtype)\n    714 \n    715         if ret is None:\n--&gt; 716           ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n    717 \n    718         if ret is NotImplemented:\n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in _TensorTensorConversionFunction(t, dtype, name, as_ref)\n    587     raise ValueError(\n    588         \"Tensor conversion requested dtype %s for Tensor with dtype %s: %r\"\n--&gt; 589         % (dtype.name, t.dtype.name, str(t)))\n    590   return t\n    591 \n\nValueError: Tensor conversion requested dtype int32 for Tensor with dtype float32: 'Tensor(\"Multinomial_26/Multinomial/p/Identity:0\", shape=(2, 3), dtype=float32)'\n</code></pre>", "body_text": "Hi\nI can't initialize a multinomial distribution with more than 1 dimension probabilities. The version of installed TF is 1.0.0. I tried the example code in tensorflow website (https://www.tensorflow.org/api_docs/python/tf/contrib/distributions/Multinomial), it gets the same problem and the error doesn't make any sense to require probabilities to be integers. I'm not sure if the guide in the website is obsolete or I got something wrong. Please give some help here, thanks.\nr=tf.contrib.distributions.Multinomial(n=[4, 5], p=[[.1, .3, .6], [.4, .05, .55]])\n\nValueErrorTraceback (most recent call last)\n<ipython-input-92-7d05643707f2> in <module>()\n----> 1 r=tf.contrib.distributions.Multinomial([4, 5], p=[[.1, .3, .6], [.4, .05, .55]])\n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distributions/python/ops/multinomial.pyc in __init__(self, n, logits, p, validate_args, allow_nan_stats, name)\n    164             multidimensional=True)\n    165         self._n = array_ops.identity(n, name=\"convert_n\")\n--> 166         self._mean_val = array_ops.expand_dims(n, -1) * self._p\n    167         self._broadcast_shape = math_ops.reduce_sum(\n    168             self._mean_val, reduction_indices=[-1], keep_dims=False)\n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.pyc in binary_op_wrapper(x, y)\n    881     with ops.name_scope(None, op_name, [x, y]) as name:\n    882       if not isinstance(y, sparse_tensor.SparseTensor):\n--> 883         y = ops.convert_to_tensor(y, dtype=x.dtype.base_dtype, name=\"y\")\n    884       return func(x, y, name=name)\n    885 \n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in convert_to_tensor(value, dtype, name, preferred_dtype)\n    649       name=name,\n    650       preferred_dtype=preferred_dtype,\n--> 651       as_ref=False)\n    652 \n    653 \n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in internal_convert_to_tensor(value, dtype, name, as_ref, preferred_dtype)\n    714 \n    715         if ret is None:\n--> 716           ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n    717 \n    718         if ret is NotImplemented:\n\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in _TensorTensorConversionFunction(t, dtype, name, as_ref)\n    587     raise ValueError(\n    588         \"Tensor conversion requested dtype %s for Tensor with dtype %s: %r\"\n--> 589         % (dtype.name, t.dtype.name, str(t)))\n    590   return t\n    591 \n\nValueError: Tensor conversion requested dtype int32 for Tensor with dtype float32: 'Tensor(\"Multinomial_26/Multinomial/p/Identity:0\", shape=(2, 3), dtype=float32)'", "body": "Hi\r\nI can't initialize a multinomial distribution with more than 1 dimension probabilities. The version of installed TF is 1.0.0. I tried the example code in tensorflow website (https://www.tensorflow.org/api_docs/python/tf/contrib/distributions/Multinomial), it gets the same problem and the error doesn't make any sense to require probabilities to be integers. I'm not sure if the guide in the website is obsolete or I got something wrong. Please give some help here, thanks.\r\n```\r\nr=tf.contrib.distributions.Multinomial(n=[4, 5], p=[[.1, .3, .6], [.4, .05, .55]])\r\n\r\nValueErrorTraceback (most recent call last)\r\n<ipython-input-92-7d05643707f2> in <module>()\r\n----> 1 r=tf.contrib.distributions.Multinomial([4, 5], p=[[.1, .3, .6], [.4, .05, .55]])\r\n\r\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distributions/python/ops/multinomial.pyc in __init__(self, n, logits, p, validate_args, allow_nan_stats, name)\r\n    164             multidimensional=True)\r\n    165         self._n = array_ops.identity(n, name=\"convert_n\")\r\n--> 166         self._mean_val = array_ops.expand_dims(n, -1) * self._p\r\n    167         self._broadcast_shape = math_ops.reduce_sum(\r\n    168             self._mean_val, reduction_indices=[-1], keep_dims=False)\r\n\r\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.pyc in binary_op_wrapper(x, y)\r\n    881     with ops.name_scope(None, op_name, [x, y]) as name:\r\n    882       if not isinstance(y, sparse_tensor.SparseTensor):\r\n--> 883         y = ops.convert_to_tensor(y, dtype=x.dtype.base_dtype, name=\"y\")\r\n    884       return func(x, y, name=name)\r\n    885 \r\n\r\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in convert_to_tensor(value, dtype, name, preferred_dtype)\r\n    649       name=name,\r\n    650       preferred_dtype=preferred_dtype,\r\n--> 651       as_ref=False)\r\n    652 \r\n    653 \r\n\r\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in internal_convert_to_tensor(value, dtype, name, as_ref, preferred_dtype)\r\n    714 \r\n    715         if ret is None:\r\n--> 716           ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n    717 \r\n    718         if ret is NotImplemented:\r\n\r\n/usr/local/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in _TensorTensorConversionFunction(t, dtype, name, as_ref)\r\n    587     raise ValueError(\r\n    588         \"Tensor conversion requested dtype %s for Tensor with dtype %s: %r\"\r\n--> 589         % (dtype.name, t.dtype.name, str(t)))\r\n    590   return t\r\n    591 \r\n\r\nValueError: Tensor conversion requested dtype int32 for Tensor with dtype float32: 'Tensor(\"Multinomial_26/Multinomial/p/Identity:0\", shape=(2, 3), dtype=float32)'\r\n```\r\n"}
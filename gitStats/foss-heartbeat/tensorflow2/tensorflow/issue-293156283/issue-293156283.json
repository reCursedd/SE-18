{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16624", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16624/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16624/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16624/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16624", "id": 293156283, "node_id": "MDU6SXNzdWUyOTMxNTYyODM=", "number": 16624, "title": "Crash caused by depthwise_conv on iOS", "user": {"login": "llyyun", "id": 33706846, "node_id": "MDQ6VXNlcjMzNzA2ODQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/33706846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llyyun", "html_url": "https://github.com/llyyun", "followers_url": "https://api.github.com/users/llyyun/followers", "following_url": "https://api.github.com/users/llyyun/following{/other_user}", "gists_url": "https://api.github.com/users/llyyun/gists{/gist_id}", "starred_url": "https://api.github.com/users/llyyun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llyyun/subscriptions", "organizations_url": "https://api.github.com/users/llyyun/orgs", "repos_url": "https://api.github.com/users/llyyun/repos", "events_url": "https://api.github.com/users/llyyun/events{/privacy}", "received_events_url": "https://api.github.com/users/llyyun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-01-31T13:23:56Z", "updated_at": "2018-09-13T17:10:33Z", "closed_at": "2018-09-13T17:10:33Z", "author_association": "NONE", "body_html": "<p>Hi</p>\n<p>I integrated the same tflite mode to android and iOS app, on android it always works fine, but on iOS the result is incorrect and sometimes app crashed, seems like there's an issue at depthwise_conv.<br>\nThe crash log is as follows:</p>\n<pre><code>Hardware Model:      iPhone7,1\nProcess:             Demo [287]\nPath:                /private/var/containers/Bundle/Application/D412E130-5C9E-45B1-A84D-FD93FFAB9025/Demo.app/Demo\nIdentifier:          Sensteer.Demo2\nVersion:             1.0.0 (1.0)\nCode Type:           ARM-64 (Native)\nRole:                Non UI\nParent Process:      launchd [1]\nCoalition:           Sensteer.Demo2 [457]\n\n\nDate/Time:           2018-01-31 19:08:36.5843 +0800\nLaunch Time:         2018-01-31 19:06:58.3105 +0800\nOS Version:          iPhone OS 11.1.2 (15B202)\nBaseband Version:    6.17.00\nReport Version:      104\n\nException Type:  EXC_BAD_ACCESS (SIGSEGV)\nException Subtype: KERN_INVALID_ADDRESS at 0x0000000102ea41dc\nVM Region Info: 0x102ea41dc is not in any region.  Bytes after previous region: 16861  Bytes before following region: 15908\n      REGION TYPE                      START - END             [ VSIZE] PRT/MAX SHRMOD  REGION DETAIL\n      mapped file            0000000102e64000-0000000102ea0000 [  240K] r--/r-- SM=ALI  \ufffd\n---&gt;  GAP OF 0x8000 BYTES\n      MALLOC_LARGE           0000000102ea8000-0000000102ec8000 [  128K] rw-/rwx SM=PRV  \n\nTermination Signal: Segmentation fault: 11\nTermination Reason: Namespace SIGNAL, Code 0xb\nTerminating Process: exc handler [0]\nTriggered by Thread:  0\n\nFiltered syslog:\nNone found\n\nThread 0 name:  Dispatch queue: com.apple.main-thread\nThread 0 Crashed:\n0   libsystem_platform.dylib      \t0x0000000185d21b60 _platform_memmove + 176\n1   Demo                          \t0x0000000100fcd238 tflite::optimized_ops::DepthwiseConv+ 463416 (float const*, tflite::Dims&lt;4&gt; const&amp;, float const*, tflite::Dims&lt;4&gt; const&amp;, float const*, tflite::Dims&lt;4&gt; const&amp;, int, int, int, int, int, float, float, float*, tflite::Dims&lt;4&gt; const&amp;) + 820\n2   Demo                          \t0x0000000100fd435c void tflite::ops::builtin::depthwise_conv::EvalFloat&lt;(tflite::ops::builtin::depthwise_conv::KernelType)2&gt;+ 492380 (TfLiteContext*, TfLiteNode*, TfLiteDepthwiseConvParams*, tflite::ops::builtin::depthwise_conv::OpData*, TfLiteTensor*, TfLiteTensor*, TfLiteTensor*, TfLiteTensor*) + 744\n3   Demo                          \t0x0000000100fcbc60 TfLiteStatus tflite::ops::builtin::depthwise_conv::Eval&lt;(tflite::ops::builtin::depthwise_conv::KernelType)2&gt;+ 457824 (TfLiteContext*, TfLiteNode*) + 96\n4   Demo                          \t0x0000000100f827d4 tflite::Interpreter::Invoke+ 157652 () + 316\n</code></pre>\n<p><strong>System information</strong></p>\n<p>Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no<br>\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS High Sierra 10.13.2<br>\nTensorFlow installed from (source or binary): source<br>\nTensorFlow version (use command below): cloned on 2018.1.24<br>\nPython version: 2.7.10<br>\nBazel version (if compiling from source): 0.7.0-homebrew</p>", "body_text": "Hi\nI integrated the same tflite mode to android and iOS app, on android it always works fine, but on iOS the result is incorrect and sometimes app crashed, seems like there's an issue at depthwise_conv.\nThe crash log is as follows:\nHardware Model:      iPhone7,1\nProcess:             Demo [287]\nPath:                /private/var/containers/Bundle/Application/D412E130-5C9E-45B1-A84D-FD93FFAB9025/Demo.app/Demo\nIdentifier:          Sensteer.Demo2\nVersion:             1.0.0 (1.0)\nCode Type:           ARM-64 (Native)\nRole:                Non UI\nParent Process:      launchd [1]\nCoalition:           Sensteer.Demo2 [457]\n\n\nDate/Time:           2018-01-31 19:08:36.5843 +0800\nLaunch Time:         2018-01-31 19:06:58.3105 +0800\nOS Version:          iPhone OS 11.1.2 (15B202)\nBaseband Version:    6.17.00\nReport Version:      104\n\nException Type:  EXC_BAD_ACCESS (SIGSEGV)\nException Subtype: KERN_INVALID_ADDRESS at 0x0000000102ea41dc\nVM Region Info: 0x102ea41dc is not in any region.  Bytes after previous region: 16861  Bytes before following region: 15908\n      REGION TYPE                      START - END             [ VSIZE] PRT/MAX SHRMOD  REGION DETAIL\n      mapped file            0000000102e64000-0000000102ea0000 [  240K] r--/r-- SM=ALI  \ufffd\n--->  GAP OF 0x8000 BYTES\n      MALLOC_LARGE           0000000102ea8000-0000000102ec8000 [  128K] rw-/rwx SM=PRV  \n\nTermination Signal: Segmentation fault: 11\nTermination Reason: Namespace SIGNAL, Code 0xb\nTerminating Process: exc handler [0]\nTriggered by Thread:  0\n\nFiltered syslog:\nNone found\n\nThread 0 name:  Dispatch queue: com.apple.main-thread\nThread 0 Crashed:\n0   libsystem_platform.dylib      \t0x0000000185d21b60 _platform_memmove + 176\n1   Demo                          \t0x0000000100fcd238 tflite::optimized_ops::DepthwiseConv+ 463416 (float const*, tflite::Dims<4> const&, float const*, tflite::Dims<4> const&, float const*, tflite::Dims<4> const&, int, int, int, int, int, float, float, float*, tflite::Dims<4> const&) + 820\n2   Demo                          \t0x0000000100fd435c void tflite::ops::builtin::depthwise_conv::EvalFloat<(tflite::ops::builtin::depthwise_conv::KernelType)2>+ 492380 (TfLiteContext*, TfLiteNode*, TfLiteDepthwiseConvParams*, tflite::ops::builtin::depthwise_conv::OpData*, TfLiteTensor*, TfLiteTensor*, TfLiteTensor*, TfLiteTensor*) + 744\n3   Demo                          \t0x0000000100fcbc60 TfLiteStatus tflite::ops::builtin::depthwise_conv::Eval<(tflite::ops::builtin::depthwise_conv::KernelType)2>+ 457824 (TfLiteContext*, TfLiteNode*) + 96\n4   Demo                          \t0x0000000100f827d4 tflite::Interpreter::Invoke+ 157652 () + 316\n\nSystem information\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS High Sierra 10.13.2\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): cloned on 2018.1.24\nPython version: 2.7.10\nBazel version (if compiling from source): 0.7.0-homebrew", "body": "Hi\r\n\r\nI integrated the same tflite mode to android and iOS app, on android it always works fine, but on iOS the result is incorrect and sometimes app crashed, seems like there's an issue at depthwise_conv. \r\nThe crash log is as follows:\r\n\r\n```\r\nHardware Model:      iPhone7,1\r\nProcess:             Demo [287]\r\nPath:                /private/var/containers/Bundle/Application/D412E130-5C9E-45B1-A84D-FD93FFAB9025/Demo.app/Demo\r\nIdentifier:          Sensteer.Demo2\r\nVersion:             1.0.0 (1.0)\r\nCode Type:           ARM-64 (Native)\r\nRole:                Non UI\r\nParent Process:      launchd [1]\r\nCoalition:           Sensteer.Demo2 [457]\r\n\r\n\r\nDate/Time:           2018-01-31 19:08:36.5843 +0800\r\nLaunch Time:         2018-01-31 19:06:58.3105 +0800\r\nOS Version:          iPhone OS 11.1.2 (15B202)\r\nBaseband Version:    6.17.00\r\nReport Version:      104\r\n\r\nException Type:  EXC_BAD_ACCESS (SIGSEGV)\r\nException Subtype: KERN_INVALID_ADDRESS at 0x0000000102ea41dc\r\nVM Region Info: 0x102ea41dc is not in any region.  Bytes after previous region: 16861  Bytes before following region: 15908\r\n      REGION TYPE                      START - END             [ VSIZE] PRT/MAX SHRMOD  REGION DETAIL\r\n      mapped file            0000000102e64000-0000000102ea0000 [  240K] r--/r-- SM=ALI  \u0001\r\n--->  GAP OF 0x8000 BYTES\r\n      MALLOC_LARGE           0000000102ea8000-0000000102ec8000 [  128K] rw-/rwx SM=PRV  \r\n\r\nTermination Signal: Segmentation fault: 11\r\nTermination Reason: Namespace SIGNAL, Code 0xb\r\nTerminating Process: exc handler [0]\r\nTriggered by Thread:  0\r\n\r\nFiltered syslog:\r\nNone found\r\n\r\nThread 0 name:  Dispatch queue: com.apple.main-thread\r\nThread 0 Crashed:\r\n0   libsystem_platform.dylib      \t0x0000000185d21b60 _platform_memmove + 176\r\n1   Demo                          \t0x0000000100fcd238 tflite::optimized_ops::DepthwiseConv+ 463416 (float const*, tflite::Dims<4> const&, float const*, tflite::Dims<4> const&, float const*, tflite::Dims<4> const&, int, int, int, int, int, float, float, float*, tflite::Dims<4> const&) + 820\r\n2   Demo                          \t0x0000000100fd435c void tflite::ops::builtin::depthwise_conv::EvalFloat<(tflite::ops::builtin::depthwise_conv::KernelType)2>+ 492380 (TfLiteContext*, TfLiteNode*, TfLiteDepthwiseConvParams*, tflite::ops::builtin::depthwise_conv::OpData*, TfLiteTensor*, TfLiteTensor*, TfLiteTensor*, TfLiteTensor*) + 744\r\n3   Demo                          \t0x0000000100fcbc60 TfLiteStatus tflite::ops::builtin::depthwise_conv::Eval<(tflite::ops::builtin::depthwise_conv::KernelType)2>+ 457824 (TfLiteContext*, TfLiteNode*) + 96\r\n4   Demo                          \t0x0000000100f827d4 tflite::Interpreter::Invoke+ 157652 () + 316\r\n```\r\n\r\n\r\n**System information**\r\n\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS High Sierra 10.13.2\r\nTensorFlow installed from (source or binary): source\r\nTensorFlow version (use command below): cloned on 2018.1.24\r\nPython version: 2.7.10\r\nBazel version (if compiling from source): 0.7.0-homebrew"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/428136515", "html_url": "https://github.com/tensorflow/tensorflow/issues/22761#issuecomment-428136515", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22761", "id": 428136515, "node_id": "MDEyOklzc3VlQ29tbWVudDQyODEzNjUxNQ==", "user": {"login": "madsdk", "id": 226113, "node_id": "MDQ6VXNlcjIyNjExMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/226113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madsdk", "html_url": "https://github.com/madsdk", "followers_url": "https://api.github.com/users/madsdk/followers", "following_url": "https://api.github.com/users/madsdk/following{/other_user}", "gists_url": "https://api.github.com/users/madsdk/gists{/gist_id}", "starred_url": "https://api.github.com/users/madsdk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madsdk/subscriptions", "organizations_url": "https://api.github.com/users/madsdk/orgs", "repos_url": "https://api.github.com/users/madsdk/repos", "events_url": "https://api.github.com/users/madsdk/events{/privacy}", "received_events_url": "https://api.github.com/users/madsdk/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-09T10:08:52Z", "updated_at": "2018-10-09T10:10:08Z", "author_association": "NONE", "body_html": "<blockquote>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=226113\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/madsdk\">@madsdk</a> Can you try to run <code>bazel clean --expunge</code> command then retry the build? See if it helps.<br>\nIt's not the first I see this issue, but I couldn't reproduce it,</p>\n</blockquote>\n<p>Thank you for your answer. I've tried calling clean before, but I just tried it again and got the following result:</p>\n<p>c:\\tensorflow&gt;bazel clean --expunge<br>\nStarting local Bazel server and connecting to it...<br>\nINFO: Starting clean.</p>\n<p>c:\\tensorflow&gt;bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package<br>\nStarting local Bazel server and connecting to it...<br>\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:<br>\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.<br>\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:<br>\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables, eg. VS140COMNTOOLS<br>\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:<br>\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC<br>\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@kafka//': Traceback (most recent call last):<br>\nFile \"C:/tensorflow/third_party/repo.bzl\", line 99<br>\n_apply_patch(ctx, ctx.attr.patch_file)<br>\nFile \"C:/tensorflow/third_party/repo.bzl\", line 67, in _apply_patch<br>\n_execute_and_check_ret_code(ctx, cmd)<br>\nFile \"C:/tensorflow/third_party/repo.bzl\", line 52, in _execute_and_check_ret_code<br>\nfail(\"Non-zero return code({1}) when ...))<br>\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/kafka -i C:/tensorflow/third_party/kafka/config.patch':<br>\nStdout:<br>\nStderr: Timed out<br>\nINFO: Elapsed time: 98,260s<br>\nINFO: 0 processes.<br>\nFAILED: Build did NOT complete successfully (243 packages loaded)</p>", "body_text": "@madsdk Can you try to run bazel clean --expunge command then retry the build? See if it helps.\nIt's not the first I see this issue, but I couldn't reproduce it,\n\nThank you for your answer. I've tried calling clean before, but I just tried it again and got the following result:\nc:\\tensorflow>bazel clean --expunge\nStarting local Bazel server and connecting to it...\nINFO: Starting clean.\nc:\\tensorflow>bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\nStarting local Bazel server and connecting to it...\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables, eg. VS140COMNTOOLS\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@kafka//': Traceback (most recent call last):\nFile \"C:/tensorflow/third_party/repo.bzl\", line 99\n_apply_patch(ctx, ctx.attr.patch_file)\nFile \"C:/tensorflow/third_party/repo.bzl\", line 67, in _apply_patch\n_execute_and_check_ret_code(ctx, cmd)\nFile \"C:/tensorflow/third_party/repo.bzl\", line 52, in _execute_and_check_ret_code\nfail(\"Non-zero return code({1}) when ...))\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/kafka -i C:/tensorflow/third_party/kafka/config.patch':\nStdout:\nStderr: Timed out\nINFO: Elapsed time: 98,260s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (243 packages loaded)", "body": "> \r\n> \r\n> @madsdk Can you try to run `bazel clean --expunge` command then retry the build? See if it helps.\r\n> It's not the first I see this issue, but I couldn't reproduce it,\r\n\r\nThank you for your answer. I've tried calling clean before, but I just tried it again and got the following result:\r\n\r\nc:\\tensorflow>bazel clean --expunge\r\nStarting local Bazel server and connecting to it...\r\nINFO: Starting clean.\r\n\r\nc:\\tensorflow>bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\nStarting local Bazel server and connecting to it...\r\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\r\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\r\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\r\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables, eg. VS140COMNTOOLS\r\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\r\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@kafka//': Traceback (most recent call last):\r\n        File \"C:/tensorflow/third_party/repo.bzl\", line 99\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/tensorflow/third_party/repo.bzl\", line 67, in _apply_patch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/tensorflow/third_party/repo.bzl\", line 52, in _execute_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/kafka -i C:/tensorflow/third_party/kafka/config.patch':\r\nStdout:\r\nStderr: Timed out\r\nINFO: Elapsed time: 98,260s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (243 packages loaded)"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22761", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22761/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22761/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22761/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22761", "id": 367101327, "node_id": "MDU6SXNzdWUzNjcxMDEzMjc=", "number": 22761, "title": "Error building on Windows, patch command failing", "user": {"login": "madsdk", "id": 226113, "node_id": "MDQ6VXNlcjIyNjExMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/226113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madsdk", "html_url": "https://github.com/madsdk", "followers_url": "https://api.github.com/users/madsdk/followers", "following_url": "https://api.github.com/users/madsdk/following{/other_user}", "gists_url": "https://api.github.com/users/madsdk/gists{/gist_id}", "starred_url": "https://api.github.com/users/madsdk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madsdk/subscriptions", "organizations_url": "https://api.github.com/users/madsdk/orgs", "repos_url": "https://api.github.com/users/madsdk/repos", "events_url": "https://api.github.com/users/madsdk/events{/privacy}", "received_events_url": "https://api.github.com/users/madsdk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, {"login": "harshini-gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harshini-gadige", "html_url": "https://github.com/harshini-gadige", "followers_url": "https://api.github.com/users/harshini-gadige/followers", "following_url": "https://api.github.com/users/harshini-gadige/following{/other_user}", "gists_url": "https://api.github.com/users/harshini-gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/harshini-gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harshini-gadige/subscriptions", "organizations_url": "https://api.github.com/users/harshini-gadige/orgs", "repos_url": "https://api.github.com/users/harshini-gadige/repos", "events_url": "https://api.github.com/users/harshini-gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/harshini-gadige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 21, "created_at": "2018-10-05T08:01:32Z", "updated_at": "2018-10-17T04:15:35Z", "closed_at": "2018-10-11T17:48:52Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Windows 10</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>: N/A</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.10</li>\n<li><strong>Python version</strong>: 3.6.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.17.2</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: Visual C++ Build Tools 2015</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>: Follow build instructions on <a href=\"https://www.tensorflow.org/install/source_windows\" rel=\"nofollow\">https://www.tensorflow.org/install/source_windows</a></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Describe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.</p>\n<p>When following the build instructions on <a href=\"https://www.tensorflow.org/install/source_windows\" rel=\"nofollow\">https://www.tensorflow.org/install/source_windows</a> I am unable to build tensorflow from source. I'm running on a clean Windows 10 install (nothing else installed but the requirements listed on the homepage).</p>\n<p>When running the bazel build step (CPU) with the command: $ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package I get two different errors, both when the build script tries to patch some files. The commands that fail are:</p>\n<p><code>C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/kafka -i C:/tensorflow/third_party/kafka/config.patch C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/png_archive -i C:/tensorflow/third_party/png_fix_rpi.patch</code></p>\n<p>Copying the patch commands into the cmd.exe prompt makes the patch command \"hang\" until I manually terminate it. If I add ' ' around the command part of the bash invocation (e.g. bash -c 'patch ...') it works just fine.</p>\n<h3>Source code / logs</h3>\n<p>Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.</p>\n<p>`$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package<br>\nStarting local Bazel server and connecting to it...<br>\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:<br>\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.<br>\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:<br>\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables, eg. VS140COMNTOOLS<br>\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:<br>\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC<br>\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@kafka//': Traceback (most recent call last):<br>\nFile \"C:/tensorflow/third_party/repo.bzl\", line 99<br>\n_apply_patch(ctx, ctx.attr.patch_file)<br>\nFile \"C:/tensorflow/third_party/repo.bzl\", line 67, in _apply_patch<br>\n_execute_and_check_ret_code(ctx, cmd)<br>\nFile \"C:/tensorflow/third_party/repo.bzl\", line 52, in _execute_and_check_ret_code<br>\nfail(\"Non-zero return code({1}) when ...))<br>\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/kafka -i C:/tensorflow/third_party/kafka/config.patch':<br>\nStdout:<br>\nStderr: Timed out<br>\nINFO: Elapsed time: 93,541s<br>\nINFO: 0 processes.<br>\nFAILED: Build did NOT complete successfully (242 packages loaded)</p>\n<p>cm@tbuilder  /c/tensorflow<br>\n$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package<br>\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:<br>\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.<br>\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:<br>\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables, eg. VS140COMNTOOLS<br>\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:<br>\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC<br>\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@png_archive//': Traceback (most recent call last):<br>\nFile \"C:/tensorflow/third_party/repo.bzl\", line 99<br>\n_apply_patch(ctx, ctx.attr.patch_file)<br>\nFile \"C:/tensorflow/third_party/repo.bzl\", line 67, in _apply_patch<br>\n_execute_and_check_ret_code(ctx, cmd)<br>\nFile \"C:/tensorflow/third_party/repo.bzl\", line 52, in _execute_and_check_ret_code<br>\nfail(\"Non-zero return code({1}) when ...))<br>\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/png_archive -i C:/tensorflow/third_party/png_fix_rpi.patch':<br>\nStdout:<br>\nStderr: Timed out<br>\nINFO: Elapsed time: 33,880s<br>\nINFO: 0 processes.<br>\nFAILED: Build did NOT complete successfully (0 packages loaded)`</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 1.10\nPython version: 3.6.6\nBazel version (if compiling from source): 0.17.2\nGCC/Compiler version (if compiling from source): Visual C++ Build Tools 2015\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce: Follow build instructions on https://www.tensorflow.org/install/source_windows\n\nDescribe the problem\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\nWhen following the build instructions on https://www.tensorflow.org/install/source_windows I am unable to build tensorflow from source. I'm running on a clean Windows 10 install (nothing else installed but the requirements listed on the homepage).\nWhen running the bazel build step (CPU) with the command: $ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package I get two different errors, both when the build script tries to patch some files. The commands that fail are:\nC:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/kafka -i C:/tensorflow/third_party/kafka/config.patch C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/png_archive -i C:/tensorflow/third_party/png_fix_rpi.patch\nCopying the patch commands into the cmd.exe prompt makes the patch command \"hang\" until I manually terminate it. If I add ' ' around the command part of the bash invocation (e.g. bash -c 'patch ...') it works just fine.\nSource code / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\n`$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\nStarting local Bazel server and connecting to it...\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables, eg. VS140COMNTOOLS\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@kafka//': Traceback (most recent call last):\nFile \"C:/tensorflow/third_party/repo.bzl\", line 99\n_apply_patch(ctx, ctx.attr.patch_file)\nFile \"C:/tensorflow/third_party/repo.bzl\", line 67, in _apply_patch\n_execute_and_check_ret_code(ctx, cmd)\nFile \"C:/tensorflow/third_party/repo.bzl\", line 52, in _execute_and_check_ret_code\nfail(\"Non-zero return code({1}) when ...))\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/kafka -i C:/tensorflow/third_party/kafka/config.patch':\nStdout:\nStderr: Timed out\nINFO: Elapsed time: 93,541s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (242 packages loaded)\ncm@tbuilder  /c/tensorflow\n$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables, eg. VS140COMNTOOLS\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@png_archive//': Traceback (most recent call last):\nFile \"C:/tensorflow/third_party/repo.bzl\", line 99\n_apply_patch(ctx, ctx.attr.patch_file)\nFile \"C:/tensorflow/third_party/repo.bzl\", line 67, in _apply_patch\n_execute_and_check_ret_code(ctx, cmd)\nFile \"C:/tensorflow/third_party/repo.bzl\", line 52, in _execute_and_check_ret_code\nfail(\"Non-zero return code({1}) when ...))\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/png_archive -i C:/tensorflow/third_party/png_fix_rpi.patch':\nStdout:\nStderr: Timed out\nINFO: Elapsed time: 33,880s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (0 packages loaded)`", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.10\r\n- **Python version**: 3.6.6\r\n- **Bazel version (if compiling from source)**: 0.17.2\r\n- **GCC/Compiler version (if compiling from source)**: Visual C++ Build Tools 2015\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: Follow build instructions on https://www.tensorflow.org/install/source_windows\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nWhen following the build instructions on https://www.tensorflow.org/install/source_windows I am unable to build tensorflow from source. I'm running on a clean Windows 10 install (nothing else installed but the requirements listed on the homepage). \r\n\r\nWhen running the bazel build step (CPU) with the command: $ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package I get two different errors, both when the build script tries to patch some files. The commands that fail are:\r\n\r\n`C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/kafka -i C:/tensorflow/third_party/kafka/config.patch\r\nC:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/png_archive -i C:/tensorflow/third_party/png_fix_rpi.patch`\r\n\r\nCopying the patch commands into the cmd.exe prompt makes the patch command \"hang\" until I manually terminate it. If I add ' ' around the command part of the bash invocation (e.g. bash -c 'patch ...') it works just fine. \r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n`$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\nStarting local Bazel server and connecting to it...\r\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\r\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\r\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\r\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables, eg. VS140COMNTOOLS\r\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\r\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@kafka//': Traceback (most recent call last):\r\n        File \"C:/tensorflow/third_party/repo.bzl\", line 99\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/tensorflow/third_party/repo.bzl\", line 67, in _apply_patch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/tensorflow/third_party/repo.bzl\", line 52, in _execute_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/kafka -i C:/tensorflow/third_party/kafka/config.patch':\r\nStdout:\r\nStderr: Timed out\r\nINFO: Elapsed time: 93,541s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (242 packages loaded)\r\n\r\n\r\ncm@tbuilder  /c/tensorflow\r\n$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\r\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\r\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\r\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables, eg. VS140COMNTOOLS\r\nDEBUG: C:/users/cm/_bazel_cm/xv6zejqw/external/bazel_tools/tools/cpp/lib_cc_configure.bzl:115:5:\r\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/tensorflow/third_party/repo.bzl\", line 99\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/tensorflow/third_party/repo.bzl\", line 67, in _apply_patch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/tensorflow/third_party/repo.bzl\", line 52, in _execute_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(256) when executing 'C:\\msys64\\usr\\bin\\bash.exe -l -c patch -p1 -d C:/users/cm/_bazel_cm/xv6zejqw/external/png_archive -i C:/tensorflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: Timed out\r\nINFO: Elapsed time: 33,880s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)`\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/430194631", "html_url": "https://github.com/tensorflow/tensorflow/issues/22893#issuecomment-430194631", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22893", "id": 430194631, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDE5NDYzMQ==", "user": {"login": "josephn123", "id": 28803255, "node_id": "MDQ6VXNlcjI4ODAzMjU1", "avatar_url": "https://avatars3.githubusercontent.com/u/28803255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josephn123", "html_url": "https://github.com/josephn123", "followers_url": "https://api.github.com/users/josephn123/followers", "following_url": "https://api.github.com/users/josephn123/following{/other_user}", "gists_url": "https://api.github.com/users/josephn123/gists{/gist_id}", "starred_url": "https://api.github.com/users/josephn123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josephn123/subscriptions", "organizations_url": "https://api.github.com/users/josephn123/orgs", "repos_url": "https://api.github.com/users/josephn123/repos", "events_url": "https://api.github.com/users/josephn123/events{/privacy}", "received_events_url": "https://api.github.com/users/josephn123/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-16T11:01:11Z", "updated_at": "2018-10-16T11:01:11Z", "author_association": "NONE", "body_html": "<p>Thanks for your fast reply. I've pulled the latest revision from tensorflow master, built a new python pip package from source using <a href=\"https://www.tensorflow.org/install/source\" rel=\"nofollow\">these instructions</a> and installed via pip using the built <code>whl</code> file. Still the same issue when trying:</p>\n<pre><code>import tensorflow as tf\n\n\nconverter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(\"model.h5\")\ntflite_model = converter.convert()\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\n</code></pre>\n<p>Results in:</p>\n<pre><code>Traceback (most recent call last):\n  File \"convert.py\", line 4, in &lt;module&gt;\n    converter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(\"model.h5\")\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/lite.py\", line 368, in from_keras_model_file\n    keras_model = _keras.models.load_model(model_file)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/saving.py\", line 230, in load_model\n    model = model_from_config(model_config, custom_objects=custom_objects)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/saving.py\", line 310, in model_from_config\n    return deserialize(config, custom_objects=custom_objects)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/serialization.py\", line 64, in deserialize\n    printable_module_name='layer')\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/utils/generic_utils.py\", line 173, in deserialize_keras_object\n    list(custom_objects.items())))\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/network.py\", line 1319, in from_config\n    process_layer(layer_data)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/network.py\", line 1305, in process_layer\n    layer = deserialize_layer(layer_data, custom_objects=custom_objects)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/serialization.py\", line 64, in deserialize\n    printable_module_name='layer')\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/utils/generic_utils.py\", line 173, in deserialize_keras_object\n    list(custom_objects.items())))\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/sequential.py\", line 340, in from_config\n    model.add(layer)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/training/checkpointable/base.py\", line 474, in _method_wrapper\n    method(self, *args, **kwargs)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/sequential.py\", line 175, in add\n    output_tensor = layer(self.outputs[0])\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 746, in __call__\n    self.build(input_shapes)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/wrappers.py\", line 214, in build\n    self.layer.build(tuple(child_input_shape))\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/core.py\", line 933, in build\n    raise ValueError('The last dimension of the inputs to `Dense` '\nValueError: The last dimension of the inputs to `Dense` should be defined. Found `None`.\n</code></pre>", "body_text": "Thanks for your fast reply. I've pulled the latest revision from tensorflow master, built a new python pip package from source using these instructions and installed via pip using the built whl file. Still the same issue when trying:\nimport tensorflow as tf\n\n\nconverter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(\"model.h5\")\ntflite_model = converter.convert()\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\n\nResults in:\nTraceback (most recent call last):\n  File \"convert.py\", line 4, in <module>\n    converter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(\"model.h5\")\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/lite.py\", line 368, in from_keras_model_file\n    keras_model = _keras.models.load_model(model_file)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/saving.py\", line 230, in load_model\n    model = model_from_config(model_config, custom_objects=custom_objects)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/saving.py\", line 310, in model_from_config\n    return deserialize(config, custom_objects=custom_objects)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/serialization.py\", line 64, in deserialize\n    printable_module_name='layer')\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/utils/generic_utils.py\", line 173, in deserialize_keras_object\n    list(custom_objects.items())))\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/network.py\", line 1319, in from_config\n    process_layer(layer_data)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/network.py\", line 1305, in process_layer\n    layer = deserialize_layer(layer_data, custom_objects=custom_objects)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/serialization.py\", line 64, in deserialize\n    printable_module_name='layer')\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/utils/generic_utils.py\", line 173, in deserialize_keras_object\n    list(custom_objects.items())))\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/sequential.py\", line 340, in from_config\n    model.add(layer)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/training/checkpointable/base.py\", line 474, in _method_wrapper\n    method(self, *args, **kwargs)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/sequential.py\", line 175, in add\n    output_tensor = layer(self.outputs[0])\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 746, in __call__\n    self.build(input_shapes)\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/wrappers.py\", line 214, in build\n    self.layer.build(tuple(child_input_shape))\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/core.py\", line 933, in build\n    raise ValueError('The last dimension of the inputs to `Dense` '\nValueError: The last dimension of the inputs to `Dense` should be defined. Found `None`.", "body": "Thanks for your fast reply. I've pulled the latest revision from tensorflow master, built a new python pip package from source using [these instructions](https://www.tensorflow.org/install/source) and installed via pip using the built `whl` file. Still the same issue when trying:\r\n```\r\nimport tensorflow as tf\r\n\r\n\r\nconverter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(\"model.h5\")\r\ntflite_model = converter.convert()\r\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\r\n```\r\nResults in:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"convert.py\", line 4, in <module>\r\n    converter = tf.contrib.lite.TFLiteConverter.from_keras_model_file(\"model.h5\")\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/python/lite.py\", line 368, in from_keras_model_file\r\n    keras_model = _keras.models.load_model(model_file)\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/saving.py\", line 230, in load_model\r\n    model = model_from_config(model_config, custom_objects=custom_objects)\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/saving.py\", line 310, in model_from_config\r\n    return deserialize(config, custom_objects=custom_objects)\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/serialization.py\", line 64, in deserialize\r\n    printable_module_name='layer')\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/utils/generic_utils.py\", line 173, in deserialize_keras_object\r\n    list(custom_objects.items())))\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/network.py\", line 1319, in from_config\r\n    process_layer(layer_data)\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/network.py\", line 1305, in process_layer\r\n    layer = deserialize_layer(layer_data, custom_objects=custom_objects)\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/serialization.py\", line 64, in deserialize\r\n    printable_module_name='layer')\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/utils/generic_utils.py\", line 173, in deserialize_keras_object\r\n    list(custom_objects.items())))\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/sequential.py\", line 340, in from_config\r\n    model.add(layer)\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/training/checkpointable/base.py\", line 474, in _method_wrapper\r\n    method(self, *args, **kwargs)\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/sequential.py\", line 175, in add\r\n    output_tensor = layer(self.outputs[0])\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 746, in __call__\r\n    self.build(input_shapes)\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/wrappers.py\", line 214, in build\r\n    self.layer.build(tuple(child_input_shape))\r\n  File \"/home/joseph/.local/lib/python3.5/site-packages/tensorflow/python/keras/layers/core.py\", line 933, in build\r\n    raise ValueError('The last dimension of the inputs to `Dense` '\r\nValueError: The last dimension of the inputs to `Dense` should be defined. Found `None`.\r\n```"}
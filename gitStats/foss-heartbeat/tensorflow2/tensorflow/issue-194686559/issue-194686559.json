{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6222", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6222/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6222/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6222/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6222", "id": 194686559, "node_id": "MDU6SXNzdWUxOTQ2ODY1NTk=", "number": 6222, "title": "slice_input_producer output tensor of wrong shape under certain conditions", "user": {"login": "RuohanW", "id": 23221574, "node_id": "MDQ6VXNlcjIzMjIxNTc0", "avatar_url": "https://avatars0.githubusercontent.com/u/23221574?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RuohanW", "html_url": "https://github.com/RuohanW", "followers_url": "https://api.github.com/users/RuohanW/followers", "following_url": "https://api.github.com/users/RuohanW/following{/other_user}", "gists_url": "https://api.github.com/users/RuohanW/gists{/gist_id}", "starred_url": "https://api.github.com/users/RuohanW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RuohanW/subscriptions", "organizations_url": "https://api.github.com/users/RuohanW/orgs", "repos_url": "https://api.github.com/users/RuohanW/repos", "events_url": "https://api.github.com/users/RuohanW/events{/privacy}", "received_events_url": "https://api.github.com/users/RuohanW/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, {"login": "ispirmustafa", "id": 19293677, "node_id": "MDQ6VXNlcjE5MjkzNjc3", "avatar_url": "https://avatars1.githubusercontent.com/u/19293677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ispirmustafa", "html_url": "https://github.com/ispirmustafa", "followers_url": "https://api.github.com/users/ispirmustafa/followers", "following_url": "https://api.github.com/users/ispirmustafa/following{/other_user}", "gists_url": "https://api.github.com/users/ispirmustafa/gists{/gist_id}", "starred_url": "https://api.github.com/users/ispirmustafa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ispirmustafa/subscriptions", "organizations_url": "https://api.github.com/users/ispirmustafa/orgs", "repos_url": "https://api.github.com/users/ispirmustafa/repos", "events_url": "https://api.github.com/users/ispirmustafa/events{/privacy}", "received_events_url": "https://api.github.com/users/ispirmustafa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2016-12-09T20:13:34Z", "updated_at": "2016-12-13T18:12:32Z", "closed_at": "2016-12-13T18:12:32Z", "author_association": "NONE", "body_html": "<p>From the verison<br>\ntensorflow-0.12.0rc0-cp27-cp27mu-manylinux1_x86_64.whl</p>\n<p>When using  tf.train.slice_input_producer with a tensor_list containing only a single tensor, the output from the tf.train.batch has incorrect dimension.</p>\n<p>Code to reproduce it</p>\n<pre><code>import tensorflow as tf\n\ndata=tf.random_uniform(shape=(50, 50))\nlabels=tf.ones(50)\nsample, _=tf.train.slice_input_producer([data, labels])\nbatch=tf.train.batch([sample], batch_size=8)\n\nprint batch\n\nsample=tf.train.slice_input_producer([data])\nbatch=tf.train.batch([sample], batch_size=8)\n\nprint batch\n\n</code></pre>\n<p>the output is</p>\n<pre><code>Tensor(\"batch:0\", shape=(8, 50), dtype=float32)\nTensor(\"batch_1:0\", shape=(8, 1, 50), dtype=float32)\n\n</code></pre>\n<p>I think the two output should be the same? Simple workaround like reshaping the batch data is feasible. However, I think this is a bug.</p>", "body_text": "From the verison\ntensorflow-0.12.0rc0-cp27-cp27mu-manylinux1_x86_64.whl\nWhen using  tf.train.slice_input_producer with a tensor_list containing only a single tensor, the output from the tf.train.batch has incorrect dimension.\nCode to reproduce it\nimport tensorflow as tf\n\ndata=tf.random_uniform(shape=(50, 50))\nlabels=tf.ones(50)\nsample, _=tf.train.slice_input_producer([data, labels])\nbatch=tf.train.batch([sample], batch_size=8)\n\nprint batch\n\nsample=tf.train.slice_input_producer([data])\nbatch=tf.train.batch([sample], batch_size=8)\n\nprint batch\n\n\nthe output is\nTensor(\"batch:0\", shape=(8, 50), dtype=float32)\nTensor(\"batch_1:0\", shape=(8, 1, 50), dtype=float32)\n\n\nI think the two output should be the same? Simple workaround like reshaping the batch data is feasible. However, I think this is a bug.", "body": "From the verison\r\ntensorflow-0.12.0rc0-cp27-cp27mu-manylinux1_x86_64.whl\r\n\r\nWhen using  tf.train.slice_input_producer with a tensor_list containing only a single tensor, the output from the tf.train.batch has incorrect dimension.\r\n\r\nCode to reproduce it\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\ndata=tf.random_uniform(shape=(50, 50))\r\nlabels=tf.ones(50)\r\nsample, _=tf.train.slice_input_producer([data, labels])\r\nbatch=tf.train.batch([sample], batch_size=8)\r\n\r\nprint batch\r\n\r\nsample=tf.train.slice_input_producer([data])\r\nbatch=tf.train.batch([sample], batch_size=8)\r\n\r\nprint batch\r\n\r\n```\r\n\r\nthe output is\r\n\r\n```\r\nTensor(\"batch:0\", shape=(8, 50), dtype=float32)\r\nTensor(\"batch_1:0\", shape=(8, 1, 50), dtype=float32)\r\n\r\n```\r\n\r\nI think the two output should be the same? Simple workaround like reshaping the batch data is feasible. However, I think this is a bug."}
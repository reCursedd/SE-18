{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/375717653", "html_url": "https://github.com/tensorflow/tensorflow/issues/17932#issuecomment-375717653", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17932", "id": 375717653, "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTcxNzY1Mw==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-23T16:12:19Z", "updated_at": "2018-03-23T16:12:19Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1115739\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rsepassi\">@rsepassi</a> Right, that example should fail, and we can't change this even if we wanted to. It works if you instead do <code>dataset.map(lambda x, y: (x, y))</code>.</p>\n<p>I think there might be a missing <code>_should_unpack_args()</code> in the <code>bucket_by_sequence_length</code> code, because making the equivalent change to <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=400331\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/lhlmgr\">@lhlmgr</a>'s program doesn't fix things, i.e.:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">element_length_fn</span>(<span class=\"pl-smi\">features</span>, <span class=\"pl-smi\">label</span>):\n  <span class=\"pl-k\">return</span> tf.shape(features[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>x<span class=\"pl-pds\">\"</span></span>])[<span class=\"pl-c1\">0</span>]</pre></div>\n<p>...still yields the same error:</p>\n<blockquote>\n<p>TypeError: element_to_bucket_id() takes exactly 1 argument (2 given)</p>\n</blockquote>", "body_text": "@rsepassi Right, that example should fail, and we can't change this even if we wanted to. It works if you instead do dataset.map(lambda x, y: (x, y)).\nI think there might be a missing _should_unpack_args() in the bucket_by_sequence_length code, because making the equivalent change to @lhlmgr's program doesn't fix things, i.e.:\ndef element_length_fn(features, label):\n  return tf.shape(features[\"x\"])[0]\n...still yields the same error:\n\nTypeError: element_to_bucket_id() takes exactly 1 argument (2 given)", "body": "@rsepassi Right, that example should fail, and we can't change this even if we wanted to. It works if you instead do `dataset.map(lambda x, y: (x, y))`.\r\n\r\nI think there might be a missing `_should_unpack_args()` in the `bucket_by_sequence_length` code, because making the equivalent change to @lhlmgr's program doesn't fix things, i.e.:\r\n\r\n```python\r\ndef element_length_fn(features, label):\r\n  return tf.shape(features[\"x\"])[0]\r\n```\r\n\r\n...still yields the same error: \r\n\r\n> TypeError: element_to_bucket_id() takes exactly 1 argument (2 given)\r\n"}
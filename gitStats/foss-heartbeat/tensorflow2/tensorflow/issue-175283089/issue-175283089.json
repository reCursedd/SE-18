{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4229", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4229/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4229/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4229/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4229", "id": 175283089, "node_id": "MDU6SXNzdWUxNzUyODMwODk=", "number": 4229, "title": "Tensors have values set to 0 if code is run on GPU.", "user": {"login": "berlogb", "id": 19537028, "node_id": "MDQ6VXNlcjE5NTM3MDI4", "avatar_url": "https://avatars0.githubusercontent.com/u/19537028?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berlogb", "html_url": "https://github.com/berlogb", "followers_url": "https://api.github.com/users/berlogb/followers", "following_url": "https://api.github.com/users/berlogb/following{/other_user}", "gists_url": "https://api.github.com/users/berlogb/gists{/gist_id}", "starred_url": "https://api.github.com/users/berlogb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berlogb/subscriptions", "organizations_url": "https://api.github.com/users/berlogb/orgs", "repos_url": "https://api.github.com/users/berlogb/repos", "events_url": "https://api.github.com/users/berlogb/events{/privacy}", "received_events_url": "https://api.github.com/users/berlogb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2016-09-06T15:50:44Z", "updated_at": "2017-02-12T03:13:50Z", "closed_at": "2016-10-25T22:01:13Z", "author_association": "NONE", "body_html": "<p>Hello team,<br>\nI have a strange issue, which very well might be my own fault, but appreciate if somebody could comment on it.<br>\nTF 0.10 with CUDA 8<br>\nRunning code like this on GPU (GeForce GTX Titan X) :</p>\n<p>`import tensorflow as tf<br>\nimport numpy as np<br>\nwith tf.device(\"/gpu:0\"):<br>\na = tf.placeholder(tf.float32, shape=[2,2])<br>\nb = tf.placeholder(tf.float32, shape=[2,2])<br>\nr = tf.squared_difference(a, b)</p>\n<p>t1 = np.asarray([[1,1],[1,-5]])<br>\nt2 = np.asarray([[2,3],[4,5]])</p>\n<p>feed_dict = {a:t1, b:t2}</p>\n<p>with tf.Session() as sess:<br>\nt1, t2, sd = sess.run([a,b,r], feed_dict=feed_dict)<br>\nprint(\"a = {}\\n b = {}\\n sqared diff = {}\".format(t1, t2, sd))`</p>\n<p>Prints result like this</p>\n<p><code>a = [[ 1.  1.] [ 1. -5.]] b = [[ 2.  3.] [ 4.  5.]] sqared diff = [[ 0.  0.] [ 0.  0.]]</code></p>\n<p>While if I run the same code on CPU , the result is correct<br>\n<code>a = [[ 1.  1.] [ 1. -5.]] b = [[ 2.  3.] [ 4.  5.]] sqared diff = [[   1.    4.] [   9.  100.]]</code></p>\n<p>I'd expect squared_difference to be a perfect operation for GPU and as I tensors \"a\" and \"b\" are populated properly, it doesn't look like TF has issues getting those values into GPU</p>\n<p>Appreciate any comments on this.</p>\n<p>Operating System: 4.4.0-34-generic <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115998800\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/53\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/53/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/53\">#53</a>-Ubuntu</p>\n<p><code>python -c \"import tensorflow; print(tensorflow.__version__)\" I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so.8.0 locally I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so.8.0 locally I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so.8.0 locally 0.10.0rc0</code>.</p>", "body_text": "Hello team,\nI have a strange issue, which very well might be my own fault, but appreciate if somebody could comment on it.\nTF 0.10 with CUDA 8\nRunning code like this on GPU (GeForce GTX Titan X) :\n`import tensorflow as tf\nimport numpy as np\nwith tf.device(\"/gpu:0\"):\na = tf.placeholder(tf.float32, shape=[2,2])\nb = tf.placeholder(tf.float32, shape=[2,2])\nr = tf.squared_difference(a, b)\nt1 = np.asarray([[1,1],[1,-5]])\nt2 = np.asarray([[2,3],[4,5]])\nfeed_dict = {a:t1, b:t2}\nwith tf.Session() as sess:\nt1, t2, sd = sess.run([a,b,r], feed_dict=feed_dict)\nprint(\"a = {}\\n b = {}\\n sqared diff = {}\".format(t1, t2, sd))`\nPrints result like this\na = [[ 1.  1.] [ 1. -5.]] b = [[ 2.  3.] [ 4.  5.]] sqared diff = [[ 0.  0.] [ 0.  0.]]\nWhile if I run the same code on CPU , the result is correct\na = [[ 1.  1.] [ 1. -5.]] b = [[ 2.  3.] [ 4.  5.]] sqared diff = [[   1.    4.] [   9.  100.]]\nI'd expect squared_difference to be a perfect operation for GPU and as I tensors \"a\" and \"b\" are populated properly, it doesn't look like TF has issues getting those values into GPU\nAppreciate any comments on this.\nOperating System: 4.4.0-34-generic #53-Ubuntu\npython -c \"import tensorflow; print(tensorflow.__version__)\" I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so.8.0 locally I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so.8.0 locally I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so.8.0 locally 0.10.0rc0.", "body": "Hello team, \nI have a strange issue, which very well might be my own fault, but appreciate if somebody could comment on it.\nTF 0.10 with CUDA 8\nRunning code like this on GPU (GeForce GTX Titan X) :\n\n`import tensorflow as tf\nimport numpy as np\nwith tf.device(\"/gpu:0\"):\n    a = tf.placeholder(tf.float32, shape=[2,2])\n    b = tf.placeholder(tf.float32, shape=[2,2])\n    r = tf.squared_difference(a, b)\n\nt1 = np.asarray([[1,1],[1,-5]])\nt2 = np.asarray([[2,3],[4,5]])\n\nfeed_dict = {a:t1, b:t2}\n\nwith tf.Session() as sess:\n     t1, t2, sd = sess.run([a,b,r], feed_dict=feed_dict)\n    print(\"a = {}\\n b = {}\\n sqared diff = {}\".format(t1, t2, sd))`\n\nPrints result like this \n\n`a = [[ 1.  1.]\n [ 1. -5.]]\n b = [[ 2.  3.]\n [ 4.  5.]]\n sqared diff = [[ 0.  0.]\n [ 0.  0.]]`\n\nWhile if I run the same code on CPU , the result is correct \n`a = [[ 1.  1.]\n [ 1. -5.]]\n b = [[ 2.  3.]\n [ 4.  5.]]\n sqared diff = [[   1.    4.]\n [   9.  100.]]`\n\nI'd expect squared_difference to be a perfect operation for GPU and as I tensors \"a\" and \"b\" are populated properly, it doesn't look like TF has issues getting those values into GPU\n\nAppreciate any comments on this.\n\nOperating System: 4.4.0-34-generic #53-Ubuntu\n\n`python -c \"import tensorflow; print(tensorflow.__version__)\"\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so.8.0 locally\n0.10.0rc0`.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6061", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6061/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6061/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6061/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6061", "id": 193329984, "node_id": "MDU6SXNzdWUxOTMzMjk5ODQ=", "number": 6061, "title": "Get tensor dimension error when retrain Inception3", "user": {"login": "universewill", "id": 6790730, "node_id": "MDQ6VXNlcjY3OTA3MzA=", "avatar_url": "https://avatars2.githubusercontent.com/u/6790730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/universewill", "html_url": "https://github.com/universewill", "followers_url": "https://api.github.com/users/universewill/followers", "following_url": "https://api.github.com/users/universewill/following{/other_user}", "gists_url": "https://api.github.com/users/universewill/gists{/gist_id}", "starred_url": "https://api.github.com/users/universewill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/universewill/subscriptions", "organizations_url": "https://api.github.com/users/universewill/orgs", "repos_url": "https://api.github.com/users/universewill/repos", "events_url": "https://api.github.com/users/universewill/events{/privacy}", "received_events_url": "https://api.github.com/users/universewill/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-04T03:55:57Z", "updated_at": "2016-12-05T01:47:49Z", "closed_at": "2016-12-05T01:47:49Z", "author_association": "NONE", "body_html": "<p>I followed the 'retrain.py' example, but get error.<br>\nI print the bottleneck tensor shape, and it is [1, 1, 1, 2048]. It runs into error when execute \"tf.placeholder_with_default(<br>\nbottleneck_tensor, shape=[None, BOTTLENECK_TENSOR_SIZE],<br>\nname='BottleneckInputPlaceholder')\"</p>\n<p>It seems that bottleneck_tensor is a tensor with 4 dimension, what does each dimension mean? And Why it is not a 2 dimension tensor?</p>\n<p>My code:</p>\n<pre><code>BOTTLENECK_TENSOR_NAME = 'pool_3:0'\nBOTTLENECK_TENSOR_SIZE = 2048\nsess = tf.InteractiveSession()\ngraph = create_inception_graph()\nbottleneck_tensor = graph.get_tensor_by_name(ensure_name_has_port(\n    BOTTLENECK_TENSOR_NAME))\nprint bottleneck_tensor.get_shape()\n\nbottleneck_input = tf.placeholder_with_default(\n    bottleneck_tensor, shape=[None, BOTTLENECK_TENSOR_SIZE],\n    name='BottleneckInputPlaceholder')\n</code></pre>\n<p>The error:</p>\n<blockquote>\n<p>ValueError: Shapes must be equal rank, but are 4 and 2 for 'BottleneckInputPlaceholder' (op: 'PlaceholderWithDefault') with input shapes: [1,1,1,2048].</p>\n</blockquote>\n<p>The retrain.py:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/image_retraining/retrain.py\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/image_retraining/retrain.py</a></p>", "body_text": "I followed the 'retrain.py' example, but get error.\nI print the bottleneck tensor shape, and it is [1, 1, 1, 2048]. It runs into error when execute \"tf.placeholder_with_default(\nbottleneck_tensor, shape=[None, BOTTLENECK_TENSOR_SIZE],\nname='BottleneckInputPlaceholder')\"\nIt seems that bottleneck_tensor is a tensor with 4 dimension, what does each dimension mean? And Why it is not a 2 dimension tensor?\nMy code:\nBOTTLENECK_TENSOR_NAME = 'pool_3:0'\nBOTTLENECK_TENSOR_SIZE = 2048\nsess = tf.InteractiveSession()\ngraph = create_inception_graph()\nbottleneck_tensor = graph.get_tensor_by_name(ensure_name_has_port(\n    BOTTLENECK_TENSOR_NAME))\nprint bottleneck_tensor.get_shape()\n\nbottleneck_input = tf.placeholder_with_default(\n    bottleneck_tensor, shape=[None, BOTTLENECK_TENSOR_SIZE],\n    name='BottleneckInputPlaceholder')\n\nThe error:\n\nValueError: Shapes must be equal rank, but are 4 and 2 for 'BottleneckInputPlaceholder' (op: 'PlaceholderWithDefault') with input shapes: [1,1,1,2048].\n\nThe retrain.py:\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/image_retraining/retrain.py", "body": "I followed the 'retrain.py' example, but get error.\r\nI print the bottleneck tensor shape, and it is [1, 1, 1, 2048]. It runs into error when execute \"tf.placeholder_with_default(\r\n        bottleneck_tensor, shape=[None, BOTTLENECK_TENSOR_SIZE],\r\n        name='BottleneckInputPlaceholder')\"\r\n\r\nIt seems that bottleneck_tensor is a tensor with 4 dimension, what does each dimension mean? And Why it is not a 2 dimension tensor?\r\n\r\nMy code:\r\n\r\n    BOTTLENECK_TENSOR_NAME = 'pool_3:0'\r\n    BOTTLENECK_TENSOR_SIZE = 2048\r\n    sess = tf.InteractiveSession()\r\n    graph = create_inception_graph()\r\n    bottleneck_tensor = graph.get_tensor_by_name(ensure_name_has_port(\r\n        BOTTLENECK_TENSOR_NAME))\r\n    print bottleneck_tensor.get_shape()\r\n\r\n    bottleneck_input = tf.placeholder_with_default(\r\n        bottleneck_tensor, shape=[None, BOTTLENECK_TENSOR_SIZE],\r\n        name='BottleneckInputPlaceholder')\r\n\r\nThe error:\r\n\r\n> ValueError: Shapes must be equal rank, but are 4 and 2 for 'BottleneckInputPlaceholder' (op: 'PlaceholderWithDefault') with input shapes: [1,1,1,2048].\r\n\r\nThe retrain.py:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/image_retraining/retrain.py"}
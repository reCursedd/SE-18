{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19313", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19313/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19313/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19313/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19313", "id": 323490797, "node_id": "MDU6SXNzdWUzMjM0OTA3OTc=", "number": 19313, "title": "BUG: Arithmetic computations that should be identical are not?", "user": {"login": "dbarta", "id": 920935, "node_id": "MDQ6VXNlcjkyMDkzNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/920935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbarta", "html_url": "https://github.com/dbarta", "followers_url": "https://api.github.com/users/dbarta/followers", "following_url": "https://api.github.com/users/dbarta/following{/other_user}", "gists_url": "https://api.github.com/users/dbarta/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbarta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbarta/subscriptions", "organizations_url": "https://api.github.com/users/dbarta/orgs", "repos_url": "https://api.github.com/users/dbarta/repos", "events_url": "https://api.github.com/users/dbarta/events{/privacy}", "received_events_url": "https://api.github.com/users/dbarta/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-05-16T06:56:59Z", "updated_at": "2018-05-18T17:44:02Z", "closed_at": "2018-05-18T17:41:47Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<p>System information<br>\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): yes<br>\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.13.4<br>\nTensorFlow installed from (source or binary): Binary<br>\nTensorFlow version (use command below): v1.8.0-0-g93bc2e2072 1.8.0<br>\nPython version: 3.5.4<br>\nBazel version (if compiling from source): 0.11.1<br>\nGCC/Compiler version (if compiling from source): 9.1.0<br>\nCUDA/cuDNN version: N/A<br>\nGPU model and memory: N/A<br>\nExact command to reproduce: N/A</p>\n<h3>Describe the problem</h3>\n<p>I'm running two versions of a NN which I expect to produce identical results, but they don't.</p>\n<p>The first version contains as part of the computation:</p>\n<p><code>x = [0.0*a + 1.0*b, 1.0*a + 0.0*b]</code></p>\n<p>The second contains instead:</p>\n<p><code>x = [b, a]</code></p>\n<p>The two runs produce different results. (a and b are both matrices).</p>\n<p>I'm using a constant seed for the random noise input, and I've verified that multiple runs of either of the two above cases produce identical results. Just changing from one case to the other produces different results. The results are not broken in either case (i.e. both cases produce reasonable output), just different.</p>\n<p>This seems like a bug to me.</p>\n<p>Thanks</p>\n<p>EDIT:</p>\n<p>I've also found that doing:</p>\n<p>x = 1.0 * a<br>\nx = 1.0 * (1.0 * a)<br>\nx = tf.identity(a)</p>\n<p>All give different results.</p>\n<p>Looking at this: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"275027016\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14675\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/14675/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/14675\">#14675</a><br>\nApparently the problem is I've made a change to the computation graph.</p>\n<p>I still think this is a bug so I'm going to leave this here. It's very frustrating when obvious things don't work as expected.</p>", "body_text": "System information\nSystem information\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.13.4\nTensorFlow installed from (source or binary): Binary\nTensorFlow version (use command below): v1.8.0-0-g93bc2e2072 1.8.0\nPython version: 3.5.4\nBazel version (if compiling from source): 0.11.1\nGCC/Compiler version (if compiling from source): 9.1.0\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce: N/A\nDescribe the problem\nI'm running two versions of a NN which I expect to produce identical results, but they don't.\nThe first version contains as part of the computation:\nx = [0.0*a + 1.0*b, 1.0*a + 0.0*b]\nThe second contains instead:\nx = [b, a]\nThe two runs produce different results. (a and b are both matrices).\nI'm using a constant seed for the random noise input, and I've verified that multiple runs of either of the two above cases produce identical results. Just changing from one case to the other produces different results. The results are not broken in either case (i.e. both cases produce reasonable output), just different.\nThis seems like a bug to me.\nThanks\nEDIT:\nI've also found that doing:\nx = 1.0 * a\nx = 1.0 * (1.0 * a)\nx = tf.identity(a)\nAll give different results.\nLooking at this: #14675\nApparently the problem is I've made a change to the computation graph.\nI still think this is a bug so I'm going to leave this here. It's very frustrating when obvious things don't work as expected.", "body": "### System information\r\nSystem information\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.13.4\r\nTensorFlow installed from (source or binary): Binary\r\nTensorFlow version (use command below): v1.8.0-0-g93bc2e2072 1.8.0\r\nPython version: 3.5.4\r\nBazel version (if compiling from source): 0.11.1\r\nGCC/Compiler version (if compiling from source): 9.1.0\r\nCUDA/cuDNN version: N/A\r\nGPU model and memory: N/A\r\nExact command to reproduce: N/A\r\n\r\n### Describe the problem\r\n\r\nI'm running two versions of a NN which I expect to produce identical results, but they don't.\r\n\r\nThe first version contains as part of the computation:\r\n\r\n`x = [0.0*a + 1.0*b, 1.0*a + 0.0*b]`\r\n\r\nThe second contains instead:\r\n\r\n`x = [b, a]`\r\n\r\nThe two runs produce different results. (a and b are both matrices).\r\n\r\nI'm using a constant seed for the random noise input, and I've verified that multiple runs of either of the two above cases produce identical results. Just changing from one case to the other produces different results. The results are not broken in either case (i.e. both cases produce reasonable output), just different. \r\n\r\nThis seems like a bug to me.\r\n\r\nThanks\r\n\r\nEDIT: \r\n\r\nI've also found that doing:\r\n\r\nx = 1.0 * a\r\nx = 1.0 * (1.0 * a)\r\nx = tf.identity(a)\r\n\r\nAll give different results.\r\n\r\nLooking at this: https://github.com/tensorflow/tensorflow/issues/14675\r\nApparently the problem is I've made a change to the computation graph. \r\n\r\nI still think this is a bug so I'm going to leave this here. It's very frustrating when obvious things don't work as expected. \r\n\r\n\r\n"}
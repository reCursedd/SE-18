{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/307344526", "html_url": "https://github.com/tensorflow/tensorflow/issues/1419#issuecomment-307344526", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1419", "id": 307344526, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzM0NDUyNg==", "user": {"login": "albertz", "id": 59132, "node_id": "MDQ6VXNlcjU5MTMy", "avatar_url": "https://avatars0.githubusercontent.com/u/59132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albertz", "html_url": "https://github.com/albertz", "followers_url": "https://api.github.com/users/albertz/followers", "following_url": "https://api.github.com/users/albertz/following{/other_user}", "gists_url": "https://api.github.com/users/albertz/gists{/gist_id}", "starred_url": "https://api.github.com/users/albertz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albertz/subscriptions", "organizations_url": "https://api.github.com/users/albertz/orgs", "repos_url": "https://api.github.com/users/albertz/repos", "events_url": "https://api.github.com/users/albertz/events{/privacy}", "received_events_url": "https://api.github.com/users/albertz/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-09T09:39:25Z", "updated_at": "2017-06-09T14:18:35Z", "author_association": "NONE", "body_html": "<p>In case anyone stumbles here because of the <code>undefined symbol: _ZN6google8protobuf8internal26fixed_address_empty_stringE</code> error.</p>\n<p>I compile my file now by using these additional compiler flags:</p>\n<pre><code># Fix for undefined symbol: _ZN6google8protobuf8internal26fixed_address_empty_stringE.\n# https://github.com/tensorflow/tensorflow/issues/1419\nfrom google.protobuf.pyext import _message as msg\nlib = msg.__file__\n\nextra_compiler_flags = [\n    \"-Xlinker\", \"-rpath\", \"-Xlinker\", os.path.dirname(lib),\n    \"-L\", os.path.dirname(lib), \"-l\", \":\" + os.path.basename(lib)]\n</code></pre>\n<p>I add the <code>-rpath</code> so that it finds the file also when it is being loaded.</p>\n<p>Edit: Although I'm not sure if this is correct. I get some strange behavior (see <a href=\"https://stackoverflow.com/questions/44455722/create-my-own-resource-types-tf-resource\" rel=\"nofollow\">here for details</a>). Can someone comment if linking this protobuf is really the correct thing? My <code>ResourceHandle</code> definitely does not behave correctly.</p>", "body_text": "In case anyone stumbles here because of the undefined symbol: _ZN6google8protobuf8internal26fixed_address_empty_stringE error.\nI compile my file now by using these additional compiler flags:\n# Fix for undefined symbol: _ZN6google8protobuf8internal26fixed_address_empty_stringE.\n# https://github.com/tensorflow/tensorflow/issues/1419\nfrom google.protobuf.pyext import _message as msg\nlib = msg.__file__\n\nextra_compiler_flags = [\n    \"-Xlinker\", \"-rpath\", \"-Xlinker\", os.path.dirname(lib),\n    \"-L\", os.path.dirname(lib), \"-l\", \":\" + os.path.basename(lib)]\n\nI add the -rpath so that it finds the file also when it is being loaded.\nEdit: Although I'm not sure if this is correct. I get some strange behavior (see here for details). Can someone comment if linking this protobuf is really the correct thing? My ResourceHandle definitely does not behave correctly.", "body": "In case anyone stumbles here because of the `undefined symbol: _ZN6google8protobuf8internal26fixed_address_empty_stringE` error.\r\n\r\nI compile my file now by using these additional compiler flags:\r\n\r\n```\r\n# Fix for undefined symbol: _ZN6google8protobuf8internal26fixed_address_empty_stringE.\r\n# https://github.com/tensorflow/tensorflow/issues/1419\r\nfrom google.protobuf.pyext import _message as msg\r\nlib = msg.__file__\r\n\r\nextra_compiler_flags = [\r\n    \"-Xlinker\", \"-rpath\", \"-Xlinker\", os.path.dirname(lib),\r\n    \"-L\", os.path.dirname(lib), \"-l\", \":\" + os.path.basename(lib)]\r\n```\r\n\r\nI add the `-rpath` so that it finds the file also when it is being loaded.\r\n\r\nEdit: Although I'm not sure if this is correct. I get some strange behavior (see [here for details](https://stackoverflow.com/questions/44455722/create-my-own-resource-types-tf-resource)). Can someone comment if linking this protobuf is really the correct thing? My `ResourceHandle` definitely does not behave correctly.\r\n"}
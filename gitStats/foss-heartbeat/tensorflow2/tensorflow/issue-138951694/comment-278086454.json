{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/278086454", "html_url": "https://github.com/tensorflow/tensorflow/issues/1419#issuecomment-278086454", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1419", "id": 278086454, "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODA4NjQ1NA==", "user": {"login": "jkiske", "id": 1057200, "node_id": "MDQ6VXNlcjEwNTcyMDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1057200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkiske", "html_url": "https://github.com/jkiske", "followers_url": "https://api.github.com/users/jkiske/followers", "following_url": "https://api.github.com/users/jkiske/following{/other_user}", "gists_url": "https://api.github.com/users/jkiske/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkiske/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkiske/subscriptions", "organizations_url": "https://api.github.com/users/jkiske/orgs", "repos_url": "https://api.github.com/users/jkiske/repos", "events_url": "https://api.github.com/users/jkiske/events{/privacy}", "received_events_url": "https://api.github.com/users/jkiske/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-07T18:02:44Z", "updated_at": "2017-02-07T18:02:44Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=25468229\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/crjensen21\">@crjensen21</a> I fixed the segfault by modifying the build file for reader_base. It no longer pulls in the entire framework, which I think is better, overall.</p>\n<p>This still does not fix the issue with <code>disallowed_deps</code> because we still depend on core</p>\n<div class=\"highlight highlight-source-python\"><pre>cc_library(\n    <span class=\"pl-v\">name</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>reader_base<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-v\">srcs</span> <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>reader_base.cc<span class=\"pl-pds\">\"</span></span>],\n    <span class=\"pl-v\">hdrs</span> <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>reader_base.h<span class=\"pl-pds\">\"</span></span>],\n    <span class=\"pl-v\">deps</span> <span class=\"pl-k\">=</span> [\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>:reader_base_proto_cc<span class=\"pl-pds\">\"</span></span>,\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>//tensorflow/core:framework_headers_lib<span class=\"pl-pds\">\"</span></span>,\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>//third_party/eigen3<span class=\"pl-pds\">\"</span></span>,\n    ],\n)</pre></div>", "body_text": "@crjensen21 I fixed the segfault by modifying the build file for reader_base. It no longer pulls in the entire framework, which I think is better, overall.\nThis still does not fix the issue with disallowed_deps because we still depend on core\ncc_library(\n    name = \"reader_base\",\n    srcs = [\"reader_base.cc\"],\n    hdrs = [\"reader_base.h\"],\n    deps = [\n        \":reader_base_proto_cc\",\n        \"//tensorflow/core:framework_headers_lib\",\n        \"//third_party/eigen3\",\n    ],\n)", "body": "@crjensen21 I fixed the segfault by modifying the build file for reader_base. It no longer pulls in the entire framework, which I think is better, overall.\r\n\r\nThis still does not fix the issue with `disallowed_deps` because we still depend on core\r\n\r\n```python \r\ncc_library(\r\n    name = \"reader_base\",\r\n    srcs = [\"reader_base.cc\"],\r\n    hdrs = [\"reader_base.h\"],\r\n    deps = [\r\n        \":reader_base_proto_cc\",\r\n        \"//tensorflow/core:framework_headers_lib\",\r\n        \"//third_party/eigen3\",\r\n    ],\r\n)"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300126380", "html_url": "https://github.com/tensorflow/tensorflow/issues/1419#issuecomment-300126380", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1419", "id": 300126380, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDEyNjM4MA==", "user": {"login": "yuxiaoguo", "id": 9793449, "node_id": "MDQ6VXNlcjk3OTM0NDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/9793449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuxiaoguo", "html_url": "https://github.com/yuxiaoguo", "followers_url": "https://api.github.com/users/yuxiaoguo/followers", "following_url": "https://api.github.com/users/yuxiaoguo/following{/other_user}", "gists_url": "https://api.github.com/users/yuxiaoguo/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuxiaoguo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuxiaoguo/subscriptions", "organizations_url": "https://api.github.com/users/yuxiaoguo/orgs", "repos_url": "https://api.github.com/users/yuxiaoguo/repos", "events_url": "https://api.github.com/users/yuxiaoguo/events{/privacy}", "received_events_url": "https://api.github.com/users/yuxiaoguo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-09T10:38:07Z", "updated_at": "2017-05-09T11:35:23Z", "author_association": "NONE", "body_html": "<p>I tried to follow the <a href=\"https://www.tensorflow.org/extend/new_data_formats\" rel=\"nofollow\">Custom Data Readers</a> to build my own data reader. However, after adding the code, the compiler reports</p>\n<p>ERROR: /home/ig/Workspace/tensor-graphics/tensorflow-graphics/tensorflow/core/BUILD:1341:1: undeclared inclusion(s) in rule '//tensorflow/core:framework_internal': this rule is missing dependency declarations for the following files included by 'tensorflow/core/framework/reader_base.cc':<br>\n'bazel-out/local_linux-py3-opt/genfiles/tensorflow/core/framework/reader_base.pb.h'.<br>\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build<br>\nUse --verbose_failures to see the command lines of failed build steps.<br>\nINFO: Elapsed time: 137.550s, Critical Path: 103.09s</p>\n<p>I notice this thread <a href=\"https://github.com/tensorflow/tensorflow/issues/1419\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1419/hovercard\">Dependency required for user Reader ops?</a> reported the identity problem. I want to know two things:</p>\n<ol>\n<li>Can we still follow the guideline in the official website to build custom data reader with reader_base?</li>\n<li>If not, are there any new approaches to create a custom data reader?</li>\n</ol>\n<p>Could someone help me about these two questions?</p>\n<p>APPEND:<br>\nI tried to add \"//tensorflow/core:framework_headers_lib\" but failed, with many un-resolved functions. Then, I add \":reader_base\" directly in deps and pass the compile, as:<br>\ncc_library(<br>\nname = \"user_ops_op_lib\",<br>\nsrcs = glob([\"user_ops/**/*.cc\"]),<br>\ncopts = tf_copts(),<br>\nlinkstatic = 1,<br>\nvisibility = [\"//visibility:public\"],<br>\ndeps = [<br>\n\":framework\",<br>\n\":reader_base\",<br>\n# \"//tensorflow/core:framework_headers_lib\"<br>\n],<br>\nalwayslink = 1,<br>\n)</p>\n<p>I am not sure whether will bring some potential risks or not.</p>", "body_text": "I tried to follow the Custom Data Readers to build my own data reader. However, after adding the code, the compiler reports\nERROR: /home/ig/Workspace/tensor-graphics/tensorflow-graphics/tensorflow/core/BUILD:1341:1: undeclared inclusion(s) in rule '//tensorflow/core:framework_internal': this rule is missing dependency declarations for the following files included by 'tensorflow/core/framework/reader_base.cc':\n'bazel-out/local_linux-py3-opt/genfiles/tensorflow/core/framework/reader_base.pb.h'.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 137.550s, Critical Path: 103.09s\nI notice this thread Dependency required for user Reader ops? reported the identity problem. I want to know two things:\n\nCan we still follow the guideline in the official website to build custom data reader with reader_base?\nIf not, are there any new approaches to create a custom data reader?\n\nCould someone help me about these two questions?\nAPPEND:\nI tried to add \"//tensorflow/core:framework_headers_lib\" but failed, with many un-resolved functions. Then, I add \":reader_base\" directly in deps and pass the compile, as:\ncc_library(\nname = \"user_ops_op_lib\",\nsrcs = glob([\"user_ops/**/*.cc\"]),\ncopts = tf_copts(),\nlinkstatic = 1,\nvisibility = [\"//visibility:public\"],\ndeps = [\n\":framework\",\n\":reader_base\",\n# \"//tensorflow/core:framework_headers_lib\"\n],\nalwayslink = 1,\n)\nI am not sure whether will bring some potential risks or not.", "body": "I tried to follow the [Custom Data Readers](https://www.tensorflow.org/extend/new_data_formats) to build my own data reader. However, after adding the code, the compiler reports \r\n\r\nERROR: /home/ig/Workspace/tensor-graphics/tensorflow-graphics/tensorflow/core/BUILD:1341:1: undeclared inclusion(s) in rule '//tensorflow/core:framework_internal': this rule is missing dependency declarations for the following files included by 'tensorflow/core/framework/reader_base.cc': \r\n'bazel-out/local_linux-py3-opt/genfiles/tensorflow/core/framework/reader_base.pb.h'.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 137.550s, Critical Path: 103.09s\r\n\r\nI notice this thread [Dependency required for user Reader ops?](https://github.com/tensorflow/tensorflow/issues/1419) reported the identity problem. I want to know two things:\r\n1. Can we still follow the guideline in the official website to build custom data reader with reader_base?\r\n2. If not, are there any new approaches to create a custom data reader?\r\n\r\nCould someone help me about these two questions?\r\n\r\nAPPEND:\r\nI tried to add \"//tensorflow/core:framework_headers_lib\" but failed, with many un-resolved functions. Then, I add \":reader_base\" directly in deps and pass the compile, as:\r\ncc_library(\r\n    name = \"user_ops_op_lib\",\r\n    srcs = glob([\"user_ops/**/*.cc\"]),\r\n    copts = tf_copts(),\r\n    linkstatic = 1,\r\n    visibility = [\"//visibility:public\"],\r\n    deps = [\r\n        \":framework\",\r\n        \":reader_base\",\r\n        # \"//tensorflow/core:framework_headers_lib\"\r\n    ],\r\n    alwayslink = 1,\r\n)\r\n\r\nI am not sure whether will bring some potential risks or not."}
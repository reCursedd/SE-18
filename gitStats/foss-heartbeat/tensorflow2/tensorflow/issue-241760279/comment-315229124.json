{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/315229124", "html_url": "https://github.com/tensorflow/tensorflow/issues/11411#issuecomment-315229124", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11411", "id": 315229124, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTIyOTEyNA==", "user": {"login": "ahaider3", "id": 8320911, "node_id": "MDQ6VXNlcjgzMjA5MTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/8320911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahaider3", "html_url": "https://github.com/ahaider3", "followers_url": "https://api.github.com/users/ahaider3/followers", "following_url": "https://api.github.com/users/ahaider3/following{/other_user}", "gists_url": "https://api.github.com/users/ahaider3/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahaider3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahaider3/subscriptions", "organizations_url": "https://api.github.com/users/ahaider3/orgs", "repos_url": "https://api.github.com/users/ahaider3/repos", "events_url": "https://api.github.com/users/ahaider3/events{/privacy}", "received_events_url": "https://api.github.com/users/ahaider3/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-13T23:29:12Z", "updated_at": "2017-07-13T23:29:46Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5105569\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/suiyuan2009\">@suiyuan2009</a> I am not seeing that benefit from <code>grpc+rdma</code> on my ib network. Are your results with an updated patch? I am running with TF 1.2.0.</p>\n<p>Here are tests with different chunk sizes:</p>\n<p>For 100 MB chunks with grpc:</p>\n<blockquote>\n<p>Local rate:       19761.24 MB per second<br>\nDistributed rate: 339.71 MB per second</p>\n</blockquote>\n<p>For 512 KB chunks with grpc:</p>\n<blockquote>\n<p>Local rate:       3538.90 MB per second<br>\nDistributed rate: 616.97 MB per second</p>\n</blockquote>\n<p>So decreasing the chunk size by <code>200x</code> only increases throughput by <code>2x</code>. I think the problem of large tensors is important, but small tensor transfer is also slow.</p>", "body_text": "@suiyuan2009 I am not seeing that benefit from grpc+rdma on my ib network. Are your results with an updated patch? I am running with TF 1.2.0.\nHere are tests with different chunk sizes:\nFor 100 MB chunks with grpc:\n\nLocal rate:       19761.24 MB per second\nDistributed rate: 339.71 MB per second\n\nFor 512 KB chunks with grpc:\n\nLocal rate:       3538.90 MB per second\nDistributed rate: 616.97 MB per second\n\nSo decreasing the chunk size by 200x only increases throughput by 2x. I think the problem of large tensors is important, but small tensor transfer is also slow.", "body": "@suiyuan2009 I am not seeing that benefit from `grpc+rdma` on my ib network. Are your results with an updated patch? I am running with TF 1.2.0.\r\n\r\nHere are tests with different chunk sizes:\r\n\r\nFor 100 MB chunks with grpc:\r\n\r\n> Local rate:       19761.24 MB per second\r\n   Distributed rate: 339.71 MB per second\r\n\r\n\r\nFor 512 KB chunks with grpc:\r\n\r\n> Local rate:       3538.90 MB per second\r\n  Distributed rate: 616.97 MB per second\r\n\r\n\r\nSo decreasing the chunk size by `200x` only increases throughput by `2x`. I think the problem of large tensors is important, but small tensor transfer is also slow. "}
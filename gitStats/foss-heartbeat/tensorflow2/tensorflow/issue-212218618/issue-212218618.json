{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8137", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8137/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8137/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8137/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8137", "id": 212218618, "node_id": "MDU6SXNzdWUyMTIyMTg2MTg=", "number": 8137, "title": "Support consistent data_format between tf.layers and everything else", "user": {"login": "taion", "id": 3112159, "node_id": "MDQ6VXNlcjMxMTIxNTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/3112159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taion", "html_url": "https://github.com/taion", "followers_url": "https://api.github.com/users/taion/followers", "following_url": "https://api.github.com/users/taion/following{/other_user}", "gists_url": "https://api.github.com/users/taion/gists{/gist_id}", "starred_url": "https://api.github.com/users/taion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taion/subscriptions", "organizations_url": "https://api.github.com/users/taion/orgs", "repos_url": "https://api.github.com/users/taion/repos", "events_url": "https://api.github.com/users/taion/events{/privacy}", "received_events_url": "https://api.github.com/users/taion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-03-06T19:06:22Z", "updated_at": "2018-02-24T01:05:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>The functions in <code>tf.layers</code> take a <code>data_format</code> parameter. However, this parameter has different semantics from the identically named <code>data_format</code> parameter everywhere else in TensorFlow. It's expected to be <code>channels_first</code> or <code>channels_last</code>, versus <code>NHWC</code>, <code>NCHW</code>, or <code>NDHWC</code> everywhere else. As such, it's inconvenient from a DX perspective to intersperse <code>tf.layers</code> code with other TensorFlow code, as it requires passing different values for the identically-named <code>data_format</code> parameter.</p>\n<p>Ideally, the functions in <code>tf.layers</code> should support the more explicit <code>data_format</code> strings. While <code>channels_first</code> and <code>channels_last</code> are easier to understand, they're less explicit, as there do exist cases outside of TensorFlow where the tensor layout is CHWN, given which <code>channels_first</code> meaning <code>NCHW</code> is not optimally clear.</p>\n<p>On the same note, it's a bit inconvenient that <code>tf.layers.batch_normalization</code> takes <code>axis</code> instead of <code>data_format</code>; while this is more correct, it makes it annoying to switch back and forth, especially that the fused batch norm implementation only supports NHWC and NCHW anyway, rather than batch norm on an arbitrary axis.</p>", "body_text": "The functions in tf.layers take a data_format parameter. However, this parameter has different semantics from the identically named data_format parameter everywhere else in TensorFlow. It's expected to be channels_first or channels_last, versus NHWC, NCHW, or NDHWC everywhere else. As such, it's inconvenient from a DX perspective to intersperse tf.layers code with other TensorFlow code, as it requires passing different values for the identically-named data_format parameter.\nIdeally, the functions in tf.layers should support the more explicit data_format strings. While channels_first and channels_last are easier to understand, they're less explicit, as there do exist cases outside of TensorFlow where the tensor layout is CHWN, given which channels_first meaning NCHW is not optimally clear.\nOn the same note, it's a bit inconvenient that tf.layers.batch_normalization takes axis instead of data_format; while this is more correct, it makes it annoying to switch back and forth, especially that the fused batch norm implementation only supports NHWC and NCHW anyway, rather than batch norm on an arbitrary axis.", "body": "The functions in `tf.layers` take a `data_format` parameter. However, this parameter has different semantics from the identically named `data_format` parameter everywhere else in TensorFlow. It's expected to be `channels_first` or `channels_last`, versus `NHWC`, `NCHW`, or `NDHWC` everywhere else. As such, it's inconvenient from a DX perspective to intersperse `tf.layers` code with other TensorFlow code, as it requires passing different values for the identically-named `data_format` parameter.\r\n\r\nIdeally, the functions in `tf.layers` should support the more explicit `data_format` strings. While `channels_first` and `channels_last` are easier to understand, they're less explicit, as there do exist cases outside of TensorFlow where the tensor layout is CHWN, given which `channels_first` meaning `NCHW` is not optimally clear.\r\n\r\nOn the same note, it's a bit inconvenient that `tf.layers.batch_normalization` takes `axis` instead of `data_format`; while this is more correct, it makes it annoying to switch back and forth, especially that the fused batch norm implementation only supports NHWC and NCHW anyway, rather than batch norm on an arbitrary axis."}
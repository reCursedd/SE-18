{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300301572", "html_url": "https://github.com/tensorflow/tensorflow/issues/2153#issuecomment-300301572", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2153", "id": 300301572, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDMwMTU3Mg==", "user": {"login": "XapaJIaMnu", "id": 2027221, "node_id": "MDQ6VXNlcjIwMjcyMjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/2027221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/XapaJIaMnu", "html_url": "https://github.com/XapaJIaMnu", "followers_url": "https://api.github.com/users/XapaJIaMnu/followers", "following_url": "https://api.github.com/users/XapaJIaMnu/following{/other_user}", "gists_url": "https://api.github.com/users/XapaJIaMnu/gists{/gist_id}", "starred_url": "https://api.github.com/users/XapaJIaMnu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/XapaJIaMnu/subscriptions", "organizations_url": "https://api.github.com/users/XapaJIaMnu/orgs", "repos_url": "https://api.github.com/users/XapaJIaMnu/repos", "events_url": "https://api.github.com/users/XapaJIaMnu/events{/privacy}", "received_events_url": "https://api.github.com/users/XapaJIaMnu/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-09T21:06:42Z", "updated_at": "2017-05-09T21:06:42Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=70511\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/girving\">@girving</a> , I'm actually running Arch and I see the same problem, even when I build it myself.<br>\nHere's my build process:</p>\n<div class=\"highlight highlight-source-shell\"><pre>  <span class=\"pl-k\">export</span> PYTHON_BIN_PATH=/usr/bin/python\n  <span class=\"pl-k\">export</span> USE_DEFAULT_PYTHON_LIB_PATH=1\n  <span class=\"pl-k\">export</span> CC_OPT_FLAGS=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-march=native -O3<span class=\"pl-pds\">\"</span></span>\n  <span class=\"pl-k\">export</span> TF_NEED_JEMALLOC=1\n  <span class=\"pl-k\">export</span> TF_NEED_GCP=0\n  <span class=\"pl-k\">export</span> TF_NEED_HDFS=0\n  <span class=\"pl-k\">export</span> TF_ENABLE_XLA=1\n  <span class=\"pl-k\">export</span> TF_NEED_VERBS=0\n  <span class=\"pl-k\">export</span> TF_NEED_OPENCL=0\n  <span class=\"pl-k\">export</span> TF_NEED_CUDA=1\n  <span class=\"pl-k\">export</span> GCC_HOST_COMPILER_PATH=/usr/bin/gcc-5\n  <span class=\"pl-k\">export</span> CUDA_TOOLKIT_PATH=/opt/cuda\n  <span class=\"pl-k\">export</span> TF_CUDA_VERSION=<span class=\"pl-s\"><span class=\"pl-pds\">$(</span><span class=\"pl-smi\">$CUDA_TOOLKIT_PATH</span>/bin/nvcc --version <span class=\"pl-k\">|</span> sed -n <span class=\"pl-s\"><span class=\"pl-pds\">'</span>s/^.*release \\(.*\\),.*/\\1/p<span class=\"pl-pds\">'</span></span><span class=\"pl-pds\">)</span></span>\n  <span class=\"pl-k\">export</span> CUDNN_INSTALL_PATH=/opt/cuda\n  <span class=\"pl-k\">export</span> TF_CUDNN_VERSION=<span class=\"pl-s\"><span class=\"pl-pds\">$(</span>sed -n <span class=\"pl-s\"><span class=\"pl-pds\">'</span>s/^#define CUDNN_MAJOR\\s*\\(.*\\).*/\\1/p<span class=\"pl-pds\">'</span></span> <span class=\"pl-smi\">$CUDNN_INSTALL_PATH</span>/include/cudnn.h<span class=\"pl-pds\">)</span></span>\n  <span class=\"pl-k\">export</span> TF_CUDA_COMPUTE_CAPABILITIES=5.2\n  \n./configure\n  bazel build --config=opt --config=cuda //tensorflow:libtensorflow.so //tensorflow/tools/pip_package:build_pip_package\n  bazel-bin/tensorflow/tools/pip_package/build_pip_package <span class=\"pl-smi\">${srcdir}</span>/tmp</pre></div>\n<p>Could you tell me what flag am I missing?<br>\nCheers,</p>\n<p>Nick</p>", "body_text": "@girving , I'm actually running Arch and I see the same problem, even when I build it myself.\nHere's my build process:\n  export PYTHON_BIN_PATH=/usr/bin/python\n  export USE_DEFAULT_PYTHON_LIB_PATH=1\n  export CC_OPT_FLAGS=\"-march=native -O3\"\n  export TF_NEED_JEMALLOC=1\n  export TF_NEED_GCP=0\n  export TF_NEED_HDFS=0\n  export TF_ENABLE_XLA=1\n  export TF_NEED_VERBS=0\n  export TF_NEED_OPENCL=0\n  export TF_NEED_CUDA=1\n  export GCC_HOST_COMPILER_PATH=/usr/bin/gcc-5\n  export CUDA_TOOLKIT_PATH=/opt/cuda\n  export TF_CUDA_VERSION=$($CUDA_TOOLKIT_PATH/bin/nvcc --version | sed -n 's/^.*release \\(.*\\),.*/\\1/p')\n  export CUDNN_INSTALL_PATH=/opt/cuda\n  export TF_CUDNN_VERSION=$(sed -n 's/^#define CUDNN_MAJOR\\s*\\(.*\\).*/\\1/p' $CUDNN_INSTALL_PATH/include/cudnn.h)\n  export TF_CUDA_COMPUTE_CAPABILITIES=5.2\n  \n./configure\n  bazel build --config=opt --config=cuda //tensorflow:libtensorflow.so //tensorflow/tools/pip_package:build_pip_package\n  bazel-bin/tensorflow/tools/pip_package/build_pip_package ${srcdir}/tmp\nCould you tell me what flag am I missing?\nCheers,\nNick", "body": "@girving , I'm actually running Arch and I see the same problem, even when I build it myself.\r\nHere's my build process:\r\n```bash\r\n  export PYTHON_BIN_PATH=/usr/bin/python\r\n  export USE_DEFAULT_PYTHON_LIB_PATH=1\r\n  export CC_OPT_FLAGS=\"-march=native -O3\"\r\n  export TF_NEED_JEMALLOC=1\r\n  export TF_NEED_GCP=0\r\n  export TF_NEED_HDFS=0\r\n  export TF_ENABLE_XLA=1\r\n  export TF_NEED_VERBS=0\r\n  export TF_NEED_OPENCL=0\r\n  export TF_NEED_CUDA=1\r\n  export GCC_HOST_COMPILER_PATH=/usr/bin/gcc-5\r\n  export CUDA_TOOLKIT_PATH=/opt/cuda\r\n  export TF_CUDA_VERSION=$($CUDA_TOOLKIT_PATH/bin/nvcc --version | sed -n 's/^.*release \\(.*\\),.*/\\1/p')\r\n  export CUDNN_INSTALL_PATH=/opt/cuda\r\n  export TF_CUDNN_VERSION=$(sed -n 's/^#define CUDNN_MAJOR\\s*\\(.*\\).*/\\1/p' $CUDNN_INSTALL_PATH/include/cudnn.h)\r\n  export TF_CUDA_COMPUTE_CAPABILITIES=5.2\r\n  \r\n./configure\r\n  bazel build --config=opt --config=cuda //tensorflow:libtensorflow.so //tensorflow/tools/pip_package:build_pip_package\r\n  bazel-bin/tensorflow/tools/pip_package/build_pip_package ${srcdir}/tmp\r\n```\r\nCould you tell me what flag am I missing?\r\nCheers,\r\n\r\nNick"}
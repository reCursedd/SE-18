{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13011", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13011/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13011/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13011/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13011", "id": 257323733, "node_id": "MDU6SXNzdWUyNTczMjM3MzM=", "number": 13011, "title": "Failed to run the benchmark_model", "user": {"login": "tankienleong", "id": 25731934, "node_id": "MDQ6VXNlcjI1NzMxOTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/25731934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tankienleong", "html_url": "https://github.com/tankienleong", "followers_url": "https://api.github.com/users/tankienleong/followers", "following_url": "https://api.github.com/users/tankienleong/following{/other_user}", "gists_url": "https://api.github.com/users/tankienleong/gists{/gist_id}", "starred_url": "https://api.github.com/users/tankienleong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tankienleong/subscriptions", "organizations_url": "https://api.github.com/users/tankienleong/orgs", "repos_url": "https://api.github.com/users/tankienleong/repos", "events_url": "https://api.github.com/users/tankienleong/events{/privacy}", "received_events_url": "https://api.github.com/users/tankienleong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-13T09:59:12Z", "updated_at": "2017-10-31T07:57:18Z", "closed_at": "2017-10-31T07:57:18Z", "author_association": "NONE", "body_html": "<p>System information</p>\n<ul>\n<li>Have I written custom code: No</li>\n<li>OS Platform and Distribution: Linux Ubuntu 14.04</li>\n<li>TensorFlow installed from: source</li>\n<li>TensorFlow version: ('v1.3.0-rc1-1951-g04c318b', '1.3.0')</li>\n<li>Python version: 2.7.12</li>\n<li>Bazel version (if compiling from source): 0.5.0</li>\n<li>CUDA/cuDNN version: 8.0/5.1</li>\n<li>GPU model and memory: Quadro M4000 8Gb<br>\nExact command to reproduce: bazel-bin/tensorflow/tools/benchmark/benchmark_model   --graph=inception5h/tensorflow_inception_graph.pb   --input_layer=\"input:0\"   --input_layer_shape=\"1,224,224,3\"   --input_layer_type=\"float\" --output_layer=\"output:0\" --show_run_order=false --show_time=false --show_memory=false --show_summary=false --show_flops=true</li>\n</ul>\n<p>Problem<br>\nI follow the instruction on <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/benchmark\">https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/benchmark</a> to run the benchmark_model on desktop but it failed when I set the --show_flops=true. The tensorflow_inception_graph.pb is downloaded from the link provided on the page.</p>\n<p>Logs<br>\n(my_project) ubuntu@ubuntu-desktop:~/Desktop/virtualroiflow/tensorflow$ bazel-bin/tensorflow/tools/benchmark/benchmark_model   --graph=inception5h/tensorflow_inception_graph.pb   --input_layer=\"input:0\"   --input_layer_shape=\"1,224,224,3\"   --input_layer_type=\"float\" --output_layer=\"output:0\" --show_run_order=false --show_time=false --show_memory=false --show_summary=false --show_flops=true<br>\n2017-09-13 17:53:21.911797: I tensorflow/tools/benchmark/benchmark_model.cc:426] Graph: [inception5h/tensorflow_inception_graph.pb]<br>\n2017-09-13 17:53:21.911837: I tensorflow/tools/benchmark/benchmark_model.cc:427] Input layers: [input:0]<br>\n2017-09-13 17:53:21.911841: I tensorflow/tools/benchmark/benchmark_model.cc:428] Input shapes: [1,224,224,3]<br>\n2017-09-13 17:53:21.911844: I tensorflow/tools/benchmark/benchmark_model.cc:429] Input types: [float]<br>\n2017-09-13 17:53:21.911846: I tensorflow/tools/benchmark/benchmark_model.cc:430] Output layers: [output:0]<br>\n2017-09-13 17:53:21.911852: I tensorflow/tools/benchmark/benchmark_model.cc:431] Num runs: [1000]<br>\n2017-09-13 17:53:21.911870: I tensorflow/tools/benchmark/benchmark_model.cc:432] Inter-inference delay (seconds): [-1.0]<br>\n2017-09-13 17:53:21.911873: I tensorflow/tools/benchmark/benchmark_model.cc:433] Inter-benchmark delay (seconds): [-1.0]<br>\n2017-09-13 17:53:21.911877: I tensorflow/tools/benchmark/benchmark_model.cc:435] Num threads: [-1]<br>\n2017-09-13 17:53:21.911894: I tensorflow/tools/benchmark/benchmark_model.cc:436] Benchmark name: []<br>\n2017-09-13 17:53:21.911897: I tensorflow/tools/benchmark/benchmark_model.cc:437] Output prefix: []<br>\n2017-09-13 17:53:21.911900: I tensorflow/tools/benchmark/benchmark_model.cc:438] Show sizes: [0]<br>\n2017-09-13 17:53:21.911917: I tensorflow/tools/benchmark/benchmark_model.cc:439] Warmup runs: [2]<br>\n2017-09-13 17:53:21.911920: I tensorflow/tools/benchmark/benchmark_model.cc:54] Loading TensorFlow.<br>\n2017-09-13 17:53:21.911941: I tensorflow/tools/benchmark/benchmark_model.cc:61] Got config, 0 devices<br>\n2017-09-13 17:53:21.912358: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA<br>\n2017-09-13 17:53:22.022462: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero<br>\n2017-09-13 17:53:22.022832: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Found device 0 with properties:<br>\nname: Quadro M4000 major: 5 minor: 2 memoryClockRate(GHz): 0.7725<br>\npciBusID: 0000:01:00.0<br>\ntotalMemory: 7.93GiB freeMemory: 7.61GiB<br>\n2017-09-13 17:53:22.022864: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1055] Creating TensorFlow device (/device:GPU:0) -&gt; (device: 0, name: Quadro M4000, pci bus id: 0000:01:00.0, compute capability: 5.2)<br>\n2017-09-13 17:53:22.078421: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"CPU\" label: \"sergey\"') for unknown op: Fact<br>\n2017-09-13 17:53:22.078460: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"CPU\" label: \"Sergey\"') for unknown op: Fact<br>\n2017-09-13 17:53:22.078466: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"GPU\" host_memory_arg: \"fact\"') for unknown op: Fact<br>\n2017-09-13 17:53:22.081269: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 2 iterations, max -1 seconds without detailed stat logging, with -1s sleep between inferences<br>\n2017-09-13 17:53:22.173360: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=2 first=59501 curr=32424 min=32424 max=59501 avg=45962.5 std=13538</p>\n<p>2017-09-13 17:53:22.173384: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 1000 iterations, max 10 seconds without detailed stat logging, with -1s sleep between inferences<br>\n2017-09-13 17:53:32.199487: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=316 first=33259 curr=33929 min=29881 max=34487 avg=31683.6 std=684</p>\n<p>2017-09-13 17:53:32.199512: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 1000 iterations, max 10 seconds with detailed stat logging, with -1s sleep between inferences<br>\n2017-09-13 17:53:32.200083: I tensorflow/stream_executor/dso_loader.cc:139] successfully opened CUDA library libcupti.so.8.0 locally<br>\n2017-09-13 17:53:42.310948: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=316 first=51892 curr=32599 min=29882 max=51892 avg=31710.3 std=1338</p>\n<p>2017-09-13 17:53:42.310986: I tensorflow/tools/benchmark/benchmark_model.cc:538] Average inference timings in us: Warmup: 45962, no stats: 31683, with stats: 31710<br>\n2017-09-13 17:53:42.311006: I tensorflow/core/util/stat_summarizer.cc:358] Number of nodes executed: 141<br>\n2017-09-13 17:53:42.311157: I tensorflow/core/util/stat_summarizer.cc:468] ============================== Summary by node type ==============================<br>\n2017-09-13 17:53:42.311162: I tensorflow/core/util/stat_summarizer.cc:468] \t             [Node type]\t  [count]\t  [avg ms]\t    [avg %]\t    [cdf %]\t  [mem KB]\t[times called]<br>\n2017-09-13 17:53:42.311166: I tensorflow/core/util/stat_summarizer.cc:468] \t                  Conv2D\t       22\t    35.377\t    76.119%\t    76.119%\t 10077.888\t       22<br>\n2017-09-13 17:53:42.311170: I tensorflow/core/util/stat_summarizer.cc:468] \t                     LRN\t        2\t     4.296\t     9.243%\t    85.362%\t  3211.264\t        2<br>\n2017-09-13 17:53:42.311173: I tensorflow/core/util/stat_summarizer.cc:468] \t                 MaxPool\t        6\t     3.124\t     6.722%\t    92.084%\t  3562.496\t        6<br>\n2017-09-13 17:53:42.311177: I tensorflow/core/util/stat_summarizer.cc:468] \t                 BiasAdd\t       24\t     1.677\t     3.608%\t    95.692%\t     0.000\t       24<br>\n2017-09-13 17:53:42.311195: I tensorflow/core/util/stat_summarizer.cc:468] \t                    Relu\t       23\t     0.740\t     1.592%\t    97.285%\t     0.000\t       23<br>\n2017-09-13 17:53:42.311199: I tensorflow/core/util/stat_summarizer.cc:468] \t                  MatMul\t        2\t     0.703\t     1.513%\t    98.797%\t     8.128\t        2<br>\n2017-09-13 17:53:42.311216: I tensorflow/core/util/stat_summarizer.cc:468] \t                  Concat\t        3\t     0.375\t     0.807%\t    99.604%\t  2706.368\t        3<br>\n2017-09-13 17:53:42.311220: I tensorflow/core/util/stat_summarizer.cc:468] \t                   Const\t       51\t     0.082\t     0.176%\t    99.781%\t     0.000\t       51<br>\n2017-09-13 17:53:42.311225: I tensorflow/core/util/stat_summarizer.cc:468] \t                 AvgPool\t        1\t     0.057\t     0.123%\t    99.903%\t    32.512\t        1<br>\n2017-09-13 17:53:42.311229: I tensorflow/core/util/stat_summarizer.cc:468] \t                 Softmax\t        1\t     0.028\t     0.060%\t    99.963%\t     0.000\t        1<br>\n2017-09-13 17:53:42.311232: I tensorflow/core/util/stat_summarizer.cc:468] \t                    NoOp\t        1\t     0.006\t     0.013%\t    99.976%\t     0.000\t        1<br>\n2017-09-13 17:53:42.311236: I tensorflow/core/util/stat_summarizer.cc:468] \t                    _Arg\t        1\t     0.004\t     0.009%\t    99.985%\t     0.000\t        1<br>\n2017-09-13 17:53:42.311252: I tensorflow/core/util/stat_summarizer.cc:468] \t                 _Retval\t        1\t     0.003\t     0.006%\t    99.991%\t     0.000\t        1<br>\n2017-09-13 17:53:42.311256: I tensorflow/core/util/stat_summarizer.cc:468] \t                 Reshape\t        2\t     0.003\t     0.006%\t    99.998%\t     0.000\t        2<br>\n2017-09-13 17:53:42.311274: I tensorflow/core/util/stat_summarizer.cc:468] \t                Identity\t        1\t     0.001\t     0.002%\t   100.000%\t     0.000\t        1<br>\n2017-09-13 17:53:42.311278: I tensorflow/core/util/stat_summarizer.cc:468]<br>\n2017-09-13 17:53:42.416261: E tensorflow/tools/benchmark/benchmark_model.cc:556] FLOPs calculation failed with Invalid argument: You must feed a value for placeholder tensor 'input' with dtype float<br>\n[[Node: input = Placeholder<a href=\"\">dtype=DT_FLOAT, shape=[], _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]</p>", "body_text": "System information\n\nHave I written custom code: No\nOS Platform and Distribution: Linux Ubuntu 14.04\nTensorFlow installed from: source\nTensorFlow version: ('v1.3.0-rc1-1951-g04c318b', '1.3.0')\nPython version: 2.7.12\nBazel version (if compiling from source): 0.5.0\nCUDA/cuDNN version: 8.0/5.1\nGPU model and memory: Quadro M4000 8Gb\nExact command to reproduce: bazel-bin/tensorflow/tools/benchmark/benchmark_model   --graph=inception5h/tensorflow_inception_graph.pb   --input_layer=\"input:0\"   --input_layer_shape=\"1,224,224,3\"   --input_layer_type=\"float\" --output_layer=\"output:0\" --show_run_order=false --show_time=false --show_memory=false --show_summary=false --show_flops=true\n\nProblem\nI follow the instruction on https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/benchmark to run the benchmark_model on desktop but it failed when I set the --show_flops=true. The tensorflow_inception_graph.pb is downloaded from the link provided on the page.\nLogs\n(my_project) ubuntu@ubuntu-desktop:~/Desktop/virtualroiflow/tensorflow$ bazel-bin/tensorflow/tools/benchmark/benchmark_model   --graph=inception5h/tensorflow_inception_graph.pb   --input_layer=\"input:0\"   --input_layer_shape=\"1,224,224,3\"   --input_layer_type=\"float\" --output_layer=\"output:0\" --show_run_order=false --show_time=false --show_memory=false --show_summary=false --show_flops=true\n2017-09-13 17:53:21.911797: I tensorflow/tools/benchmark/benchmark_model.cc:426] Graph: [inception5h/tensorflow_inception_graph.pb]\n2017-09-13 17:53:21.911837: I tensorflow/tools/benchmark/benchmark_model.cc:427] Input layers: [input:0]\n2017-09-13 17:53:21.911841: I tensorflow/tools/benchmark/benchmark_model.cc:428] Input shapes: [1,224,224,3]\n2017-09-13 17:53:21.911844: I tensorflow/tools/benchmark/benchmark_model.cc:429] Input types: [float]\n2017-09-13 17:53:21.911846: I tensorflow/tools/benchmark/benchmark_model.cc:430] Output layers: [output:0]\n2017-09-13 17:53:21.911852: I tensorflow/tools/benchmark/benchmark_model.cc:431] Num runs: [1000]\n2017-09-13 17:53:21.911870: I tensorflow/tools/benchmark/benchmark_model.cc:432] Inter-inference delay (seconds): [-1.0]\n2017-09-13 17:53:21.911873: I tensorflow/tools/benchmark/benchmark_model.cc:433] Inter-benchmark delay (seconds): [-1.0]\n2017-09-13 17:53:21.911877: I tensorflow/tools/benchmark/benchmark_model.cc:435] Num threads: [-1]\n2017-09-13 17:53:21.911894: I tensorflow/tools/benchmark/benchmark_model.cc:436] Benchmark name: []\n2017-09-13 17:53:21.911897: I tensorflow/tools/benchmark/benchmark_model.cc:437] Output prefix: []\n2017-09-13 17:53:21.911900: I tensorflow/tools/benchmark/benchmark_model.cc:438] Show sizes: [0]\n2017-09-13 17:53:21.911917: I tensorflow/tools/benchmark/benchmark_model.cc:439] Warmup runs: [2]\n2017-09-13 17:53:21.911920: I tensorflow/tools/benchmark/benchmark_model.cc:54] Loading TensorFlow.\n2017-09-13 17:53:21.911941: I tensorflow/tools/benchmark/benchmark_model.cc:61] Got config, 0 devices\n2017-09-13 17:53:21.912358: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\n2017-09-13 17:53:22.022462: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-09-13 17:53:22.022832: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Found device 0 with properties:\nname: Quadro M4000 major: 5 minor: 2 memoryClockRate(GHz): 0.7725\npciBusID: 0000:01:00.0\ntotalMemory: 7.93GiB freeMemory: 7.61GiB\n2017-09-13 17:53:22.022864: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1055] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Quadro M4000, pci bus id: 0000:01:00.0, compute capability: 5.2)\n2017-09-13 17:53:22.078421: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"CPU\" label: \"sergey\"') for unknown op: Fact\n2017-09-13 17:53:22.078460: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"CPU\" label: \"Sergey\"') for unknown op: Fact\n2017-09-13 17:53:22.078466: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"GPU\" host_memory_arg: \"fact\"') for unknown op: Fact\n2017-09-13 17:53:22.081269: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 2 iterations, max -1 seconds without detailed stat logging, with -1s sleep between inferences\n2017-09-13 17:53:22.173360: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=2 first=59501 curr=32424 min=32424 max=59501 avg=45962.5 std=13538\n2017-09-13 17:53:22.173384: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 1000 iterations, max 10 seconds without detailed stat logging, with -1s sleep between inferences\n2017-09-13 17:53:32.199487: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=316 first=33259 curr=33929 min=29881 max=34487 avg=31683.6 std=684\n2017-09-13 17:53:32.199512: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 1000 iterations, max 10 seconds with detailed stat logging, with -1s sleep between inferences\n2017-09-13 17:53:32.200083: I tensorflow/stream_executor/dso_loader.cc:139] successfully opened CUDA library libcupti.so.8.0 locally\n2017-09-13 17:53:42.310948: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=316 first=51892 curr=32599 min=29882 max=51892 avg=31710.3 std=1338\n2017-09-13 17:53:42.310986: I tensorflow/tools/benchmark/benchmark_model.cc:538] Average inference timings in us: Warmup: 45962, no stats: 31683, with stats: 31710\n2017-09-13 17:53:42.311006: I tensorflow/core/util/stat_summarizer.cc:358] Number of nodes executed: 141\n2017-09-13 17:53:42.311157: I tensorflow/core/util/stat_summarizer.cc:468] ============================== Summary by node type ==============================\n2017-09-13 17:53:42.311162: I tensorflow/core/util/stat_summarizer.cc:468] \t             [Node type]\t  [count]\t  [avg ms]\t    [avg %]\t    [cdf %]\t  [mem KB]\t[times called]\n2017-09-13 17:53:42.311166: I tensorflow/core/util/stat_summarizer.cc:468] \t                  Conv2D\t       22\t    35.377\t    76.119%\t    76.119%\t 10077.888\t       22\n2017-09-13 17:53:42.311170: I tensorflow/core/util/stat_summarizer.cc:468] \t                     LRN\t        2\t     4.296\t     9.243%\t    85.362%\t  3211.264\t        2\n2017-09-13 17:53:42.311173: I tensorflow/core/util/stat_summarizer.cc:468] \t                 MaxPool\t        6\t     3.124\t     6.722%\t    92.084%\t  3562.496\t        6\n2017-09-13 17:53:42.311177: I tensorflow/core/util/stat_summarizer.cc:468] \t                 BiasAdd\t       24\t     1.677\t     3.608%\t    95.692%\t     0.000\t       24\n2017-09-13 17:53:42.311195: I tensorflow/core/util/stat_summarizer.cc:468] \t                    Relu\t       23\t     0.740\t     1.592%\t    97.285%\t     0.000\t       23\n2017-09-13 17:53:42.311199: I tensorflow/core/util/stat_summarizer.cc:468] \t                  MatMul\t        2\t     0.703\t     1.513%\t    98.797%\t     8.128\t        2\n2017-09-13 17:53:42.311216: I tensorflow/core/util/stat_summarizer.cc:468] \t                  Concat\t        3\t     0.375\t     0.807%\t    99.604%\t  2706.368\t        3\n2017-09-13 17:53:42.311220: I tensorflow/core/util/stat_summarizer.cc:468] \t                   Const\t       51\t     0.082\t     0.176%\t    99.781%\t     0.000\t       51\n2017-09-13 17:53:42.311225: I tensorflow/core/util/stat_summarizer.cc:468] \t                 AvgPool\t        1\t     0.057\t     0.123%\t    99.903%\t    32.512\t        1\n2017-09-13 17:53:42.311229: I tensorflow/core/util/stat_summarizer.cc:468] \t                 Softmax\t        1\t     0.028\t     0.060%\t    99.963%\t     0.000\t        1\n2017-09-13 17:53:42.311232: I tensorflow/core/util/stat_summarizer.cc:468] \t                    NoOp\t        1\t     0.006\t     0.013%\t    99.976%\t     0.000\t        1\n2017-09-13 17:53:42.311236: I tensorflow/core/util/stat_summarizer.cc:468] \t                    _Arg\t        1\t     0.004\t     0.009%\t    99.985%\t     0.000\t        1\n2017-09-13 17:53:42.311252: I tensorflow/core/util/stat_summarizer.cc:468] \t                 _Retval\t        1\t     0.003\t     0.006%\t    99.991%\t     0.000\t        1\n2017-09-13 17:53:42.311256: I tensorflow/core/util/stat_summarizer.cc:468] \t                 Reshape\t        2\t     0.003\t     0.006%\t    99.998%\t     0.000\t        2\n2017-09-13 17:53:42.311274: I tensorflow/core/util/stat_summarizer.cc:468] \t                Identity\t        1\t     0.001\t     0.002%\t   100.000%\t     0.000\t        1\n2017-09-13 17:53:42.311278: I tensorflow/core/util/stat_summarizer.cc:468]\n2017-09-13 17:53:42.416261: E tensorflow/tools/benchmark/benchmark_model.cc:556] FLOPs calculation failed with Invalid argument: You must feed a value for placeholder tensor 'input' with dtype float\n[[Node: input = Placeholderdtype=DT_FLOAT, shape=[], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]", "body": "System information\r\n- Have I written custom code: No \r\n- OS Platform and Distribution: Linux Ubuntu 14.04\r\n- TensorFlow installed from: source\r\n- TensorFlow version: ('v1.3.0-rc1-1951-g04c318b', '1.3.0')\r\n- Python version: 2.7.12\r\n- Bazel version (if compiling from source): 0.5.0\r\n- CUDA/cuDNN version: 8.0/5.1\r\n- GPU model and memory: Quadro M4000 8Gb\r\nExact command to reproduce: bazel-bin/tensorflow/tools/benchmark/benchmark_model   --graph=inception5h/tensorflow_inception_graph.pb   --input_layer=\"input:0\"   --input_layer_shape=\"1,224,224,3\"   --input_layer_type=\"float\" --output_layer=\"output:0\" --show_run_order=false --show_time=false --show_memory=false --show_summary=false --show_flops=true\r\n\r\nProblem\r\nI follow the instruction on https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/benchmark to run the benchmark_model on desktop but it failed when I set the --show_flops=true. The tensorflow_inception_graph.pb is downloaded from the link provided on the page. \r\n\r\nLogs\r\n(my_project) ubuntu@ubuntu-desktop:~/Desktop/virtualroiflow/tensorflow$ bazel-bin/tensorflow/tools/benchmark/benchmark_model   --graph=inception5h/tensorflow_inception_graph.pb   --input_layer=\"input:0\"   --input_layer_shape=\"1,224,224,3\"   --input_layer_type=\"float\" --output_layer=\"output:0\" --show_run_order=false --show_time=false --show_memory=false --show_summary=false --show_flops=true\r\n2017-09-13 17:53:21.911797: I tensorflow/tools/benchmark/benchmark_model.cc:426] Graph: [inception5h/tensorflow_inception_graph.pb]\r\n2017-09-13 17:53:21.911837: I tensorflow/tools/benchmark/benchmark_model.cc:427] Input layers: [input:0]\r\n2017-09-13 17:53:21.911841: I tensorflow/tools/benchmark/benchmark_model.cc:428] Input shapes: [1,224,224,3]\r\n2017-09-13 17:53:21.911844: I tensorflow/tools/benchmark/benchmark_model.cc:429] Input types: [float]\r\n2017-09-13 17:53:21.911846: I tensorflow/tools/benchmark/benchmark_model.cc:430] Output layers: [output:0]\r\n2017-09-13 17:53:21.911852: I tensorflow/tools/benchmark/benchmark_model.cc:431] Num runs: [1000]\r\n2017-09-13 17:53:21.911870: I tensorflow/tools/benchmark/benchmark_model.cc:432] Inter-inference delay (seconds): [-1.0]\r\n2017-09-13 17:53:21.911873: I tensorflow/tools/benchmark/benchmark_model.cc:433] Inter-benchmark delay (seconds): [-1.0]\r\n2017-09-13 17:53:21.911877: I tensorflow/tools/benchmark/benchmark_model.cc:435] Num threads: [-1]\r\n2017-09-13 17:53:21.911894: I tensorflow/tools/benchmark/benchmark_model.cc:436] Benchmark name: []\r\n2017-09-13 17:53:21.911897: I tensorflow/tools/benchmark/benchmark_model.cc:437] Output prefix: []\r\n2017-09-13 17:53:21.911900: I tensorflow/tools/benchmark/benchmark_model.cc:438] Show sizes: [0]\r\n2017-09-13 17:53:21.911917: I tensorflow/tools/benchmark/benchmark_model.cc:439] Warmup runs: [2]\r\n2017-09-13 17:53:21.911920: I tensorflow/tools/benchmark/benchmark_model.cc:54] Loading TensorFlow.\r\n2017-09-13 17:53:21.911941: I tensorflow/tools/benchmark/benchmark_model.cc:61] Got config, 0 devices\r\n2017-09-13 17:53:21.912358: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\r\n2017-09-13 17:53:22.022462: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2017-09-13 17:53:22.022832: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Found device 0 with properties: \r\nname: Quadro M4000 major: 5 minor: 2 memoryClockRate(GHz): 0.7725\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 7.93GiB freeMemory: 7.61GiB\r\n2017-09-13 17:53:22.022864: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1055] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Quadro M4000, pci bus id: 0000:01:00.0, compute capability: 5.2)\r\n2017-09-13 17:53:22.078421: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"CPU\" label: \"sergey\"') for unknown op: Fact\r\n2017-09-13 17:53:22.078460: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"CPU\" label: \"Sergey\"') for unknown op: Fact\r\n2017-09-13 17:53:22.078466: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Fact\" device_type: \"GPU\" host_memory_arg: \"fact\"') for unknown op: Fact\r\n2017-09-13 17:53:22.081269: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 2 iterations, max -1 seconds without detailed stat logging, with -1s sleep between inferences\r\n2017-09-13 17:53:22.173360: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=2 first=59501 curr=32424 min=32424 max=59501 avg=45962.5 std=13538\r\n\r\n2017-09-13 17:53:22.173384: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 1000 iterations, max 10 seconds without detailed stat logging, with -1s sleep between inferences\r\n2017-09-13 17:53:32.199487: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=316 first=33259 curr=33929 min=29881 max=34487 avg=31683.6 std=684\r\n\r\n2017-09-13 17:53:32.199512: I tensorflow/tools/benchmark/benchmark_model.cc:291] Running benchmark for max 1000 iterations, max 10 seconds with detailed stat logging, with -1s sleep between inferences\r\n2017-09-13 17:53:32.200083: I tensorflow/stream_executor/dso_loader.cc:139] successfully opened CUDA library libcupti.so.8.0 locally\r\n2017-09-13 17:53:42.310948: I tensorflow/tools/benchmark/benchmark_model.cc:324] count=316 first=51892 curr=32599 min=29882 max=51892 avg=31710.3 std=1338\r\n\r\n2017-09-13 17:53:42.310986: I tensorflow/tools/benchmark/benchmark_model.cc:538] Average inference timings in us: Warmup: 45962, no stats: 31683, with stats: 31710\r\n2017-09-13 17:53:42.311006: I tensorflow/core/util/stat_summarizer.cc:358] Number of nodes executed: 141\r\n2017-09-13 17:53:42.311157: I tensorflow/core/util/stat_summarizer.cc:468] ============================== Summary by node type ==============================\r\n2017-09-13 17:53:42.311162: I tensorflow/core/util/stat_summarizer.cc:468] \t             [Node type]\t  [count]\t  [avg ms]\t    [avg %]\t    [cdf %]\t  [mem KB]\t[times called]\r\n2017-09-13 17:53:42.311166: I tensorflow/core/util/stat_summarizer.cc:468] \t                  Conv2D\t       22\t    35.377\t    76.119%\t    76.119%\t 10077.888\t       22\r\n2017-09-13 17:53:42.311170: I tensorflow/core/util/stat_summarizer.cc:468] \t                     LRN\t        2\t     4.296\t     9.243%\t    85.362%\t  3211.264\t        2\r\n2017-09-13 17:53:42.311173: I tensorflow/core/util/stat_summarizer.cc:468] \t                 MaxPool\t        6\t     3.124\t     6.722%\t    92.084%\t  3562.496\t        6\r\n2017-09-13 17:53:42.311177: I tensorflow/core/util/stat_summarizer.cc:468] \t                 BiasAdd\t       24\t     1.677\t     3.608%\t    95.692%\t     0.000\t       24\r\n2017-09-13 17:53:42.311195: I tensorflow/core/util/stat_summarizer.cc:468] \t                    Relu\t       23\t     0.740\t     1.592%\t    97.285%\t     0.000\t       23\r\n2017-09-13 17:53:42.311199: I tensorflow/core/util/stat_summarizer.cc:468] \t                  MatMul\t        2\t     0.703\t     1.513%\t    98.797%\t     8.128\t        2\r\n2017-09-13 17:53:42.311216: I tensorflow/core/util/stat_summarizer.cc:468] \t                  Concat\t        3\t     0.375\t     0.807%\t    99.604%\t  2706.368\t        3\r\n2017-09-13 17:53:42.311220: I tensorflow/core/util/stat_summarizer.cc:468] \t                   Const\t       51\t     0.082\t     0.176%\t    99.781%\t     0.000\t       51\r\n2017-09-13 17:53:42.311225: I tensorflow/core/util/stat_summarizer.cc:468] \t                 AvgPool\t        1\t     0.057\t     0.123%\t    99.903%\t    32.512\t        1\r\n2017-09-13 17:53:42.311229: I tensorflow/core/util/stat_summarizer.cc:468] \t                 Softmax\t        1\t     0.028\t     0.060%\t    99.963%\t     0.000\t        1\r\n2017-09-13 17:53:42.311232: I tensorflow/core/util/stat_summarizer.cc:468] \t                    NoOp\t        1\t     0.006\t     0.013%\t    99.976%\t     0.000\t        1\r\n2017-09-13 17:53:42.311236: I tensorflow/core/util/stat_summarizer.cc:468] \t                    _Arg\t        1\t     0.004\t     0.009%\t    99.985%\t     0.000\t        1\r\n2017-09-13 17:53:42.311252: I tensorflow/core/util/stat_summarizer.cc:468] \t                 _Retval\t        1\t     0.003\t     0.006%\t    99.991%\t     0.000\t        1\r\n2017-09-13 17:53:42.311256: I tensorflow/core/util/stat_summarizer.cc:468] \t                 Reshape\t        2\t     0.003\t     0.006%\t    99.998%\t     0.000\t        2\r\n2017-09-13 17:53:42.311274: I tensorflow/core/util/stat_summarizer.cc:468] \t                Identity\t        1\t     0.001\t     0.002%\t   100.000%\t     0.000\t        1\r\n2017-09-13 17:53:42.311278: I tensorflow/core/util/stat_summarizer.cc:468] \r\n2017-09-13 17:53:42.416261: E tensorflow/tools/benchmark/benchmark_model.cc:556] FLOPs calculation failed with Invalid argument: You must feed a value for placeholder tensor 'input' with dtype float\r\n\t [[Node: input = Placeholder[dtype=DT_FLOAT, shape=[], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\r\n"}
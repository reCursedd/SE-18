{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7947", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7947/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7947/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7947/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/7947", "id": 210863162, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA4Mzg1Mjk0", "number": 7947, "title": "Allows C++ API to be built on Windows within Visual Studio and Debug configurations.", "user": {"login": "markslwong", "id": 704814, "node_id": "MDQ6VXNlcjcwNDgxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/704814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markslwong", "html_url": "https://github.com/markslwong", "followers_url": "https://api.github.com/users/markslwong/followers", "following_url": "https://api.github.com/users/markslwong/following{/other_user}", "gists_url": "https://api.github.com/users/markslwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/markslwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markslwong/subscriptions", "organizations_url": "https://api.github.com/users/markslwong/orgs", "repos_url": "https://api.github.com/users/markslwong/repos", "events_url": "https://api.github.com/users/markslwong/events{/privacy}", "received_events_url": "https://api.github.com/users/markslwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 26, "created_at": "2017-02-28T17:59:22Z", "updated_at": "2017-05-07T18:34:08Z", "closed_at": "2017-05-04T14:28:57Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/7947", "html_url": "https://github.com/tensorflow/tensorflow/pull/7947", "diff_url": "https://github.com/tensorflow/tensorflow/pull/7947.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/7947.patch"}, "body_html": "<p>Problem: TensorFlow does not build directly from Visual Studio.</p>\n<p><strong>Cause 1</strong>: The CMake scripts were written to assume building from CMake directly due to it's usage of the CMAKE_BUILD_TYPE variable.  If you generate a Visual Studio solution and build from directly within that solution, the build will fail because Visual Studio has multiple-configurations, rendering this variable blank when generating a solution.<br>\n<strong>Solution 1</strong>: Replace CMAKE_BUILD_TYPE with $(Configuration) which is a Visual Studio macro.  During build time, Visual Studio will replace $(Configuration) with the currently active configuration being built.</p>\n<p><strong>Cause 2</strong>: The CMake build scripts were written to assume 'Release' builds would only be built.  When building in Debug, some external libraries generate 'lib' files with a 'd' fixed to the end of the name.  However, the reference to these 'lib' files do not account for the 'd' at the end of the name.  During debug builds, linker errors occur when the file is not found.<br>\n<strong>Solution 2</strong>: use the CMake command 'debug' and 'optimized' to specify references to difference file names upon 'Debug' and 'Release' builds respectively.</p>\n<p><strong>Cause 3</strong>: The CMake build scripts were written to assume 'Release' builds would only be built.  When building in Debug, linker errors occur because _ITERATOR_DEBUG_LEVEL is defined and set to zero for all configurations.  External libraries (like Eigen) build with it's own CMake scripts do not define this, causing a different code path to be built.<br>\n<strong>Solution 3</strong>: Only define _ITERATOR_DEBUG_LEVEL in Debug builds.</p>\n<p><strong>Cause 4</strong>: Visual Studio compile errors occur.  Functions must always have a return value.<br>\n<strong>Solution 4</strong>: For function stubs without proper implementation, we return NULL.</p>\n<p><strong>Cause 5</strong>: Visual Studio compile errors occur.  We define a \"double\" code path for Eigen that is not available for CPU builds using SSE only.<br>\n<strong>Solution 5</strong>: We remove the \"double\" code path if AVX and CUDA are not available on Windows builds.  This error only shows up on Debug builds.  I'm assuming because the compiler doesn't strip out unused symbols and tries to link against it.</p>", "body_text": "Problem: TensorFlow does not build directly from Visual Studio.\nCause 1: The CMake scripts were written to assume building from CMake directly due to it's usage of the CMAKE_BUILD_TYPE variable.  If you generate a Visual Studio solution and build from directly within that solution, the build will fail because Visual Studio has multiple-configurations, rendering this variable blank when generating a solution.\nSolution 1: Replace CMAKE_BUILD_TYPE with $(Configuration) which is a Visual Studio macro.  During build time, Visual Studio will replace $(Configuration) with the currently active configuration being built.\nCause 2: The CMake build scripts were written to assume 'Release' builds would only be built.  When building in Debug, some external libraries generate 'lib' files with a 'd' fixed to the end of the name.  However, the reference to these 'lib' files do not account for the 'd' at the end of the name.  During debug builds, linker errors occur when the file is not found.\nSolution 2: use the CMake command 'debug' and 'optimized' to specify references to difference file names upon 'Debug' and 'Release' builds respectively.\nCause 3: The CMake build scripts were written to assume 'Release' builds would only be built.  When building in Debug, linker errors occur because _ITERATOR_DEBUG_LEVEL is defined and set to zero for all configurations.  External libraries (like Eigen) build with it's own CMake scripts do not define this, causing a different code path to be built.\nSolution 3: Only define _ITERATOR_DEBUG_LEVEL in Debug builds.\nCause 4: Visual Studio compile errors occur.  Functions must always have a return value.\nSolution 4: For function stubs without proper implementation, we return NULL.\nCause 5: Visual Studio compile errors occur.  We define a \"double\" code path for Eigen that is not available for CPU builds using SSE only.\nSolution 5: We remove the \"double\" code path if AVX and CUDA are not available on Windows builds.  This error only shows up on Debug builds.  I'm assuming because the compiler doesn't strip out unused symbols and tries to link against it.", "body": "Problem: TensorFlow does not build directly from Visual Studio.\r\n\r\n**Cause 1**: The CMake scripts were written to assume building from CMake directly due to it's usage of the CMAKE_BUILD_TYPE variable.  If you generate a Visual Studio solution and build from directly within that solution, the build will fail because Visual Studio has multiple-configurations, rendering this variable blank when generating a solution.\r\n**Solution 1**: Replace CMAKE_BUILD_TYPE with $(Configuration) which is a Visual Studio macro.  During build time, Visual Studio will replace $(Configuration) with the currently active configuration being built.\r\n\r\n**Cause 2**: The CMake build scripts were written to assume 'Release' builds would only be built.  When building in Debug, some external libraries generate 'lib' files with a 'd' fixed to the end of the name.  However, the reference to these 'lib' files do not account for the 'd' at the end of the name.  During debug builds, linker errors occur when the file is not found.\r\n**Solution 2**: use the CMake command 'debug' and 'optimized' to specify references to difference file names upon 'Debug' and 'Release' builds respectively.\r\n\r\n**Cause 3**: The CMake build scripts were written to assume 'Release' builds would only be built.  When building in Debug, linker errors occur because _ITERATOR_DEBUG_LEVEL is defined and set to zero for all configurations.  External libraries (like Eigen) build with it's own CMake scripts do not define this, causing a different code path to be built.\r\n**Solution 3**: Only define _ITERATOR_DEBUG_LEVEL in Debug builds.\r\n\r\n**Cause 4**: Visual Studio compile errors occur.  Functions must always have a return value.\r\n**Solution 4**: For function stubs without proper implementation, we return NULL.\r\n\r\n**Cause 5**: Visual Studio compile errors occur.  We define a \"double\" code path for Eigen that is not available for CPU builds using SSE only.\r\n**Solution 5**: We remove the \"double\" code path if AVX and CUDA are not available on Windows builds.  This error only shows up on Debug builds.  I'm assuming because the compiler doesn't strip out unused symbols and tries to link against it."}
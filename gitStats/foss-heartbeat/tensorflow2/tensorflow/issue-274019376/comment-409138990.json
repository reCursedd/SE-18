{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/409138990", "html_url": "https://github.com/tensorflow/tensorflow/issues/14566#issuecomment-409138990", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14566", "id": 409138990, "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTEzODk5MA==", "user": {"login": "HughKu", "id": 6983493, "node_id": "MDQ6VXNlcjY5ODM0OTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6983493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HughKu", "html_url": "https://github.com/HughKu", "followers_url": "https://api.github.com/users/HughKu/followers", "following_url": "https://api.github.com/users/HughKu/following{/other_user}", "gists_url": "https://api.github.com/users/HughKu/gists{/gist_id}", "starred_url": "https://api.github.com/users/HughKu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HughKu/subscriptions", "organizations_url": "https://api.github.com/users/HughKu/orgs", "repos_url": "https://api.github.com/users/HughKu/repos", "events_url": "https://api.github.com/users/HughKu/events{/privacy}", "received_events_url": "https://api.github.com/users/HughKu/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-31T08:26:34Z", "updated_at": "2018-07-31T08:26:34Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=21237400\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/kweisamx\">@kweisamx</a>, any update on this issue?</p>\n<p>I test a minimal example for <code>tf.clip_by_value</code> and it works fine.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\ntf.reset_default_graph()\n\nW <span class=\"pl-k\">=</span> tf.get_variable(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>W<span class=\"pl-pds\">'</span></span>, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">4</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>np.float32)\nclip_min_tf <span class=\"pl-k\">=</span> tf.get_variable(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>clip_min_tf<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float32)\nclip_max_tf <span class=\"pl-k\">=</span> tf.get_variable(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>clip_max_tf<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float32)\n\nop <span class=\"pl-k\">=</span> tf.clip_by_value(W, clip_min_tf, clip_max_tf)\n\ninit <span class=\"pl-k\">=</span> tf.global_variables_initializer()\n\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    sess.run(init)\n    \n    sess.run(tf.assign(W, [[<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">4</span>], [<span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">4</span>, <span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">5</span>]]))\n    \n    sess.run(tf.assign(clip_min_tf, <span class=\"pl-c1\">2</span>))\n    sess.run(tf.assign(clip_max_tf, <span class=\"pl-c1\">5</span>))\n    sess.run(op)\n    <span class=\"pl-c1\">print</span>(op.eval())\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span> &gt;&gt; [[2. 2. 2. 4.], [3. 4. 5. 5.]]</span>\n\n    sess.run(tf.assign(clip_min_tf, <span class=\"pl-c1\">4</span>))\n    sess.run(tf.assign(clip_max_tf, <span class=\"pl-c1\">7</span>))\n    sess.run(op)\n    <span class=\"pl-c1\">print</span>(op.eval())\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span> &gt;&gt; [[4. 4. 4. 4.], [4. 4. 7. 5.]]</span></pre></div>", "body_text": "Hi @kweisamx, any update on this issue?\nI test a minimal example for tf.clip_by_value and it works fine.\nimport tensorflow as tf\n\ntf.reset_default_graph()\n\nW = tf.get_variable('W', shape=[2, 4], dtype=np.float32)\nclip_min_tf = tf.get_variable(\"clip_min_tf\", shape=[], dtype=tf.float32)\nclip_max_tf = tf.get_variable(\"clip_max_tf\", shape=[], dtype=tf.float32)\n\nop = tf.clip_by_value(W, clip_min_tf, clip_max_tf)\n\ninit = tf.global_variables_initializer()\n\nwith tf.Session() as sess:\n    sess.run(init)\n    \n    sess.run(tf.assign(W, [[1, 1, 2, 4], [3, 4, 8, 5]]))\n    \n    sess.run(tf.assign(clip_min_tf, 2))\n    sess.run(tf.assign(clip_max_tf, 5))\n    sess.run(op)\n    print(op.eval())\n    # >> [[2. 2. 2. 4.], [3. 4. 5. 5.]]\n\n    sess.run(tf.assign(clip_min_tf, 4))\n    sess.run(tf.assign(clip_max_tf, 7))\n    sess.run(op)\n    print(op.eval())\n    # >> [[4. 4. 4. 4.], [4. 4. 7. 5.]]", "body": "Hi @kweisamx, any update on this issue?\r\n\r\nI test a minimal example for `tf.clip_by_value` and it works fine.\r\n```python\r\nimport tensorflow as tf\r\n\r\ntf.reset_default_graph()\r\n\r\nW = tf.get_variable('W', shape=[2, 4], dtype=np.float32)\r\nclip_min_tf = tf.get_variable(\"clip_min_tf\", shape=[], dtype=tf.float32)\r\nclip_max_tf = tf.get_variable(\"clip_max_tf\", shape=[], dtype=tf.float32)\r\n\r\nop = tf.clip_by_value(W, clip_min_tf, clip_max_tf)\r\n\r\ninit = tf.global_variables_initializer()\r\n\r\nwith tf.Session() as sess:\r\n    sess.run(init)\r\n    \r\n    sess.run(tf.assign(W, [[1, 1, 2, 4], [3, 4, 8, 5]]))\r\n    \r\n    sess.run(tf.assign(clip_min_tf, 2))\r\n    sess.run(tf.assign(clip_max_tf, 5))\r\n    sess.run(op)\r\n    print(op.eval())\r\n    # >> [[2. 2. 2. 4.], [3. 4. 5. 5.]]\r\n\r\n    sess.run(tf.assign(clip_min_tf, 4))\r\n    sess.run(tf.assign(clip_max_tf, 7))\r\n    sess.run(op)\r\n    print(op.eval())\r\n    # >> [[4. 4. 4. 4.], [4. 4. 7. 5.]]\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7042", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7042/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7042/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7042/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7042", "id": 202892660, "node_id": "MDU6SXNzdWUyMDI4OTI2NjA=", "number": 7042, "title": "replicated function tf.where()?", "user": {"login": "iarroyof", "id": 6182245, "node_id": "MDQ6VXNlcjYxODIyNDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/6182245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iarroyof", "html_url": "https://github.com/iarroyof", "followers_url": "https://api.github.com/users/iarroyof/followers", "following_url": "https://api.github.com/users/iarroyof/following{/other_user}", "gists_url": "https://api.github.com/users/iarroyof/gists{/gist_id}", "starred_url": "https://api.github.com/users/iarroyof/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iarroyof/subscriptions", "organizations_url": "https://api.github.com/users/iarroyof/orgs", "repos_url": "https://api.github.com/users/iarroyof/repos", "events_url": "https://api.github.com/users/iarroyof/events{/privacy}", "received_events_url": "https://api.github.com/users/iarroyof/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-01-24T17:54:40Z", "updated_at": "2017-01-27T17:40:15Z", "closed_at": "2017-01-27T17:40:14Z", "author_association": "NONE", "body_html": "<p>Hi all,</p>\n<p>I have a problem adding an Embedding layer to a <code>Sequential</code> model.</p>\n<pre><code>from keras.layers import Embedding\nfrom keras.layers import Dense, Input, Flatten\nfrom keras.layers import Conv1D, MaxPooling1D, Embedding\nfrom keras.models import Model\nfrom keras.models import Sequential\nfrom keras.layers import LSTM,Bidirectional\n\nembedding_layer = Embedding(len(word_index) + 1,\n                            EMBEDDING_DIM,\n                            weights=[embedding_matrix],\n                            input_length=MAX_SEQUENCE_LENGTH*2,\n                             dropout=0.2,\n                            trainable=False)\n\nmodel = Sequential()\nmodel.add(embedding_layer)\nmodel.add(Bidirectional(LSTM(100, dropout_W=0.2, dropout_U=0.2)))\nmodel.add(Dense(200))\nmodel.add(Dense(6, activation='softmax'))\n</code></pre>\n<p>I have the next error:</p>\n<pre><code>Traceback (most recent call last):\n  File \"recurrent_ltsm.py\", line 201, in &lt;module&gt;\n    model.add(embedding_layer)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/models.py\", line 299, in add\n    layer.create_input_layer(batch_input_shape, input_dtype)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 401, in create_input_layer\n    self(x)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 572, in __call__\n    self.add_inbound_node(inbound_layers, node_indices, tensor_indices)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 635, in add_inbound_node\n    Node.create_node(self, inbound_layers, node_indices, tensor_indices)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 166, in create_node\n    output_tensors = to_list(outbound_layer.call(input_tensors[0], mask=input_masks[0]))\n  File \"/usr/local/lib/python2.7/dist-packages/keras/layers/embeddings.py\", line 123, in call\n    B = K.random_binomial((self.input_dim,), p=retain_p) * (1. / retain_p)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/backend/tensorflow_backend.py\", line 2895, in random_binomial\n    tf.zeros(shape, dtype=dtype))\nTypeError: where() takes at most 2 arguments (3 given)\n</code></pre>\n<p>I have seen two versions of <code>tf.where()</code> in the documentation:</p>\n<p><a href=\"url\">https://www.tensorflow.org/versions/r0.10/api_docs/python/control_flow_ops/comparison_operators#where</a><br>\nand<br>\n<a href=\"url\">https://www.tensorflow.org/api_docs/python/math_ops/sequence_comparison_and_indexing#where</a></p>\n<p>Any idea why the program confuses them?</p>\n<pre><code>python -c 'import tensorflow as tf; print tf.__version__'\n0.10.0\n</code></pre>\n<p>Thank you very much.</p>", "body_text": "Hi all,\nI have a problem adding an Embedding layer to a Sequential model.\nfrom keras.layers import Embedding\nfrom keras.layers import Dense, Input, Flatten\nfrom keras.layers import Conv1D, MaxPooling1D, Embedding\nfrom keras.models import Model\nfrom keras.models import Sequential\nfrom keras.layers import LSTM,Bidirectional\n\nembedding_layer = Embedding(len(word_index) + 1,\n                            EMBEDDING_DIM,\n                            weights=[embedding_matrix],\n                            input_length=MAX_SEQUENCE_LENGTH*2,\n                             dropout=0.2,\n                            trainable=False)\n\nmodel = Sequential()\nmodel.add(embedding_layer)\nmodel.add(Bidirectional(LSTM(100, dropout_W=0.2, dropout_U=0.2)))\nmodel.add(Dense(200))\nmodel.add(Dense(6, activation='softmax'))\n\nI have the next error:\nTraceback (most recent call last):\n  File \"recurrent_ltsm.py\", line 201, in <module>\n    model.add(embedding_layer)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/models.py\", line 299, in add\n    layer.create_input_layer(batch_input_shape, input_dtype)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 401, in create_input_layer\n    self(x)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 572, in __call__\n    self.add_inbound_node(inbound_layers, node_indices, tensor_indices)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 635, in add_inbound_node\n    Node.create_node(self, inbound_layers, node_indices, tensor_indices)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 166, in create_node\n    output_tensors = to_list(outbound_layer.call(input_tensors[0], mask=input_masks[0]))\n  File \"/usr/local/lib/python2.7/dist-packages/keras/layers/embeddings.py\", line 123, in call\n    B = K.random_binomial((self.input_dim,), p=retain_p) * (1. / retain_p)\n  File \"/usr/local/lib/python2.7/dist-packages/keras/backend/tensorflow_backend.py\", line 2895, in random_binomial\n    tf.zeros(shape, dtype=dtype))\nTypeError: where() takes at most 2 arguments (3 given)\n\nI have seen two versions of tf.where() in the documentation:\nhttps://www.tensorflow.org/versions/r0.10/api_docs/python/control_flow_ops/comparison_operators#where\nand\nhttps://www.tensorflow.org/api_docs/python/math_ops/sequence_comparison_and_indexing#where\nAny idea why the program confuses them?\npython -c 'import tensorflow as tf; print tf.__version__'\n0.10.0\n\nThank you very much.", "body": "Hi all,\r\n\r\nI have a problem adding an Embedding layer to a `Sequential` model.\r\n\r\n```\r\nfrom keras.layers import Embedding\r\nfrom keras.layers import Dense, Input, Flatten\r\nfrom keras.layers import Conv1D, MaxPooling1D, Embedding\r\nfrom keras.models import Model\r\nfrom keras.models import Sequential\r\nfrom keras.layers import LSTM,Bidirectional\r\n\r\nembedding_layer = Embedding(len(word_index) + 1,\r\n                            EMBEDDING_DIM,\r\n                            weights=[embedding_matrix],\r\n                            input_length=MAX_SEQUENCE_LENGTH*2,\r\n                             dropout=0.2,\r\n                            trainable=False)\r\n\r\nmodel = Sequential()\r\nmodel.add(embedding_layer)\r\nmodel.add(Bidirectional(LSTM(100, dropout_W=0.2, dropout_U=0.2)))\r\nmodel.add(Dense(200))\r\nmodel.add(Dense(6, activation='softmax'))\r\n```\r\n\r\nI have the next error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"recurrent_ltsm.py\", line 201, in <module>\r\n    model.add(embedding_layer)\r\n  File \"/usr/local/lib/python2.7/dist-packages/keras/models.py\", line 299, in add\r\n    layer.create_input_layer(batch_input_shape, input_dtype)\r\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 401, in create_input_layer\r\n    self(x)\r\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 572, in __call__\r\n    self.add_inbound_node(inbound_layers, node_indices, tensor_indices)\r\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 635, in add_inbound_node\r\n    Node.create_node(self, inbound_layers, node_indices, tensor_indices)\r\n  File \"/usr/local/lib/python2.7/dist-packages/keras/engine/topology.py\", line 166, in create_node\r\n    output_tensors = to_list(outbound_layer.call(input_tensors[0], mask=input_masks[0]))\r\n  File \"/usr/local/lib/python2.7/dist-packages/keras/layers/embeddings.py\", line 123, in call\r\n    B = K.random_binomial((self.input_dim,), p=retain_p) * (1. / retain_p)\r\n  File \"/usr/local/lib/python2.7/dist-packages/keras/backend/tensorflow_backend.py\", line 2895, in random_binomial\r\n    tf.zeros(shape, dtype=dtype))\r\nTypeError: where() takes at most 2 arguments (3 given)\r\n```\r\nI have seen two versions of `tf.where()` in the documentation:\r\n\r\n[https://www.tensorflow.org/versions/r0.10/api_docs/python/control_flow_ops/comparison_operators#where](url)\r\nand \r\n[https://www.tensorflow.org/api_docs/python/math_ops/sequence_comparison_and_indexing#where](url)\r\n\r\nAny idea why the program confuses them?\r\n\r\n```\r\npython -c 'import tensorflow as tf; print tf.__version__'\r\n0.10.0\r\n```\r\n\r\n\r\nThank you very much."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/423272658", "html_url": "https://github.com/tensorflow/tensorflow/issues/22362#issuecomment-423272658", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22362", "id": 423272658, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzI3MjY1OA==", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-20T17:45:10Z", "updated_at": "2018-09-20T17:45:10Z", "author_association": "MEMBER", "body_html": "<p>I didn't get a chance to dig into the code linked to (there is a lot of it), but yeah, I'd also guess that there is some additional operation you're running to initialize variables in the Python side that isn't being run on the Java side.</p>\n<p>If it is the local variables initializer, one option would be to provide <code>tf.local_variables_initializer()</code> as <a href=\"https://www.tensorflow.org/api_docs/python/tf/saved_model/builder/SavedModelBuilder#add_meta_graph\" rel=\"nofollow\">the <code>main_op</code> or <code>legacy_init_op</code> to <code>SavedModelBuilder.add_meta_graph()</code></a>, so that the variables are initialized just when you load the program.</p>\n<p>If you could provide a more compact reproduction, I'm happy to take a look. If not, I'll try to dig into the Python and Java code provided when I get a chance. Or if things have worked out, let me know and I'll close the issue (and feel free to add details here). Thanks.</p>", "body_text": "I didn't get a chance to dig into the code linked to (there is a lot of it), but yeah, I'd also guess that there is some additional operation you're running to initialize variables in the Python side that isn't being run on the Java side.\nIf it is the local variables initializer, one option would be to provide tf.local_variables_initializer() as the main_op or legacy_init_op to SavedModelBuilder.add_meta_graph(), so that the variables are initialized just when you load the program.\nIf you could provide a more compact reproduction, I'm happy to take a look. If not, I'll try to dig into the Python and Java code provided when I get a chance. Or if things have worked out, let me know and I'll close the issue (and feel free to add details here). Thanks.", "body": "I didn't get a chance to dig into the code linked to (there is a lot of it), but yeah, I'd also guess that there is some additional operation you're running to initialize variables in the Python side that isn't being run on the Java side.\r\n\r\nIf it is the local variables initializer, one option would be to provide `tf.local_variables_initializer()` as [the `main_op` or `legacy_init_op` to `SavedModelBuilder.add_meta_graph()`](https://www.tensorflow.org/api_docs/python/tf/saved_model/builder/SavedModelBuilder#add_meta_graph), so that the variables are initialized just when you load the program.\r\n\r\nIf you could provide a more compact reproduction, I'm happy to take a look. If not, I'll try to dig into the Python and Java code provided when I get a chance. Or if things have worked out, let me know and I'll close the issue (and feel free to add details here). Thanks. "}
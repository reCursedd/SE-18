{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/359919151", "html_url": "https://github.com/tensorflow/tensorflow/issues/16135#issuecomment-359919151", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16135", "id": 359919151, "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTkxOTE1MQ==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-23T20:26:01Z", "updated_at": "2018-01-23T20:26:01Z", "author_association": "CONTRIBUTOR", "body_html": "<p>This error seems relevant:</p>\n<blockquote>\n<p>ValueError: When using replicas, all Variables must have their device set: name: \"weights/Variable\"</p>\n</blockquote>\n<p>It looks like the scope of the <code>with tf.device(...):</code> block, defined on this line:</p>\n<div class=\"highlight highlight-source-python\"><pre>    <span class=\"pl-k\">with</span> tf.device(tf.train.replica_device_setter(<span class=\"pl-v\">worker_device</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:worker/task:<span class=\"pl-c1\">%d</span><span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">%</span> <span class=\"pl-c1\">FLAGS</span>.task_index,<span class=\"pl-v\">cluster</span><span class=\"pl-k\">=</span>cluster)):</pre></div>\n<p>...does not contain all of the variable creations. The <code>tf.train.Supervisor</code> code requires that an explicit device be set for each variable in your model. To resolve the problem, ensure that all of the <code>tf.Variable()</code> calls in your program are inside the scope of the <code>with tf.device(...):</code> block.</p>", "body_text": "This error seems relevant:\n\nValueError: When using replicas, all Variables must have their device set: name: \"weights/Variable\"\n\nIt looks like the scope of the with tf.device(...): block, defined on this line:\n    with tf.device(tf.train.replica_device_setter(worker_device=\"/job:worker/task:%d\" % FLAGS.task_index,cluster=cluster)):\n...does not contain all of the variable creations. The tf.train.Supervisor code requires that an explicit device be set for each variable in your model. To resolve the problem, ensure that all of the tf.Variable() calls in your program are inside the scope of the with tf.device(...): block.", "body": "This error seems relevant:\r\n\r\n> ValueError: When using replicas, all Variables must have their device set: name: \"weights/Variable\"\r\n\r\nIt looks like the scope of the `with tf.device(...):` block, defined on this line:\r\n\r\n```python\r\n    with tf.device(tf.train.replica_device_setter(worker_device=\"/job:worker/task:%d\" % FLAGS.task_index,cluster=cluster)):\r\n```\r\n\r\n...does not contain all of the variable creations. The `tf.train.Supervisor` code requires that an explicit device be set for each variable in your model. To resolve the problem, ensure that all of the `tf.Variable()` calls in your program are inside the scope of the `with tf.device(...):` block."}
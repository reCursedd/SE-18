{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/269257474", "html_url": "https://github.com/tensorflow/tensorflow/issues/6508#issuecomment-269257474", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6508", "id": 269257474, "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTI1NzQ3NA==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2016-12-27T01:58:45Z", "updated_at": "2016-12-27T02:36:51Z", "author_association": "CONTRIBUTOR", "body_html": "<p>What about CPU utilization of your PS task? If your PS CPU can't keep up, you may be using extra memory storing outstanding messages from workers.</p>\n<p>You could try to slow down your workers as an experiment. Can add <code>time.sleep</code> before your <code>session.run</code> call, or something like below to add a busy wait. Have your workers send <code>slow_gradients</code> instead of <code>gradients</code> for aggregation</p>\n<pre><code>i = tf.constant(0)\nc = lambda i: tf.less(i, 10**5)  # about 1 second on MacBook\nb = lambda i: tf.add(i, 1)\nr = tf.while_loop(c, b, [i])\nwith tf.control_dependencies([r]):\n  slow_gradients = tf.identity(gradients)\n</code></pre>", "body_text": "What about CPU utilization of your PS task? If your PS CPU can't keep up, you may be using extra memory storing outstanding messages from workers.\nYou could try to slow down your workers as an experiment. Can add time.sleep before your session.run call, or something like below to add a busy wait. Have your workers send slow_gradients instead of gradients for aggregation\ni = tf.constant(0)\nc = lambda i: tf.less(i, 10**5)  # about 1 second on MacBook\nb = lambda i: tf.add(i, 1)\nr = tf.while_loop(c, b, [i])\nwith tf.control_dependencies([r]):\n  slow_gradients = tf.identity(gradients)", "body": "What about CPU utilization of your PS task? If your PS CPU can't keep up, you may be using extra memory storing outstanding messages from workers.\r\n\r\nYou could try to slow down your workers as an experiment. Can add `time.sleep` before your `session.run` call, or something like below to add a busy wait. Have your workers send `slow_gradients` instead of `gradients` for aggregation\r\n\r\n```\r\ni = tf.constant(0)\r\nc = lambda i: tf.less(i, 10**5)  # about 1 second on MacBook\r\nb = lambda i: tf.add(i, 1)\r\nr = tf.while_loop(c, b, [i])\r\nwith tf.control_dependencies([r]):\r\n  slow_gradients = tf.identity(gradients)\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/366511092", "html_url": "https://github.com/tensorflow/tensorflow/issues/17092#issuecomment-366511092", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17092", "id": 366511092, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjUxMTA5Mg==", "user": {"login": "georgh", "id": 1831252, "node_id": "MDQ6VXNlcjE4MzEyNTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1831252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgh", "html_url": "https://github.com/georgh", "followers_url": "https://api.github.com/users/georgh/followers", "following_url": "https://api.github.com/users/georgh/following{/other_user}", "gists_url": "https://api.github.com/users/georgh/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgh/subscriptions", "organizations_url": "https://api.github.com/users/georgh/orgs", "repos_url": "https://api.github.com/users/georgh/repos", "events_url": "https://api.github.com/users/georgh/events{/privacy}", "received_events_url": "https://api.github.com/users/georgh/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-18T12:03:50Z", "updated_at": "2018-02-18T12:03:50Z", "author_association": "NONE", "body_html": "<p>As suggested by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23068\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yaroslavvb\">@yaroslavvb</a> I used his mem_util script to further inspect the memory usage:<br>\nThis is the output for -size 80000 (no OOM crash):</p>\n<pre><code>singleExecution finished!\nPrinting timeline for /gpu:0\n-------------------------------------------\ntime[ms] |  total[MB] |   diff[MB] | kernel\n       0 |       0.00 |       0.00 | _SOURCE\n    1188 |       0.00 |       0.00 | strided_slice/stack\n    1204 |       0.00 |       0.00 | strided_slice/stack_1\n    1216 |       0.00 |       0.00 | strided_slice/stack_2\n    2233 |       0.00 |       0.00 | strided_slice\n  903921 |     115.97 |     115.97 | first_0\n 1098084 |     116.58 |       0.61 | first_0\n 1098092 |     117.19 |       0.61 | first_0\n 1098093 |     117.80 |       0.61 | first_0\n 1098340 |     117.19 |      -0.61 | first_0\n 1098895 |     116.58 |      -0.61 | first_0\n 1098898 |     115.97 |      -0.61 | first_0\n 1098949 |     115.97 |       0.00 | ExpandDims/dim\n 1098962 |     115.97 |       0.00 | xdt_0/multiples\n 1098967 |     115.97 |       0.00 | Const\n 1098972 |     115.97 |       0.00 | ExpandDims\n 1099000 |    7073.97 |    6958.01 | xdt_0\n 1099067 |    7110.77 |      36.80 | third_0\n 1102177 |    7111.38 |       0.61 | third_0\n 1102179 |    7111.99 |       0.61 | third_0\n 1102180 |    7112.60 |       0.61 | third_0\n 1144064 |    7111.99 |      -0.61 | third_0\n 1144065 |    7111.38 |      -0.61 | third_0\n 1144066 |    7110.77 |      -0.61 | third_0\n 1144072 |    6994.80 |    -115.97 | first_0\n 1144072 |      36.80 |   -6958.01 | xdt_0\n 1144098 |      36.80 |       0.00 | total_0\n 1144139 |      36.82 |       0.02 | total_0\n 1144171 |      36.80 |      -0.02 | total_0\n 1144177 |       0.00 |     -36.80 | third_0\n 1168509 |       0.00 |      -0.00 | total_0\nPeaks: \n7458102528\ndoubleExecution finished!\nPrinting timeline for /gpu:0\n-------------------------------------------\ntime[ms] |  total[MB] |   diff[MB] | kernel\n       0 |       0.00 |       0.00 | _SOURCE\n      81 |       0.00 |       0.00 | strided_slice/stack\n     124 |       0.00 |       0.00 | strided_slice/stack_1\n     139 |       0.00 |       0.00 | strided_slice/stack_2\n   10894 |       0.00 |       0.00 | strided_slice\n 1313920 |     115.97 |     115.97 | first_0\n 1320691 |     116.58 |       0.61 | first_0\n 1320695 |     117.19 |       0.61 | first_0\n 1320696 |     117.80 |       0.61 | first_0\n 1320969 |     117.19 |      -0.61 | first_0\n 1321476 |     116.58 |      -0.61 | first_0\n 1321479 |     115.97 |      -0.61 | first_0\n 1321510 |     115.97 |       0.00 | ExpandDims/dim\n 1321517 |     115.97 |       0.00 | xdt_0/multiples\n 1321521 |     115.97 |       0.00 | Const\n 1321525 |     115.97 |       0.00 | ExpandDims\n 1321537 |    7073.97 |    6958.01 | xdt_0\n 1321587 |    7110.60 |      36.62 | third_0\n 1325130 |    7111.21 |       0.61 | third_0\n 1325132 |    7111.82 |       0.61 | third_0\n 1325133 |    7112.43 |       0.61 | third_0\n 1366693 |    7111.82 |      -0.61 | third_0\n 1366695 |    7111.21 |      -0.61 | third_0\n 1366695 |    7110.60 |      -0.61 | third_0\n 1366702 |    6994.63 |    -115.97 | first_0\n 1366702 |      36.62 |   -6958.01 | xdt_0\n 1366717 |      36.62 |       0.00 | total_0\n 1366740 |      36.64 |       0.02 | total_0\n 1366812 |      36.62 |      -0.02 | total_0\n 1366819 |       0.00 |     -36.62 | third_0\n 1366822 |       0.00 |       0.00 | strided_slice_1/stack\n 1366828 |       0.00 |       0.00 | strided_slice_1/stack_1\n 1366832 |       0.00 |       0.00 | strided_slice_1/stack_2\n 1366838 |     115.97 |     115.97 | first_1\n 1369862 |     116.58 |       0.61 | first_1\n 1369863 |     117.19 |       0.61 | first_1\n 1369864 |     117.80 |       0.61 | first_1\n 1391237 |     117.19 |      -0.61 | first_1\n 1391238 |     116.58 |      -0.61 | first_1\n 1391239 |     115.97 |      -0.61 | first_1\n 1391255 |     115.97 |       0.00 | strided_slice_1\n 1391273 |     115.97 |       0.00 | ExpandDims_1/dim\n 1391278 |     115.97 |       0.00 | xdt_1/multiples\n 1391281 |     115.97 |       0.00 | Const_1\n 1391285 |     115.97 |       0.00 | ExpandDims_1\n 1391293 |    7073.97 |    6958.01 | xdt_1\n 1391321 |    7110.77 |      36.80 | third_1\n 1394347 |    7111.38 |       0.61 | third_1\n 1394348 |    7111.99 |       0.61 | third_1\n 1394349 |    7112.60 |       0.61 | third_1\n 1436988 |    7111.99 |      -0.61 | third_1\n 1436989 |    7111.38 |      -0.61 | third_1\n 1436989 |    7110.77 |      -0.61 | third_1\n 1436996 |    6994.80 |    -115.97 | first_1\n 1436996 |      36.80 |   -6958.01 | xdt_1\n 1437008 |      36.80 |       0.00 | total_1\n 1437017 |      36.82 |       0.02 | total_1\n 1437045 |      36.80 |      -0.02 | total_1\n 1437050 |       0.00 |     -36.80 | third_1\n 1437053 |       0.00 |       0.00 | add\n 1437117 |       0.00 |      -0.00 | total_1\n 1461492 |       0.00 |      -0.00 | total_0\n</code></pre>\n<p>A few things to note:<br>\nthe order of the operations is as expected and looks good<br>\nmemory consumption of first is not expected, no memory for the input tensor Xder is allocated (or reported)<br>\nbeside first, memory consumption looks mostly as expected</p>\n<p>Log for the single run before the OOM-crash (with -size 90000 or more):</p>\n<pre><code>singleExecution finished!\nPrinting timeline for /gpu:0\n-------------------------------------------\ntime[ms] |  total[MB] |   diff[MB] | kernel\n       0 |       0.00 |       0.00 | _SOURCE\n    1568 |       0.00 |       0.00 | strided_slice/stack\n    1584 |       0.00 |       0.00 | strided_slice/stack_1\n    1622 |       0.00 |       0.00 | strided_slice/stack_2\n  978725 |       0.00 |       0.00 | strided_slice\n  978781 |     130.46 |     130.46 | first_0\n 1228768 |     131.15 |       0.69 | first_0\n 1228776 |     131.84 |       0.69 | first_0\n 1228778 |     132.52 |       0.69 | first_0\n 1229123 |     131.84 |      -0.69 | first_0\n 1229758 |     131.15 |      -0.69 | first_0\n 1229760 |     130.46 |      -0.69 | first_0\n 1229818 |     130.46 |       0.00 | ExpandDims/dim\n 1229833 |     130.46 |       0.00 | xdt_0/multiples\n 1229839 |     130.46 |       0.00 | Const\n 1229845 |     130.46 |       0.00 | ExpandDims\n 1229876 |    7999.42 |    7868.96 | xdt_0\n 1229955 |    8040.62 |      41.20 | third_0\n 1235602 |    8041.31 |       0.69 | third_0\n 1235605 |    8041.99 |       0.69 | third_0\n 1235606 |    8042.68 |       0.69 | third_0\n 1280551 |    8041.99 |      -0.69 | third_0\n 1280553 |    8041.31 |      -0.69 | third_0\n 1280553 |    8040.62 |      -0.69 | third_0\n 1280560 |     171.66 |   -7868.96 | xdt_0\n 1280561 |      41.20 |    -130.46 | first_0\n 1280586 |      41.20 |       0.00 | total_0\n 1280617 |      41.22 |       0.02 | total_0\n 1280652 |      41.20 |      -0.02 | total_0\n 1280660 |       0.00 |     -41.20 | third_0\n 1308070 |       0.00 |      -0.00 | total_0\nPeak: \n8433360384\n</code></pre>\n<p>I see no reason why the following execution should fail? Somebody any idea?</p>", "body_text": "As suggested by @yaroslavvb I used his mem_util script to further inspect the memory usage:\nThis is the output for -size 80000 (no OOM crash):\nsingleExecution finished!\nPrinting timeline for /gpu:0\n-------------------------------------------\ntime[ms] |  total[MB] |   diff[MB] | kernel\n       0 |       0.00 |       0.00 | _SOURCE\n    1188 |       0.00 |       0.00 | strided_slice/stack\n    1204 |       0.00 |       0.00 | strided_slice/stack_1\n    1216 |       0.00 |       0.00 | strided_slice/stack_2\n    2233 |       0.00 |       0.00 | strided_slice\n  903921 |     115.97 |     115.97 | first_0\n 1098084 |     116.58 |       0.61 | first_0\n 1098092 |     117.19 |       0.61 | first_0\n 1098093 |     117.80 |       0.61 | first_0\n 1098340 |     117.19 |      -0.61 | first_0\n 1098895 |     116.58 |      -0.61 | first_0\n 1098898 |     115.97 |      -0.61 | first_0\n 1098949 |     115.97 |       0.00 | ExpandDims/dim\n 1098962 |     115.97 |       0.00 | xdt_0/multiples\n 1098967 |     115.97 |       0.00 | Const\n 1098972 |     115.97 |       0.00 | ExpandDims\n 1099000 |    7073.97 |    6958.01 | xdt_0\n 1099067 |    7110.77 |      36.80 | third_0\n 1102177 |    7111.38 |       0.61 | third_0\n 1102179 |    7111.99 |       0.61 | third_0\n 1102180 |    7112.60 |       0.61 | third_0\n 1144064 |    7111.99 |      -0.61 | third_0\n 1144065 |    7111.38 |      -0.61 | third_0\n 1144066 |    7110.77 |      -0.61 | third_0\n 1144072 |    6994.80 |    -115.97 | first_0\n 1144072 |      36.80 |   -6958.01 | xdt_0\n 1144098 |      36.80 |       0.00 | total_0\n 1144139 |      36.82 |       0.02 | total_0\n 1144171 |      36.80 |      -0.02 | total_0\n 1144177 |       0.00 |     -36.80 | third_0\n 1168509 |       0.00 |      -0.00 | total_0\nPeaks: \n7458102528\ndoubleExecution finished!\nPrinting timeline for /gpu:0\n-------------------------------------------\ntime[ms] |  total[MB] |   diff[MB] | kernel\n       0 |       0.00 |       0.00 | _SOURCE\n      81 |       0.00 |       0.00 | strided_slice/stack\n     124 |       0.00 |       0.00 | strided_slice/stack_1\n     139 |       0.00 |       0.00 | strided_slice/stack_2\n   10894 |       0.00 |       0.00 | strided_slice\n 1313920 |     115.97 |     115.97 | first_0\n 1320691 |     116.58 |       0.61 | first_0\n 1320695 |     117.19 |       0.61 | first_0\n 1320696 |     117.80 |       0.61 | first_0\n 1320969 |     117.19 |      -0.61 | first_0\n 1321476 |     116.58 |      -0.61 | first_0\n 1321479 |     115.97 |      -0.61 | first_0\n 1321510 |     115.97 |       0.00 | ExpandDims/dim\n 1321517 |     115.97 |       0.00 | xdt_0/multiples\n 1321521 |     115.97 |       0.00 | Const\n 1321525 |     115.97 |       0.00 | ExpandDims\n 1321537 |    7073.97 |    6958.01 | xdt_0\n 1321587 |    7110.60 |      36.62 | third_0\n 1325130 |    7111.21 |       0.61 | third_0\n 1325132 |    7111.82 |       0.61 | third_0\n 1325133 |    7112.43 |       0.61 | third_0\n 1366693 |    7111.82 |      -0.61 | third_0\n 1366695 |    7111.21 |      -0.61 | third_0\n 1366695 |    7110.60 |      -0.61 | third_0\n 1366702 |    6994.63 |    -115.97 | first_0\n 1366702 |      36.62 |   -6958.01 | xdt_0\n 1366717 |      36.62 |       0.00 | total_0\n 1366740 |      36.64 |       0.02 | total_0\n 1366812 |      36.62 |      -0.02 | total_0\n 1366819 |       0.00 |     -36.62 | third_0\n 1366822 |       0.00 |       0.00 | strided_slice_1/stack\n 1366828 |       0.00 |       0.00 | strided_slice_1/stack_1\n 1366832 |       0.00 |       0.00 | strided_slice_1/stack_2\n 1366838 |     115.97 |     115.97 | first_1\n 1369862 |     116.58 |       0.61 | first_1\n 1369863 |     117.19 |       0.61 | first_1\n 1369864 |     117.80 |       0.61 | first_1\n 1391237 |     117.19 |      -0.61 | first_1\n 1391238 |     116.58 |      -0.61 | first_1\n 1391239 |     115.97 |      -0.61 | first_1\n 1391255 |     115.97 |       0.00 | strided_slice_1\n 1391273 |     115.97 |       0.00 | ExpandDims_1/dim\n 1391278 |     115.97 |       0.00 | xdt_1/multiples\n 1391281 |     115.97 |       0.00 | Const_1\n 1391285 |     115.97 |       0.00 | ExpandDims_1\n 1391293 |    7073.97 |    6958.01 | xdt_1\n 1391321 |    7110.77 |      36.80 | third_1\n 1394347 |    7111.38 |       0.61 | third_1\n 1394348 |    7111.99 |       0.61 | third_1\n 1394349 |    7112.60 |       0.61 | third_1\n 1436988 |    7111.99 |      -0.61 | third_1\n 1436989 |    7111.38 |      -0.61 | third_1\n 1436989 |    7110.77 |      -0.61 | third_1\n 1436996 |    6994.80 |    -115.97 | first_1\n 1436996 |      36.80 |   -6958.01 | xdt_1\n 1437008 |      36.80 |       0.00 | total_1\n 1437017 |      36.82 |       0.02 | total_1\n 1437045 |      36.80 |      -0.02 | total_1\n 1437050 |       0.00 |     -36.80 | third_1\n 1437053 |       0.00 |       0.00 | add\n 1437117 |       0.00 |      -0.00 | total_1\n 1461492 |       0.00 |      -0.00 | total_0\n\nA few things to note:\nthe order of the operations is as expected and looks good\nmemory consumption of first is not expected, no memory for the input tensor Xder is allocated (or reported)\nbeside first, memory consumption looks mostly as expected\nLog for the single run before the OOM-crash (with -size 90000 or more):\nsingleExecution finished!\nPrinting timeline for /gpu:0\n-------------------------------------------\ntime[ms] |  total[MB] |   diff[MB] | kernel\n       0 |       0.00 |       0.00 | _SOURCE\n    1568 |       0.00 |       0.00 | strided_slice/stack\n    1584 |       0.00 |       0.00 | strided_slice/stack_1\n    1622 |       0.00 |       0.00 | strided_slice/stack_2\n  978725 |       0.00 |       0.00 | strided_slice\n  978781 |     130.46 |     130.46 | first_0\n 1228768 |     131.15 |       0.69 | first_0\n 1228776 |     131.84 |       0.69 | first_0\n 1228778 |     132.52 |       0.69 | first_0\n 1229123 |     131.84 |      -0.69 | first_0\n 1229758 |     131.15 |      -0.69 | first_0\n 1229760 |     130.46 |      -0.69 | first_0\n 1229818 |     130.46 |       0.00 | ExpandDims/dim\n 1229833 |     130.46 |       0.00 | xdt_0/multiples\n 1229839 |     130.46 |       0.00 | Const\n 1229845 |     130.46 |       0.00 | ExpandDims\n 1229876 |    7999.42 |    7868.96 | xdt_0\n 1229955 |    8040.62 |      41.20 | third_0\n 1235602 |    8041.31 |       0.69 | third_0\n 1235605 |    8041.99 |       0.69 | third_0\n 1235606 |    8042.68 |       0.69 | third_0\n 1280551 |    8041.99 |      -0.69 | third_0\n 1280553 |    8041.31 |      -0.69 | third_0\n 1280553 |    8040.62 |      -0.69 | third_0\n 1280560 |     171.66 |   -7868.96 | xdt_0\n 1280561 |      41.20 |    -130.46 | first_0\n 1280586 |      41.20 |       0.00 | total_0\n 1280617 |      41.22 |       0.02 | total_0\n 1280652 |      41.20 |      -0.02 | total_0\n 1280660 |       0.00 |     -41.20 | third_0\n 1308070 |       0.00 |      -0.00 | total_0\nPeak: \n8433360384\n\nI see no reason why the following execution should fail? Somebody any idea?", "body": "As suggested by @yaroslavvb I used his mem_util script to further inspect the memory usage:\r\nThis is the output for -size 80000 (no OOM crash):\r\n```\r\nsingleExecution finished!\r\nPrinting timeline for /gpu:0\r\n-------------------------------------------\r\ntime[ms] |  total[MB] |   diff[MB] | kernel\r\n       0 |       0.00 |       0.00 | _SOURCE\r\n    1188 |       0.00 |       0.00 | strided_slice/stack\r\n    1204 |       0.00 |       0.00 | strided_slice/stack_1\r\n    1216 |       0.00 |       0.00 | strided_slice/stack_2\r\n    2233 |       0.00 |       0.00 | strided_slice\r\n  903921 |     115.97 |     115.97 | first_0\r\n 1098084 |     116.58 |       0.61 | first_0\r\n 1098092 |     117.19 |       0.61 | first_0\r\n 1098093 |     117.80 |       0.61 | first_0\r\n 1098340 |     117.19 |      -0.61 | first_0\r\n 1098895 |     116.58 |      -0.61 | first_0\r\n 1098898 |     115.97 |      -0.61 | first_0\r\n 1098949 |     115.97 |       0.00 | ExpandDims/dim\r\n 1098962 |     115.97 |       0.00 | xdt_0/multiples\r\n 1098967 |     115.97 |       0.00 | Const\r\n 1098972 |     115.97 |       0.00 | ExpandDims\r\n 1099000 |    7073.97 |    6958.01 | xdt_0\r\n 1099067 |    7110.77 |      36.80 | third_0\r\n 1102177 |    7111.38 |       0.61 | third_0\r\n 1102179 |    7111.99 |       0.61 | third_0\r\n 1102180 |    7112.60 |       0.61 | third_0\r\n 1144064 |    7111.99 |      -0.61 | third_0\r\n 1144065 |    7111.38 |      -0.61 | third_0\r\n 1144066 |    7110.77 |      -0.61 | third_0\r\n 1144072 |    6994.80 |    -115.97 | first_0\r\n 1144072 |      36.80 |   -6958.01 | xdt_0\r\n 1144098 |      36.80 |       0.00 | total_0\r\n 1144139 |      36.82 |       0.02 | total_0\r\n 1144171 |      36.80 |      -0.02 | total_0\r\n 1144177 |       0.00 |     -36.80 | third_0\r\n 1168509 |       0.00 |      -0.00 | total_0\r\nPeaks: \r\n7458102528\r\ndoubleExecution finished!\r\nPrinting timeline for /gpu:0\r\n-------------------------------------------\r\ntime[ms] |  total[MB] |   diff[MB] | kernel\r\n       0 |       0.00 |       0.00 | _SOURCE\r\n      81 |       0.00 |       0.00 | strided_slice/stack\r\n     124 |       0.00 |       0.00 | strided_slice/stack_1\r\n     139 |       0.00 |       0.00 | strided_slice/stack_2\r\n   10894 |       0.00 |       0.00 | strided_slice\r\n 1313920 |     115.97 |     115.97 | first_0\r\n 1320691 |     116.58 |       0.61 | first_0\r\n 1320695 |     117.19 |       0.61 | first_0\r\n 1320696 |     117.80 |       0.61 | first_0\r\n 1320969 |     117.19 |      -0.61 | first_0\r\n 1321476 |     116.58 |      -0.61 | first_0\r\n 1321479 |     115.97 |      -0.61 | first_0\r\n 1321510 |     115.97 |       0.00 | ExpandDims/dim\r\n 1321517 |     115.97 |       0.00 | xdt_0/multiples\r\n 1321521 |     115.97 |       0.00 | Const\r\n 1321525 |     115.97 |       0.00 | ExpandDims\r\n 1321537 |    7073.97 |    6958.01 | xdt_0\r\n 1321587 |    7110.60 |      36.62 | third_0\r\n 1325130 |    7111.21 |       0.61 | third_0\r\n 1325132 |    7111.82 |       0.61 | third_0\r\n 1325133 |    7112.43 |       0.61 | third_0\r\n 1366693 |    7111.82 |      -0.61 | third_0\r\n 1366695 |    7111.21 |      -0.61 | third_0\r\n 1366695 |    7110.60 |      -0.61 | third_0\r\n 1366702 |    6994.63 |    -115.97 | first_0\r\n 1366702 |      36.62 |   -6958.01 | xdt_0\r\n 1366717 |      36.62 |       0.00 | total_0\r\n 1366740 |      36.64 |       0.02 | total_0\r\n 1366812 |      36.62 |      -0.02 | total_0\r\n 1366819 |       0.00 |     -36.62 | third_0\r\n 1366822 |       0.00 |       0.00 | strided_slice_1/stack\r\n 1366828 |       0.00 |       0.00 | strided_slice_1/stack_1\r\n 1366832 |       0.00 |       0.00 | strided_slice_1/stack_2\r\n 1366838 |     115.97 |     115.97 | first_1\r\n 1369862 |     116.58 |       0.61 | first_1\r\n 1369863 |     117.19 |       0.61 | first_1\r\n 1369864 |     117.80 |       0.61 | first_1\r\n 1391237 |     117.19 |      -0.61 | first_1\r\n 1391238 |     116.58 |      -0.61 | first_1\r\n 1391239 |     115.97 |      -0.61 | first_1\r\n 1391255 |     115.97 |       0.00 | strided_slice_1\r\n 1391273 |     115.97 |       0.00 | ExpandDims_1/dim\r\n 1391278 |     115.97 |       0.00 | xdt_1/multiples\r\n 1391281 |     115.97 |       0.00 | Const_1\r\n 1391285 |     115.97 |       0.00 | ExpandDims_1\r\n 1391293 |    7073.97 |    6958.01 | xdt_1\r\n 1391321 |    7110.77 |      36.80 | third_1\r\n 1394347 |    7111.38 |       0.61 | third_1\r\n 1394348 |    7111.99 |       0.61 | third_1\r\n 1394349 |    7112.60 |       0.61 | third_1\r\n 1436988 |    7111.99 |      -0.61 | third_1\r\n 1436989 |    7111.38 |      -0.61 | third_1\r\n 1436989 |    7110.77 |      -0.61 | third_1\r\n 1436996 |    6994.80 |    -115.97 | first_1\r\n 1436996 |      36.80 |   -6958.01 | xdt_1\r\n 1437008 |      36.80 |       0.00 | total_1\r\n 1437017 |      36.82 |       0.02 | total_1\r\n 1437045 |      36.80 |      -0.02 | total_1\r\n 1437050 |       0.00 |     -36.80 | third_1\r\n 1437053 |       0.00 |       0.00 | add\r\n 1437117 |       0.00 |      -0.00 | total_1\r\n 1461492 |       0.00 |      -0.00 | total_0\r\n```\r\nA few things to note:\r\nthe order of the operations is as expected and looks good\r\nmemory consumption of first is not expected, no memory for the input tensor Xder is allocated (or reported)\r\nbeside first, memory consumption looks mostly as expected\r\n\r\nLog for the single run before the OOM-crash (with -size 90000 or more):\r\n\r\n```\r\nsingleExecution finished!\r\nPrinting timeline for /gpu:0\r\n-------------------------------------------\r\ntime[ms] |  total[MB] |   diff[MB] | kernel\r\n       0 |       0.00 |       0.00 | _SOURCE\r\n    1568 |       0.00 |       0.00 | strided_slice/stack\r\n    1584 |       0.00 |       0.00 | strided_slice/stack_1\r\n    1622 |       0.00 |       0.00 | strided_slice/stack_2\r\n  978725 |       0.00 |       0.00 | strided_slice\r\n  978781 |     130.46 |     130.46 | first_0\r\n 1228768 |     131.15 |       0.69 | first_0\r\n 1228776 |     131.84 |       0.69 | first_0\r\n 1228778 |     132.52 |       0.69 | first_0\r\n 1229123 |     131.84 |      -0.69 | first_0\r\n 1229758 |     131.15 |      -0.69 | first_0\r\n 1229760 |     130.46 |      -0.69 | first_0\r\n 1229818 |     130.46 |       0.00 | ExpandDims/dim\r\n 1229833 |     130.46 |       0.00 | xdt_0/multiples\r\n 1229839 |     130.46 |       0.00 | Const\r\n 1229845 |     130.46 |       0.00 | ExpandDims\r\n 1229876 |    7999.42 |    7868.96 | xdt_0\r\n 1229955 |    8040.62 |      41.20 | third_0\r\n 1235602 |    8041.31 |       0.69 | third_0\r\n 1235605 |    8041.99 |       0.69 | third_0\r\n 1235606 |    8042.68 |       0.69 | third_0\r\n 1280551 |    8041.99 |      -0.69 | third_0\r\n 1280553 |    8041.31 |      -0.69 | third_0\r\n 1280553 |    8040.62 |      -0.69 | third_0\r\n 1280560 |     171.66 |   -7868.96 | xdt_0\r\n 1280561 |      41.20 |    -130.46 | first_0\r\n 1280586 |      41.20 |       0.00 | total_0\r\n 1280617 |      41.22 |       0.02 | total_0\r\n 1280652 |      41.20 |      -0.02 | total_0\r\n 1280660 |       0.00 |     -41.20 | third_0\r\n 1308070 |       0.00 |      -0.00 | total_0\r\nPeak: \r\n8433360384\r\n```\r\nI see no reason why the following execution should fail? Somebody any idea?\r\n\r\n\r\n"}
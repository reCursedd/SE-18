{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/393422620", "html_url": "https://github.com/tensorflow/tensorflow/issues/19617#issuecomment-393422620", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19617", "id": 393422620, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzQyMjYyMA==", "user": {"login": "yunyin", "id": 9065977, "node_id": "MDQ6VXNlcjkwNjU5Nzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/9065977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yunyin", "html_url": "https://github.com/yunyin", "followers_url": "https://api.github.com/users/yunyin/followers", "following_url": "https://api.github.com/users/yunyin/following{/other_user}", "gists_url": "https://api.github.com/users/yunyin/gists{/gist_id}", "starred_url": "https://api.github.com/users/yunyin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yunyin/subscriptions", "organizations_url": "https://api.github.com/users/yunyin/orgs", "repos_url": "https://api.github.com/users/yunyin/repos", "events_url": "https://api.github.com/users/yunyin/events{/privacy}", "received_events_url": "https://api.github.com/users/yunyin/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-31T06:33:30Z", "updated_at": "2018-05-31T06:34:25Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=8096033\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jinxin0924\">@jinxin0924</a> Thank you for your reply. I solve this problems with your second suggestion.<br>\nIt's a nice work. However I still have some problems about <code>local_step</code> in <code>model_average_optimizer.py</code>.<br>\nI found that it seems different workers share the same <code>local_step</code>.</p>\n<p>detail logs are shown below,<br>\nIt seems that model average is triggered in <code>(0,0),(4,2),(6,4),(9,9)</code>, it doesn't make any sense.</p>\n<p>worker0 log:</p>\n<pre><code>INFO:tensorflow:is chief: True, len: 2\nINFO:tensorflow:0 0 8.00 9.00\nINFO:tensorflow:0 1 9.00 10.00\nINFO:tensorflow:0 2 10.00 11.00\nINFO:tensorflow:0 3 11.00 12.00\nINFO:tensorflow:0 4 18.00 19.00\nINFO:tensorflow:0 5 19.00 20.00\nINFO:tensorflow:0 6 27.00 28.00\nINFO:tensorflow:0 7 28.00 29.00\nINFO:tensorflow:0 8 29.00 30.00\nINFO:tensorflow:0 9 48.50 49.50\n</code></pre>\n<p>worker1 log:</p>\n<pre><code>INFO:tensorflow:is chief: False, len: 2\nINFO:tensorflow:1 0 8.00 9.00\nINFO:tensorflow:1 1 16.00 17.00\nINFO:tensorflow:1 2 18.00 19.00\nINFO:tensorflow:1 3 26.00 27.00\nINFO:tensorflow:1 4 27.00 28.00\nINFO:tensorflow:1 5 35.00 36.00\nINFO:tensorflow:1 6 43.00 44.00\nINFO:tensorflow:1 7 51.00 52.00\nINFO:tensorflow:1 8 59.00 60.00\nINFO:tensorflow:1 9 48.50 49.50\n</code></pre>", "body_text": "@jinxin0924 Thank you for your reply. I solve this problems with your second suggestion.\nIt's a nice work. However I still have some problems about local_step in model_average_optimizer.py.\nI found that it seems different workers share the same local_step.\ndetail logs are shown below,\nIt seems that model average is triggered in (0,0),(4,2),(6,4),(9,9), it doesn't make any sense.\nworker0 log:\nINFO:tensorflow:is chief: True, len: 2\nINFO:tensorflow:0 0 8.00 9.00\nINFO:tensorflow:0 1 9.00 10.00\nINFO:tensorflow:0 2 10.00 11.00\nINFO:tensorflow:0 3 11.00 12.00\nINFO:tensorflow:0 4 18.00 19.00\nINFO:tensorflow:0 5 19.00 20.00\nINFO:tensorflow:0 6 27.00 28.00\nINFO:tensorflow:0 7 28.00 29.00\nINFO:tensorflow:0 8 29.00 30.00\nINFO:tensorflow:0 9 48.50 49.50\n\nworker1 log:\nINFO:tensorflow:is chief: False, len: 2\nINFO:tensorflow:1 0 8.00 9.00\nINFO:tensorflow:1 1 16.00 17.00\nINFO:tensorflow:1 2 18.00 19.00\nINFO:tensorflow:1 3 26.00 27.00\nINFO:tensorflow:1 4 27.00 28.00\nINFO:tensorflow:1 5 35.00 36.00\nINFO:tensorflow:1 6 43.00 44.00\nINFO:tensorflow:1 7 51.00 52.00\nINFO:tensorflow:1 8 59.00 60.00\nINFO:tensorflow:1 9 48.50 49.50", "body": "@jinxin0924 Thank you for your reply. I solve this problems with your second suggestion.\r\nIt's a nice work. However I still have some problems about `local_step` in `model_average_optimizer.py`. \r\nI found that it seems different workers share the same `local_step`.\r\n\r\ndetail logs are shown below,\r\nIt seems that model average is triggered in `(0,0),(4,2),(6,4),(9,9)`, it doesn't make any sense.\r\n\r\nworker0 log:\r\n\r\n\tINFO:tensorflow:is chief: True, len: 2\r\n\tINFO:tensorflow:0 0 8.00 9.00\r\n\tINFO:tensorflow:0 1 9.00 10.00\r\n\tINFO:tensorflow:0 2 10.00 11.00\r\n\tINFO:tensorflow:0 3 11.00 12.00\r\n\tINFO:tensorflow:0 4 18.00 19.00\r\n\tINFO:tensorflow:0 5 19.00 20.00\r\n\tINFO:tensorflow:0 6 27.00 28.00\r\n\tINFO:tensorflow:0 7 28.00 29.00\r\n\tINFO:tensorflow:0 8 29.00 30.00\r\n\tINFO:tensorflow:0 9 48.50 49.50\r\n\r\nworker1 log:\r\n\r\n\tINFO:tensorflow:is chief: False, len: 2\r\n\tINFO:tensorflow:1 0 8.00 9.00\r\n\tINFO:tensorflow:1 1 16.00 17.00\r\n\tINFO:tensorflow:1 2 18.00 19.00\r\n    INFO:tensorflow:1 3 26.00 27.00\r\n    INFO:tensorflow:1 4 27.00 28.00\r\n    INFO:tensorflow:1 5 35.00 36.00\r\n    INFO:tensorflow:1 6 43.00 44.00\r\n    INFO:tensorflow:1 7 51.00 52.00\r\n    INFO:tensorflow:1 8 59.00 60.00\r\n    INFO:tensorflow:1 9 48.50 49.50\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/410913699", "html_url": "https://github.com/tensorflow/tensorflow/issues/18238#issuecomment-410913699", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18238", "id": 410913699, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDkxMzY5OQ==", "user": {"login": "panfengli", "id": 18660165, "node_id": "MDQ6VXNlcjE4NjYwMTY1", "avatar_url": "https://avatars2.githubusercontent.com/u/18660165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/panfengli", "html_url": "https://github.com/panfengli", "followers_url": "https://api.github.com/users/panfengli/followers", "following_url": "https://api.github.com/users/panfengli/following{/other_user}", "gists_url": "https://api.github.com/users/panfengli/gists{/gist_id}", "starred_url": "https://api.github.com/users/panfengli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/panfengli/subscriptions", "organizations_url": "https://api.github.com/users/panfengli/orgs", "repos_url": "https://api.github.com/users/panfengli/repos", "events_url": "https://api.github.com/users/panfengli/events{/privacy}", "received_events_url": "https://api.github.com/users/panfengli/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-07T02:35:28Z", "updated_at": "2018-08-07T03:01:15Z", "author_association": "NONE", "body_html": "<p>For example,</p>\n<pre><code>img = tf.constant(([1,2,3], [4,5,6], [7,8,9]))\nmask = tf.where(img&gt;5)\nnew_img = tf.zeros_like(img)\nassign = tf.constant([22,27,32,37])\n&gt;&gt;&gt; sess.run(img)\narray([[1, 2, 3],\n       [4, 5, 6],\n       [7, 8, 9]], dtype=int32)\n&gt;&gt;&gt; sess.run(mask)\narray([[1, 2],\n       [2, 0],\n       [2, 1],\n       [2, 2]])\n\n</code></pre>\n<p>I would like add some value to <code>new_img</code> and then becomes</p>\n<pre><code>[[0, 0, 0],\n[0, 0, 22],\n[27, 32, 37]]\n</code></pre>\n<p>Where the values are from <code>assign</code>, and positions are from <code>mask</code></p>\n<p>And there is a function to extract value from tensor according to slice:<br>\n<code>tf.gather_nd(img, tf.cast(mask, tf.int32))</code>,</p>\n<p>But what if I want to assign values according to mask? I don't know whether there are available functions.<br>\n<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1381301\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ppwwyyxx\">@ppwwyyxx</a></p>", "body_text": "For example,\nimg = tf.constant(([1,2,3], [4,5,6], [7,8,9]))\nmask = tf.where(img>5)\nnew_img = tf.zeros_like(img)\nassign = tf.constant([22,27,32,37])\n>>> sess.run(img)\narray([[1, 2, 3],\n       [4, 5, 6],\n       [7, 8, 9]], dtype=int32)\n>>> sess.run(mask)\narray([[1, 2],\n       [2, 0],\n       [2, 1],\n       [2, 2]])\n\n\nI would like add some value to new_img and then becomes\n[[0, 0, 0],\n[0, 0, 22],\n[27, 32, 37]]\n\nWhere the values are from assign, and positions are from mask\nAnd there is a function to extract value from tensor according to slice:\ntf.gather_nd(img, tf.cast(mask, tf.int32)),\nBut what if I want to assign values according to mask? I don't know whether there are available functions.\n@ppwwyyxx", "body": "For example,\r\n\r\n```\r\nimg = tf.constant(([1,2,3], [4,5,6], [7,8,9]))\r\nmask = tf.where(img>5)\r\nnew_img = tf.zeros_like(img)\r\nassign = tf.constant([22,27,32,37])\r\n>>> sess.run(img)\r\narray([[1, 2, 3],\r\n       [4, 5, 6],\r\n       [7, 8, 9]], dtype=int32)\r\n>>> sess.run(mask)\r\narray([[1, 2],\r\n       [2, 0],\r\n       [2, 1],\r\n       [2, 2]])\r\n\r\n```\r\nI would like add some value to `new_img` and then becomes\r\n```\r\n[[0, 0, 0],\r\n[0, 0, 22],\r\n[27, 32, 37]]\r\n```\r\nWhere the values are from `assign`, and positions are from `mask`\r\n\r\nAnd there is a function to extract value from tensor according to slice:\r\n`tf.gather_nd(img, tf.cast(mask, tf.int32))`,\r\n\r\nBut what if I want to assign values according to mask? I don't know whether there are available functions.\r\n@ppwwyyxx "}
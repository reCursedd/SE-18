{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/385748968", "html_url": "https://github.com/tensorflow/tensorflow/issues/19002#issuecomment-385748968", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19002", "id": 385748968, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTc0ODk2OA==", "user": {"login": "glhfgg1024", "id": 30264480, "node_id": "MDQ6VXNlcjMwMjY0NDgw", "avatar_url": "https://avatars3.githubusercontent.com/u/30264480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glhfgg1024", "html_url": "https://github.com/glhfgg1024", "followers_url": "https://api.github.com/users/glhfgg1024/followers", "following_url": "https://api.github.com/users/glhfgg1024/following{/other_user}", "gists_url": "https://api.github.com/users/glhfgg1024/gists{/gist_id}", "starred_url": "https://api.github.com/users/glhfgg1024/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glhfgg1024/subscriptions", "organizations_url": "https://api.github.com/users/glhfgg1024/orgs", "repos_url": "https://api.github.com/users/glhfgg1024/repos", "events_url": "https://api.github.com/users/glhfgg1024/events{/privacy}", "received_events_url": "https://api.github.com/users/glhfgg1024/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-01T18:28:05Z", "updated_at": "2018-05-01T18:29:01Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> Sorry, the problem may not lie in the Dataset API. Maybe lie in the following:  After one epoch, I conduct the prediction on validation set like this:</p>\n<pre><code>if step%NUM_TRAIN_STEPS_ONE_EPOCH==0:\n    val_features_op, val_labels_op = dataset_input_from_tfrecords(val_filenames, batch_size=1, num_epochs=50000, shuffle=True, image_mean=None)\n    ....\n    val_features, val_labels = sess.run([val_features_op, val_labels_op])\n    ....\n</code></pre>\n<p>So the <code>val_features_op, val_labels_op</code> will add to the whole graph for many times during the loop, right? Maybe this is the problem, which makes the graph bigger and bigger.</p>", "body_text": "@mrry Sorry, the problem may not lie in the Dataset API. Maybe lie in the following:  After one epoch, I conduct the prediction on validation set like this:\nif step%NUM_TRAIN_STEPS_ONE_EPOCH==0:\n    val_features_op, val_labels_op = dataset_input_from_tfrecords(val_filenames, batch_size=1, num_epochs=50000, shuffle=True, image_mean=None)\n    ....\n    val_features, val_labels = sess.run([val_features_op, val_labels_op])\n    ....\n\nSo the val_features_op, val_labels_op will add to the whole graph for many times during the loop, right? Maybe this is the problem, which makes the graph bigger and bigger.", "body": "@mrry Sorry, the problem may not lie in the Dataset API. Maybe lie in the following:  After one epoch, I conduct the prediction on validation set like this:\r\n\r\n    if step%NUM_TRAIN_STEPS_ONE_EPOCH==0:\r\n        val_features_op, val_labels_op = dataset_input_from_tfrecords(val_filenames, batch_size=1, num_epochs=50000, shuffle=True, image_mean=None)\r\n        ....\r\n        val_features, val_labels = sess.run([val_features_op, val_labels_op])\r\n        ....\r\n    \r\nSo the `val_features_op, val_labels_op` will add to the whole graph for many times during the loop, right? Maybe this is the problem, which makes the graph bigger and bigger."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/363136736", "html_url": "https://github.com/tensorflow/tensorflow/issues/16753#issuecomment-363136736", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16753", "id": 363136736, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzEzNjczNg==", "user": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-05T16:24:07Z", "updated_at": "2018-02-05T16:24:30Z", "author_association": "MEMBER", "body_html": "<p>This is a known issue, it has nothing to do with the virtual gpu feature. The problem is that some options (like the ones for gpu) in session config cannot be changed once they're set. <code>device_lib.list_local_devices()</code> invokes the <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/client/device_lib.i#L32\">DeviceFactory::AddDevices()</a> which takes an empty SessionOptions, and later when <code>tf.Session(config=config)</code> is called the gpu options in <code>config</code> will be ignored.</p>\n<p>I believe if you remove the <code>list_local_devices()</code> call it should work. I'm closing this one, and please refer to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"211479738\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8021\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8021/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/8021\">#8021</a> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"212210885\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8136\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8136/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/8136\">#8136</a> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"223471259\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/9374\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/9374/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/9374\">#9374</a> for more information.</p>", "body_text": "This is a known issue, it has nothing to do with the virtual gpu feature. The problem is that some options (like the ones for gpu) in session config cannot be changed once they're set. device_lib.list_local_devices() invokes the DeviceFactory::AddDevices() which takes an empty SessionOptions, and later when tf.Session(config=config) is called the gpu options in config will be ignored.\nI believe if you remove the list_local_devices() call it should work. I'm closing this one, and please refer to #8021 #8136 #9374 for more information.", "body": "This is a known issue, it has nothing to do with the virtual gpu feature. The problem is that some options (like the ones for gpu) in session config cannot be changed once they're set. `device_lib.list_local_devices()` invokes the [DeviceFactory::AddDevices()](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/client/device_lib.i#L32) which takes an empty SessionOptions, and later when `tf.Session(config=config)` is called the gpu options in `config` will be ignored.\r\n\r\nI believe if you remove the `list_local_devices()` call it should work. I'm closing this one, and please refer to #8021 #8136 #9374 for more information."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/234032997", "pull_request_review_id": 175587477, "id": 234032997, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNDAzMjk5Nw==", "diff_hunk": "@@ -45,6 +45,13 @@ cp $SCRIPT_DIR/gen/lib/libtensorflow-core.a \\\n    $FW_DIR_TFCORE/tensorflow_experimental\n cp $SCRIPT_DIR/gen/protobuf_ios/lib/libprotobuf.a \\\n    $FW_DIR_TFCORE/libprotobuf_experimental.a\n+IOS_ARCH=$(ls $SCRIPT_DIR/gen/bin|grep ios|awk '{print tolower($0)}')\n+NSYNC_PATH=./downloads/nsync/builds/${IOS_ARCH:4}.ios.c++11/libnsync.a", "path": "tensorflow/contrib/makefile/create_ios_frameworks.sh", "position": null, "original_position": 5, "commit_id": "0bc11ecde5d9a4af42192fca91815867d06a9fe4", "original_commit_id": "d3aed918a7bf38f5ef6c3afc687a8d903d752e5d", "user": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "body": "Thanks for reporting this issue, @RockfordWei \r\nNo need to apology, and I appreciate you for flagging the issue. \r\n\r\nI think you probably only need to change the line from \r\n    NSYNC_PATH=./downloads/nsync/builds/${IOS_ARCH:4}.ios.c++11/libnsync.a\r\nto\r\n    NSYNC_PATH=.//downloads/nsync/builds/lipo.ios.c++11/nsync.a\r\n(See the bottom of the `compile_nsync.sh`. It uses `lipo` to archive nsync from all architectures to a single file)\r\n\r\nCould you help to test it? Just run the scripts without `-a` parameters, and it will build for all architectures\r\n\r\n    $ ./tensorflow/contrib/makefile/build_all_ios.sh\r\n    $ ./tensorflow/contrib/makefile/create_ios_frameworks.sh\r\n\r\nTry to use the framework on iOS device (arm) and/or emulator (normally it should be x64). You don't need to test all the architectures. \r\n\r\nThanks a lot again!", "created_at": "2018-11-15T22:31:55Z", "updated_at": "2018-11-16T15:57:33Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/21678#discussion_r234032997", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21678", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/234032997"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/21678#discussion_r234032997"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21678"}}, "body_html": "<p>Thanks for reporting this issue, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=22161723\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/RockfordWei\">@RockfordWei</a><br>\nNo need to apology, and I appreciate you for flagging the issue.</p>\n<p>I think you probably only need to change the line from<br>\nNSYNC_PATH=./downloads/nsync/builds/${IOS_ARCH:4}.ios.c++11/libnsync.a<br>\nto<br>\nNSYNC_PATH=.//downloads/nsync/builds/lipo.ios.c++11/nsync.a<br>\n(See the bottom of the <code>compile_nsync.sh</code>. It uses <code>lipo</code> to archive nsync from all architectures to a single file)</p>\n<p>Could you help to test it? Just run the scripts without <code>-a</code> parameters, and it will build for all architectures</p>\n<pre><code>$ ./tensorflow/contrib/makefile/build_all_ios.sh\n$ ./tensorflow/contrib/makefile/create_ios_frameworks.sh\n</code></pre>\n<p>Try to use the framework on iOS device (arm) and/or emulator (normally it should be x64). You don't need to test all the architectures.</p>\n<p>Thanks a lot again!</p>", "body_text": "Thanks for reporting this issue, @RockfordWei\nNo need to apology, and I appreciate you for flagging the issue.\nI think you probably only need to change the line from\nNSYNC_PATH=./downloads/nsync/builds/${IOS_ARCH:4}.ios.c++11/libnsync.a\nto\nNSYNC_PATH=.//downloads/nsync/builds/lipo.ios.c++11/nsync.a\n(See the bottom of the compile_nsync.sh. It uses lipo to archive nsync from all architectures to a single file)\nCould you help to test it? Just run the scripts without -a parameters, and it will build for all architectures\n$ ./tensorflow/contrib/makefile/build_all_ios.sh\n$ ./tensorflow/contrib/makefile/create_ios_frameworks.sh\n\nTry to use the framework on iOS device (arm) and/or emulator (normally it should be x64). You don't need to test all the architectures.\nThanks a lot again!", "in_reply_to_id": 230131618}
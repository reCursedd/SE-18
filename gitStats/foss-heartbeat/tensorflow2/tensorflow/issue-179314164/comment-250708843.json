{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/250708843", "html_url": "https://github.com/tensorflow/tensorflow/issues/4588#issuecomment-250708843", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4588", "id": 250708843, "node_id": "MDEyOklzc3VlQ29tbWVudDI1MDcwODg0Mw==", "user": {"login": "DavidNemeskey", "id": 690386, "node_id": "MDQ6VXNlcjY5MDM4Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/690386?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidNemeskey", "html_url": "https://github.com/DavidNemeskey", "followers_url": "https://api.github.com/users/DavidNemeskey/followers", "following_url": "https://api.github.com/users/DavidNemeskey/following{/other_user}", "gists_url": "https://api.github.com/users/DavidNemeskey/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidNemeskey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidNemeskey/subscriptions", "organizations_url": "https://api.github.com/users/DavidNemeskey/orgs", "repos_url": "https://api.github.com/users/DavidNemeskey/repos", "events_url": "https://api.github.com/users/DavidNemeskey/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidNemeskey/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-30T10:09:41Z", "updated_at": "2016-09-30T16:23:48Z", "author_association": "NONE", "body_html": "<p>I could reproduce the issue as well. However, this is a sneaky one, as the behaviour differs between Python versions.</p>\n<p>Apparently, when <code>const_{time|batch}</code> is <code>None</code>(, and the <code>Dimension</code>-typed <code>got_{time|batch}</code> is not),</p>\n<ol>\n<li>Python 3.4.2 calls <code>Dimension.__eq__</code>, and negates the result</li>\n<li>Python 3.5.2 calls <code>Dimension.__ne__</code></li>\n</ol>\n<p>Both return <code>None</code>, but</p>\n<ol>\n<li>in the first case, the <code>if</code> then becomes <code>if not None</code>, so <code>if True</code></li>\n<li>in the second, it becomes <code>if None</code>, i.e. <code>if False</code></li>\n</ol>\n<p>I propose fixing the issue either as <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1865411\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gibiansky\">@gibiansky</a> suggested, or just call <code>as_list()</code> on <code>shape</code> so that we have an <code>int</code>--<code>int</code> comparison.</p>", "body_text": "I could reproduce the issue as well. However, this is a sneaky one, as the behaviour differs between Python versions.\nApparently, when const_{time|batch} is None(, and the Dimension-typed got_{time|batch} is not),\n\nPython 3.4.2 calls Dimension.__eq__, and negates the result\nPython 3.5.2 calls Dimension.__ne__\n\nBoth return None, but\n\nin the first case, the if then becomes if not None, so if True\nin the second, it becomes if None, i.e. if False\n\nI propose fixing the issue either as @gibiansky suggested, or just call as_list() on shape so that we have an int--int comparison.", "body": "I could reproduce the issue as well. However, this is a sneaky one, as the behaviour differs between Python versions.\n\nApparently, when `const_{time|batch}` is `None`(, and the `Dimension`-typed `got_{time|batch}` is not),\n1. Python 3.4.2 calls `Dimension.__eq__`, and negates the result\n2. Python 3.5.2 calls `Dimension.__ne__`\n\nBoth return `None`, but\n1. in the first case, the `if` then becomes `if not None`, so `if True`\n2. in the second, it becomes `if None`, i.e. `if False`\n\nI propose fixing the issue either as @gibiansky suggested, or just call `as_list()` on `shape` so that we have an `int`--`int` comparison.\n"}
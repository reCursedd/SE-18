{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/188052958", "pull_request_review_id": 119954949, "id": 188052958, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4ODA1Mjk1OA==", "diff_hunk": "@@ -435,6 +435,11 @@ REGISTER_OP(\"DrawBoundingBoxes\")\n     .Output(\"output: T\")\n     .Attr(\"T: {float, half} = DT_FLOAT\")\n     .SetShapeFn([](InferenceContext* c) {\n+      ShapeHandle boxes;\n+      // boxes: 3-D with shape [batch, num_bounding_boxes, 4]\n+      TF_RETURN_IF_ERROR(c->WithRank(c->input(1), 3, &boxes));\n+      DimensionHandle unused;\n+      TF_RETURN_IF_ERROR(c->WithValue(c->Dim(boxes, 2), 4, &unused));", "path": "tensorflow/core/ops/image_ops.cc", "position": null, "original_position": 8, "commit_id": "95c54448785236510be281e929a959ecc1dcc12d", "original_commit_id": "6a996ac44254c925fe7d3652b2244ca221837649", "user": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "body": "I'm not sure this is correct. As I read the code, the rank of images should be 4, and the rank of boxes should be 3.\r\nWe can improve it further by checking that the depth dimension is either 1, 3, or 4 or unknown. https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/draw_bounding_box_op.cc#L48\r\n\r\n", "created_at": "2018-05-14T18:28:55Z", "updated_at": "2018-05-14T22:36:41Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/19237#discussion_r188052958", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19237", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/188052958"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/19237#discussion_r188052958"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19237"}}, "body_html": "<p>I'm not sure this is correct. As I read the code, the rank of images should be 4, and the rank of boxes should be 3.<br>\nWe can improve it further by checking that the depth dimension is either 1, 3, or 4 or unknown. <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/draw_bounding_box_op.cc#L48\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/draw_bounding_box_op.cc#L48</a></p>", "body_text": "I'm not sure this is correct. As I read the code, the rank of images should be 4, and the rank of boxes should be 3.\nWe can improve it further by checking that the depth dimension is either 1, 3, or 4 or unknown. https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/draw_bounding_box_op.cc#L48"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14291", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14291/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14291/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14291/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14291", "id": 271491285, "node_id": "MDU6SXNzdWUyNzE0OTEyODU=", "number": 14291, "title": "map_fn not working with string tensor on Android", "user": {"login": "andreas-eberle", "id": 9267365, "node_id": "MDQ6VXNlcjkyNjczNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/9267365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-eberle", "html_url": "https://github.com/andreas-eberle", "followers_url": "https://api.github.com/users/andreas-eberle/followers", "following_url": "https://api.github.com/users/andreas-eberle/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-eberle/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-eberle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-eberle/subscriptions", "organizations_url": "https://api.github.com/users/andreas-eberle/orgs", "repos_url": "https://api.github.com/users/andreas-eberle/repos", "events_url": "https://api.github.com/users/andreas-eberle/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-eberle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2017-11-06T14:21:30Z", "updated_at": "2018-08-30T16:41:37Z", "closed_at": "2018-08-30T16:41:37Z", "author_association": "CONTRIBUTOR", "body_html": "<p>It seems that the tensorflow Android version (1.4.0) does not include the kernel for TensorArrayScatterV3 for string tensors (see stacktrace below). This leads to the problem that I cannot use map_fn with string tensors on Android.</p>\n<p>The same code and model runs fine with the desktop Java API in the same version.</p>\n<p>Can you please add the missing kernel?</p>\n<p>Stacktrace</p>\n<pre><code>11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'TensorArrayScatterV3' with these attrs.  Registered devices: [CPU], Registered kernels:\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_BOOL]\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_FLOAT]\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_INT32]\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err: \t [[Node: map/TensorArrayUnstack/TensorArrayScatter/TensorArrayScatterV3 = TensorArrayScatterV3[T=DT_STRING, _class=[\"loc:@image_strings\"]](map/TensorArray, map/TensorArrayUnstack/range, image_strings, map/TensorArray:1)]]\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.report(FutureTask.java:94)\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.get(FutureTask.java:164)\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.neuronalnetwork.service.TaskWorkerLoop$Loop.run(TaskWorkerLoop.java:71)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at java.lang.Thread.run(Thread.java:762)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err: Caused by: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'TensorArrayScatterV3' with these attrs.  Registered devices: [CPU], Registered kernels:\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_BOOL]\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_FLOAT]\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_INT32]\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err: \t [[Node: map/TensorArrayUnstack/TensorArrayScatter/TensorArrayScatterV3 = TensorArrayScatterV3[T=DT_STRING, _class=[\"loc:@image_strings\"]](map/TensorArray, map/TensorArrayUnstack/range, image_strings, map/TensorArray:1)]]\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session.run(Native Method)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session.access$100(Session.java:48)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session$Runner.runHelper(Session.java:298)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session$Runner.run(Session.java:248)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.brain.Api.run(Api.java:39)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.Evaluator.evaluateBatch(Evaluator.java:66)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.Evaluator.evaluate(Evaluator.java:54)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.EvaluationService.evaluateNN(EvaluationService.java:114)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.EvaluationService.evaluateSections(EvaluationService.java:73)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.neuronalnetwork.service.engine.NetworkEngine.lambda$calculate$0(NetworkEngine.java:59)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.neuronalnetwork.service.engine.NetworkEngine$$Lambda$1.call(Unknown Source)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:428)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err: \t... 1 more\n</code></pre>", "body_text": "It seems that the tensorflow Android version (1.4.0) does not include the kernel for TensorArrayScatterV3 for string tensors (see stacktrace below). This leads to the problem that I cannot use map_fn with string tensors on Android.\nThe same code and model runs fine with the desktop Java API in the same version.\nCan you please add the missing kernel?\nStacktrace\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'TensorArrayScatterV3' with these attrs.  Registered devices: [CPU], Registered kernels:\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_BOOL]\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_FLOAT]\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_INT32]\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err: \t [[Node: map/TensorArrayUnstack/TensorArrayScatter/TensorArrayScatterV3 = TensorArrayScatterV3[T=DT_STRING, _class=[\"loc:@image_strings\"]](map/TensorArray, map/TensorArrayUnstack/range, image_strings, map/TensorArray:1)]]\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.report(FutureTask.java:94)\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.get(FutureTask.java:164)\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.neuronalnetwork.service.TaskWorkerLoop$Loop.run(TaskWorkerLoop.java:71)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at java.lang.Thread.run(Thread.java:762)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err: Caused by: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'TensorArrayScatterV3' with these attrs.  Registered devices: [CPU], Registered kernels:\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_BOOL]\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_FLOAT]\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_INT32]\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err: \t [[Node: map/TensorArrayUnstack/TensorArrayScatter/TensorArrayScatterV3 = TensorArrayScatterV3[T=DT_STRING, _class=[\"loc:@image_strings\"]](map/TensorArray, map/TensorArrayUnstack/range, image_strings, map/TensorArray:1)]]\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session.run(Native Method)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session.access$100(Session.java:48)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session$Runner.runHelper(Session.java:298)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session$Runner.run(Session.java:248)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.brain.Api.run(Api.java:39)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.Evaluator.evaluateBatch(Evaluator.java:66)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.Evaluator.evaluate(Evaluator.java:54)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.EvaluationService.evaluateNN(EvaluationService.java:114)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.EvaluationService.evaluateSections(EvaluationService.java:73)\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.neuronalnetwork.service.engine.NetworkEngine.lambda$calculate$0(NetworkEngine.java:59)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.neuronalnetwork.service.engine.NetworkEngine$$Lambda$1.call(Unknown Source)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:428)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err: \t... 1 more", "body": "It seems that the tensorflow Android version (1.4.0) does not include the kernel for TensorArrayScatterV3 for string tensors (see stacktrace below). This leads to the problem that I cannot use map_fn with string tensors on Android. \r\n\r\nThe same code and model runs fine with the desktop Java API in the same version. \r\n\r\nCan you please add the missing kernel?\r\n\r\nStacktrace\r\n\r\n```\r\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'TensorArrayScatterV3' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_BOOL]\r\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_FLOAT]\r\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_INT32]\r\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err: \t [[Node: map/TensorArrayUnstack/TensorArrayScatter/TensorArrayScatterV3 = TensorArrayScatterV3[T=DT_STRING, _class=[\"loc:@image_strings\"]](map/TensorArray, map/TensorArrayUnstack/range, image_strings, map/TensorArray:1)]]\r\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.report(FutureTask.java:94)\r\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.get(FutureTask.java:164)\r\n11-06 15:14:45.760 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.neuronalnetwork.service.TaskWorkerLoop$Loop.run(TaskWorkerLoop.java:71)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at java.lang.Thread.run(Thread.java:762)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err: Caused by: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'TensorArrayScatterV3' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_BOOL]\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_FLOAT]\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:   device='CPU'; T in [DT_INT32]\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err: \t [[Node: map/TensorArrayUnstack/TensorArrayScatter/TensorArrayScatterV3 = TensorArrayScatterV3[T=DT_STRING, _class=[\"loc:@image_strings\"]](map/TensorArray, map/TensorArrayUnstack/range, image_strings, map/TensorArray:1)]]\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session.run(Native Method)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session.access$100(Session.java:48)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session$Runner.runHelper(Session.java:298)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at org.tensorflow.Session$Runner.run(Session.java:248)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.brain.Api.run(Api.java:39)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.Evaluator.evaluateBatch(Evaluator.java:66)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.Evaluator.evaluate(Evaluator.java:54)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.EvaluationService.evaluateNN(EvaluationService.java:114)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.client.api.EvaluationService.evaluateSections(EvaluationService.java:73)\r\n11-06 15:14:45.761 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.neuronalnetwork.service.engine.NetworkEngine.lambda$calculate$0(NetworkEngine.java:59)\r\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at de.test.neuronalnetwork.service.engine.NetworkEngine$$Lambda$1.call(Unknown Source)\r\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\r\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:428)\r\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\r\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\r\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\r\n11-06 15:14:45.762 32605-1644/de.test.android.fisheye.local W/System.err: \t... 1 more\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/428290790", "html_url": "https://github.com/tensorflow/tensorflow/pull/22429#issuecomment-428290790", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22429", "id": 428290790, "node_id": "MDEyOklzc3VlQ29tbWVudDQyODI5MDc5MA==", "user": {"login": "feihugis", "id": 5057740, "node_id": "MDQ6VXNlcjUwNTc3NDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5057740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feihugis", "html_url": "https://github.com/feihugis", "followers_url": "https://api.github.com/users/feihugis/followers", "following_url": "https://api.github.com/users/feihugis/following{/other_user}", "gists_url": "https://api.github.com/users/feihugis/gists{/gist_id}", "starred_url": "https://api.github.com/users/feihugis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feihugis/subscriptions", "organizations_url": "https://api.github.com/users/feihugis/orgs", "repos_url": "https://api.github.com/users/feihugis/repos", "events_url": "https://api.github.com/users/feihugis/events{/privacy}", "received_events_url": "https://api.github.com/users/feihugis/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-09T18:01:42Z", "updated_at": "2018-10-09T18:01:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1072079\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jsimsa\">@jsimsa</a> Yes. The problem is related to the backslash in Windows path. Here is some sample log info. The child paths are not right, and no mached files are pushed to the heap.</p>\n<pre><code>Input pattern: ./T:\\tmp\\tmpt35u2cfw\\**\\**\\*.txt; Current dir: .\nGetFileSystemForFile status: OK\nGetChildren status: OK; Children size: 3; Heap size: 0\nChild dir path: ./py_test_dir\nChild dir path: ./tensorflow\nChild dir path: ./__init__.py\n</code></pre>\n<p><a href=\"https://github.com/tensorflow/tensorflow/blob/597f04e949285f7e72682c7c3a6ed656a5aedb1e/tensorflow/core/kernels/data/matching_files_dataset_op.cc#L129-L132\">These code</a> do not work right for Windows path. One more step is needed to convert the <code>\\\\</code> in Windows path to <code>/</code> as <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/windows/windows_file_system.cc#L489-L505\">WindowsFileSystem::GetMatchingPaths</a> does.</p>", "body_text": "@jsimsa Yes. The problem is related to the backslash in Windows path. Here is some sample log info. The child paths are not right, and no mached files are pushed to the heap.\nInput pattern: ./T:\\tmp\\tmpt35u2cfw\\**\\**\\*.txt; Current dir: .\nGetFileSystemForFile status: OK\nGetChildren status: OK; Children size: 3; Heap size: 0\nChild dir path: ./py_test_dir\nChild dir path: ./tensorflow\nChild dir path: ./__init__.py\n\nThese code do not work right for Windows path. One more step is needed to convert the \\\\ in Windows path to / as WindowsFileSystem::GetMatchingPaths does.", "body": "@jsimsa Yes. The problem is related to the backslash in Windows path. Here is some sample log info. The child paths are not right, and no mached files are pushed to the heap.\r\n```\r\nInput pattern: ./T:\\tmp\\tmpt35u2cfw\\**\\**\\*.txt; Current dir: .\r\nGetFileSystemForFile status: OK\r\nGetChildren status: OK; Children size: 3; Heap size: 0\r\nChild dir path: ./py_test_dir\r\nChild dir path: ./tensorflow\r\nChild dir path: ./__init__.py\r\n```\r\n [These code](https://github.com/tensorflow/tensorflow/blob/597f04e949285f7e72682c7c3a6ed656a5aedb1e/tensorflow/core/kernels/data/matching_files_dataset_op.cc#L129-L132) do not work right for Windows path. One more step is needed to convert the `\\\\` in Windows path to `/` as [WindowsFileSystem::GetMatchingPaths](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/windows/windows_file_system.cc#L489-L505) does. "}
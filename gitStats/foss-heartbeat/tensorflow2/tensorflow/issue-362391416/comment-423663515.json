{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/423663515", "html_url": "https://github.com/tensorflow/tensorflow/pull/22429#issuecomment-423663515", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22429", "id": 423663515, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzY2MzUxNQ==", "user": {"login": "feihugis", "id": 5057740, "node_id": "MDQ6VXNlcjUwNTc3NDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5057740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feihugis", "html_url": "https://github.com/feihugis", "followers_url": "https://api.github.com/users/feihugis/followers", "following_url": "https://api.github.com/users/feihugis/following{/other_user}", "gists_url": "https://api.github.com/users/feihugis/gists{/gist_id}", "starred_url": "https://api.github.com/users/feihugis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feihugis/subscriptions", "organizations_url": "https://api.github.com/users/feihugis/orgs", "repos_url": "https://api.github.com/users/feihugis/repos", "events_url": "https://api.github.com/users/feihugis/events{/privacy}", "received_events_url": "https://api.github.com/users/feihugis/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-21T20:37:23Z", "updated_at": "2018-09-24T17:01:24Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1072079\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jsimsa\">@jsimsa</a> Thanks for your comments.</p>\n<p>The issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"306245750\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/17810\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/17810/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/17810\">#17810</a> is that <code>Dataset.list_files</code> needs to wait until the <code>MatchingFilesOp</code> scans all the files (<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=260360\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/darrengarvey\">@darrengarvey</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=144114\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rohan100jain\">@rohan100jain</a>). To solve this issue, this implementation adopted the idea from this <a href=\"https://github.com/tensorflow/tensorflow/issues/17810#issuecomment-379080460\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/17810/hovercard\">comment</a> by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a>. In my understanding, the reason for implementing it as a dataset is that the iterator can be used over the dataset to yield the results without waiting.  Regarding the shuffling, <code>ShuffleDataset</code> Op could be used to shuffle the dataset proposed in this solution. Added a shuffling test case as an example.</p>\n<p>I thought about how to implement this solution in <code>MatchingFilsOp</code> kernel without using <code>Dataset</code>, but did not find a good solution.</p>\n<p>Do you have any ideas, suggestions, or comments?</p>", "body_text": "@jsimsa Thanks for your comments.\nThe issue #17810 is that Dataset.list_files needs to wait until the MatchingFilesOp scans all the files (@darrengarvey @rohan100jain). To solve this issue, this implementation adopted the idea from this comment by @mrry. In my understanding, the reason for implementing it as a dataset is that the iterator can be used over the dataset to yield the results without waiting.  Regarding the shuffling, ShuffleDataset Op could be used to shuffle the dataset proposed in this solution. Added a shuffling test case as an example.\nI thought about how to implement this solution in MatchingFilsOp kernel without using Dataset, but did not find a good solution.\nDo you have any ideas, suggestions, or comments?", "body": "@jsimsa Thanks for your comments.\r\n\r\nThe issue #17810 is that `Dataset.list_files` needs to wait until the `MatchingFilesOp` scans all the files (@darrengarvey @rohan100jain). To solve this issue, this implementation adopted the idea from this [comment](https://github.com/tensorflow/tensorflow/issues/17810#issuecomment-379080460) by @mrry. In my understanding, the reason for implementing it as a dataset is that the iterator can be used over the dataset to yield the results without waiting.  Regarding the shuffling, `ShuffleDataset` Op could be used to shuffle the dataset proposed in this solution. Added a shuffling test case as an example. \r\n\r\nI thought about how to implement this solution in `MatchingFilsOp` kernel without using `Dataset`, but did not find a good solution. \r\n\r\nDo you have any ideas, suggestions, or comments?     "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7312", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7312/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7312/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7312/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7312", "id": 205770518, "node_id": "MDU6SXNzdWUyMDU3NzA1MTg=", "number": 7312, "title": "incorrect usage of num_gpus & num_workers in mnist_replica.py", "user": {"login": "skaarthik", "id": 10677836, "node_id": "MDQ6VXNlcjEwNjc3ODM2", "avatar_url": "https://avatars1.githubusercontent.com/u/10677836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skaarthik", "html_url": "https://github.com/skaarthik", "followers_url": "https://api.github.com/users/skaarthik/followers", "following_url": "https://api.github.com/users/skaarthik/following{/other_user}", "gists_url": "https://api.github.com/users/skaarthik/gists{/gist_id}", "starred_url": "https://api.github.com/users/skaarthik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skaarthik/subscriptions", "organizations_url": "https://api.github.com/users/skaarthik/orgs", "repos_url": "https://api.github.com/users/skaarthik/repos", "events_url": "https://api.github.com/users/skaarthik/events{/privacy}", "received_events_url": "https://api.github.com/users/skaarthik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-02-07T02:49:12Z", "updated_at": "2018-02-08T00:59:58Z", "closed_at": "2018-02-08T00:59:58Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/dist_test/python/mnist_replica.py#L126\">mnist_replica.py</a> has the following code.</p>\n<pre><code> if FLAGS.num_gpus &lt; num_workers:\n    raise ValueError(\"number of gpus is less than number of workers\")\n</code></pre>\n<p>This will work fine in a single worker setup with one or more GPUs. However, it will throw error if the number of workers is greater than the number of GPUs available in each worker. For example, using 2 workers each with 1 GPU will trigger this error.</p>\n<p>It looks like this if-block can be removed. If that is an acceptable change, I can send a PR for that.</p>", "body_text": "mnist_replica.py has the following code.\n if FLAGS.num_gpus < num_workers:\n    raise ValueError(\"number of gpus is less than number of workers\")\n\nThis will work fine in a single worker setup with one or more GPUs. However, it will throw error if the number of workers is greater than the number of GPUs available in each worker. For example, using 2 workers each with 1 GPU will trigger this error.\nIt looks like this if-block can be removed. If that is an acceptable change, I can send a PR for that.", "body": "[mnist_replica.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/dist_test/python/mnist_replica.py#L126) has the following code. \r\n```\r\n if FLAGS.num_gpus < num_workers:\r\n    raise ValueError(\"number of gpus is less than number of workers\")\r\n```\r\nThis will work fine in a single worker setup with one or more GPUs. However, it will throw error if the number of workers is greater than the number of GPUs available in each worker. For example, using 2 workers each with 1 GPU will trigger this error.\r\n\r\nIt looks like this if-block can be removed. If that is an acceptable change, I can send a PR for that."}
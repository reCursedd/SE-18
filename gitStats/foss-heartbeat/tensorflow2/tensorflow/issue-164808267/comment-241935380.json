{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/241935380", "html_url": "https://github.com/tensorflow/tensorflow/pull/3269#issuecomment-241935380", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3269", "id": 241935380, "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTkzNTM4MA==", "user": {"login": "flx42", "id": 3645581, "node_id": "MDQ6VXNlcjM2NDU1ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/3645581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flx42", "html_url": "https://github.com/flx42", "followers_url": "https://api.github.com/users/flx42/followers", "following_url": "https://api.github.com/users/flx42/following{/other_user}", "gists_url": "https://api.github.com/users/flx42/gists{/gist_id}", "starred_url": "https://api.github.com/users/flx42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flx42/subscriptions", "organizations_url": "https://api.github.com/users/flx42/orgs", "repos_url": "https://api.github.com/users/flx42/repos", "events_url": "https://api.github.com/users/flx42/events{/privacy}", "received_events_url": "https://api.github.com/users/flx42/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-24T01:50:13Z", "updated_at": "2016-08-24T01:52:08Z", "author_association": "CONTRIBUTOR", "body_html": "<blockquote>\n<p>Running TF_CUDA_COMPUTE_CAPABILITIES=3.0,5.2 ./configure, then running a bazel build command, then looking at the compute capabilities generated in bazel-tensorflow/external/local_config_cuda/cuda/cuda_config.h confirms that the correct compute capabilities were set.</p>\n</blockquote>\n<p>Edit: sorry, my bad, 3.5,5.2 is the default.</p>\n<p>On my side, I tried with a modified version of the current Dockerfile.devel-gpu:</p>\n<pre><code>diff --git a/tensorflow/tools/docker/Dockerfile.devel-gpu b/tensorflow/tools/docker/Dockerfile.devel-gpu\nindex 4877f8c..3b542b0 100644\n--- a/tensorflow/tools/docker/Dockerfile.devel-gpu\n+++ b/tensorflow/tools/docker/Dockerfile.devel-gpu\n@@ -1,4 +1,4 @@\n-FROM nvidia/cuda:7.5-cudnn5-devel\n+FROM nvidia/cuda:8.0-cudnn5-devel\n\n MAINTAINER Craig Citro &lt;craigcitro@google.com&gt;\n\n@@ -89,6 +89,7 @@ WORKDIR /tensorflow\n ENV CUDA_TOOLKIT_PATH /usr/local/cuda\n ENV CUDNN_INSTALL_PATH /usr/local/cuda\n ENV TF_NEED_CUDA 1\n+ENV TF_CUDA_COMPUTE_CAPABILITIES \"6.0\"\n\n RUN ./configure &amp;&amp; \\\n     bazel build -c opt --config=cuda tensorflow/tools/pip_package:build_pip_package &amp;&amp; \\\n</code></pre>\n<p>And I saw 3.5, 5.2 in cuda_config.h</p>", "body_text": "Running TF_CUDA_COMPUTE_CAPABILITIES=3.0,5.2 ./configure, then running a bazel build command, then looking at the compute capabilities generated in bazel-tensorflow/external/local_config_cuda/cuda/cuda_config.h confirms that the correct compute capabilities were set.\n\nEdit: sorry, my bad, 3.5,5.2 is the default.\nOn my side, I tried with a modified version of the current Dockerfile.devel-gpu:\ndiff --git a/tensorflow/tools/docker/Dockerfile.devel-gpu b/tensorflow/tools/docker/Dockerfile.devel-gpu\nindex 4877f8c..3b542b0 100644\n--- a/tensorflow/tools/docker/Dockerfile.devel-gpu\n+++ b/tensorflow/tools/docker/Dockerfile.devel-gpu\n@@ -1,4 +1,4 @@\n-FROM nvidia/cuda:7.5-cudnn5-devel\n+FROM nvidia/cuda:8.0-cudnn5-devel\n\n MAINTAINER Craig Citro <craigcitro@google.com>\n\n@@ -89,6 +89,7 @@ WORKDIR /tensorflow\n ENV CUDA_TOOLKIT_PATH /usr/local/cuda\n ENV CUDNN_INSTALL_PATH /usr/local/cuda\n ENV TF_NEED_CUDA 1\n+ENV TF_CUDA_COMPUTE_CAPABILITIES \"6.0\"\n\n RUN ./configure && \\\n     bazel build -c opt --config=cuda tensorflow/tools/pip_package:build_pip_package && \\\n\nAnd I saw 3.5, 5.2 in cuda_config.h", "body": "> Running TF_CUDA_COMPUTE_CAPABILITIES=3.0,5.2 ./configure, then running a bazel build command, then looking at the compute capabilities generated in bazel-tensorflow/external/local_config_cuda/cuda/cuda_config.h confirms that the correct compute capabilities were set.\n\nEdit: sorry, my bad, 3.5,5.2 is the default.\n\nOn my side, I tried with a modified version of the current Dockerfile.devel-gpu:\n\n```\ndiff --git a/tensorflow/tools/docker/Dockerfile.devel-gpu b/tensorflow/tools/docker/Dockerfile.devel-gpu\nindex 4877f8c..3b542b0 100644\n--- a/tensorflow/tools/docker/Dockerfile.devel-gpu\n+++ b/tensorflow/tools/docker/Dockerfile.devel-gpu\n@@ -1,4 +1,4 @@\n-FROM nvidia/cuda:7.5-cudnn5-devel\n+FROM nvidia/cuda:8.0-cudnn5-devel\n\n MAINTAINER Craig Citro <craigcitro@google.com>\n\n@@ -89,6 +89,7 @@ WORKDIR /tensorflow\n ENV CUDA_TOOLKIT_PATH /usr/local/cuda\n ENV CUDNN_INSTALL_PATH /usr/local/cuda\n ENV TF_NEED_CUDA 1\n+ENV TF_CUDA_COMPUTE_CAPABILITIES \"6.0\"\n\n RUN ./configure && \\\n     bazel build -c opt --config=cuda tensorflow/tools/pip_package:build_pip_package && \\\n```\n\nAnd I saw 3.5, 5.2 in cuda_config.h\n"}
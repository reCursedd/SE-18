{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/238144082", "html_url": "https://github.com/tensorflow/tensorflow/pull/3269#issuecomment-238144082", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3269", "id": 238144082, "node_id": "MDEyOklzc3VlQ29tbWVudDIzODE0NDA4Mg==", "user": {"login": "davidzchen", "id": 5283042, "node_id": "MDQ6VXNlcjUyODMwNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5283042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidzchen", "html_url": "https://github.com/davidzchen", "followers_url": "https://api.github.com/users/davidzchen/followers", "following_url": "https://api.github.com/users/davidzchen/following{/other_user}", "gists_url": "https://api.github.com/users/davidzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidzchen/subscriptions", "organizations_url": "https://api.github.com/users/davidzchen/orgs", "repos_url": "https://api.github.com/users/davidzchen/repos", "events_url": "https://api.github.com/users/davidzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/davidzchen/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-08T05:19:53Z", "updated_at": "2016-08-08T05:19:53Z", "author_association": "MEMBER", "body_html": "<p>I see the <code>no such package '@local_config_cuda//crosstool': BUILD file not found on package path.</code> error at the end of the log, but in the middle, we still have the permissions error:</p>\n<pre><code>ERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 381\n        _create_cuda_repository(repository_ctx)\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 337, in _create_cuda_repository\n        repository_ctx.symlink(cudnn_header_dir + \"/cudnn.h\", \"cu...\")\njava.io.IOException: Could not create symlink from /usr/include/cudnn.h to /opt/jenkins/workspace/tensorflow-pull-requests-gpu/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/external/local_config_cuda/cuda/include/cudnn.h: /opt/jenkins/workspace/tensorflow-pull-requests-gpu/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/external/local_config_cuda/cuda/include/cudnn.h (Permission denied).\n</code></pre>\n<p>My understanding is that because <code>cc_configure</code> was not able to complete due to the permission issue when trying to symlink <code>cudnn.h</code> the workspace it created is incomplete, and the \"BUILD file not found on package\" error occurs because the BUILD file is generated <a href=\"https://github.com/davidzchen/tensorflow/blob/cuda-configure/third_party/gpus/cuda_configure.bzl#L342\">at a later step</a>. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3721087\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/damienmg\">@damienmg</a>, is my understanding of this correct? If so, shouldn't the first error cause the loading phase to abort?</p>", "body_text": "I see the no such package '@local_config_cuda//crosstool': BUILD file not found on package path. error at the end of the log, but in the middle, we still have the permissions error:\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 381\n        _create_cuda_repository(repository_ctx)\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 337, in _create_cuda_repository\n        repository_ctx.symlink(cudnn_header_dir + \"/cudnn.h\", \"cu...\")\njava.io.IOException: Could not create symlink from /usr/include/cudnn.h to /opt/jenkins/workspace/tensorflow-pull-requests-gpu/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/external/local_config_cuda/cuda/include/cudnn.h: /opt/jenkins/workspace/tensorflow-pull-requests-gpu/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/external/local_config_cuda/cuda/include/cudnn.h (Permission denied).\n\nMy understanding is that because cc_configure was not able to complete due to the permission issue when trying to symlink cudnn.h the workspace it created is incomplete, and the \"BUILD file not found on package\" error occurs because the BUILD file is generated at a later step. @damienmg, is my understanding of this correct? If so, shouldn't the first error cause the loading phase to abort?", "body": "I see the `no such package '@local_config_cuda//crosstool': BUILD file not found on package path.` error at the end of the log, but in the middle, we still have the permissions error:\n\n```\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 381\n        _create_cuda_repository(repository_ctx)\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 337, in _create_cuda_repository\n        repository_ctx.symlink(cudnn_header_dir + \"/cudnn.h\", \"cu...\")\njava.io.IOException: Could not create symlink from /usr/include/cudnn.h to /opt/jenkins/workspace/tensorflow-pull-requests-gpu/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/external/local_config_cuda/cuda/include/cudnn.h: /opt/jenkins/workspace/tensorflow-pull-requests-gpu/bazel-ci_build-cache/.cache/bazel/_bazel_jenkins/eab0d61a99b6696edb3d2aff87b585e8/external/local_config_cuda/cuda/include/cudnn.h (Permission denied).\n```\n\nMy understanding is that because `cc_configure` was not able to complete due to the permission issue when trying to symlink `cudnn.h` the workspace it created is incomplete, and the \"BUILD file not found on package\" error occurs because the BUILD file is generated [at a later step](https://github.com/davidzchen/tensorflow/blob/cuda-configure/third_party/gpus/cuda_configure.bzl#L342). @damienmg, is my understanding of this correct? If so, shouldn't the first error cause the loading phase to abort?\n"}
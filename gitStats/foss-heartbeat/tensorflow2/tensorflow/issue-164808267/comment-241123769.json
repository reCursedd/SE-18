{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/241123769", "html_url": "https://github.com/tensorflow/tensorflow/pull/3269#issuecomment-241123769", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3269", "id": 241123769, "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTEyMzc2OQ==", "user": {"login": "davidzchen", "id": 5283042, "node_id": "MDQ6VXNlcjUyODMwNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5283042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidzchen", "html_url": "https://github.com/davidzchen", "followers_url": "https://api.github.com/users/davidzchen/followers", "following_url": "https://api.github.com/users/davidzchen/following{/other_user}", "gists_url": "https://api.github.com/users/davidzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidzchen/subscriptions", "organizations_url": "https://api.github.com/users/davidzchen/orgs", "repos_url": "https://api.github.com/users/davidzchen/repos", "events_url": "https://api.github.com/users/davidzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/davidzchen/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-19T20:17:10Z", "updated_at": "2016-08-19T20:17:10Z", "author_association": "MEMBER", "body_html": "<p>I was able to get the Linux GPU build to work and made sure that both of the possible install paths for <code>libcudnn.so</code> are supported. I also started looking into changes needed internally to merge this into the internal repo (<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7946809\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gunan\">@gunan</a>, I have added you to that thread). I am also oncall this week and have been a bit busy with that as well.</p>\n<p>All of the Linux GPU tests are passing except for these:</p>\n<pre><code>//tensorflow/core:common_runtime_gpu_gpu_tracer_test\n//tensorflow/g3doc/how_tos/adding_an_op:cuda_op_test\n//tensorflow/python:device_lib_test\n</code></pre>\n<p>These tests seem to all be failing due to the following:</p>\n<pre><code>Actual: Invalid argument: Cannot assign a device to node 'n/_2': Could not satisfy explicit device specification '/job:localhost/replica:0/task:0/gpu:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n     [[Node: n/_2 = MatMul[T=DT_FLOAT, transpose_a=false, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](n/_0, n/_1)]]\nExpected: ::tensorflow::Status::OK()\n</code></pre>\n<p>These error message seem to be related:</p>\n<pre><code>I tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 0 to device ordinal 1\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 0 to device ordinal 2\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 0 to device ordinal 3\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 1 to device ordinal 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 1 to device ordinal 2\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 1 to device ordinal 3\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 2 to device ordinal 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 2 to device ordinal 1\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 2 to device ordinal 3\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 3 to device ordinal 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 3 to device ordinal 1\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 3 to device ordinal 2\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:138] DMA: 0 1 2 3 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 0:   Y N N N \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 1:   N Y N N \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 2:   N N Y N \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 3:   N N N Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 0, name: GRID K2, pci bus id: 0000:00:04.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 1, name: GRID K2, pci bus id: 0000:00:05.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 2, name: GRID K2, pci bus id: 0000:00:06.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 3, name: GRID K2, pci bus id: 0000:00:07.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\ntensorflow/core/debug/debug_gateway_test.cc:140: Failure\nValue of: (s)\n  Actual: Invalid argument: Cannot assign a device to node 'n/_2': Could not satisfy explicit device specification '/job:localhost/replica:0/task:0/gpu:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n     [[Node: n/_2 = MatMul[T=DT_FLOAT, transpose_a=false, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](n/_0, n/_1)]]\nExpected: ::tensorflow::Status::OK()\nWhich is: OK\n</code></pre>\n<p>Is the message about the CUDA compute capability being on the CI machine 3.0 correct?</p>", "body_text": "I was able to get the Linux GPU build to work and made sure that both of the possible install paths for libcudnn.so are supported. I also started looking into changes needed internally to merge this into the internal repo (@gunan, I have added you to that thread). I am also oncall this week and have been a bit busy with that as well.\nAll of the Linux GPU tests are passing except for these:\n//tensorflow/core:common_runtime_gpu_gpu_tracer_test\n//tensorflow/g3doc/how_tos/adding_an_op:cuda_op_test\n//tensorflow/python:device_lib_test\n\nThese tests seem to all be failing due to the following:\nActual: Invalid argument: Cannot assign a device to node 'n/_2': Could not satisfy explicit device specification '/job:localhost/replica:0/task:0/gpu:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n     [[Node: n/_2 = MatMul[T=DT_FLOAT, transpose_a=false, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](n/_0, n/_1)]]\nExpected: ::tensorflow::Status::OK()\n\nThese error message seem to be related:\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 0 to device ordinal 1\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 0 to device ordinal 2\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 0 to device ordinal 3\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 1 to device ordinal 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 1 to device ordinal 2\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 1 to device ordinal 3\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 2 to device ordinal 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 2 to device ordinal 1\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 2 to device ordinal 3\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 3 to device ordinal 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 3 to device ordinal 1\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 3 to device ordinal 2\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:138] DMA: 0 1 2 3 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 0:   Y N N N \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 1:   N Y N N \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 2:   N N Y N \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 3:   N N N Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 0, name: GRID K2, pci bus id: 0000:00:04.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 1, name: GRID K2, pci bus id: 0000:00:05.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 2, name: GRID K2, pci bus id: 0000:00:06.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 3, name: GRID K2, pci bus id: 0000:00:07.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\ntensorflow/core/debug/debug_gateway_test.cc:140: Failure\nValue of: (s)\n  Actual: Invalid argument: Cannot assign a device to node 'n/_2': Could not satisfy explicit device specification '/job:localhost/replica:0/task:0/gpu:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n     [[Node: n/_2 = MatMul[T=DT_FLOAT, transpose_a=false, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](n/_0, n/_1)]]\nExpected: ::tensorflow::Status::OK()\nWhich is: OK\n\nIs the message about the CUDA compute capability being on the CI machine 3.0 correct?", "body": "I was able to get the Linux GPU build to work and made sure that both of the possible install paths for `libcudnn.so` are supported. I also started looking into changes needed internally to merge this into the internal repo (@gunan, I have added you to that thread). I am also oncall this week and have been a bit busy with that as well.\n\nAll of the Linux GPU tests are passing except for these:\n\n```\n//tensorflow/core:common_runtime_gpu_gpu_tracer_test\n//tensorflow/g3doc/how_tos/adding_an_op:cuda_op_test\n//tensorflow/python:device_lib_test\n```\n\nThese tests seem to all be failing due to the following:\n\n```\nActual: Invalid argument: Cannot assign a device to node 'n/_2': Could not satisfy explicit device specification '/job:localhost/replica:0/task:0/gpu:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n     [[Node: n/_2 = MatMul[T=DT_FLOAT, transpose_a=false, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](n/_0, n/_1)]]\nExpected: ::tensorflow::Status::OK()\n```\n\nThese error message seem to be related:\n\n```\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 0 to device ordinal 1\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 0 to device ordinal 2\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 0 to device ordinal 3\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 1 to device ordinal 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 1 to device ordinal 2\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 1 to device ordinal 3\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 2 to device ordinal 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 2 to device ordinal 1\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 2 to device ordinal 3\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 3 to device ordinal 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 3 to device ordinal 1\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:61] cannot enable peer access from device ordinal 3 to device ordinal 2\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:138] DMA: 0 1 2 3 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 0:   Y N N N \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 1:   N Y N N \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 2:   N N Y N \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:148] 3:   N N N Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 0, name: GRID K2, pci bus id: 0000:00:04.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 1, name: GRID K2, pci bus id: 0000:00:05.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 2, name: GRID K2, pci bus id: 0000:00:06.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:842] Ignoring gpu device (device: 3, name: GRID K2, pci bus id: 0000:00:07.0) with Cuda compute capability 3.0. The minimum required Cuda capability is 3.5.\ntensorflow/core/debug/debug_gateway_test.cc:140: Failure\nValue of: (s)\n  Actual: Invalid argument: Cannot assign a device to node 'n/_2': Could not satisfy explicit device specification '/job:localhost/replica:0/task:0/gpu:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n     [[Node: n/_2 = MatMul[T=DT_FLOAT, transpose_a=false, transpose_b=false, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](n/_0, n/_1)]]\nExpected: ::tensorflow::Status::OK()\nWhich is: OK\n```\n\nIs the message about the CUDA compute capability being on the CI machine 3.0 correct?\n"}
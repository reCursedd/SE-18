{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/239749659", "html_url": "https://github.com/tensorflow/tensorflow/pull/3269#issuecomment-239749659", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3269", "id": 239749659, "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTc0OTY1OQ==", "user": {"login": "davidzchen", "id": 5283042, "node_id": "MDQ6VXNlcjUyODMwNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5283042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidzchen", "html_url": "https://github.com/davidzchen", "followers_url": "https://api.github.com/users/davidzchen/followers", "following_url": "https://api.github.com/users/davidzchen/following{/other_user}", "gists_url": "https://api.github.com/users/davidzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidzchen/subscriptions", "organizations_url": "https://api.github.com/users/davidzchen/orgs", "repos_url": "https://api.github.com/users/davidzchen/repos", "events_url": "https://api.github.com/users/davidzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/davidzchen/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-15T08:08:56Z", "updated_at": "2016-08-15T08:08:56Z", "author_association": "MEMBER", "body_html": "<p>The header symlinking issue is fixed, but it looks like the Linux GPU build is unable to find the cuDNN libraries:</p>\n<pre><code>ERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 406\n        _create_cuda_repository(repository_ctx)\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 343, in _create_cuda_repository\n        _find_cudnn_lib_path(repository_ctx, cudnn_install_base..., ...)\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 252, in _find_cudnn_lib_path\n        fail(\"Cannot find %s or %s under %s\" ...))\nCannot find lib64/libcudnn.so.5 or libcudnn.so.5 under /usr/local/cuda.\n</code></pre>\n<p>I have dumped the list of files under both <code>/usr/local/cuda</code> and <code>/usr/local/cuda/lib64</code> (see <a href=\"http://ci.tensorflow.org/job/tensorflow-pull-requests-gpu/1520/console\" rel=\"nofollow\">log</a>), and curiously, <code>libcudnn.so.5</code> is under neither directory (though all other cuda libraries appear to be present).</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=567848\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jendap\">@jendap</a>, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=577277\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/martinwicke\">@martinwicke</a> - where are the cuDNN libraries installed on the system for the GPU CI Docker containers?</p>\n<p>Also, for my understanding, it seems that <a href=\"https://github.com/tensorflow/tensorflow/blob/master/third_party/gpus/cuda/cuda_config.sh#L128\"><code>CUDA_DNN_LIB_ALT_PATH</code></a> in the existing CUDA detection implementation seems to suggest that <code>libcudnn.so</code> may be installed on some systems directly under <code>/usr/local/cuda</code> rather than under <code>/usr/local/cuda/lib</code> or <code>/usr/local/cuda/lib64</code>. Is my understanding of this correct?</p>", "body_text": "The header symlinking issue is fixed, but it looks like the Linux GPU build is unable to find the cuDNN libraries:\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 406\n        _create_cuda_repository(repository_ctx)\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 343, in _create_cuda_repository\n        _find_cudnn_lib_path(repository_ctx, cudnn_install_base..., ...)\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 252, in _find_cudnn_lib_path\n        fail(\"Cannot find %s or %s under %s\" ...))\nCannot find lib64/libcudnn.so.5 or libcudnn.so.5 under /usr/local/cuda.\n\nI have dumped the list of files under both /usr/local/cuda and /usr/local/cuda/lib64 (see log), and curiously, libcudnn.so.5 is under neither directory (though all other cuda libraries appear to be present).\n@jendap, @martinwicke - where are the cuDNN libraries installed on the system for the GPU CI Docker containers?\nAlso, for my understanding, it seems that CUDA_DNN_LIB_ALT_PATH in the existing CUDA detection implementation seems to suggest that libcudnn.so may be installed on some systems directly under /usr/local/cuda rather than under /usr/local/cuda/lib or /usr/local/cuda/lib64. Is my understanding of this correct?", "body": "The header symlinking issue is fixed, but it looks like the Linux GPU build is unable to find the cuDNN libraries:\n\n```\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 406\n        _create_cuda_repository(repository_ctx)\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 343, in _create_cuda_repository\n        _find_cudnn_lib_path(repository_ctx, cudnn_install_base..., ...)\n    File \"/workspace/third_party/gpus/cuda_configure.bzl\", line 252, in _find_cudnn_lib_path\n        fail(\"Cannot find %s or %s under %s\" ...))\nCannot find lib64/libcudnn.so.5 or libcudnn.so.5 under /usr/local/cuda.\n```\n\nI have dumped the list of files under both `/usr/local/cuda` and `/usr/local/cuda/lib64` (see [log](http://ci.tensorflow.org/job/tensorflow-pull-requests-gpu/1520/console)), and curiously, `libcudnn.so.5` is under neither directory (though all other cuda libraries appear to be present).\n\n@jendap, @martinwicke - where are the cuDNN libraries installed on the system for the GPU CI Docker containers?\n\nAlso, for my understanding, it seems that [`CUDA_DNN_LIB_ALT_PATH`](https://github.com/tensorflow/tensorflow/blob/master/third_party/gpus/cuda/cuda_config.sh#L128) in the existing CUDA detection implementation seems to suggest that `libcudnn.so` may be installed on some systems directly under `/usr/local/cuda` rather than under `/usr/local/cuda/lib` or `/usr/local/cuda/lib64`. Is my understanding of this correct?\n"}
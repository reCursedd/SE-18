{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17387", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17387/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17387/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17387/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17387", "id": 301918673, "node_id": "MDU6SXNzdWUzMDE5MTg2NzM=", "number": 17387, "title": "[feature request] add higher order function `scanr`", "user": {"login": "shengc", "id": 940628, "node_id": "MDQ6VXNlcjk0MDYyOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/940628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shengc", "html_url": "https://github.com/shengc", "followers_url": "https://api.github.com/users/shengc/followers", "following_url": "https://api.github.com/users/shengc/following{/other_user}", "gists_url": "https://api.github.com/users/shengc/gists{/gist_id}", "starred_url": "https://api.github.com/users/shengc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shengc/subscriptions", "organizations_url": "https://api.github.com/users/shengc/orgs", "repos_url": "https://api.github.com/users/shengc/repos", "events_url": "https://api.github.com/users/shengc/events{/privacy}", "received_events_url": "https://api.github.com/users/shengc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2018-03-02T21:59:46Z", "updated_at": "2018-08-10T06:10:22Z", "closed_at": "2018-08-10T06:10:22Z", "author_association": "NONE", "body_html": "<p>Have I written custom code: yes<br>\nOS Platform and Distribution: OSX 10.11.6<br>\nTensorFlow installed from: conda-forge<br>\nTensorFlow version: 1.5<br>\nBazel version: N.A<br>\nCUDA/cuDNN version: N/A (CPU only)<br>\nGPU model and memory (CPU only)<br>\nExact command to reproduce: N/A</p>\n<p>Description:<br>\nTensorFlow has <code>foldl</code> which folds the array from first to last, and <code>foldr</code> which folds the array from last to first. It also has <code>scan</code> which returns the trace of <code>foldl</code>, but there is no <code>scanr</code> that returns the trace of <code>foldr</code>.</p>\n<p><code>scanr</code> can be proven useful sometimes. Look at the following snippet that is sampled from my implementation of a <a href=\"https://github.com/shengc/tf-lstm-crf-tagger/blob/master/lstm-crf-tagger.ipynb\">crf lstm sequence tagger</a>.</p>\n<div class=\"highlight highlight-source-python\"><pre>reverse_path <span class=\"pl-k\">=</span> tf.scan(step_path, tf.reverse(backpointers, <span class=\"pl-v\">axis</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">0</span>]), <span class=\"pl-v\">initializer</span><span class=\"pl-k\">=</span>best_tag_id, <span class=\"pl-v\">back_prop</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>)\nbest_path <span class=\"pl-k\">=</span> tf.concat([tf.reverse(reverse_path, <span class=\"pl-v\">axis</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">0</span>])[<span class=\"pl-c1\">1</span>:], [best_tag_id]], <span class=\"pl-v\">axis</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">0</span>)</pre></div>\n<p>I have to call <code>tf.reverse</code> twice, just because TensorFlow only provides <code>scan</code> from first to last.</p>", "body_text": "Have I written custom code: yes\nOS Platform and Distribution: OSX 10.11.6\nTensorFlow installed from: conda-forge\nTensorFlow version: 1.5\nBazel version: N.A\nCUDA/cuDNN version: N/A (CPU only)\nGPU model and memory (CPU only)\nExact command to reproduce: N/A\nDescription:\nTensorFlow has foldl which folds the array from first to last, and foldr which folds the array from last to first. It also has scan which returns the trace of foldl, but there is no scanr that returns the trace of foldr.\nscanr can be proven useful sometimes. Look at the following snippet that is sampled from my implementation of a crf lstm sequence tagger.\nreverse_path = tf.scan(step_path, tf.reverse(backpointers, axis=[0]), initializer=best_tag_id, back_prop=False)\nbest_path = tf.concat([tf.reverse(reverse_path, axis=[0])[1:], [best_tag_id]], axis=0)\nI have to call tf.reverse twice, just because TensorFlow only provides scan from first to last.", "body": "Have I written custom code: yes\r\nOS Platform and Distribution: OSX 10.11.6\r\nTensorFlow installed from: conda-forge\r\nTensorFlow version: 1.5\r\nBazel version: N.A\r\nCUDA/cuDNN version: N/A (CPU only)\r\nGPU model and memory (CPU only)\r\nExact command to reproduce: N/A\r\n\r\nDescription:\r\nTensorFlow has `foldl` which folds the array from first to last, and `foldr` which folds the array from last to first. It also has `scan` which returns the trace of `foldl`, but there is no `scanr` that returns the trace of `foldr`. \r\n\r\n`scanr` can be proven useful sometimes. Look at the following snippet that is sampled from my implementation of a [crf lstm sequence tagger](https://github.com/shengc/tf-lstm-crf-tagger/blob/master/lstm-crf-tagger.ipynb).\r\n\r\n```python\r\nreverse_path = tf.scan(step_path, tf.reverse(backpointers, axis=[0]), initializer=best_tag_id, back_prop=False)\r\nbest_path = tf.concat([tf.reverse(reverse_path, axis=[0])[1:], [best_tag_id]], axis=0)\r\n```\r\n\r\nI have to call `tf.reverse` twice, just because TensorFlow only provides `scan` from first to last.\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/353698043", "html_url": "https://github.com/tensorflow/tensorflow/issues/15582#issuecomment-353698043", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15582", "id": 353698043, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzY5ODA0Mw==", "user": {"login": "yogurfrul", "id": 25316372, "node_id": "MDQ6VXNlcjI1MzE2Mzcy", "avatar_url": "https://avatars3.githubusercontent.com/u/25316372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yogurfrul", "html_url": "https://github.com/yogurfrul", "followers_url": "https://api.github.com/users/yogurfrul/followers", "following_url": "https://api.github.com/users/yogurfrul/following{/other_user}", "gists_url": "https://api.github.com/users/yogurfrul/gists{/gist_id}", "starred_url": "https://api.github.com/users/yogurfrul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yogurfrul/subscriptions", "organizations_url": "https://api.github.com/users/yogurfrul/orgs", "repos_url": "https://api.github.com/users/yogurfrul/repos", "events_url": "https://api.github.com/users/yogurfrul/events{/privacy}", "received_events_url": "https://api.github.com/users/yogurfrul/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-23T01:13:49Z", "updated_at": "2017-12-23T01:13:49Z", "author_association": "NONE", "body_html": "<p>thanks for your reply ,I build my custom op with Bazel<br>\nhere is my BUILD</p>\n<p>tf_custom_op_library(<br>\nname = \"python/ops/_ddn_ops.so\",<br>\nsrcs =  glob([<br>\n\"kernels/own_concat.cc\",<br>\n\"ops/own_concat.cc\",<br>\n],<br>\nexclude = [<br>\n\"**/*test.cc\",<br>\n],<br>\n),<br>\ndeps = [<br>\n\"//tensorflow/core:protos_all_cc\",<br>\n\"//tensorflow/core/kernels:ops_util_hdrs\",<br>\n\"//tensorflow/core/kernels:split_lib_hdrs\",<br>\n\"//tensorflow/core/kernels:concat_lib_hdrs\",<br>\n],<br>\n)<br>\nand I<br>\n<code>#include \"tensorflow/core/kernels/concat_lib.h\" namespace tensorflow { template &lt;typename T&gt; void Concat(OpKernelContext* c, const gtl::ArraySlice&lt;Tensor&gt;&amp; inputs, int32 concat_dim,Tensor* output) { *******some preprocess code****** ConcatCPU&lt;T&gt;(c-&gt;device(), inputs_flat, &amp;output_flat); }; }</code></p>\n<p>it works based on tensorflow 1.2,and I can use own_concat op api rightlly<br>\nwhen I upgrade tenforflow version to 1.4 I get the error undefined symbol:error<br>\nsomething of tensorflow BUILD or custom op BUILD changed ?<br>\nHowever I compare the source codes of two version,I don't find any clues</p>", "body_text": "thanks for your reply ,I build my custom op with Bazel\nhere is my BUILD\ntf_custom_op_library(\nname = \"python/ops/_ddn_ops.so\",\nsrcs =  glob([\n\"kernels/own_concat.cc\",\n\"ops/own_concat.cc\",\n],\nexclude = [\n\"**/*test.cc\",\n],\n),\ndeps = [\n\"//tensorflow/core:protos_all_cc\",\n\"//tensorflow/core/kernels:ops_util_hdrs\",\n\"//tensorflow/core/kernels:split_lib_hdrs\",\n\"//tensorflow/core/kernels:concat_lib_hdrs\",\n],\n)\nand I\n#include \"tensorflow/core/kernels/concat_lib.h\" namespace tensorflow { template <typename T> void Concat(OpKernelContext* c, const gtl::ArraySlice<Tensor>& inputs, int32 concat_dim,Tensor* output) { *******some preprocess code****** ConcatCPU<T>(c->device(), inputs_flat, &output_flat); }; }\nit works based on tensorflow 1.2,and I can use own_concat op api rightlly\nwhen I upgrade tenforflow version to 1.4 I get the error undefined symbol:error\nsomething of tensorflow BUILD or custom op BUILD changed ?\nHowever I compare the source codes of two version,I don't find any clues", "body": "thanks for your reply ,I build my custom op with Bazel\r\n here is my BUILD\r\n\r\ntf_custom_op_library(\r\n    name = \"python/ops/_ddn_ops.so\",\r\n    srcs =  glob([\r\n        \"kernels/own_concat.cc\",\r\n        \"ops/own_concat.cc\",\r\n        ],\r\n        exclude = [\r\n        \"**/*test.cc\",\r\n        ],\r\n    ),\r\n    deps = [\r\n        \"//tensorflow/core:protos_all_cc\",\r\n        \"//tensorflow/core/kernels:ops_util_hdrs\",\r\n        \"//tensorflow/core/kernels:split_lib_hdrs\",\r\n        \"//tensorflow/core/kernels:concat_lib_hdrs\",\r\n    ],\r\n)\r\nand I\r\n`#include \"tensorflow/core/kernels/concat_lib.h\"\r\nnamespace tensorflow {\r\ntemplate <typename T>\r\nvoid Concat(OpKernelContext* c, const gtl::ArraySlice<Tensor>& inputs, int32 concat_dim,Tensor* output) {\r\n*******some preprocess code******\r\nConcatCPU<T>(c->device(), inputs_flat, &output_flat);\r\n};\r\n}`\r\n\r\nit works based on tensorflow 1.2,and I can use own_concat op api rightlly\r\nwhen I upgrade tenforflow version to 1.4 I get the error undefined symbol:error\r\nsomething of tensorflow BUILD or custom op BUILD changed ?\\\r\nHowever I compare the source codes of two version,I don't find any clues\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/326670875", "html_url": "https://github.com/tensorflow/tensorflow/issues/8101#issuecomment-326670875", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8101", "id": 326670875, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjY3MDg3NQ==", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-01T19:57:20Z", "updated_at": "2017-09-01T19:57:20Z", "author_association": "MEMBER", "body_html": "<p>I tried with the latest master and it seems the issue has been fixed:</p>\n<pre><code>ubuntu@ip-172-31-28-246:~$ python\nPython 2.7.12 (default, Nov 19 2016, 06:48:10) \n[GCC 5.4.0 20160609] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; import tensorflow as tf\n&gt;&gt;&gt; sess = tf.Session()\n2017-09-01 19:55:56.968431: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-09-01 19:55:56.968903: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Found device 0 with properties: \nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\npciBusID: 0000:00:1e.0\ntotalMemory: 11.17GiB freeMemory: 11.11GiB\n2017-09-01 19:55:56.968928: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1055] Creating TensorFlow device (/device:GPU:0) -&gt; (device: 0, name: Tesla K80, pci bus id: 0000:00:1e.0, compute capability: 3.7)\n&gt;&gt;&gt; \n&gt;&gt;&gt; x = tf.placeholder(dtype=tf.float32)\n&gt;&gt;&gt; mean, var = tf.nn.moments(x, axes=[1])\n&gt;&gt;&gt; sess.run([mean, var], {x:np.arange(12).reshape((2,6)).astype(np.float32)})\n[array([ 2.5,  8.5], dtype=float32), array([ 2.91666675,  2.91666675], dtype=float32)]\n&gt;&gt;&gt; mean, var = tf.nn.moments(x, axes=[-1])\n&gt;&gt;&gt; sess.run([mean, var], {x:np.arange(12).reshape((2,6)).astype(np.float32)})\n[array([ 2.5,  8.5], dtype=float32), array([ 2.91666675,  2.91666675], dtype=float32)]\n&gt;&gt;&gt; \n</code></pre>", "body_text": "I tried with the latest master and it seems the issue has been fixed:\nubuntu@ip-172-31-28-246:~$ python\nPython 2.7.12 (default, Nov 19 2016, 06:48:10) \n[GCC 5.4.0 20160609] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import numpy as np\n>>> import tensorflow as tf\n>>> sess = tf.Session()\n2017-09-01 19:55:56.968431: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-09-01 19:55:56.968903: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Found device 0 with properties: \nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\npciBusID: 0000:00:1e.0\ntotalMemory: 11.17GiB freeMemory: 11.11GiB\n2017-09-01 19:55:56.968928: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1055] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 0000:00:1e.0, compute capability: 3.7)\n>>> \n>>> x = tf.placeholder(dtype=tf.float32)\n>>> mean, var = tf.nn.moments(x, axes=[1])\n>>> sess.run([mean, var], {x:np.arange(12).reshape((2,6)).astype(np.float32)})\n[array([ 2.5,  8.5], dtype=float32), array([ 2.91666675,  2.91666675], dtype=float32)]\n>>> mean, var = tf.nn.moments(x, axes=[-1])\n>>> sess.run([mean, var], {x:np.arange(12).reshape((2,6)).astype(np.float32)})\n[array([ 2.5,  8.5], dtype=float32), array([ 2.91666675,  2.91666675], dtype=float32)]\n>>>", "body": "I tried with the latest master and it seems the issue has been fixed:\r\n```\r\nubuntu@ip-172-31-28-246:~$ python\r\nPython 2.7.12 (default, Nov 19 2016, 06:48:10) \r\n[GCC 5.4.0 20160609] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import numpy as np\r\n>>> import tensorflow as tf\r\n>>> sess = tf.Session()\r\n2017-09-01 19:55:56.968431: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2017-09-01 19:55:56.968903: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Found device 0 with properties: \r\nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\r\npciBusID: 0000:00:1e.0\r\ntotalMemory: 11.17GiB freeMemory: 11.11GiB\r\n2017-09-01 19:55:56.968928: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1055] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 0000:00:1e.0, compute capability: 3.7)\r\n>>> \r\n>>> x = tf.placeholder(dtype=tf.float32)\r\n>>> mean, var = tf.nn.moments(x, axes=[1])\r\n>>> sess.run([mean, var], {x:np.arange(12).reshape((2,6)).astype(np.float32)})\r\n[array([ 2.5,  8.5], dtype=float32), array([ 2.91666675,  2.91666675], dtype=float32)]\r\n>>> mean, var = tf.nn.moments(x, axes=[-1])\r\n>>> sess.run([mean, var], {x:np.arange(12).reshape((2,6)).astype(np.float32)})\r\n[array([ 2.5,  8.5], dtype=float32), array([ 2.91666675,  2.91666675], dtype=float32)]\r\n>>> \r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/165", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/165/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/165/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/165/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/165", "id": 116477677, "node_id": "MDU6SXNzdWUxMTY0Nzc2Nzc=", "number": 165, "title": "in_top_k op does not work with int64 labels", "user": {"login": "poolio", "id": 718528, "node_id": "MDQ6VXNlcjcxODUyOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/718528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poolio", "html_url": "https://github.com/poolio", "followers_url": "https://api.github.com/users/poolio/followers", "following_url": "https://api.github.com/users/poolio/following{/other_user}", "gists_url": "https://api.github.com/users/poolio/gists{/gist_id}", "starred_url": "https://api.github.com/users/poolio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poolio/subscriptions", "organizations_url": "https://api.github.com/users/poolio/orgs", "repos_url": "https://api.github.com/users/poolio/repos", "events_url": "https://api.github.com/users/poolio/events{/privacy}", "received_events_url": "https://api.github.com/users/poolio/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2015-11-12T04:34:35Z", "updated_at": "2015-11-24T19:28:51Z", "closed_at": "2015-11-24T19:28:50Z", "author_association": "NONE", "body_html": "<p>The <code>tf.nn.in_top_k</code> op does not work with <code>int64</code> labels. This is problematic when computing accuracy from a one-hot encoding of labels as the output of <code>argmax</code> is <code>int64</code>:</p>\n<div class=\"highlight highlight-source-python\"><pre>y <span class=\"pl-k\">=</span> tf.placeholder(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>float<span class=\"pl-pds\">\"</span></span>)\nyhat <span class=\"pl-k\">=</span> tf.placeholder(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>float<span class=\"pl-pds\">\"</span></span>)\ntf.nn.in_top_k(yhat, tf.argmax(y, <span class=\"pl-c1\">1</span>), <span class=\"pl-c1\">1</span>)</pre></div>\n<p>yields the error:</p>\n<pre><code>TypeError: Input 'targets' of 'InTopK' Op has type int64 that does not match expected type of int32.\n</code></pre>\n<p>The simple workaround is to cast the labels before calling the op:</p>\n<pre><code>tf.nn.in_top_k(y, tf.cast(tf.argmax(y_, 1), \"int32\"), 1)\n</code></pre>\n<p>but it'd be nice if <code>int64</code> labels were supported out of the box.</p>", "body_text": "The tf.nn.in_top_k op does not work with int64 labels. This is problematic when computing accuracy from a one-hot encoding of labels as the output of argmax is int64:\ny = tf.placeholder(\"float\")\nyhat = tf.placeholder(\"float\")\ntf.nn.in_top_k(yhat, tf.argmax(y, 1), 1)\nyields the error:\nTypeError: Input 'targets' of 'InTopK' Op has type int64 that does not match expected type of int32.\n\nThe simple workaround is to cast the labels before calling the op:\ntf.nn.in_top_k(y, tf.cast(tf.argmax(y_, 1), \"int32\"), 1)\n\nbut it'd be nice if int64 labels were supported out of the box.", "body": "The `tf.nn.in_top_k` op does not work with `int64` labels. This is problematic when computing accuracy from a one-hot encoding of labels as the output of `argmax` is `int64`:\n\n``` python\ny = tf.placeholder(\"float\")\nyhat = tf.placeholder(\"float\")\ntf.nn.in_top_k(yhat, tf.argmax(y, 1), 1)\n```\n\nyields the error:\n\n```\nTypeError: Input 'targets' of 'InTopK' Op has type int64 that does not match expected type of int32.\n```\n\nThe simple workaround is to cast the labels before calling the op:\n\n```\ntf.nn.in_top_k(y, tf.cast(tf.argmax(y_, 1), \"int32\"), 1)\n```\n\nbut it'd be nice if `int64` labels were supported out of the box.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10315", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10315/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10315/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10315/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10315", "id": 232533789, "node_id": "MDU6SXNzdWUyMzI1MzM3ODk=", "number": 10315, "title": "tf.image.central_crop returns zero dimension shaped tensors ", "user": {"login": "fumin", "id": 765222, "node_id": "MDQ6VXNlcjc2NTIyMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/765222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fumin", "html_url": "https://github.com/fumin", "followers_url": "https://api.github.com/users/fumin/followers", "following_url": "https://api.github.com/users/fumin/following{/other_user}", "gists_url": "https://api.github.com/users/fumin/gists{/gist_id}", "starred_url": "https://api.github.com/users/fumin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fumin/subscriptions", "organizations_url": "https://api.github.com/users/fumin/orgs", "repos_url": "https://api.github.com/users/fumin/repos", "events_url": "https://api.github.com/users/fumin/events{/privacy}", "received_events_url": "https://api.github.com/users/fumin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-05-31T11:08:37Z", "updated_at": "2017-09-16T01:35:55Z", "closed_at": "2017-09-16T01:35:55Z", "author_association": "NONE", "body_html": "<ul>\n<li>I have written custom code.</li>\n<li>OS platform<br>\nc++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4<br>\nCopyright (C) 2013 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</li>\n<li>Tensorflow version<br>\n1.1.0-rc2</li>\n<li>GPU model<br>\nWed May 31 11:49:29 2017<br>\n+-----------------------------------------------------------------------------+<br>\n| NVIDIA-SMI 367.57                 Driver Version: 367.57                    |<br>\n|-------------------------------+----------------------+----------------------+<br>\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |<br>\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |<br>\n|===============================+======================+======================|<br>\n|   0  Quadro K2200        On   | 0000:04:00.0      On |                  N/A |<br>\n| 42%   37C    P8     1W /  39W |    422MiB /  4032MiB |      0%      Default |<br>\n+-------------------------------+----------------------+----------------------+</li>\n</ul>\n<p>+-----------------------------------------------------------------------------+<br>\n| Processes:                                                       GPU Memory |<br>\n|  GPU       PID  Type  Process name                               Usage      |<br>\n|=============================================================================|<br>\n|    0      6147    G   /usr/lib/xorg/Xorg                             213MiB |<br>\n|    0     16477    G   cinnamon                                        81MiB |<br>\n+-----------------------------------------------------------------------------+</p>\n<p>Problem definition:<br>\nGiven an image of shape (240, 320, 3), and a central_fraction of 0.33<br>\ntf.image.central_crop returns an image of shape (0, 0, 3), which is wrong.<br>\nMoreover, such tensors of zero dimension results in the cryptic error</p>\n<p>could not set cudnn tensor descriptor: CUDNN_STATUS_BAD_PARAM</p>\n<p>when these zero sized tensors are passed to downstream ops.</p>\n<p>Source code to reproduce the problem:</p>\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nimg_shape = (240, 320, 3)\n\nimg_ph = tf.placeholder(shape=img_shape, dtype=tf.uint8)\ncentral_fraction = 0.33\ncrop_op = tf.image.central_crop(img_ph, central_fraction)\n\nwith tf.Session() as sess:\n  img = np.zeros((240, 320, 3), dtype=np.uint8)\n  feed_dict = {img_ph: img}\n  cropped = sess.run(crop_op, feed_dict=feed_dict)\n  print(\"cropped shape: {}\".format(cropped.shape))\n</code></pre>", "body_text": "I have written custom code.\nOS platform\nc++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4\nCopyright (C) 2013 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\nTensorflow version\n1.1.0-rc2\nGPU model\nWed May 31 11:49:29 2017\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.57                 Driver Version: 367.57                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Quadro K2200        On   | 0000:04:00.0      On |                  N/A |\n| 42%   37C    P8     1W /  39W |    422MiB /  4032MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      6147    G   /usr/lib/xorg/Xorg                             213MiB |\n|    0     16477    G   cinnamon                                        81MiB |\n+-----------------------------------------------------------------------------+\nProblem definition:\nGiven an image of shape (240, 320, 3), and a central_fraction of 0.33\ntf.image.central_crop returns an image of shape (0, 0, 3), which is wrong.\nMoreover, such tensors of zero dimension results in the cryptic error\ncould not set cudnn tensor descriptor: CUDNN_STATUS_BAD_PARAM\nwhen these zero sized tensors are passed to downstream ops.\nSource code to reproduce the problem:\nimport numpy as np\nimport tensorflow as tf\n\nimg_shape = (240, 320, 3)\n\nimg_ph = tf.placeholder(shape=img_shape, dtype=tf.uint8)\ncentral_fraction = 0.33\ncrop_op = tf.image.central_crop(img_ph, central_fraction)\n\nwith tf.Session() as sess:\n  img = np.zeros((240, 320, 3), dtype=np.uint8)\n  feed_dict = {img_ph: img}\n  cropped = sess.run(crop_op, feed_dict=feed_dict)\n  print(\"cropped shape: {}\".format(cropped.shape))", "body": "* I have written custom code.\r\n* OS platform\r\nc++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4\r\nCopyright (C) 2013 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n* Tensorflow version\r\n1.1.0-rc2\r\n* GPU model\r\nWed May 31 11:49:29 2017       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 367.57                 Driver Version: 367.57                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Quadro K2200        On   | 0000:04:00.0      On |                  N/A |\r\n| 42%   37C    P8     1W /  39W |    422MiB /  4032MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID  Type  Process name                               Usage      |\r\n|=============================================================================|\r\n|    0      6147    G   /usr/lib/xorg/Xorg                             213MiB |\r\n|    0     16477    G   cinnamon                                        81MiB |\r\n+-----------------------------------------------------------------------------+\r\n\r\nProblem definition:\r\nGiven an image of shape (240, 320, 3), and a central_fraction of 0.33\r\ntf.image.central_crop returns an image of shape (0, 0, 3), which is wrong.\r\nMoreover, such tensors of zero dimension results in the cryptic error\r\n\r\ncould not set cudnn tensor descriptor: CUDNN_STATUS_BAD_PARAM\r\n\r\nwhen these zero sized tensors are passed to downstream ops.\r\n\r\nSource code to reproduce the problem:\r\n\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nimg_shape = (240, 320, 3)\r\n\r\nimg_ph = tf.placeholder(shape=img_shape, dtype=tf.uint8)\r\ncentral_fraction = 0.33\r\ncrop_op = tf.image.central_crop(img_ph, central_fraction)\r\n\r\nwith tf.Session() as sess:\r\n  img = np.zeros((240, 320, 3), dtype=np.uint8)\r\n  feed_dict = {img_ph: img}\r\n  cropped = sess.run(crop_op, feed_dict=feed_dict)\r\n  print(\"cropped shape: {}\".format(cropped.shape))\r\n```\r\n\r\n"}
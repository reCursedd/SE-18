{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16911", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16911/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16911/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16911/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16911", "id": 296099634, "node_id": "MDU6SXNzdWUyOTYwOTk2MzQ=", "number": 16911, "title": "VS2017 / Windows build error tfcompile: no user-defined conversion for 'xla::HloInstruction::Identical::<lambda_6c9857087f6484280d6d6ec01ce267b9>", "user": {"login": "thefiddler", "id": 3104289, "node_id": "MDQ6VXNlcjMxMDQyODk=", "avatar_url": "https://avatars3.githubusercontent.com/u/3104289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thefiddler", "html_url": "https://github.com/thefiddler", "followers_url": "https://api.github.com/users/thefiddler/followers", "following_url": "https://api.github.com/users/thefiddler/following{/other_user}", "gists_url": "https://api.github.com/users/thefiddler/gists{/gist_id}", "starred_url": "https://api.github.com/users/thefiddler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thefiddler/subscriptions", "organizations_url": "https://api.github.com/users/thefiddler/orgs", "repos_url": "https://api.github.com/users/thefiddler/repos", "events_url": "https://api.github.com/users/thefiddler/events{/privacy}", "received_events_url": "https://api.github.com/users/thefiddler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-10T13:10:48Z", "updated_at": "2018-02-13T04:17:23Z", "closed_at": "2018-02-13T04:17:23Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: no</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Windows 10 64bit</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/afc30a0dc00e13d5f0ed522e98ba7074f21d2813/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/afc30a0dc00e13d5f0ed522e98ba7074f21d2813\"><tt>afc30a0</tt></a></li>\n<li><strong>Python version</strong>: Python 3.6.2 :: Anaconda, Inc.</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.10</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: Microsoft (R) C/C++ Optimizing Compiler Version 19.12.25835 for x64</li>\n<li><strong>CUDA/cuDNN version</strong>: none</li>\n<li><strong>GPU model and memory</strong>: none</li>\n<li><strong>Exact command to reproduce</strong>: <code>bazel build --config=opt //tensorflow/compiler/aot:tfcompile</code></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>After applying <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"296063462\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16904\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/16904/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/16904\">#16904</a> to fix <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"295711946\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16882\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/16882/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/16882\">#16882</a> compilation continues until it fails with:</p>\n<div class=\"highlight highlight-source-shell\"><pre>.<span class=\"pl-cce\">\\t</span>ensorflow/compiler/xla/service/hlo_instruction.h(579): error C2446: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>:<span class=\"pl-pds\">'</span></span>: no conversion from <span class=\"pl-s\"><span class=\"pl-pds\">'</span>xla::HloInstruction::Identical::&lt;lambda_6c9857087f6484280d6d6ec01ce267b9&gt;<span class=\"pl-pds\">'</span></span> to <span class=\"pl-s\"><span class=\"pl-pds\">'</span>xla::HloInstruction::Identical::&lt;lambda_687e181a7b8d05356bae3b6704b3fe49&gt;<span class=\"pl-pds\">'</span></span></pre></div>\n<h3>Source code / logs</h3>\n<p>Full error log</p>\n<div class=\"highlight highlight-source-shell\"><pre>.<span class=\"pl-cce\">\\t</span>ensorflow/compiler/xla/service/hlo_instruction.h(579): error C2446: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>:<span class=\"pl-pds\">'</span></span>: no conversion from <span class=\"pl-s\"><span class=\"pl-pds\">'</span>xla::HloInstruction::Identical::&lt;lambda_6c9857087f6484280d6d6ec01ce267b9&gt;<span class=\"pl-pds\">'</span></span> to <span class=\"pl-s\"><span class=\"pl-pds\">'</span>xla::HloInstruction::Identical::&lt;lambda_687e181a7b8d05356bae3b6704b3fe49&gt;<span class=\"pl-pds\">'</span></span>\n.<span class=\"pl-cce\">\\t</span>ensorflow/compiler/xla/service/hlo_instruction.h(579): note: No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called\n.<span class=\"pl-cce\">\\t</span>ensorflow/compiler/xla/service/hlo_instruction.h(580): error C3536: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>eq_shapes<span class=\"pl-pds\">'</span></span>: cannot be used before it is initialized\n.<span class=\"pl-cce\">\\t</span>ensorflow/compiler/xla/service/hlo_instruction.h(580): error C2064: term does not evaluate to a <span class=\"pl-k\">function</span> <span class=\"pl-en\">taking</span> 2 arguments\n.<span class=\"pl-cce\">\\t</span>ensorflow/compiler/xla/service/hlo_instruction.h(595): error C2664: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>bool xla::HloInstruction::IdenticalSlowPath(const xla::HloInstruction &amp;,const std::function&lt;bool (const xla::HloComputation *,const xla::HloComputation *)&gt; &amp;,const std::function&lt;bool (const xla::Shape &amp;,const xla::Shape &amp;)&gt; &amp;) const<span class=\"pl-pds\">'</span></span>: cannot convert argument 3 from <span class=\"pl-s\"><span class=\"pl-pds\">'</span>int<span class=\"pl-pds\">'</span></span> to <span class=\"pl-s\"><span class=\"pl-pds\">'</span>const std::function&lt;bool (const xla::Shape &amp;,const xla::Shape &amp;)&gt; &amp;<span class=\"pl-pds\">'</span></span>\n.<span class=\"pl-cce\">\\t</span>ensorflow/compiler/xla/service/hlo_instruction.h(595): note: Reason: cannot convert from <span class=\"pl-s\"><span class=\"pl-pds\">'</span>int<span class=\"pl-pds\">'</span></span> to <span class=\"pl-s\"><span class=\"pl-pds\">'</span>const std::function&lt;bool (const xla::Shape &amp;,const xla::Shape &amp;)&gt;<span class=\"pl-pds\">'</span></span>\n.<span class=\"pl-cce\">\\t</span>ensorflow/compiler/xla/service/hlo_instruction.h(595): note: No constructor could take the <span class=\"pl-c1\">source</span> type, or constructor overload resolution was ambiguous\nTarget //tensorflow/compiler/aot:tfcompile failed to build</pre></div>\n<p>See <a href=\"https://github.com/tensorflow/tensorflow/files/1713411/build.log\">attached file</a> for the complete build log.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 64bit\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): afc30a0\nPython version: Python 3.6.2 :: Anaconda, Inc.\nBazel version (if compiling from source): 0.10\nGCC/Compiler version (if compiling from source): Microsoft (R) C/C++ Optimizing Compiler Version 19.12.25835 for x64\nCUDA/cuDNN version: none\nGPU model and memory: none\nExact command to reproduce: bazel build --config=opt //tensorflow/compiler/aot:tfcompile\n\nDescribe the problem\nAfter applying #16904 to fix #16882 compilation continues until it fails with:\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(579): error C2446: ':': no conversion from 'xla::HloInstruction::Identical::<lambda_6c9857087f6484280d6d6ec01ce267b9>' to 'xla::HloInstruction::Identical::<lambda_687e181a7b8d05356bae3b6704b3fe49>'\nSource code / logs\nFull error log\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(579): error C2446: ':': no conversion from 'xla::HloInstruction::Identical::<lambda_6c9857087f6484280d6d6ec01ce267b9>' to 'xla::HloInstruction::Identical::<lambda_687e181a7b8d05356bae3b6704b3fe49>'\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(579): note: No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(580): error C3536: 'eq_shapes': cannot be used before it is initialized\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(580): error C2064: term does not evaluate to a function taking 2 arguments\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(595): error C2664: 'bool xla::HloInstruction::IdenticalSlowPath(const xla::HloInstruction &,const std::function<bool (const xla::HloComputation *,const xla::HloComputation *)> &,const std::function<bool (const xla::Shape &,const xla::Shape &)> &) const': cannot convert argument 3 from 'int' to 'const std::function<bool (const xla::Shape &,const xla::Shape &)> &'\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(595): note: Reason: cannot convert from 'int' to 'const std::function<bool (const xla::Shape &,const xla::Shape &)>'\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(595): note: No constructor could take the source type, or constructor overload resolution was ambiguous\nTarget //tensorflow/compiler/aot:tfcompile failed to build\nSee attached file for the complete build log.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10 64bit\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: afc30a0dc00e13d5f0ed522e98ba7074f21d2813\r\n- **Python version**: Python 3.6.2 :: Anaconda, Inc.\r\n- **Bazel version (if compiling from source)**: 0.10\r\n- **GCC/Compiler version (if compiling from source)**: Microsoft (R) C/C++ Optimizing Compiler Version 19.12.25835 for x64\r\n- **CUDA/cuDNN version**: none\r\n- **GPU model and memory**: none\r\n- **Exact command to reproduce**: `bazel build --config=opt //tensorflow/compiler/aot:tfcompile`\r\n\r\n### Describe the problem\r\nAfter applying #16904 to fix #16882 compilation continues until it fails with:\r\n```bash\r\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(579): error C2446: ':': no conversion from 'xla::HloInstruction::Identical::<lambda_6c9857087f6484280d6d6ec01ce267b9>' to 'xla::HloInstruction::Identical::<lambda_687e181a7b8d05356bae3b6704b3fe49>'\r\n```\r\n\r\n### Source code / logs\r\nFull error log\r\n```bash\r\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(579): error C2446: ':': no conversion from 'xla::HloInstruction::Identical::<lambda_6c9857087f6484280d6d6ec01ce267b9>' to 'xla::HloInstruction::Identical::<lambda_687e181a7b8d05356bae3b6704b3fe49>'\r\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(579): note: No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called\r\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(580): error C3536: 'eq_shapes': cannot be used before it is initialized\r\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(580): error C2064: term does not evaluate to a function taking 2 arguments\r\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(595): error C2664: 'bool xla::HloInstruction::IdenticalSlowPath(const xla::HloInstruction &,const std::function<bool (const xla::HloComputation *,const xla::HloComputation *)> &,const std::function<bool (const xla::Shape &,const xla::Shape &)> &) const': cannot convert argument 3 from 'int' to 'const std::function<bool (const xla::Shape &,const xla::Shape &)> &'\r\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(595): note: Reason: cannot convert from 'int' to 'const std::function<bool (const xla::Shape &,const xla::Shape &)>'\r\n.\\tensorflow/compiler/xla/service/hlo_instruction.h(595): note: No constructor could take the source type, or constructor overload resolution was ambiguous\r\nTarget //tensorflow/compiler/aot:tfcompile failed to build\r\n```\r\n\r\nSee [attached file](https://github.com/tensorflow/tensorflow/files/1713411/build.log) for the complete build log.\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/434180922", "html_url": "https://github.com/tensorflow/tensorflow/issues/22763#issuecomment-434180922", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22763", "id": 434180922, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDE4MDkyMg==", "user": {"login": "Ouwen", "id": 5455421, "node_id": "MDQ6VXNlcjU0NTU0MjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5455421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ouwen", "html_url": "https://github.com/Ouwen", "followers_url": "https://api.github.com/users/Ouwen/followers", "following_url": "https://api.github.com/users/Ouwen/following{/other_user}", "gists_url": "https://api.github.com/users/Ouwen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ouwen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ouwen/subscriptions", "organizations_url": "https://api.github.com/users/Ouwen/orgs", "repos_url": "https://api.github.com/users/Ouwen/repos", "events_url": "https://api.github.com/users/Ouwen/events{/privacy}", "received_events_url": "https://api.github.com/users/Ouwen/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-30T05:54:50Z", "updated_at": "2018-10-30T05:55:07Z", "author_association": "CONTRIBUTOR", "body_html": "<blockquote>\n<p>Note: when applying a decay to the learning rate, be sure to manually apply<br>\nthe decay to the <code>weight_decay</code> as well. For example:</p>\n<div class=\"highlight highlight-source-python\"><pre> decay <span class=\"pl-k\">=</span> tf.train.piecewise_constant(tf.train.get_global_step(), \n                                     [<span class=\"pl-c1\">10000</span>, <span class=\"pl-c1\">15000</span>], [<span class=\"pl-c1\">1e-1</span>, <span class=\"pl-c1\">1e-2</span>, <span class=\"pl-c1\">1e-3</span>])\n lr <span class=\"pl-k\">=</span> <span class=\"pl-c1\">1</span><span class=\"pl-k\">*</span>decay\n wd <span class=\"pl-k\">=</span> <span class=\"pl-c1\">1e-4</span><span class=\"pl-k\">*</span>decay\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> ...</span>\n optimizer <span class=\"pl-k\">=</span> tf.contrib.opt.MomentumWOptimizer(<span class=\"pl-v\">learning_rate</span><span class=\"pl-k\">=</span>lr,\n                                               <span class=\"pl-v\">weight_decay</span><span class=\"pl-k\">=</span>wd,\n                                               <span class=\"pl-v\">momentum</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">0.9</span>,\n                                               <span class=\"pl-v\">use_nesterov</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>)</pre></div>\n</blockquote>\n<p>I can add this snippet to the other weight decay optimizers as well if this looks good.</p>", "body_text": "Note: when applying a decay to the learning rate, be sure to manually apply\nthe decay to the weight_decay as well. For example:\n decay = tf.train.piecewise_constant(tf.train.get_global_step(), \n                                     [10000, 15000], [1e-1, 1e-2, 1e-3])\n lr = 1*decay\n wd = 1e-4*decay\n  # ...\n optimizer = tf.contrib.opt.MomentumWOptimizer(learning_rate=lr,\n                                               weight_decay=wd,\n                                               momentum=0.9,\n                                               use_nesterov=True)\n\nI can add this snippet to the other weight decay optimizers as well if this looks good.", "body": ">   Note: when applying a decay to the learning rate, be sure to manually apply\r\n>   the decay to the `weight_decay` as well. For example:\r\n>    ```python\r\n>     decay = tf.train.piecewise_constant(tf.train.get_global_step(), \r\n>                                         [10000, 15000], [1e-1, 1e-2, 1e-3])\r\n>     lr = 1*decay\r\n>     wd = 1e-4*decay\r\n>      # ...\r\n>     optimizer = tf.contrib.opt.MomentumWOptimizer(learning_rate=lr,\r\n>                                                   weight_decay=wd,\r\n>                                                   momentum=0.9,\r\n>                                                   use_nesterov=True)\r\n>   ```\r\n\r\nI can add this snippet to the other weight decay optimizers as well if this looks good."}
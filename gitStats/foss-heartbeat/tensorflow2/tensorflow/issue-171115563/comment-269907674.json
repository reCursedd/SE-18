{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/269907674", "html_url": "https://github.com/tensorflow/tensorflow/issues/3813#issuecomment-269907674", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3813", "id": 269907674, "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTkwNzY3NA==", "user": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-01T15:43:08Z", "updated_at": "2017-01-01T15:43:08Z", "author_association": "MEMBER", "body_html": "<div class=\"email-fragment\">Please ask this type of question on StackOverflow.\n\nAvoid calling tf.constant. Use tf.batch instead.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Sat, Dec 31, 2016 at 20:37 zhangrong ***@***.***&gt; wrote:\n <a class=\"user-mention\" href=\"https://github.com/martinwicke\">@martinwicke</a> &lt;<a href=\"https://github.com/martinwicke\">https://github.com/martinwicke</a>&gt; Thank you for your time.\n How to edit the function input_fn below to fix the ValueError: GraphDef\n cannot be larger than 2GB? Can you give another version of function\n input_fn? Thanks a lot. I am not very clear of how to do this edition\n with the link <a href=\"https://www.tensorflow.org/how_tos/reading_data/\">https://www.tensorflow.org/how_tos/reading_data/</a> after\n trying a lot with a lot of errors.\n\n\n def input_fn(df):\n\n   \"\"\"Input builder function.\"\"\"\n\n   # Creates a dictionary mapping from each continuous feature column name (k) to\n\n   # the values of that column stored in a constant Tensor.\n\n   continuous_cols = {k: tf.constant(df[k].values) for k in CONTINUOUS_COLUMNS}\n\n   # Creates a dictionary mapping from each categorical feature column name (k)\n\n   # to the values of that column stored in a tf.SparseTensor.\n\n   categorical_cols = {k: tf.SparseTensor(\n\n       indices=[[i, 0] for i in range(df[k].size)],\n\n       values=df[k].values,\n\n       shape=[df[k].size, 1])\n\n                       for k in CATEGORICAL_COLUMNS}\n\n   # Merges the two dictionaries into one.\n\n   feature_cols = dict(continuous_cols)\n\n   feature_cols.update(categorical_cols)\n\n   # Converts the label column into a constant Tensor.\n\n   label = tf.constant(df[LABEL_COLUMN].values)\n\n   # Returns the feature columns and the label.\n\n   return feature_cols, label\n\n\n\n\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"171115563\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3813\" href=\"https://github.com/tensorflow/tensorflow/issues/3813#issuecomment-269892070\">#3813 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AAjO_ZESr8LhQ9I2u-OpN1ugiGQ0VYIQks5rNy2YgaJpZM4JkJL4\">https://github.com/notifications/unsubscribe-auth/AAjO_ZESr8LhQ9I2u-OpN1ugiGQ0VYIQks5rNy2YgaJpZM4JkJL4</a>&gt;\n .\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "Please ask this type of question on StackOverflow.\n\nAvoid calling tf.constant. Use tf.batch instead.\n\u2026\nOn Sat, Dec 31, 2016 at 20:37 zhangrong ***@***.***> wrote:\n @martinwicke <https://github.com/martinwicke> Thank you for your time.\n How to edit the function input_fn below to fix the ValueError: GraphDef\n cannot be larger than 2GB? Can you give another version of function\n input_fn? Thanks a lot. I am not very clear of how to do this edition\n with the link https://www.tensorflow.org/how_tos/reading_data/ after\n trying a lot with a lot of errors.\n\n\n def input_fn(df):\n\n   \"\"\"Input builder function.\"\"\"\n\n   # Creates a dictionary mapping from each continuous feature column name (k) to\n\n   # the values of that column stored in a constant Tensor.\n\n   continuous_cols = {k: tf.constant(df[k].values) for k in CONTINUOUS_COLUMNS}\n\n   # Creates a dictionary mapping from each categorical feature column name (k)\n\n   # to the values of that column stored in a tf.SparseTensor.\n\n   categorical_cols = {k: tf.SparseTensor(\n\n       indices=[[i, 0] for i in range(df[k].size)],\n\n       values=df[k].values,\n\n       shape=[df[k].size, 1])\n\n                       for k in CATEGORICAL_COLUMNS}\n\n   # Merges the two dictionaries into one.\n\n   feature_cols = dict(continuous_cols)\n\n   feature_cols.update(categorical_cols)\n\n   # Converts the label column into a constant Tensor.\n\n   label = tf.constant(df[LABEL_COLUMN].values)\n\n   # Returns the feature columns and the label.\n\n   return feature_cols, label\n\n\n\n\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#3813 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/AAjO_ZESr8LhQ9I2u-OpN1ugiGQ0VYIQks5rNy2YgaJpZM4JkJL4>\n .", "body": "Please ask this type of question on StackOverflow.\n\nAvoid calling tf.constant. Use tf.batch instead.\n\nOn Sat, Dec 31, 2016 at 20:37 zhangrong <notifications@github.com> wrote:\n\n> @martinwicke <https://github.com/martinwicke> Thank you for your time.\n> How to edit the function input_fn below to fix the ValueError: GraphDef\n> cannot be larger than 2GB? Can you give another version of function\n> input_fn? Thanks a lot. I am not very clear of how to do this edition\n> with the link https://www.tensorflow.org/how_tos/reading_data/ after\n> trying a lot with a lot of errors.\n>\n>\n> def input_fn(df):\n>\n>   \"\"\"Input builder function.\"\"\"\n>\n>   # Creates a dictionary mapping from each continuous feature column name (k) to\n>\n>   # the values of that column stored in a constant Tensor.\n>\n>   continuous_cols = {k: tf.constant(df[k].values) for k in CONTINUOUS_COLUMNS}\n>\n>   # Creates a dictionary mapping from each categorical feature column name (k)\n>\n>   # to the values of that column stored in a tf.SparseTensor.\n>\n>   categorical_cols = {k: tf.SparseTensor(\n>\n>       indices=[[i, 0] for i in range(df[k].size)],\n>\n>       values=df[k].values,\n>\n>       shape=[df[k].size, 1])\n>\n>                       for k in CATEGORICAL_COLUMNS}\n>\n>   # Merges the two dictionaries into one.\n>\n>   feature_cols = dict(continuous_cols)\n>\n>   feature_cols.update(categorical_cols)\n>\n>   # Converts the label column into a constant Tensor.\n>\n>   label = tf.constant(df[LABEL_COLUMN].values)\n>\n>   # Returns the feature columns and the label.\n>\n>   return feature_cols, label\n>\n>\n>\n>\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/3813#issuecomment-269892070>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAjO_ZESr8LhQ9I2u-OpN1ugiGQ0VYIQks5rNy2YgaJpZM4JkJL4>\n> .\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/917", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/917/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/917/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/917/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/917", "id": 129484572, "node_id": "MDU6SXNzdWUxMjk0ODQ1NzI=", "number": 917, "title": "Sequence-Wise Batch Normalization for RNN's", "user": {"login": "NickShahML", "id": 14891677, "node_id": "MDQ6VXNlcjE0ODkxNjc3", "avatar_url": "https://avatars2.githubusercontent.com/u/14891677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NickShahML", "html_url": "https://github.com/NickShahML", "followers_url": "https://api.github.com/users/NickShahML/followers", "following_url": "https://api.github.com/users/NickShahML/following{/other_user}", "gists_url": "https://api.github.com/users/NickShahML/gists{/gist_id}", "starred_url": "https://api.github.com/users/NickShahML/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NickShahML/subscriptions", "organizations_url": "https://api.github.com/users/NickShahML/orgs", "repos_url": "https://api.github.com/users/NickShahML/repos", "events_url": "https://api.github.com/users/NickShahML/events{/privacy}", "received_events_url": "https://api.github.com/users/NickShahML/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "vincentvanhoucke", "id": 15737127, "node_id": "MDQ6VXNlcjE1NzM3MTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/15737127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincentvanhoucke", "html_url": "https://github.com/vincentvanhoucke", "followers_url": "https://api.github.com/users/vincentvanhoucke/followers", "following_url": "https://api.github.com/users/vincentvanhoucke/following{/other_user}", "gists_url": "https://api.github.com/users/vincentvanhoucke/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincentvanhoucke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincentvanhoucke/subscriptions", "organizations_url": "https://api.github.com/users/vincentvanhoucke/orgs", "repos_url": "https://api.github.com/users/vincentvanhoucke/repos", "events_url": "https://api.github.com/users/vincentvanhoucke/events{/privacy}", "received_events_url": "https://api.github.com/users/vincentvanhoucke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "vincentvanhoucke", "id": 15737127, "node_id": "MDQ6VXNlcjE1NzM3MTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/15737127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincentvanhoucke", "html_url": "https://github.com/vincentvanhoucke", "followers_url": "https://api.github.com/users/vincentvanhoucke/followers", "following_url": "https://api.github.com/users/vincentvanhoucke/following{/other_user}", "gists_url": "https://api.github.com/users/vincentvanhoucke/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincentvanhoucke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincentvanhoucke/subscriptions", "organizations_url": "https://api.github.com/users/vincentvanhoucke/orgs", "repos_url": "https://api.github.com/users/vincentvanhoucke/repos", "events_url": "https://api.github.com/users/vincentvanhoucke/events{/privacy}", "received_events_url": "https://api.github.com/users/vincentvanhoucke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2016-01-28T15:29:53Z", "updated_at": "2016-05-08T14:02:36Z", "closed_at": "2016-02-19T15:37:47Z", "author_association": "NONE", "body_html": "<p>Hey TF,</p>\n<p>Recently, for deep RNN's, sequence wise batch normalization has proven to be very helpful. <a href=\"http://arxiv.org/pdf/1512.02595v1.pdf\" rel=\"nofollow\">Deep Speech 2</a> in section 3.2 explains this in more detail. Sequence-wise batch normalization is described in section 4.1 in <a href=\"http://arxiv.org/pdf/1510.01378v1.pdf\" rel=\"nofollow\">Batch Normalized RNNs</a>.</p>\n<p><code>tf.nn.moments</code> is very useful for batch normalization because it gives you the mean and variance. However, in seq2seq setups, we need to do a batch normalization across all timesteps (the entire sequence). Unfortunately, the way <code>seq2seq.py</code> is written, each timestep is within a separate 2D matrix. This means that there is a list of 2d tensors for the entire sequence.</p>\n<p>If somehow, <code>tf.nn.moments</code> could be modified to accept lists of tensors (all of the same dimensions), it would be incredibly helpful. This way, we could input the entire list of tensors, and compute the resulting mean and variance for that sequence.</p>\n<p>Thanks!</p>", "body_text": "Hey TF,\nRecently, for deep RNN's, sequence wise batch normalization has proven to be very helpful. Deep Speech 2 in section 3.2 explains this in more detail. Sequence-wise batch normalization is described in section 4.1 in Batch Normalized RNNs.\ntf.nn.moments is very useful for batch normalization because it gives you the mean and variance. However, in seq2seq setups, we need to do a batch normalization across all timesteps (the entire sequence). Unfortunately, the way seq2seq.py is written, each timestep is within a separate 2D matrix. This means that there is a list of 2d tensors for the entire sequence.\nIf somehow, tf.nn.moments could be modified to accept lists of tensors (all of the same dimensions), it would be incredibly helpful. This way, we could input the entire list of tensors, and compute the resulting mean and variance for that sequence.\nThanks!", "body": "Hey TF,\n\nRecently, for deep RNN's, sequence wise batch normalization has proven to be very helpful. [Deep Speech 2](http://arxiv.org/pdf/1512.02595v1.pdf) in section 3.2 explains this in more detail. Sequence-wise batch normalization is described in section 4.1 in [Batch Normalized RNNs](http://arxiv.org/pdf/1510.01378v1.pdf).\n\n`tf.nn.moments` is very useful for batch normalization because it gives you the mean and variance. However, in seq2seq setups, we need to do a batch normalization across all timesteps (the entire sequence). Unfortunately, the way `seq2seq.py` is written, each timestep is within a separate 2D matrix. This means that there is a list of 2d tensors for the entire sequence.\n\nIf somehow, `tf.nn.moments` could be modified to accept lists of tensors (all of the same dimensions), it would be incredibly helpful. This way, we could input the entire list of tensors, and compute the resulting mean and variance for that sequence. \n\nThanks!\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/325853344", "html_url": "https://github.com/tensorflow/tensorflow/pull/12502#issuecomment-325853344", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12502", "id": 325853344, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTg1MzM0NA==", "user": {"login": "jthestness", "id": 28744304, "node_id": "MDQ6VXNlcjI4NzQ0MzA0", "avatar_url": "https://avatars0.githubusercontent.com/u/28744304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jthestness", "html_url": "https://github.com/jthestness", "followers_url": "https://api.github.com/users/jthestness/followers", "following_url": "https://api.github.com/users/jthestness/following{/other_user}", "gists_url": "https://api.github.com/users/jthestness/gists{/gist_id}", "starred_url": "https://api.github.com/users/jthestness/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jthestness/subscriptions", "organizations_url": "https://api.github.com/users/jthestness/orgs", "repos_url": "https://api.github.com/users/jthestness/repos", "events_url": "https://api.github.com/users/jthestness/events{/privacy}", "received_events_url": "https://api.github.com/users/jthestness/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-30T01:42:45Z", "updated_at": "2017-08-30T01:42:45Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Nice work! Thanks for these changes. I have these cuda-9 and cudnn-v7 (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"252113852\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12503\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/12503/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/12503\">#12503</a>) patches built and working.</p>\n<p>Notes for others trying this out:</p>\n<ol>\n<li>\n<p>This patch alone either requires prior versions of cuDNN (up to v6), or cuDNN must be disabled (either option does not support new mixed-precision fp16 NVIDIA Volta V100). Another patch is required to also support cuDNN v7 (and Volta). <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1873655\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nluehr\">@nluehr</a> has posted a patch for cuDNN 7 support here: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"252113852\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12503\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/12503/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/12503\">#12503</a></p>\n</li>\n<li>\n<p>Eigen must also be updated to work with cuda-9 per this thread: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"251945458\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12489\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/12489/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/12489\">#12489</a>. For now, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1873655\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nluehr\">@nluehr</a> has a modified Eigen archive available with these changes to <code>tensorflow/workspace.bzl</code>:</p>\n</li>\n</ol>\n<pre><code>diff --git a/tensorflow/workspace.bzl b/tensorflow/workspace.bzl\nindex e5c2ab5..1b3314a 100644\n--- a/tensorflow/workspace.bzl\n+++ b/tensorflow/workspace.bzl\n@@ -169,12 +169,14 @@ def tf_workspace(path_prefix=\"\", tf_repo_name=\"\"):\n   native.new_http_archive(\n       name = \"eigen_archive\",\n       urls = [\n-          \"http://mirror.bazel.build/bitbucket.org/eigen/eigen/get/f3a22f35b044.tar.gz\",\n-          \"https://bitbucket.org/eigen/eigen/get/f3a22f35b044.tar.gz\",\n+          \"http://bazel-mirror.storage.googleapis.com/bitbucket.org/ncluehr/eigen/get/6cc72014d888.tar.gz\",\n+          \"https://bitbucket.org/ncluehr/eigen/get/6cc72014d888.tar.gz\",\n       ],\n-      sha256 = \"ca7beac153d4059c02c8fc59816c82d54ea47fe58365e8aded4082ded0b820c4\",\n-      strip_prefix = \"eigen-eigen-f3a22f35b044\",\n+      sha256 = \"549fc01af565d185123016c12baf997eeb462b088c1885a4c3dfaf2a5c82d677\",\n+      strip_prefix = \"ncluehr-eigen-6cc72014d888\",\n       build_file = str(Label(\"//third_party:eigen.BUILD\")),\n+\n+\n   )\n \n   native.new_http_archive(\n</code></pre>", "body_text": "Nice work! Thanks for these changes. I have these cuda-9 and cudnn-v7 (#12503) patches built and working.\nNotes for others trying this out:\n\n\nThis patch alone either requires prior versions of cuDNN (up to v6), or cuDNN must be disabled (either option does not support new mixed-precision fp16 NVIDIA Volta V100). Another patch is required to also support cuDNN v7 (and Volta). @nluehr has posted a patch for cuDNN 7 support here: #12503\n\n\nEigen must also be updated to work with cuda-9 per this thread: #12489. For now, @nluehr has a modified Eigen archive available with these changes to tensorflow/workspace.bzl:\n\n\ndiff --git a/tensorflow/workspace.bzl b/tensorflow/workspace.bzl\nindex e5c2ab5..1b3314a 100644\n--- a/tensorflow/workspace.bzl\n+++ b/tensorflow/workspace.bzl\n@@ -169,12 +169,14 @@ def tf_workspace(path_prefix=\"\", tf_repo_name=\"\"):\n   native.new_http_archive(\n       name = \"eigen_archive\",\n       urls = [\n-          \"http://mirror.bazel.build/bitbucket.org/eigen/eigen/get/f3a22f35b044.tar.gz\",\n-          \"https://bitbucket.org/eigen/eigen/get/f3a22f35b044.tar.gz\",\n+          \"http://bazel-mirror.storage.googleapis.com/bitbucket.org/ncluehr/eigen/get/6cc72014d888.tar.gz\",\n+          \"https://bitbucket.org/ncluehr/eigen/get/6cc72014d888.tar.gz\",\n       ],\n-      sha256 = \"ca7beac153d4059c02c8fc59816c82d54ea47fe58365e8aded4082ded0b820c4\",\n-      strip_prefix = \"eigen-eigen-f3a22f35b044\",\n+      sha256 = \"549fc01af565d185123016c12baf997eeb462b088c1885a4c3dfaf2a5c82d677\",\n+      strip_prefix = \"ncluehr-eigen-6cc72014d888\",\n       build_file = str(Label(\"//third_party:eigen.BUILD\")),\n+\n+\n   )\n \n   native.new_http_archive(", "body": "Nice work! Thanks for these changes. I have these cuda-9 and cudnn-v7 (#12503) patches built and working.\r\n\r\nNotes for others trying this out:\r\n1) This patch alone either requires prior versions of cuDNN (up to v6), or cuDNN must be disabled (either option does not support new mixed-precision fp16 NVIDIA Volta V100). Another patch is required to also support cuDNN v7 (and Volta). @nluehr has posted a patch for cuDNN 7 support here: #12503\r\n\r\n2) Eigen must also be updated to work with cuda-9 per this thread: #12489. For now, @nluehr has a modified Eigen archive available with these changes to `tensorflow/workspace.bzl`:\r\n```\r\ndiff --git a/tensorflow/workspace.bzl b/tensorflow/workspace.bzl\r\nindex e5c2ab5..1b3314a 100644\r\n--- a/tensorflow/workspace.bzl\r\n+++ b/tensorflow/workspace.bzl\r\n@@ -169,12 +169,14 @@ def tf_workspace(path_prefix=\"\", tf_repo_name=\"\"):\r\n   native.new_http_archive(\r\n       name = \"eigen_archive\",\r\n       urls = [\r\n-          \"http://mirror.bazel.build/bitbucket.org/eigen/eigen/get/f3a22f35b044.tar.gz\",\r\n-          \"https://bitbucket.org/eigen/eigen/get/f3a22f35b044.tar.gz\",\r\n+          \"http://bazel-mirror.storage.googleapis.com/bitbucket.org/ncluehr/eigen/get/6cc72014d888.tar.gz\",\r\n+          \"https://bitbucket.org/ncluehr/eigen/get/6cc72014d888.tar.gz\",\r\n       ],\r\n-      sha256 = \"ca7beac153d4059c02c8fc59816c82d54ea47fe58365e8aded4082ded0b820c4\",\r\n-      strip_prefix = \"eigen-eigen-f3a22f35b044\",\r\n+      sha256 = \"549fc01af565d185123016c12baf997eeb462b088c1885a4c3dfaf2a5c82d677\",\r\n+      strip_prefix = \"ncluehr-eigen-6cc72014d888\",\r\n       build_file = str(Label(\"//third_party:eigen.BUILD\")),\r\n+\r\n+\r\n   )\r\n \r\n   native.new_http_archive(\r\n```\r\n"}
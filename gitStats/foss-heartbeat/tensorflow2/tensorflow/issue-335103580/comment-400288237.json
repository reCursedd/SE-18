{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/400288237", "html_url": "https://github.com/tensorflow/tensorflow/pull/20244#issuecomment-400288237", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20244", "id": 400288237, "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDI4ODIzNw==", "user": {"login": "facaiy", "id": 1112263, "node_id": "MDQ6VXNlcjExMTIyNjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1112263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/facaiy", "html_url": "https://github.com/facaiy", "followers_url": "https://api.github.com/users/facaiy/followers", "following_url": "https://api.github.com/users/facaiy/following{/other_user}", "gists_url": "https://api.github.com/users/facaiy/gists{/gist_id}", "starred_url": "https://api.github.com/users/facaiy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/facaiy/subscriptions", "organizations_url": "https://api.github.com/users/facaiy/orgs", "repos_url": "https://api.github.com/users/facaiy/repos", "events_url": "https://api.github.com/users/facaiy/events{/privacy}", "received_events_url": "https://api.github.com/users/facaiy/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-26T12:24:33Z", "updated_at": "2018-06-26T12:24:33Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5118881\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/qlzh727\">@qlzh727</a> Thanks. There seems something wrong with communication between GPU and CPU. Do you have any idea or know who could give a hand?</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-c1\">2018</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">6</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">25</span> <span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">12</span>:<span class=\"pl-c1\">34.342209</span>: I tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_device.cc:<span class=\"pl-c1\">1084</span>] Created TensorFlow device (<span class=\"pl-k\">/</span>device:<span class=\"pl-c1\">GPU</span>:<span class=\"pl-c1\">0</span> <span class=\"pl-k\">with</span> <span class=\"pl-c1\">10757</span> <span class=\"pl-c1\">MB</span> memory) <span class=\"pl-ii\">-&gt;</span> physical GPU (device: <span class=\"pl-c1\">0</span>, name: Tesla K80, pci bus <span class=\"pl-c1\">id</span>: <span class=\"pl-c1\">0000</span>:<span class=\"pl-c1\">00</span>:<span class=\"pl-c1\">07.0</span>, compute capability: <span class=\"pl-c1\">3.7</span>)\n<span class=\"pl-c1\">2018</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">6</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">25</span> <span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">12</span>:<span class=\"pl-c1\">34.539138</span>: I tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_device.cc:<span class=\"pl-c1\">1471</span>] Adding visible gpu devices: <span class=\"pl-c1\">0</span>\n<span class=\"pl-c1\">2018</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">6</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">25</span> <span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">12</span>:<span class=\"pl-c1\">34.539178</span>: I tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_device.cc:<span class=\"pl-c1\">952</span>] Device interconnect StreamExecutor <span class=\"pl-k\">with</span> strength <span class=\"pl-c1\">1</span> edge matrix:\n<span class=\"pl-c1\">2018</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">6</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">25</span> <span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">12</span>:<span class=\"pl-c1\">34.539185</span>: I tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_device.cc:<span class=\"pl-c1\">958</span>]      <span class=\"pl-c1\">0</span>\n<span class=\"pl-c1\">2018</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">6</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">25</span> <span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">12</span>:<span class=\"pl-c1\">34.539189</span>: I tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_device.cc:<span class=\"pl-c1\">971</span>] <span class=\"pl-c1\">0</span>:   N\n<span class=\"pl-c1\">2018</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">6</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">25</span> <span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">12</span>:<span class=\"pl-c1\">34.539759</span>: I tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>gpu<span class=\"pl-k\">/</span>gpu_device.cc:<span class=\"pl-c1\">1084</span>] Created TensorFlow device (<span class=\"pl-k\">/</span>job:localhost<span class=\"pl-k\">/</span>replica:<span class=\"pl-c1\">0</span><span class=\"pl-k\">/</span>task:<span class=\"pl-c1\">0</span><span class=\"pl-k\">/</span>device:<span class=\"pl-c1\">GPU</span>:<span class=\"pl-c1\">0</span> <span class=\"pl-k\">with</span> <span class=\"pl-c1\">10757</span> <span class=\"pl-c1\">MB</span> memory) <span class=\"pl-ii\">-&gt;</span> physical GPU (device: <span class=\"pl-c1\">0</span>, name: Tesla K80, pci bus <span class=\"pl-c1\">id</span>: <span class=\"pl-c1\">0000</span>:<span class=\"pl-c1\">00</span>:<span class=\"pl-c1\">07.0</span>, compute capability: <span class=\"pl-c1\">3.7</span>)\n<span class=\"pl-c1\">2018</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">6</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">25</span> <span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">12</span>:<span class=\"pl-c1\">34.567676</span>: E tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>framework<span class=\"pl-k\">/</span>op_segment.cc:<span class=\"pl-c1\">53</span>] Create kernel failed: Invalid argument: AttrValue must <span class=\"pl-k\">not</span> have reference <span class=\"pl-c1\">type</span> value of half_re\n<span class=\"pl-k\">for</span> attr <span class=\"pl-s\"><span class=\"pl-pds\">'</span>tensor_type<span class=\"pl-pds\">'</span></span>; NodeDef: Variable<span class=\"pl-k\">/</span>_1 <span class=\"pl-k\">=</span> _Recv[_start_time=<span class=\"pl-c1\">0</span>, client_terminated=false, recv_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>, send_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:GPU:0<span class=\"pl-pds\">\"</span></span>, send_device_incarnation=<span class=\"pl-c1\">1</span>, tensor_name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>edge_2_Variable<span class=\"pl-pds\">\"</span></span>, tensor_type=<span class=\"pl-c1\">DT_HALF_REF</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>](<span class=\"pl-k\">^</span>ScatterAdd<span class=\"pl-k\">/</span>indices, <span class=\"pl-k\">^</span>ScatterAdd<span class=\"pl-k\">/</span>updates); Op<span class=\"pl-k\">&lt;</span>name<span class=\"pl-k\">=</span>_Recv; signature<span class=\"pl-k\">=</span> <span class=\"pl-ii\">-&gt;</span> tensor:tensor_type; attr<span class=\"pl-k\">=</span>tensor_type:<span class=\"pl-c1\">type</span>; attr<span class=\"pl-k\">=</span>tensor_name:string; attr<span class=\"pl-k\">=</span>send_device:string; attr<span class=\"pl-k\">=</span>send_device_incarnation:<span class=\"pl-c1\">int</span>; attr<span class=\"pl-k\">=</span>recv_device:string; attr<span class=\"pl-k\">=</span>client_terminated:<span class=\"pl-c1\">bool</span>,default<span class=\"pl-k\">=</span>false; is_stateful<span class=\"pl-k\">=</span>true<span class=\"pl-k\">&gt;</span>\n<span class=\"pl-c1\">2018</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">0<span class=\"pl-ii\">6</span></span><span class=\"pl-k\">-</span><span class=\"pl-c1\">25</span> <span class=\"pl-c1\">17</span>:<span class=\"pl-c1\">12</span>:<span class=\"pl-c1\">34.567724</span>: E tensorflow<span class=\"pl-k\">/</span>core<span class=\"pl-k\">/</span>common_runtime<span class=\"pl-k\">/</span>executor.cc:<span class=\"pl-c1\">697</span>] Executor failed to create kernel. Invalid argument: AttrValue must <span class=\"pl-k\">not</span> have reference <span class=\"pl-c1\">type</span> value of half_ref\n<span class=\"pl-k\">for</span> attr <span class=\"pl-s\"><span class=\"pl-pds\">'</span>tensor_type<span class=\"pl-pds\">'</span></span>; NodeDef: Variable<span class=\"pl-k\">/</span>_1 <span class=\"pl-k\">=</span> _Recv[_start_time=<span class=\"pl-c1\">0</span>, client_terminated=false, recv_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>, send_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:GPU:0<span class=\"pl-pds\">\"</span></span>, send_device_incarnation=<span class=\"pl-c1\">1</span>, tensor_name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>edge_2_Variable<span class=\"pl-pds\">\"</span></span>, tensor_type=<span class=\"pl-c1\">DT_HALF_REF</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>](<span class=\"pl-k\">^</span>ScatterAdd<span class=\"pl-k\">/</span>indices, <span class=\"pl-k\">^</span>ScatterAdd<span class=\"pl-k\">/</span>updates); Op<span class=\"pl-k\">&lt;</span>name<span class=\"pl-k\">=</span>_Recv; signature<span class=\"pl-k\">=</span> <span class=\"pl-ii\">-&gt;</span> tensor:tensor_type; attr<span class=\"pl-k\">=</span>tensor_type:<span class=\"pl-c1\">type</span>; attr<span class=\"pl-k\">=</span>tensor_name:string; attr<span class=\"pl-k\">=</span>send_device:string; attr<span class=\"pl-k\">=</span>send_device_incarnation:<span class=\"pl-c1\">int</span>; attr<span class=\"pl-k\">=</span>recv_device:string; attr<span class=\"pl-k\">=</span>client_terminated:<span class=\"pl-c1\">bool</span>,default<span class=\"pl-k\">=</span>false; is_stateful<span class=\"pl-k\">=</span>true<span class=\"pl-k\">&gt;</span>\n[[Node: Variable<span class=\"pl-k\">/</span>_1 = _Recv[_start_time=<span class=\"pl-c1\">0</span>, client_terminated=false, recv_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>, send_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:GPU:0<span class=\"pl-pds\">\"</span></span>, send_device_incarnation=<span class=\"pl-c1\">1</span>, tensor_name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>edge_2_Variable<span class=\"pl-pds\">\"</span></span>, tensor_type=<span class=\"pl-c1\">DT_HALF_REF</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>](<span class=\"pl-k\">^</span>ScatterAdd<span class=\"pl-k\">/</span>indices, <span class=\"pl-k\">^</span>ScatterAdd<span class=\"pl-k\">/</span>updates)]]</pre></div>", "body_text": "@qlzh727 Thanks. There seems something wrong with communication between GPU and CPU. Do you have any idea or know who could give a hand?\n2018-06-25 17:12:34.342209: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1084] Created TensorFlow device (/device:GPU:0 with 10757 MB memory) -> physical GPU (device: 0, name: Tesla K80, pci bus id: 0000:00:07.0, compute capability: 3.7)\n2018-06-25 17:12:34.539138: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1471] Adding visible gpu devices: 0\n2018-06-25 17:12:34.539178: I tensorflow/core/common_runtime/gpu/gpu_device.cc:952] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-06-25 17:12:34.539185: I tensorflow/core/common_runtime/gpu/gpu_device.cc:958]      0\n2018-06-25 17:12:34.539189: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   N\n2018-06-25 17:12:34.539759: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1084] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10757 MB memory) -> physical GPU (device: 0, name: Tesla K80, pci bus id: 0000:00:07.0, compute capability: 3.7)\n2018-06-25 17:12:34.567676: E tensorflow/core/framework/op_segment.cc:53] Create kernel failed: Invalid argument: AttrValue must not have reference type value of half_re\nfor attr 'tensor_type'; NodeDef: Variable/_1 = _Recv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_2_Variable\", tensor_type=DT_HALF_REF, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](^ScatterAdd/indices, ^ScatterAdd/updates); Op<name=_Recv; signature= -> tensor:tensor_type; attr=tensor_type:type; attr=tensor_name:string; attr=send_device:string; attr=send_device_incarnation:int; attr=recv_device:string; attr=client_terminated:bool,default=false; is_stateful=true>\n2018-06-25 17:12:34.567724: E tensorflow/core/common_runtime/executor.cc:697] Executor failed to create kernel. Invalid argument: AttrValue must not have reference type value of half_ref\nfor attr 'tensor_type'; NodeDef: Variable/_1 = _Recv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_2_Variable\", tensor_type=DT_HALF_REF, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](^ScatterAdd/indices, ^ScatterAdd/updates); Op<name=_Recv; signature= -> tensor:tensor_type; attr=tensor_type:type; attr=tensor_name:string; attr=send_device:string; attr=send_device_incarnation:int; attr=recv_device:string; attr=client_terminated:bool,default=false; is_stateful=true>\n[[Node: Variable/_1 = _Recv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_2_Variable\", tensor_type=DT_HALF_REF, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](^ScatterAdd/indices, ^ScatterAdd/updates)]]", "body": "@qlzh727 Thanks. There seems something wrong with communication between GPU and CPU. Do you have any idea or know who could give a hand?\r\n\r\n\r\n```python\r\n2018-06-25 17:12:34.342209: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1084] Created TensorFlow device (/device:GPU:0 with 10757 MB memory) -> physical GPU (device: 0, name: Tesla K80, pci bus id: 0000:00:07.0, compute capability: 3.7)\r\n2018-06-25 17:12:34.539138: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1471] Adding visible gpu devices: 0\r\n2018-06-25 17:12:34.539178: I tensorflow/core/common_runtime/gpu/gpu_device.cc:952] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-06-25 17:12:34.539185: I tensorflow/core/common_runtime/gpu/gpu_device.cc:958]      0\r\n2018-06-25 17:12:34.539189: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   N\r\n2018-06-25 17:12:34.539759: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1084] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10757 MB memory) -> physical GPU (device: 0, name: Tesla K80, pci bus id: 0000:00:07.0, compute capability: 3.7)\r\n2018-06-25 17:12:34.567676: E tensorflow/core/framework/op_segment.cc:53] Create kernel failed: Invalid argument: AttrValue must not have reference type value of half_re\r\nfor attr 'tensor_type'; NodeDef: Variable/_1 = _Recv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_2_Variable\", tensor_type=DT_HALF_REF, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](^ScatterAdd/indices, ^ScatterAdd/updates); Op<name=_Recv; signature= -> tensor:tensor_type; attr=tensor_type:type; attr=tensor_name:string; attr=send_device:string; attr=send_device_incarnation:int; attr=recv_device:string; attr=client_terminated:bool,default=false; is_stateful=true>\r\n2018-06-25 17:12:34.567724: E tensorflow/core/common_runtime/executor.cc:697] Executor failed to create kernel. Invalid argument: AttrValue must not have reference type value of half_ref\r\nfor attr 'tensor_type'; NodeDef: Variable/_1 = _Recv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_2_Variable\", tensor_type=DT_HALF_REF, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](^ScatterAdd/indices, ^ScatterAdd/updates); Op<name=_Recv; signature= -> tensor:tensor_type; attr=tensor_type:type; attr=tensor_name:string; attr=send_device:string; attr=send_device_incarnation:int; attr=recv_device:string; attr=client_terminated:bool,default=false; is_stateful=true>\r\n[[Node: Variable/_1 = _Recv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_2_Variable\", tensor_type=DT_HALF_REF, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](^ScatterAdd/indices, ^ScatterAdd/updates)]]\r\n```"}
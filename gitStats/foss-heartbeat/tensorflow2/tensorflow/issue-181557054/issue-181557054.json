{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4809", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4809/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4809/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4809/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4809", "id": 181557054, "node_id": "MDU6SXNzdWUxODE1NTcwNTQ=", "number": 4809, "title": "Getting Send/Recv timings for distributed TF", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, {"login": "prb12", "id": 11547801, "node_id": "MDQ6VXNlcjExNTQ3ODAx", "avatar_url": "https://avatars1.githubusercontent.com/u/11547801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prb12", "html_url": "https://github.com/prb12", "followers_url": "https://api.github.com/users/prb12/followers", "following_url": "https://api.github.com/users/prb12/following{/other_user}", "gists_url": "https://api.github.com/users/prb12/gists{/gist_id}", "starred_url": "https://api.github.com/users/prb12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prb12/subscriptions", "organizations_url": "https://api.github.com/users/prb12/orgs", "repos_url": "https://api.github.com/users/prb12/repos", "events_url": "https://api.github.com/users/prb12/events{/privacy}", "received_events_url": "https://api.github.com/users/prb12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2016-10-07T00:26:23Z", "updated_at": "2018-04-02T16:06:50Z", "closed_at": "2018-04-02T16:06:49Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I'm trying to troubleshoot some slowness in our distributed models , and it would be useful to have access to timing of Send/Recv ops across graph partition.</p>\n<p>cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1450614\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/suharshs\">@suharshs</a> because maybe StatsPublisherInterface is relevant?</p>\n<p>For instance, a toy benchmark <a href=\"https://gist.github.com/yaroslavvb/1124bb02a9fd4abce3d86caf2f950cb2\">here</a> adds 100MB vectors of 1's in one process to variable in another process on local machine. If I look at timeline/stepstats, I see 120ms of emptiness, followed by 20ms in <code>AddOp</code> followed by another 700ms of missing time.</p>\n<p>Because it's a toy benchmark, I can figure out that 120ms is spent in transferring 100MB from one TF runtime to another, and 700ms is spent making the result available to Python client. But it's harder to do this on a large model</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/23068/19175296/47ddfe64-8bea-11e6-9882-a4a59a9823c8.png\"><img width=\"1298\" alt=\"screen shot 2016-10-06 at 5 27 51 pm\" src=\"https://cloud.githubusercontent.com/assets/23068/19175296/47ddfe64-8bea-11e6-9882-a4a59a9823c8.png\" style=\"max-width:100%;\"></a></p>", "body_text": "I'm trying to troubleshoot some slowness in our distributed models , and it would be useful to have access to timing of Send/Recv ops across graph partition.\ncc @suharshs because maybe StatsPublisherInterface is relevant?\nFor instance, a toy benchmark here adds 100MB vectors of 1's in one process to variable in another process on local machine. If I look at timeline/stepstats, I see 120ms of emptiness, followed by 20ms in AddOp followed by another 700ms of missing time.\nBecause it's a toy benchmark, I can figure out that 120ms is spent in transferring 100MB from one TF runtime to another, and 700ms is spent making the result available to Python client. But it's harder to do this on a large model", "body": "I'm trying to troubleshoot some slowness in our distributed models , and it would be useful to have access to timing of Send/Recv ops across graph partition.\n\ncc @suharshs because maybe StatsPublisherInterface is relevant?\n\nFor instance, a toy benchmark [here](https://gist.github.com/yaroslavvb/1124bb02a9fd4abce3d86caf2f950cb2) adds 100MB vectors of 1's in one process to variable in another process on local machine. If I look at timeline/stepstats, I see 120ms of emptiness, followed by 20ms in `AddOp` followed by another 700ms of missing time.\n\nBecause it's a toy benchmark, I can figure out that 120ms is spent in transferring 100MB from one TF runtime to another, and 700ms is spent making the result available to Python client. But it's harder to do this on a large model\n\n<img width=\"1298\" alt=\"screen shot 2016-10-06 at 5 27 51 pm\" src=\"https://cloud.githubusercontent.com/assets/23068/19175296/47ddfe64-8bea-11e6-9882-a4a59a9823c8.png\">\n"}
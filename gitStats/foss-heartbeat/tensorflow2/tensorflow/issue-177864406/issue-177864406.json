{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4471", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4471/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4471/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4471/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4471", "id": 177864406, "node_id": "MDU6SXNzdWUxNzc4NjQ0MDY=", "number": 4471, "title": "Add `tf.write_file` op", "user": {"login": "gibiansky", "id": 1865411, "node_id": "MDQ6VXNlcjE4NjU0MTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1865411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gibiansky", "html_url": "https://github.com/gibiansky", "followers_url": "https://api.github.com/users/gibiansky/followers", "following_url": "https://api.github.com/users/gibiansky/following{/other_user}", "gists_url": "https://api.github.com/users/gibiansky/gists{/gist_id}", "starred_url": "https://api.github.com/users/gibiansky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gibiansky/subscriptions", "organizations_url": "https://api.github.com/users/gibiansky/orgs", "repos_url": "https://api.github.com/users/gibiansky/repos", "events_url": "https://api.github.com/users/gibiansky/events{/privacy}", "received_events_url": "https://api.github.com/users/gibiansky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-09-19T18:45:19Z", "updated_at": "2016-11-03T16:44:27Z", "closed_at": "2016-11-03T16:44:27Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Tensorflow currently has a <code>tf.read_file</code> op, as documented <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/g3doc/api_docs/python/functions_and_classes/shard1/tf.read_file.md\">here</a>.</p>\n<p>Can we have a <code>tf.write_file</code> as well?</p>\n<p>It could be defined as something like:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">write_file</span>(<span class=\"pl-smi\">tensor</span>, <span class=\"pl-smi\">filename</span>, <span class=\"pl-smi\">name</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">None</span>):\n    <span class=\"pl-k\">def</span> <span class=\"pl-en\">write_data</span>(<span class=\"pl-smi\">data</span>):\n        <span class=\"pl-k\">with</span> <span class=\"pl-c1\">open</span>(filename, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>wb<span class=\"pl-pds\">\"</span></span>) <span class=\"pl-k\">as</span> handle:\n            handle.write(data)\n\n    <span class=\"pl-k\">with</span> tf.name_scope(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>WriteFile<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">or</span> name):\n        tensor <span class=\"pl-k\">=</span> tf.convert_to_tensor(tensor, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Values<span class=\"pl-pds\">\"</span></span>)\n        <span class=\"pl-k\">return</span> tf.py_func(write_data, tensor)</pre></div>\n<p>There are some usecases where this would be helpful, such as generating images and audio and then writing them to disk. Presumably, this would be done after an op such as <code>encode_jpeg</code> or <code>encode_audio</code>.</p>\n<p>If this already exists in some form, please close this \u2013 my apologies, but some googling as well as searching on Github did not find it.</p>", "body_text": "Tensorflow currently has a tf.read_file op, as documented here.\nCan we have a tf.write_file as well?\nIt could be defined as something like:\ndef write_file(tensor, filename, name=None):\n    def write_data(data):\n        with open(filename, \"wb\") as handle:\n            handle.write(data)\n\n    with tf.name_scope(\"WriteFile\" or name):\n        tensor = tf.convert_to_tensor(tensor, name=\"Values\")\n        return tf.py_func(write_data, tensor)\nThere are some usecases where this would be helpful, such as generating images and audio and then writing them to disk. Presumably, this would be done after an op such as encode_jpeg or encode_audio.\nIf this already exists in some form, please close this \u2013 my apologies, but some googling as well as searching on Github did not find it.", "body": "Tensorflow currently has a `tf.read_file` op, as documented [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/g3doc/api_docs/python/functions_and_classes/shard1/tf.read_file.md).\n\nCan we have a `tf.write_file` as well?\n\nIt could be defined as something like:\n\n``` python\ndef write_file(tensor, filename, name=None):\n    def write_data(data):\n        with open(filename, \"wb\") as handle:\n            handle.write(data)\n\n    with tf.name_scope(\"WriteFile\" or name):\n        tensor = tf.convert_to_tensor(tensor, name=\"Values\")\n        return tf.py_func(write_data, tensor)\n```\n\nThere are some usecases where this would be helpful, such as generating images and audio and then writing them to disk. Presumably, this would be done after an op such as `encode_jpeg` or `encode_audio`.\n\nIf this already exists in some form, please close this \u2013 my apologies, but some googling as well as searching on Github did not find it.\n"}
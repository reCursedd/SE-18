{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/336692286", "html_url": "https://github.com/tensorflow/tensorflow/pull/13525#issuecomment-336692286", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13525", "id": 336692286, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjY5MjI4Ng==", "user": {"login": "yang0773", "id": 8623819, "node_id": "MDQ6VXNlcjg2MjM4MTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/8623819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yang0773", "html_url": "https://github.com/yang0773", "followers_url": "https://api.github.com/users/yang0773/followers", "following_url": "https://api.github.com/users/yang0773/following{/other_user}", "gists_url": "https://api.github.com/users/yang0773/gists{/gist_id}", "starred_url": "https://api.github.com/users/yang0773/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yang0773/subscriptions", "organizations_url": "https://api.github.com/users/yang0773/orgs", "repos_url": "https://api.github.com/users/yang0773/repos", "events_url": "https://api.github.com/users/yang0773/events{/privacy}", "received_events_url": "https://api.github.com/users/yang0773/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-15T07:31:14Z", "updated_at": "2017-10-15T07:31:14Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19617165\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/scottmudge\">@scottmudge</a></p>\n<p>I tried your hacky way, but it still indicated the issue of \u201cwas not compiled to use: AVX2\u201d. I noticed the information in configuration stage on my platform,<br>\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED<br>\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED - Failed<br>\n-- Performing Test COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED<br>\n-- Performing Test COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED - Success</p>\n<p>I got the code from tensorflow:master with the latest commit as follow,<br>\ncommit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/10c871ed92a1d9b36c5e2e3a674d5812c67e82a1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/10c871ed92a1d9b36c5e2e3a674d5812c67e82a1\"><tt>10c871e</tt></a><br>\nMerge: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/87ac9901b35d80b38dd1530c6f32db5ce2a7fe15/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/87ac9901b35d80b38dd1530c6f32db5ce2a7fe15\"><tt>87ac990</tt></a> <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/188297f80e0341f2480071c85a671c6c0abdbf8e/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/188297f80e0341f2480071c85a671c6c0abdbf8e\"><tt>188297f</tt></a><br>\nAuthor: Shanqing Cai <a href=\"mailto:cais@google.com\">cais@google.com</a><br>\nDate: Mon Oct 9 09:34:12 2017 -0400</p>\n<p>Finally I modified one line in CMakeLists.txt with adding \"/arch:AVX2\", and it seems to work. Haha, it is another hacky way.</p>\n<p><em>if (tensorflow_WIN_CPU_SIMD_OPTIONS)<br>\nif (WIN32)<br>\nCHECK_CXX_COMPILER_FLAG(\"${tensorflow_WIN_CPU_SIMD_OPTIONS}\" COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED)<br>\nif(COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED)<br>\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} ${tensorflow_WIN_CPU_SIMD_OPTIONS} <strong>/arch:AVX2</strong>\")<br>\nelse()<br>\nmessage(FATAL_ERROR \"${tensorflow_WIN_CPU_SIMD_OPTIONS} not supported\")<br>\nendif()<br>\nendif()<br>\nendif()</em></p>\n<p>Thanks so much for your help.</p>", "body_text": "@scottmudge\nI tried your hacky way, but it still indicated the issue of \u201cwas not compiled to use: AVX2\u201d. I noticed the information in configuration stage on my platform,\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED - Failed\n-- Performing Test COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED\n-- Performing Test COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED - Success\nI got the code from tensorflow:master with the latest commit as follow,\ncommit 10c871e\nMerge: 87ac990 188297f\nAuthor: Shanqing Cai cais@google.com\nDate: Mon Oct 9 09:34:12 2017 -0400\nFinally I modified one line in CMakeLists.txt with adding \"/arch:AVX2\", and it seems to work. Haha, it is another hacky way.\nif (tensorflow_WIN_CPU_SIMD_OPTIONS)\nif (WIN32)\nCHECK_CXX_COMPILER_FLAG(\"${tensorflow_WIN_CPU_SIMD_OPTIONS}\" COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED)\nif(COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} ${tensorflow_WIN_CPU_SIMD_OPTIONS} /arch:AVX2\")\nelse()\nmessage(FATAL_ERROR \"${tensorflow_WIN_CPU_SIMD_OPTIONS} not supported\")\nendif()\nendif()\nendif()\nThanks so much for your help.", "body": "@scottmudge \r\n\r\nI tried your hacky way, but it still indicated the issue of \u201cwas not compiled to use: AVX2\u201d. I noticed the information in configuration stage on my platform,\r\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED \r\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED - Failed \r\n-- Performing Test COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED \r\n-- Performing Test COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED - Success\r\n\r\nI got the code from tensorflow:master with the latest commit as follow,\r\ncommit 10c871ed92a1d9b36c5e2e3a674d5812c67e82a1 \r\nMerge: 87ac9901b 188297f80 \r\nAuthor: Shanqing Cai <cais@google.com> \r\nDate: Mon Oct 9 09:34:12 2017 -0400\r\n\r\nFinally I modified one line in CMakeLists.txt with adding \"/arch:AVX2\", and it seems to work. Haha, it is another hacky way.\r\n\r\n_if (tensorflow_WIN_CPU_SIMD_OPTIONS)\r\n  if (WIN32)\r\n    CHECK_CXX_COMPILER_FLAG(\"${tensorflow_WIN_CPU_SIMD_OPTIONS}\" COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED)\r\n    if(COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED)\r\n      set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} ${tensorflow_WIN_CPU_SIMD_OPTIONS} **/arch:AVX2**\")\r\n    else()\r\n      message(FATAL_ERROR \"${tensorflow_WIN_CPU_SIMD_OPTIONS} not supported\")\r\n    endif()\r\n  endif()\r\nendif()_\r\n\r\nThanks so much for your help."}
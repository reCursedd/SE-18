{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3800", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3800/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3800/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3800/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3800", "id": 171041446, "node_id": "MDU6SXNzdWUxNzEwNDE0NDY=", "number": 3800, "title": "Problems in Tensorflow Seq2Seq Tutorial", "user": {"login": "sahiliitm", "id": 5723372, "node_id": "MDQ6VXNlcjU3MjMzNzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/5723372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sahiliitm", "html_url": "https://github.com/sahiliitm", "followers_url": "https://api.github.com/users/sahiliitm/followers", "following_url": "https://api.github.com/users/sahiliitm/following{/other_user}", "gists_url": "https://api.github.com/users/sahiliitm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sahiliitm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sahiliitm/subscriptions", "organizations_url": "https://api.github.com/users/sahiliitm/orgs", "repos_url": "https://api.github.com/users/sahiliitm/repos", "events_url": "https://api.github.com/users/sahiliitm/events{/privacy}", "received_events_url": "https://api.github.com/users/sahiliitm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "lukaszkaiser", "id": 684901, "node_id": "MDQ6VXNlcjY4NDkwMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/684901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukaszkaiser", "html_url": "https://github.com/lukaszkaiser", "followers_url": "https://api.github.com/users/lukaszkaiser/followers", "following_url": "https://api.github.com/users/lukaszkaiser/following{/other_user}", "gists_url": "https://api.github.com/users/lukaszkaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukaszkaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukaszkaiser/subscriptions", "organizations_url": "https://api.github.com/users/lukaszkaiser/orgs", "repos_url": "https://api.github.com/users/lukaszkaiser/repos", "events_url": "https://api.github.com/users/lukaszkaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/lukaszkaiser/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lukaszkaiser", "id": 684901, "node_id": "MDQ6VXNlcjY4NDkwMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/684901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukaszkaiser", "html_url": "https://github.com/lukaszkaiser", "followers_url": "https://api.github.com/users/lukaszkaiser/followers", "following_url": "https://api.github.com/users/lukaszkaiser/following{/other_user}", "gists_url": "https://api.github.com/users/lukaszkaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukaszkaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukaszkaiser/subscriptions", "organizations_url": "https://api.github.com/users/lukaszkaiser/orgs", "repos_url": "https://api.github.com/users/lukaszkaiser/repos", "events_url": "https://api.github.com/users/lukaszkaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/lukaszkaiser/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-08-14T04:14:52Z", "updated_at": "2016-08-23T01:04:20Z", "closed_at": "2016-08-23T01:04:20Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04</p>\n<p>Installed version of CUDA and cuDNN:<br>\nCuda 7.5 and CuDNN v4<br>\nOutput of ls -l /path/to/cuda/lib/cuda*:</p>\n<pre><code>-rwxrwxrwx 1 root root   322936 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so -&gt; libcudart.so.7.5\nlrwxrwxrwx 1 root root       19 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5 -&gt; libcudart.so.7.5.18\n-rwxrwxrwx 1 root root   383336 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\n-rwxrwxrwx 1 root root   720192 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart_static.a\n-rwxrwxrwx 1 root root 61272736 Jul 31 21:45 /usr/local/cuda-7.5/lib64/libcudnn.so\n-rwxrwxrwx 1 root root 61272736 Jul 31 21:45 /usr/local/cuda-7.5/lib64/libcudnn.so.4\n-rwxrwxrwx 1 root root 61272736 Jul 31 21:45 /usr/local/cuda-7.5/lib64/libcudnn.so.4.0.4\n</code></pre>\n<p>pip package installed from:</p>\n<pre><code>export TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.10.0rc0-cp27-none-linux_x86_64.whl\n</code></pre>\n<p>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.</p>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\n0.10.0rc0\n</code></pre>\n<p>The problem:<br>\nI'm trying out the seq2seq tutorial on natural language translation.<br>\nThe documentation of <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/seq2seq.py#L1086\">seq2seq.py</a><br>\nmentions that the output consists of per bucket output with each bucket containing tensors of shape<br>\n\"batch_size x num_decoder_symbols\". This seems to be incorrect because when i print the tensorflow sizes inside the function, they turn out to be (?, 1024). In other words, (batch_size, layer_size). I think either the documentation or the code is wrong, and there is certainly a mismatch. I'm wondering which is the case?</p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Install Tensorflow</li>\n<li>Clone this repo</li>\n<li>edit \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/seq2seq.py\"<br>\nto include the following print statement after <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/seq2seq.py#L1113\">this line</a></li>\n</ol>\n<pre><code>print(bucket_outputs[0].get_shape())\n</code></pre>\n<h3>What have you tried?</h3>\n<ol>\n<li>Filed this bug.</li>\n</ol>", "body_text": "Environment info\nOperating System: Ubuntu 14.04\nInstalled version of CUDA and cuDNN:\nCuda 7.5 and CuDNN v4\nOutput of ls -l /path/to/cuda/lib/cuda*:\n-rwxrwxrwx 1 root root   322936 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxrwxrwx 1 root root   383336 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\n-rwxrwxrwx 1 root root   720192 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart_static.a\n-rwxrwxrwx 1 root root 61272736 Jul 31 21:45 /usr/local/cuda-7.5/lib64/libcudnn.so\n-rwxrwxrwx 1 root root 61272736 Jul 31 21:45 /usr/local/cuda-7.5/lib64/libcudnn.so.4\n-rwxrwxrwx 1 root root 61272736 Jul 31 21:45 /usr/local/cuda-7.5/lib64/libcudnn.so.4.0.4\n\npip package installed from:\nexport TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.10.0rc0-cp27-none-linux_x86_64.whl\n\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\n0.10.0rc0\n\nThe problem:\nI'm trying out the seq2seq tutorial on natural language translation.\nThe documentation of seq2seq.py\nmentions that the output consists of per bucket output with each bucket containing tensors of shape\n\"batch_size x num_decoder_symbols\". This seems to be incorrect because when i print the tensorflow sizes inside the function, they turn out to be (?, 1024). In other words, (batch_size, layer_size). I think either the documentation or the code is wrong, and there is certainly a mismatch. I'm wondering which is the case?\nSteps to reproduce\n\nInstall Tensorflow\nClone this repo\nedit \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/seq2seq.py\"\nto include the following print statement after this line\n\nprint(bucket_outputs[0].get_shape())\n\nWhat have you tried?\n\nFiled this bug.", "body": "### Environment info\n\nOperating System: Ubuntu 14.04\n\nInstalled version of CUDA and cuDNN: \nCuda 7.5 and CuDNN v4\nOutput of ls -l /path/to/cuda/lib/cuda*:\n\n```\n-rwxrwxrwx 1 root root   322936 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxrwxrwx 1 root root   383336 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\n-rwxrwxrwx 1 root root   720192 Aug 15  2015 /usr/local/cuda-7.5/lib64/libcudart_static.a\n-rwxrwxrwx 1 root root 61272736 Jul 31 21:45 /usr/local/cuda-7.5/lib64/libcudnn.so\n-rwxrwxrwx 1 root root 61272736 Jul 31 21:45 /usr/local/cuda-7.5/lib64/libcudnn.so.4\n-rwxrwxrwx 1 root root 61272736 Jul 31 21:45 /usr/local/cuda-7.5/lib64/libcudnn.so.4.0.4\n```\n\npip package installed from:\n\n```\nexport TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.10.0rc0-cp27-none-linux_x86_64.whl\n```\n\nThe output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n\n```\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\n0.10.0rc0\n```\n\nThe problem:\nI'm trying out the seq2seq tutorial on natural language translation. \nThe documentation of [seq2seq.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/seq2seq.py#L1086)\nmentions that the output consists of per bucket output with each bucket containing tensors of shape \n\"batch_size x num_decoder_symbols\". This seems to be incorrect because when i print the tensorflow sizes inside the function, they turn out to be (?, 1024). In other words, (batch_size, layer_size). I think either the documentation or the code is wrong, and there is certainly a mismatch. I'm wondering which is the case?\n### Steps to reproduce\n1. Install Tensorflow\n2. Clone this repo\n3. edit \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/seq2seq.py\"\n   to include the following print statement after [this line](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/seq2seq.py#L1113)\n\n```\nprint(bucket_outputs[0].get_shape())\n```\n### What have you tried?\n1. Filed this bug.\n"}
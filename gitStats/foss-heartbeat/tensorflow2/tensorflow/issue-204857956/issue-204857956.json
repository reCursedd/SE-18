{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7217", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7217/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7217/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7217/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7217", "id": 204857956, "node_id": "MDU6SXNzdWUyMDQ4NTc5NTY=", "number": 7217, "title": "Error while creating quantized graph using bazel tool", "user": {"login": "panky8070", "id": 6246080, "node_id": "MDQ6VXNlcjYyNDYwODA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6246080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/panky8070", "html_url": "https://github.com/panky8070", "followers_url": "https://api.github.com/users/panky8070/followers", "following_url": "https://api.github.com/users/panky8070/following{/other_user}", "gists_url": "https://api.github.com/users/panky8070/gists{/gist_id}", "starred_url": "https://api.github.com/users/panky8070/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/panky8070/subscriptions", "organizations_url": "https://api.github.com/users/panky8070/orgs", "repos_url": "https://api.github.com/users/panky8070/repos", "events_url": "https://api.github.com/users/panky8070/events{/privacy}", "received_events_url": "https://api.github.com/users/panky8070/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-02-02T12:20:08Z", "updated_at": "2017-07-21T16:13:03Z", "closed_at": "2017-06-16T21:03:06Z", "author_association": "NONE", "body_html": "<p>Hi,<br>\nI am trying to quantize the already stripped and retrained inception graph using the following bazel commands, also I am using docker environment in ubuntu 16.10:</p>\n<p>bazel build tensorflow/contrib/quantization/tools:quantize_graph<br>\nbazel-bin/tensorflow/contrib/quantization/tools/quantize_graph \\<br>\n--input=/face_tf_train/new_retrained_graph.pb <br>\n--output_node_names=final_result <br>\n--output=/face_tf_train/new_stripped_quantized_graph.pb <br>\n--mode=eightbit<br>\nI am bit new in python and tensorflow, I am not sure what is happening. I want to use the quantized graph for ios mobile app which I am able to compile and run.<br>\nAny help could be very much appriciated.</p>\n<p>I am getting folowing error in the command promt :<br>\nroot@f098a9662116:/tensorflow# bazel build tensorflow/contrib/quantization/tools:quantize_graph<br>\nINFO: Reading 'startup' options from /root/.bazelrc: --batch<br>\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See <a href=\"http://bazel.io/docs/bazel-user-manual.html#sandboxing\" rel=\"nofollow\">http://bazel.io/docs/bazel-user-manual.html#sandboxing</a> for more information. You can turn off this warning via --ignore_unsupported_sandboxing.<br>\nINFO: Found 1 target...<br>\nTarget //tensorflow/contrib/quantization/tools:quantize_graph up-to-date:<br>\nbazel-bin/tensorflow/contrib/quantization/tools/quantize_graph<br>\nINFO: Elapsed time: 37.731s, Critical Path: 24.75s<br>\nroot@f098a9662116:/tensorflow# bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph \\<br>\nTraceback (most recent call last):<br>\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/contrib/quantization/tools/quantize_graph.py\", line 1003, in <br>\ntf.app.run()<br>\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 30, in run<br>\nsys.exit(main(sys.argv[:1] + flags_passthrough))<br>\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/contrib/quantization/tools/quantize_graph.py\", line 985, in main<br>\ndata = f.read()<br>\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/python/lib/io/file_io.py\", line 101, in read<br>\ncompat.as_bytes(self.__name), status)<br>\nFile \"/usr/lib/python2.7/contextlib.py\", line 24, in <strong>exit</strong><br>\nself.gen.next()<br>\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/python/framework/errors.py\", line 463, in raise_exception_on_not_ok_status<br>\npywrap_tensorflow.TF_GetCode(status))<br>\ntensorflow.python.framework.errors.FailedPreconditionError: .</p>\n<p>Regards,<br>\nPankaj Wasnik</p>", "body_text": "Hi,\nI am trying to quantize the already stripped and retrained inception graph using the following bazel commands, also I am using docker environment in ubuntu 16.10:\nbazel build tensorflow/contrib/quantization/tools:quantize_graph\nbazel-bin/tensorflow/contrib/quantization/tools/quantize_graph \\\n--input=/face_tf_train/new_retrained_graph.pb \n--output_node_names=final_result \n--output=/face_tf_train/new_stripped_quantized_graph.pb \n--mode=eightbit\nI am bit new in python and tensorflow, I am not sure what is happening. I want to use the quantized graph for ios mobile app which I am able to compile and run.\nAny help could be very much appriciated.\nI am getting folowing error in the command promt :\nroot@f098a9662116:/tensorflow# bazel build tensorflow/contrib/quantization/tools:quantize_graph\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.io/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\nINFO: Found 1 target...\nTarget //tensorflow/contrib/quantization/tools:quantize_graph up-to-date:\nbazel-bin/tensorflow/contrib/quantization/tools/quantize_graph\nINFO: Elapsed time: 37.731s, Critical Path: 24.75s\nroot@f098a9662116:/tensorflow# bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph \\\nTraceback (most recent call last):\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/contrib/quantization/tools/quantize_graph.py\", line 1003, in \ntf.app.run()\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 30, in run\nsys.exit(main(sys.argv[:1] + flags_passthrough))\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/contrib/quantization/tools/quantize_graph.py\", line 985, in main\ndata = f.read()\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/python/lib/io/file_io.py\", line 101, in read\ncompat.as_bytes(self.__name), status)\nFile \"/usr/lib/python2.7/contextlib.py\", line 24, in exit\nself.gen.next()\nFile \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/python/framework/errors.py\", line 463, in raise_exception_on_not_ok_status\npywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors.FailedPreconditionError: .\nRegards,\nPankaj Wasnik", "body": "Hi, \r\nI am trying to quantize the already stripped and retrained inception graph using the following bazel commands, also I am using docker environment in ubuntu 16.10:\r\n\r\nbazel build tensorflow/contrib/quantization/tools:quantize_graph\r\nbazel-bin/tensorflow/contrib/quantization/tools/quantize_graph \\    \r\n  --input=/face_tf_train/new_retrained_graph.pb \\\r\n  --output_node_names=final_result \\\r\n  --output=/face_tf_train/new_stripped_quantized_graph.pb \\\r\n  --mode=eightbit  \r\nI am bit new in python and tensorflow, I am not sure what is happening. I want to use the quantized graph for ios mobile app which I am able to compile and run. \r\nAny help could be very much appriciated. \r\n\r\nI am getting folowing error in the command promt : \r\nroot@f098a9662116:/tensorflow# bazel build tensorflow/contrib/quantization/tools:quantize_graph\r\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\r\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.io/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\r\nINFO: Found 1 target...\r\nTarget //tensorflow/contrib/quantization/tools:quantize_graph up-to-date:\r\n  bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph\r\nINFO: Elapsed time: 37.731s, Critical Path: 24.75s\r\nroot@f098a9662116:/tensorflow# bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph \\    \r\nTraceback (most recent call last):\r\n  File \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/contrib/quantization/tools/quantize_graph.py\", line 1003, in <module>\r\n    tf.app.run()\r\n  File \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 30, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/contrib/quantization/tools/quantize_graph.py\", line 985, in main\r\n    data = f.read()\r\n  File \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/python/lib/io/file_io.py\", line 101, in read\r\n    compat.as_bytes(self.__name), status)\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\r\n    self.gen.next()\r\n  File \"/tensorflow/bazel-bin/tensorflow/contrib/quantization/tools/quantize_graph.runfiles/org_tensorflow/tensorflow/python/framework/errors.py\", line 463, in raise_exception_on_not_ok_status\r\n    pywrap_tensorflow.TF_GetCode(status))\r\ntensorflow.python.framework.errors.FailedPreconditionError: .\r\n\r\n\r\nRegards,\r\nPankaj Wasnik\r\n"}
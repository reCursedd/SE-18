{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20206", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20206/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20206/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20206/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20206", "id": 334696018, "node_id": "MDU6SXNzdWUzMzQ2OTYwMTg=", "number": 20206, "title": "Reproducing the exact tensorflow_inception_v3_stripped_optimized_quantized.pb file", "user": {"login": "amirjamez", "id": 8922398, "node_id": "MDQ6VXNlcjg5MjIzOTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/8922398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amirjamez", "html_url": "https://github.com/amirjamez", "followers_url": "https://api.github.com/users/amirjamez/followers", "following_url": "https://api.github.com/users/amirjamez/following{/other_user}", "gists_url": "https://api.github.com/users/amirjamez/gists{/gist_id}", "starred_url": "https://api.github.com/users/amirjamez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amirjamez/subscriptions", "organizations_url": "https://api.github.com/users/amirjamez/orgs", "repos_url": "https://api.github.com/users/amirjamez/repos", "events_url": "https://api.github.com/users/amirjamez/events{/privacy}", "received_events_url": "https://api.github.com/users/amirjamez/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-06-21T23:38:17Z", "updated_at": "2018-07-17T20:32:02Z", "closed_at": "2018-07-17T20:32:01Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: 14:04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: r1.9</li>\n<li><strong>Python version</strong>:  2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.13</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: 4.8</li>\n<li><strong>CUDA/cuDNN version</strong>: 7/6</li>\n<li><strong>GPU model and memory</strong>: 1060</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>Inspecting the available quantized/frozen model of inception-v3 to be used with HVX (<code>tensorflow_inception_v3_stripped_optimized_quantized.pb</code>), I see that the spatial_squeeze and some other operations are removed (stripped) and the input and output layers are 'Mul' and 'Softmax' (as they are not defined in nnlib). I tried to reproduce this graph using a pretrained model of my own, but still, end up with spatial_squeeze and thus, it fails to execute on HVX. Also, my input and output layers are called <code>input</code> and <code>InceptionV3/Predictions/Reshape_1</code>.</p>\n<p>Could you provide the steps to reproduce the exact <code>tensorflow_inception_v3_stripped_optimized_quantized.pb</code> using the <code>graph_transform</code>/<code>Optimize_for_inference</code>/<code>Quantize_graph</code> tools, so others can follow these steps to build their own model for HVX? Thanks, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20085789\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/satok16\">@satok16</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=161459\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/petewarden\">@petewarden</a></p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): 14:04\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): r1.9\nPython version:  2.7\nBazel version (if compiling from source): 0.13\nGCC/Compiler version (if compiling from source): 4.8\nCUDA/cuDNN version: 7/6\nGPU model and memory: 1060\nExact command to reproduce:\n\nInspecting the available quantized/frozen model of inception-v3 to be used with HVX (tensorflow_inception_v3_stripped_optimized_quantized.pb), I see that the spatial_squeeze and some other operations are removed (stripped) and the input and output layers are 'Mul' and 'Softmax' (as they are not defined in nnlib). I tried to reproduce this graph using a pretrained model of my own, but still, end up with spatial_squeeze and thus, it fails to execute on HVX. Also, my input and output layers are called input and InceptionV3/Predictions/Reshape_1.\nCould you provide the steps to reproduce the exact tensorflow_inception_v3_stripped_optimized_quantized.pb using the graph_transform/Optimize_for_inference/Quantize_graph tools, so others can follow these steps to build their own model for HVX? Thanks, @satok16 @petewarden", "body": "\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: 14:04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: r1.9\r\n- **Python version**:  2.7\r\n- **Bazel version (if compiling from source)**: 0.13\r\n- **GCC/Compiler version (if compiling from source)**: 4.8\r\n- **CUDA/cuDNN version**: 7/6\r\n- **GPU model and memory**: 1060\r\n- **Exact command to reproduce**:\r\n\r\nInspecting the available quantized/frozen model of inception-v3 to be used with HVX (`tensorflow_inception_v3_stripped_optimized_quantized.pb`), I see that the spatial_squeeze and some other operations are removed (stripped) and the input and output layers are 'Mul' and 'Softmax' (as they are not defined in nnlib). I tried to reproduce this graph using a pretrained model of my own, but still, end up with spatial_squeeze and thus, it fails to execute on HVX. Also, my input and output layers are called `input` and `InceptionV3/Predictions/Reshape_1`. \r\n\r\nCould you provide the steps to reproduce the exact `tensorflow_inception_v3_stripped_optimized_quantized.pb` using the `graph_transform`/`Optimize_for_inference`/`Quantize_graph` tools, so others can follow these steps to build their own model for HVX? Thanks, @satok16 @petewarden "}
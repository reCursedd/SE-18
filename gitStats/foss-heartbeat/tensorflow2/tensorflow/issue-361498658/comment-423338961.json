{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/423338961", "html_url": "https://github.com/tensorflow/tensorflow/issues/22361#issuecomment-423338961", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22361", "id": 423338961, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzMzODk2MQ==", "user": {"login": "joe-antognini", "id": 7061933, "node_id": "MDQ6VXNlcjcwNjE5MzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/7061933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joe-antognini", "html_url": "https://github.com/joe-antognini", "followers_url": "https://api.github.com/users/joe-antognini/followers", "following_url": "https://api.github.com/users/joe-antognini/following{/other_user}", "gists_url": "https://api.github.com/users/joe-antognini/gists{/gist_id}", "starred_url": "https://api.github.com/users/joe-antognini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joe-antognini/subscriptions", "organizations_url": "https://api.github.com/users/joe-antognini/orgs", "repos_url": "https://api.github.com/users/joe-antognini/repos", "events_url": "https://api.github.com/users/joe-antognini/events{/privacy}", "received_events_url": "https://api.github.com/users/joe-antognini/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-20T21:26:31Z", "updated_at": "2018-09-20T21:26:31Z", "author_association": "NONE", "body_html": "<p>Ah, that would explain it then.  Sorry, I should have included that explicitly:</p>\n<pre><code># Create and quantize a graph with 2d convolution.\nX = tf.placeholder(tf.float32, [None, 28, 28, 1])\nconv = tf.layers.conv2d(X, 64, 3, padding='same', activation=tf.nn.relu)\ntf.contrib.quantize.create_eval_graph()\nquantized = len([n.name for n in tf.get_default_graph().as_graph_def().node if 'quant' in n.name]) &gt; 0\nprint('Quantization succeeded:', quantized)\n\ntf.reset_default_graph()\n\n# Create and quantize a graph with 1d convolution.\nX = tf.placeholder(tf.float32, [None, 28, 1])\nconv = tf.layers.conv1d(X, 64, 3, padding='same', activation=tf.nn.relu)\ntf.contrib.quantize.create_eval_graph()\nquantized = len([n.name for n in tf.get_default_graph().as_graph_def().node if 'quant' in n.name]) &gt; 0\nprint('Quantization succeeded:', quantized)\n</code></pre>", "body_text": "Ah, that would explain it then.  Sorry, I should have included that explicitly:\n# Create and quantize a graph with 2d convolution.\nX = tf.placeholder(tf.float32, [None, 28, 28, 1])\nconv = tf.layers.conv2d(X, 64, 3, padding='same', activation=tf.nn.relu)\ntf.contrib.quantize.create_eval_graph()\nquantized = len([n.name for n in tf.get_default_graph().as_graph_def().node if 'quant' in n.name]) > 0\nprint('Quantization succeeded:', quantized)\n\ntf.reset_default_graph()\n\n# Create and quantize a graph with 1d convolution.\nX = tf.placeholder(tf.float32, [None, 28, 1])\nconv = tf.layers.conv1d(X, 64, 3, padding='same', activation=tf.nn.relu)\ntf.contrib.quantize.create_eval_graph()\nquantized = len([n.name for n in tf.get_default_graph().as_graph_def().node if 'quant' in n.name]) > 0\nprint('Quantization succeeded:', quantized)", "body": "Ah, that would explain it then.  Sorry, I should have included that explicitly:\r\n\r\n```\r\n# Create and quantize a graph with 2d convolution.\r\nX = tf.placeholder(tf.float32, [None, 28, 28, 1])\r\nconv = tf.layers.conv2d(X, 64, 3, padding='same', activation=tf.nn.relu)\r\ntf.contrib.quantize.create_eval_graph()\r\nquantized = len([n.name for n in tf.get_default_graph().as_graph_def().node if 'quant' in n.name]) > 0\r\nprint('Quantization succeeded:', quantized)\r\n\r\ntf.reset_default_graph()\r\n\r\n# Create and quantize a graph with 1d convolution.\r\nX = tf.placeholder(tf.float32, [None, 28, 1])\r\nconv = tf.layers.conv1d(X, 64, 3, padding='same', activation=tf.nn.relu)\r\ntf.contrib.quantize.create_eval_graph()\r\nquantized = len([n.name for n in tf.get_default_graph().as_graph_def().node if 'quant' in n.name]) > 0\r\nprint('Quantization succeeded:', quantized)\r\n```"}
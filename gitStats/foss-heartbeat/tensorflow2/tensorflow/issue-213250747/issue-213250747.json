{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8264", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8264/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8264/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8264/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8264", "id": 213250747, "node_id": "MDU6SXNzdWUyMTMyNTA3NDc=", "number": 8264, "title": "Auto-Configuration Error: Cannot find cudnn.h at /usr/lib/x86_64-linux-gnu/include/cudnn.h", "user": {"login": "byzhang", "id": 872149, "node_id": "MDQ6VXNlcjg3MjE0OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/872149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/byzhang", "html_url": "https://github.com/byzhang", "followers_url": "https://api.github.com/users/byzhang/followers", "following_url": "https://api.github.com/users/byzhang/following{/other_user}", "gists_url": "https://api.github.com/users/byzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/byzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/byzhang/subscriptions", "organizations_url": "https://api.github.com/users/byzhang/orgs", "repos_url": "https://api.github.com/users/byzhang/repos", "events_url": "https://api.github.com/users/byzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/byzhang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2017-03-10T05:47:45Z", "updated_at": "2018-02-08T01:00:55Z", "closed_at": "2018-02-08T01:00:55Z", "author_association": "NONE", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"177218394\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4397\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4397/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4397\">#4397</a>, but it's for 16.04</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04<br>\nInstalled version of CUDA and cuDNN: 8.0, 5.1<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<pre><code>ls -l /path/to/cuda/lib/libcud*\n-rw-r--r-- 1 root 543K Jan 26 15:48 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root   16 Jan 26 15:51 /usr/local/cuda/lib64/libcudart.so -&gt; libcudart.so.8.0\nlrwxrwxrwx 1 root   19 Jan 26 15:51 /usr/local/cuda/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.61\n-rw-r--r-- 1 root 406K Jan 26 15:48 /usr/local/cuda/lib64/libcudart.so.8.0.61\n-rw-r--r-- 1 root 757K Jan 26 15:48 /usr/local/cuda/lib64/libcudart_static.a\n</code></pre>\n<pre><code>ll /usr/lib/x86_64-linux-gnu/libcudnn*                                                                                                                                                                \nlrwxrwxrwx 1 root  29 Mar  1 11:58 /usr/lib/x86_64-linux-gnu/libcudnn.so -&gt; /etc/alternatives/libcudnn_so\nlrwxrwxrwx 1 root  18 Nov  6 23:19 /usr/lib/x86_64-linux-gnu/libcudnn.so.5 -&gt; libcudnn.so.5.1.10\n-rw-r--r-- 1 root 81M Nov  6 23:19 /usr/lib/x86_64-linux-gnu/libcudnn.so.5.1.10\nlrwxrwxrwx 1 root  32 Mar  1 11:58 /usr/lib/x86_64-linux-gnu/libcudnn_static.a -&gt; /etc/alternatives/libcudnn_stlib\n-rw-r--r-- 1 root 68M Nov  6 23:19 /usr/lib/x86_64-linux-gnu/libcudnn_static_v5.a\n</code></pre>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>): <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/e895d5ca395c2362df4f5c8f08b68501b41f8a98/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/e895d5ca395c2362df4f5c8f08b68501b41f8a98\"><tt>e895d5c</tt></a></li>\n<li>The output of <code>bazel version</code>:</li>\n</ol>\n<pre><code>INFO: Reading 'startup' options from /root/.bazelrc: --batch\nBuild label: 0.4.2\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Dec 7 18:47:11 2016 (1481136431)\nBuild timestamp: 1481136431\nBuild timestamp as int: 1481136431\n</code></pre>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>I ran</p>\n<pre><code>./configure\n</code></pre>\n<p>It failed with</p>\n<pre><code>INFO: Reading 'startup' options from /root/.bazelrc: --batch\nINFO: Starting clean (this may take a while). Consider using --expunge_async if the clean takes more than several minutes.\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\nERROR: package contains errors: tensorflow/compiler/tests.\nERROR: error loading package 'tensorflow/compiler/tests': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 816\n                _create_cuda_repository(repository_ctx)\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 729, in _create_cuda_repository\n                _get_cuda_config(repository_ctx)\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 585, in _get_cuda_config\n                _cudnn_version(repository_ctx, cudnn_install_base..., ...)\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 296, in _cudnn_version\n                _find_cuda_define(repository_ctx, cudnn_install_base..., ...)\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 271, in _find_cuda_define\n                auto_configure_fail(\"Cannot find cudnn.h at %s\" % st...))\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 93, in auto_configure_fail\n                fail(\"\n%sAuto-Configuration Error:%s ...))\n\nAuto-Configuration Error: Cannot find cudnn.h at /usr/lib/x86_64-linux-gnu/include/cudnn.h\n</code></pre>\n<p>I noticed the cudnn.h is in /usr/include/cudnn.h somehow, while its libs are in /usr/lib/x86_64-linux-gnu/.</p>\n<p>I read cuda_configure.bzl, but didn't find an easy way to let it find both cudnn headers and libs.</p>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n#4397, but it's for 16.04\nEnvironment info\nOperating System: Ubuntu 14.04\nInstalled version of CUDA and cuDNN: 8.0, 5.1\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\nls -l /path/to/cuda/lib/libcud*\n-rw-r--r-- 1 root 543K Jan 26 15:48 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root   16 Jan 26 15:51 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root   19 Jan 26 15:51 /usr/local/cuda/lib64/libcudart.so.8.0 -> libcudart.so.8.0.61\n-rw-r--r-- 1 root 406K Jan 26 15:48 /usr/local/cuda/lib64/libcudart.so.8.0.61\n-rw-r--r-- 1 root 757K Jan 26 15:48 /usr/local/cuda/lib64/libcudart_static.a\n\nll /usr/lib/x86_64-linux-gnu/libcudnn*                                                                                                                                                                \nlrwxrwxrwx 1 root  29 Mar  1 11:58 /usr/lib/x86_64-linux-gnu/libcudnn.so -> /etc/alternatives/libcudnn_so\nlrwxrwxrwx 1 root  18 Nov  6 23:19 /usr/lib/x86_64-linux-gnu/libcudnn.so.5 -> libcudnn.so.5.1.10\n-rw-r--r-- 1 root 81M Nov  6 23:19 /usr/lib/x86_64-linux-gnu/libcudnn.so.5.1.10\nlrwxrwxrwx 1 root  32 Mar  1 11:58 /usr/lib/x86_64-linux-gnu/libcudnn_static.a -> /etc/alternatives/libcudnn_stlib\n-rw-r--r-- 1 root 68M Nov  6 23:19 /usr/lib/x86_64-linux-gnu/libcudnn_static_v5.a\n\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD): e895d5c\nThe output of bazel version:\n\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\nBuild label: 0.4.2\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Dec 7 18:47:11 2016 (1481136431)\nBuild timestamp: 1481136431\nBuild timestamp as int: 1481136431\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nI ran\n./configure\n\nIt failed with\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\nINFO: Starting clean (this may take a while). Consider using --expunge_async if the clean takes more than several minutes.\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\nERROR: package contains errors: tensorflow/compiler/tests.\nERROR: error loading package 'tensorflow/compiler/tests': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 816\n                _create_cuda_repository(repository_ctx)\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 729, in _create_cuda_repository\n                _get_cuda_config(repository_ctx)\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 585, in _get_cuda_config\n                _cudnn_version(repository_ctx, cudnn_install_base..., ...)\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 296, in _cudnn_version\n                _find_cuda_define(repository_ctx, cudnn_install_base..., ...)\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 271, in _find_cuda_define\n                auto_configure_fail(\"Cannot find cudnn.h at %s\" % st...))\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 93, in auto_configure_fail\n                fail(\"\n%sAuto-Configuration Error:%s ...))\n\nAuto-Configuration Error: Cannot find cudnn.h at /usr/lib/x86_64-linux-gnu/include/cudnn.h\n\nI noticed the cudnn.h is in /usr/include/cudnn.h somehow, while its libs are in /usr/lib/x86_64-linux-gnu/.\nI read cuda_configure.bzl, but didn't find an easy way to let it find both cudnn headers and libs.", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n#4397, but it's for 16.04\r\n\r\n### Environment info\r\nOperating System: Ubuntu 14.04\r\nInstalled version of CUDA and cuDNN: 8.0, 5.1\r\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\r\n```\r\nls -l /path/to/cuda/lib/libcud*\r\n-rw-r--r-- 1 root 543K Jan 26 15:48 /usr/local/cuda/lib64/libcudadevrt.a\r\nlrwxrwxrwx 1 root   16 Jan 26 15:51 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.8.0\r\nlrwxrwxrwx 1 root   19 Jan 26 15:51 /usr/local/cuda/lib64/libcudart.so.8.0 -> libcudart.so.8.0.61\r\n-rw-r--r-- 1 root 406K Jan 26 15:48 /usr/local/cuda/lib64/libcudart.so.8.0.61\r\n-rw-r--r-- 1 root 757K Jan 26 15:48 /usr/local/cuda/lib64/libcudart_static.a\r\n```\r\n```\r\nll /usr/lib/x86_64-linux-gnu/libcudnn*                                                                                                                                                                \r\nlrwxrwxrwx 1 root  29 Mar  1 11:58 /usr/lib/x86_64-linux-gnu/libcudnn.so -> /etc/alternatives/libcudnn_so\r\nlrwxrwxrwx 1 root  18 Nov  6 23:19 /usr/lib/x86_64-linux-gnu/libcudnn.so.5 -> libcudnn.so.5.1.10\r\n-rw-r--r-- 1 root 81M Nov  6 23:19 /usr/lib/x86_64-linux-gnu/libcudnn.so.5.1.10\r\nlrwxrwxrwx 1 root  32 Mar  1 11:58 /usr/lib/x86_64-linux-gnu/libcudnn_static.a -> /etc/alternatives/libcudnn_stlib\r\n-rw-r--r-- 1 root 68M Nov  6 23:19 /usr/lib/x86_64-linux-gnu/libcudnn_static_v5.a\r\n```\r\n\r\nIf installed from source, provide \r\n\r\n1. The commit hash (`git rev-parse HEAD`): e895d5ca395c2362df4f5c8f08b68501b41f8a98\r\n2. The output of `bazel version`: \r\n```\r\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\r\nBuild label: 0.4.2\r\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed Dec 7 18:47:11 2016 (1481136431)\r\nBuild timestamp: 1481136431\r\nBuild timestamp as int: 1481136431\r\n```\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\nI ran\r\n```\r\n./configure\r\n```\r\nIt failed with\r\n```\r\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\r\nINFO: Starting clean (this may take a while). Consider using --expunge_async if the clean takes more than several minutes.\r\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\r\nERROR: package contains errors: tensorflow/compiler/tests.\r\nERROR: error loading package 'tensorflow/compiler/tests': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\r\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 816\r\n                _create_cuda_repository(repository_ctx)\r\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 729, in _create_cuda_repository\r\n                _get_cuda_config(repository_ctx)\r\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 585, in _get_cuda_config\r\n                _cudnn_version(repository_ctx, cudnn_install_base..., ...)\r\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 296, in _cudnn_version\r\n                _find_cuda_define(repository_ctx, cudnn_install_base..., ...)\r\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 271, in _find_cuda_define\r\n                auto_configure_fail(\"Cannot find cudnn.h at %s\" % st...))\r\n        File \"/tensorflow/third_party/gpus/cuda_configure.bzl\", line 93, in auto_configure_fail\r\n                fail(\"\r\n%sAuto-Configuration Error:%s ...))\r\n\r\nAuto-Configuration Error: Cannot find cudnn.h at /usr/lib/x86_64-linux-gnu/include/cudnn.h\r\n```\r\n\r\nI noticed the cudnn.h is in /usr/include/cudnn.h somehow, while its libs are in /usr/lib/x86_64-linux-gnu/.\r\n\r\nI read cuda_configure.bzl, but didn't find an easy way to let it find both cudnn headers and libs.\r\n"}
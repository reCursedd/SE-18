{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/387933935", "html_url": "https://github.com/tensorflow/tensorflow/issues/3126#issuecomment-387933935", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3126", "id": 387933935, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzkzMzkzNQ==", "user": {"login": "xiaowenhe", "id": 28335784, "node_id": "MDQ6VXNlcjI4MzM1Nzg0", "avatar_url": "https://avatars3.githubusercontent.com/u/28335784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaowenhe", "html_url": "https://github.com/xiaowenhe", "followers_url": "https://api.github.com/users/xiaowenhe/followers", "following_url": "https://api.github.com/users/xiaowenhe/following{/other_user}", "gists_url": "https://api.github.com/users/xiaowenhe/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaowenhe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaowenhe/subscriptions", "organizations_url": "https://api.github.com/users/xiaowenhe/orgs", "repos_url": "https://api.github.com/users/xiaowenhe/repos", "events_url": "https://api.github.com/users/xiaowenhe/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaowenhe/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-10T02:36:02Z", "updated_at": "2018-05-10T02:36:02Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6189571\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dzhyeon\">@dzhyeon</a> , I also come this problem now. I build the tensorflow using bazel build -c opt --config=cuda , but I still cannot slove this problem. Can you help me?</p>\n<p>I do like;<br>\n1   ./configure.  I choose CUDA support, and cuda 9.1 and cudnn 7 is used.<br>\n2   bazel .   bazel build -c opt --config=cuda //tensorlfow:libtensorflow_cc.so.<br>\nAt last ,complete sucessfully.</p>\n<p>My code like:</p>\n<p>#include &lt;tensorflow/core/protobuf/meta_graph.pb.h&gt;<br>\n#include &lt;tensorflow/core/public/session.h&gt;<br>\n#include &lt;tensorflow/core/graph/default_device.h&gt;<br>\n#include &lt;tensorflow/core/graph/graph_def_builder.h&gt;</p>\n<p>tensorflow::GraphDef GraphDef;<br>\ntensorflow::Session* Session = nullptr;</p>\n<p>1 void LoadGraph()<br>\n2 {<br>\n3       // Read in the protobuf graph we exported<br>\n4        tensorflow::Status Status;<br>\n5<br>\n6         Status = tensorflow::ReadBinaryProto(tensorflow::Env::Default(), \"my_model.pb\", &amp;GraphDef);<br>\n7 if (!Status.ok())<br>\n8 {<br>\n9         printf(\"Error reading graph definition from %s: %s\\n\", \"my_model.pb\", Status.ToString().c_str());<br>\n10        return false;<br>\n11 }<br>\n12<br>\n13         Session = tensorflow::NewSession(tensorflow::SessionOptions());<br>\n14 if (Session == nullptr)<br>\n15 {<br>\n16         printf(\"Could not create Tensorflow session.\\n\");<br>\n17         return false;<br>\n18 }<br>\n19<br>\n20 graph::SetDefaultDevice(\"/device:GPU:0\",&amp;GraphDef); ///////// I add , for use GPU</p>\n<p>21 // Add the graph to the session<br>\n22 Status = Session-&gt;Create(GraphDef);<br>\n23 if (!Status.ok())<br>\n24 {<br>\n25        printf(\"Error creating graph: %s\\n\", Status.ToString().c_str());<br>\n26        return false;<br>\n27 }<br>\n28 }</p>\n<p>But the code will be get an error.  Segmentation fault(core dumped)..I do not know how to deal with it.</p>\n<p>when I do ldd libtensorflow_cc.so, the result like :<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/28335784/39849233-d4ddbabc-543d-11e8-8793-78989d1e54ac.png\"><img src=\"https://user-images.githubusercontent.com/28335784/39849233-d4ddbabc-543d-11e8-8793-78989d1e54ac.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>", "body_text": "@dzhyeon , I also come this problem now. I build the tensorflow using bazel build -c opt --config=cuda , but I still cannot slove this problem. Can you help me?\nI do like;\n1   ./configure.  I choose CUDA support, and cuda 9.1 and cudnn 7 is used.\n2   bazel .   bazel build -c opt --config=cuda //tensorlfow:libtensorflow_cc.so.\nAt last ,complete sucessfully.\nMy code like:\n#include <tensorflow/core/protobuf/meta_graph.pb.h>\n#include <tensorflow/core/public/session.h>\n#include <tensorflow/core/graph/default_device.h>\n#include <tensorflow/core/graph/graph_def_builder.h>\ntensorflow::GraphDef GraphDef;\ntensorflow::Session* Session = nullptr;\n1 void LoadGraph()\n2 {\n3       // Read in the protobuf graph we exported\n4        tensorflow::Status Status;\n5\n6         Status = tensorflow::ReadBinaryProto(tensorflow::Env::Default(), \"my_model.pb\", &GraphDef);\n7 if (!Status.ok())\n8 {\n9         printf(\"Error reading graph definition from %s: %s\\n\", \"my_model.pb\", Status.ToString().c_str());\n10        return false;\n11 }\n12\n13         Session = tensorflow::NewSession(tensorflow::SessionOptions());\n14 if (Session == nullptr)\n15 {\n16         printf(\"Could not create Tensorflow session.\\n\");\n17         return false;\n18 }\n19\n20 graph::SetDefaultDevice(\"/device:GPU:0\",&GraphDef); ///////// I add , for use GPU\n21 // Add the graph to the session\n22 Status = Session->Create(GraphDef);\n23 if (!Status.ok())\n24 {\n25        printf(\"Error creating graph: %s\\n\", Status.ToString().c_str());\n26        return false;\n27 }\n28 }\nBut the code will be get an error.  Segmentation fault(core dumped)..I do not know how to deal with it.\nwhen I do ldd libtensorflow_cc.so, the result like :", "body": "@dzhyeon , I also come this problem now. I build the tensorflow using bazel build -c opt --config=cuda , but I still cannot slove this problem. Can you help me?\r\n\r\nI do like;\r\n1   ./configure.  I choose CUDA support, and cuda 9.1 and cudnn 7 is used.\r\n2   bazel .   bazel build -c opt --config=cuda //tensorlfow:libtensorflow_cc.so.\r\nAt last ,complete sucessfully.\r\n\r\nMy code like:\r\n\r\n#include <tensorflow/core/protobuf/meta_graph.pb.h>\r\n#include <tensorflow/core/public/session.h>\r\n#include <tensorflow/core/graph/default_device.h>\r\n#include <tensorflow/core/graph/graph_def_builder.h>\r\n\r\ntensorflow::GraphDef GraphDef;\r\ntensorflow::Session* Session = nullptr;\r\n\r\n1 void LoadGraph()\r\n2 {\r\n3       // Read in the protobuf graph we exported\r\n4        tensorflow::Status Status;\r\n5\r\n6         Status = tensorflow::ReadBinaryProto(tensorflow::Env::Default(), \"my_model.pb\", &GraphDef);\r\n7 if (!Status.ok())\r\n8 {\r\n9         printf(\"Error reading graph definition from %s: %s\\n\", \"my_model.pb\", Status.ToString().c_str());\r\n10        return false;\r\n11 }\r\n12\r\n13         Session = tensorflow::NewSession(tensorflow::SessionOptions());\r\n14 if (Session == nullptr)\r\n15 {\r\n16         printf(\"Could not create Tensorflow session.\\n\");\r\n17         return false;\r\n18 }\r\n19\r\n20 graph::SetDefaultDevice(\"/device:GPU:0\",&GraphDef); ///////// I add , for use GPU\r\n\r\n21 // Add the graph to the session\r\n22 Status = Session->Create(GraphDef);\r\n23 if (!Status.ok())\r\n24 {\r\n25        printf(\"Error creating graph: %s\\n\", Status.ToString().c_str());\r\n26        return false;\r\n27 }\r\n28 }\r\n\r\nBut the code will be get an error.  Segmentation fault(core dumped)..I do not know how to deal with it.\r\n\r\nwhen I do ldd libtensorflow_cc.so, the result like :\r\n![image](https://user-images.githubusercontent.com/28335784/39849233-d4ddbabc-543d-11e8-8793-78989d1e54ac.png)\r\n\r\n\r\n\r\n\r\n"}
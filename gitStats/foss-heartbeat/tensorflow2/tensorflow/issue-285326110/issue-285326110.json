{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15776", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15776/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15776/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15776/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15776", "id": 285326110, "node_id": "MDU6SXNzdWUyODUzMjYxMTA=", "number": 15776, "title": "Compiler Errors Installing Tensorflow from Source", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2018-01-01T20:06:46Z", "updated_at": "2018-02-08T21:41:17Z", "closed_at": "2018-02-08T21:41:17Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>\n<p><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes</p>\n</li>\n<li>\n<p><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Windows 7 SP1</p>\n</li>\n<li>\n<p><strong>TensorFlow installed from (source or binary)</strong>: Source</p>\n</li>\n<li>\n<p><strong>TensorFlow version (use command below)</strong>: r1.5</p>\n</li>\n<li>\n<p><strong>Python version</strong>: 3.6.4</p>\n</li>\n<li>\n<p><strong>Bazel version (if compiling from source)</strong>: 0.9.0</p>\n</li>\n<li>\n<p><strong>GCC/Compiler version (if compiling from source)</strong>: 6.4.0</p>\n</li>\n<li>\n<p><strong>CUDA/cuDNN version</strong>: 7.0</p>\n</li>\n<li>\n<p><strong>GPU model and memory</strong>: NVIDIA Quadro K4000</p>\n</li>\n<li>\n<p><strong>Exact command to reproduce</strong>:</p>\n</li>\n</ul>\n<p>bazel build -c opt %BUILD_OPTS% //tensorflow/tools/pip_package:build_pip_package</p>\n<h3>Describe the problem</h3>\n<p>I have tried compiling with MSYS2 and VS2015. I am trying to get VS2015 to work.</p>\n<p>###Using VS2015 and <code>--cpu=x64_windows_msvc --host_cpu=x64_windows_msvc</code> (among other options), I get the following error:</p>\n<pre><code>c:\\Users\\adam.hendry\\Downloads\\tensorflow&gt;bazel build -c opt %BUILD_OPTS% //tens\norflow/tools/pip_package:build_pip_package\n.......................\nLoading:\nLoading: 0 packages loaded\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (1 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (6 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (48 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (81 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (93 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (94 packages\nloaded)\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/core/BUILD:1807:1:\n in includes attribute of cc_library rule //tensorflow/core:framework_headers_li\nb: '../../external/nsync/public' resolves to 'external/nsync/public' not below t\nhe relative path of its package 'tensorflow/core'. This will be an error in the\nfuture. Since this rule was created by the macro 'cc_header_only_library', the e\nrror might have been caused by the macro implementation in C:/users/adam.hendry/\ndownloads/tensorflow/tensorflow/tensorflow.bzl:1138:30\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (116 packages\n loaded)\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (127 pack\nages loaded).\nINFO: Found 1 target...\nBuilding: no action\n[0 / 7] [-----] BazelWorkspaceStatusAction stable-status.txt\nINFO: From Compiling external/zlib_archive/uncompr.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzlib.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/adler32.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzclose.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/compress.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\n[134 / 1,014] Compiling external/zlib_archive/deflate.c [for host]; 1s local ...\n (16 actions, 14 running)\nINFO: From Compiling external/zlib_archive/infback.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling tensorflow/core/lib/hash/crc32c_accelerate.cc [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/highwayhash/highwayhash/arch_specific.cc [for host\n]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/crc32.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inflate.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inftrees.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzread.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzwrite.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/zutil.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inffast.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/trees.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/deflate.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/fft2d/fft/fftsg.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/farmhash_archive/src/farmhash.cc [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling tensorflow/compiler/xla/executable_run_options.cc:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\n[349 / 1,966] Compiling external/protobuf_archive/src/google/protobuf/compiler/j\ns/embed.cc [for host]; 1s local ... (5 actions, 3 running)\nINFO: From Compiling external/farmhash_archive/src/farmhash.cc:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/protobuf_archive/src/google/protobuf/compiler/js/e\nmbed.cc [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling tensorflow/core/grappler/costs/robust_stats.cc:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/lmdb/midl.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\n[643 / 3,343] Compiling external/lmdb/mdb.c; 0s local ... (23 actions, 22 runnin\ng)\nINFO: From Compiling external/zlib_archive/gzread.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/trees.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzclose.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzwrite.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/crc32.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inffast.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inftrees.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/compress.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/uncompr.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/zutil.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzlib.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/infback.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/deflate.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inflate.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/adler32.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/png_archive/pngtrans.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/highwayhash/highwayhash/sip_hash.cc [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/png_archive/pngget.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/png_archive/pngread.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nERROR: C:/users/adam.hendry/downloads/tensorflow/tensorflow/compiler/xla/service\n/cpu/BUILD:772:1: C++ compilation of rule '//tensorflow/compiler/xla/service/cpu\n:custom_call_target_registry' failed (Exit 1): cl.exe failed: error executing co\nmmand\n  cd C:/users/adam.hendry/appdata/local/temp/_bazel_adam.hendry/qoyar4dt/execroo\nt/org_tensorflow\n  SET CUDA_COMPUTE_CAPABILITIE=None\n    SET CUDA_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.1\n    SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.\n1\n    SET CUDNN_INSTALL_PATH=C:/cuda\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C\n:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program\nFiles (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\ucrt;C:\\Program Files (x86)\\Win\ndows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\inclu\nde\\10.0.16299.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299\n.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\winrt;\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\\nProgram Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program\nFiles (x86)\\Windows Kits\\10\\lib\\10.0.16299.0\\ucrt\\x64;C:\\Program Files (x86)\\Win\ndows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\1\n0.0.16299.0\\um\\x64;\n    SET NO_WHOLE_ARCHIVE_OPTION=1\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\Com\nmonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studi\no 14.0\\VC\\BIN\\amd64;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program F\niles (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Mic\nrosoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual St\nudio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team\n Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\n\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\\nProgram Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDK\ns\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\Windows\\system32\n    SET PWD=/proc/self/cwd\n    SET PYTHON_BIN_PATH=C:/Python/Python36/python.exe\n    SET PYTHON_LIB_PATH=C:/Python/Python36/lib/site-packages\n    SET TEMP=C:\\Users\\ADAM~1.HEN\\AppData\\Local\\Temp\n    SET TF_CUDA_CLANG=0\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.0\n    SET TF_CUDA_VERSION=9.1\n    SET TF_CUDNN_VERSION=7\n    SET TF_NEED_CUDA=1\n    SET TF_NEED_OPENCL_SYCL=0\n    SET TMP=C:\\Users\\ADAM~1.HEN\\AppData\\Local\\Temp\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /c ten\nsorflow/compiler/xla/service/cpu/custom_call_target_registry.cc /Fobazel-out/x64\n_windows_msvc-py3-opt/bin/tensorflow/compiler/xla/service/cpu/_objs/custom_call_\ntarget_registry/tensorflow/compiler/xla/service/cpu/custom_call_target_registry.\no /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPR\nECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /big\nobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 -DGEMMLOWP_ALLOW_SLO\nW_SCALAR_FALLBACK -w -march=native -D_GLIBCXX_USE_CXX11_ABI=0 /I. /Ibazel-out/x6\n4_windows_msvc-py3-opt/genfiles /Iexternal/bazel_tools /Ibazel-out/x64_windows_m\nsvc-py3-opt/genfiles/external/bazel_tools /Iexternal/bazel_tools/tools/cpp/gcc3\n/showIncludes /MD /O2 /DNDEBUG\nC:\\users\\adam.hendry\\appdata\\local\\temp\\_bazel_adam.hendry\\qoyar4dt\\execroot\\org\n_tensorflow\\tensorflow\\compiler\\xla\\service\\cpu\\custom_call_target_registry.cc :\n fatal error C1083: Cannot open compiler generated file: '': Invalid argument\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 25.271s, Critical Path: 3.48s\nFAILED: Build did NOT complete successfully\n</code></pre>\n<p>###Using VS2015 and <code>--cpu=x64_windows_msys --host_cpu=x64_windows_msys</code> (among other options), I get this error:</p>\n<pre><code>c:\\Users\\adam.hendry\\Downloads\\tensorflow&gt;bazel build -c opt %BUILD_OPTS% //tens\norflow/tools/pip_package:build_pip_package\n.......................\nLoading:\nLoading: 0 packages loaded\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (1 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (6 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (73 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (131 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (141 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (142 packages\n loaded)\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/core/BUILD:1807:1:\n in includes attribute of cc_library rule //tensorflow/core:framework_headers_li\nb: '../../external/nsync/public' resolves to 'external/nsync/public' not below t\nhe relative path of its package 'tensorflow/core'. This will be an error in the\nfuture. Since this rule was created by the macro 'cc_header_only_library', the e\nrror might have been caused by the macro implementation in C:/users/adam.hendry/\ndownloads/tensorflow/tensorflow/tensorflow.bzl:1138:30\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (157 packages\n loaded)\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/contrib/learn/BUIL\nD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflo\nw/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/sessio\nn_bundle:exporter': No longer supported. Switch to SavedModel immediately.\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/contrib/learn/BUIL\nD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflo\nw/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/sessio\nn_bundle:gc': No longer supported. Switch to SavedModel immediately.\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (254 pack\nages loaded).\nINFO: Found 1 target...\nBuilding: no action\n[0 / 17] [-----] BazelWorkspaceStatusAction stable-status.txt\n[105 / 747] Executing genrule @local_config_cuda//cuda:cuda-lib; 2s local ... (2\n4 actions running)\n[106 / 747] Executing genrule @local_config_cuda//cuda:cuda-lib; 5s local ... (2\n3 actions running)\n[111 / 747] Executing genrule @local_config_cuda//cuda:cuda-lib; 10s local ... (\n24 actions running)\n[113 / 747] Executing genrule //tensorflow/core:version_info_gen [for host]; 13s\n local ... (23 actions running)\n[129 / 968] Executing genrule //tensorflow/core:version_info_gen [for host]; 20s\n local ... (24 actions running)\n[148 / 1,274] Executing genrule //tensorflow/core:version_info_gen [for host]; 3\n1s local ... (24 actions running)\n[149 / 1,275] Executing genrule //tensorflow/core:version_info_gen [for host]; 3\n7s local ... (24 actions running)\n[149 / 1,275] Executing genrule //tensorflow/core:version_info_gen [for host]; 4\n6s local ... (24 actions running)\n[155 / 1,279] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 57s local ... (23 actions running)\n[228 / 1,543] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 68s local ... (24 actions, 23 running)\n[417 / 2,009] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 83s local ... (24 actions, 23 running)\n[437 / 2,009] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 98s local ... (23 actions running)\n[458 / 2,009] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 115s local ... (24 actions, 23 running)\n[523 / 2,096] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 135s local ... (24 actions, 23 running)\nERROR: C:/users/adam.hendry/appdata/local/temp/_bazel_adam.hendry/qoyar4dt/exter\nnal/com_google_absl/absl/base/BUILD.bazel:30:1: C++ compilation of rule '@com_go\nogle_absl//absl/base:spinlock_wait' failed (Exit 1): gcc failed: error executing\n command\n  cd C:/users/adam.hendry/appdata/local/temp/_bazel_adam.hendry/qoyar4dt/execroo\nt/org_tensorflow\n  SET CUDA_COMPUTE_CAPABILITIE=None\n    SET CUDA_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.1\n    SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.\n1\n    SET CUDNN_INSTALL_PATH=C:/cuda\n    SET NO_WHOLE_ARCHIVE_OPTION=1\n    SET PATH=C:\\msys64\\usr\\bin;C:\\msys64\\bin;C:\\Program Files (x86)\\Microsoft Vi\nsual Studio 14.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Fi\nles (x86)\\MSBuild\\14.0\\bin;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\C\nommon7\\IDE\\;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN;C:\\Progra\nm Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Windows\\Microsoft.NE\nT\\Framework\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\VC\nPackages;C:\\Program Files (x86)\\HTML Help Workshop;C:\\Program Files (x86)\\Micros\noft Visual Studio 14.0\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windo\nws Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETF\nX 4.6.1 Tools\\;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\;C:\\Program F\niles (x86)\\Microsoft Visual Studio 14.0\\VC\\;C:\\Program Files (x86)\\Microsoft Vis\nual Studio 14.0\\VC\\bin\\;C:\\Program Files (x86)\\Windows Kits\\10\\;C:\\Python\\Python\n36\\;C:\\Python\\Python36\\Scripts\\;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\G\nit LFS;C:\\Program Files\\CMake\\bin;C:\\Program Files\\Java\\jdk1.8.0_152\\;C:\\Program\nData\\Oracle\\Java\\javapath;C:\\Windows;C:\\Windows\\System32;C:\\Windows\\System32Wbem\n;C:\\Windows\\System32WindowsPowerShell\\v1.0\\;C:\\bazel\\output;C:\\apache-maven-3.3.\n9\\;C:\\apache-maven-3.3.9\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\\nv9.1\\;%CUDNN_PATH%;C:\\Program Files\\ImageMagick-7.0.5-Q16\\;C:\\Program Files (x86\n)\\QuickTime\\QTSystem\\;C:\\Program Files (x86)\\gs\\gs9.21\\bin\\;C:\\cppan\\cppan.exe;C\n:\\Program Files (x86)\\Tesseract-OCR\\;C:\\Program Files\\MiKTeX 2.9\\miktex\\bin\\x64\\\n;C:\\ffmpeg\\bin;C:\\Users\\adam.hendry\\.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\n\\;C:\\Program Files\\HDF_Group\\HDF5\\1.10.1\\bin\\;C:\\Program Files (x86)\\GtkSharp\\2.\n12\\bin;C:\\Program Files (x86)\\gettext-iconv\\lib\\gettext;C:\\Program Files (x86)\\C\nommon Files\\Intel\\Shared Libraries\\redist\\ia32\\mpirt;C:\\Program Files (x86)\\Comm\non Files\\Intel\\Shared Libraries\\redist\\ia32\\compiler;C:\\Program Files\\Common Fil\nes\\Microsoft Shared\\Windows Live;C:\\Program Files (x86)\\Common Files\\Microsoft S\nhared\\Windows Live;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Pro\ngram Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Progr\nam Files (x86)\\Windows Live\\Shared;C:\\Program Files\\Microsoft SQL Server\\130\\Too\nls\\Binn\\;C:\\Intel\\OpenCL\\sdk\\bin\\x64;C:\\Intel\\OpenCL\\sdk\\bin\\x86\\;C:\\Intel\\OpenC\nL\\sdk\\bin\\Pin;C:\\Intel\\OpenCL\\sdk\\bin\\GTPin;C:\\Program Files\\Git\\cmd;\n    SET PWD=/proc/self/cwd\n    SET PYTHON_BIN_PATH=C:/Python/Python36/python.exe\n    SET PYTHON_LIB_PATH=C:/Python/Python36/lib/site-packages\n    SET TF_CUDA_CLANG=0\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.0\n    SET TF_CUDA_VERSION=9.1\n    SET TF_CUDNN_VERSION=7\n    SET TF_NEED_CUDA=1\n    SET TF_NEED_OPENCL_SYCL=0\n  C:/msys64/usr/bin/gcc -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -w -march=native -\nstd=gnu++0x -D_GLIBCXX_USE_CXX11_ABI=0 -MD -MF bazel-out/x64_windows_msys-py3-op\nt/bin/external/com_google_absl/absl/base/_objs/spinlock_wait/external/com_google\n_absl/absl/base/internal/spinlock_wait.d -frandom-seed=bazel-out/x64_windows_msy\ns-py3-opt/bin/external/com_google_absl/absl/base/_objs/spinlock_wait/external/co\nm_google_absl/absl/base/internal/spinlock_wait.o -D__CLANG_SUPPORT_DYN_ANNOTATIO\nN__ -iquote external/com_google_absl -iquote bazel-out/x64_windows_msys-py3-opt/\ngenfiles/external/com_google_absl -iquote external/bazel_tools -iquote bazel-out\n/x64_windows_msys-py3-opt/genfiles/external/bazel_tools -isystem external/bazel_\ntools/tools/cpp/gcc3 -Wall -Wextra -Wcast-qual -Wconversion-null -Wmissing-decla\nrations -Woverlength-strings -Wpointer-arith -Wunused-local-typedefs -Wunused-re\nsult -Wvarargs -Wvla -Wwrite-strings -c external/com_google_absl/absl/base/inter\nnal/spinlock_wait.cc -o bazel-out/x64_windows_msys-py3-opt/bin/external/com_goog\nle_absl/absl/base/_objs/spinlock_wait/external/com_google_absl/absl/base/interna\nl/spinlock_wait.o\nIn file included from external/com_google_absl/absl/base/config.h:66:0,\n                 from external/com_google_absl/absl/base/port.h:23,\n                 from external/com_google_absl/absl/base/internal/spinlock_posix\n.inc:23,\n                 from external/com_google_absl/absl/base/internal/spinlock_wait.\ncc:27:\nexternal/com_google_absl/absl/base/policy_checks.h:40:2: error: #error \"Cygwin i\ns not supported.\"\n #error \"Cygwin is not supported.\"\n  ^~~~~\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 172.251s, Critical Path: 153.84s\nFAILED: Build did NOT complete successfully\n</code></pre>\n<p>###Any help would be appreciated. I can give you more details as well.</p>\n<h3>Source code / logs</h3>\n<p>Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.</p>", "body_text": "System information\n\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\n\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 7 SP1\n\n\nTensorFlow installed from (source or binary): Source\n\n\nTensorFlow version (use command below): r1.5\n\n\nPython version: 3.6.4\n\n\nBazel version (if compiling from source): 0.9.0\n\n\nGCC/Compiler version (if compiling from source): 6.4.0\n\n\nCUDA/cuDNN version: 7.0\n\n\nGPU model and memory: NVIDIA Quadro K4000\n\n\nExact command to reproduce:\n\n\nbazel build -c opt %BUILD_OPTS% //tensorflow/tools/pip_package:build_pip_package\nDescribe the problem\nI have tried compiling with MSYS2 and VS2015. I am trying to get VS2015 to work.\n###Using VS2015 and --cpu=x64_windows_msvc --host_cpu=x64_windows_msvc (among other options), I get the following error:\nc:\\Users\\adam.hendry\\Downloads\\tensorflow>bazel build -c opt %BUILD_OPTS% //tens\norflow/tools/pip_package:build_pip_package\n.......................\nLoading:\nLoading: 0 packages loaded\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (1 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (6 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (48 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (81 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (93 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (94 packages\nloaded)\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/core/BUILD:1807:1:\n in includes attribute of cc_library rule //tensorflow/core:framework_headers_li\nb: '../../external/nsync/public' resolves to 'external/nsync/public' not below t\nhe relative path of its package 'tensorflow/core'. This will be an error in the\nfuture. Since this rule was created by the macro 'cc_header_only_library', the e\nrror might have been caused by the macro implementation in C:/users/adam.hendry/\ndownloads/tensorflow/tensorflow/tensorflow.bzl:1138:30\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (116 packages\n loaded)\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (127 pack\nages loaded).\nINFO: Found 1 target...\nBuilding: no action\n[0 / 7] [-----] BazelWorkspaceStatusAction stable-status.txt\nINFO: From Compiling external/zlib_archive/uncompr.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzlib.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/adler32.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzclose.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/compress.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\n[134 / 1,014] Compiling external/zlib_archive/deflate.c [for host]; 1s local ...\n (16 actions, 14 running)\nINFO: From Compiling external/zlib_archive/infback.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling tensorflow/core/lib/hash/crc32c_accelerate.cc [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/highwayhash/highwayhash/arch_specific.cc [for host\n]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/crc32.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inflate.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inftrees.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzread.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzwrite.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/zutil.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inffast.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/trees.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/deflate.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/fft2d/fft/fftsg.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/farmhash_archive/src/farmhash.cc [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling tensorflow/compiler/xla/executable_run_options.cc:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\n[349 / 1,966] Compiling external/protobuf_archive/src/google/protobuf/compiler/j\ns/embed.cc [for host]; 1s local ... (5 actions, 3 running)\nINFO: From Compiling external/farmhash_archive/src/farmhash.cc:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/protobuf_archive/src/google/protobuf/compiler/js/e\nmbed.cc [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling tensorflow/core/grappler/costs/robust_stats.cc:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/lmdb/midl.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\n[643 / 3,343] Compiling external/lmdb/mdb.c; 0s local ... (23 actions, 22 runnin\ng)\nINFO: From Compiling external/zlib_archive/gzread.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/trees.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzclose.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzwrite.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/crc32.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inffast.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inftrees.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/compress.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/uncompr.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/zutil.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/gzlib.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/infback.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/deflate.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/inflate.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/zlib_archive/adler32.c:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/png_archive/pngtrans.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/highwayhash/highwayhash/sip_hash.cc [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/png_archive/pngget.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nINFO: From Compiling external/png_archive/pngread.c [for host]:\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nERROR: C:/users/adam.hendry/downloads/tensorflow/tensorflow/compiler/xla/service\n/cpu/BUILD:772:1: C++ compilation of rule '//tensorflow/compiler/xla/service/cpu\n:custom_call_target_registry' failed (Exit 1): cl.exe failed: error executing co\nmmand\n  cd C:/users/adam.hendry/appdata/local/temp/_bazel_adam.hendry/qoyar4dt/execroo\nt/org_tensorflow\n  SET CUDA_COMPUTE_CAPABILITIE=None\n    SET CUDA_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.1\n    SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.\n1\n    SET CUDNN_INSTALL_PATH=C:/cuda\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C\n:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program\nFiles (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\ucrt;C:\\Program Files (x86)\\Win\ndows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\inclu\nde\\10.0.16299.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299\n.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\winrt;\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\\nProgram Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program\nFiles (x86)\\Windows Kits\\10\\lib\\10.0.16299.0\\ucrt\\x64;C:\\Program Files (x86)\\Win\ndows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\1\n0.0.16299.0\\um\\x64;\n    SET NO_WHOLE_ARCHIVE_OPTION=1\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\Com\nmonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studi\no 14.0\\VC\\BIN\\amd64;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program F\niles (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Mic\nrosoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual St\nudio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team\n Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\n\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\\nProgram Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDK\ns\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\Windows\\system32\n    SET PWD=/proc/self/cwd\n    SET PYTHON_BIN_PATH=C:/Python/Python36/python.exe\n    SET PYTHON_LIB_PATH=C:/Python/Python36/lib/site-packages\n    SET TEMP=C:\\Users\\ADAM~1.HEN\\AppData\\Local\\Temp\n    SET TF_CUDA_CLANG=0\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.0\n    SET TF_CUDA_VERSION=9.1\n    SET TF_CUDNN_VERSION=7\n    SET TF_NEED_CUDA=1\n    SET TF_NEED_OPENCL_SYCL=0\n    SET TMP=C:\\Users\\ADAM~1.HEN\\AppData\\Local\\Temp\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /c ten\nsorflow/compiler/xla/service/cpu/custom_call_target_registry.cc /Fobazel-out/x64\n_windows_msvc-py3-opt/bin/tensorflow/compiler/xla/service/cpu/_objs/custom_call_\ntarget_registry/tensorflow/compiler/xla/service/cpu/custom_call_target_registry.\no /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPR\nECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /big\nobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 -DGEMMLOWP_ALLOW_SLO\nW_SCALAR_FALLBACK -w -march=native -D_GLIBCXX_USE_CXX11_ABI=0 /I. /Ibazel-out/x6\n4_windows_msvc-py3-opt/genfiles /Iexternal/bazel_tools /Ibazel-out/x64_windows_m\nsvc-py3-opt/genfiles/external/bazel_tools /Iexternal/bazel_tools/tools/cpp/gcc3\n/showIncludes /MD /O2 /DNDEBUG\nC:\\users\\adam.hendry\\appdata\\local\\temp\\_bazel_adam.hendry\\qoyar4dt\\execroot\\org\n_tensorflow\\tensorflow\\compiler\\xla\\service\\cpu\\custom_call_target_registry.cc :\n fatal error C1083: Cannot open compiler generated file: '': Invalid argument\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 25.271s, Critical Path: 3.48s\nFAILED: Build did NOT complete successfully\n\n###Using VS2015 and --cpu=x64_windows_msys --host_cpu=x64_windows_msys (among other options), I get this error:\nc:\\Users\\adam.hendry\\Downloads\\tensorflow>bazel build -c opt %BUILD_OPTS% //tens\norflow/tools/pip_package:build_pip_package\n.......................\nLoading:\nLoading: 0 packages loaded\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (1 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (6 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (73 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (131 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (141 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (142 packages\n loaded)\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/core/BUILD:1807:1:\n in includes attribute of cc_library rule //tensorflow/core:framework_headers_li\nb: '../../external/nsync/public' resolves to 'external/nsync/public' not below t\nhe relative path of its package 'tensorflow/core'. This will be an error in the\nfuture. Since this rule was created by the macro 'cc_header_only_library', the e\nrror might have been caused by the macro implementation in C:/users/adam.hendry/\ndownloads/tensorflow/tensorflow/tensorflow.bzl:1138:30\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (157 packages\n loaded)\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/contrib/learn/BUIL\nD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflo\nw/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/sessio\nn_bundle:exporter': No longer supported. Switch to SavedModel immediately.\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/contrib/learn/BUIL\nD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflo\nw/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/sessio\nn_bundle:gc': No longer supported. Switch to SavedModel immediately.\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (254 pack\nages loaded).\nINFO: Found 1 target...\nBuilding: no action\n[0 / 17] [-----] BazelWorkspaceStatusAction stable-status.txt\n[105 / 747] Executing genrule @local_config_cuda//cuda:cuda-lib; 2s local ... (2\n4 actions running)\n[106 / 747] Executing genrule @local_config_cuda//cuda:cuda-lib; 5s local ... (2\n3 actions running)\n[111 / 747] Executing genrule @local_config_cuda//cuda:cuda-lib; 10s local ... (\n24 actions running)\n[113 / 747] Executing genrule //tensorflow/core:version_info_gen [for host]; 13s\n local ... (23 actions running)\n[129 / 968] Executing genrule //tensorflow/core:version_info_gen [for host]; 20s\n local ... (24 actions running)\n[148 / 1,274] Executing genrule //tensorflow/core:version_info_gen [for host]; 3\n1s local ... (24 actions running)\n[149 / 1,275] Executing genrule //tensorflow/core:version_info_gen [for host]; 3\n7s local ... (24 actions running)\n[149 / 1,275] Executing genrule //tensorflow/core:version_info_gen [for host]; 4\n6s local ... (24 actions running)\n[155 / 1,279] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 57s local ... (23 actions running)\n[228 / 1,543] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 68s local ... (24 actions, 23 running)\n[417 / 2,009] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 83s local ... (24 actions, 23 running)\n[437 / 2,009] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 98s local ... (23 actions running)\n[458 / 2,009] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 115s local ... (24 actions, 23 running)\n[523 / 2,096] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\n; 135s local ... (24 actions, 23 running)\nERROR: C:/users/adam.hendry/appdata/local/temp/_bazel_adam.hendry/qoyar4dt/exter\nnal/com_google_absl/absl/base/BUILD.bazel:30:1: C++ compilation of rule '@com_go\nogle_absl//absl/base:spinlock_wait' failed (Exit 1): gcc failed: error executing\n command\n  cd C:/users/adam.hendry/appdata/local/temp/_bazel_adam.hendry/qoyar4dt/execroo\nt/org_tensorflow\n  SET CUDA_COMPUTE_CAPABILITIE=None\n    SET CUDA_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.1\n    SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.\n1\n    SET CUDNN_INSTALL_PATH=C:/cuda\n    SET NO_WHOLE_ARCHIVE_OPTION=1\n    SET PATH=C:\\msys64\\usr\\bin;C:\\msys64\\bin;C:\\Program Files (x86)\\Microsoft Vi\nsual Studio 14.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Fi\nles (x86)\\MSBuild\\14.0\\bin;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\C\nommon7\\IDE\\;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN;C:\\Progra\nm Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Windows\\Microsoft.NE\nT\\Framework\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\VC\nPackages;C:\\Program Files (x86)\\HTML Help Workshop;C:\\Program Files (x86)\\Micros\noft Visual Studio 14.0\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windo\nws Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETF\nX 4.6.1 Tools\\;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\;C:\\Program F\niles (x86)\\Microsoft Visual Studio 14.0\\VC\\;C:\\Program Files (x86)\\Microsoft Vis\nual Studio 14.0\\VC\\bin\\;C:\\Program Files (x86)\\Windows Kits\\10\\;C:\\Python\\Python\n36\\;C:\\Python\\Python36\\Scripts\\;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\G\nit LFS;C:\\Program Files\\CMake\\bin;C:\\Program Files\\Java\\jdk1.8.0_152\\;C:\\Program\nData\\Oracle\\Java\\javapath;C:\\Windows;C:\\Windows\\System32;C:\\Windows\\System32Wbem\n;C:\\Windows\\System32WindowsPowerShell\\v1.0\\;C:\\bazel\\output;C:\\apache-maven-3.3.\n9\\;C:\\apache-maven-3.3.9\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\\nv9.1\\;%CUDNN_PATH%;C:\\Program Files\\ImageMagick-7.0.5-Q16\\;C:\\Program Files (x86\n)\\QuickTime\\QTSystem\\;C:\\Program Files (x86)\\gs\\gs9.21\\bin\\;C:\\cppan\\cppan.exe;C\n:\\Program Files (x86)\\Tesseract-OCR\\;C:\\Program Files\\MiKTeX 2.9\\miktex\\bin\\x64\\\n;C:\\ffmpeg\\bin;C:\\Users\\adam.hendry\\.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\n\\;C:\\Program Files\\HDF_Group\\HDF5\\1.10.1\\bin\\;C:\\Program Files (x86)\\GtkSharp\\2.\n12\\bin;C:\\Program Files (x86)\\gettext-iconv\\lib\\gettext;C:\\Program Files (x86)\\C\nommon Files\\Intel\\Shared Libraries\\redist\\ia32\\mpirt;C:\\Program Files (x86)\\Comm\non Files\\Intel\\Shared Libraries\\redist\\ia32\\compiler;C:\\Program Files\\Common Fil\nes\\Microsoft Shared\\Windows Live;C:\\Program Files (x86)\\Common Files\\Microsoft S\nhared\\Windows Live;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Pro\ngram Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Progr\nam Files (x86)\\Windows Live\\Shared;C:\\Program Files\\Microsoft SQL Server\\130\\Too\nls\\Binn\\;C:\\Intel\\OpenCL\\sdk\\bin\\x64;C:\\Intel\\OpenCL\\sdk\\bin\\x86\\;C:\\Intel\\OpenC\nL\\sdk\\bin\\Pin;C:\\Intel\\OpenCL\\sdk\\bin\\GTPin;C:\\Program Files\\Git\\cmd;\n    SET PWD=/proc/self/cwd\n    SET PYTHON_BIN_PATH=C:/Python/Python36/python.exe\n    SET PYTHON_LIB_PATH=C:/Python/Python36/lib/site-packages\n    SET TF_CUDA_CLANG=0\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.0\n    SET TF_CUDA_VERSION=9.1\n    SET TF_CUDNN_VERSION=7\n    SET TF_NEED_CUDA=1\n    SET TF_NEED_OPENCL_SYCL=0\n  C:/msys64/usr/bin/gcc -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -w -march=native -\nstd=gnu++0x -D_GLIBCXX_USE_CXX11_ABI=0 -MD -MF bazel-out/x64_windows_msys-py3-op\nt/bin/external/com_google_absl/absl/base/_objs/spinlock_wait/external/com_google\n_absl/absl/base/internal/spinlock_wait.d -frandom-seed=bazel-out/x64_windows_msy\ns-py3-opt/bin/external/com_google_absl/absl/base/_objs/spinlock_wait/external/co\nm_google_absl/absl/base/internal/spinlock_wait.o -D__CLANG_SUPPORT_DYN_ANNOTATIO\nN__ -iquote external/com_google_absl -iquote bazel-out/x64_windows_msys-py3-opt/\ngenfiles/external/com_google_absl -iquote external/bazel_tools -iquote bazel-out\n/x64_windows_msys-py3-opt/genfiles/external/bazel_tools -isystem external/bazel_\ntools/tools/cpp/gcc3 -Wall -Wextra -Wcast-qual -Wconversion-null -Wmissing-decla\nrations -Woverlength-strings -Wpointer-arith -Wunused-local-typedefs -Wunused-re\nsult -Wvarargs -Wvla -Wwrite-strings -c external/com_google_absl/absl/base/inter\nnal/spinlock_wait.cc -o bazel-out/x64_windows_msys-py3-opt/bin/external/com_goog\nle_absl/absl/base/_objs/spinlock_wait/external/com_google_absl/absl/base/interna\nl/spinlock_wait.o\nIn file included from external/com_google_absl/absl/base/config.h:66:0,\n                 from external/com_google_absl/absl/base/port.h:23,\n                 from external/com_google_absl/absl/base/internal/spinlock_posix\n.inc:23,\n                 from external/com_google_absl/absl/base/internal/spinlock_wait.\ncc:27:\nexternal/com_google_absl/absl/base/policy_checks.h:40:2: error: #error \"Cygwin i\ns not supported.\"\n #error \"Cygwin is not supported.\"\n  ^~~~~\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 172.251s, Critical Path: 153.84s\nFAILED: Build did NOT complete successfully\n\n###Any help would be appreciated. I can give you more details as well.\nSource code / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.", "body": "### System information\r\n\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 7 SP1\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: r1.5\r\n- **Python version**: 3.6.4\r\n- **Bazel version (if compiling from source)**: 0.9.0\r\n- **GCC/Compiler version (if compiling from source)**: 6.4.0\r\n- **CUDA/cuDNN version**: 7.0\r\n- **GPU model and memory**: NVIDIA Quadro K4000\r\n\r\n- **Exact command to reproduce**:\r\n\r\nbazel build -c opt %BUILD_OPTS% //tensorflow/tools/pip_package:build_pip_package\r\n\r\n### Describe the problem\r\n\r\nI have tried compiling with MSYS2 and VS2015. I am trying to get VS2015 to work.\r\n\r\n###Using VS2015 and `--cpu=x64_windows_msvc --host_cpu=x64_windows_msvc` (among other options), I get the following error:\r\n\r\n```\r\nc:\\Users\\adam.hendry\\Downloads\\tensorflow>bazel build -c opt %BUILD_OPTS% //tens\r\norflow/tools/pip_package:build_pip_package\r\n.......................\r\nLoading:\r\nLoading: 0 packages loaded\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (1 packages l\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (6 packages l\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (48 packages\r\nloaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (81 packages\r\nloaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (93 packages\r\nloaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (94 packages\r\nloaded)\r\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/core/BUILD:1807:1:\r\n in includes attribute of cc_library rule //tensorflow/core:framework_headers_li\r\nb: '../../external/nsync/public' resolves to 'external/nsync/public' not below t\r\nhe relative path of its package 'tensorflow/core'. This will be an error in the\r\nfuture. Since this rule was created by the macro 'cc_header_only_library', the e\r\nrror might have been caused by the macro implementation in C:/users/adam.hendry/\r\ndownloads/tensorflow/tensorflow/tensorflow.bzl:1138:30\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (116 packages\r\n loaded)\r\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (127 pack\r\nages loaded).\r\nINFO: Found 1 target...\r\nBuilding: no action\r\n[0 / 7] [-----] BazelWorkspaceStatusAction stable-status.txt\r\nINFO: From Compiling external/zlib_archive/uncompr.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/gzlib.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/adler32.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/gzclose.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/compress.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\n[134 / 1,014] Compiling external/zlib_archive/deflate.c [for host]; 1s local ...\r\n (16 actions, 14 running)\r\nINFO: From Compiling external/zlib_archive/infback.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling tensorflow/core/lib/hash/crc32c_accelerate.cc [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/highwayhash/highwayhash/arch_specific.cc [for host\r\n]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/crc32.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/inflate.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/inftrees.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/gzread.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/gzwrite.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/zutil.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/inffast.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/trees.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/deflate.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/fft2d/fft/fftsg.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/farmhash_archive/src/farmhash.cc [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling tensorflow/compiler/xla/executable_run_options.cc:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\n[349 / 1,966] Compiling external/protobuf_archive/src/google/protobuf/compiler/j\r\ns/embed.cc [for host]; 1s local ... (5 actions, 3 running)\r\nINFO: From Compiling external/farmhash_archive/src/farmhash.cc:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/protobuf_archive/src/google/protobuf/compiler/js/e\r\nmbed.cc [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling tensorflow/core/grappler/costs/robust_stats.cc:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/lmdb/midl.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\n[643 / 3,343] Compiling external/lmdb/mdb.c; 0s local ... (23 actions, 22 runnin\r\ng)\r\nINFO: From Compiling external/zlib_archive/gzread.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/trees.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/gzclose.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/gzwrite.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/crc32.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/inffast.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/inftrees.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/compress.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/uncompr.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/zutil.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/gzlib.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/infback.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/deflate.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/inflate.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/zlib_archive/adler32.c:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/png_archive/pngtrans.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/highwayhash/highwayhash/sip_hash.cc [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/png_archive/pngget.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nINFO: From Compiling external/png_archive/pngread.c [for host]:\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nERROR: C:/users/adam.hendry/downloads/tensorflow/tensorflow/compiler/xla/service\r\n/cpu/BUILD:772:1: C++ compilation of rule '//tensorflow/compiler/xla/service/cpu\r\n:custom_call_target_registry' failed (Exit 1): cl.exe failed: error executing co\r\nmmand\r\n  cd C:/users/adam.hendry/appdata/local/temp/_bazel_adam.hendry/qoyar4dt/execroo\r\nt/org_tensorflow\r\n  SET CUDA_COMPUTE_CAPABILITIE=None\r\n    SET CUDA_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.1\r\n    SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.\r\n1\r\n    SET CUDNN_INSTALL_PATH=C:/cuda\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C\r\n:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program\r\nFiles (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\ucrt;C:\\Program Files (x86)\\Win\r\ndows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\inclu\r\nde\\10.0.16299.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299\r\n.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\winrt;\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\\r\nProgram Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program\r\nFiles (x86)\\Windows Kits\\10\\lib\\10.0.16299.0\\ucrt\\x64;C:\\Program Files (x86)\\Win\r\ndows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\1\r\n0.0.16299.0\\um\\x64;\r\n    SET NO_WHOLE_ARCHIVE_OPTION=1\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\Com\r\nmonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studi\r\no 14.0\\VC\\BIN\\amd64;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program F\r\niles (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Mic\r\nrosoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual St\r\nudio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team\r\n Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\r\n\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\\r\nProgram Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDK\r\ns\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\Windows\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/Python/Python36/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Python/Python36/lib/site-packages\r\n    SET TEMP=C:\\Users\\ADAM~1.HEN\\AppData\\Local\\Temp\r\n    SET TF_CUDA_CLANG=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.0\r\n    SET TF_CUDA_VERSION=9.1\r\n    SET TF_CUDNN_VERSION=7\r\n    SET TF_NEED_CUDA=1\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n    SET TMP=C:\\Users\\ADAM~1.HEN\\AppData\\Local\\Temp\r\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /c ten\r\nsorflow/compiler/xla/service/cpu/custom_call_target_registry.cc /Fobazel-out/x64\r\n_windows_msvc-py3-opt/bin/tensorflow/compiler/xla/service/cpu/_objs/custom_call_\r\ntarget_registry/tensorflow/compiler/xla/service/cpu/custom_call_target_registry.\r\no /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPR\r\nECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /big\r\nobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 -DGEMMLOWP_ALLOW_SLO\r\nW_SCALAR_FALLBACK -w -march=native -D_GLIBCXX_USE_CXX11_ABI=0 /I. /Ibazel-out/x6\r\n4_windows_msvc-py3-opt/genfiles /Iexternal/bazel_tools /Ibazel-out/x64_windows_m\r\nsvc-py3-opt/genfiles/external/bazel_tools /Iexternal/bazel_tools/tools/cpp/gcc3\r\n/showIncludes /MD /O2 /DNDEBUG\r\nC:\\users\\adam.hendry\\appdata\\local\\temp\\_bazel_adam.hendry\\qoyar4dt\\execroot\\org\r\n_tensorflow\\tensorflow\\compiler\\xla\\service\\cpu\\custom_call_target_registry.cc :\r\n fatal error C1083: Cannot open compiler generated file: '': Invalid argument\r\ncl : Command line warning D9002 : ignoring unknown option '-march=native'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 25.271s, Critical Path: 3.48s\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\n###Using VS2015 and `--cpu=x64_windows_msys --host_cpu=x64_windows_msys` (among other options), I get this error:\r\n\r\n```\r\nc:\\Users\\adam.hendry\\Downloads\\tensorflow>bazel build -c opt %BUILD_OPTS% //tens\r\norflow/tools/pip_package:build_pip_package\r\n.......................\r\nLoading:\r\nLoading: 0 packages loaded\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (1 packages l\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (6 packages l\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (73 packages\r\nloaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (131 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (141 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (142 packages\r\n loaded)\r\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/core/BUILD:1807:1:\r\n in includes attribute of cc_library rule //tensorflow/core:framework_headers_li\r\nb: '../../external/nsync/public' resolves to 'external/nsync/public' not below t\r\nhe relative path of its package 'tensorflow/core'. This will be an error in the\r\nfuture. Since this rule was created by the macro 'cc_header_only_library', the e\r\nrror might have been caused by the macro implementation in C:/users/adam.hendry/\r\ndownloads/tensorflow/tensorflow/tensorflow.bzl:1138:30\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (157 packages\r\n loaded)\r\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/contrib/learn/BUIL\r\nD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflo\r\nw/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/sessio\r\nn_bundle:exporter': No longer supported. Switch to SavedModel immediately.\r\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/contrib/learn/BUIL\r\nD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflo\r\nw/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/sessio\r\nn_bundle:gc': No longer supported. Switch to SavedModel immediately.\r\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (254 pack\r\nages loaded).\r\nINFO: Found 1 target...\r\nBuilding: no action\r\n[0 / 17] [-----] BazelWorkspaceStatusAction stable-status.txt\r\n[105 / 747] Executing genrule @local_config_cuda//cuda:cuda-lib; 2s local ... (2\r\n4 actions running)\r\n[106 / 747] Executing genrule @local_config_cuda//cuda:cuda-lib; 5s local ... (2\r\n3 actions running)\r\n[111 / 747] Executing genrule @local_config_cuda//cuda:cuda-lib; 10s local ... (\r\n24 actions running)\r\n[113 / 747] Executing genrule //tensorflow/core:version_info_gen [for host]; 13s\r\n local ... (23 actions running)\r\n[129 / 968] Executing genrule //tensorflow/core:version_info_gen [for host]; 20s\r\n local ... (24 actions running)\r\n[148 / 1,274] Executing genrule //tensorflow/core:version_info_gen [for host]; 3\r\n1s local ... (24 actions running)\r\n[149 / 1,275] Executing genrule //tensorflow/core:version_info_gen [for host]; 3\r\n7s local ... (24 actions running)\r\n[149 / 1,275] Executing genrule //tensorflow/core:version_info_gen [for host]; 4\r\n6s local ... (24 actions running)\r\n[155 / 1,279] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\r\n; 57s local ... (23 actions running)\r\n[228 / 1,543] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\r\n; 68s local ... (24 actions, 23 running)\r\n[417 / 2,009] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\r\n; 83s local ... (24 actions, 23 running)\r\n[437 / 2,009] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\r\n; 98s local ... (23 actions running)\r\n[458 / 2,009] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\r\n; 115s local ... (24 actions, 23 running)\r\n[523 / 2,096] Executing genrule @local_config_cuda//cuda:cuda-include [for host]\r\n; 135s local ... (24 actions, 23 running)\r\nERROR: C:/users/adam.hendry/appdata/local/temp/_bazel_adam.hendry/qoyar4dt/exter\r\nnal/com_google_absl/absl/base/BUILD.bazel:30:1: C++ compilation of rule '@com_go\r\nogle_absl//absl/base:spinlock_wait' failed (Exit 1): gcc failed: error executing\r\n command\r\n  cd C:/users/adam.hendry/appdata/local/temp/_bazel_adam.hendry/qoyar4dt/execroo\r\nt/org_tensorflow\r\n  SET CUDA_COMPUTE_CAPABILITIE=None\r\n    SET CUDA_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.1\r\n    SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.\r\n1\r\n    SET CUDNN_INSTALL_PATH=C:/cuda\r\n    SET NO_WHOLE_ARCHIVE_OPTION=1\r\n    SET PATH=C:\\msys64\\usr\\bin;C:\\msys64\\bin;C:\\Program Files (x86)\\Microsoft Vi\r\nsual Studio 14.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Fi\r\nles (x86)\\MSBuild\\14.0\\bin;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\C\r\nommon7\\IDE\\;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN;C:\\Progra\r\nm Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Windows\\Microsoft.NE\r\nT\\Framework\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\VC\r\nPackages;C:\\Program Files (x86)\\HTML Help Workshop;C:\\Program Files (x86)\\Micros\r\noft Visual Studio 14.0\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windo\r\nws Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETF\r\nX 4.6.1 Tools\\;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\;C:\\Program F\r\niles (x86)\\Microsoft Visual Studio 14.0\\VC\\;C:\\Program Files (x86)\\Microsoft Vis\r\nual Studio 14.0\\VC\\bin\\;C:\\Program Files (x86)\\Windows Kits\\10\\;C:\\Python\\Python\r\n36\\;C:\\Python\\Python36\\Scripts\\;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\G\r\nit LFS;C:\\Program Files\\CMake\\bin;C:\\Program Files\\Java\\jdk1.8.0_152\\;C:\\Program\r\nData\\Oracle\\Java\\javapath;C:\\Windows;C:\\Windows\\System32;C:\\Windows\\System32Wbem\r\n;C:\\Windows\\System32WindowsPowerShell\\v1.0\\;C:\\bazel\\output;C:\\apache-maven-3.3.\r\n9\\;C:\\apache-maven-3.3.9\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\\r\nv9.1\\;%CUDNN_PATH%;C:\\Program Files\\ImageMagick-7.0.5-Q16\\;C:\\Program Files (x86\r\n)\\QuickTime\\QTSystem\\;C:\\Program Files (x86)\\gs\\gs9.21\\bin\\;C:\\cppan\\cppan.exe;C\r\n:\\Program Files (x86)\\Tesseract-OCR\\;C:\\Program Files\\MiKTeX 2.9\\miktex\\bin\\x64\\\r\n;C:\\ffmpeg\\bin;C:\\Users\\adam.hendry\\.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\r\n\\;C:\\Program Files\\HDF_Group\\HDF5\\1.10.1\\bin\\;C:\\Program Files (x86)\\GtkSharp\\2.\r\n12\\bin;C:\\Program Files (x86)\\gettext-iconv\\lib\\gettext;C:\\Program Files (x86)\\C\r\nommon Files\\Intel\\Shared Libraries\\redist\\ia32\\mpirt;C:\\Program Files (x86)\\Comm\r\non Files\\Intel\\Shared Libraries\\redist\\ia32\\compiler;C:\\Program Files\\Common Fil\r\nes\\Microsoft Shared\\Windows Live;C:\\Program Files (x86)\\Common Files\\Microsoft S\r\nhared\\Windows Live;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Pro\r\ngram Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Progr\r\nam Files (x86)\\Windows Live\\Shared;C:\\Program Files\\Microsoft SQL Server\\130\\Too\r\nls\\Binn\\;C:\\Intel\\OpenCL\\sdk\\bin\\x64;C:\\Intel\\OpenCL\\sdk\\bin\\x86\\;C:\\Intel\\OpenC\r\nL\\sdk\\bin\\Pin;C:\\Intel\\OpenCL\\sdk\\bin\\GTPin;C:\\Program Files\\Git\\cmd;\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/Python/Python36/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Python/Python36/lib/site-packages\r\n    SET TF_CUDA_CLANG=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.0\r\n    SET TF_CUDA_VERSION=9.1\r\n    SET TF_CUDNN_VERSION=7\r\n    SET TF_NEED_CUDA=1\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n  C:/msys64/usr/bin/gcc -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -w -march=native -\r\nstd=gnu++0x -D_GLIBCXX_USE_CXX11_ABI=0 -MD -MF bazel-out/x64_windows_msys-py3-op\r\nt/bin/external/com_google_absl/absl/base/_objs/spinlock_wait/external/com_google\r\n_absl/absl/base/internal/spinlock_wait.d -frandom-seed=bazel-out/x64_windows_msy\r\ns-py3-opt/bin/external/com_google_absl/absl/base/_objs/spinlock_wait/external/co\r\nm_google_absl/absl/base/internal/spinlock_wait.o -D__CLANG_SUPPORT_DYN_ANNOTATIO\r\nN__ -iquote external/com_google_absl -iquote bazel-out/x64_windows_msys-py3-opt/\r\ngenfiles/external/com_google_absl -iquote external/bazel_tools -iquote bazel-out\r\n/x64_windows_msys-py3-opt/genfiles/external/bazel_tools -isystem external/bazel_\r\ntools/tools/cpp/gcc3 -Wall -Wextra -Wcast-qual -Wconversion-null -Wmissing-decla\r\nrations -Woverlength-strings -Wpointer-arith -Wunused-local-typedefs -Wunused-re\r\nsult -Wvarargs -Wvla -Wwrite-strings -c external/com_google_absl/absl/base/inter\r\nnal/spinlock_wait.cc -o bazel-out/x64_windows_msys-py3-opt/bin/external/com_goog\r\nle_absl/absl/base/_objs/spinlock_wait/external/com_google_absl/absl/base/interna\r\nl/spinlock_wait.o\r\nIn file included from external/com_google_absl/absl/base/config.h:66:0,\r\n                 from external/com_google_absl/absl/base/port.h:23,\r\n                 from external/com_google_absl/absl/base/internal/spinlock_posix\r\n.inc:23,\r\n                 from external/com_google_absl/absl/base/internal/spinlock_wait.\r\ncc:27:\r\nexternal/com_google_absl/absl/base/policy_checks.h:40:2: error: #error \"Cygwin i\r\ns not supported.\"\r\n #error \"Cygwin is not supported.\"\r\n  ^~~~~\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 172.251s, Critical Path: 153.84s\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\n###Any help would be appreciated. I can give you more details as well.\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n"}
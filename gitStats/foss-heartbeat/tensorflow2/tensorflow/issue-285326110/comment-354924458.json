{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/354924458", "html_url": "https://github.com/tensorflow/tensorflow/issues/15776#issuecomment-354924458", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15776", "id": 354924458, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDkyNDQ1OA==", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-03T02:14:40Z", "updated_at": "2018-01-03T02:14:40Z", "author_association": "NONE", "body_html": "<p>I deleted my earlier comments as I made a mistake. I had a previously installed version of tensorflow. So, I uninstalled this, cleaned bazel, and wiped the C:/tmp directory for a fresh install.</p>\n<p>I rebuilt using your suggestion, then got the error (boilerplate version):</p>\n<p>\"copts\" doesn't match this configuration</p>\n<p>I attempted to fix by editing the variable NSYNC_GENERIC_OPTS in</p>\n<p>C:/tmp/_bazel_adam.hendry/qoyar4dt/external/nsync/BUILD</p>\n<p>by adding a generic option</p>\n<p>\"//conditions:default\": [],</p>\n<p>per <a href=\"https://lengerrong.blogspot.com/2017/09/fix-up-configurable-attribute-copts.html\" rel=\"nofollow\">https://lengerrong.blogspot.com/2017/09/fix-up-configurable-attribute-copts.html</a>.</p>\n<p>However, after doing this and building again, I get the following error:</p>\n<pre><code>C:\\Windows\\system32&gt;cd C:\\Users\\adam.hendry\\Downloads\\tensorflow\n\nC:\\Users\\adam.hendry\\Downloads\\tensorflow&gt;python configure.py\nYou have bazel 0.9.0 installed.\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\nXLA JIT support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with GDR support? [y/N]: n\nNo GDR support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support? [y/N]: n\nNo VERBS support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\nCUDA support will be enabled for TensorFlow.\n\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to d\nefault to CUDA 9.0]: 9.1\n\n\nPlease specify the location where CUDA 9.1 toolkit is installed. Refer to README\n.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/\nCUDA/v9.1]:\n\n\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuD\nNN 7.0]:\n\n\nPlease specify a list of comma-separated Cuda compute capabilities you want to b\nuild with.\nYou can find the compute capability of your device at: https://developer.nvidia.\ncom/cuda-gpus.\nPlease note that each additional compute capability significantly increases your\n build time and binary size. [Default is: 3.5,5.2]3.0\n\n\nDo you wish to build TensorFlow with MPI support? [y/N]: n\nNo MPI support will be enabled for TensorFlow.\n\nPlease specify optimization flags to use during compilation when bazel option \"-\n-config=opt\" is specified [Default is -march=native]:\n\n\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\nPlease note that MKL on MacOS or windows is still not supported.\nIf you would like to use a local MKL instead of downloading, please set the envi\nronment variable \"TF_MKL_ROOT\" every time before build.\n\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]:\n n\nNot configuring the WORKSPACE for Android builds.\n\n\nC:\\Users\\adam.hendry\\Downloads\\tensorflow&gt;bazel build -c opt %BUILD_OPTS% //tens\norflow/tools/pip_package:build_pip_package\n.........................\nLoading:\nLoading: 0 packages loaded\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (1 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (5 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (24 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (80 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (92 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (100 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (101 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (101 packages\n loaded)\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/core/BUILD:1807:1:\n in includes attribute of cc_library rule //tensorflow/core:framework_headers_li\nb: '../../external/nsync/public' resolves to 'external/nsync/public' not below t\nhe relative path of its package 'tensorflow/core'. This will be an error in the\nfuture. Since this rule was created by the macro 'cc_header_only_library', the e\nrror might have been caused by the macro implementation in C:/users/adam.hendry/\ndownloads/tensorflow/tensorflow/tensorflow.bzl:1138:30\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (103 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (107 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (107 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (107 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (113 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (127 pack\nages loaded).\nINFO: Found 1 target...\n[0 / 7] [-----] BazelWorkspaceStatusAction stable-status.txt\nERROR: C:/tmp/_bazel_adam.hendry/qoyar4dt/external/com_google_absl/absl/base/BUI\nLD.bazel:54:1: C++ compilation of rule '@com_google_absl//absl/base:dynamic_anno\ntations' failed (Exit 2): cl.exe failed: error executing command\n  cd C:/tmp/_bazel_adam.hendry/qoyar4dt/execroot/org_tensorflow\n  SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\\nProgram Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Fi\nles (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\ucrt;C:\\Program Files (x86)\\Windo\nws Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\n\\10.0.16299.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\n\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\winrt;\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\\nProgram Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program\nFiles (x86)\\Windows Kits\\10\\lib\\10.0.16299.0\\ucrt\\x64;C:\\Program Files (x86)\\Win\ndows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\1\n0.0.16299.0\\um\\x64;\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\Com\nmonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studi\no 14.0\\VC\\BIN\\amd64;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program F\niles (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Mic\nrosoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual St\nudio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team\n Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\n\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\\nProgram Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDK\ns\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\Windows\\system32\n    SET PWD=/proc/self/cwd\n    SET TEMP=C:\\tmp\n    SET TMP=C:\\tmp\n    SET TMPDIR=C:\\tmp\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /c ext\nernal/com_google_absl/absl/base/dynamic_annotations.cc /Fobazel-out/host/bin/ext\nernal/com_google_absl/absl/base/_objs/dynamic_annotations/external/com_google_ab\nsl/absl/base/dynamic_annotations.o /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_W\nINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDE\nXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd\n4250 /wd4996 -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -w -march=native /Iexternal/c\nom_google_absl /Ibazel-out/host/genfiles/external/com_google_absl /Iexternal/baz\nel_tools /Ibazel-out/host/genfiles/external/bazel_tools /Iexternal/bazel_tools/t\nools/cpp/gcc3 /D__CLANG_SUPPORT_DYN_ANNOTATION__ /showIncludes /MD /O2 /DNDEBUG\n-Wall -Wextra -Wcast-qual -Wconversion-null -Wmissing-declarations -Woverlength-\nstrings -Wpointer-arith -Wunused-local-typedefs -Wunused-result -Wvarargs -Wvla\n-Wwrite-strings\ncl : Command line error D8021 : invalid numeric argument '/Wextra'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 1789.934s, Critical Path: 2.75s\nFAILED: Build did NOT complete successfully\n\n\n</code></pre>\n<p><strong>Please please help with any suggestions! What is the right way to fix the \"copts\" doesn't match configuration error? I fear that the fix I did only sent the compiler down the wrong path and know cl.exe is using a gcc.exe argument '/Wextra', which cl.exe obviously does not understand.</strong></p>", "body_text": "I deleted my earlier comments as I made a mistake. I had a previously installed version of tensorflow. So, I uninstalled this, cleaned bazel, and wiped the C:/tmp directory for a fresh install.\nI rebuilt using your suggestion, then got the error (boilerplate version):\n\"copts\" doesn't match this configuration\nI attempted to fix by editing the variable NSYNC_GENERIC_OPTS in\nC:/tmp/_bazel_adam.hendry/qoyar4dt/external/nsync/BUILD\nby adding a generic option\n\"//conditions:default\": [],\nper https://lengerrong.blogspot.com/2017/09/fix-up-configurable-attribute-copts.html.\nHowever, after doing this and building again, I get the following error:\nC:\\Windows\\system32>cd C:\\Users\\adam.hendry\\Downloads\\tensorflow\n\nC:\\Users\\adam.hendry\\Downloads\\tensorflow>python configure.py\nYou have bazel 0.9.0 installed.\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\nXLA JIT support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with GDR support? [y/N]: n\nNo GDR support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support? [y/N]: n\nNo VERBS support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\nCUDA support will be enabled for TensorFlow.\n\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to d\nefault to CUDA 9.0]: 9.1\n\n\nPlease specify the location where CUDA 9.1 toolkit is installed. Refer to README\n.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/\nCUDA/v9.1]:\n\n\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuD\nNN 7.0]:\n\n\nPlease specify a list of comma-separated Cuda compute capabilities you want to b\nuild with.\nYou can find the compute capability of your device at: https://developer.nvidia.\ncom/cuda-gpus.\nPlease note that each additional compute capability significantly increases your\n build time and binary size. [Default is: 3.5,5.2]3.0\n\n\nDo you wish to build TensorFlow with MPI support? [y/N]: n\nNo MPI support will be enabled for TensorFlow.\n\nPlease specify optimization flags to use during compilation when bazel option \"-\n-config=opt\" is specified [Default is -march=native]:\n\n\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\nPlease note that MKL on MacOS or windows is still not supported.\nIf you would like to use a local MKL instead of downloading, please set the envi\nronment variable \"TF_MKL_ROOT\" every time before build.\n\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]:\n n\nNot configuring the WORKSPACE for Android builds.\n\n\nC:\\Users\\adam.hendry\\Downloads\\tensorflow>bazel build -c opt %BUILD_OPTS% //tens\norflow/tools/pip_package:build_pip_package\n.........................\nLoading:\nLoading: 0 packages loaded\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (1 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (5 packages l\noaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (24 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (80 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (92 packages\nloaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (100 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (101 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (101 packages\n loaded)\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/core/BUILD:1807:1:\n in includes attribute of cc_library rule //tensorflow/core:framework_headers_li\nb: '../../external/nsync/public' resolves to 'external/nsync/public' not below t\nhe relative path of its package 'tensorflow/core'. This will be an error in the\nfuture. Since this rule was created by the macro 'cc_header_only_library', the e\nrror might have been caused by the macro implementation in C:/users/adam.hendry/\ndownloads/tensorflow/tensorflow/tensorflow.bzl:1138:30\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (103 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (107 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (107 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (107 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (113 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\n loaded)\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (127 pack\nages loaded).\nINFO: Found 1 target...\n[0 / 7] [-----] BazelWorkspaceStatusAction stable-status.txt\nERROR: C:/tmp/_bazel_adam.hendry/qoyar4dt/external/com_google_absl/absl/base/BUI\nLD.bazel:54:1: C++ compilation of rule '@com_google_absl//absl/base:dynamic_anno\ntations' failed (Exit 2): cl.exe failed: error executing command\n  cd C:/tmp/_bazel_adam.hendry/qoyar4dt/execroot/org_tensorflow\n  SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\\nProgram Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Fi\nles (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\ucrt;C:\\Program Files (x86)\\Windo\nws Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\n\\10.0.16299.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\n\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\winrt;\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\\nProgram Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program\nFiles (x86)\\Windows Kits\\10\\lib\\10.0.16299.0\\ucrt\\x64;C:\\Program Files (x86)\\Win\ndows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\1\n0.0.16299.0\\um\\x64;\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\Com\nmonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studi\no 14.0\\VC\\BIN\\amd64;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program F\niles (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Mic\nrosoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual St\nudio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team\n Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\n\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\\nProgram Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDK\ns\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\Windows\\system32\n    SET PWD=/proc/self/cwd\n    SET TEMP=C:\\tmp\n    SET TMP=C:\\tmp\n    SET TMPDIR=C:\\tmp\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /c ext\nernal/com_google_absl/absl/base/dynamic_annotations.cc /Fobazel-out/host/bin/ext\nernal/com_google_absl/absl/base/_objs/dynamic_annotations/external/com_google_ab\nsl/absl/base/dynamic_annotations.o /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_W\nINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDE\nXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd\n4250 /wd4996 -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -w -march=native /Iexternal/c\nom_google_absl /Ibazel-out/host/genfiles/external/com_google_absl /Iexternal/baz\nel_tools /Ibazel-out/host/genfiles/external/bazel_tools /Iexternal/bazel_tools/t\nools/cpp/gcc3 /D__CLANG_SUPPORT_DYN_ANNOTATION__ /showIncludes /MD /O2 /DNDEBUG\n-Wall -Wextra -Wcast-qual -Wconversion-null -Wmissing-declarations -Woverlength-\nstrings -Wpointer-arith -Wunused-local-typedefs -Wunused-result -Wvarargs -Wvla\n-Wwrite-strings\ncl : Command line error D8021 : invalid numeric argument '/Wextra'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 1789.934s, Critical Path: 2.75s\nFAILED: Build did NOT complete successfully\n\n\n\nPlease please help with any suggestions! What is the right way to fix the \"copts\" doesn't match configuration error? I fear that the fix I did only sent the compiler down the wrong path and know cl.exe is using a gcc.exe argument '/Wextra', which cl.exe obviously does not understand.", "body": "I deleted my earlier comments as I made a mistake. I had a previously installed version of tensorflow. So, I uninstalled this, cleaned bazel, and wiped the C:/tmp directory for a fresh install.\r\n\r\nI rebuilt using your suggestion, then got the error (boilerplate version):\r\n\r\n\"copts\" doesn't match this configuration\r\n\r\nI attempted to fix by editing the variable NSYNC_GENERIC_OPTS in\r\n\r\nC:/tmp/_bazel_adam.hendry/qoyar4dt/external/nsync/BUILD\r\n\r\nby adding a generic option\r\n\r\n\"//conditions:default\": [],\r\n\r\nper https://lengerrong.blogspot.com/2017/09/fix-up-configurable-attribute-copts.html.\r\n\r\nHowever, after doing this and building again, I get the following error:\r\n\r\n\r\n```\r\nC:\\Windows\\system32>cd C:\\Users\\adam.hendry\\Downloads\\tensorflow\r\n\r\nC:\\Users\\adam.hendry\\Downloads\\tensorflow>python configure.py\r\nYou have bazel 0.9.0 installed.\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\r\nXLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with GDR support? [y/N]: n\r\nNo GDR support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with VERBS support? [y/N]: n\r\nNo VERBS support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to d\r\nefault to CUDA 9.0]: 9.1\r\n\r\n\r\nPlease specify the location where CUDA 9.1 toolkit is installed. Refer to README\r\n.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/\r\nCUDA/v9.1]:\r\n\r\n\r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuD\r\nNN 7.0]:\r\n\r\n\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to b\r\nuild with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.\r\ncom/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your\r\n build time and binary size. [Default is: 3.5,5.2]3.0\r\n\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: n\r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"-\r\n-config=opt\" is specified [Default is -march=native]:\r\n\r\n\r\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\r\nPlease note that MKL on MacOS or windows is still not supported.\r\nIf you would like to use a local MKL instead of downloading, please set the envi\r\nronment variable \"TF_MKL_ROOT\" every time before build.\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]:\r\n n\r\nNot configuring the WORKSPACE for Android builds.\r\n\r\n\r\nC:\\Users\\adam.hendry\\Downloads\\tensorflow>bazel build -c opt %BUILD_OPTS% //tens\r\norflow/tools/pip_package:build_pip_package\r\n.........................\r\nLoading:\r\nLoading: 0 packages loaded\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (1 packages l\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (5 packages l\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (24 packages\r\nloaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (80 packages\r\nloaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (92 packages\r\nloaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (100 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (101 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (101 packages\r\n loaded)\r\nWARNING: C:/users/adam.hendry/downloads/tensorflow/tensorflow/core/BUILD:1807:1:\r\n in includes attribute of cc_library rule //tensorflow/core:framework_headers_li\r\nb: '../../external/nsync/public' resolves to 'external/nsync/public' not below t\r\nhe relative path of its package 'tensorflow/core'. This will be an error in the\r\nfuture. Since this rule was created by the macro 'cc_header_only_library', the e\r\nrror might have been caused by the macro implementation in C:/users/adam.hendry/\r\ndownloads/tensorflow/tensorflow/tensorflow.bzl:1138:30\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (103 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (106 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (107 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (107 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (107 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (113 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (115 packages\r\n loaded)\r\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (127 pack\r\nages loaded).\r\nINFO: Found 1 target...\r\n[0 / 7] [-----] BazelWorkspaceStatusAction stable-status.txt\r\nERROR: C:/tmp/_bazel_adam.hendry/qoyar4dt/external/com_google_absl/absl/base/BUI\r\nLD.bazel:54:1: C++ compilation of rule '@com_google_absl//absl/base:dynamic_anno\r\ntations' failed (Exit 2): cl.exe failed: error executing command\r\n  cd C:/tmp/_bazel_adam.hendry/qoyar4dt/execroot/org_tensorflow\r\n  SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\\r\nProgram Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Fi\r\nles (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\ucrt;C:\\Program Files (x86)\\Windo\r\nws Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\r\n\\10.0.16299.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\r\n\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\winrt;\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\\r\nProgram Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program\r\nFiles (x86)\\Windows Kits\\10\\lib\\10.0.16299.0\\ucrt\\x64;C:\\Program Files (x86)\\Win\r\ndows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\1\r\n0.0.16299.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\Com\r\nmonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studi\r\no 14.0\\VC\\BIN\\amd64;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program F\r\niles (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Mic\r\nrosoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual St\r\nudio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team\r\n Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\r\n\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\\r\nProgram Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDK\r\ns\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\Windows\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET TEMP=C:\\tmp\r\n    SET TMP=C:\\tmp\r\n    SET TMPDIR=C:\\tmp\r\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /c ext\r\nernal/com_google_absl/absl/base/dynamic_annotations.cc /Fobazel-out/host/bin/ext\r\nernal/com_google_absl/absl/base/_objs/dynamic_annotations/external/com_google_ab\r\nsl/absl/base/dynamic_annotations.o /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_W\r\nINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDE\r\nXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd\r\n4250 /wd4996 -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -w -march=native /Iexternal/c\r\nom_google_absl /Ibazel-out/host/genfiles/external/com_google_absl /Iexternal/baz\r\nel_tools /Ibazel-out/host/genfiles/external/bazel_tools /Iexternal/bazel_tools/t\r\nools/cpp/gcc3 /D__CLANG_SUPPORT_DYN_ANNOTATION__ /showIncludes /MD /O2 /DNDEBUG\r\n-Wall -Wextra -Wcast-qual -Wconversion-null -Wmissing-declarations -Woverlength-\r\nstrings -Wpointer-arith -Wunused-local-typedefs -Wunused-result -Wvarargs -Wvla\r\n-Wwrite-strings\r\ncl : Command line error D8021 : invalid numeric argument '/Wextra'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 1789.934s, Critical Path: 2.75s\r\nFAILED: Build did NOT complete successfully\r\n\r\n\r\n```\r\n\r\n**Please please help with any suggestions! What is the right way to fix the \"copts\" doesn't match configuration error? I fear that the fix I did only sent the compiler down the wrong path and know cl.exe is using a gcc.exe argument '/Wextra', which cl.exe obviously does not understand.**\r\n"}
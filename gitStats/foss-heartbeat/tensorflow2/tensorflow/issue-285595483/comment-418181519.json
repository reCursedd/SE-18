{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/418181519", "html_url": "https://github.com/tensorflow/tensorflow/issues/15805#issuecomment-418181519", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15805", "id": 418181519, "node_id": "MDEyOklzc3VlQ29tbWVudDQxODE4MTUxOQ==", "user": {"login": "fzhu129", "id": 11604578, "node_id": "MDQ6VXNlcjExNjA0NTc4", "avatar_url": "https://avatars0.githubusercontent.com/u/11604578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fzhu129", "html_url": "https://github.com/fzhu129", "followers_url": "https://api.github.com/users/fzhu129/followers", "following_url": "https://api.github.com/users/fzhu129/following{/other_user}", "gists_url": "https://api.github.com/users/fzhu129/gists{/gist_id}", "starred_url": "https://api.github.com/users/fzhu129/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fzhu129/subscriptions", "organizations_url": "https://api.github.com/users/fzhu129/orgs", "repos_url": "https://api.github.com/users/fzhu129/repos", "events_url": "https://api.github.com/users/fzhu129/events{/privacy}", "received_events_url": "https://api.github.com/users/fzhu129/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-03T19:30:14Z", "updated_at": "2018-09-05T01:10:14Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7223627\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jyoungyun\">@jyoungyun</a>:<br>\nCould you share your Freeze the model code please?</p>\n<p>python freeze.py --model_dir=/data3/frankzhu/tmp/mnistmodel --output_node_names=save/restore_all</p>\n<p>bazel run tensorflow/contrib/lite/toco:toco -- <br>\n--input_file=/data3/frankzhu/tmp/mnistmodel/frozen_model.pb <br>\n--input_format=TENSORFLOW_GRAPHDEF <br>\n--output_format=TFLITE <br>\n--output_file=/data3/frankzhu/tmp/mnistmodel/rnn_frozen.tflite <br>\n--input_arrays=\"Placeholder\" <br>\n--input_shapes=1,28,28 <br>\n--output_arrays=\"output\" <br>\n--allow_custom_ops</p>\n<p>I don't know why the error like this:</p>\n<p>INFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/data3/frankzhu/tmp/mnistmodel/frozen_model.pb' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--output_file=/data3/frankzhu/tmp/mnistmodel/rnn_frozen.tflite' '--input_arrays=Placeholder' '--input_shapes=1,28,28' '--output_arrays=output' --allow_custINFO: Build completed successfully, 1 total action<br>\n2018-09-03 12:25:39.809475: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: RestoreV2<br>\n2018-09-03 12:25:39.809571: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809595: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809613: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809629: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809645: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809660: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809675: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809690: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809706: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809722: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809737: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809753: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809768: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809783: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-09-03 12:25:39.809924: F tensorflow/contrib/lite/toco/tooling_util.cc:807] Check failed: model.HasArray(output_array) Output array not found: output</p>\n<p>Copied your code above that it complained that<br>\nTraceback (most recent call last):<br>\nFile \"freeze.py\", line 95, in <br>\n(directory, fn, ext) = splitDirFilenameExt(input_graph_path)<br>\nNameError: name 'splitDirFilenameExt' is not defined</p>\n<p>I just give the direct path so pass this problem.</p>\n<p>use<br>\nfrom tensorflow.python.tools import freeze_graph<br>\nSo<br>\nfreeze_graph.freeze_graph problem fixed.</p>\n<p>but what should be input_graph_path or could you share your freeze code please?<br>\nbelow is my attached file:</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/2350790/freeze.zip\">freeze.zip</a></p>\n<p>Thank you very much in advance.<br>\nFrank</p>", "body_text": "@jyoungyun:\nCould you share your Freeze the model code please?\npython freeze.py --model_dir=/data3/frankzhu/tmp/mnistmodel --output_node_names=save/restore_all\nbazel run tensorflow/contrib/lite/toco:toco -- \n--input_file=/data3/frankzhu/tmp/mnistmodel/frozen_model.pb \n--input_format=TENSORFLOW_GRAPHDEF \n--output_format=TFLITE \n--output_file=/data3/frankzhu/tmp/mnistmodel/rnn_frozen.tflite \n--input_arrays=\"Placeholder\" \n--input_shapes=1,28,28 \n--output_arrays=\"output\" \n--allow_custom_ops\nI don't know why the error like this:\nINFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/data3/frankzhu/tmp/mnistmodel/frozen_model.pb' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--output_file=/data3/frankzhu/tmp/mnistmodel/rnn_frozen.tflite' '--input_arrays=Placeholder' '--input_shapes=1,28,28' '--output_arrays=output' --allow_custINFO: Build completed successfully, 1 total action\n2018-09-03 12:25:39.809475: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: RestoreV2\n2018-09-03 12:25:39.809571: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809595: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809613: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809629: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809645: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809660: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809675: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809690: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809706: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809722: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809737: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809753: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809768: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809783: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-09-03 12:25:39.809924: F tensorflow/contrib/lite/toco/tooling_util.cc:807] Check failed: model.HasArray(output_array) Output array not found: output\nCopied your code above that it complained that\nTraceback (most recent call last):\nFile \"freeze.py\", line 95, in \n(directory, fn, ext) = splitDirFilenameExt(input_graph_path)\nNameError: name 'splitDirFilenameExt' is not defined\nI just give the direct path so pass this problem.\nuse\nfrom tensorflow.python.tools import freeze_graph\nSo\nfreeze_graph.freeze_graph problem fixed.\nbut what should be input_graph_path or could you share your freeze code please?\nbelow is my attached file:\nfreeze.zip\nThank you very much in advance.\nFrank", "body": "@jyoungyun:\r\nCould you share your Freeze the model code please? \r\n\r\n\r\npython freeze.py --model_dir=/data3/frankzhu/tmp/mnistmodel --output_node_names=save/restore_all\r\n\r\nbazel run tensorflow/contrib/lite/toco:toco -- \\\r\n--input_file=/data3/frankzhu/tmp/mnistmodel/frozen_model.pb \\\r\n--input_format=TENSORFLOW_GRAPHDEF \\\r\n--output_format=TFLITE \\\r\n--output_file=/data3/frankzhu/tmp/mnistmodel/rnn_frozen.tflite \\\r\n--input_arrays=\"Placeholder\" \\\r\n--input_shapes=1,28,28 \\\r\n--output_arrays=\"output\" \\\r\n--allow_custom_ops\r\n\r\nI don't know why the error like this:\r\n\r\nINFO: Running command line: bazel-bin/tensorflow/contrib/lite/toco/toco '--input_file=/data3/frankzhu/tmp/mnistmodel/frozen_model.pb' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--output_file=/data3/frankzhu/tmp/mnistmodel/rnn_frozen.tflite' '--input_arrays=Placeholder' '--input_shapes=1,28,28' '--output_arrays=output' --allow_custINFO: Build completed successfully, 1 total action\r\n2018-09-03 12:25:39.809475: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: RestoreV2\r\n2018-09-03 12:25:39.809571: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809595: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809613: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809629: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809645: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809660: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809675: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809690: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809706: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809722: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809737: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809753: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809768: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809783: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-09-03 12:25:39.809924: F tensorflow/contrib/lite/toco/tooling_util.cc:807] Check failed: model.HasArray(output_array) Output array not found: output\r\n\r\nCopied your code above that it complained that \r\nTraceback (most recent call last):\r\n  File \"freeze.py\", line 95, in <module>\r\n    (directory, fn, ext) = splitDirFilenameExt(input_graph_path)\r\nNameError: name 'splitDirFilenameExt' is not defined\r\n\r\nI just give the direct path so pass this problem.\r\n\r\nuse \r\nfrom tensorflow.python.tools import freeze_graph \r\nSo \r\nfreeze_graph.freeze_graph problem fixed.\r\n\r\nbut what should be input_graph_path or could you share your freeze code please?\r\nbelow is my attached file:\r\n\r\n[freeze.zip](https://github.com/tensorflow/tensorflow/files/2350790/freeze.zip)\r\n\r\nThank you very much in advance.\r\nFrank\r\n\r\n\r\n\r\n"}
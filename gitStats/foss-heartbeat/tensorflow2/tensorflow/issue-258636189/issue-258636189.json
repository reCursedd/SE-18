{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13133", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13133/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13133/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13133/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13133", "id": 258636189, "node_id": "MDU6SXNzdWUyNTg2MzYxODk=", "number": 13133, "title": "Session.run with fetches = list apparently works incorrectly", "user": {"login": "BaruchYoussin", "id": 12135903, "node_id": "MDQ6VXNlcjEyMTM1OTAz", "avatar_url": "https://avatars2.githubusercontent.com/u/12135903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BaruchYoussin", "html_url": "https://github.com/BaruchYoussin", "followers_url": "https://api.github.com/users/BaruchYoussin/followers", "following_url": "https://api.github.com/users/BaruchYoussin/following{/other_user}", "gists_url": "https://api.github.com/users/BaruchYoussin/gists{/gist_id}", "starred_url": "https://api.github.com/users/BaruchYoussin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BaruchYoussin/subscriptions", "organizations_url": "https://api.github.com/users/BaruchYoussin/orgs", "repos_url": "https://api.github.com/users/BaruchYoussin/repos", "events_url": "https://api.github.com/users/BaruchYoussin/events{/privacy}", "received_events_url": "https://api.github.com/users/BaruchYoussin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-09-18T22:07:44Z", "updated_at": "2018-05-24T21:44:30Z", "closed_at": "2017-09-19T18:32:57Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: The problem manifests in a standard tutorial and I wrote custom code to better understand it.</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: ('v1.3.0-rc2-20-g0787eee', '1.3.0')</li>\n<li><strong>Python version</strong>: Python 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609] on linux2</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>: no GPU</li>\n<li><strong>GPU model and memory</strong>: none</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>The <a href=\"https://tensorflow.rstudio.com/tensorflow/articles/tutorial_tensorflow_mechanics.html\" rel=\"nofollow\">TensorFlow Mechanics 101 tutorial</a> code outputs value of the same Op, loss, in two ways: summary and console output.  The two values do not match.</p>\n<p>The code is located <a href=\"https://tensorflow.rstudio.com/tensorflow/articles/examples/mnist_fully_connected_feed.html\" rel=\"nofollow\">here</a>.<br>\nTo make the problem clear, I changed the console output format on line 305 to 8 decimals:</p>\n<pre><code>  cat(sprintf('Step %d: loss = %.8f (%.3f sec)\\n',\n</code></pre>\n<p>I compared the console output for loss with the results of the summary Op (the op is defined on lines 120 and 262, and run on line 308).  I obtained the results of the summary op from the csv file downloaded from tensorboard.</p>\n<p>The console output is close to the csv file but different, often in the third decimal; they should be identical since the op is the same on the same step.</p>\n<p>I do not copy the output here since it is unstable, changes from one run to another.  (I have not been able to stabilize it with <code>use_session_with_seed</code> or with <code>tf$set_random_seed</code>.)</p>\n<p>I changed lines 297-298 from</p>\n<pre><code>values &lt;- sess$run(list(train_op, loss), feed_dict = feed_dict)\nloss_value &lt;- values[[2]]\n</code></pre>\n<p>to a supposedly equivalent code:</p>\n<pre><code>sess$run(train_op, feed_dict = feed_dict)\nloss_value = sess$run(loss, feed_dict = feed_dict)\n</code></pre>\n<p>After that the console output agreed fully with summary data obtained from csv.</p>\n<p>I take it that <code>sess$run(list(...</code> works incorrectly.</p>\n<p>I do not know whether the problem is in TensorFlow or in the R interface to it.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): The problem manifests in a standard tutorial and I wrote custom code to better understand it.\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): ('v1.3.0-rc2-20-g0787eee', '1.3.0')\nPython version: Python 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609] on linux2\nBazel version (if compiling from source):\nCUDA/cuDNN version: no GPU\nGPU model and memory: none\n\nDescribe the problem\nThe TensorFlow Mechanics 101 tutorial code outputs value of the same Op, loss, in two ways: summary and console output.  The two values do not match.\nThe code is located here.\nTo make the problem clear, I changed the console output format on line 305 to 8 decimals:\n  cat(sprintf('Step %d: loss = %.8f (%.3f sec)\\n',\n\nI compared the console output for loss with the results of the summary Op (the op is defined on lines 120 and 262, and run on line 308).  I obtained the results of the summary op from the csv file downloaded from tensorboard.\nThe console output is close to the csv file but different, often in the third decimal; they should be identical since the op is the same on the same step.\nI do not copy the output here since it is unstable, changes from one run to another.  (I have not been able to stabilize it with use_session_with_seed or with tf$set_random_seed.)\nI changed lines 297-298 from\nvalues <- sess$run(list(train_op, loss), feed_dict = feed_dict)\nloss_value <- values[[2]]\n\nto a supposedly equivalent code:\nsess$run(train_op, feed_dict = feed_dict)\nloss_value = sess$run(loss, feed_dict = feed_dict)\n\nAfter that the console output agreed fully with summary data obtained from csv.\nI take it that sess$run(list(... works incorrectly.\nI do not know whether the problem is in TensorFlow or in the R interface to it.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: The problem manifests in a standard tutorial and I wrote custom code to better understand it.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: ('v1.3.0-rc2-20-g0787eee', '1.3.0')\r\n- **Python version**: Python 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609] on linux2\r\n- **Bazel version (if compiling from source)**:\r\n- **CUDA/cuDNN version**: no GPU\r\n- **GPU model and memory**: none\r\n\r\n### Describe the problem\r\nThe [TensorFlow Mechanics 101 tutorial](https://tensorflow.rstudio.com/tensorflow/articles/tutorial_tensorflow_mechanics.html) code outputs value of the same Op, loss, in two ways: summary and console output.  The two values do not match.\r\n\r\nThe code is located [here](https://tensorflow.rstudio.com/tensorflow/articles/examples/mnist_fully_connected_feed.html).\r\nTo make the problem clear, I changed the console output format on line 305 to 8 decimals:\r\n\r\n      cat(sprintf('Step %d: loss = %.8f (%.3f sec)\\n',\r\n\r\nI compared the console output for loss with the results of the summary Op (the op is defined on lines 120 and 262, and run on line 308).  I obtained the results of the summary op from the csv file downloaded from tensorboard.\r\n\r\nThe console output is close to the csv file but different, often in the third decimal; they should be identical since the op is the same on the same step.\r\n\r\nI do not copy the output here since it is unstable, changes from one run to another.  (I have not been able to stabilize it with `use_session_with_seed` or with `tf$set_random_seed`.)\r\n\r\nI changed lines 297-298 from\r\n\r\n    values <- sess$run(list(train_op, loss), feed_dict = feed_dict)\r\n    loss_value <- values[[2]]\r\n\r\nto a supposedly equivalent code:\r\n\r\n    sess$run(train_op, feed_dict = feed_dict)\r\n    loss_value = sess$run(loss, feed_dict = feed_dict)\r\n \r\nAfter that the console output agreed fully with summary data obtained from csv.\r\n\r\nI take it that `sess$run(list(...` works incorrectly.\r\n\r\nI do not know whether the problem is in TensorFlow or in the R interface to it.\r\n\r\n"}
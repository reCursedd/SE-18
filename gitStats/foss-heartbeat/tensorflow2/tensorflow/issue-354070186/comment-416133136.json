{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/416133136", "html_url": "https://github.com/tensorflow/tensorflow/issues/21879#issuecomment-416133136", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21879", "id": 416133136, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjEzMzEzNg==", "user": {"login": "chengdianxuezi", "id": 10277403, "node_id": "MDQ6VXNlcjEwMjc3NDAz", "avatar_url": "https://avatars1.githubusercontent.com/u/10277403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chengdianxuezi", "html_url": "https://github.com/chengdianxuezi", "followers_url": "https://api.github.com/users/chengdianxuezi/followers", "following_url": "https://api.github.com/users/chengdianxuezi/following{/other_user}", "gists_url": "https://api.github.com/users/chengdianxuezi/gists{/gist_id}", "starred_url": "https://api.github.com/users/chengdianxuezi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chengdianxuezi/subscriptions", "organizations_url": "https://api.github.com/users/chengdianxuezi/orgs", "repos_url": "https://api.github.com/users/chengdianxuezi/repos", "events_url": "https://api.github.com/users/chengdianxuezi/events{/privacy}", "received_events_url": "https://api.github.com/users/chengdianxuezi/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-27T06:58:04Z", "updated_at": "2018-08-27T07:14:56Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=28744304\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jthestness\">@jthestness</a>  before run the test, I have changed these variables name,</p>\n<pre><code>    # Get MPI rank\n    #my_rank = int(os.environ['PMI_RANK'])\n    #num_ranks = int(os.environ['PMI_SIZE'])\n\n    my_rank = int(os.environ[\"OMPI_COMM_WORLD_RANK\"])\n    MPI_LOCAL_RANK = int(os.environ[\"OMPI_COMM_WORLD_LOCAL_RANK\"])\n    num_ranks = int(os.environ[\"OMPI_COMM_WORLD_SIZE\"])\n</code></pre>\n<p>the result of mpirun -np 3 python3 -c \"import os;print(os.environ)\" as follow:</p>\n<pre><code> 'OMPI_APP_CTX_NUM_PROCS': '3'\n 'OMPI_APP_CTX_NUM_PROCS': '3'\n 'OMPI_APP_CTX_NUM_PROCS': '3'\n 'OMPI_ARGV': '-c import os;print(os.environ)'\n 'OMPI_ARGV': '-c import os;print(os.environ)'\n 'OMPI_ARGV': '-c import os;print(os.environ)'\n 'OMPI_COMMAND': 'python'\n 'OMPI_COMMAND': 'python'\n 'OMPI_COMMAND': 'python'\n 'OMPI_COMM_WORLD_LOCAL_RANK': '0'\n 'OMPI_COMM_WORLD_LOCAL_RANK': '1'\n 'OMPI_COMM_WORLD_LOCAL_RANK': '2'\n 'OMPI_COMM_WORLD_LOCAL_SIZE': '3'\n 'OMPI_COMM_WORLD_LOCAL_SIZE': '3'\n 'OMPI_COMM_WORLD_LOCAL_SIZE': '3'\n 'OMPI_COMM_WORLD_NODE_RANK': '0'\n 'OMPI_COMM_WORLD_NODE_RANK': '1'\n 'OMPI_COMM_WORLD_NODE_RANK': '2'\n 'OMPI_COMM_WORLD_RANK': '0'\n 'OMPI_COMM_WORLD_RANK': '1'\n 'OMPI_COMM_WORLD_RANK': '2'\n 'OMPI_COMM_WORLD_SIZE': '3'\n 'OMPI_COMM_WORLD_SIZE': '3'\n 'OMPI_COMM_WORLD_SIZE': '3'\n 'OMPI_FILE_LOCATION': '/tmp/ompi.e92e09614.130324/pid.24691/0/0'\n 'OMPI_FILE_LOCATION': '/tmp/ompi.e92e09614.130324/pid.24691/0/0'\n 'OMPI_FILE_LOCATION': '/tmp/ompi.e92e09614.130324/pid.24691/0/0'\n 'OMPI_FIRST_RANKS': '0'\n 'OMPI_FIRST_RANKS': '0'\n 'OMPI_FIRST_RANKS': '0'\n 'OMPI_MCA_ess_base_jobid': '2824536065'\n 'OMPI_MCA_ess_base_jobid': '2824536065'\n 'OMPI_MCA_ess_base_jobid': '2824536065'\n 'OMPI_MCA_ess_base_vpid': '0'\n 'OMPI_MCA_ess_base_vpid': '1'\n 'OMPI_MCA_ess_base_vpid': '2'\n 'OMPI_MCA_ess': '^singleton'\n 'OMPI_MCA_ess': '^singleton'\n 'OMPI_MCA_ess': '^singleton'\n 'OMPI_MCA_initial_wdir': '/home/xiangqin.oxq/test/tensorflow_mpi/tensorflow/contrib/mpi_collectives'\n 'OMPI_MCA_initial_wdir': '/home/xiangqin.oxq/test/tensorflow_mpi/tensorflow/contrib/mpi_collectives'\n 'OMPI_MCA_initial_wdir': '/home/xiangqin.oxq/test/tensorflow_mpi/tensorflow/contrib/mpi_collectives'\n 'OMPI_MCA_mpi_yield_when_idle': '0'\n 'OMPI_MCA_mpi_yield_when_idle': '0'\n 'OMPI_MCA_mpi_yield_when_idle': '0'\n 'OMPI_MCA_orte_app_num': '0'\n 'OMPI_MCA_orte_app_num': '0'\n 'OMPI_MCA_orte_app_num': '0'\n 'OMPI_MCA_orte_bound_at_launch': '1'\n 'OMPI_MCA_orte_bound_at_launch': '1'\n 'OMPI_MCA_orte_bound_at_launch': '1'\n 'OMPI_MCA_orte_ess_node_rank': '0'\n 'OMPI_MCA_orte_ess_node_rank': '1'\n 'OMPI_MCA_orte_ess_node_rank': '2'\n 'OMPI_MCA_orte_ess_num_procs': '3'\n 'OMPI_MCA_orte_ess_num_procs': '3'\n 'OMPI_MCA_orte_ess_num_procs': '3'\n 'OMPI_MCA_orte_hnp_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_hnp_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_hnp_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_jobfam_session_dir': '/tmp/ompi.e92e09614.130324/pid.24691'}\n 'OMPI_MCA_orte_jobfam_session_dir': '/tmp/ompi.e92e09614.130324/pid.24691'}\n 'OMPI_MCA_orte_jobfam_session_dir': '/tmp/ompi.e92e09614.130324/pid.24691'}\n 'OMPI_MCA_orte_launch': '1'\n 'OMPI_MCA_orte_launch': '1'\n 'OMPI_MCA_orte_launch': '1'\n 'OMPI_MCA_orte_local_daemon_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_local_daemon_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_local_daemon_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_num_nodes': '1'\n 'OMPI_MCA_orte_num_nodes': '1'\n 'OMPI_MCA_orte_num_nodes': '1'\n 'OMPI_MCA_orte_precondition_transports': '06998b4baaf1c143-656e40a9edb68e84'\n 'OMPI_MCA_orte_precondition_transports': '06998b4baaf1c143-656e40a9edb68e84'\n 'OMPI_MCA_orte_precondition_transports': '06998b4baaf1c143-656e40a9edb68e84'\n 'OMPI_MCA_orte_tmpdir_base': '/tmp'\n 'OMPI_MCA_orte_tmpdir_base': '/tmp'\n 'OMPI_MCA_orte_tmpdir_base': '/tmp'\n 'OMPI_MCA_orte_top_session_dir': '/tmp/ompi.e92e09614.130324'\n 'OMPI_MCA_orte_top_session_dir': '/tmp/ompi.e92e09614.130324'\n 'OMPI_MCA_orte_top_session_dir': '/tmp/ompi.e92e09614.130324'\n 'OMPI_MCA_pmix': '^s1\n 'OMPI_MCA_pmix': '^s1\n 'OMPI_MCA_pmix': '^s1\n 'OMPI_MCA_shmem_RUNTIME_QUERY_hint': 'mmap'\n 'OMPI_MCA_shmem_RUNTIME_QUERY_hint': 'mmap'\n 'OMPI_MCA_shmem_RUNTIME_QUERY_hint': 'mmap'\n 'OMPI_NUM_APP_CTX': '1'\n 'OMPI_NUM_APP_CTX': '1'\n 'OMPI_NUM_APP_CTX': '1'\n 'OMPI_UNIVERSE_SIZE': '32'\n 'OMPI_UNIVERSE_SIZE': '32'\n 'OMPI_UNIVERSE_SIZE': '32'\n\n</code></pre>\n<p>when I run: mpirun -np 3 python mpi_allreduce_test.py,also have the error message.but the test past finally.<br>\nI am not sure if this is normal</p>\n<pre><code>[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362080, errno = 38\n.....            ......         .....\n[e92e09614.em21:29605] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\n..\n----------------------------------------------------------------------\nRan 2 tests in 15.022s\n\nOK\n....\n\n----------------------------------------------------------------------\n----------------------------------------------------------------------\nRan 2 tests in 14.998s\n\nRan 2 tests in 14.998s\n\nOK\nOK\n\n</code></pre>", "body_text": "Hi @jthestness  before run the test, I have changed these variables name,\n    # Get MPI rank\n    #my_rank = int(os.environ['PMI_RANK'])\n    #num_ranks = int(os.environ['PMI_SIZE'])\n\n    my_rank = int(os.environ[\"OMPI_COMM_WORLD_RANK\"])\n    MPI_LOCAL_RANK = int(os.environ[\"OMPI_COMM_WORLD_LOCAL_RANK\"])\n    num_ranks = int(os.environ[\"OMPI_COMM_WORLD_SIZE\"])\n\nthe result of mpirun -np 3 python3 -c \"import os;print(os.environ)\" as follow:\n 'OMPI_APP_CTX_NUM_PROCS': '3'\n 'OMPI_APP_CTX_NUM_PROCS': '3'\n 'OMPI_APP_CTX_NUM_PROCS': '3'\n 'OMPI_ARGV': '-c import os;print(os.environ)'\n 'OMPI_ARGV': '-c import os;print(os.environ)'\n 'OMPI_ARGV': '-c import os;print(os.environ)'\n 'OMPI_COMMAND': 'python'\n 'OMPI_COMMAND': 'python'\n 'OMPI_COMMAND': 'python'\n 'OMPI_COMM_WORLD_LOCAL_RANK': '0'\n 'OMPI_COMM_WORLD_LOCAL_RANK': '1'\n 'OMPI_COMM_WORLD_LOCAL_RANK': '2'\n 'OMPI_COMM_WORLD_LOCAL_SIZE': '3'\n 'OMPI_COMM_WORLD_LOCAL_SIZE': '3'\n 'OMPI_COMM_WORLD_LOCAL_SIZE': '3'\n 'OMPI_COMM_WORLD_NODE_RANK': '0'\n 'OMPI_COMM_WORLD_NODE_RANK': '1'\n 'OMPI_COMM_WORLD_NODE_RANK': '2'\n 'OMPI_COMM_WORLD_RANK': '0'\n 'OMPI_COMM_WORLD_RANK': '1'\n 'OMPI_COMM_WORLD_RANK': '2'\n 'OMPI_COMM_WORLD_SIZE': '3'\n 'OMPI_COMM_WORLD_SIZE': '3'\n 'OMPI_COMM_WORLD_SIZE': '3'\n 'OMPI_FILE_LOCATION': '/tmp/ompi.e92e09614.130324/pid.24691/0/0'\n 'OMPI_FILE_LOCATION': '/tmp/ompi.e92e09614.130324/pid.24691/0/0'\n 'OMPI_FILE_LOCATION': '/tmp/ompi.e92e09614.130324/pid.24691/0/0'\n 'OMPI_FIRST_RANKS': '0'\n 'OMPI_FIRST_RANKS': '0'\n 'OMPI_FIRST_RANKS': '0'\n 'OMPI_MCA_ess_base_jobid': '2824536065'\n 'OMPI_MCA_ess_base_jobid': '2824536065'\n 'OMPI_MCA_ess_base_jobid': '2824536065'\n 'OMPI_MCA_ess_base_vpid': '0'\n 'OMPI_MCA_ess_base_vpid': '1'\n 'OMPI_MCA_ess_base_vpid': '2'\n 'OMPI_MCA_ess': '^singleton'\n 'OMPI_MCA_ess': '^singleton'\n 'OMPI_MCA_ess': '^singleton'\n 'OMPI_MCA_initial_wdir': '/home/xiangqin.oxq/test/tensorflow_mpi/tensorflow/contrib/mpi_collectives'\n 'OMPI_MCA_initial_wdir': '/home/xiangqin.oxq/test/tensorflow_mpi/tensorflow/contrib/mpi_collectives'\n 'OMPI_MCA_initial_wdir': '/home/xiangqin.oxq/test/tensorflow_mpi/tensorflow/contrib/mpi_collectives'\n 'OMPI_MCA_mpi_yield_when_idle': '0'\n 'OMPI_MCA_mpi_yield_when_idle': '0'\n 'OMPI_MCA_mpi_yield_when_idle': '0'\n 'OMPI_MCA_orte_app_num': '0'\n 'OMPI_MCA_orte_app_num': '0'\n 'OMPI_MCA_orte_app_num': '0'\n 'OMPI_MCA_orte_bound_at_launch': '1'\n 'OMPI_MCA_orte_bound_at_launch': '1'\n 'OMPI_MCA_orte_bound_at_launch': '1'\n 'OMPI_MCA_orte_ess_node_rank': '0'\n 'OMPI_MCA_orte_ess_node_rank': '1'\n 'OMPI_MCA_orte_ess_node_rank': '2'\n 'OMPI_MCA_orte_ess_num_procs': '3'\n 'OMPI_MCA_orte_ess_num_procs': '3'\n 'OMPI_MCA_orte_ess_num_procs': '3'\n 'OMPI_MCA_orte_hnp_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_hnp_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_hnp_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_jobfam_session_dir': '/tmp/ompi.e92e09614.130324/pid.24691'}\n 'OMPI_MCA_orte_jobfam_session_dir': '/tmp/ompi.e92e09614.130324/pid.24691'}\n 'OMPI_MCA_orte_jobfam_session_dir': '/tmp/ompi.e92e09614.130324/pid.24691'}\n 'OMPI_MCA_orte_launch': '1'\n 'OMPI_MCA_orte_launch': '1'\n 'OMPI_MCA_orte_launch': '1'\n 'OMPI_MCA_orte_local_daemon_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_local_daemon_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_local_daemon_uri': '2824536064.0;tcp://11.251.181.233\n 'OMPI_MCA_orte_num_nodes': '1'\n 'OMPI_MCA_orte_num_nodes': '1'\n 'OMPI_MCA_orte_num_nodes': '1'\n 'OMPI_MCA_orte_precondition_transports': '06998b4baaf1c143-656e40a9edb68e84'\n 'OMPI_MCA_orte_precondition_transports': '06998b4baaf1c143-656e40a9edb68e84'\n 'OMPI_MCA_orte_precondition_transports': '06998b4baaf1c143-656e40a9edb68e84'\n 'OMPI_MCA_orte_tmpdir_base': '/tmp'\n 'OMPI_MCA_orte_tmpdir_base': '/tmp'\n 'OMPI_MCA_orte_tmpdir_base': '/tmp'\n 'OMPI_MCA_orte_top_session_dir': '/tmp/ompi.e92e09614.130324'\n 'OMPI_MCA_orte_top_session_dir': '/tmp/ompi.e92e09614.130324'\n 'OMPI_MCA_orte_top_session_dir': '/tmp/ompi.e92e09614.130324'\n 'OMPI_MCA_pmix': '^s1\n 'OMPI_MCA_pmix': '^s1\n 'OMPI_MCA_pmix': '^s1\n 'OMPI_MCA_shmem_RUNTIME_QUERY_hint': 'mmap'\n 'OMPI_MCA_shmem_RUNTIME_QUERY_hint': 'mmap'\n 'OMPI_MCA_shmem_RUNTIME_QUERY_hint': 'mmap'\n 'OMPI_NUM_APP_CTX': '1'\n 'OMPI_NUM_APP_CTX': '1'\n 'OMPI_NUM_APP_CTX': '1'\n 'OMPI_UNIVERSE_SIZE': '32'\n 'OMPI_UNIVERSE_SIZE': '32'\n 'OMPI_UNIVERSE_SIZE': '32'\n\n\nwhen I run: mpirun -np 3 python mpi_allreduce_test.py,also have the error message.but the test past finally.\nI am not sure if this is normal\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362080, errno = 38\n.....            ......         .....\n[e92e09614.em21:29605] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\n[e92e09614.em21:29604] Read -1, expected 2362084, errno = 38\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\n..\n----------------------------------------------------------------------\nRan 2 tests in 15.022s\n\nOK\n....\n\n----------------------------------------------------------------------\n----------------------------------------------------------------------\nRan 2 tests in 14.998s\n\nRan 2 tests in 14.998s\n\nOK\nOK", "body": "Hi @jthestness  before run the test, I have changed these variables name,\r\n```\r\n    # Get MPI rank\r\n    #my_rank = int(os.environ['PMI_RANK'])\r\n    #num_ranks = int(os.environ['PMI_SIZE'])\r\n\r\n    my_rank = int(os.environ[\"OMPI_COMM_WORLD_RANK\"])\r\n    MPI_LOCAL_RANK = int(os.environ[\"OMPI_COMM_WORLD_LOCAL_RANK\"])\r\n    num_ranks = int(os.environ[\"OMPI_COMM_WORLD_SIZE\"])\r\n```\r\nthe result of mpirun -np 3 python3 -c \"import os;print(os.environ)\" as follow:\r\n````\r\n 'OMPI_APP_CTX_NUM_PROCS': '3'\r\n 'OMPI_APP_CTX_NUM_PROCS': '3'\r\n 'OMPI_APP_CTX_NUM_PROCS': '3'\r\n 'OMPI_ARGV': '-c import os;print(os.environ)'\r\n 'OMPI_ARGV': '-c import os;print(os.environ)'\r\n 'OMPI_ARGV': '-c import os;print(os.environ)'\r\n 'OMPI_COMMAND': 'python'\r\n 'OMPI_COMMAND': 'python'\r\n 'OMPI_COMMAND': 'python'\r\n 'OMPI_COMM_WORLD_LOCAL_RANK': '0'\r\n 'OMPI_COMM_WORLD_LOCAL_RANK': '1'\r\n 'OMPI_COMM_WORLD_LOCAL_RANK': '2'\r\n 'OMPI_COMM_WORLD_LOCAL_SIZE': '3'\r\n 'OMPI_COMM_WORLD_LOCAL_SIZE': '3'\r\n 'OMPI_COMM_WORLD_LOCAL_SIZE': '3'\r\n 'OMPI_COMM_WORLD_NODE_RANK': '0'\r\n 'OMPI_COMM_WORLD_NODE_RANK': '1'\r\n 'OMPI_COMM_WORLD_NODE_RANK': '2'\r\n 'OMPI_COMM_WORLD_RANK': '0'\r\n 'OMPI_COMM_WORLD_RANK': '1'\r\n 'OMPI_COMM_WORLD_RANK': '2'\r\n 'OMPI_COMM_WORLD_SIZE': '3'\r\n 'OMPI_COMM_WORLD_SIZE': '3'\r\n 'OMPI_COMM_WORLD_SIZE': '3'\r\n 'OMPI_FILE_LOCATION': '/tmp/ompi.e92e09614.130324/pid.24691/0/0'\r\n 'OMPI_FILE_LOCATION': '/tmp/ompi.e92e09614.130324/pid.24691/0/0'\r\n 'OMPI_FILE_LOCATION': '/tmp/ompi.e92e09614.130324/pid.24691/0/0'\r\n 'OMPI_FIRST_RANKS': '0'\r\n 'OMPI_FIRST_RANKS': '0'\r\n 'OMPI_FIRST_RANKS': '0'\r\n 'OMPI_MCA_ess_base_jobid': '2824536065'\r\n 'OMPI_MCA_ess_base_jobid': '2824536065'\r\n 'OMPI_MCA_ess_base_jobid': '2824536065'\r\n 'OMPI_MCA_ess_base_vpid': '0'\r\n 'OMPI_MCA_ess_base_vpid': '1'\r\n 'OMPI_MCA_ess_base_vpid': '2'\r\n 'OMPI_MCA_ess': '^singleton'\r\n 'OMPI_MCA_ess': '^singleton'\r\n 'OMPI_MCA_ess': '^singleton'\r\n 'OMPI_MCA_initial_wdir': '/home/xiangqin.oxq/test/tensorflow_mpi/tensorflow/contrib/mpi_collectives'\r\n 'OMPI_MCA_initial_wdir': '/home/xiangqin.oxq/test/tensorflow_mpi/tensorflow/contrib/mpi_collectives'\r\n 'OMPI_MCA_initial_wdir': '/home/xiangqin.oxq/test/tensorflow_mpi/tensorflow/contrib/mpi_collectives'\r\n 'OMPI_MCA_mpi_yield_when_idle': '0'\r\n 'OMPI_MCA_mpi_yield_when_idle': '0'\r\n 'OMPI_MCA_mpi_yield_when_idle': '0'\r\n 'OMPI_MCA_orte_app_num': '0'\r\n 'OMPI_MCA_orte_app_num': '0'\r\n 'OMPI_MCA_orte_app_num': '0'\r\n 'OMPI_MCA_orte_bound_at_launch': '1'\r\n 'OMPI_MCA_orte_bound_at_launch': '1'\r\n 'OMPI_MCA_orte_bound_at_launch': '1'\r\n 'OMPI_MCA_orte_ess_node_rank': '0'\r\n 'OMPI_MCA_orte_ess_node_rank': '1'\r\n 'OMPI_MCA_orte_ess_node_rank': '2'\r\n 'OMPI_MCA_orte_ess_num_procs': '3'\r\n 'OMPI_MCA_orte_ess_num_procs': '3'\r\n 'OMPI_MCA_orte_ess_num_procs': '3'\r\n 'OMPI_MCA_orte_hnp_uri': '2824536064.0;tcp://11.251.181.233\r\n 'OMPI_MCA_orte_hnp_uri': '2824536064.0;tcp://11.251.181.233\r\n 'OMPI_MCA_orte_hnp_uri': '2824536064.0;tcp://11.251.181.233\r\n 'OMPI_MCA_orte_jobfam_session_dir': '/tmp/ompi.e92e09614.130324/pid.24691'}\r\n 'OMPI_MCA_orte_jobfam_session_dir': '/tmp/ompi.e92e09614.130324/pid.24691'}\r\n 'OMPI_MCA_orte_jobfam_session_dir': '/tmp/ompi.e92e09614.130324/pid.24691'}\r\n 'OMPI_MCA_orte_launch': '1'\r\n 'OMPI_MCA_orte_launch': '1'\r\n 'OMPI_MCA_orte_launch': '1'\r\n 'OMPI_MCA_orte_local_daemon_uri': '2824536064.0;tcp://11.251.181.233\r\n 'OMPI_MCA_orte_local_daemon_uri': '2824536064.0;tcp://11.251.181.233\r\n 'OMPI_MCA_orte_local_daemon_uri': '2824536064.0;tcp://11.251.181.233\r\n 'OMPI_MCA_orte_num_nodes': '1'\r\n 'OMPI_MCA_orte_num_nodes': '1'\r\n 'OMPI_MCA_orte_num_nodes': '1'\r\n 'OMPI_MCA_orte_precondition_transports': '06998b4baaf1c143-656e40a9edb68e84'\r\n 'OMPI_MCA_orte_precondition_transports': '06998b4baaf1c143-656e40a9edb68e84'\r\n 'OMPI_MCA_orte_precondition_transports': '06998b4baaf1c143-656e40a9edb68e84'\r\n 'OMPI_MCA_orte_tmpdir_base': '/tmp'\r\n 'OMPI_MCA_orte_tmpdir_base': '/tmp'\r\n 'OMPI_MCA_orte_tmpdir_base': '/tmp'\r\n 'OMPI_MCA_orte_top_session_dir': '/tmp/ompi.e92e09614.130324'\r\n 'OMPI_MCA_orte_top_session_dir': '/tmp/ompi.e92e09614.130324'\r\n 'OMPI_MCA_orte_top_session_dir': '/tmp/ompi.e92e09614.130324'\r\n 'OMPI_MCA_pmix': '^s1\r\n 'OMPI_MCA_pmix': '^s1\r\n 'OMPI_MCA_pmix': '^s1\r\n 'OMPI_MCA_shmem_RUNTIME_QUERY_hint': 'mmap'\r\n 'OMPI_MCA_shmem_RUNTIME_QUERY_hint': 'mmap'\r\n 'OMPI_MCA_shmem_RUNTIME_QUERY_hint': 'mmap'\r\n 'OMPI_NUM_APP_CTX': '1'\r\n 'OMPI_NUM_APP_CTX': '1'\r\n 'OMPI_NUM_APP_CTX': '1'\r\n 'OMPI_UNIVERSE_SIZE': '32'\r\n 'OMPI_UNIVERSE_SIZE': '32'\r\n 'OMPI_UNIVERSE_SIZE': '32'\r\n\r\n````\r\n\r\nwhen I run: mpirun -np 3 python mpi_allreduce_test.py,also have the error message.but the test past finally.\r\nI am not sure if this is normal\r\n\r\n```\r\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\r\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\r\n[e92e09614.em21:29604] Read -1, expected 2362084, errno = 38\r\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\r\n[e92e09614.em21:29604] Read -1, expected 2362084, errno = 38\r\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\r\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\r\n[e92e09614.em21:29604] Read -1, expected 2362080, errno = 38\r\n.....            ......         .....\r\n[e92e09614.em21:29605] Read -1, expected 2362084, errno = 38\r\n[e92e09614.em21:29603] Read -1, expected 2362084, errno = 38\r\n[e92e09614.em21:29604] Read -1, expected 2362080, errno = 38\r\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\r\n[e92e09614.em21:29603] Read -1, expected 2362080, errno = 38\r\n[e92e09614.em21:29604] Read -1, expected 2362084, errno = 38\r\n[e92e09614.em21:29605] Read -1, expected 2362080, errno = 38\r\n..\r\n----------------------------------------------------------------------\r\nRan 2 tests in 15.022s\r\n\r\nOK\r\n....\r\n\r\n----------------------------------------------------------------------\r\n----------------------------------------------------------------------\r\nRan 2 tests in 14.998s\r\n\r\nRan 2 tests in 14.998s\r\n\r\nOK\r\nOK\r\n\r\n```"}
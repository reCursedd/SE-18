{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/240056408", "html_url": "https://github.com/tensorflow/tensorflow/issues/3812#issuecomment-240056408", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3812", "id": 240056408, "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDA1NjQwOA==", "user": {"login": "coderXiangLi", "id": 8342490, "node_id": "MDQ6VXNlcjgzNDI0OTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/8342490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coderXiangLi", "html_url": "https://github.com/coderXiangLi", "followers_url": "https://api.github.com/users/coderXiangLi/followers", "following_url": "https://api.github.com/users/coderXiangLi/following{/other_user}", "gists_url": "https://api.github.com/users/coderXiangLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/coderXiangLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coderXiangLi/subscriptions", "organizations_url": "https://api.github.com/users/coderXiangLi/orgs", "repos_url": "https://api.github.com/users/coderXiangLi/repos", "events_url": "https://api.github.com/users/coderXiangLi/events{/privacy}", "received_events_url": "https://api.github.com/users/coderXiangLi/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-16T09:47:15Z", "updated_at": "2016-08-16T10:02:41Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a><br>\nI just find the method <code>_AddRestoreOps</code> in <code>Saver</code>.</p>\n<p>And I try to change this node device, from Variable's device to chief device. And it can restore the whole cluster well.</p>\n<pre><code>  new_device = '/job:worker/task:0'\n  with ops.device(graph_util.set_cpu0(new_device) if v.device else None):\n# with ops.device(graph_util.set_cpu0(v.device) if v.device else None)\n</code></pre>\n<p>Is this a propositional solution for this issue? Or maybe it may call other errors.</p>", "body_text": "@mrry\nI just find the method _AddRestoreOps in Saver.\nAnd I try to change this node device, from Variable's device to chief device. And it can restore the whole cluster well.\n  new_device = '/job:worker/task:0'\n  with ops.device(graph_util.set_cpu0(new_device) if v.device else None):\n# with ops.device(graph_util.set_cpu0(v.device) if v.device else None)\n\nIs this a propositional solution for this issue? Or maybe it may call other errors.", "body": "@mrry \nI just find the method `_AddRestoreOps` in `Saver`.\n\nAnd I try to change this node device, from Variable's device to chief device. And it can restore the whole cluster well.\n\n```\n  new_device = '/job:worker/task:0'\n  with ops.device(graph_util.set_cpu0(new_device) if v.device else None):\n# with ops.device(graph_util.set_cpu0(v.device) if v.device else None)\n```\n\nIs this a propositional solution for this issue? Or maybe it may call other errors.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4685", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4685/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4685/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4685/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4685", "id": 180324821, "node_id": "MDU6SXNzdWUxODAzMjQ4MjE=", "number": 4685, "title": "ResourceExhaustedError when formating ImageNet data to TFRecord", "user": {"login": "renganxu", "id": 3160803, "node_id": "MDQ6VXNlcjMxNjA4MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/3160803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/renganxu", "html_url": "https://github.com/renganxu", "followers_url": "https://api.github.com/users/renganxu/followers", "following_url": "https://api.github.com/users/renganxu/following{/other_user}", "gists_url": "https://api.github.com/users/renganxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/renganxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/renganxu/subscriptions", "organizations_url": "https://api.github.com/users/renganxu/orgs", "repos_url": "https://api.github.com/users/renganxu/repos", "events_url": "https://api.github.com/users/renganxu/events{/privacy}", "received_events_url": "https://api.github.com/users/renganxu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "cshallue", "id": 20667461, "node_id": "MDQ6VXNlcjIwNjY3NDYx", "avatar_url": "https://avatars1.githubusercontent.com/u/20667461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cshallue", "html_url": "https://github.com/cshallue", "followers_url": "https://api.github.com/users/cshallue/followers", "following_url": "https://api.github.com/users/cshallue/following{/other_user}", "gists_url": "https://api.github.com/users/cshallue/gists{/gist_id}", "starred_url": "https://api.github.com/users/cshallue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cshallue/subscriptions", "organizations_url": "https://api.github.com/users/cshallue/orgs", "repos_url": "https://api.github.com/users/cshallue/repos", "events_url": "https://api.github.com/users/cshallue/events{/privacy}", "received_events_url": "https://api.github.com/users/cshallue/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cshallue", "id": 20667461, "node_id": "MDQ6VXNlcjIwNjY3NDYx", "avatar_url": "https://avatars1.githubusercontent.com/u/20667461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cshallue", "html_url": "https://github.com/cshallue", "followers_url": "https://api.github.com/users/cshallue/followers", "following_url": "https://api.github.com/users/cshallue/following{/other_user}", "gists_url": "https://api.github.com/users/cshallue/gists{/gist_id}", "starred_url": "https://api.github.com/users/cshallue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cshallue/subscriptions", "organizations_url": "https://api.github.com/users/cshallue/orgs", "repos_url": "https://api.github.com/users/cshallue/repos", "events_url": "https://api.github.com/users/cshallue/events{/privacy}", "received_events_url": "https://api.github.com/users/cshallue/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2016-09-30T14:56:41Z", "updated_at": "2016-10-01T01:15:59Z", "closed_at": "2016-10-01T01:15:59Z", "author_association": "NONE", "body_html": "<p>Hi All Tensorflow users,</p>\n<p>I followed the steps in <a href=\"https://github.com/tensorflow/models/tree/master/inception\">https://github.com/tensorflow/models/tree/master/inception</a> to build the imagenet to TFRecord format. But when I execute the command<br>\n\"bazel-bin/inception/download_and_preprocess_imagenet \"${DATA_DIR}\"\",<br>\nI have the following errors:</p>\n<p>Exception in thread Thread-6:<br>\nTraceback (most recent call last):<br>\nFile \"/usr/lib64/python2.7/threading.py\", line 811, in <strong>bootstrap_inner<br>\nFile \"/usr/lib64/python2.7/threading.py\", line 764, in run<br>\nFile \"/home/rengan/.cache/bazel/_bazel_rengan/2c9ddf610cf302ceda3f2b852669382c/execroot/inception/bazel-out/local-fastbuild/bin/inception/build_imagenet_data.runfiles/inception/inception/data/build_imagenet_data.py\", line 388, in _process_image_files_batch<br>\nimage_buffer, height, width = _process_image(filename, coder)<br>\nFile \"/home/rengan/.cache/bazel/_bazel_rengan/2c9ddf610cf302ceda3f2b852669382c/execroot/inception/bazel-out/local-fastbuild/bin/inception/build_imagenet_data.runfiles/inception/inception/data/build_imagenet_data.py\", line 316, in _process_image<br>\nimage_data = tf.gfile.FastGFile(filename, 'r').read()<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/lib/io/file_io.py\", line 102, in read<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/lib/io/file_io.py\", line 72, in _preread_check<br>\nFile \"/usr/lib64/python2.7/contextlib.py\", line 24, in __exit</strong><br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/errors.py\", line 463, in raise_exception_on_not_ok_status<br>\nResourceExhaustedError: /cm/shared/scratch/rengan/Data/imagenet-data/raw-data/train//n03124170/n03124170_675.JPEG</p>\n<p>There are similar errors in other threads. It successfully generated 128 validation data but less than 100 training data (should be 1024).</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?: no related issues were found.</h3>\n<h3>Environment info</h3>\n<p>Operating System: Redhat 7.2</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):<br>\n-rw-r--r-- 1 root root   560184 May  8 02:00 /usr/local/cuda-8.0/lib64/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root       16 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so -&gt; libcudart.so.8.0<br>\nlrwxrwxrwx 1 root root       19 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.27<br>\n-rwxr-xr-x 1 root root   394472 May  8 02:00 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27<br>\n-rw-r--r-- 1 root root   737516 May  8 02:00 /usr/local/cuda-8.0/lib64/libcudart_static.a<br>\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so<br>\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5<br>\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5.1.3<br>\n-rw-r--r-- 1 root root 59715990 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn_static.a</p>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>): <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/f98c5ded31d7da0c2d127c28b2c16f0307a368f0/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/f98c5ded31d7da0c2d127c28b2c16f0307a368f0\"><tt>f98c5de</tt></a></li>\n<li>The output of <code>bazel version</code>:<br>\nWARNING: Output base '/home/rengan/.cache/bazel/_bazel_rengan/2c9ddf610cf302ceda3f2b852669382c' is on NFS. This may lead to surprising failures and undetermined behavior.<br>\n.<br>\nBuild label: 0.3.1- (@non-git)<br>\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Thu Sep 29 22:19:27 2016 (1475187567)<br>\nBuild timestamp: 1475187567<br>\nBuild timestamp as int: 1475187567</li>\n</ol>\n<p>Thanks in advance.</p>", "body_text": "Hi All Tensorflow users,\nI followed the steps in https://github.com/tensorflow/models/tree/master/inception to build the imagenet to TFRecord format. But when I execute the command\n\"bazel-bin/inception/download_and_preprocess_imagenet \"${DATA_DIR}\"\",\nI have the following errors:\nException in thread Thread-6:\nTraceback (most recent call last):\nFile \"/usr/lib64/python2.7/threading.py\", line 811, in bootstrap_inner\nFile \"/usr/lib64/python2.7/threading.py\", line 764, in run\nFile \"/home/rengan/.cache/bazel/_bazel_rengan/2c9ddf610cf302ceda3f2b852669382c/execroot/inception/bazel-out/local-fastbuild/bin/inception/build_imagenet_data.runfiles/inception/inception/data/build_imagenet_data.py\", line 388, in _process_image_files_batch\nimage_buffer, height, width = _process_image(filename, coder)\nFile \"/home/rengan/.cache/bazel/_bazel_rengan/2c9ddf610cf302ceda3f2b852669382c/execroot/inception/bazel-out/local-fastbuild/bin/inception/build_imagenet_data.runfiles/inception/inception/data/build_imagenet_data.py\", line 316, in _process_image\nimage_data = tf.gfile.FastGFile(filename, 'r').read()\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/lib/io/file_io.py\", line 102, in read\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/lib/io/file_io.py\", line 72, in _preread_check\nFile \"/usr/lib64/python2.7/contextlib.py\", line 24, in __exit\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/errors.py\", line 463, in raise_exception_on_not_ok_status\nResourceExhaustedError: /cm/shared/scratch/rengan/Data/imagenet-data/raw-data/train//n03124170/n03124170_675.JPEG\nThere are similar errors in other threads. It successfully generated 128 validation data but less than 100 training data (should be 1024).\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?: no related issues were found.\nEnvironment info\nOperating System: Redhat 7.2\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n-rw-r--r-- 1 root root   560184 May  8 02:00 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 root root   394472 May  8 02:00 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 May  8 02:00 /usr/local/cuda-8.0/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5.1.3\n-rw-r--r-- 1 root root 59715990 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn_static.a\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD): f98c5de\nThe output of bazel version:\nWARNING: Output base '/home/rengan/.cache/bazel/_bazel_rengan/2c9ddf610cf302ceda3f2b852669382c' is on NFS. This may lead to surprising failures and undetermined behavior.\n.\nBuild label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Sep 29 22:19:27 2016 (1475187567)\nBuild timestamp: 1475187567\nBuild timestamp as int: 1475187567\n\nThanks in advance.", "body": "Hi All Tensorflow users,\n\nI followed the steps in https://github.com/tensorflow/models/tree/master/inception to build the imagenet to TFRecord format. But when I execute the command \n\"bazel-bin/inception/download_and_preprocess_imagenet \"${DATA_DIR}\"\", \nI have the following errors:\n\nException in thread Thread-6:\nTraceback (most recent call last):\n  File \"/usr/lib64/python2.7/threading.py\", line 811, in **bootstrap_inner\n  File \"/usr/lib64/python2.7/threading.py\", line 764, in run\n  File \"/home/rengan/.cache/bazel/_bazel_rengan/2c9ddf610cf302ceda3f2b852669382c/execroot/inception/bazel-out/local-fastbuild/bin/inception/build_imagenet_data.runfiles/inception/inception/data/build_imagenet_data.py\", line 388, in _process_image_files_batch\n    image_buffer, height, width = _process_image(filename, coder)\n  File \"/home/rengan/.cache/bazel/_bazel_rengan/2c9ddf610cf302ceda3f2b852669382c/execroot/inception/bazel-out/local-fastbuild/bin/inception/build_imagenet_data.runfiles/inception/inception/data/build_imagenet_data.py\", line 316, in _process_image\n    image_data = tf.gfile.FastGFile(filename, 'r').read()\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/lib/io/file_io.py\", line 102, in read\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/lib/io/file_io.py\", line 72, in _preread_check\n  File \"/usr/lib64/python2.7/contextlib.py\", line 24, in __exit**\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/errors.py\", line 463, in raise_exception_on_not_ok_status\nResourceExhaustedError: /cm/shared/scratch/rengan/Data/imagenet-data/raw-data/train//n03124170/n03124170_675.JPEG\n\nThere are similar errors in other threads. It successfully generated 128 validation data but less than 100 training data (should be 1024).\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?: no related issues were found.\n### Environment info\n\nOperating System: Redhat 7.2\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n-rw-r--r-- 1 root root   560184 May  8 02:00 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 root root   394472 May  8 02:00 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 May  8 02:00 /usr/local/cuda-8.0/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5.1.3\n-rw-r--r-- 1 root root 59715990 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n\nIf installed from source, provide \n1. The commit hash (`git rev-parse HEAD`): f98c5ded31d7da0c2d127c28b2c16f0307a368f0\n2. The output of `bazel version`: \nWARNING: Output base '/home/rengan/.cache/bazel/_bazel_rengan/2c9ddf610cf302ceda3f2b852669382c' is on NFS. This may lead to surprising failures and undetermined behavior.\n.\nBuild label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Sep 29 22:19:27 2016 (1475187567)\nBuild timestamp: 1475187567\nBuild timestamp as int: 1475187567\n\nThanks in advance.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/422911191", "html_url": "https://github.com/tensorflow/tensorflow/issues/20369#issuecomment-422911191", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20369", "id": 422911191, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjkxMTE5MQ==", "user": {"login": "lissyx", "id": 1645737, "node_id": "MDQ6VXNlcjE2NDU3Mzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1645737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lissyx", "html_url": "https://github.com/lissyx", "followers_url": "https://api.github.com/users/lissyx/followers", "following_url": "https://api.github.com/users/lissyx/following{/other_user}", "gists_url": "https://api.github.com/users/lissyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/lissyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lissyx/subscriptions", "organizations_url": "https://api.github.com/users/lissyx/orgs", "repos_url": "https://api.github.com/users/lissyx/repos", "events_url": "https://api.github.com/users/lissyx/events{/privacy}", "received_events_url": "https://api.github.com/users/lissyx/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-19T18:32:49Z", "updated_at": "2018-09-19T18:32:49Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15736910\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zheng-xq\">@zheng-xq</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13089297\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/robieta\">@robieta</a> Ok, my code works if I hack around <code>Const</code>:</p>\n<pre><code>diff --git a/tensorflow/core/kernels/constant_op.cc b/tensorflow/core/kernels/constant_op.cc\nindex 426c404f43..d7973296ca 100644\n--- a/tensorflow/core/kernels/constant_op.cc\n+++ b/tensorflow/core/kernels/constant_op.cc\n@@ -108,6 +108,7 @@ REGISTER_KERNEL(GPU, int16);\n REGISTER_KERNEL(GPU, qint16);\n REGISTER_KERNEL(GPU, quint16);\n REGISTER_KERNEL(GPU, uint32);\n+REGISTER_KERNEL(GPU, int32);\n REGISTER_KERNEL(GPU, qint32);\n REGISTER_KERNEL(GPU, int64);\n REGISTER_KERNEL(GPU, uint64);\n</code></pre>\n<p>I am not convinced, however, that this is a viable solution. According to your comment earlier, I'm wondering if it's normal or not that we get a <code>int32</code>, it's within <code>LSTMBlockFusedCell</code>.</p>", "body_text": "@zheng-xq @robieta Ok, my code works if I hack around Const:\ndiff --git a/tensorflow/core/kernels/constant_op.cc b/tensorflow/core/kernels/constant_op.cc\nindex 426c404f43..d7973296ca 100644\n--- a/tensorflow/core/kernels/constant_op.cc\n+++ b/tensorflow/core/kernels/constant_op.cc\n@@ -108,6 +108,7 @@ REGISTER_KERNEL(GPU, int16);\n REGISTER_KERNEL(GPU, qint16);\n REGISTER_KERNEL(GPU, quint16);\n REGISTER_KERNEL(GPU, uint32);\n+REGISTER_KERNEL(GPU, int32);\n REGISTER_KERNEL(GPU, qint32);\n REGISTER_KERNEL(GPU, int64);\n REGISTER_KERNEL(GPU, uint64);\n\nI am not convinced, however, that this is a viable solution. According to your comment earlier, I'm wondering if it's normal or not that we get a int32, it's within LSTMBlockFusedCell.", "body": "@zheng-xq @robieta Ok, my code works if I hack around `Const`:\r\n```\r\ndiff --git a/tensorflow/core/kernels/constant_op.cc b/tensorflow/core/kernels/constant_op.cc\r\nindex 426c404f43..d7973296ca 100644\r\n--- a/tensorflow/core/kernels/constant_op.cc\r\n+++ b/tensorflow/core/kernels/constant_op.cc\r\n@@ -108,6 +108,7 @@ REGISTER_KERNEL(GPU, int16);\r\n REGISTER_KERNEL(GPU, qint16);\r\n REGISTER_KERNEL(GPU, quint16);\r\n REGISTER_KERNEL(GPU, uint32);\r\n+REGISTER_KERNEL(GPU, int32);\r\n REGISTER_KERNEL(GPU, qint32);\r\n REGISTER_KERNEL(GPU, int64);\r\n REGISTER_KERNEL(GPU, uint64);\r\n```\r\n\r\nI am not convinced, however, that this is a viable solution. According to your comment earlier, I'm wondering if it's normal or not that we get a `int32`, it's within `LSTMBlockFusedCell`."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5882", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5882/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5882/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5882/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5882", "id": 191856426, "node_id": "MDU6SXNzdWUxOTE4NTY0MjY=", "number": 5882, "title": "TF sometimes hangs indefinitely when initializing variables", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2016-11-27T11:32:42Z", "updated_at": "2018-01-20T11:06:50Z", "closed_at": "2017-03-10T02:57:37Z", "author_association": "NONE", "body_html": "<p>When doing a hyperoptimization TF hangs sometimes (once every 30 times) when initializing variables.<br>\nThere are no error messages and it stalls for hours so I have to kill it manually.</p>\n<p>I have included information below. Please let me know if there's anything else you need.</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"159687812\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2788\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2788/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/2788\">#2788</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"187692328\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5448\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/5448/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/5448\">#5448</a></p>\n<h3>Environment info</h3>\n<p>Operating System:<br>\nDebian 8.6<br>\nKernel: Linux 3.16.0-4-amd64</p>\n<h3>Installed version of CUDA and cuDNN:</h3>\n<p>/usr/local/cuda/lib64/libcudadevrt.a    /usr/local/cuda/lib64/libcudart.so.8.0.44  /usr/local/cuda/lib64/libcudnn.so.5<br>\n/usr/local/cuda/lib64/libcudart.so      /usr/local/cuda/lib64/libcudart_static.a   /usr/local/cuda/lib64/libcudnn.so.5.1.5<br>\n/usr/local/cuda/lib64/libcudart.so.8.0  /usr/local/cuda/lib64/libcudnn.so          /usr/local/cuda/lib64/libcudnn_static.a</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>\n<p>A link to the pip package you installed:<br>\n<a href=\"https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0-cp34-cp34m-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0-cp34-cp34m-linux_x86_64.whl</a></p>\n</li>\n<li>\n<p>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.<br>\n0.11.0</p>\n</li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<pre><code># clean up from previous trial\nself.sess.close()\ntf.reset_default_graph()\n\n# initialize model\ntf_config = tf.ConfigProto()\ntf_config.gpu_options.per_process_gpu_memory_fraction = 0.45\nself.sess = tf.Session(config=tf_config)\n\n*** create model ***\n\nself.sess.run(tf.initialize_all_variables())\n</code></pre>\n<p>&lt;--- HANGS HERE</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>initialize variables one by one --&gt; hangs at first variable<br>\nconfig.operation_timeout_in_ms=60000 (as a temporary workaround)</p>\n<h3>Logs or other output that would be helpful</h3>\n<pre><code>tail -n 2 nohup.log:\n\n2016-11-26 23:48:13.170 |  INFO |         create_model | tf_model.py:277 | 47.9 | Initializing all variables...\nInitializing: learning_rate:0\n\n</code></pre>\n<pre><code>strace -p 15477 --&gt; \n\nProcess 15477 attached\nfutex(0x7ffc1aabd91c, FUTEX_WAIT_PRIVATE, 1, NULL\n\n</code></pre>\n<pre><code>nvidia-smi --&gt;\n\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.48                 Driver Version: 367.48                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 980 Ti  Off  | 0000:01:00.0     Off |                  N/A |\n|  1%   60C    P2    44W / 275W |   2901MiB /  6077MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0     15477    C   python                                        2899MiB |\n+-----------------------------------------------------------------------------+\n</code></pre>", "body_text": "When doing a hyperoptimization TF hangs sometimes (once every 30 times) when initializing variables.\nThere are no error messages and it stalls for hours so I have to kill it manually.\nI have included information below. Please let me know if there's anything else you need.\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n#2788\n#5448\nEnvironment info\nOperating System:\nDebian 8.6\nKernel: Linux 3.16.0-4-amd64\nInstalled version of CUDA and cuDNN:\n/usr/local/cuda/lib64/libcudadevrt.a    /usr/local/cuda/lib64/libcudart.so.8.0.44  /usr/local/cuda/lib64/libcudnn.so.5\n/usr/local/cuda/lib64/libcudart.so      /usr/local/cuda/lib64/libcudart_static.a   /usr/local/cuda/lib64/libcudnn.so.5.1.5\n/usr/local/cuda/lib64/libcudart.so.8.0  /usr/local/cuda/lib64/libcudnn.so          /usr/local/cuda/lib64/libcudnn_static.a\nIf installed from binary pip package, provide:\n\n\nA link to the pip package you installed:\nhttps://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0-cp34-cp34m-linux_x86_64.whl\n\n\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\n0.11.0\n\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n# clean up from previous trial\nself.sess.close()\ntf.reset_default_graph()\n\n# initialize model\ntf_config = tf.ConfigProto()\ntf_config.gpu_options.per_process_gpu_memory_fraction = 0.45\nself.sess = tf.Session(config=tf_config)\n\n*** create model ***\n\nself.sess.run(tf.initialize_all_variables())\n\n<--- HANGS HERE\nWhat other attempted solutions have you tried?\ninitialize variables one by one --> hangs at first variable\nconfig.operation_timeout_in_ms=60000 (as a temporary workaround)\nLogs or other output that would be helpful\ntail -n 2 nohup.log:\n\n2016-11-26 23:48:13.170 |  INFO |         create_model | tf_model.py:277 | 47.9 | Initializing all variables...\nInitializing: learning_rate:0\n\n\nstrace -p 15477 --> \n\nProcess 15477 attached\nfutex(0x7ffc1aabd91c, FUTEX_WAIT_PRIVATE, 1, NULL\n\n\nnvidia-smi -->\n\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.48                 Driver Version: 367.48                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 980 Ti  Off  | 0000:01:00.0     Off |                  N/A |\n|  1%   60C    P2    44W / 275W |   2901MiB /  6077MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0     15477    C   python                                        2899MiB |\n+-----------------------------------------------------------------------------+", "body": "When doing a hyperoptimization TF hangs sometimes (once every 30 times) when initializing variables.\r\nThere are no error messages and it stalls for hours so I have to kill it manually.\r\n\r\nI have included information below. Please let me know if there's anything else you need.\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nhttps://github.com/tensorflow/tensorflow/issues/2788\r\nhttps://github.com/tensorflow/tensorflow/issues/5448\r\n\r\n### Environment info\r\nOperating System:\r\nDebian 8.6\r\nKernel: Linux 3.16.0-4-amd64\r\n\r\n### Installed version of CUDA and cuDNN: \r\n/usr/local/cuda/lib64/libcudadevrt.a    /usr/local/cuda/lib64/libcudart.so.8.0.44  /usr/local/cuda/lib64/libcudnn.so.5\r\n/usr/local/cuda/lib64/libcudart.so      /usr/local/cuda/lib64/libcudart_static.a   /usr/local/cuda/lib64/libcudnn.so.5.1.5\r\n/usr/local/cuda/lib64/libcudart.so.8.0  /usr/local/cuda/lib64/libcudnn.so          /usr/local/cuda/lib64/libcudnn_static.a\r\n\r\nIf installed from binary pip package, provide:\r\n\r\n1. A link to the pip package you installed:\r\nhttps://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0-cp34-cp34m-linux_x86_64.whl\r\n\r\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\r\n0.11.0\r\n\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n```\r\n# clean up from previous trial\r\nself.sess.close()\r\ntf.reset_default_graph()\r\n\r\n# initialize model\r\ntf_config = tf.ConfigProto()\r\ntf_config.gpu_options.per_process_gpu_memory_fraction = 0.45\r\nself.sess = tf.Session(config=tf_config)\r\n\r\n*** create model ***\r\n\r\nself.sess.run(tf.initialize_all_variables())\r\n``` \r\n<--- HANGS HERE\r\n\r\n\r\n### What other attempted solutions have you tried?\r\ninitialize variables one by one --> hangs at first variable\r\nconfig.operation_timeout_in_ms=60000 (as a temporary workaround)\r\n\r\n### Logs or other output that would be helpful\r\n\r\n```\r\ntail -n 2 nohup.log:\r\n\r\n2016-11-26 23:48:13.170 |  INFO |         create_model | tf_model.py:277 | 47.9 | Initializing all variables...\r\nInitializing: learning_rate:0\r\n\r\n```\r\n\r\n\r\n```\r\nstrace -p 15477 --> \r\n\r\nProcess 15477 attached\r\nfutex(0x7ffc1aabd91c, FUTEX_WAIT_PRIVATE, 1, NULL\r\n\r\n```\r\n```\r\nnvidia-smi -->\r\n\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 367.48                 Driver Version: 367.48                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX 980 Ti  Off  | 0000:01:00.0     Off |                  N/A |\r\n|  1%   60C    P2    44W / 275W |   2901MiB /  6077MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n\r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID  Type  Process name                               Usage      |\r\n|=============================================================================|\r\n|    0     15477    C   python                                        2899MiB |\r\n+-----------------------------------------------------------------------------+\r\n```"}
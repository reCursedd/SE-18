{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/216766408", "html_url": "https://github.com/tensorflow/tensorflow/issues/559#issuecomment-216766408", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/559", "id": 216766408, "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjc2NjQwOA==", "user": {"login": "vodp", "id": 7162458, "node_id": "MDQ6VXNlcjcxNjI0NTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/7162458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vodp", "html_url": "https://github.com/vodp", "followers_url": "https://api.github.com/users/vodp/followers", "following_url": "https://api.github.com/users/vodp/following{/other_user}", "gists_url": "https://api.github.com/users/vodp/gists{/gist_id}", "starred_url": "https://api.github.com/users/vodp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vodp/subscriptions", "organizations_url": "https://api.github.com/users/vodp/orgs", "repos_url": "https://api.github.com/users/vodp/repos", "events_url": "https://api.github.com/users/vodp/events{/privacy}", "received_events_url": "https://api.github.com/users/vodp/received_events", "type": "User", "site_admin": false}, "created_at": "2016-05-04T07:31:57Z", "updated_at": "2016-05-04T21:52:54Z", "author_association": "NONE", "body_html": "<p>I encountered the same problem in Ubuntu 15.10. The <code>bazel build tensorflow_serving/...</code> says:</p>\n<pre><code>ERROR: /amy/serving/tensorflow_serving/session_bundle/example/BUILD:34:1: Executing genrule //tensorflow_serving/session_bundle/example:half_plus_two failed: bash failed: error executing command /bin/bash -c ... (remaining 1 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nImportError: numpy.core.multiarray failed to import\nTraceback (most recent call last):\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/tensorflow_serving/session_bundle/example/export_half_plus_two.py\", line 33, in &lt;module&gt;\n    import tensorflow as tf\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/__init__.py\", line 23, in &lt;module&gt;\n    from tensorflow.python import *\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/python/__init__.py\", line 45, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/python/pywrap_tensorflow.py\", line 28, in &lt;module&gt;\n    _pywrap_tensorflow = swig_import_helper()\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\nImportError: numpy.core.multiarray failed to import\n</code></pre>\n<p>I just have a single installation of numpy 1.11 at <code>/usr/local/lib/python2.7/dist-packages/numpy-1.11.0-py2.7-linux-x86_64.egg/numpy/</code>. From python terminal I can import the following without any error:</p>\n<pre><code>import tensorflow\nimport numpy.core.multiarray\n</code></pre>\n<p><em>Notice</em>: I installed NumPy from source to link it against OpenBLAS. The binary python is located at `/usr/bin/python' but the numpy is at '/usr/local/python2.7/dist-packages'. Is that the source of trouble?</p>\n<p><strong>Update 1</strong>*<br>\nAfter removing the numpy compiled from source with linkage customization to openblas, re-install numpy from Ubuntu distro <code>sudo apt-get install python-numpy</code> and rebuild with bazel, the error above disappeared but I get a new mystical error</p>\n<pre><code>ERROR: /amy/serving/tensorflow_serving/session_bundle/example/BUILD:34:1: Executing genrule //tensorflow_serving/session_bundle/example:half_plus_two failed: bash failed: error executing command /bin/bash -c ... (remaining 1 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 245.\n</code></pre>", "body_text": "I encountered the same problem in Ubuntu 15.10. The bazel build tensorflow_serving/... says:\nERROR: /amy/serving/tensorflow_serving/session_bundle/example/BUILD:34:1: Executing genrule //tensorflow_serving/session_bundle/example:half_plus_two failed: bash failed: error executing command /bin/bash -c ... (remaining 1 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nImportError: numpy.core.multiarray failed to import\nTraceback (most recent call last):\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/tensorflow_serving/session_bundle/example/export_half_plus_two.py\", line 33, in <module>\n    import tensorflow as tf\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/__init__.py\", line 23, in <module>\n    from tensorflow.python import *\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/python/__init__.py\", line 45, in <module>\n    from tensorflow.python import pywrap_tensorflow\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/python/pywrap_tensorflow.py\", line 28, in <module>\n    _pywrap_tensorflow = swig_import_helper()\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\nImportError: numpy.core.multiarray failed to import\n\nI just have a single installation of numpy 1.11 at /usr/local/lib/python2.7/dist-packages/numpy-1.11.0-py2.7-linux-x86_64.egg/numpy/. From python terminal I can import the following without any error:\nimport tensorflow\nimport numpy.core.multiarray\n\nNotice: I installed NumPy from source to link it against OpenBLAS. The binary python is located at `/usr/bin/python' but the numpy is at '/usr/local/python2.7/dist-packages'. Is that the source of trouble?\nUpdate 1*\nAfter removing the numpy compiled from source with linkage customization to openblas, re-install numpy from Ubuntu distro sudo apt-get install python-numpy and rebuild with bazel, the error above disappeared but I get a new mystical error\nERROR: /amy/serving/tensorflow_serving/session_bundle/example/BUILD:34:1: Executing genrule //tensorflow_serving/session_bundle/example:half_plus_two failed: bash failed: error executing command /bin/bash -c ... (remaining 1 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 245.", "body": "I encountered the same problem in Ubuntu 15.10. The `bazel build tensorflow_serving/...` says:\n\n```\nERROR: /amy/serving/tensorflow_serving/session_bundle/example/BUILD:34:1: Executing genrule //tensorflow_serving/session_bundle/example:half_plus_two failed: bash failed: error executing command /bin/bash -c ... (remaining 1 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nImportError: numpy.core.multiarray failed to import\nTraceback (most recent call last):\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/tensorflow_serving/session_bundle/example/export_half_plus_two.py\", line 33, in <module>\n    import tensorflow as tf\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/__init__.py\", line 23, in <module>\n    from tensorflow.python import *\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/python/__init__.py\", line 45, in <module>\n    from tensorflow.python import pywrap_tensorflow\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/python/pywrap_tensorflow.py\", line 28, in <module>\n    _pywrap_tensorflow = swig_import_helper()\n  File \"/home/dp/.cache/bazel/_bazel_dp/3ace02c30acaa55abc93340b423e5df4/serving/bazel-out/host/bin/tensorflow_serving/session_bundle/example/export_half_plus_two.runfiles/tf_serving/external/tf/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\nImportError: numpy.core.multiarray failed to import\n```\n\nI just have a single installation of numpy 1.11 at `/usr/local/lib/python2.7/dist-packages/numpy-1.11.0-py2.7-linux-x86_64.egg/numpy/`. From python terminal I can import the following without any error:\n\n```\nimport tensorflow\nimport numpy.core.multiarray\n```\n\n_Notice_: I installed NumPy from source to link it against OpenBLAS. The binary python is located at `/usr/bin/python' but the numpy is at '/usr/local/python2.7/dist-packages'. Is that the source of trouble?\n\n**Update 1***\nAfter removing the numpy compiled from source with linkage customization to openblas, re-install numpy from Ubuntu distro `sudo apt-get install python-numpy` and rebuild with bazel, the error above disappeared but I get a new mystical error\n\n```\nERROR: /amy/serving/tensorflow_serving/session_bundle/example/BUILD:34:1: Executing genrule //tensorflow_serving/session_bundle/example:half_plus_two failed: bash failed: error executing command /bin/bash -c ... (remaining 1 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 245.\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/323496262", "html_url": "https://github.com/tensorflow/tensorflow/issues/12387#issuecomment-323496262", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12387", "id": 323496262, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzQ5NjI2Mg==", "user": {"login": "wenjunpku", "id": 22230272, "node_id": "MDQ6VXNlcjIyMjMwMjcy", "avatar_url": "https://avatars3.githubusercontent.com/u/22230272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wenjunpku", "html_url": "https://github.com/wenjunpku", "followers_url": "https://api.github.com/users/wenjunpku/followers", "following_url": "https://api.github.com/users/wenjunpku/following{/other_user}", "gists_url": "https://api.github.com/users/wenjunpku/gists{/gist_id}", "starred_url": "https://api.github.com/users/wenjunpku/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wenjunpku/subscriptions", "organizations_url": "https://api.github.com/users/wenjunpku/orgs", "repos_url": "https://api.github.com/users/wenjunpku/repos", "events_url": "https://api.github.com/users/wenjunpku/events{/privacy}", "received_events_url": "https://api.github.com/users/wenjunpku/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-19T03:12:37Z", "updated_at": "2017-08-19T03:12:37Z", "author_association": "NONE", "body_html": "<p>I did a test on GPU, the test code is as following:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\n<span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/gpu:0<span class=\"pl-pds\">'</span></span>):\n    x <span class=\"pl-k\">=</span> tf.constant(<span class=\"pl-c1\">0.6931</span>, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">32</span>, <span class=\"pl-c1\">100</span>, <span class=\"pl-c1\">79804</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float32)\n    y <span class=\"pl-k\">=</span> tf.reduce_mean(x)\n    sess <span class=\"pl-k\">=</span> tf.Session()\n    res <span class=\"pl-k\">=</span> sess.run(y)\n    <span class=\"pl-c1\">print</span>(res)\n    x <span class=\"pl-k\">=</span> tf.constant(<span class=\"pl-c1\">0.6931</span>, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">32</span>, <span class=\"pl-c1\">100</span>, <span class=\"pl-c1\">79804</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float64)\n    y <span class=\"pl-k\">=</span> tf.reduce_mean(x)\n    res <span class=\"pl-k\">=</span> sess.run(y)\n    <span class=\"pl-c1\">print</span>(res)</pre></div>\n<p>The Result is just the same:</p>\n<pre><code>CUDA_VISIBLE_DEVICES=1 python3 test.py\n2017-08-19 11:05:45.390445: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties:\nname: TITAN Xp\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.582\npciBusID 0000:09:00.0\nTotal memory: 11.90GiB\nFree memory: 11.75GiB\n2017-08-19 11:05:45.390474: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0\n2017-08-19 11:05:45.390479: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y\n2017-08-19 11:05:45.390495: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: TITAN Xp, pci bus id: 0000:09:00.0)\n0.262788\n0.693100000803\n</code></pre>\n<p>Is the test right?</p>", "body_text": "I did a test on GPU, the test code is as following:\nimport tensorflow as tf\n\nwith tf.device('/gpu:0'):\n    x = tf.constant(0.6931, shape=[32, 100, 79804], dtype=tf.float32)\n    y = tf.reduce_mean(x)\n    sess = tf.Session()\n    res = sess.run(y)\n    print(res)\n    x = tf.constant(0.6931, shape=[32, 100, 79804], dtype=tf.float64)\n    y = tf.reduce_mean(x)\n    res = sess.run(y)\n    print(res)\nThe Result is just the same:\nCUDA_VISIBLE_DEVICES=1 python3 test.py\n2017-08-19 11:05:45.390445: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties:\nname: TITAN Xp\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.582\npciBusID 0000:09:00.0\nTotal memory: 11.90GiB\nFree memory: 11.75GiB\n2017-08-19 11:05:45.390474: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0\n2017-08-19 11:05:45.390479: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y\n2017-08-19 11:05:45.390495: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: TITAN Xp, pci bus id: 0000:09:00.0)\n0.262788\n0.693100000803\n\nIs the test right?", "body": "I did a test on GPU, the test code is as following:\r\n```Python\r\nimport tensorflow as tf\r\n\r\nwith tf.device('/gpu:0'):\r\n    x = tf.constant(0.6931, shape=[32, 100, 79804], dtype=tf.float32)\r\n    y = tf.reduce_mean(x)\r\n    sess = tf.Session()\r\n    res = sess.run(y)\r\n    print(res)\r\n    x = tf.constant(0.6931, shape=[32, 100, 79804], dtype=tf.float64)\r\n    y = tf.reduce_mean(x)\r\n    res = sess.run(y)\r\n    print(res)\r\n```\r\nThe Result is just the same:\r\n```\r\nCUDA_VISIBLE_DEVICES=1 python3 test.py\r\n2017-08-19 11:05:45.390445: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties:\r\nname: TITAN Xp\r\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.582\r\npciBusID 0000:09:00.0\r\nTotal memory: 11.90GiB\r\nFree memory: 11.75GiB\r\n2017-08-19 11:05:45.390474: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0\r\n2017-08-19 11:05:45.390479: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y\r\n2017-08-19 11:05:45.390495: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: TITAN Xp, pci bus id: 0000:09:00.0)\r\n0.262788\r\n0.693100000803\r\n```\r\nIs the test right?"}
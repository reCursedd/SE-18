{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8268", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8268/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8268/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8268/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8268", "id": 213275891, "node_id": "MDU6SXNzdWUyMTMyNzU4OTE=", "number": 8268, "title": "Error when  using the TensorFlow Runtime with HVX Acceleration", "user": {"login": "MudeLin", "id": 5322311, "node_id": "MDQ6VXNlcjUzMjIzMTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/5322311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MudeLin", "html_url": "https://github.com/MudeLin", "followers_url": "https://api.github.com/users/MudeLin/followers", "following_url": "https://api.github.com/users/MudeLin/following{/other_user}", "gists_url": "https://api.github.com/users/MudeLin/gists{/gist_id}", "starred_url": "https://api.github.com/users/MudeLin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MudeLin/subscriptions", "organizations_url": "https://api.github.com/users/MudeLin/orgs", "repos_url": "https://api.github.com/users/MudeLin/repos", "events_url": "https://api.github.com/users/MudeLin/events{/privacy}", "received_events_url": "https://api.github.com/users/MudeLin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2017-03-10T08:29:33Z", "updated_at": "2017-12-22T17:54:34Z", "closed_at": "2017-12-22T17:54:34Z", "author_association": "NONE", "body_html": "<p>OS: Ubuntu 14.04 64bits<br>\nAndroid Version: 6.0.1<br>\nNDK Version: android-ndk-r12b<br>\nI follow the description in <strong>tensorflow/tree/master/tensorflow/contrib/hvx</strong>,  after compiling the <code>so</code> files and the <strong>hexagon_graph_execution</strong>,  what's more, I also have pushed  additional network define file(<code>tensorflow_inception_v3_stripped_optimized_quantized.pb</code>) and the test image to my phone.<br>\nBut when I start to run the binary file in my <strong>Snapdragon 820 android devices</strong>, it failed all the test cases.<br>\nThe stdout log is showed below,   How can I resolve this question?</p>\n<p>Running main() from test_main.cc<br>\n[==========] Running 1 test from 1 test case.<br>\n[----------] Global test environment set-up.<br>\n[----------] 1 test from GraphTransferer<br>\n[ RUN      ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime<br>\nnative : hexagon_graph_execution_test.cc:294 Fuse and run inception v3 on hexagon with tf runtime<br>\ntensorflow/core/kernels/hexagon/hexagon_graph_execution_test.cc:70: Failure<br>\nExpected: (version) &gt;= (1), actual: 0 vs 1<br>\nnative : hexagon_graph_execution_test.cc:121 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes<br>\nnative : hexagon_graph_execution_test.cc:127 header size = 54<br>\nnative : hexagon_graph_execution_test.cc:129 image size = 40<br>\nnative : hexagon_graph_execution_test.cc:131 width = 299<br>\nnative : hexagon_graph_execution_test.cc:133 height = -299<br>\nnative : hexagon_graph_execution_test.cc:306 Ioading image finished.<br>\nnative : hexagon_graph_execution_test.cc:313 Build fused graph<br>\ncan't determine number of CPU cores: assuming 4<br>\ncan't determine number of CPU cores: assuming 4<br>\nnative : hexagon_graph_execution_test.cc:121 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes<br>\nnative : hexagon_graph_execution_test.cc:127 header size = 54<br>\nnative : hexagon_graph_execution_test.cc:129 image size = 40<br>\nnative : hexagon_graph_execution_test.cc:131 width = 299<br>\nnative : hexagon_graph_execution_test.cc:133 height = -299<br>\nnative : hexagon_graph_execution_test.cc:218 Ioading image finished.<br>\nnative : hexagon_graph_execution_test.cc:223 Copy data to tensor.<br>\nnative : hexagon_graph_execution_test.cc:246 Run graph<br>\nInit hexagon with max attributes (Controller version = 91)<br>\nFailed to disable DSP DCVS: ffffffff</p>\n<p>Failed to append const node 65538<br>\nFailed to append const node 65538<br>\nFailed to append const node 65539<br>\nFailed to append const node 65539<br>\n.<br>\n.<br>\n.<br>\nFailed to append const node 66635<br>\nFailed to append const node 66640<br>\nFailed to append const node 66640<br>\nnative : hexagon_control_wrapper.cc:235 Setup graph completed<br>\nPrepare failed! returned 0xffffffff</p>\n<p>Execute graph!<br>\nExecution failed!<br>\nexecute got err: -1</p>\n<p>Execution failed<br>\nFailed to read data.<br>\nnative : hexagon_graph_execution_test.cc:253 Output byte size = 4032<br>\nnative : hexagon_graph_execution_test.cc:254 Output shape = [1,1,1,1008]<br>\nnative : graph_transfer_utils.cc:43 === Dump ranking ===<br>\nnative : graph_transfer_utils.cc:46 0: 1000, dumbbell, 0<br>\nnative : graph_transfer_utils.cc:46 1: 999, carbonara, 0<br>\nnative : graph_transfer_utils.cc:46 2: 998, stole, 0<br>\nnative : graph_transfer_utils.cc:46 3: 997, rubber eraser, 0<br>\nnative : graph_transfer_utils.cc:46 4: 996, coffee mug, 0<br>\nnative : graph_transfer_utils.cc:46 5: 995, flagpole, 0<br>\nnative : graph_transfer_utils.cc:46 6: 994, parallel bars, 0<br>\nnative : graph_transfer_utils.cc:46 7: 993, cheeseburger, 0<br>\nnative : graph_transfer_utils.cc:46 8: 992, bubble, 0<br>\nnative : graph_transfer_utils.cc:46 9: 991, beaker, 0<br>\nFinalize hexagon<br>\n[  FAILED  ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime (5573 ms)<br>\n[----------] 1 test from GraphTransferer (5573 ms total)</p>\n<p>[----------] Global test environment tear-down<br>\n[==========] 1 test from 1 test case ran. (5573 ms total)<br>\n[  PASSED  ] 0 tests.<br>\n[  FAILED  ] 1 test, listed below:<br>\n[  FAILED  ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime</p>\n<p>1 FAILED TEST<br>\nYOU HAVE 3 DISABLED TESTS</p>", "body_text": "OS: Ubuntu 14.04 64bits\nAndroid Version: 6.0.1\nNDK Version: android-ndk-r12b\nI follow the description in tensorflow/tree/master/tensorflow/contrib/hvx,  after compiling the so files and the hexagon_graph_execution,  what's more, I also have pushed  additional network define file(tensorflow_inception_v3_stripped_optimized_quantized.pb) and the test image to my phone.\nBut when I start to run the binary file in my Snapdragon 820 android devices, it failed all the test cases.\nThe stdout log is showed below,   How can I resolve this question?\nRunning main() from test_main.cc\n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from GraphTransferer\n[ RUN      ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\nnative : hexagon_graph_execution_test.cc:294 Fuse and run inception v3 on hexagon with tf runtime\ntensorflow/core/kernels/hexagon/hexagon_graph_execution_test.cc:70: Failure\nExpected: (version) >= (1), actual: 0 vs 1\nnative : hexagon_graph_execution_test.cc:121 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\nnative : hexagon_graph_execution_test.cc:127 header size = 54\nnative : hexagon_graph_execution_test.cc:129 image size = 40\nnative : hexagon_graph_execution_test.cc:131 width = 299\nnative : hexagon_graph_execution_test.cc:133 height = -299\nnative : hexagon_graph_execution_test.cc:306 Ioading image finished.\nnative : hexagon_graph_execution_test.cc:313 Build fused graph\ncan't determine number of CPU cores: assuming 4\ncan't determine number of CPU cores: assuming 4\nnative : hexagon_graph_execution_test.cc:121 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\nnative : hexagon_graph_execution_test.cc:127 header size = 54\nnative : hexagon_graph_execution_test.cc:129 image size = 40\nnative : hexagon_graph_execution_test.cc:131 width = 299\nnative : hexagon_graph_execution_test.cc:133 height = -299\nnative : hexagon_graph_execution_test.cc:218 Ioading image finished.\nnative : hexagon_graph_execution_test.cc:223 Copy data to tensor.\nnative : hexagon_graph_execution_test.cc:246 Run graph\nInit hexagon with max attributes (Controller version = 91)\nFailed to disable DSP DCVS: ffffffff\nFailed to append const node 65538\nFailed to append const node 65538\nFailed to append const node 65539\nFailed to append const node 65539\n.\n.\n.\nFailed to append const node 66635\nFailed to append const node 66640\nFailed to append const node 66640\nnative : hexagon_control_wrapper.cc:235 Setup graph completed\nPrepare failed! returned 0xffffffff\nExecute graph!\nExecution failed!\nexecute got err: -1\nExecution failed\nFailed to read data.\nnative : hexagon_graph_execution_test.cc:253 Output byte size = 4032\nnative : hexagon_graph_execution_test.cc:254 Output shape = [1,1,1,1008]\nnative : graph_transfer_utils.cc:43 === Dump ranking ===\nnative : graph_transfer_utils.cc:46 0: 1000, dumbbell, 0\nnative : graph_transfer_utils.cc:46 1: 999, carbonara, 0\nnative : graph_transfer_utils.cc:46 2: 998, stole, 0\nnative : graph_transfer_utils.cc:46 3: 997, rubber eraser, 0\nnative : graph_transfer_utils.cc:46 4: 996, coffee mug, 0\nnative : graph_transfer_utils.cc:46 5: 995, flagpole, 0\nnative : graph_transfer_utils.cc:46 6: 994, parallel bars, 0\nnative : graph_transfer_utils.cc:46 7: 993, cheeseburger, 0\nnative : graph_transfer_utils.cc:46 8: 992, bubble, 0\nnative : graph_transfer_utils.cc:46 9: 991, beaker, 0\nFinalize hexagon\n[  FAILED  ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime (5573 ms)\n[----------] 1 test from GraphTransferer (5573 ms total)\n[----------] Global test environment tear-down\n[==========] 1 test from 1 test case ran. (5573 ms total)\n[  PASSED  ] 0 tests.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\n1 FAILED TEST\nYOU HAVE 3 DISABLED TESTS", "body": "OS: Ubuntu 14.04 64bits\r\nAndroid Version: 6.0.1     \r\nNDK Version: android-ndk-r12b\r\nI follow the description in [**tensorflow/tree/master/tensorflow/contrib/hvx**]((https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/hvx)),  after compiling the `so` files and the **hexagon_graph_execution**,  what's more, I also have pushed  additional network define file(`tensorflow_inception_v3_stripped_optimized_quantized.pb`) and the test image to my phone. \r\nBut when I start to run the binary file in my **Snapdragon 820 android devices**, it failed all the test cases.\r\nThe stdout log is showed below,   How can I resolve this question?\r\n \r\n\r\nRunning main() from test_main.cc\r\n[==========] Running 1 test from 1 test case.\r\n[----------] Global test environment set-up.\r\n[----------] 1 test from GraphTransferer\r\n[ RUN      ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\r\nnative : hexagon_graph_execution_test.cc:294 Fuse and run inception v3 on hexagon with tf runtime\r\ntensorflow/core/kernels/hexagon/hexagon_graph_execution_test.cc:70: Failure\r\nExpected: (version) >= (1), actual: 0 vs 1\r\nnative : hexagon_graph_execution_test.cc:121 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\r\nnative : hexagon_graph_execution_test.cc:127 header size = 54\r\nnative : hexagon_graph_execution_test.cc:129 image size = 40\r\nnative : hexagon_graph_execution_test.cc:131 width = 299\r\nnative : hexagon_graph_execution_test.cc:133 height = -299\r\nnative : hexagon_graph_execution_test.cc:306 Ioading image finished.\r\nnative : hexagon_graph_execution_test.cc:313 Build fused graph\r\ncan't determine number of CPU cores: assuming 4\r\ncan't determine number of CPU cores: assuming 4\r\nnative : hexagon_graph_execution_test.cc:121 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\r\nnative : hexagon_graph_execution_test.cc:127 header size = 54\r\nnative : hexagon_graph_execution_test.cc:129 image size = 40\r\nnative : hexagon_graph_execution_test.cc:131 width = 299\r\nnative : hexagon_graph_execution_test.cc:133 height = -299\r\nnative : hexagon_graph_execution_test.cc:218 Ioading image finished.\r\nnative : hexagon_graph_execution_test.cc:223 Copy data to tensor.\r\nnative : hexagon_graph_execution_test.cc:246 Run graph\r\nInit hexagon with max attributes (Controller version = 91)\r\nFailed to disable DSP DCVS: ffffffff\r\n\r\nFailed to append const node 65538\r\nFailed to append const node 65538\r\nFailed to append const node 65539\r\nFailed to append const node 65539\r\n.\r\n.\r\n.\r\nFailed to append const node 66635\r\nFailed to append const node 66640\r\nFailed to append const node 66640\r\nnative : hexagon_control_wrapper.cc:235 Setup graph completed\r\nPrepare failed! returned 0xffffffff\r\n\r\nExecute graph!\r\nExecution failed!\r\nexecute got err: -1\r\n\r\nExecution failed\r\nFailed to read data.\r\nnative : hexagon_graph_execution_test.cc:253 Output byte size = 4032\r\nnative : hexagon_graph_execution_test.cc:254 Output shape = [1,1,1,1008]\r\nnative : graph_transfer_utils.cc:43 === Dump ranking ===\r\nnative : graph_transfer_utils.cc:46 0: 1000, dumbbell, 0\r\nnative : graph_transfer_utils.cc:46 1: 999, carbonara, 0\r\nnative : graph_transfer_utils.cc:46 2: 998, stole, 0\r\nnative : graph_transfer_utils.cc:46 3: 997, rubber eraser, 0\r\nnative : graph_transfer_utils.cc:46 4: 996, coffee mug, 0\r\nnative : graph_transfer_utils.cc:46 5: 995, flagpole, 0\r\nnative : graph_transfer_utils.cc:46 6: 994, parallel bars, 0\r\nnative : graph_transfer_utils.cc:46 7: 993, cheeseburger, 0\r\nnative : graph_transfer_utils.cc:46 8: 992, bubble, 0\r\nnative : graph_transfer_utils.cc:46 9: 991, beaker, 0\r\nFinalize hexagon\r\n[  FAILED  ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime (5573 ms)\r\n[----------] 1 test from GraphTransferer (5573 ms total)\r\n\r\n[----------] Global test environment tear-down\r\n[==========] 1 test from 1 test case ran. (5573 ms total)\r\n[  PASSED  ] 0 tests.\r\n[  FAILED  ] 1 test, listed below:\r\n[  FAILED  ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\r\n\r\n 1 FAILED TEST\r\n  YOU HAVE 3 DISABLED TESTS\r\n\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1069", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1069/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1069/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1069/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1069", "id": 133150440, "node_id": "MDU6SXNzdWUxMzMxNTA0NDA=", "number": 1069, "title": "Use external repository rather than git submodule for protobuf dependency", "user": {"login": "davidzchen", "id": 5283042, "node_id": "MDQ6VXNlcjUyODMwNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5283042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidzchen", "html_url": "https://github.com/davidzchen", "followers_url": "https://api.github.com/users/davidzchen/followers", "following_url": "https://api.github.com/users/davidzchen/following{/other_user}", "gists_url": "https://api.github.com/users/davidzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidzchen/subscriptions", "organizations_url": "https://api.github.com/users/davidzchen/orgs", "repos_url": "https://api.github.com/users/davidzchen/repos", "events_url": "https://api.github.com/users/davidzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/davidzchen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-02-12T03:34:24Z", "updated_at": "2016-09-10T05:35:23Z", "closed_at": "2016-05-26T22:20:44Z", "author_association": "MEMBER", "body_html": "<p>Currently, TensorFlow vendors its protobuf dependency using a Git submodule due to the <a href=\"https://github.com/google/protobuf/blob/master/BUILD#L487\">hack</a> that is required for protobuf Python support.</p>\n<p>I have made a change (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"121858805\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/bazelbuild/bazel/issues/702\" data-hovercard-type=\"issue\" data-hovercard-url=\"/bazelbuild/bazel/issues/702/hovercard\" href=\"https://github.com/bazelbuild/bazel/issues/702\">bazelbuild/bazel#702</a>) to add an <a href=\"http://bazel.io/docs/be/python.html#py_library.imports\" rel=\"nofollow\"><code>imports</code> attribute</a> to Bazel's Python rules, which allows us to add directories to the <code>PYTHONPATH</code> and thus allows us to remove the hack in protobuf.</p>\n<p>I have a patch to remove the hack for protobuf Python support (see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"133142075\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/protocolbuffers/protobuf/issues/1230\" data-hovercard-type=\"issue\" data-hovercard-url=\"/protocolbuffers/protobuf/issues/1230/hovercard\" href=\"https://github.com/protocolbuffers/protobuf/issues/1230\">protocolbuffers/protobuf#1230</a>). I am testing this change using a corresponding change to TensorFlow which removes the git submodule and includes the protobuf dependency using a Bazel external repository instead. Once my patch for <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"133142075\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/protocolbuffers/protobuf/issues/1230\" data-hovercard-type=\"issue\" data-hovercard-url=\"/protocolbuffers/protobuf/issues/1230/hovercard\" href=\"https://github.com/protocolbuffers/protobuf/issues/1230\">protocolbuffers/protobuf#1230</a> has been submitted, I will send out my corresponding patch to TensorFlow for review.</p>", "body_text": "Currently, TensorFlow vendors its protobuf dependency using a Git submodule due to the hack that is required for protobuf Python support.\nI have made a change (bazelbuild/bazel#702) to add an imports attribute to Bazel's Python rules, which allows us to add directories to the PYTHONPATH and thus allows us to remove the hack in protobuf.\nI have a patch to remove the hack for protobuf Python support (see protocolbuffers/protobuf#1230). I am testing this change using a corresponding change to TensorFlow which removes the git submodule and includes the protobuf dependency using a Bazel external repository instead. Once my patch for protocolbuffers/protobuf#1230 has been submitted, I will send out my corresponding patch to TensorFlow for review.", "body": "Currently, TensorFlow vendors its protobuf dependency using a Git submodule due to the [hack](https://github.com/google/protobuf/blob/master/BUILD#L487) that is required for protobuf Python support.\n\nI have made a change (bazelbuild/bazel#702) to add an [`imports` attribute](http://bazel.io/docs/be/python.html#py_library.imports) to Bazel's Python rules, which allows us to add directories to the `PYTHONPATH` and thus allows us to remove the hack in protobuf.\n\nI have a patch to remove the hack for protobuf Python support (see google/protobuf#1230). I am testing this change using a corresponding change to TensorFlow which removes the git submodule and includes the protobuf dependency using a Bazel external repository instead. Once my patch for google/protobuf#1230 has been submitted, I will send out my corresponding patch to TensorFlow for review.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2880", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2880/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2880/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2880/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2880", "id": 160389406, "node_id": "MDU6SXNzdWUxNjAzODk0MDY=", "number": 2880, "title": "tf.flags.DEFINE_boolean is broken for flags containing dashes", "user": {"login": "jdoerrie", "id": 4552310, "node_id": "MDQ6VXNlcjQ1NTIzMTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4552310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdoerrie", "html_url": "https://github.com/jdoerrie", "followers_url": "https://api.github.com/users/jdoerrie/followers", "following_url": "https://api.github.com/users/jdoerrie/following{/other_user}", "gists_url": "https://api.github.com/users/jdoerrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdoerrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdoerrie/subscriptions", "organizations_url": "https://api.github.com/users/jdoerrie/orgs", "repos_url": "https://api.github.com/users/jdoerrie/repos", "events_url": "https://api.github.com/users/jdoerrie/events{/privacy}", "received_events_url": "https://api.github.com/users/jdoerrie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "craigcitro", "id": 468559, "node_id": "MDQ6VXNlcjQ2ODU1OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/468559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craigcitro", "html_url": "https://github.com/craigcitro", "followers_url": "https://api.github.com/users/craigcitro/followers", "following_url": "https://api.github.com/users/craigcitro/following{/other_user}", "gists_url": "https://api.github.com/users/craigcitro/gists{/gist_id}", "starred_url": "https://api.github.com/users/craigcitro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craigcitro/subscriptions", "organizations_url": "https://api.github.com/users/craigcitro/orgs", "repos_url": "https://api.github.com/users/craigcitro/repos", "events_url": "https://api.github.com/users/craigcitro/events{/privacy}", "received_events_url": "https://api.github.com/users/craigcitro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "craigcitro", "id": 468559, "node_id": "MDQ6VXNlcjQ2ODU1OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/468559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craigcitro", "html_url": "https://github.com/craigcitro", "followers_url": "https://api.github.com/users/craigcitro/followers", "following_url": "https://api.github.com/users/craigcitro/following{/other_user}", "gists_url": "https://api.github.com/users/craigcitro/gists{/gist_id}", "starred_url": "https://api.github.com/users/craigcitro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craigcitro/subscriptions", "organizations_url": "https://api.github.com/users/craigcitro/orgs", "repos_url": "https://api.github.com/users/craigcitro/repos", "events_url": "https://api.github.com/users/craigcitro/events{/privacy}", "received_events_url": "https://api.github.com/users/craigcitro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2016-06-15T10:30:17Z", "updated_at": "2016-06-22T03:25:02Z", "closed_at": "2016-06-22T03:25:02Z", "author_association": "CONTRIBUTOR", "body_html": "<p><code>tf.flags.DEFINE_boolean</code> does not replace dashes with underscores when adding the negated flag, which results in a bug for flags containing dashes.</p>\n<h3>Environment info</h3>\n<p>Operating System: Mac OSX 10.11.5<br>\nPip Package: <a href=\"https://storage.googleapis.com/tensorflow/mac/tensorflow-0.9.0rc0-py3-none-any.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/mac/tensorflow-0.9.0rc0-py3-none-any.whl</a><br>\nTensorFlow Version: 0.9.0rc0</p>\n<h3>Steps to reproduce</h3>\n<ul>\n<li><code>foo.py</code>:</li>\n</ul>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\ntf.flags.DEFINE_boolean(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>foo-bar<span class=\"pl-pds\">'</span></span>, <span class=\"pl-c1\">True</span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Foo Bar<span class=\"pl-pds\">\"</span></span>)\ntf.flags.<span class=\"pl-c1\">FLAGS</span>._parse_flags()\n<span class=\"pl-c1\">print</span>(tf.flags.<span class=\"pl-c1\">FLAGS</span>.__flags)</pre></div>\n<h3>What have you tried?</h3>\n<ul>\n<li><code>$ python foo.py</code>: <code>{'foo_bar': True, 'foo-bar': True}</code></li>\n<li><code>$ python foo.py --foo-bar</code>: <code>{'foo_bar': True, 'foo-bar': True}</code></li>\n<li><code>$ python foo.py --nofoo-bar</code>: <code>{'foo_bar': True, 'foo-bar': False}</code></li>\n</ul>\n<p>In the last example it is impossible to get the False value of the flag, <code>tf.flags.FLAGS.foo-bar</code> results in an AttributeError, because the dash is interpreted as a minus and <code>FLAGS.foo</code> does not exist.</p>\n<p>In order to support flags with dashes, Python's argparse replaces dashes with underscores (<a href=\"https://docs.python.org/dev/library/argparse.html#dest\" rel=\"nofollow\">docs</a>, <a href=\"https://github.com/python/cpython/blob/master/Lib/argparse.py#L1471\">code</a>).</p>\n<p>Fixing this bug should be as simple as substituting <code>flag_name</code> with <code>flag_name.replace('-', '_')</code> in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/platform/flags.py#L106\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/platform/flags.py#L106</a>, but I haven't tested this yet.</p>", "body_text": "tf.flags.DEFINE_boolean does not replace dashes with underscores when adding the negated flag, which results in a bug for flags containing dashes.\nEnvironment info\nOperating System: Mac OSX 10.11.5\nPip Package: https://storage.googleapis.com/tensorflow/mac/tensorflow-0.9.0rc0-py3-none-any.whl\nTensorFlow Version: 0.9.0rc0\nSteps to reproduce\n\nfoo.py:\n\nimport tensorflow as tf\n\ntf.flags.DEFINE_boolean('foo-bar', True, \"Foo Bar\")\ntf.flags.FLAGS._parse_flags()\nprint(tf.flags.FLAGS.__flags)\nWhat have you tried?\n\n$ python foo.py: {'foo_bar': True, 'foo-bar': True}\n$ python foo.py --foo-bar: {'foo_bar': True, 'foo-bar': True}\n$ python foo.py --nofoo-bar: {'foo_bar': True, 'foo-bar': False}\n\nIn the last example it is impossible to get the False value of the flag, tf.flags.FLAGS.foo-bar results in an AttributeError, because the dash is interpreted as a minus and FLAGS.foo does not exist.\nIn order to support flags with dashes, Python's argparse replaces dashes with underscores (docs, code).\nFixing this bug should be as simple as substituting flag_name with flag_name.replace('-', '_') in https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/platform/flags.py#L106, but I haven't tested this yet.", "body": "`tf.flags.DEFINE_boolean` does not replace dashes with underscores when adding the negated flag, which results in a bug for flags containing dashes.\n### Environment info\n\nOperating System: Mac OSX 10.11.5\nPip Package: https://storage.googleapis.com/tensorflow/mac/tensorflow-0.9.0rc0-py3-none-any.whl\nTensorFlow Version: 0.9.0rc0\n### Steps to reproduce\n- `foo.py`:\n\n``` python\nimport tensorflow as tf\n\ntf.flags.DEFINE_boolean('foo-bar', True, \"Foo Bar\")\ntf.flags.FLAGS._parse_flags()\nprint(tf.flags.FLAGS.__flags)\n```\n### What have you tried?\n- `$ python foo.py`: `{'foo_bar': True, 'foo-bar': True}`\n- `$ python foo.py --foo-bar`: `{'foo_bar': True, 'foo-bar': True}`\n- `$ python foo.py --nofoo-bar`: `{'foo_bar': True, 'foo-bar': False}`\n\nIn the last example it is impossible to get the False value of the flag, `tf.flags.FLAGS.foo-bar` results in an AttributeError, because the dash is interpreted as a minus and `FLAGS.foo` does not exist.\n\nIn order to support flags with dashes, Python's argparse replaces dashes with underscores ([docs](https://docs.python.org/dev/library/argparse.html#dest), [code](https://github.com/python/cpython/blob/master/Lib/argparse.py#L1471)).\n\nFixing this bug should be as simple as substituting `flag_name` with `flag_name.replace('-', '_')` in https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/platform/flags.py#L106, but I haven't tested this yet.\n"}
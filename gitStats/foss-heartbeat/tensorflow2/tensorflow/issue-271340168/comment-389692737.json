{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/389692737", "html_url": "https://github.com/tensorflow/tensorflow/issues/14267#issuecomment-389692737", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14267", "id": 389692737, "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTY5MjczNw==", "user": {"login": "ruanjiandong", "id": 16345728, "node_id": "MDQ6VXNlcjE2MzQ1NzI4", "avatar_url": "https://avatars3.githubusercontent.com/u/16345728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ruanjiandong", "html_url": "https://github.com/ruanjiandong", "followers_url": "https://api.github.com/users/ruanjiandong/followers", "following_url": "https://api.github.com/users/ruanjiandong/following{/other_user}", "gists_url": "https://api.github.com/users/ruanjiandong/gists{/gist_id}", "starred_url": "https://api.github.com/users/ruanjiandong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ruanjiandong/subscriptions", "organizations_url": "https://api.github.com/users/ruanjiandong/orgs", "repos_url": "https://api.github.com/users/ruanjiandong/repos", "events_url": "https://api.github.com/users/ruanjiandong/events{/privacy}", "received_events_url": "https://api.github.com/users/ruanjiandong/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-16T23:02:20Z", "updated_at": "2018-05-16T23:02:20Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I hit the same issue. I can't use \"monolithic\" workaround since it breaks TensorRT integration. The conflicts are jpeg_CreateDecompress and jpeg_CreateCompress. libopencv_imgcodec expects to import from libjpect.so.8, but it somehow picked up from libtensorflow_framework.</p>\n<p>I solved it by compiling tensorflow jpeg with \"-fvisibility\" flag. The change is around line 41 in thirdparty/jpeg/jpeg.BUILD. \"-fPIC\" is needed as the result of \"-fvisibility\".<br>\n\"//conditions:default\": [<br>\n\"-fvisibility=hidden -fPIC\"<br>\n],</p>\n<p>There are some linking warnings for undefined dynamic symbol in tensorflow/contrib/lite/toco/toco, which I don't use.</p>", "body_text": "I hit the same issue. I can't use \"monolithic\" workaround since it breaks TensorRT integration. The conflicts are jpeg_CreateDecompress and jpeg_CreateCompress. libopencv_imgcodec expects to import from libjpect.so.8, but it somehow picked up from libtensorflow_framework.\nI solved it by compiling tensorflow jpeg with \"-fvisibility\" flag. The change is around line 41 in thirdparty/jpeg/jpeg.BUILD. \"-fPIC\" is needed as the result of \"-fvisibility\".\n\"//conditions:default\": [\n\"-fvisibility=hidden -fPIC\"\n],\nThere are some linking warnings for undefined dynamic symbol in tensorflow/contrib/lite/toco/toco, which I don't use.", "body": "I hit the same issue. I can't use \"monolithic\" workaround since it breaks TensorRT integration. The conflicts are jpeg_CreateDecompress and jpeg_CreateCompress. libopencv_imgcodec expects to import from libjpect.so.8, but it somehow picked up from libtensorflow_framework. \r\n\r\nI solved it by compiling tensorflow jpeg with \"-fvisibility\" flag. The change is around line 41 in thirdparty/jpeg/jpeg.BUILD. \"-fPIC\" is needed as the result of \"-fvisibility\".\r\n    \"//conditions:default\": [\r\n        \"-fvisibility=hidden -fPIC\"\r\n    ],  \r\n\r\nThere are some linking warnings for undefined dynamic symbol in tensorflow/contrib/lite/toco/toco, which I don't use."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/414007490", "html_url": "https://github.com/tensorflow/tensorflow/issues/21368#issuecomment-414007490", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21368", "id": 414007490, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDAwNzQ5MA==", "user": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-17T22:55:35Z", "updated_at": "2018-08-17T22:55:35Z", "author_association": "MEMBER", "body_html": "<p>I ran the following command on the TensorFlow nightly build (installed using the command <code>pip install tf-nightly</code>). The command resulted in the error <code>ValueError: Invalid tensors 'input' were found.</code>:</p>\n<pre><code>tflite_convert \\\n--graph_def_file=$TENSORFLOW_FILE \\\n--output_file=$TFLITE_FILE \\\n--input_arrays=input \\\n--output_arrays=MobilenetV1/Predictions/Reshape \\\n--input_shapes=1,32,32,3\n--allow_custom_ops\n</code></pre>\n<p>I add this point because this error seems different than the one that you noted. I looked into the model using TensorBoard and it appears that your model is a MobileNet training graph containing the ops FIFOQueueV2, QueueDequeueV2, SquaredDifference. TensorFlow Lite only works with eval graphs, not training graphs.</p>\n<p>In order to create a MobileNet eval graph:</p>\n<ol>\n<li>Create a separate eval graph. You can use this MobileNet eval script to generate it from the checkpoints: <a href=\"https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_eval.py\">https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_eval.py</a></li>\n<li>Pass the correct input and output nodes to the <code>freeze_graph.py</code> script. I suggest using the command line tool.</li>\n</ol>\n<p>After you do this, try using the <code>tflite_convert</code> command above from the tf-nightly build if possible. You might need different inputs and outputs. If you run into any issues during this process, please provide any intermediate files including the meta graph and checkpoint files as well as any updated commands.</p>", "body_text": "I ran the following command on the TensorFlow nightly build (installed using the command pip install tf-nightly). The command resulted in the error ValueError: Invalid tensors 'input' were found.:\ntflite_convert \\\n--graph_def_file=$TENSORFLOW_FILE \\\n--output_file=$TFLITE_FILE \\\n--input_arrays=input \\\n--output_arrays=MobilenetV1/Predictions/Reshape \\\n--input_shapes=1,32,32,3\n--allow_custom_ops\n\nI add this point because this error seems different than the one that you noted. I looked into the model using TensorBoard and it appears that your model is a MobileNet training graph containing the ops FIFOQueueV2, QueueDequeueV2, SquaredDifference. TensorFlow Lite only works with eval graphs, not training graphs.\nIn order to create a MobileNet eval graph:\n\nCreate a separate eval graph. You can use this MobileNet eval script to generate it from the checkpoints: https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_eval.py\nPass the correct input and output nodes to the freeze_graph.py script. I suggest using the command line tool.\n\nAfter you do this, try using the tflite_convert command above from the tf-nightly build if possible. You might need different inputs and outputs. If you run into any issues during this process, please provide any intermediate files including the meta graph and checkpoint files as well as any updated commands.", "body": "I ran the following command on the TensorFlow nightly build (installed using the command `pip install tf-nightly`). The command resulted in the error `ValueError: Invalid tensors 'input' were found.`:\r\n\r\n```\r\ntflite_convert \\\r\n--graph_def_file=$TENSORFLOW_FILE \\\r\n--output_file=$TFLITE_FILE \\\r\n--input_arrays=input \\\r\n--output_arrays=MobilenetV1/Predictions/Reshape \\\r\n--input_shapes=1,32,32,3\r\n--allow_custom_ops\r\n```\r\n\r\nI add this point because this error seems different than the one that you noted. I looked into the model using TensorBoard and it appears that your model is a MobileNet training graph containing the ops FIFOQueueV2, QueueDequeueV2, SquaredDifference. TensorFlow Lite only works with eval graphs, not training graphs.\r\n\r\nIn order to create a MobileNet eval graph:\r\n1. Create a separate eval graph. You can use this MobileNet eval script to generate it from the checkpoints: https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_eval.py\r\n2. Pass the correct input and output nodes to the `freeze_graph.py` script. I suggest using the command line tool.\r\n\r\nAfter you do this, try using the `tflite_convert` command above from the tf-nightly build if possible. You might need different inputs and outputs. If you run into any issues during this process, please provide any intermediate files including the meta graph and checkpoint files as well as any updated commands."}
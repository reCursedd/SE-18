{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23736", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23736/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23736/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23736/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23736", "id": 380664872, "node_id": "MDU6SXNzdWUzODA2NjQ4NzI=", "number": 23736, "title": "Change the dependent @nsync version, resulting in a significant increase in the .so size", "user": {"login": "DavinciHW", "id": 39380007, "node_id": "MDQ6VXNlcjM5MzgwMDA3", "avatar_url": "https://avatars2.githubusercontent.com/u/39380007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavinciHW", "html_url": "https://github.com/DavinciHW", "followers_url": "https://api.github.com/users/DavinciHW/followers", "following_url": "https://api.github.com/users/DavinciHW/following{/other_user}", "gists_url": "https://api.github.com/users/DavinciHW/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavinciHW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavinciHW/subscriptions", "organizations_url": "https://api.github.com/users/DavinciHW/orgs", "repos_url": "https://api.github.com/users/DavinciHW/repos", "events_url": "https://api.github.com/users/DavinciHW/events{/privacy}", "received_events_url": "https://api.github.com/users/DavinciHW/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-14T11:55:44Z", "updated_at": "2018-11-14T16:27:36Z", "closed_at": "2018-11-14T16:27:36Z", "author_association": "NONE", "body_html": "<p><em>Please make sure that this is a build/installation issue. As per our <a href=\"https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md\">GitHub Policy</a>, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em></p>\n<p><strong>System information</strong></p>\n<ul>\n<li>Linux Ubuntu 16.04</li>\n<li>TensorFlow version:1.8.0</li>\n<li>Python version:3.5</li>\n<li>Bazel version (if compiling from source):0.17.2</li>\n<li>GCC/Compiler version (if compiling from source):gcc (Ubuntu 5.4.0-6ubuntu1~16.04.5)</li>\n</ul>\n<p><strong>Describe the problem</strong><br>\nI want compile tensorflow1.8.0 to target cpu arrch64\uff0cAnd got the error as issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"258399498\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/13115\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/13115/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/13115\">#13115</a>.</p>\n<pre><code>ERROR: /home/ubuntu/.cache/bazel/_bazel_ubuntu/ad1e09741bb4109fbc70ef8216b59ee2/external/nsync/BUILD:401:13: Configurable attribute \"copts\" doesn't match this configuration (would a default condition help?).\nConditions checked:\n @nsync//:android_arm\n @nsync//:android_arm64\n @nsync//:android_armeabi\n @nsync//:android_x86_32\n @nsync//:android_x86_64\n @nsync//:clang_macos_x86_64\n @nsync//:gcc_linux_aarch64\n @nsync//:gcc_linux_ppc64\n @nsync//:gcc_linux_x86_64_1\n @nsync//:gcc_linux_x86_64_2\n @nsync//:ios_x86_64\n @nsync//:msvc_windows_x86_64.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\n</code></pre>\n<p>the issue tells me to add <code>\"//conditions:default\": [],</code> in the depend nsync. It does work.<br>\nBut I was asked not to modify any open source binaries\uff0cso\uff0cI use tensorflow as an external repository and use the following rule to change tensorflow1.8.0's depend nsync version.</p>\n<pre><code>local_repository(\n\tname=\"org_tensorflow\",\n\tpath=\"../tmp\",\n    repo_mapping = {\"@nsync\" : \"@nsync_1.20.1\"},\n)\n</code></pre>\n<pre><code>tf_http_archive(\n    name = \"nsync_1.20.1\",\n    urls = [\n        \"https://mirror.bazel.build/github.com/google/nsync/archive/1.20.1.tar.gz\",\n        \"https://github.com/google/nsync/archive/1.20.1.tar.gz\",\n    ],\n    sha256 = \"692f9b30e219f71a6371b98edd39cef3cbda35ac3abc4cd99ce19db430a5591a\",\n    strip_prefix = \"nsync-1.20.1\",\n)\n</code></pre>\n<p>This works for me\uff0cBut\uff0cthis resulting in a significant increase in the .so size. By default nsync it was 50M and when I change change the denpend nsync version\uff0cthe .so file was 160M.</p>\n<p>Is this normal? How should I do now? It's been bothering me for a long time, hoping to give me some advice!</p>", "body_text": "Please make sure that this is a build/installation issue. As per our GitHub Policy, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template\nSystem information\n\nLinux Ubuntu 16.04\nTensorFlow version:1.8.0\nPython version:3.5\nBazel version (if compiling from source):0.17.2\nGCC/Compiler version (if compiling from source):gcc (Ubuntu 5.4.0-6ubuntu1~16.04.5)\n\nDescribe the problem\nI want compile tensorflow1.8.0 to target cpu arrch64\uff0cAnd got the error as issue #13115.\nERROR: /home/ubuntu/.cache/bazel/_bazel_ubuntu/ad1e09741bb4109fbc70ef8216b59ee2/external/nsync/BUILD:401:13: Configurable attribute \"copts\" doesn't match this configuration (would a default condition help?).\nConditions checked:\n @nsync//:android_arm\n @nsync//:android_arm64\n @nsync//:android_armeabi\n @nsync//:android_x86_32\n @nsync//:android_x86_64\n @nsync//:clang_macos_x86_64\n @nsync//:gcc_linux_aarch64\n @nsync//:gcc_linux_ppc64\n @nsync//:gcc_linux_x86_64_1\n @nsync//:gcc_linux_x86_64_2\n @nsync//:ios_x86_64\n @nsync//:msvc_windows_x86_64.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\n\nthe issue tells me to add \"//conditions:default\": [], in the depend nsync. It does work.\nBut I was asked not to modify any open source binaries\uff0cso\uff0cI use tensorflow as an external repository and use the following rule to change tensorflow1.8.0's depend nsync version.\nlocal_repository(\n\tname=\"org_tensorflow\",\n\tpath=\"../tmp\",\n    repo_mapping = {\"@nsync\" : \"@nsync_1.20.1\"},\n)\n\ntf_http_archive(\n    name = \"nsync_1.20.1\",\n    urls = [\n        \"https://mirror.bazel.build/github.com/google/nsync/archive/1.20.1.tar.gz\",\n        \"https://github.com/google/nsync/archive/1.20.1.tar.gz\",\n    ],\n    sha256 = \"692f9b30e219f71a6371b98edd39cef3cbda35ac3abc4cd99ce19db430a5591a\",\n    strip_prefix = \"nsync-1.20.1\",\n)\n\nThis works for me\uff0cBut\uff0cthis resulting in a significant increase in the .so size. By default nsync it was 50M and when I change change the denpend nsync version\uff0cthe .so file was 160M.\nIs this normal? How should I do now? It's been bothering me for a long time, hoping to give me some advice!", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- Linux Ubuntu 16.04\r\n- TensorFlow version:1.8.0\r\n- Python version:3.5\r\n- Bazel version (if compiling from source):0.17.2\r\n- GCC/Compiler version (if compiling from source):gcc (Ubuntu 5.4.0-6ubuntu1~16.04.5)\r\n\r\n\r\n\r\n**Describe the problem**\r\nI want compile tensorflow1.8.0 to target cpu arrch64\uff0cAnd got the error as issue #13115.\r\n```\r\nERROR: /home/ubuntu/.cache/bazel/_bazel_ubuntu/ad1e09741bb4109fbc70ef8216b59ee2/external/nsync/BUILD:401:13: Configurable attribute \"copts\" doesn't match this configuration (would a default condition help?).\r\nConditions checked:\r\n @nsync//:android_arm\r\n @nsync//:android_arm64\r\n @nsync//:android_armeabi\r\n @nsync//:android_x86_32\r\n @nsync//:android_x86_64\r\n @nsync//:clang_macos_x86_64\r\n @nsync//:gcc_linux_aarch64\r\n @nsync//:gcc_linux_ppc64\r\n @nsync//:gcc_linux_x86_64_1\r\n @nsync//:gcc_linux_x86_64_2\r\n @nsync//:ios_x86_64\r\n @nsync//:msvc_windows_x86_64.\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\r\n```\r\nthe issue tells me to add `\"//conditions:default\": [],` in the depend nsync. It does work.\r\nBut I was asked not to modify any open source binaries\uff0cso\uff0cI use tensorflow as an external repository and use the following rule to change tensorflow1.8.0's depend nsync version.\r\n```\r\nlocal_repository(\r\n\tname=\"org_tensorflow\",\r\n\tpath=\"../tmp\",\r\n    repo_mapping = {\"@nsync\" : \"@nsync_1.20.1\"},\r\n)\r\n```\r\n```\r\ntf_http_archive(\r\n    name = \"nsync_1.20.1\",\r\n    urls = [\r\n        \"https://mirror.bazel.build/github.com/google/nsync/archive/1.20.1.tar.gz\",\r\n        \"https://github.com/google/nsync/archive/1.20.1.tar.gz\",\r\n    ],\r\n    sha256 = \"692f9b30e219f71a6371b98edd39cef3cbda35ac3abc4cd99ce19db430a5591a\",\r\n    strip_prefix = \"nsync-1.20.1\",\r\n)\r\n```\r\n\r\nThis works for me\uff0cBut\uff0cthis resulting in a significant increase in the .so size. By default nsync it was 50M and when I change change the denpend nsync version\uff0cthe .so file was 160M.\r\n\r\nIs this normal? How should I do now? It's been bothering me for a long time, hoping to give me some advice!\r\n"}
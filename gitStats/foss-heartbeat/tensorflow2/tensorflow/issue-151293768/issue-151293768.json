{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2123", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2123/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2123/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2123/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2123", "id": 151293768, "node_id": "MDU6SXNzdWUxNTEyOTM3Njg=", "number": 2123, "title": "Different models for training and testing", "user": {"login": "harpribot", "id": 7632939, "node_id": "MDQ6VXNlcjc2MzI5Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7632939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harpribot", "html_url": "https://github.com/harpribot", "followers_url": "https://api.github.com/users/harpribot/followers", "following_url": "https://api.github.com/users/harpribot/following{/other_user}", "gists_url": "https://api.github.com/users/harpribot/gists{/gist_id}", "starred_url": "https://api.github.com/users/harpribot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harpribot/subscriptions", "organizations_url": "https://api.github.com/users/harpribot/orgs", "repos_url": "https://api.github.com/users/harpribot/repos", "events_url": "https://api.github.com/users/harpribot/events{/privacy}", "received_events_url": "https://api.github.com/users/harpribot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-04-27T03:57:46Z", "updated_at": "2017-08-27T21:19:29Z", "closed_at": "2016-04-27T05:12:17Z", "author_association": "NONE", "body_html": "<pre><code># choose RNN/GRU/LSTM cell\n        self.cell = rnn_cell.LSTMCell(self.memory_dim)\n\n        # embedding model\n        if not self.attention:\n            self.dec_outputs, self.dec_memory = seq2seq.embedding_rnn_seq2seq(\\\n                            self.enc_inp, self.dec_inp, self.cell, \\\n                            self.vocab_size, self.vocab_size, self.seq_length)\n            self.dec_outputs_tst, _ = seq2seq.embedding_rnn_seq2seq(\\\n                            self.enc_inp, self.dec_inp, self.cell, \\\n                            self.vocab_size, self.vocab_size, self.seq_length, feed_previous=True)\n</code></pre>\n<p>I want to have feed_previous = False for the Training (self.dec_outputs), while feed_previous=True for Testing(self.dec_output_tst). This is the reasonable case, in any seq2seq translation model.</p>\n<p>However, when I try to run it I get following error. This is exactly not a bug, but there is absolutely no source of information on this</p>\n<p>The error is as follows:</p>\n<pre><code>File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/seq2seq.py\", line 320, in embedding_rnn_seq2seq\n    _, encoder_state = rnn.rnn(encoder_cell, encoder_inputs, dtype=dtype)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 143, in run\n    (output, state) = call_cell()\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 136, in &lt;lambda&gt;\n    call_cell = lambda: cell(input_, state)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell.py\", line 609, in __call__\n    initializer=initializer)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 334, in get_variable\n    collections=collections)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 257, in get_variable\n    collections=collections, caching_device=caching_device)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 118, in get_variable\n    name, \"\".join(traceback.format_list(tb))))\nValueError: Variable embedding_rnn_seq2seq/RNN/EmbeddingWrapper/embedding already exists, disallowed. Did you mean to set reuse=True in VarScope? Originally defined at:\n</code></pre>\n<p>Now I know that I have to use variable scoping, but exactly where is the question. I apologize if I have missed on something</p>", "body_text": "# choose RNN/GRU/LSTM cell\n        self.cell = rnn_cell.LSTMCell(self.memory_dim)\n\n        # embedding model\n        if not self.attention:\n            self.dec_outputs, self.dec_memory = seq2seq.embedding_rnn_seq2seq(\\\n                            self.enc_inp, self.dec_inp, self.cell, \\\n                            self.vocab_size, self.vocab_size, self.seq_length)\n            self.dec_outputs_tst, _ = seq2seq.embedding_rnn_seq2seq(\\\n                            self.enc_inp, self.dec_inp, self.cell, \\\n                            self.vocab_size, self.vocab_size, self.seq_length, feed_previous=True)\n\nI want to have feed_previous = False for the Training (self.dec_outputs), while feed_previous=True for Testing(self.dec_output_tst). This is the reasonable case, in any seq2seq translation model.\nHowever, when I try to run it I get following error. This is exactly not a bug, but there is absolutely no source of information on this\nThe error is as follows:\nFile \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/seq2seq.py\", line 320, in embedding_rnn_seq2seq\n    _, encoder_state = rnn.rnn(encoder_cell, encoder_inputs, dtype=dtype)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 143, in run\n    (output, state) = call_cell()\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 136, in <lambda>\n    call_cell = lambda: cell(input_, state)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell.py\", line 609, in __call__\n    initializer=initializer)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 334, in get_variable\n    collections=collections)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 257, in get_variable\n    collections=collections, caching_device=caching_device)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 118, in get_variable\n    name, \"\".join(traceback.format_list(tb))))\nValueError: Variable embedding_rnn_seq2seq/RNN/EmbeddingWrapper/embedding already exists, disallowed. Did you mean to set reuse=True in VarScope? Originally defined at:\n\nNow I know that I have to use variable scoping, but exactly where is the question. I apologize if I have missed on something", "body": "```\n# choose RNN/GRU/LSTM cell\n        self.cell = rnn_cell.LSTMCell(self.memory_dim)\n\n        # embedding model\n        if not self.attention:\n            self.dec_outputs, self.dec_memory = seq2seq.embedding_rnn_seq2seq(\\\n                            self.enc_inp, self.dec_inp, self.cell, \\\n                            self.vocab_size, self.vocab_size, self.seq_length)\n            self.dec_outputs_tst, _ = seq2seq.embedding_rnn_seq2seq(\\\n                            self.enc_inp, self.dec_inp, self.cell, \\\n                            self.vocab_size, self.vocab_size, self.seq_length, feed_previous=True)\n```\n\nI want to have feed_previous = False for the Training (self.dec_outputs), while feed_previous=True for Testing(self.dec_output_tst). This is the reasonable case, in any seq2seq translation model.\n\nHowever, when I try to run it I get following error. This is exactly not a bug, but there is absolutely no source of information on this\n\nThe error is as follows:\n\n```\nFile \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/seq2seq.py\", line 320, in embedding_rnn_seq2seq\n    _, encoder_state = rnn.rnn(encoder_cell, encoder_inputs, dtype=dtype)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 143, in run\n    (output, state) = call_cell()\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 136, in <lambda>\n    call_cell = lambda: cell(input_, state)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell.py\", line 609, in __call__\n    initializer=initializer)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 334, in get_variable\n    collections=collections)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 257, in get_variable\n    collections=collections, caching_device=caching_device)\n  File \"/Users/harshal/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 118, in get_variable\n    name, \"\".join(traceback.format_list(tb))))\nValueError: Variable embedding_rnn_seq2seq/RNN/EmbeddingWrapper/embedding already exists, disallowed. Did you mean to set reuse=True in VarScope? Originally defined at:\n```\n\nNow I know that I have to use variable scoping, but exactly where is the question. I apologize if I have missed on something\n"}
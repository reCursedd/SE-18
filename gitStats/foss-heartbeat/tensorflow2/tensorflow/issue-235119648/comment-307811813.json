{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/307811813", "html_url": "https://github.com/tensorflow/tensorflow/pull/10643#issuecomment-307811813", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10643", "id": 307811813, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzgxMTgxMw==", "user": {"login": "lakshayg", "id": 7976315, "node_id": "MDQ6VXNlcjc5NzYzMTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/7976315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lakshayg", "html_url": "https://github.com/lakshayg", "followers_url": "https://api.github.com/users/lakshayg/followers", "following_url": "https://api.github.com/users/lakshayg/following{/other_user}", "gists_url": "https://api.github.com/users/lakshayg/gists{/gist_id}", "starred_url": "https://api.github.com/users/lakshayg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lakshayg/subscriptions", "organizations_url": "https://api.github.com/users/lakshayg/orgs", "repos_url": "https://api.github.com/users/lakshayg/repos", "events_url": "https://api.github.com/users/lakshayg/events{/privacy}", "received_events_url": "https://api.github.com/users/lakshayg/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-12T14:46:42Z", "updated_at": "2017-06-12T14:46:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16824702\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/caisq\">@caisq</a> Thanks for pointing that out. All this time I was testing on the incorrect code. I just tested on that actual code I was supposed to test on and it seems I have stumbled upon a bug. I will be revising the commits and resubmitting shortly. Here is the correct code</p>\n<div class=\"highlight highlight-source-python\"><pre>sess <span class=\"pl-k\">=</span> tf.InteractiveSession()\n\ntheta0 <span class=\"pl-k\">=</span> tf.atan2(<span class=\"pl-c1\">1.0</span>, <span class=\"pl-c1\">1.0</span>) <span class=\"pl-c\"><span class=\"pl-c\">#</span> pi/4</span>\nx0 <span class=\"pl-k\">=</span> tf.constant(<span class=\"pl-c1\">1.0</span>)\ny  <span class=\"pl-k\">=</span> tf.Variable(<span class=\"pl-c1\">0.4</span>)\nc  <span class=\"pl-k\">=</span> tf.complex(x0, y)\ntheta <span class=\"pl-k\">=</span> tf.arg(c)\nerr <span class=\"pl-k\">=</span> (theta <span class=\"pl-k\">-</span> theta0)<span class=\"pl-k\">**</span><span class=\"pl-c1\">2</span>\noptimize <span class=\"pl-k\">=</span> tf.train.GradientDescentOptimizer(<span class=\"pl-c1\">1e-1</span>).minimize(err)\n\nsess.run(tf.global_variables_initializer())\n<span class=\"pl-k\">for</span> i <span class=\"pl-k\">in</span> <span class=\"pl-c1\">range</span>(<span class=\"pl-c1\">10000</span>):\n    sess.run(optimize)\n    <span class=\"pl-k\">if</span> i <span class=\"pl-k\">%</span> <span class=\"pl-c1\">10</span> <span class=\"pl-k\">==</span> <span class=\"pl-c1\">0</span>:\n        <span class=\"pl-c1\">print</span>(sess.run(c)) <span class=\"pl-c\"><span class=\"pl-c\">#</span> should go to 1 + 1j</span></pre></div>", "body_text": "@caisq Thanks for pointing that out. All this time I was testing on the incorrect code. I just tested on that actual code I was supposed to test on and it seems I have stumbled upon a bug. I will be revising the commits and resubmitting shortly. Here is the correct code\nsess = tf.InteractiveSession()\n\ntheta0 = tf.atan2(1.0, 1.0) # pi/4\nx0 = tf.constant(1.0)\ny  = tf.Variable(0.4)\nc  = tf.complex(x0, y)\ntheta = tf.arg(c)\nerr = (theta - theta0)**2\noptimize = tf.train.GradientDescentOptimizer(1e-1).minimize(err)\n\nsess.run(tf.global_variables_initializer())\nfor i in range(10000):\n    sess.run(optimize)\n    if i % 10 == 0:\n        print(sess.run(c)) # should go to 1 + 1j", "body": "@caisq Thanks for pointing that out. All this time I was testing on the incorrect code. I just tested on that actual code I was supposed to test on and it seems I have stumbled upon a bug. I will be revising the commits and resubmitting shortly. Here is the correct code\r\n\r\n```python\r\nsess = tf.InteractiveSession()\r\n\r\ntheta0 = tf.atan2(1.0, 1.0) # pi/4\r\nx0 = tf.constant(1.0)\r\ny  = tf.Variable(0.4)\r\nc  = tf.complex(x0, y)\r\ntheta = tf.arg(c)\r\nerr = (theta - theta0)**2\r\noptimize = tf.train.GradientDescentOptimizer(1e-1).minimize(err)\r\n\r\nsess.run(tf.global_variables_initializer())\r\nfor i in range(10000):\r\n    sess.run(optimize)\r\n    if i % 10 == 0:\r\n        print(sess.run(c)) # should go to 1 + 1j\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7904", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7904/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7904/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7904/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7904", "id": 210347328, "node_id": "MDU6SXNzdWUyMTAzNDczMjg=", "number": 7904, "title": "add_summary won't accept the tensor returned by tensor_summary ", "user": {"login": "KaraRyougi", "id": 11702501, "node_id": "MDQ6VXNlcjExNzAyNTAx", "avatar_url": "https://avatars0.githubusercontent.com/u/11702501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaraRyougi", "html_url": "https://github.com/KaraRyougi", "followers_url": "https://api.github.com/users/KaraRyougi/followers", "following_url": "https://api.github.com/users/KaraRyougi/following{/other_user}", "gists_url": "https://api.github.com/users/KaraRyougi/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaraRyougi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaraRyougi/subscriptions", "organizations_url": "https://api.github.com/users/KaraRyougi/orgs", "repos_url": "https://api.github.com/users/KaraRyougi/repos", "events_url": "https://api.github.com/users/KaraRyougi/events{/privacy}", "received_events_url": "https://api.github.com/users/KaraRyougi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-02-26T20:49:12Z", "updated_at": "2018-11-12T06:51:22Z", "closed_at": "2017-02-27T00:56:37Z", "author_association": "NONE", "body_html": "<h3>Related Problem</h3>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"199977605\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6778\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6778/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/6778\">#6778</a></p>\n<h3>Environment Info</h3>\n<p>Operating System: Kubuntu 16.04 LTS</p>\n<p>Installed TensorFlow version:<br>\nNo CUDA acceleration. Compiled from source.</p>\n<p>commit hash:<br>\n<code>4ac9c09d5ca57a03b8daa5fb9e295947b1619854</code></p>\n<p>bazel version:</p>\n<pre><code>Build label: 0.4.4\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Feb 1 18:54:21 2017 (1485975261)\nBuild timestamp: 1485975261\nBuild timestamp as int: 1485975261\n</code></pre>\n<h3>Example</h3>\n<p>I restored a graph from a checkpoint and get the variables. Then I tried to write the summary to the log but got an error.</p>\n<pre><code>sess = tf.Session()\nsaver = tf.train.import_meta_graph('my-model.meta')\nsaver.restore(sess, tf.train.latest_checkpoint('./'))\nall_vars = tf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES)\nwriter = tf.summary.FileWriter('./many/log',sess.graph)\nwriter.add_summary(tf.summary.tensor_summary(\"conv\", all_vars[0]))\n</code></pre>\n<pre><code>&gt;&gt;&gt; writer.add_summary(tf.summary.tensor_summary('conv',all_vars[0]))\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/summary/writer/writer.py\", line 107, in add_summary\n    event = event_pb2.Event(summary=summary)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected tensorflow.Summary got Tensor.\n</code></pre>\n<h3>Official API Description</h3>\n<p>According to the official API (<a href=\"https://www.tensorflow.org/api_docs/python/tf/summary/FileWriter\" rel=\"nofollow\">https://www.tensorflow.org/api_docs/python/tf/summary/FileWriter</a>),</p>\n<p><code>tf.summary.tensor_summary</code></p>\n<blockquote>\n<p>Returns:<br>\nA scalar Tensor of type string. The serialized Summary protocol buffer.</p>\n</blockquote>\n<p><code>add_summary(summary, global_step=None)</code></p>\n<blockquote>\n<p>You can pass the result of evaluating any summary op, using tf.Session.run or tf.Tensor.eval, to this function. Alternatively, you can pass a tf.Summary protocol buffer that you populate with your own data. The latter is commonly done to report evaluation results in event files.</p>\n</blockquote>\n<p>So I believe this is a bug.</p>", "body_text": "Related Problem\n#6778\nEnvironment Info\nOperating System: Kubuntu 16.04 LTS\nInstalled TensorFlow version:\nNo CUDA acceleration. Compiled from source.\ncommit hash:\n4ac9c09d5ca57a03b8daa5fb9e295947b1619854\nbazel version:\nBuild label: 0.4.4\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Feb 1 18:54:21 2017 (1485975261)\nBuild timestamp: 1485975261\nBuild timestamp as int: 1485975261\n\nExample\nI restored a graph from a checkpoint and get the variables. Then I tried to write the summary to the log but got an error.\nsess = tf.Session()\nsaver = tf.train.import_meta_graph('my-model.meta')\nsaver.restore(sess, tf.train.latest_checkpoint('./'))\nall_vars = tf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES)\nwriter = tf.summary.FileWriter('./many/log',sess.graph)\nwriter.add_summary(tf.summary.tensor_summary(\"conv\", all_vars[0]))\n\n>>> writer.add_summary(tf.summary.tensor_summary('conv',all_vars[0]))\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/summary/writer/writer.py\", line 107, in add_summary\n    event = event_pb2.Event(summary=summary)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected tensorflow.Summary got Tensor.\n\nOfficial API Description\nAccording to the official API (https://www.tensorflow.org/api_docs/python/tf/summary/FileWriter),\ntf.summary.tensor_summary\n\nReturns:\nA scalar Tensor of type string. The serialized Summary protocol buffer.\n\nadd_summary(summary, global_step=None)\n\nYou can pass the result of evaluating any summary op, using tf.Session.run or tf.Tensor.eval, to this function. Alternatively, you can pass a tf.Summary protocol buffer that you populate with your own data. The latter is commonly done to report evaluation results in event files.\n\nSo I believe this is a bug.", "body": "### Related Problem\r\nhttps://github.com/tensorflow/tensorflow/issues/6778\r\n\r\n### Environment Info\r\nOperating System: Kubuntu 16.04 LTS\r\n\r\nInstalled TensorFlow version:\r\nNo CUDA acceleration. Compiled from source.\r\n\r\ncommit hash: \r\n`4ac9c09d5ca57a03b8daa5fb9e295947b1619854`\r\n\r\nbazel version:\r\n```\r\nBuild label: 0.4.4\r\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed Feb 1 18:54:21 2017 (1485975261)\r\nBuild timestamp: 1485975261\r\nBuild timestamp as int: 1485975261\r\n```\r\n\r\n### Example\r\n\r\nI restored a graph from a checkpoint and get the variables. Then I tried to write the summary to the log but got an error.\r\n\r\n```\r\nsess = tf.Session()\r\nsaver = tf.train.import_meta_graph('my-model.meta')\r\nsaver.restore(sess, tf.train.latest_checkpoint('./'))\r\nall_vars = tf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES)\r\nwriter = tf.summary.FileWriter('./many/log',sess.graph)\r\nwriter.add_summary(tf.summary.tensor_summary(\"conv\", all_vars[0]))\r\n```\r\n\r\n```\r\n>>> writer.add_summary(tf.summary.tensor_summary('conv',all_vars[0]))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/summary/writer/writer.py\", line 107, in add_summary\r\n    event = event_pb2.Event(summary=summary)\r\nTypeError: Parameter to MergeFrom() must be instance of same class: expected tensorflow.Summary got Tensor.\r\n```\r\n### Official API Description\r\n\r\nAccording to the official API (https://www.tensorflow.org/api_docs/python/tf/summary/FileWriter), \r\n\r\n`tf.summary.tensor_summary` \r\n\r\n> Returns:\r\nA scalar Tensor of type string. The serialized Summary protocol buffer.\r\n\r\n `add_summary(summary, global_step=None)`\r\n\r\n> You can pass the result of evaluating any summary op, using tf.Session.run or tf.Tensor.eval, to this function. Alternatively, you can pass a tf.Summary protocol buffer that you populate with your own data. The latter is commonly done to report evaluation results in event files.\r\n\r\nSo I believe this is a bug."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4204", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4204/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4204/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4204/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4204", "id": 175062436, "node_id": "MDU6SXNzdWUxNzUwNjI0MzY=", "number": 4204, "title": "[SOLVED] Using opencv with tensorflow causes segfault.", "user": {"login": "alex-justes", "id": 426508, "node_id": "MDQ6VXNlcjQyNjUwOA==", "avatar_url": "https://avatars2.githubusercontent.com/u/426508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alex-justes", "html_url": "https://github.com/alex-justes", "followers_url": "https://api.github.com/users/alex-justes/followers", "following_url": "https://api.github.com/users/alex-justes/following{/other_user}", "gists_url": "https://api.github.com/users/alex-justes/gists{/gist_id}", "starred_url": "https://api.github.com/users/alex-justes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alex-justes/subscriptions", "organizations_url": "https://api.github.com/users/alex-justes/orgs", "repos_url": "https://api.github.com/users/alex-justes/repos", "events_url": "https://api.github.com/users/alex-justes/events{/privacy}", "received_events_url": "https://api.github.com/users/alex-justes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-09-05T12:35:42Z", "updated_at": "2016-09-07T04:18:17Z", "closed_at": "2016-09-07T04:18:17Z", "author_association": "NONE", "body_html": "<p>Using opencv with tensorflow causes segfault.</p>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcurand.so locally\n[1]    12012 segmentation fault (core dumped)  ./test.py\n</code></pre>\n<h3>Related GitHub issues or StackOverflow:</h3>\n<p><a href=\"http://stackoverflow.com/questions/37535765/segmentation-fault-core-dumped-error-for-cifar10-example-tensorflow\" rel=\"nofollow\">http://stackoverflow.com/questions/37535765/segmentation-fault-core-dumped-error-for-cifar10-example-tensorflow</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"148131185\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1924\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1924/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1924\">#1924</a></p>\n<h3>Environment info</h3>\n<p>1 Operating System:<br>\nArch linux</p>\n<pre><code>$ uname -a\nLinux justes_notebook 4.7.2-1-ARCH #1 SMP PREEMPT Sat Aug 20 23:02:56 CEST 2016 x86_64 GNU/Linux\n</code></pre>\n<p>2 CUDA<br>\ncuda 7.5.18<br>\ncudnn 5.1.3</p>\n<pre><code>$ ls -l /opt/cuda/lib/libcud*\n-rw-r--r-- 1 root root 189170 jul 12 02:19 /opt/cuda/lib/libcudadevrt.a\nlrwxrwxrwx 1 root root     16 jul 12 02:19 /opt/cuda/lib/libcudart.so -&gt; libcudart.so.7.5\nlrwxrwxrwx 1 root root     19 jul 12 02:19 /opt/cuda/lib/libcudart.so.7.5 -&gt; libcudart.so.7.5.18\n-rwxr-xr-x 1 root root 311596 jul 12 02:19 /opt/cuda/lib/libcudart.so.7.5.18\n-rw-r--r-- 1 root root 558020 jul 12 02:19 /opt/cuda/lib/libcudart_static.a\n</code></pre>\n<p>3 The commit hash<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/2ab7e6326296987ea0ce975afb3434a16d1aa21a/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/2ab7e6326296987ea0ce975afb3434a16d1aa21a\"><tt>2ab7e63</tt></a></p>\n<p>4 bazel</p>\n<pre><code>$ bazel version\nBuild label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: \u0421\u0440 \u0430\u0432\u0433 24 04:26:11 2016 (1472012771)\nBuild timestamp: 1472012771\nBuild timestamp as int: 1472012771\n</code></pre>\n<p>5 python</p>\n<pre><code>$ python --version \nPython 3.5.2\n</code></pre>\n<p>6 opencv<br>\nopencv 3.1.0</p>\n<h3>Example</h3>\n<pre><code>#!/usr/bin/python\n\nimport cv2\nimport tensorflow as tf\n\nimg = cv2.imread('im.jpg')\nimg = cv2.resize(img, (100,100))\nsess = tf.Session()\n</code></pre>", "body_text": "Using opencv with tensorflow causes segfault.\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcurand.so locally\n[1]    12012 segmentation fault (core dumped)  ./test.py\n\nRelated GitHub issues or StackOverflow:\nhttp://stackoverflow.com/questions/37535765/segmentation-fault-core-dumped-error-for-cifar10-example-tensorflow\n#1924\nEnvironment info\n1 Operating System:\nArch linux\n$ uname -a\nLinux justes_notebook 4.7.2-1-ARCH #1 SMP PREEMPT Sat Aug 20 23:02:56 CEST 2016 x86_64 GNU/Linux\n\n2 CUDA\ncuda 7.5.18\ncudnn 5.1.3\n$ ls -l /opt/cuda/lib/libcud*\n-rw-r--r-- 1 root root 189170 jul 12 02:19 /opt/cuda/lib/libcudadevrt.a\nlrwxrwxrwx 1 root root     16 jul 12 02:19 /opt/cuda/lib/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root     19 jul 12 02:19 /opt/cuda/lib/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root 311596 jul 12 02:19 /opt/cuda/lib/libcudart.so.7.5.18\n-rw-r--r-- 1 root root 558020 jul 12 02:19 /opt/cuda/lib/libcudart_static.a\n\n3 The commit hash\n2ab7e63\n4 bazel\n$ bazel version\nBuild label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: \u0421\u0440 \u0430\u0432\u0433 24 04:26:11 2016 (1472012771)\nBuild timestamp: 1472012771\nBuild timestamp as int: 1472012771\n\n5 python\n$ python --version \nPython 3.5.2\n\n6 opencv\nopencv 3.1.0\nExample\n#!/usr/bin/python\n\nimport cv2\nimport tensorflow as tf\n\nimg = cv2.imread('im.jpg')\nimg = cv2.resize(img, (100,100))\nsess = tf.Session()", "body": "Using opencv with tensorflow causes segfault.\n\n```\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcurand.so locally\n[1]    12012 segmentation fault (core dumped)  ./test.py\n```\n### Related GitHub issues or StackOverflow:\n\nhttp://stackoverflow.com/questions/37535765/segmentation-fault-core-dumped-error-for-cifar10-example-tensorflow\nhttps://github.com/tensorflow/tensorflow/issues/1924\n### Environment info\n\n1 Operating System:\nArch linux\n\n```\n$ uname -a\nLinux justes_notebook 4.7.2-1-ARCH #1 SMP PREEMPT Sat Aug 20 23:02:56 CEST 2016 x86_64 GNU/Linux\n```\n\n2 CUDA\ncuda 7.5.18\ncudnn 5.1.3\n\n```\n$ ls -l /opt/cuda/lib/libcud*\n-rw-r--r-- 1 root root 189170 jul 12 02:19 /opt/cuda/lib/libcudadevrt.a\nlrwxrwxrwx 1 root root     16 jul 12 02:19 /opt/cuda/lib/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root     19 jul 12 02:19 /opt/cuda/lib/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root 311596 jul 12 02:19 /opt/cuda/lib/libcudart.so.7.5.18\n-rw-r--r-- 1 root root 558020 jul 12 02:19 /opt/cuda/lib/libcudart_static.a\n```\n\n3 The commit hash \n2ab7e6326296987ea0ce975afb3434a16d1aa21a\n\n4 bazel\n\n```\n$ bazel version\nBuild label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: \u0421\u0440 \u0430\u0432\u0433 24 04:26:11 2016 (1472012771)\nBuild timestamp: 1472012771\nBuild timestamp as int: 1472012771\n```\n\n5 python \n\n```\n$ python --version \nPython 3.5.2\n```\n\n6 opencv\nopencv 3.1.0\n### Example\n\n```\n#!/usr/bin/python\n\nimport cv2\nimport tensorflow as tf\n\nimg = cv2.imread('im.jpg')\nimg = cv2.resize(img, (100,100))\nsess = tf.Session()\n```\n"}
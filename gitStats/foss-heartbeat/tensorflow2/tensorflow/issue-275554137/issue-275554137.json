{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14738", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14738/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14738/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14738/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/14738", "id": 275554137, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUzNzc1NDk0", "number": 14738, "title": "Add str(Label(...)) to bazel macros", "user": {"login": "si-you", "id": 31752931, "node_id": "MDQ6VXNlcjMxNzUyOTMx", "avatar_url": "https://avatars2.githubusercontent.com/u/31752931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/si-you", "html_url": "https://github.com/si-you", "followers_url": "https://api.github.com/users/si-you/followers", "following_url": "https://api.github.com/users/si-you/following{/other_user}", "gists_url": "https://api.github.com/users/si-you/gists{/gist_id}", "starred_url": "https://api.github.com/users/si-you/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/si-you/subscriptions", "organizations_url": "https://api.github.com/users/si-you/orgs", "repos_url": "https://api.github.com/users/si-you/repos", "events_url": "https://api.github.com/users/si-you/events{/privacy}", "received_events_url": "https://api.github.com/users/si-you/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "fef2c0", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-11-21T01:23:04Z", "updated_at": "2017-11-22T05:43:59Z", "closed_at": "2017-11-22T05:43:59Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14738", "html_url": "https://github.com/tensorflow/tensorflow/pull/14738", "diff_url": "https://github.com/tensorflow/tensorflow/pull/14738.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/14738.patch"}, "body_html": "<p>This is a similar pull request to</p>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"275552727\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14737\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/14737/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/14737\">#14737</a></p>\n<p>but for r1.4 branch, not master.</p>\n<p>When using tensorflow as a submodule in bazel, importing bazel rules from tensorflow.bzl is not working.<br>\nThe main reason is that some of the dependencies are hard coded instead of using str(Label(...)) and this makes bazel to generate dependencies like</p>\n<p>//tensorflow</p>\n<p>instead of</p>\n<p>@org_tensorflow//tensorflow.</p>\n<p>Most of bzl files under tensorflow use Label mechanism to allow supermodule to import tensorflow bazel rules like tf_cc_test, etc, but there were two files that did not use the Label mechanism and these two files block supermodule to import tensorflow bazel rules. This change updates those files to unblock bazel rule importing.</p>", "body_text": "This is a similar pull request to\n#14737\nbut for r1.4 branch, not master.\nWhen using tensorflow as a submodule in bazel, importing bazel rules from tensorflow.bzl is not working.\nThe main reason is that some of the dependencies are hard coded instead of using str(Label(...)) and this makes bazel to generate dependencies like\n//tensorflow\ninstead of\n@org_tensorflow//tensorflow.\nMost of bzl files under tensorflow use Label mechanism to allow supermodule to import tensorflow bazel rules like tf_cc_test, etc, but there were two files that did not use the Label mechanism and these two files block supermodule to import tensorflow bazel rules. This change updates those files to unblock bazel rule importing.", "body": "This is a similar pull request to \r\n\r\nhttps://github.com/tensorflow/tensorflow/pull/14737\r\n\r\nbut for r1.4 branch, not master.\r\n\r\nWhen using tensorflow as a submodule in bazel, importing bazel rules from tensorflow.bzl is not working.\r\nThe main reason is that some of the dependencies are hard coded instead of using str(Label(...)) and this makes bazel to generate dependencies like\r\n\r\n//tensorflow\r\n\r\ninstead of\r\n\r\n@org_tensorflow//tensorflow.\r\n\r\nMost of bzl files under tensorflow use Label mechanism to allow supermodule to import tensorflow bazel rules like tf_cc_test, etc, but there were two files that did not use the Label mechanism and these two files block supermodule to import tensorflow bazel rules. This change updates those files to unblock bazel rule importing."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/341863723", "html_url": "https://github.com/tensorflow/tensorflow/issues/10348#issuecomment-341863723", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10348", "id": 341863723, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTg2MzcyMw==", "user": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-04T01:55:28Z", "updated_at": "2017-11-04T01:56:18Z", "author_association": "MEMBER", "body_html": "<p>I took a closer look and my initial interpretation was a bit off; I was thinking that <code>sensorOrientation</code> referred to camera orientation only when in fact it's a computed variable of both sensor and display rotation relative to device.</p>\n<p>The \"invalid\" 3 value was actually coming from the <code>getWindowManager().getDefaultDisplay().getRotation()</code> call which oddly enough returns an integer constant 1-3 rather than the rotation as one might expect. In this case the actual rotation is encoded in the variable name: e.g. android.view.Surface.ROTATION_180 = 2.</p>\n<p>Accounting for that and doing a bit of variable swapping for height/width coordinate scaling fixed the issue and now the detector demo works in both landscape and portrait mode (as soon as <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"271151315\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14236\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/14236/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/14236\">#14236</a> goes in).</p>", "body_text": "I took a closer look and my initial interpretation was a bit off; I was thinking that sensorOrientation referred to camera orientation only when in fact it's a computed variable of both sensor and display rotation relative to device.\nThe \"invalid\" 3 value was actually coming from the getWindowManager().getDefaultDisplay().getRotation() call which oddly enough returns an integer constant 1-3 rather than the rotation as one might expect. In this case the actual rotation is encoded in the variable name: e.g. android.view.Surface.ROTATION_180 = 2.\nAccounting for that and doing a bit of variable swapping for height/width coordinate scaling fixed the issue and now the detector demo works in both landscape and portrait mode (as soon as #14236 goes in).", "body": "I took a closer look and my initial interpretation was a bit off; I was thinking that `sensorOrientation` referred to camera orientation only when in fact it's a computed variable of both sensor and display rotation relative to device.\r\n\r\nThe \"invalid\" 3 value was actually coming from the `getWindowManager().getDefaultDisplay().getRotation()` call which oddly enough returns an integer constant 1-3 rather than the rotation as one might expect. In this case the actual rotation is encoded in the variable name: e.g. android.view.Surface.ROTATION_180 = 2.\r\n\r\nAccounting for that and doing a bit of variable swapping for height/width coordinate scaling fixed the issue and now the detector demo works in both landscape and portrait mode (as soon as #14236 goes in)."}
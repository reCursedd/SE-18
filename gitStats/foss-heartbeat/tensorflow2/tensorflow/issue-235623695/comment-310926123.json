{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/310926123", "html_url": "https://github.com/tensorflow/tensorflow/issues/10685#issuecomment-310926123", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10685", "id": 310926123, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDkyNjEyMw==", "user": {"login": "nuchi", "id": 16771734, "node_id": "MDQ6VXNlcjE2NzcxNzM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16771734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nuchi", "html_url": "https://github.com/nuchi", "followers_url": "https://api.github.com/users/nuchi/followers", "following_url": "https://api.github.com/users/nuchi/following{/other_user}", "gists_url": "https://api.github.com/users/nuchi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nuchi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nuchi/subscriptions", "organizations_url": "https://api.github.com/users/nuchi/orgs", "repos_url": "https://api.github.com/users/nuchi/repos", "events_url": "https://api.github.com/users/nuchi/events{/privacy}", "received_events_url": "https://api.github.com/users/nuchi/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-25T20:26:53Z", "updated_at": "2017-06-25T20:26:53Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23486130\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tfboyd\">@tfboyd</a> More information!</p>\n<p>System: Mac OS X 10.11.6<br>\nIntel MKL library: mklml_mac_20180.0.20170425.tgz (from <a href=\"https://github.com/01org/mkl-dnn/releases\">https://github.com/01org/mkl-dnn/releases</a>)<br>\nTensorflow commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/38e0922d1e2dcd572379af4496f878492e9f689a/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/38e0922d1e2dcd572379af4496f878492e9f689a\"><tt>38e0922</tt></a>...</p>\n<p>Installed MKL to <code>/opt/intel/mklml</code><br>\nSymlink the two <code>.dylib</code> files to <code>/usr/local/lib</code></p>\n<p>Changes to <code>configure</code>: Change <code>MKL_ML_LIB_PATH</code> to <code>lib/libmklml.dylib</code>, <code>MKL_ML_OMP_LIB_PATH</code> to <code>lib/libiomp5.dylib</code>, comment out the parts that say \"if linux:\", comment out the parts that deal with <code>libdl.so.2</code>.</p>\n<p>Changes to <code>third_party/mkl/BUILD</code>: Change the list of three <code>.so</code> files to the two <code>.dylib</code> files</p>\n<p>When configuring: Yes to use MKL, No to download. (I downloaded manually.) Path to MKL: <code>/opt/intel/mklml</code></p>\n<p>Build command: <code>bazel build --verbose-failures -c opt --config=opt --config=mkl --copt=\"-DEIGEN_USE_VML\" --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-msse4.1 --copt=-msse4.2 --linkopt=\"-Wl,-rpath,/opt/intel/mklml/lib\" --linkopt=\"-L/opt/intel/mklml/lib\" --linkopt=\"-lmklml\" --linkopt=\"-iomp5\" //tensorflow/tools/pip_package:build_pip_package</code></p>\n<p>It's possible I missed some stuff, but I think that's it. Some of this stuff is surely superfluous, but after it worked I didn't spend any effort trying to pare it down to the minimum.</p>", "body_text": "@tfboyd More information!\nSystem: Mac OS X 10.11.6\nIntel MKL library: mklml_mac_20180.0.20170425.tgz (from https://github.com/01org/mkl-dnn/releases)\nTensorflow commit: 38e0922...\nInstalled MKL to /opt/intel/mklml\nSymlink the two .dylib files to /usr/local/lib\nChanges to configure: Change MKL_ML_LIB_PATH to lib/libmklml.dylib, MKL_ML_OMP_LIB_PATH to lib/libiomp5.dylib, comment out the parts that say \"if linux:\", comment out the parts that deal with libdl.so.2.\nChanges to third_party/mkl/BUILD: Change the list of three .so files to the two .dylib files\nWhen configuring: Yes to use MKL, No to download. (I downloaded manually.) Path to MKL: /opt/intel/mklml\nBuild command: bazel build --verbose-failures -c opt --config=opt --config=mkl --copt=\"-DEIGEN_USE_VML\" --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-msse4.1 --copt=-msse4.2 --linkopt=\"-Wl,-rpath,/opt/intel/mklml/lib\" --linkopt=\"-L/opt/intel/mklml/lib\" --linkopt=\"-lmklml\" --linkopt=\"-iomp5\" //tensorflow/tools/pip_package:build_pip_package\nIt's possible I missed some stuff, but I think that's it. Some of this stuff is surely superfluous, but after it worked I didn't spend any effort trying to pare it down to the minimum.", "body": "@tfboyd More information!\r\n\r\nSystem: Mac OS X 10.11.6\r\nIntel MKL library: mklml_mac_20180.0.20170425.tgz (from https://github.com/01org/mkl-dnn/releases)\r\nTensorflow commit: 38e0922d...\r\n\r\nInstalled MKL to `/opt/intel/mklml`\r\nSymlink the two `.dylib` files to `/usr/local/lib`\r\n\r\nChanges to `configure`: Change `MKL_ML_LIB_PATH` to `lib/libmklml.dylib`, `MKL_ML_OMP_LIB_PATH` to `lib/libiomp5.dylib`, comment out the parts that say \"if linux:\", comment out the parts that deal with `libdl.so.2`.\r\n\r\nChanges to `third_party/mkl/BUILD`: Change the list of three `.so` files to the two `.dylib` files\r\n\r\nWhen configuring: Yes to use MKL, No to download. (I downloaded manually.) Path to MKL: `/opt/intel/mklml`\r\n\r\nBuild command: `bazel build --verbose-failures -c opt --config=opt --config=mkl --copt=\"-DEIGEN_USE_VML\" --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-msse4.1 --copt=-msse4.2 --linkopt=\"-Wl,-rpath,/opt/intel/mklml/lib\" --linkopt=\"-L/opt/intel/mklml/lib\" --linkopt=\"-lmklml\" --linkopt=\"-iomp5\" //tensorflow/tools/pip_package:build_pip_package`\r\n\r\nIt's possible I missed some stuff, but I think that's it. Some of this stuff is surely superfluous, but after it worked I didn't spend any effort trying to pare it down to the minimum."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/225099538", "html_url": "https://github.com/tensorflow/tensorflow/issues/2687#issuecomment-225099538", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2687", "id": 225099538, "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTA5OTUzOA==", "user": {"login": "samfux84", "id": 11944875, "node_id": "MDQ6VXNlcjExOTQ0ODc1", "avatar_url": "https://avatars0.githubusercontent.com/u/11944875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samfux84", "html_url": "https://github.com/samfux84", "followers_url": "https://api.github.com/users/samfux84/followers", "following_url": "https://api.github.com/users/samfux84/following{/other_user}", "gists_url": "https://api.github.com/users/samfux84/gists{/gist_id}", "starred_url": "https://api.github.com/users/samfux84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samfux84/subscriptions", "organizations_url": "https://api.github.com/users/samfux84/orgs", "repos_url": "https://api.github.com/users/samfux84/repos", "events_url": "https://api.github.com/users/samfux84/events{/privacy}", "received_events_url": "https://api.github.com/users/samfux84/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-10T05:53:18Z", "updated_at": "2016-06-10T05:53:18Z", "author_association": "NONE", "body_html": "<p>Thank you very much for your feedback.</p>\n<p>I could now successfully reproduce the first building steps. I did a change in the CROSSBUILD file of bazel, such that it uses GCC 4.8.2 (I thought that bazel would take the compiler that is specified in the variable CC, CXX etc, but for some reason it ignored these variables and used GCC 4.4.7 instead). Further more I have changed the bazel.rc file according to your suggestions (adding build --host_force_python=py3). This seems to work so far and is reproducible.</p>\n<p>But in the next step (building the pip wheel) it fails again:</p>\n<pre><code>Target //tensorflow/tools/pip_package:build_pip_package up-to-date:\n  bazel-bin/tensorflow/tools/pip_package/build_pip_package\nINFO: Elapsed time: 321.473s, Critical Path: 103.73s\n[sfux@e2050 tensorflow]$ bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\nFri Jun 10 07:42:15 CEST 2016 : === Using tmpdir: /scratch/20942509.tmpdir/tmp.tlG0Xc7IIM\nrsync: change_dir \"/scratch/20942509.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/external\" failed: No such file or directory (2)\nrsync error: some files/attrs were not transferred (see previous errors) (code 23) at main.c(1039) [sender=3.0.6]\n[sfux@e2050 tensorflow]$\n</code></pre>\n<p>For some reason the directory \"external\" is missing:</p>\n<pre><code>[sfux@e2050 tensorflow]$ ls /scratch/20942509.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/\nd3                             iron_flex_layout            neon_animation         paper_radio_button\ndagre                          iron_form_element_behavior  org_tensorflow         paper_radio_group\neigen_archive                  iron_icon                   paper_behaviors        paper_ripple\nes6_promise                    iron_icons                  paper_button           paper_slider\nfont_roboto                    iron_iconset_svg            paper_checkbox         paper_styles\ngraphlib                       iron_input                  paper_dialog           paper_tabs\n__init__.py                    iron_list                   paper_dialog_behavior  paper_toggle_button\niron_a11y_announcer            iron_menu_behavior          paper_dropdown_menu    paper_toolbar\niron_a11y_keys_behavior        iron_meta                   paper_header_panel     plottable\niron_ajax                      iron_overlay_behavior       paper_icon_button      polymer\niron_autogrow_textarea         iron_range_behavior         paper_input            promise_polyfill\niron_behaviors                 iron_resizable_behavior     paper_item             protobuf\niron_checked_element_behavior  iron_selector               paper_material         six_archive\niron_collapse                  iron_validatable_behavior   paper_menu             web_animations_js\niron_dropdown                  lodash                      paper_menu_button      webcomponentsjs\niron_fit_behavior              MANIFEST                    paper_progress\n[sfux@e2050 tensorflow]$ ls /scratch/20942509.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/\n_solib_k8  tensorflow  third_party  util\n[sfux@e2050 tensorflow]$ \n</code></pre>\n<p>Best regards</p>\n<p>Sam</p>", "body_text": "Thank you very much for your feedback.\nI could now successfully reproduce the first building steps. I did a change in the CROSSBUILD file of bazel, such that it uses GCC 4.8.2 (I thought that bazel would take the compiler that is specified in the variable CC, CXX etc, but for some reason it ignored these variables and used GCC 4.4.7 instead). Further more I have changed the bazel.rc file according to your suggestions (adding build --host_force_python=py3). This seems to work so far and is reproducible.\nBut in the next step (building the pip wheel) it fails again:\nTarget //tensorflow/tools/pip_package:build_pip_package up-to-date:\n  bazel-bin/tensorflow/tools/pip_package/build_pip_package\nINFO: Elapsed time: 321.473s, Critical Path: 103.73s\n[sfux@e2050 tensorflow]$ bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\nFri Jun 10 07:42:15 CEST 2016 : === Using tmpdir: /scratch/20942509.tmpdir/tmp.tlG0Xc7IIM\nrsync: change_dir \"/scratch/20942509.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/external\" failed: No such file or directory (2)\nrsync error: some files/attrs were not transferred (see previous errors) (code 23) at main.c(1039) [sender=3.0.6]\n[sfux@e2050 tensorflow]$\n\nFor some reason the directory \"external\" is missing:\n[sfux@e2050 tensorflow]$ ls /scratch/20942509.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/\nd3                             iron_flex_layout            neon_animation         paper_radio_button\ndagre                          iron_form_element_behavior  org_tensorflow         paper_radio_group\neigen_archive                  iron_icon                   paper_behaviors        paper_ripple\nes6_promise                    iron_icons                  paper_button           paper_slider\nfont_roboto                    iron_iconset_svg            paper_checkbox         paper_styles\ngraphlib                       iron_input                  paper_dialog           paper_tabs\n__init__.py                    iron_list                   paper_dialog_behavior  paper_toggle_button\niron_a11y_announcer            iron_menu_behavior          paper_dropdown_menu    paper_toolbar\niron_a11y_keys_behavior        iron_meta                   paper_header_panel     plottable\niron_ajax                      iron_overlay_behavior       paper_icon_button      polymer\niron_autogrow_textarea         iron_range_behavior         paper_input            promise_polyfill\niron_behaviors                 iron_resizable_behavior     paper_item             protobuf\niron_checked_element_behavior  iron_selector               paper_material         six_archive\niron_collapse                  iron_validatable_behavior   paper_menu             web_animations_js\niron_dropdown                  lodash                      paper_menu_button      webcomponentsjs\niron_fit_behavior              MANIFEST                    paper_progress\n[sfux@e2050 tensorflow]$ ls /scratch/20942509.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/\n_solib_k8  tensorflow  third_party  util\n[sfux@e2050 tensorflow]$ \n\nBest regards\nSam", "body": "Thank you very much for your feedback.\n\nI could now successfully reproduce the first building steps. I did a change in the CROSSBUILD file of bazel, such that it uses GCC 4.8.2 (I thought that bazel would take the compiler that is specified in the variable CC, CXX etc, but for some reason it ignored these variables and used GCC 4.4.7 instead). Further more I have changed the bazel.rc file according to your suggestions (adding build --host_force_python=py3). This seems to work so far and is reproducible.\n\nBut in the next step (building the pip wheel) it fails again:\n\n```\nTarget //tensorflow/tools/pip_package:build_pip_package up-to-date:\n  bazel-bin/tensorflow/tools/pip_package/build_pip_package\nINFO: Elapsed time: 321.473s, Critical Path: 103.73s\n[sfux@e2050 tensorflow]$ bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\nFri Jun 10 07:42:15 CEST 2016 : === Using tmpdir: /scratch/20942509.tmpdir/tmp.tlG0Xc7IIM\nrsync: change_dir \"/scratch/20942509.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/external\" failed: No such file or directory (2)\nrsync error: some files/attrs were not transferred (see previous errors) (code 23) at main.c(1039) [sender=3.0.6]\n[sfux@e2050 tensorflow]$\n```\n\nFor some reason the directory \"external\" is missing:\n\n```\n[sfux@e2050 tensorflow]$ ls /scratch/20942509.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/\nd3                             iron_flex_layout            neon_animation         paper_radio_button\ndagre                          iron_form_element_behavior  org_tensorflow         paper_radio_group\neigen_archive                  iron_icon                   paper_behaviors        paper_ripple\nes6_promise                    iron_icons                  paper_button           paper_slider\nfont_roboto                    iron_iconset_svg            paper_checkbox         paper_styles\ngraphlib                       iron_input                  paper_dialog           paper_tabs\n__init__.py                    iron_list                   paper_dialog_behavior  paper_toggle_button\niron_a11y_announcer            iron_menu_behavior          paper_dropdown_menu    paper_toolbar\niron_a11y_keys_behavior        iron_meta                   paper_header_panel     plottable\niron_ajax                      iron_overlay_behavior       paper_icon_button      polymer\niron_autogrow_textarea         iron_range_behavior         paper_input            promise_polyfill\niron_behaviors                 iron_resizable_behavior     paper_item             protobuf\niron_checked_element_behavior  iron_selector               paper_material         six_archive\niron_collapse                  iron_validatable_behavior   paper_menu             web_animations_js\niron_dropdown                  lodash                      paper_menu_button      webcomponentsjs\niron_fit_behavior              MANIFEST                    paper_progress\n[sfux@e2050 tensorflow]$ ls /scratch/20942509.tmpdir/tensorflow/bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/\n_solib_k8  tensorflow  third_party  util\n[sfux@e2050 tensorflow]$ \n```\n\nBest regards\n\nSam\n"}
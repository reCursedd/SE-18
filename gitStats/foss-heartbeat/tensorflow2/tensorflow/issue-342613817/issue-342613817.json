{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20959", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20959/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20959/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20959/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20959", "id": 342613817, "node_id": "MDU6SXNzdWUzNDI2MTM4MTc=", "number": 20959, "title": "Build tensorflow-model-server for gpu - Cannot find cuda library libcudnn.so.6", "user": {"login": "nadavb", "id": 845175, "node_id": "MDQ6VXNlcjg0NTE3NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/845175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nadavb", "html_url": "https://github.com/nadavb", "followers_url": "https://api.github.com/users/nadavb/followers", "following_url": "https://api.github.com/users/nadavb/following{/other_user}", "gists_url": "https://api.github.com/users/nadavb/gists{/gist_id}", "starred_url": "https://api.github.com/users/nadavb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nadavb/subscriptions", "organizations_url": "https://api.github.com/users/nadavb/orgs", "repos_url": "https://api.github.com/users/nadavb/repos", "events_url": "https://api.github.com/users/nadavb/events{/privacy}", "received_events_url": "https://api.github.com/users/nadavb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-07-19T07:41:09Z", "updated_at": "2018-07-21T07:12:51Z", "closed_at": "2018-07-20T22:13:45Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>\n<p><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</p>\n</li>\n<li>\n<p><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux ip-172-30-1-83 4.4.0-1062-aws <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116019590\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/71\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/71/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/71\">#71</a>-Ubuntu SMP Fri Jun 15 10:07:39 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</p>\n</li>\n<li>\n<p><strong>TensorFlow installed from (source or binary)</strong>: binary</p>\n</li>\n<li>\n<p><strong>TensorFlow version (use command below)</strong>: 1.5.0</p>\n</li>\n<li>\n<p><strong>Python version</strong>: Python 2.7.12</p>\n</li>\n<li>\n<p><strong>Bazel version (if compiling from source)</strong>:</p>\n</li>\n<li>\n<p><strong>GCC/Compiler version (if compiling from source)</strong>: c++ (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609</p>\n</li>\n<li>\n<p><strong>CUDA/cuDNN version</strong>:</p>\n</li>\n</ul>\n<p>== cuda libs  ===================================================<br>\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudart_static.a<br>\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudart.so.9.0.176<br>\n/usr/local/cuda-9.0/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-9.0/doc/man/man7/libcudart.7</p>\n<p>But I also have these files:<br>\n/usr/lib/x86_64-linux-gnu/libcudnn.so -&gt; /etc/alternatives/libcudnn_so<br>\n/usr/lib/x86_64-linux-gnu/libcudnn.so.6 -&gt; libcudnn.so.6.0.21<br>\n/usr/lib/x86_64-linux-gnu/libcudnn.so.6.0.21<br>\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7 -&gt; libcudnn.so.7.0.5<br>\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.0.5</p>\n<ul>\n<li><strong>GPU model and memory</strong>: Tesla K80</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I try to build tensorflow-model-server with gpu support, as I saw that the apt-get version is only for CPU.</p>\n<p>I did:</p>\n<ol>\n<li>git clone --recurse-submodules <a href=\"https://github.com/tensorflow/serving\">https://github.com/tensorflow/serving</a></li>\n<li>bazel clean --expunge &amp;&amp; export TF_NEED_CUDA=1</li>\n<li>bazel query 'kind(rule, @local_config_cuda//...)'</li>\n</ol>\n<p>And got:</p>\n<p>Cuda Configuration Error: Cannot find cuda library libcudnn.so.6</p>\n<p>When I do: bazel build -c opt --config=cuda tensorflow_serving/model_servers:tensorflow_model_server<br>\nI get the same error.</p>", "body_text": "System information\n\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\n\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux ip-172-30-1-83 4.4.0-1062-aws #71-Ubuntu SMP Fri Jun 15 10:07:39 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n\nTensorFlow installed from (source or binary): binary\n\n\nTensorFlow version (use command below): 1.5.0\n\n\nPython version: Python 2.7.12\n\n\nBazel version (if compiling from source):\n\n\nGCC/Compiler version (if compiling from source): c++ (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\n\n\nCUDA/cuDNN version:\n\n\n== cuda libs  ===================================================\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudart_static.a\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudart.so.9.0.176\n/usr/local/cuda-9.0/doc/man/man7/libcudart.so.7\n/usr/local/cuda-9.0/doc/man/man7/libcudart.7\nBut I also have these files:\n/usr/lib/x86_64-linux-gnu/libcudnn.so -> /etc/alternatives/libcudnn_so\n/usr/lib/x86_64-linux-gnu/libcudnn.so.6 -> libcudnn.so.6.0.21\n/usr/lib/x86_64-linux-gnu/libcudnn.so.6.0.21\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7 -> libcudnn.so.7.0.5\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.0.5\n\nGPU model and memory: Tesla K80\n\nDescribe the problem\nI try to build tensorflow-model-server with gpu support, as I saw that the apt-get version is only for CPU.\nI did:\n\ngit clone --recurse-submodules https://github.com/tensorflow/serving\nbazel clean --expunge && export TF_NEED_CUDA=1\nbazel query 'kind(rule, @local_config_cuda//...)'\n\nAnd got:\nCuda Configuration Error: Cannot find cuda library libcudnn.so.6\nWhen I do: bazel build -c opt --config=cuda tensorflow_serving/model_servers:tensorflow_model_server\nI get the same error.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux ip-172-30-1-83 4.4.0-1062-aws #71-Ubuntu SMP Fri Jun 15 10:07:39 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.5.0\r\n- **Python version**: Python 2.7.12\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**: c++ (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\r\n\r\n- **CUDA/cuDNN version**:\r\n\r\n== cuda libs  ===================================================\r\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudart_static.a\r\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudart.so.9.0.176\r\n/usr/local/cuda-9.0/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-9.0/doc/man/man7/libcudart.7\r\n\r\nBut I also have these files:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so -> /etc/alternatives/libcudnn_so\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.6 -> libcudnn.so.6.0.21\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.6.0.21\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7 -> libcudnn.so.7.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.0.5\r\n\r\n- **GPU model and memory**: Tesla K80\r\n\r\n### Describe the problem\r\n\r\nI try to build tensorflow-model-server with gpu support, as I saw that the apt-get version is only for CPU.\r\n\r\nI did:\r\n1. git clone --recurse-submodules https://github.com/tensorflow/serving\r\n2. bazel clean --expunge && export TF_NEED_CUDA=1\r\n3. bazel query 'kind(rule, @local_config_cuda//...)'\r\n\r\nAnd got:\r\n\r\nCuda Configuration Error: Cannot find cuda library libcudnn.so.6\r\n\r\nWhen I do: bazel build -c opt --config=cuda tensorflow_serving/model_servers:tensorflow_model_server\r\nI get the same error.\r\n"}
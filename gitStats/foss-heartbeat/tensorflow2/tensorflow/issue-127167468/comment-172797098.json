{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/172797098", "html_url": "https://github.com/tensorflow/tensorflow/issues/799#issuecomment-172797098", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/799", "id": 172797098, "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mjc5NzA5OA==", "user": {"login": "salomons", "id": 616183, "node_id": "MDQ6VXNlcjYxNjE4Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/616183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salomons", "html_url": "https://github.com/salomons", "followers_url": "https://api.github.com/users/salomons/followers", "following_url": "https://api.github.com/users/salomons/following{/other_user}", "gists_url": "https://api.github.com/users/salomons/gists{/gist_id}", "starred_url": "https://api.github.com/users/salomons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salomons/subscriptions", "organizations_url": "https://api.github.com/users/salomons/orgs", "repos_url": "https://api.github.com/users/salomons/repos", "events_url": "https://api.github.com/users/salomons/events{/privacy}", "received_events_url": "https://api.github.com/users/salomons/received_events", "type": "User", "site_admin": false}, "created_at": "2016-01-19T09:54:14Z", "updated_at": "2016-01-19T10:00:57Z", "author_association": "NONE", "body_html": "<p>You need to specify different variable scopes for the LSTM cells.</p>\n<pre><code>with tf.variable_scope('forward'):\n    self.lstm_fw_cell = rnn_cell.BasicLSTMCell(dim_hidden)   \nwith tf.variable_scope('backward'):\n    self.lstm_bw_cell = rnn_cell.BasicLSTMCell(dim_hidden)\n</code></pre>\n<p>Otherwise there will be a name collision (both cells try to use the \"BiRNN_FW/RNN/BasicLSTMCell/Linear/Matrix\" name) and tf will interpret this as if your intention is to share the parameters in the two cells, which is not what you want. TF will throw an exception because you haven't explicitly told it to reuse variables in the second scope: <code>with variable_scope(name, reuse=True)</code>.</p>\n<p>Setting the variable scopes, as above, will create unique names for the variables:<br>\nBiRNN_FW/RNN/BasicLSTMCell/<strong>forward</strong>/Linear/Matrix<br>\nBiRNN_FW/RNN/BasicLSTMCell/<strong>backward</strong>/Linear/Matrix</p>\n<p>Read the <a href=\"https://www.tensorflow.org/versions/0.6.0/how_tos/variable_scope/index.html#sharing-variables\" rel=\"nofollow\">Sharing Variables</a> guide for more information.</p>", "body_text": "You need to specify different variable scopes for the LSTM cells.\nwith tf.variable_scope('forward'):\n    self.lstm_fw_cell = rnn_cell.BasicLSTMCell(dim_hidden)   \nwith tf.variable_scope('backward'):\n    self.lstm_bw_cell = rnn_cell.BasicLSTMCell(dim_hidden)\n\nOtherwise there will be a name collision (both cells try to use the \"BiRNN_FW/RNN/BasicLSTMCell/Linear/Matrix\" name) and tf will interpret this as if your intention is to share the parameters in the two cells, which is not what you want. TF will throw an exception because you haven't explicitly told it to reuse variables in the second scope: with variable_scope(name, reuse=True).\nSetting the variable scopes, as above, will create unique names for the variables:\nBiRNN_FW/RNN/BasicLSTMCell/forward/Linear/Matrix\nBiRNN_FW/RNN/BasicLSTMCell/backward/Linear/Matrix\nRead the Sharing Variables guide for more information.", "body": "You need to specify different variable scopes for the LSTM cells. \n\n```\nwith tf.variable_scope('forward'):\n    self.lstm_fw_cell = rnn_cell.BasicLSTMCell(dim_hidden)   \nwith tf.variable_scope('backward'):\n    self.lstm_bw_cell = rnn_cell.BasicLSTMCell(dim_hidden)\n```\n\nOtherwise there will be a name collision (both cells try to use the \"BiRNN_FW/RNN/BasicLSTMCell/Linear/Matrix\" name) and tf will interpret this as if your intention is to share the parameters in the two cells, which is not what you want. TF will throw an exception because you haven't explicitly told it to reuse variables in the second scope: `with variable_scope(name, reuse=True)`.  \n\nSetting the variable scopes, as above, will create unique names for the variables:\nBiRNN_FW/RNN/BasicLSTMCell/**forward**/Linear/Matrix\nBiRNN_FW/RNN/BasicLSTMCell/**backward**/Linear/Matrix\n\nRead the [Sharing Variables](https://www.tensorflow.org/versions/0.6.0/how_tos/variable_scope/index.html#sharing-variables) guide for more information.\n"}
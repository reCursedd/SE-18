{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/379293617", "html_url": "https://github.com/tensorflow/tensorflow/issues/8904#issuecomment-379293617", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8904", "id": 379293617, "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTI5MzYxNw==", "user": {"login": "petrosmol", "id": 22332205, "node_id": "MDQ6VXNlcjIyMzMyMjA1", "avatar_url": "https://avatars0.githubusercontent.com/u/22332205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrosmol", "html_url": "https://github.com/petrosmol", "followers_url": "https://api.github.com/users/petrosmol/followers", "following_url": "https://api.github.com/users/petrosmol/following{/other_user}", "gists_url": "https://api.github.com/users/petrosmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrosmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrosmol/subscriptions", "organizations_url": "https://api.github.com/users/petrosmol/orgs", "repos_url": "https://api.github.com/users/petrosmol/repos", "events_url": "https://api.github.com/users/petrosmol/events{/privacy}", "received_events_url": "https://api.github.com/users/petrosmol/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-06T15:43:35Z", "updated_at": "2018-04-06T15:43:35Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15832113\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Lidaguo\">@Lidaguo</a>.</p>\n<p>Hi, RandomFourierFeatureMapper should be able to handle input/output dimensions of 100/1000. Related question: Do you see the same issue on CPU?</p>\n<p>Is it possible that you add the map ops multiple times (one per epoch) in your training graph and that's why your are getting OOM errors after a few iterations?<br>\nRandomFourierFeatureMapper only adds map OPs (and does not store any values in a way that is different than what any TF graph would do it).</p>\n<p>Can you make sure that, under the hood, your call does not call .map method multiple times?</p>\n<p>For debugging, there are ways to print the size of the TF graph after each iteration/epoch. If this is growing with each iteration then you are likely adding ops to your graph during training (which is bad).</p>\n<p>If the above suggestions don't help you fix the problem, send me the full code so that I can reproduce the issue.</p>\n<p>Thanks<br>\nPetros</p>", "body_text": "@Lidaguo.\nHi, RandomFourierFeatureMapper should be able to handle input/output dimensions of 100/1000. Related question: Do you see the same issue on CPU?\nIs it possible that you add the map ops multiple times (one per epoch) in your training graph and that's why your are getting OOM errors after a few iterations?\nRandomFourierFeatureMapper only adds map OPs (and does not store any values in a way that is different than what any TF graph would do it).\nCan you make sure that, under the hood, your call does not call .map method multiple times?\nFor debugging, there are ways to print the size of the TF graph after each iteration/epoch. If this is growing with each iteration then you are likely adding ops to your graph during training (which is bad).\nIf the above suggestions don't help you fix the problem, send me the full code so that I can reproduce the issue.\nThanks\nPetros", "body": "@Lidaguo.\r\n\r\nHi, RandomFourierFeatureMapper should be able to handle input/output dimensions of 100/1000. Related question: Do you see the same issue on CPU?\r\n\r\nIs it possible that you add the map ops multiple times (one per epoch) in your training graph and that's why your are getting OOM errors after a few iterations? \r\nRandomFourierFeatureMapper only adds map OPs (and does not store any values in a way that is different than what any TF graph would do it).\r\n\r\nCan you make sure that, under the hood, your call does not call .map method multiple times?\r\n\r\nFor debugging, there are ways to print the size of the TF graph after each iteration/epoch. If this is growing with each iteration then you are likely adding ops to your graph during training (which is bad).\r\n\r\nIf the above suggestions don't help you fix the problem, send me the full code so that I can reproduce the issue.\r\n\r\nThanks\r\nPetros"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/173228847", "pull_request_review_id": 102384028, "id": 173228847, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzIyODg0Nw==", "diff_hunk": "@@ -518,31 +521,33 @@ class MklConv2DCustomBackpropFilterOp\n       bias_grad->SetOpMemDesc(bias_grad_dims, memory::format::x);\n     }\n \n-    // Create convolution backward weights primitive.\n-    auto bwd_desc =\n-        (biasEnabled && (bias_grad != nullptr))\n-            ? convolution_backward_weights::desc(\n-                  convolution_direct, input->GetOpMemDesc(),\n-                  output->GetOpMemDesc(), bias_grad->GetOpMemDesc(),\n-                  outbackprop->GetOpMemDesc(), strides, padding_l, padding_r,\n-                  padding)\n-            : convolution_backward_weights::desc(\n-                  convolution_direct, input->GetOpMemDesc(),\n-                  output->GetOpMemDesc(), outbackprop->GetOpMemDesc(), strides,\n-                  padding_l, padding_r, padding);\n-\n-    auto bwd_pd = convolution_backward_weights::primitive_desc(\n-        bwd_desc, cpu_engine, conv_fwd_pd);\n-\n-    // Allocate output tensor.\n-    AllocateOutputTensor(context, bwd_pd, bwd_output_dims, bwd_output_format,\n-                         output_tensor);\n-\n-    CHECK_NOTNULL(*output_tensor);\n-    // Set buffer handle using allocated output tensor.\n-    output->SetUsrMemDataHandle(*output_tensor);\n-\n     if (biasEnabled && (bias_grad != nullptr)) {\n+      // Create convolution backward weights with bias primitive.\n+      // Use MKLDNN dilated convolution in case of dilate rate (>0).\n+      // MKLDNN dilate rate start from 0.", "path": "tensorflow/core/kernels/mkl_conv_grad_filter_ops.cc", "position": null, "original_position": 50, "commit_id": "020a47546548e0e3431ff300b11280215e58a475", "original_commit_id": "4c7da667c2a82b7b91471c4fd7e9bce724b08fed", "user": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "body": "What do you mean by \"MKLDNN dilate rate start from 0.\"? \r\nThat comment just seems potentially confusing. Maybe just say \"Use dilated convolution in case dilate rates are greater than zero.\"", "created_at": "2018-03-08T17:20:55Z", "updated_at": "2018-03-08T19:37:33Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/17160#discussion_r173228847", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17160", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/173228847"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/17160#discussion_r173228847"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17160"}}, "body_html": "<p>What do you mean by \"MKLDNN dilate rate start from 0.\"?<br>\nThat comment just seems potentially confusing. Maybe just say \"Use dilated convolution in case dilate rates are greater than zero.\"</p>", "body_text": "What do you mean by \"MKLDNN dilate rate start from 0.\"?\nThat comment just seems potentially confusing. Maybe just say \"Use dilated convolution in case dilate rates are greater than zero.\""}
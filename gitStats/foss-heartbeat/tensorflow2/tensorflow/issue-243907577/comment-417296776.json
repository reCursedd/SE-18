{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/417296776", "html_url": "https://github.com/tensorflow/tensorflow/issues/11598#issuecomment-417296776", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11598", "id": 417296776, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzI5Njc3Ng==", "user": {"login": "weiwancheng", "id": 13504420, "node_id": "MDQ6VXNlcjEzNTA0NDIw", "avatar_url": "https://avatars0.githubusercontent.com/u/13504420?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weiwancheng", "html_url": "https://github.com/weiwancheng", "followers_url": "https://api.github.com/users/weiwancheng/followers", "following_url": "https://api.github.com/users/weiwancheng/following{/other_user}", "gists_url": "https://api.github.com/users/weiwancheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/weiwancheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weiwancheng/subscriptions", "organizations_url": "https://api.github.com/users/weiwancheng/orgs", "repos_url": "https://api.github.com/users/weiwancheng/repos", "events_url": "https://api.github.com/users/weiwancheng/events{/privacy}", "received_events_url": "https://api.github.com/users/weiwancheng/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-30T12:10:27Z", "updated_at": "2018-08-30T12:10:27Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6018251\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/georgesterpu\">@georgesterpu</a> hi, I found the beam search does not stop  when generated EOS tokens. So, it will generate multiple EOS tokens,and beam_size sentences will alike. such as:<br>\nbeam_size=5,result:<br>\nsentence1\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u5c0f\u66e6\u4e5f\u662f\u5341\u5206\u62b1\u6b49\u7684 eos unk unk unk unk unk<br>\nsentence2\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos eos eos eos eos eos eos eos eos eos eos<br>\nsentence3\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos eos eos eos eos eos eos eos eos eos unk<br>\nsentence4\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos eos eos eos eos eos eos unk unk unk unk<br>\nsentence5\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos unk unk unk unk unk unk unk unk unk unk<br>\nDo you solve this problem?</p>", "body_text": "@georgesterpu hi, I found the beam search does not stop  when generated EOS tokens. So, it will generate multiple EOS tokens,and beam_size sentences will alike. such as:\nbeam_size=5,result:\nsentence1\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u5c0f\u66e6\u4e5f\u662f\u5341\u5206\u62b1\u6b49\u7684 eos unk unk unk unk unk\nsentence2\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos eos eos eos eos eos eos eos eos eos eos\nsentence3\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos eos eos eos eos eos eos eos eos eos unk\nsentence4\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos eos eos eos eos eos eos unk unk unk unk\nsentence5\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos unk unk unk unk unk unk unk unk unk unk\nDo you solve this problem?", "body": "@georgesterpu hi, I found the beam search does not stop  when generated EOS tokens. So, it will generate multiple EOS tokens,and beam_size sentences will alike. such as:\r\nbeam_size=5,result:\r\nsentence1\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u5c0f\u66e6\u4e5f\u662f\u5341\u5206\u62b1\u6b49\u7684 eos unk unk unk unk unk\r\nsentence2\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos eos eos eos eos eos eos eos eos eos eos\r\nsentence3\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos eos eos eos eos eos eos eos eos eos unk\r\nsentence4\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos eos eos eos eos eos eos unk unk unk unk\r\nsentence5\uff1a \u7ed9\u60a8\u5e26\u6765\u4e0d\u597d\u7684\u4f53\u9a8c\u4e86\uff0c\u975e\u5e38\u62b1\u6b49 eos unk unk unk unk unk unk unk unk unk unk\r\nDo you solve this problem?"}
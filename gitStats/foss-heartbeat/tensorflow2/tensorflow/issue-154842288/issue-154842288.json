{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2364", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2364/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2364/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2364/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2364", "id": 154842288, "node_id": "MDU6SXNzdWUxNTQ4NDIyODg=", "number": 2364, "title": "zlib.h not found when compile tensorflow with GPU support", "user": {"login": "333caowei", "id": 4569055, "node_id": "MDQ6VXNlcjQ1NjkwNTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4569055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/333caowei", "html_url": "https://github.com/333caowei", "followers_url": "https://api.github.com/users/333caowei/followers", "following_url": "https://api.github.com/users/333caowei/following{/other_user}", "gists_url": "https://api.github.com/users/333caowei/gists{/gist_id}", "starred_url": "https://api.github.com/users/333caowei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/333caowei/subscriptions", "organizations_url": "https://api.github.com/users/333caowei/orgs", "repos_url": "https://api.github.com/users/333caowei/repos", "events_url": "https://api.github.com/users/333caowei/events{/privacy}", "received_events_url": "https://api.github.com/users/333caowei/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-05-14T08:45:46Z", "updated_at": "2016-06-07T17:34:40Z", "closed_at": "2016-06-07T17:34:40Z", "author_association": "NONE", "body_html": "<p>I am trying to compile tensorflow from source. I can build it <strong>successfully</strong> with CPU support only( i.e. not use <code>--config=cuda</code>) .</p>\n<p>But when I try to build it with GPU support, I get error:</p>\n<pre><code>[chaowei@node07 tensorflow]$ export EXTRA_BAZEL_ARGS='-s --verbose_failures --ignore_unsupported_sandboxing --genrule_strategy=standalone --spawn_strategy=standalone --jobs 8'\n[chaowei@node07 tensorflow]$ \n[chaowei@node07 tensorflow]$ /gpfs/home/chaowei/download/bazel-0.1.5/output/bazel  build -c opt --config=cuda --linkopt '-lrt' --copt=\"-DGPR_BACKWARDS_COMPATIBILITY_MODE\" --conlyopt=\"-std=c99\" //tensorflow/tools/pip_package:build_pip_package\n...........\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.io/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\nINFO: Found 1 target...\nERROR: /gpfs/home/chaowei/.cache/bazel/_bazel_chaowei/2ce35f089de902cec16e4a2c6a450834/external/grpc/BUILD:485:1: C++ compilation of rule '@grpc//:grpc_unsecure' failed: gcc failed: error executing command /gpfs/home/chaowei/software/gcc-6.1.0/bin/gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 ... (remaining 39 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nexternal/grpc/src/core/compression/message_compress.c:41:18: fatal error: zlib.h: No such file or directory\n #include &lt;zlib.h&gt;\n                  ^\ncompilation terminated.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 71.894s, Critical Path: 58.77s\n</code></pre>\n<p><strong>I also compile python3 from source in my computer. And when I <code>import zlib</code>, it works fine.</strong></p>\n<p>Here is the information of my system:<br>\n<code>[chaowei@mgt ~]$ cat /etc/redhat-release Red Hat Enterprise Linux Server release 6.5 (Santiago)</code></p>\n<pre><code>[chaowei@node07 gcc-6.1.0]$ gcc -v\nbuilt-in specs\u3002\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/gpfs/home/chaowei/software/gcc-6.1.0/libexec/gcc/x86_64-pc-linux-gnu/6.1.0/lto-wrapper\nTarget\uff1ax86_64-pc-linux-gnu\nConfigured with\uff1a./configure --prefix=/gpfs/home/chaowei/software/gcc-6.1.0\nThread model\uff1aposix\ngcc version 6.1.0 (GCC) \n</code></pre>\n<p>I wonder  why I get <code>zlib.h</code> error  when I only build tensorflow with GPU support.</p>", "body_text": "I am trying to compile tensorflow from source. I can build it successfully with CPU support only( i.e. not use --config=cuda) .\nBut when I try to build it with GPU support, I get error:\n[chaowei@node07 tensorflow]$ export EXTRA_BAZEL_ARGS='-s --verbose_failures --ignore_unsupported_sandboxing --genrule_strategy=standalone --spawn_strategy=standalone --jobs 8'\n[chaowei@node07 tensorflow]$ \n[chaowei@node07 tensorflow]$ /gpfs/home/chaowei/download/bazel-0.1.5/output/bazel  build -c opt --config=cuda --linkopt '-lrt' --copt=\"-DGPR_BACKWARDS_COMPATIBILITY_MODE\" --conlyopt=\"-std=c99\" //tensorflow/tools/pip_package:build_pip_package\n...........\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.io/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\nINFO: Found 1 target...\nERROR: /gpfs/home/chaowei/.cache/bazel/_bazel_chaowei/2ce35f089de902cec16e4a2c6a450834/external/grpc/BUILD:485:1: C++ compilation of rule '@grpc//:grpc_unsecure' failed: gcc failed: error executing command /gpfs/home/chaowei/software/gcc-6.1.0/bin/gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 ... (remaining 39 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nexternal/grpc/src/core/compression/message_compress.c:41:18: fatal error: zlib.h: No such file or directory\n #include <zlib.h>\n                  ^\ncompilation terminated.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 71.894s, Critical Path: 58.77s\n\nI also compile python3 from source in my computer. And when I import zlib, it works fine.\nHere is the information of my system:\n[chaowei@mgt ~]$ cat /etc/redhat-release Red Hat Enterprise Linux Server release 6.5 (Santiago)\n[chaowei@node07 gcc-6.1.0]$ gcc -v\nbuilt-in specs\u3002\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/gpfs/home/chaowei/software/gcc-6.1.0/libexec/gcc/x86_64-pc-linux-gnu/6.1.0/lto-wrapper\nTarget\uff1ax86_64-pc-linux-gnu\nConfigured with\uff1a./configure --prefix=/gpfs/home/chaowei/software/gcc-6.1.0\nThread model\uff1aposix\ngcc version 6.1.0 (GCC) \n\nI wonder  why I get zlib.h error  when I only build tensorflow with GPU support.", "body": "I am trying to compile tensorflow from source. I can build it **successfully** with CPU support only( i.e. not use `--config=cuda`) .\n\nBut when I try to build it with GPU support, I get error:\n\n```\n[chaowei@node07 tensorflow]$ export EXTRA_BAZEL_ARGS='-s --verbose_failures --ignore_unsupported_sandboxing --genrule_strategy=standalone --spawn_strategy=standalone --jobs 8'\n[chaowei@node07 tensorflow]$ \n[chaowei@node07 tensorflow]$ /gpfs/home/chaowei/download/bazel-0.1.5/output/bazel  build -c opt --config=cuda --linkopt '-lrt' --copt=\"-DGPR_BACKWARDS_COMPATIBILITY_MODE\" --conlyopt=\"-std=c99\" //tensorflow/tools/pip_package:build_pip_package\n...........\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.io/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\nINFO: Found 1 target...\nERROR: /gpfs/home/chaowei/.cache/bazel/_bazel_chaowei/2ce35f089de902cec16e4a2c6a450834/external/grpc/BUILD:485:1: C++ compilation of rule '@grpc//:grpc_unsecure' failed: gcc failed: error executing command /gpfs/home/chaowei/software/gcc-6.1.0/bin/gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 ... (remaining 39 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nexternal/grpc/src/core/compression/message_compress.c:41:18: fatal error: zlib.h: No such file or directory\n #include <zlib.h>\n                  ^\ncompilation terminated.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 71.894s, Critical Path: 58.77s\n```\n\n**I also compile python3 from source in my computer. And when I `import zlib`, it works fine.**\n\nHere is the information of my system:\n`[chaowei@mgt ~]$ cat /etc/redhat-release Red Hat Enterprise Linux Server release 6.5 (Santiago)`\n\n```\n[chaowei@node07 gcc-6.1.0]$ gcc -v\nbuilt-in specs\u3002\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/gpfs/home/chaowei/software/gcc-6.1.0/libexec/gcc/x86_64-pc-linux-gnu/6.1.0/lto-wrapper\nTarget\uff1ax86_64-pc-linux-gnu\nConfigured with\uff1a./configure --prefix=/gpfs/home/chaowei/software/gcc-6.1.0\nThread model\uff1aposix\ngcc version 6.1.0 (GCC) \n```\n\nI wonder  why I get `zlib.h` error  when I only build tensorflow with GPU support.\n"}
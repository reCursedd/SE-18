{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/391108545", "html_url": "https://github.com/tensorflow/tensorflow/issues/19260#issuecomment-391108545", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19260", "id": 391108545, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTEwODU0NQ==", "user": {"login": "rryan", "id": 26527, "node_id": "MDQ6VXNlcjI2NTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/26527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rryan", "html_url": "https://github.com/rryan", "followers_url": "https://api.github.com/users/rryan/followers", "following_url": "https://api.github.com/users/rryan/following{/other_user}", "gists_url": "https://api.github.com/users/rryan/gists{/gist_id}", "starred_url": "https://api.github.com/users/rryan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rryan/subscriptions", "organizations_url": "https://api.github.com/users/rryan/orgs", "repos_url": "https://api.github.com/users/rryan/repos", "events_url": "https://api.github.com/users/rryan/events{/privacy}", "received_events_url": "https://api.github.com/users/rryan/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-22T19:14:57Z", "updated_at": "2018-05-22T19:14:57Z", "author_association": "MEMBER", "body_html": "<p>Here's a minimal reproduction of the failure:<br>\nIn <code>tensorflow/contrib/lite/kernels/strided_slice_test.cc</code>:</p>\n<div class=\"highlight highlight-source-c++\"><pre><span class=\"pl-en\">TEST</span>(StridedSliceOpTest, In1D_ShrinkAxisMask1_NegativeSlice) {\n  <span class=\"pl-c\"><span class=\"pl-c\">//</span> This is equivalent to tf.range(4)[-1].</span>\n  StridedSliceOpModel&lt;&gt; <span class=\"pl-c1\">m</span>({<span class=\"pl-c1\">4</span>}, {<span class=\"pl-c1\">1</span>}, {<span class=\"pl-c1\">1</span>}, {<span class=\"pl-c1\">1</span>}, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span>);\n  m.<span class=\"pl-c1\">SetInput</span>({<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">4</span>});\n  m.<span class=\"pl-c1\">SetBegin</span>({-<span class=\"pl-c1\">1</span>});\n  m.<span class=\"pl-c1\">SetEnd</span>({<span class=\"pl-c1\">0</span>});\n  m.<span class=\"pl-c1\">SetStrides</span>({<span class=\"pl-c1\">1</span>});\n\n  m.<span class=\"pl-c1\">Invoke</span>();\n  <span class=\"pl-c1\">EXPECT_TRUE</span>(m.<span class=\"pl-c1\">GetOutputShape</span>().<span class=\"pl-c1\">empty</span>());\n  <span class=\"pl-c1\">EXPECT_THAT</span>(m.<span class=\"pl-c1\">GetOutput</span>(), <span class=\"pl-c1\">ElementsAreArray</span>({<span class=\"pl-c1\">4</span>}));\n}</pre></div>\n<pre><code>[ RUN      ] StridedSliceOpTest.In1D_ShrinkAxisMask1_NegativeSlice\nERROR: third_party/tensorflow/contrib/lite/kernels/strided_slice_test.cc:397 \nValue of: m.GetOutput()\nExpected: has 1 element that is equal to 4\n  Actual: { -1.21979e-12 }, whose element #0 doesn't match\nStack trace:\n0x55ebb4b9a8ab: tflite::(anonymous namespace)::StridedSliceOpTest_In1D_ShrinkAxisMask1_NegativeSlice_Test::TestBody() @ ??:??\n0x7f6e29315fad: void testing::internal::HandleSehExceptionsInMethodIfSupported&lt;testing::Test, void&gt;(testing::Test*, void (testing::Test::*)(), char const*) @ ??:??\n0x7f6e29307ad1: void testing::internal::HandleExceptionsInMethodIfSupported&lt;testing::Test, void&gt;(testing::Test*, void (testing::Test::*)(), char const*) @ ??:??\n0x7f6e292fa485: testing::Test::Run() @ ??:??\n0x7f6e292fabdf: testing::TestInfo::Run() @ ??:??\n... gUnit internal frames ...\n</code></pre>", "body_text": "Here's a minimal reproduction of the failure:\nIn tensorflow/contrib/lite/kernels/strided_slice_test.cc:\nTEST(StridedSliceOpTest, In1D_ShrinkAxisMask1_NegativeSlice) {\n  // This is equivalent to tf.range(4)[-1].\n  StridedSliceOpModel<> m({4}, {1}, {1}, {1}, 0, 0, 0, 0, 1);\n  m.SetInput({1, 2, 3, 4});\n  m.SetBegin({-1});\n  m.SetEnd({0});\n  m.SetStrides({1});\n\n  m.Invoke();\n  EXPECT_TRUE(m.GetOutputShape().empty());\n  EXPECT_THAT(m.GetOutput(), ElementsAreArray({4}));\n}\n[ RUN      ] StridedSliceOpTest.In1D_ShrinkAxisMask1_NegativeSlice\nERROR: third_party/tensorflow/contrib/lite/kernels/strided_slice_test.cc:397 \nValue of: m.GetOutput()\nExpected: has 1 element that is equal to 4\n  Actual: { -1.21979e-12 }, whose element #0 doesn't match\nStack trace:\n0x55ebb4b9a8ab: tflite::(anonymous namespace)::StridedSliceOpTest_In1D_ShrinkAxisMask1_NegativeSlice_Test::TestBody() @ ??:??\n0x7f6e29315fad: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) @ ??:??\n0x7f6e29307ad1: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) @ ??:??\n0x7f6e292fa485: testing::Test::Run() @ ??:??\n0x7f6e292fabdf: testing::TestInfo::Run() @ ??:??\n... gUnit internal frames ...", "body": "Here's a minimal reproduction of the failure:\r\nIn `tensorflow/contrib/lite/kernels/strided_slice_test.cc`:\r\n```c++\r\nTEST(StridedSliceOpTest, In1D_ShrinkAxisMask1_NegativeSlice) {\r\n  // This is equivalent to tf.range(4)[-1].\r\n  StridedSliceOpModel<> m({4}, {1}, {1}, {1}, 0, 0, 0, 0, 1);\r\n  m.SetInput({1, 2, 3, 4});\r\n  m.SetBegin({-1});\r\n  m.SetEnd({0});\r\n  m.SetStrides({1});\r\n\r\n  m.Invoke();\r\n  EXPECT_TRUE(m.GetOutputShape().empty());\r\n  EXPECT_THAT(m.GetOutput(), ElementsAreArray({4}));\r\n}\r\n```\r\n\r\n```\r\n[ RUN      ] StridedSliceOpTest.In1D_ShrinkAxisMask1_NegativeSlice\r\nERROR: third_party/tensorflow/contrib/lite/kernels/strided_slice_test.cc:397 \r\nValue of: m.GetOutput()\r\nExpected: has 1 element that is equal to 4\r\n  Actual: { -1.21979e-12 }, whose element #0 doesn't match\r\nStack trace:\r\n0x55ebb4b9a8ab: tflite::(anonymous namespace)::StridedSliceOpTest_In1D_ShrinkAxisMask1_NegativeSlice_Test::TestBody() @ ??:??\r\n0x7f6e29315fad: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) @ ??:??\r\n0x7f6e29307ad1: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) @ ??:??\r\n0x7f6e292fa485: testing::Test::Run() @ ??:??\r\n0x7f6e292fabdf: testing::TestInfo::Run() @ ??:??\r\n... gUnit internal frames ...\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10479", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10479/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10479/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10479/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10479", "id": 234081951, "node_id": "MDU6SXNzdWUyMzQwODE5NTE=", "number": 10479, "title": "Possible bug: LSTMCell with use_peephole=True breaks when using initializer=tf.orthogonal_initializer", "user": {"login": "Sycor4x", "id": 17602932, "node_id": "MDQ6VXNlcjE3NjAyOTMy", "avatar_url": "https://avatars3.githubusercontent.com/u/17602932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sycor4x", "html_url": "https://github.com/Sycor4x", "followers_url": "https://api.github.com/users/Sycor4x/followers", "following_url": "https://api.github.com/users/Sycor4x/following{/other_user}", "gists_url": "https://api.github.com/users/Sycor4x/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sycor4x/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sycor4x/subscriptions", "organizations_url": "https://api.github.com/users/Sycor4x/orgs", "repos_url": "https://api.github.com/users/Sycor4x/repos", "events_url": "https://api.github.com/users/Sycor4x/events{/privacy}", "received_events_url": "https://api.github.com/users/Sycor4x/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2017-06-07T03:23:42Z", "updated_at": "2018-04-13T18:44:41Z", "closed_at": null, "author_association": "NONE", "body_html": "<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes, below.</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: OSX Sierra</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary - pip</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.2rc0</li>\n<li><strong>Bazel version (if compiling from source)</strong>: NA</li>\n<li><strong>CUDA/cuDNN version</strong>: NA</li>\n<li><strong>GPU model and memory</strong>: NA</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<pre><code>\nclass ToyModel(object):\n\tdef __init__(self):\n\t\tx = tf.get_variable(\"x\", shape=[5, 3, 7],\n\t\t\t\t\t\t\tinitializer=tf.random_normal_initializer(),\n\t\t\t\t\t\t\ttrainable=False)\n\t\tcell = tf.contrib.rnn.LSTMCell(7, use_peepholes=True, initializer=tf.orthogonal_initializer)\n\t\tself.rnn_out, self.final_state = tf.nn.dynamic_rnn(cell=cell,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   inputs=x,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   parallel_iterations=8,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   time_major=True,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   dtype=tf.float32)\n\n\ngraph_context = tf.Graph()\nwith graph_context.as_default():\n\tm1 = ToyModel()\n\n\ttf_init = tf.global_variables_initializer()\n\tsave_dir = \"/Users/delkind/Desktop/whd/tf_checkpoints/unit_test\"\n\n\tsv = tf.train.Supervisor(logdir=save_dir)\n\twith sv.managed_session() as sess:\n\t\ty1 = m1.rnn_out.eval(session=sess)\n\n\t\tprint(y1)\n</code></pre>\n<h3>Describe the problem</h3>\n<p>I believe this is a bug. When using this code, the following error is raised.</p>\n<pre><code>\nTraceback (most recent call last):\n  File \"src/tensorflow_unit_tests.py\", line 84, in &lt;module&gt;\n    m1 = ToyModel()\n  File \"src/tensorflow_unit_tests.py\", line 79, in __init__\n    dtype=tf.float32)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 566, in dynamic_rnn\n    dtype=dtype)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 729, in _dynamic_rnn_loop\n    swap_memory=swap_memory)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2766, in while_loop\n    result = context.BuildLoop(cond, body, loop_vars, shape_invariants)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2595, in BuildLoop\n    pred, body, original_loop_vars, loop_vars, shape_invariants)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2545, in _BuildLoop\n    body_result = body(*packed_vars_for_body)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 712, in _time_step\n    skip_conditionals=True)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 198, in _rnn_step\n    new_output, new_state = call_cell()\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 700, in &lt;lambda&gt;\n    call_cell = lambda: cell(input_t, state)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 685, in __call__\n    output, new_state = self._cell(inputs, state, scope)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 165, in __call__\n    return super(_RNNCell, self).__call__(inputs, state)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 439, in __call__\n    outputs = self.call(inputs, *args, **kwargs)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 376, in call\n    \"w_f_diag\", shape=[self._num_units], dtype=dtype)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 1065, in get_variable\n    use_resource=use_resource, custom_getter=custom_getter)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 962, in get_variable\n    use_resource=use_resource, custom_getter=custom_getter)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 360, in get_variable\n    validate_shape=validate_shape, use_resource=use_resource)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 168, in _rnn_get_variable\n    variable = getter(*args, **kwargs)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 352, in _true_getter\n    use_resource=use_resource)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 725, in _get_single_variable\n    validate_shape=validate_shape)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 200, in __init__\n    expected_shape=expected_shape)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 278, in _init_from_args\n    initial_value(), name=\"initial_value\", dtype=dtype)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 701, in &lt;lambda&gt;\n    shape.as_list(), dtype=dtype, partition_info=partition_info)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/init_ops.py\", line 481, in __call__\n    raise ValueError(\"The tensor to initialize must be \"\nValueError: The tensor to initialize must be at least two-dimensional\n\n</code></pre>\n<p>This is unexpected behavior. If you omit either of <code>initializer=tf.orthogonal_initializer</code> or <code>use_peephole=True</code>, the graph can be built and evaluated as expected. I'm not aware of a mathematical reason the weights in this model cannot be orthogonal.</p>", "body_text": "Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, below.\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): OSX Sierra\nTensorFlow installed from (source or binary): binary - pip\nTensorFlow version (use command below): 1.2rc0\nBazel version (if compiling from source): NA\nCUDA/cuDNN version: NA\nGPU model and memory: NA\nExact command to reproduce:\n\n\nclass ToyModel(object):\n\tdef __init__(self):\n\t\tx = tf.get_variable(\"x\", shape=[5, 3, 7],\n\t\t\t\t\t\t\tinitializer=tf.random_normal_initializer(),\n\t\t\t\t\t\t\ttrainable=False)\n\t\tcell = tf.contrib.rnn.LSTMCell(7, use_peepholes=True, initializer=tf.orthogonal_initializer)\n\t\tself.rnn_out, self.final_state = tf.nn.dynamic_rnn(cell=cell,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   inputs=x,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   parallel_iterations=8,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   time_major=True,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   dtype=tf.float32)\n\n\ngraph_context = tf.Graph()\nwith graph_context.as_default():\n\tm1 = ToyModel()\n\n\ttf_init = tf.global_variables_initializer()\n\tsave_dir = \"/Users/delkind/Desktop/whd/tf_checkpoints/unit_test\"\n\n\tsv = tf.train.Supervisor(logdir=save_dir)\n\twith sv.managed_session() as sess:\n\t\ty1 = m1.rnn_out.eval(session=sess)\n\n\t\tprint(y1)\n\nDescribe the problem\nI believe this is a bug. When using this code, the following error is raised.\n\nTraceback (most recent call last):\n  File \"src/tensorflow_unit_tests.py\", line 84, in <module>\n    m1 = ToyModel()\n  File \"src/tensorflow_unit_tests.py\", line 79, in __init__\n    dtype=tf.float32)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 566, in dynamic_rnn\n    dtype=dtype)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 729, in _dynamic_rnn_loop\n    swap_memory=swap_memory)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2766, in while_loop\n    result = context.BuildLoop(cond, body, loop_vars, shape_invariants)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2595, in BuildLoop\n    pred, body, original_loop_vars, loop_vars, shape_invariants)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2545, in _BuildLoop\n    body_result = body(*packed_vars_for_body)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 712, in _time_step\n    skip_conditionals=True)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 198, in _rnn_step\n    new_output, new_state = call_cell()\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 700, in <lambda>\n    call_cell = lambda: cell(input_t, state)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 685, in __call__\n    output, new_state = self._cell(inputs, state, scope)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 165, in __call__\n    return super(_RNNCell, self).__call__(inputs, state)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 439, in __call__\n    outputs = self.call(inputs, *args, **kwargs)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 376, in call\n    \"w_f_diag\", shape=[self._num_units], dtype=dtype)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 1065, in get_variable\n    use_resource=use_resource, custom_getter=custom_getter)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 962, in get_variable\n    use_resource=use_resource, custom_getter=custom_getter)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 360, in get_variable\n    validate_shape=validate_shape, use_resource=use_resource)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 168, in _rnn_get_variable\n    variable = getter(*args, **kwargs)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 352, in _true_getter\n    use_resource=use_resource)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 725, in _get_single_variable\n    validate_shape=validate_shape)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 200, in __init__\n    expected_shape=expected_shape)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 278, in _init_from_args\n    initial_value(), name=\"initial_value\", dtype=dtype)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 701, in <lambda>\n    shape.as_list(), dtype=dtype, partition_info=partition_info)\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/init_ops.py\", line 481, in __call__\n    raise ValueError(\"The tensor to initialize must be \"\nValueError: The tensor to initialize must be at least two-dimensional\n\n\nThis is unexpected behavior. If you omit either of initializer=tf.orthogonal_initializer or use_peephole=True, the graph can be built and evaluated as expected. I'm not aware of a mathematical reason the weights in this model cannot be orthogonal.", "body": "- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes, below.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: OSX Sierra\r\n- **TensorFlow installed from (source or binary)**: binary - pip\r\n- **TensorFlow version (use command below)**: 1.2rc0\r\n- **Bazel version (if compiling from source)**: NA\r\n- **CUDA/cuDNN version**: NA\r\n- **GPU model and memory**: NA\r\n- **Exact command to reproduce**:\r\n```\r\n\r\nclass ToyModel(object):\r\n\tdef __init__(self):\r\n\t\tx = tf.get_variable(\"x\", shape=[5, 3, 7],\r\n\t\t\t\t\t\t\tinitializer=tf.random_normal_initializer(),\r\n\t\t\t\t\t\t\ttrainable=False)\r\n\t\tcell = tf.contrib.rnn.LSTMCell(7, use_peepholes=True, initializer=tf.orthogonal_initializer)\r\n\t\tself.rnn_out, self.final_state = tf.nn.dynamic_rnn(cell=cell,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   inputs=x,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   parallel_iterations=8,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   time_major=True,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   dtype=tf.float32)\r\n\r\n\r\ngraph_context = tf.Graph()\r\nwith graph_context.as_default():\r\n\tm1 = ToyModel()\r\n\r\n\ttf_init = tf.global_variables_initializer()\r\n\tsave_dir = \"/Users/delkind/Desktop/whd/tf_checkpoints/unit_test\"\r\n\r\n\tsv = tf.train.Supervisor(logdir=save_dir)\r\n\twith sv.managed_session() as sess:\r\n\t\ty1 = m1.rnn_out.eval(session=sess)\r\n\r\n\t\tprint(y1)\r\n```\r\n### Describe the problem\r\nI believe this is a bug. When using this code, the following error is raised.\r\n```\r\n\r\nTraceback (most recent call last):\r\n  File \"src/tensorflow_unit_tests.py\", line 84, in <module>\r\n    m1 = ToyModel()\r\n  File \"src/tensorflow_unit_tests.py\", line 79, in __init__\r\n    dtype=tf.float32)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 566, in dynamic_rnn\r\n    dtype=dtype)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 729, in _dynamic_rnn_loop\r\n    swap_memory=swap_memory)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2766, in while_loop\r\n    result = context.BuildLoop(cond, body, loop_vars, shape_invariants)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2595, in BuildLoop\r\n    pred, body, original_loop_vars, loop_vars, shape_invariants)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2545, in _BuildLoop\r\n    body_result = body(*packed_vars_for_body)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 712, in _time_step\r\n    skip_conditionals=True)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 198, in _rnn_step\r\n    new_output, new_state = call_cell()\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 700, in <lambda>\r\n    call_cell = lambda: cell(input_t, state)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 685, in __call__\r\n    output, new_state = self._cell(inputs, state, scope)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 165, in __call__\r\n    return super(_RNNCell, self).__call__(inputs, state)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 439, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/core_rnn_cell_impl.py\", line 376, in call\r\n    \"w_f_diag\", shape=[self._num_units], dtype=dtype)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 1065, in get_variable\r\n    use_resource=use_resource, custom_getter=custom_getter)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 962, in get_variable\r\n    use_resource=use_resource, custom_getter=custom_getter)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 360, in get_variable\r\n    validate_shape=validate_shape, use_resource=use_resource)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 168, in _rnn_get_variable\r\n    variable = getter(*args, **kwargs)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 352, in _true_getter\r\n    use_resource=use_resource)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 725, in _get_single_variable\r\n    validate_shape=validate_shape)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 200, in __init__\r\n    expected_shape=expected_shape)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 278, in _init_from_args\r\n    initial_value(), name=\"initial_value\", dtype=dtype)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 701, in <lambda>\r\n    shape.as_list(), dtype=dtype, partition_info=partition_info)\r\n  File \"/Users/delkind/Desktop/whd/venv_tf_1.2rc0/lib/python2.7/site-packages/tensorflow/python/ops/init_ops.py\", line 481, in __call__\r\n    raise ValueError(\"The tensor to initialize must be \"\r\nValueError: The tensor to initialize must be at least two-dimensional\r\n\r\n```\r\nThis is unexpected behavior. If you omit either of ```initializer=tf.orthogonal_initializer``` or ```use_peephole=True```, the graph can be built and evaluated as expected. I'm not aware of a mathematical reason the weights in this model cannot be orthogonal.\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/260748149", "html_url": "https://github.com/tensorflow/tensorflow/pull/5142#issuecomment-260748149", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5142", "id": 260748149, "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDc0ODE0OQ==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-15T19:52:58Z", "updated_at": "2016-11-15T19:52:58Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The only shape checks you need to remove are the lines:</p>\n<p>if not shape[2:].is_fully_defined():<br>\nraise ValueError(<br>\n\"Input size (depth of inputs) must be accessible via shape<br>\ninference,\"<br>\n\" but saw value None.\")</p>\n<p>and these lines (redundant and buggy?):</p>\n<p>for input_ in input_shape:<br>\nif input_[1].get_shape() != batch_size.get_shape():<br>\nraise ValueError(\"All inputs should have the same batch size\")</p>\n<p><em>everything else can stay</em></p>\n<p>On Tue, Nov 15, 2016 at 10:42 AM, Ankush Gupta <a href=\"mailto:notifications@github.com\">notifications@github.com</a><br>\nwrote:</p>\n<blockquote>\n<p>I removed the shape checks (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/a2ff968643512b50ea074edcd0561337dad427e2/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/a2ff968643512b50ea074edcd0561337dad427e2\"><tt>a2ff968</tt></a><br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/a2ff968643512b50ea074edcd0561337dad427e2/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/a2ff968643512b50ea074edcd0561337dad427e2\"><tt>a2ff968</tt></a>)<br>\nand added some unit tests (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/68c874a507498863b14e06af05fa512d97d38455/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/68c874a507498863b14e06af05fa512d97d38455\"><tt>68c874a</tt></a><br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/68c874a507498863b14e06af05fa512d97d38455/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/68c874a507498863b14e06af05fa512d97d38455\"><tt>68c874a</tt></a>)<br>\n-- both with known and unknown ranks of the inputs and outputs at the graph<br>\nconstruction time and it seems to work. However, again this required taking<br>\nout a lot of the shape-checking -- so not sure if we want to keep it as it<br>\nis, or bring the checks back in. The unit tests would error out if the<br>\nshape checks are included, hence the tests were not added to to the<br>\nrnn_test.py file.</p>\n<p>\u2014<br>\nYou are receiving this because you were mentioned.<br>\nReply to this email directly, view it on GitHub<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"184659509\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5142\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/5142/hovercard?comment_id=260728417&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/pull/5142#issuecomment-260728417\">#5142 (comment)</a>,<br>\nor mute the thread<br>\n<a href=\"https://github.com/notifications/unsubscribe-auth/ABtimzqlqR0frGBjKmxwZQJTxNBpHFLCks5q-f0CgaJpZM4Kd_s4\">https://github.com/notifications/unsubscribe-auth/ABtimzqlqR0frGBjKmxwZQJTxNBpHFLCks5q-f0CgaJpZM4Kd_s4</a><br>\n.</p>\n</blockquote>", "body_text": "The only shape checks you need to remove are the lines:\nif not shape[2:].is_fully_defined():\nraise ValueError(\n\"Input size (depth of inputs) must be accessible via shape\ninference,\"\n\" but saw value None.\")\nand these lines (redundant and buggy?):\nfor input_ in input_shape:\nif input_[1].get_shape() != batch_size.get_shape():\nraise ValueError(\"All inputs should have the same batch size\")\neverything else can stay\nOn Tue, Nov 15, 2016 at 10:42 AM, Ankush Gupta notifications@github.com\nwrote:\n\nI removed the shape checks (a2ff968\na2ff968)\nand added some unit tests (68c874a\n68c874a)\n-- both with known and unknown ranks of the inputs and outputs at the graph\nconstruction time and it seems to work. However, again this required taking\nout a lot of the shape-checking -- so not sure if we want to keep it as it\nis, or bring the checks back in. The unit tests would error out if the\nshape checks are included, hence the tests were not added to to the\nrnn_test.py file.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n#5142 (comment),\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABtimzqlqR0frGBjKmxwZQJTxNBpHFLCks5q-f0CgaJpZM4Kd_s4\n.", "body": "The only shape checks you need to remove are the lines:\n\n if not shape[2:].is_fully_defined():\n      raise ValueError(\n          \"Input size (depth of inputs) must be accessible via shape\ninference,\"\n          \" but saw value None.\")\n\nand these lines (redundant and buggy?):\n\nfor input_ in input_shape:\n      if input_[1].get_shape() != batch_size.get_shape():\n        raise ValueError(\"All inputs should have the same batch size\")\n\n_everything else can stay_\n\nOn Tue, Nov 15, 2016 at 10:42 AM, Ankush Gupta notifications@github.com\nwrote:\n\n> I removed the shape checks (a2ff968\n> https://github.com/tensorflow/tensorflow/commit/a2ff968643512b50ea074edcd0561337dad427e2)\n> and added some unit tests (68c874a\n> https://github.com/tensorflow/tensorflow/commit/68c874a507498863b14e06af05fa512d97d38455)\n> -- both with known and unknown ranks of the inputs and outputs at the graph\n> construction time and it seems to work. However, again this required taking\n> out a lot of the shape-checking -- so not sure if we want to keep it as it\n> is, or bring the checks back in. The unit tests would error out if the\n> shape checks are included, hence the tests were not added to to the\n> rnn_test.py file.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/pull/5142#issuecomment-260728417,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/ABtimzqlqR0frGBjKmxwZQJTxNBpHFLCks5q-f0CgaJpZM4Kd_s4\n> .\n"}
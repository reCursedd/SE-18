{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/223483649", "html_url": "https://github.com/tensorflow/tensorflow/issues/2584#issuecomment-223483649", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2584", "id": 223483649, "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzQ4MzY0OQ==", "user": {"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-03T03:41:01Z", "updated_at": "2016-06-03T03:41:01Z", "author_association": "CONTRIBUTOR", "body_html": "<p>You may be timing initialization cost, not just the actual operations.  When you call <code>sess.run</code> the first time it does some setup work.  What do you get for</p>\n<pre><code>def test_tf_image(path):\n  with tf.device('/cpu:0'): \n    img = tf.read_file(path)\n    image = tf.image.decode_jpeg(img, channels=3)\n\n  with tf.Session() as sess:\n    start = time.time()\n    for i in xrange(1000):\n      out = sess.run(image)\n    print time.time() - start\n</code></pre>", "body_text": "You may be timing initialization cost, not just the actual operations.  When you call sess.run the first time it does some setup work.  What do you get for\ndef test_tf_image(path):\n  with tf.device('/cpu:0'): \n    img = tf.read_file(path)\n    image = tf.image.decode_jpeg(img, channels=3)\n\n  with tf.Session() as sess:\n    start = time.time()\n    for i in xrange(1000):\n      out = sess.run(image)\n    print time.time() - start", "body": "You may be timing initialization cost, not just the actual operations.  When you call `sess.run` the first time it does some setup work.  What do you get for\n\n```\ndef test_tf_image(path):\n  with tf.device('/cpu:0'): \n    img = tf.read_file(path)\n    image = tf.image.decode_jpeg(img, channels=3)\n\n  with tf.Session() as sess:\n    start = time.time()\n    for i in xrange(1000):\n      out = sess.run(image)\n    print time.time() - start\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12863", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12863/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12863/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12863/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12863", "id": 255789800, "node_id": "MDU6SXNzdWUyNTU3ODk4MDA=", "number": 12863, "title": "[BUG] unexpect results when run init with assign", "user": {"login": "llvim", "id": 7426917, "node_id": "MDQ6VXNlcjc0MjY5MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7426917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llvim", "html_url": "https://github.com/llvim", "followers_url": "https://api.github.com/users/llvim/followers", "following_url": "https://api.github.com/users/llvim/following{/other_user}", "gists_url": "https://api.github.com/users/llvim/gists{/gist_id}", "starred_url": "https://api.github.com/users/llvim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llvim/subscriptions", "organizations_url": "https://api.github.com/users/llvim/orgs", "repos_url": "https://api.github.com/users/llvim/repos", "events_url": "https://api.github.com/users/llvim/events{/privacy}", "received_events_url": "https://api.github.com/users/llvim/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-07T01:43:13Z", "updated_at": "2017-09-08T23:42:31Z", "closed_at": "2017-09-08T23:42:31Z", "author_association": "NONE", "body_html": "<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\nsess <span class=\"pl-k\">=</span> tf.InteractiveSession()\na <span class=\"pl-k\">=</span>tf.Variable([<span class=\"pl-c1\">1</span>])\nb <span class=\"pl-k\">=</span> tf.assign_add(a,[<span class=\"pl-c1\">1</span>])\ninit <span class=\"pl-k\">=</span> tf.global_variables_initializer()\ninit_a<span class=\"pl-k\">=</span>tf.variables_initializer([a])\nsess.run([init])\n<span class=\"pl-k\">for</span> i <span class=\"pl-k\">in</span> <span class=\"pl-c1\">range</span>(<span class=\"pl-c1\">10</span>):\n    <span class=\"pl-c1\">print</span>(sess.run([a,b,init_a]))\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> GET</span>\n[array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n[array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n[array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n[array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n[array([<span class=\"pl-c1\">2</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">2</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n[array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n[array([<span class=\"pl-c1\">2</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">2</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n[array([<span class=\"pl-c1\">2</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">2</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n[array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n[array([<span class=\"pl-c1\">2</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), array([<span class=\"pl-c1\">2</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>int32), <span class=\"pl-c1\">None</span>]\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> this make the metrics and stream metrics hard to use </span></pre></div>", "body_text": "import tensorflow as tf\nsess = tf.InteractiveSession()\na =tf.Variable([1])\nb = tf.assign_add(a,[1])\ninit = tf.global_variables_initializer()\ninit_a=tf.variables_initializer([a])\nsess.run([init])\nfor i in range(10):\n    print(sess.run([a,b,init_a]))\n\n# GET\n[array([1], dtype=int32), array([1], dtype=int32), None]\n[array([1], dtype=int32), array([1], dtype=int32), None]\n[array([1], dtype=int32), array([1], dtype=int32), None]\n[array([1], dtype=int32), array([1], dtype=int32), None]\n[array([2], dtype=int32), array([2], dtype=int32), None]\n[array([1], dtype=int32), array([1], dtype=int32), None]\n[array([2], dtype=int32), array([2], dtype=int32), None]\n[array([2], dtype=int32), array([2], dtype=int32), None]\n[array([1], dtype=int32), array([1], dtype=int32), None]\n[array([2], dtype=int32), array([2], dtype=int32), None]\n\n# this make the metrics and stream metrics hard to use", "body": "```python\r\nimport tensorflow as tf\r\nsess = tf.InteractiveSession()\r\na =tf.Variable([1])\r\nb = tf.assign_add(a,[1])\r\ninit = tf.global_variables_initializer()\r\ninit_a=tf.variables_initializer([a])\r\nsess.run([init])\r\nfor i in range(10):\r\n    print(sess.run([a,b,init_a]))\r\n\r\n# GET\r\n[array([1], dtype=int32), array([1], dtype=int32), None]\r\n[array([1], dtype=int32), array([1], dtype=int32), None]\r\n[array([1], dtype=int32), array([1], dtype=int32), None]\r\n[array([1], dtype=int32), array([1], dtype=int32), None]\r\n[array([2], dtype=int32), array([2], dtype=int32), None]\r\n[array([1], dtype=int32), array([1], dtype=int32), None]\r\n[array([2], dtype=int32), array([2], dtype=int32), None]\r\n[array([2], dtype=int32), array([2], dtype=int32), None]\r\n[array([1], dtype=int32), array([1], dtype=int32), None]\r\n[array([2], dtype=int32), array([2], dtype=int32), None]\r\n\r\n# this make the metrics and stream metrics hard to use \r\n```\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3722", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3722/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3722/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3722/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3722", "id": 170341602, "node_id": "MDU6SXNzdWUxNzAzNDE2MDI=", "number": 3722, "title": "Tensorflow build fails due to farmhash build failure on ppc64le", "user": {"login": "npanpaliya", "id": 14196089, "node_id": "MDQ6VXNlcjE0MTk2MDg5", "avatar_url": "https://avatars3.githubusercontent.com/u/14196089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/npanpaliya", "html_url": "https://github.com/npanpaliya", "followers_url": "https://api.github.com/users/npanpaliya/followers", "following_url": "https://api.github.com/users/npanpaliya/following{/other_user}", "gists_url": "https://api.github.com/users/npanpaliya/gists{/gist_id}", "starred_url": "https://api.github.com/users/npanpaliya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/npanpaliya/subscriptions", "organizations_url": "https://api.github.com/users/npanpaliya/orgs", "repos_url": "https://api.github.com/users/npanpaliya/repos", "events_url": "https://api.github.com/users/npanpaliya/events{/privacy}", "received_events_url": "https://api.github.com/users/npanpaliya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-08-10T06:52:01Z", "updated_at": "2016-09-28T07:25:52Z", "closed_at": "2016-09-28T07:25:52Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Tensorflow's external dependency named farmhash fails to build on Ubuntu 14.04 linux ppc64le. If I manually edit the config.guess of farmhash to add a case for ppc64le, then it works. So, I wanted to know how can I contribute this fix back to repo as farmhash is not git cloned by tensorflow, rather a zip archive is downloaded from <a href=\"https://github.com/google/farmhash/archive/34c13ddfab0e35422f4c3979f360635a8c050260.zip.\">farmhash download url</a><br>\nEven if I generate the a pull request for google/farmhash, how tensorflow will fetch that?</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04 linux ppc64le</p>\n<p>Installed version of CUDA and cuDNN: 7.5<br>\n$ ls -l /usr/local/cuda-7.5/lib64/libcud*<br>\n-rw-r--r-- 1 root root   326744 Nov  9  2015 /usr/local/cuda-7.5/lib64/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root       16 Nov  5  2015 /usr/local/cuda-7.5/lib64/libcudart.so -&gt; libcudart.so.7.5<br>\nlrwxrwxrwx 1 root root       19 Nov  5  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5 -&gt; libcudart.so.7.5.23<br>\n-rwxr-xr-x 1 root root   445192 Nov  5  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5.23<br>\n-rw-r--r-- 1 root root   902750 Nov  9  2015 /usr/local/cuda-7.5/lib64/libcudart_static.a<br>\nlrwxrwxrwx 1 root root       13 Apr 24 20:17 /usr/local/cuda-7.5/lib64/libcudnn.so -&gt; libcudnn.so.5<br>\n-rwxr-xr-x 1 root root 60068392 Apr 22 19:18 /usr/local/cuda-7.5/lib64/libcudnn.so.5.0.5<br>\n-rw-r--r-- 1 root root 59436124 Apr 22 19:30 /usr/local/cuda-7.5/lib64/libcudnn_static.a</p>\n<p><strong>1. The commit hash (<code>git rev-parse HEAD</code>)</strong> - v0.9.0 (problem also seen in the latest master branch)<br>\n<strong>2. The output of <code>bazel version</code></strong><br>\nBuild label: head (@f7d9417)<br>\nBuild target: bazel-out/local_linux-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Tue Aug 9 13:56:57 2016 (1470751017)<br>\nBuild timestamp: 1470751017<br>\nBuild timestamp as int: 1470751017</p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>git clone <a href=\"https://github.com/tensorflow/tensorflow\">https://github.com/tensorflow/tensorflow</a></li>\n<li>cd  tensorflow &amp;&amp; git checkout v0.9.0</li>\n<li>./configure &amp;&amp; bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package</li>\n</ol>\n<h3>What have you tried?</h3>\n<ol>\n<li>Manually modifying config.guess of farmhash to add a case of ppc64le fixes the problem.</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>ERROR: /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/external/farmhash_archive/BUILD:5:1: Executing genrule @farmhash_archive//:configure failed: bash failed: error executing command /bin/bash -c ... (remaining 1 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.<br>\n/home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream/external/farmhash_archive/farmhash-34c13ddfab0e35422f4c3979f360635a8c050260 /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream<br>\n/tmp/tmp.um0vY1ktLs /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream/external/farmhash_archive/farmhash-34c13ddfab0e35422f4c3979f360635a8c050260 /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream<br>\nchecking for a BSD-compatible install... /usr/bin/install -c<br>\nchecking whether build environment is sane... yes<br>\nchecking for a thread-safe mkdir -p... /bin/mkdir -p<br>\nchecking for gawk... no<br>\nchecking for mawk... mawk<br>\nchecking whether make sets $(MAKE)... yes<br>\nchecking whether make supports nested variables... yes<br>\nchecking build system type... /tmp/tmp.um0vY1ktLs/missing: Unknown <code>--is-lightweight' option Try</code>/tmp/tmp.um0vY1ktLs/missing --help' for more information<br>\nconfigure: WARNING: 'missing' script is too old or missing<br>\n./config.guess: unable to guess system type</p>\n<p>This script, last modified 2010-08-21, has failed to recognize<br>\nthe operating system you are using. It is advised that you<br>\ndownload the most up to date version of the config scripts from</p>\n<p><a href=\"http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD\" rel=\"nofollow\">http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD</a><br>\nand<br>\n<a href=\"http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD\" rel=\"nofollow\">http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD</a></p>\n<p>If the version you run (./config.guess) is already up to date, please<br>\nsend the following data and any information you think might be<br>\npertinent to <a href=\"mailto:config-patches@gnu.org\">config-patches@gnu.org</a> in order to provide the needed<br>\ninformation to handle your system.</p>\n<p>config.guess timestamp = 2010-08-21</p>\n<p>uname -m = ppc64le<br>\nuname -r = 3.19.0-58-generic<br>\nuname -s = Linux<br>\nuname -v = <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116008085\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/64\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/64/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/64\">#64</a>~14.04.1-Ubuntu SMP Fri Mar 18 19:05:01 UTC 2016</p>\n<p>/usr/bin/uname -p =<br>\n/bin/uname -X     =</p>\n<p>hostinfo               =<br>\n/bin/universe          =<br>\n/usr/bin/arch -k       =<br>\n/bin/arch              =<br>\n/usr/bin/oslevel       =<br>\n/usr/convex/getsysinfo =</p>\n<p>UNAME_MACHINE = ppc64le<br>\nUNAME_RELEASE = 3.19.0-58-generic<br>\nUNAME_SYSTEM  = Linux<br>\nUNAME_VERSION = <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"116008085\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/64\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/64/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/64\">#64</a>~14.04.1-Ubuntu SMP Fri Mar 18 19:05:01 UTC 2016<br>\nconfigure: error: cannot guess build type; you must specify one</p>", "body_text": "Tensorflow's external dependency named farmhash fails to build on Ubuntu 14.04 linux ppc64le. If I manually edit the config.guess of farmhash to add a case for ppc64le, then it works. So, I wanted to know how can I contribute this fix back to repo as farmhash is not git cloned by tensorflow, rather a zip archive is downloaded from farmhash download url\nEven if I generate the a pull request for google/farmhash, how tensorflow will fetch that?\nEnvironment info\nOperating System: Ubuntu 14.04 linux ppc64le\nInstalled version of CUDA and cuDNN: 7.5\n$ ls -l /usr/local/cuda-7.5/lib64/libcud*\n-rw-r--r-- 1 root root   326744 Nov  9  2015 /usr/local/cuda-7.5/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Nov  5  2015 /usr/local/cuda-7.5/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19 Nov  5  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5 -> libcudart.so.7.5.23\n-rwxr-xr-x 1 root root   445192 Nov  5  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5.23\n-rw-r--r-- 1 root root   902750 Nov  9  2015 /usr/local/cuda-7.5/lib64/libcudart_static.a\nlrwxrwxrwx 1 root root       13 Apr 24 20:17 /usr/local/cuda-7.5/lib64/libcudnn.so -> libcudnn.so.5\n-rwxr-xr-x 1 root root 60068392 Apr 22 19:18 /usr/local/cuda-7.5/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 59436124 Apr 22 19:30 /usr/local/cuda-7.5/lib64/libcudnn_static.a\n1. The commit hash (git rev-parse HEAD) - v0.9.0 (problem also seen in the latest master branch)\n2. The output of bazel version\nBuild label: head (@f7d9417)\nBuild target: bazel-out/local_linux-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Tue Aug 9 13:56:57 2016 (1470751017)\nBuild timestamp: 1470751017\nBuild timestamp as int: 1470751017\nSteps to reproduce\n\ngit clone https://github.com/tensorflow/tensorflow\ncd  tensorflow && git checkout v0.9.0\n./configure && bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n\nWhat have you tried?\n\nManually modifying config.guess of farmhash to add a case of ppc64le fixes the problem.\n\nLogs or other output that would be helpful\nERROR: /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/external/farmhash_archive/BUILD:5:1: Executing genrule @farmhash_archive//:configure failed: bash failed: error executing command /bin/bash -c ... (remaining 1 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n/home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream/external/farmhash_archive/farmhash-34c13ddfab0e35422f4c3979f360635a8c050260 /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream\n/tmp/tmp.um0vY1ktLs /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream/external/farmhash_archive/farmhash-34c13ddfab0e35422f4c3979f360635a8c050260 /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... no\nchecking for mawk... mawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... yes\nchecking build system type... /tmp/tmp.um0vY1ktLs/missing: Unknown --is-lightweight' option Try/tmp/tmp.um0vY1ktLs/missing --help' for more information\nconfigure: WARNING: 'missing' script is too old or missing\n./config.guess: unable to guess system type\nThis script, last modified 2010-08-21, has failed to recognize\nthe operating system you are using. It is advised that you\ndownload the most up to date version of the config scripts from\nhttp://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD\nand\nhttp://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD\nIf the version you run (./config.guess) is already up to date, please\nsend the following data and any information you think might be\npertinent to config-patches@gnu.org in order to provide the needed\ninformation to handle your system.\nconfig.guess timestamp = 2010-08-21\nuname -m = ppc64le\nuname -r = 3.19.0-58-generic\nuname -s = Linux\nuname -v = #64~14.04.1-Ubuntu SMP Fri Mar 18 19:05:01 UTC 2016\n/usr/bin/uname -p =\n/bin/uname -X     =\nhostinfo               =\n/bin/universe          =\n/usr/bin/arch -k       =\n/bin/arch              =\n/usr/bin/oslevel       =\n/usr/convex/getsysinfo =\nUNAME_MACHINE = ppc64le\nUNAME_RELEASE = 3.19.0-58-generic\nUNAME_SYSTEM  = Linux\nUNAME_VERSION = #64~14.04.1-Ubuntu SMP Fri Mar 18 19:05:01 UTC 2016\nconfigure: error: cannot guess build type; you must specify one", "body": "Tensorflow's external dependency named farmhash fails to build on Ubuntu 14.04 linux ppc64le. If I manually edit the config.guess of farmhash to add a case for ppc64le, then it works. So, I wanted to know how can I contribute this fix back to repo as farmhash is not git cloned by tensorflow, rather a zip archive is downloaded from [farmhash download url](https://github.com/google/farmhash/archive/34c13ddfab0e35422f4c3979f360635a8c050260.zip.)\nEven if I generate the a pull request for google/farmhash, how tensorflow will fetch that?\n### Environment info\n\nOperating System: Ubuntu 14.04 linux ppc64le\n\nInstalled version of CUDA and cuDNN: 7.5\n$ ls -l /usr/local/cuda-7.5/lib64/libcud*\n-rw-r--r-- 1 root root   326744 Nov  9  2015 /usr/local/cuda-7.5/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Nov  5  2015 /usr/local/cuda-7.5/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19 Nov  5  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5 -> libcudart.so.7.5.23\n-rwxr-xr-x 1 root root   445192 Nov  5  2015 /usr/local/cuda-7.5/lib64/libcudart.so.7.5.23\n-rw-r--r-- 1 root root   902750 Nov  9  2015 /usr/local/cuda-7.5/lib64/libcudart_static.a\nlrwxrwxrwx 1 root root       13 Apr 24 20:17 /usr/local/cuda-7.5/lib64/libcudnn.so -> libcudnn.so.5\n-rwxr-xr-x 1 root root 60068392 Apr 22 19:18 /usr/local/cuda-7.5/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 59436124 Apr 22 19:30 /usr/local/cuda-7.5/lib64/libcudnn_static.a\n\n**1. The commit hash (`git rev-parse HEAD`)** - v0.9.0 (problem also seen in the latest master branch)\n**2. The output of `bazel version`** \nBuild label: head (@f7d9417)\nBuild target: bazel-out/local_linux-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Tue Aug 9 13:56:57 2016 (1470751017)\nBuild timestamp: 1470751017\nBuild timestamp as int: 1470751017\n### Steps to reproduce\n1. git clone https://github.com/tensorflow/tensorflow\n2. cd  tensorflow && git checkout v0.9.0\n3. ./configure && bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n### What have you tried?\n1. Manually modifying config.guess of farmhash to add a case of ppc64le fixes the problem.\n### Logs or other output that would be helpful\n\nERROR: /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/external/farmhash_archive/BUILD:5:1: Executing genrule @farmhash_archive//:configure failed: bash failed: error executing command /bin/bash -c ... (remaining 1 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n/home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream/external/farmhash_archive/farmhash-34c13ddfab0e35422f4c3979f360635a8c050260 /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream\n/tmp/tmp.um0vY1ktLs /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream/external/farmhash_archive/farmhash-34c13ddfab0e35422f4c3979f360635a8c050260 /home/user/.cache/bazel/_bazel_user/9138b14b59b57ff6760f108ab5f6a562/tensorflow_upstream\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... no\nchecking for mawk... mawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... yes\nchecking build system type... /tmp/tmp.um0vY1ktLs/missing: Unknown `--is-lightweight' option\nTry`/tmp/tmp.um0vY1ktLs/missing --help' for more information\nconfigure: WARNING: 'missing' script is too old or missing\n./config.guess: unable to guess system type\n\nThis script, last modified 2010-08-21, has failed to recognize\nthe operating system you are using. It is advised that you\ndownload the most up to date version of the config scripts from\n\n  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD\nand\n  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD\n\nIf the version you run (./config.guess) is already up to date, please\nsend the following data and any information you think might be\npertinent to config-patches@gnu.org in order to provide the needed\ninformation to handle your system.\n\nconfig.guess timestamp = 2010-08-21\n\nuname -m = ppc64le\nuname -r = 3.19.0-58-generic\nuname -s = Linux\nuname -v = #64~14.04.1-Ubuntu SMP Fri Mar 18 19:05:01 UTC 2016\n\n/usr/bin/uname -p =\n/bin/uname -X     =\n\nhostinfo               =\n/bin/universe          =\n/usr/bin/arch -k       =\n/bin/arch              =\n/usr/bin/oslevel       =\n/usr/convex/getsysinfo =\n\nUNAME_MACHINE = ppc64le\nUNAME_RELEASE = 3.19.0-58-generic\nUNAME_SYSTEM  = Linux\nUNAME_VERSION = #64~14.04.1-Ubuntu SMP Fri Mar 18 19:05:01 UTC 2016\nconfigure: error: cannot guess build type; you must specify one\n"}
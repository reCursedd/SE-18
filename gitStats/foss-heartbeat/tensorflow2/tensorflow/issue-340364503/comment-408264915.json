{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/408264915", "html_url": "https://github.com/tensorflow/tensorflow/pull/20708#issuecomment-408264915", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20708", "id": 408264915, "node_id": "MDEyOklzc3VlQ29tbWVudDQwODI2NDkxNQ==", "user": {"login": "timshen91", "id": 1157432, "node_id": "MDQ6VXNlcjExNTc0MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1157432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timshen91", "html_url": "https://github.com/timshen91", "followers_url": "https://api.github.com/users/timshen91/followers", "following_url": "https://api.github.com/users/timshen91/following{/other_user}", "gists_url": "https://api.github.com/users/timshen91/gists{/gist_id}", "starred_url": "https://api.github.com/users/timshen91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timshen91/subscriptions", "organizations_url": "https://api.github.com/users/timshen91/orgs", "repos_url": "https://api.github.com/users/timshen91/repos", "events_url": "https://api.github.com/users/timshen91/events{/privacy}", "received_events_url": "https://api.github.com/users/timshen91/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-26T23:23:38Z", "updated_at": "2018-07-26T23:23:38Z", "author_association": "MEMBER", "body_html": "<p>I see, yes <code>scratch_allocator.TotalByteSize()</code> records the memory size allocated by cuDNN. I think that's the way to go. For a while I mistakenly thought <code>TotalByteSize()</code> as <code>GetMemoryLimitInBytes()</code>.</p>\n<p>Can you also add a TODO that the ProfileResult scratch memory usage should be populated by DNN library itself, not user code like <code>conv_ops.cc</code>, <code>conv_grad_*.cc</code>?</p>", "body_text": "I see, yes scratch_allocator.TotalByteSize() records the memory size allocated by cuDNN. I think that's the way to go. For a while I mistakenly thought TotalByteSize() as GetMemoryLimitInBytes().\nCan you also add a TODO that the ProfileResult scratch memory usage should be populated by DNN library itself, not user code like conv_ops.cc, conv_grad_*.cc?", "body": "I see, yes `scratch_allocator.TotalByteSize()` records the memory size allocated by cuDNN. I think that's the way to go. For a while I mistakenly thought `TotalByteSize()` as `GetMemoryLimitInBytes()`.\r\n\r\nCan you also add a TODO that the ProfileResult scratch memory usage should be populated by DNN library itself, not user code like `conv_ops.cc`, `conv_grad_*.cc`?"}
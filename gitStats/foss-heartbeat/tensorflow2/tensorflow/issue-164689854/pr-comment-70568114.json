{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/70568114", "pull_request_review_id": null, "id": 70568114, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNTY4MTE0", "diff_hunk": "@@ -334,15 +342,18 @@ port::Status CudnnSupport::Init() {\n     // Check whether loaded version of CuDNN matches what the source\n     // was built with.\n     size_t loaded_version = dynload::cudnnGetVersion();\n-    bool library_loaded_matches_source = (loaded_version == CUDNN_VERSION);\n+    size_t loaded_major_version = cudnnMajorVersion(loaded_version);\n+    bool library_loaded_matches_source =\n+        (loaded_major_version == cudnnMajorVersion(CUDNN_VERSION));", "path": "tensorflow/stream_executor/cuda/cuda_dnn.cc", "position": null, "original_position": 22, "commit_id": "dae01c8b97c837583bf8b3261931ca6b685a827f", "original_commit_id": "1416889464a7e2ea1ddfb773c07fc5f9f0c7cac8", "user": {"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}, "body": "I would do \"version / 100 \\* 100\" and call it \"compatibility version\". That\nway, it is still similar to the original version in terms of scale.\n\nOn Tue, Jul 12, 2016 at 10:43 PM, Vijay Vasudevan notifications@github.com\nwrote:\n\n> In tensorflow/stream_executor/cuda/cuda_dnn.cc\n> https://github.com/tensorflow/tensorflow/pull/3249#discussion_r70566758:\n> \n> > @@ -334,15 +342,18 @@ port::Status CudnnSupport::Init() {\n> >      // Check whether loaded version of CuDNN matches what the source\n> >      // was built with.\n> >      size_t loaded_version = dynload::cudnnGetVersion();\n> > -    bool library_loaded_matches_source = (loaded_version == CUDNN_VERSION);\n> > -    size_t loaded_major_version = cudnnMajorVersion(loaded_version);\n> > -    bool library_loaded_matches_source =\n> > -        (loaded_major_version == cudnnMajorVersion(CUDNN_VERSION));\n> \n> So if I divide by CUDNN_VERSION by 100 instead of 1000 and rename to\n> cudnnCompatibilityVersion, would that be sufficient?\n> \n> \u2014\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/pull/3249/files/1416889464a7e2ea1ddfb773c07fc5f9f0c7cac8#r70566758,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/APAgTri4SHyzrittdhbrMi0dVH4VixCUks5qVHr6gaJpZM4JIuJc\n> .\n", "created_at": "2016-07-13T06:01:33Z", "updated_at": "2016-07-13T06:35:17Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/3249#discussion_r70568114", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/3249", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/70568114"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/3249#discussion_r70568114"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/3249"}}, "body_html": "<p>I would do \"version / 100 * 100\" and call it \"compatibility version\". That<br>\nway, it is still similar to the original version in terms of scale.</p>\n<p>On Tue, Jul 12, 2016 at 10:43 PM, Vijay Vasudevan <a href=\"mailto:notifications@github.com\">notifications@github.com</a><br>\nwrote:</p>\n<blockquote>\n<p>In tensorflow/stream_executor/cuda/cuda_dnn.cc<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"164689854\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3249\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/3249/hovercard?comment_id=70566758&amp;comment_type=review_comment\" href=\"https://github.com/tensorflow/tensorflow/pull/3249#discussion_r70566758\">#3249 (comment)</a>:</p>\n<blockquote>\n<p>@@ -334,15 +342,18 @@ port::Status CudnnSupport::Init() {<br>\n// Check whether loaded version of CuDNN matches what the source<br>\n// was built with.<br>\nsize_t loaded_version = dynload::cudnnGetVersion();</p>\n<ul>\n<li>bool library_loaded_matches_source = (loaded_version == CUDNN_VERSION);</li>\n<li>size_t loaded_major_version = cudnnMajorVersion(loaded_version);</li>\n<li>bool library_loaded_matches_source =</li>\n<li>\n<pre><code>   (loaded_major_version == cudnnMajorVersion(CUDNN_VERSION));\n</code></pre>\n</li>\n</ul>\n</blockquote>\n<p>So if I divide by CUDNN_VERSION by 100 instead of 1000 and rename to<br>\ncudnnCompatibilityVersion, would that be sufficient?</p>\n<p>\u2014<br>\nYou are receiving this because you were assigned.<br>\nReply to this email directly, view it on GitHub<br>\n<a href=\"https://github.com/tensorflow/tensorflow/pull/3249/files/1416889464a7e2ea1ddfb773c07fc5f9f0c7cac8#r70566758\">https://github.com/tensorflow/tensorflow/pull/3249/files/1416889464a7e2ea1ddfb773c07fc5f9f0c7cac8#r70566758</a>,<br>\nor mute the thread<br>\n<a href=\"https://github.com/notifications/unsubscribe/APAgTri4SHyzrittdhbrMi0dVH4VixCUks5qVHr6gaJpZM4JIuJc\">https://github.com/notifications/unsubscribe/APAgTri4SHyzrittdhbrMi0dVH4VixCUks5qVHr6gaJpZM4JIuJc</a><br>\n.</p>\n</blockquote>", "body_text": "I would do \"version / 100 * 100\" and call it \"compatibility version\". That\nway, it is still similar to the original version in terms of scale.\nOn Tue, Jul 12, 2016 at 10:43 PM, Vijay Vasudevan notifications@github.com\nwrote:\n\nIn tensorflow/stream_executor/cuda/cuda_dnn.cc\n#3249 (comment):\n\n@@ -334,15 +342,18 @@ port::Status CudnnSupport::Init() {\n// Check whether loaded version of CuDNN matches what the source\n// was built with.\nsize_t loaded_version = dynload::cudnnGetVersion();\n\nbool library_loaded_matches_source = (loaded_version == CUDNN_VERSION);\nsize_t loaded_major_version = cudnnMajorVersion(loaded_version);\nbool library_loaded_matches_source =\n\n   (loaded_major_version == cudnnMajorVersion(CUDNN_VERSION));\n\n\n\n\nSo if I divide by CUDNN_VERSION by 100 instead of 1000 and rename to\ncudnnCompatibilityVersion, would that be sufficient?\n\u2014\nYou are receiving this because you were assigned.\nReply to this email directly, view it on GitHub\nhttps://github.com/tensorflow/tensorflow/pull/3249/files/1416889464a7e2ea1ddfb773c07fc5f9f0c7cac8#r70566758,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/APAgTri4SHyzrittdhbrMi0dVH4VixCUks5qVHr6gaJpZM4JIuJc\n."}
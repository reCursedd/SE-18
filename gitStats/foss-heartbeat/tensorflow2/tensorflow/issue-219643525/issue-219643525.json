{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8983", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8983/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8983/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8983/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8983", "id": 219643525, "node_id": "MDU6SXNzdWUyMTk2NDM1MjU=", "number": 8983, "title": "Tensorboard not showing embeddings", "user": {"login": "kevinlu1211", "id": 12663823, "node_id": "MDQ6VXNlcjEyNjYzODIz", "avatar_url": "https://avatars0.githubusercontent.com/u/12663823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevinlu1211", "html_url": "https://github.com/kevinlu1211", "followers_url": "https://api.github.com/users/kevinlu1211/followers", "following_url": "https://api.github.com/users/kevinlu1211/following{/other_user}", "gists_url": "https://api.github.com/users/kevinlu1211/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevinlu1211/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevinlu1211/subscriptions", "organizations_url": "https://api.github.com/users/kevinlu1211/orgs", "repos_url": "https://api.github.com/users/kevinlu1211/repos", "events_url": "https://api.github.com/users/kevinlu1211/events{/privacy}", "received_events_url": "https://api.github.com/users/kevinlu1211/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-05T16:35:00Z", "updated_at": "2017-04-07T23:22:28Z", "closed_at": "2017-04-07T23:22:28Z", "author_association": "NONE", "body_html": "<p>I am trying to create embeddings visualization from a pretrained network called FaceNet although nothing shows up when I open it in Tensorboard. Here is my source code</p>\n<pre><code>import tensorflow as tf\nimport os\nfrom tensorflow.contrib.tensorboard.plugins import projector\n\nMODEL_DIR = \"20170216-091149\"\nmeta_file, ckpt_file = facenet.get_model_filenames(MODEL_DIR)\nwith tf.Graph().as_default():\n    with tf.Session().as_default() as sess: \n        # Importing the graph\n        model_dir_exp = os.path.expanduser(MODEL_DIR)\n        print(model_dir_exp)\n        saver = tf.train.import_meta_graph(os.path.join(model_dir_exp, meta_file))\n        \n        # Restoring and retrieving needed layers\n        saver.restore(tf.get_default_session(), os.path.join(model_dir_exp, ckpt_file))\n        images_placeholder = tf.get_default_graph().get_tensor_by_name(\"input:0\")\n        embeddings = tf.get_default_graph().get_tensor_by_name(\"embeddings:0\")\n        phase_train_placeholder = tf.get_default_graph().get_tensor_by_name(\"phase_train:0\") \n        \n        # Create variables needed for Tensorboard\n        embedding = tf.Variable(tf.zeros([33, 128]), name = \"embedding\") \n        assignment = embedding.assign(embeddings)\n        \n        # Create writer class\n        writer = tf.summary.FileWriter(os.path.join(MODEL_DIR, \"model\"))\n        writer.add_graph(sess.graph)\n        \n        # Setup the embeddings\n        config = projector.ProjectorConfig()\n        embedding_config = config.embeddings.add()\n        embedding_config.tensor_name = embedding.name\n        embedding_config.metadata_path = os.path.join(os.getcwd(), MODEL_DIR, 'labels.tsv')\n        embedding_config.sprite.image_path = os.path.join(os.getcwd(), MODEL_DIR,'sprite.png')\n        embedding_config.sprite.single_image_dim.extend([160, 160])\n        projector.visualize_embeddings(writer, config)\n        \n        # Create the embeddings\n        sess.run(assignment, feed_dict = {images_placeholder : face_images, phase_train_placeholder : False})\n</code></pre>\n<p>I have read the FAQs and this is what I got when I ran <code>tensorboard --logdir 20170216-091149/ --debug</code></p>\n<pre><code>INFO:tensorflow:TensorBoard is in debug mode.\nINFO:tensorflow:Starting TensorBoard in directory /Users/kevinlu/Documents/Facial-Recognition/facial_recognition\nINFO:tensorflow:TensorBoard path_to_run is: {'/Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149': None}\nINFO:tensorflow:Event Multiplexer initializing.\nINFO:tensorflow:Event Multiplexer done initializing\nINFO:tensorflow:TensorBoard reload process beginning\nINFO:tensorflow:Starting AddRunsFromDirectory: /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149\nINFO:tensorflow:Adding events from directory /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149/model\nINFO:tensorflow:Constructing EventAccumulator for /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149/model\nINFO:tensorflow:Done with AddRunsFromDirectory: /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149\nINFO:tensorflow:TensorBoard reload process: Reload the whole Multiplexer\nINFO:tensorflow:Beginning EventMultiplexer.Reload()\nDEBUG:tensorflow:Opening a record reader pointing at /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149/model/\n</code></pre>\n<p>The TensorBoard path_to_run seems correct as that is where I am storing my checkpoint files, the metadata file and sprite image.</p>\n<p>Then I ran<code>find 20170216-091149/ | grep tfevents</code> and I got</p>\n<p><code>20170216-091149/model/events.out.tfevents.1491408129.Kevins-MacBook-Pro.local</code></p>\n<p>Note the <code>model</code> folder contains the <code>tfevents</code> file and the <code>projector_config.pbtxt</code> file<br>\nSo my data also exists. The last thing I did as per the troubleshooting was:<br>\n<code>tensorboard --inspect --logdir=20170216-091149/</code> and I got this as the output</p>\n<pre><code>======================================================================\nProcessing event files... (this can take a few minutes)\n======================================================================\n\nFound event files in:\n20170216-091149/model\n\nThese tags are in 20170216-091149/model:\naudio -\nhistograms -\nimages -\nscalars -\n======================================================================\n\nEvent statistics for 20170216-091149/model:\naudio -\ngraph\n   first_step           0\n   last_step            0\n   max_step             0\n   min_step             0\n   num_steps            1\n   outoforder_steps     []\nhistograms -\nimages -\nscalars -\nsessionlog:checkpoint -\nsessionlog:start -\nsessionlog:stop -\n======================================================================\n</code></pre>\n<p>The code I used is exactly the same as the Hands On Tensorboard video code, and when I ran the debug commands as recommended by the FAQ the output of the MNIST tutorial is the same as above.</p>", "body_text": "I am trying to create embeddings visualization from a pretrained network called FaceNet although nothing shows up when I open it in Tensorboard. Here is my source code\nimport tensorflow as tf\nimport os\nfrom tensorflow.contrib.tensorboard.plugins import projector\n\nMODEL_DIR = \"20170216-091149\"\nmeta_file, ckpt_file = facenet.get_model_filenames(MODEL_DIR)\nwith tf.Graph().as_default():\n    with tf.Session().as_default() as sess: \n        # Importing the graph\n        model_dir_exp = os.path.expanduser(MODEL_DIR)\n        print(model_dir_exp)\n        saver = tf.train.import_meta_graph(os.path.join(model_dir_exp, meta_file))\n        \n        # Restoring and retrieving needed layers\n        saver.restore(tf.get_default_session(), os.path.join(model_dir_exp, ckpt_file))\n        images_placeholder = tf.get_default_graph().get_tensor_by_name(\"input:0\")\n        embeddings = tf.get_default_graph().get_tensor_by_name(\"embeddings:0\")\n        phase_train_placeholder = tf.get_default_graph().get_tensor_by_name(\"phase_train:0\") \n        \n        # Create variables needed for Tensorboard\n        embedding = tf.Variable(tf.zeros([33, 128]), name = \"embedding\") \n        assignment = embedding.assign(embeddings)\n        \n        # Create writer class\n        writer = tf.summary.FileWriter(os.path.join(MODEL_DIR, \"model\"))\n        writer.add_graph(sess.graph)\n        \n        # Setup the embeddings\n        config = projector.ProjectorConfig()\n        embedding_config = config.embeddings.add()\n        embedding_config.tensor_name = embedding.name\n        embedding_config.metadata_path = os.path.join(os.getcwd(), MODEL_DIR, 'labels.tsv')\n        embedding_config.sprite.image_path = os.path.join(os.getcwd(), MODEL_DIR,'sprite.png')\n        embedding_config.sprite.single_image_dim.extend([160, 160])\n        projector.visualize_embeddings(writer, config)\n        \n        # Create the embeddings\n        sess.run(assignment, feed_dict = {images_placeholder : face_images, phase_train_placeholder : False})\n\nI have read the FAQs and this is what I got when I ran tensorboard --logdir 20170216-091149/ --debug\nINFO:tensorflow:TensorBoard is in debug mode.\nINFO:tensorflow:Starting TensorBoard in directory /Users/kevinlu/Documents/Facial-Recognition/facial_recognition\nINFO:tensorflow:TensorBoard path_to_run is: {'/Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149': None}\nINFO:tensorflow:Event Multiplexer initializing.\nINFO:tensorflow:Event Multiplexer done initializing\nINFO:tensorflow:TensorBoard reload process beginning\nINFO:tensorflow:Starting AddRunsFromDirectory: /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149\nINFO:tensorflow:Adding events from directory /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149/model\nINFO:tensorflow:Constructing EventAccumulator for /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149/model\nINFO:tensorflow:Done with AddRunsFromDirectory: /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149\nINFO:tensorflow:TensorBoard reload process: Reload the whole Multiplexer\nINFO:tensorflow:Beginning EventMultiplexer.Reload()\nDEBUG:tensorflow:Opening a record reader pointing at /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149/model/\n\nThe TensorBoard path_to_run seems correct as that is where I am storing my checkpoint files, the metadata file and sprite image.\nThen I ranfind 20170216-091149/ | grep tfevents and I got\n20170216-091149/model/events.out.tfevents.1491408129.Kevins-MacBook-Pro.local\nNote the model folder contains the tfevents file and the projector_config.pbtxt file\nSo my data also exists. The last thing I did as per the troubleshooting was:\ntensorboard --inspect --logdir=20170216-091149/ and I got this as the output\n======================================================================\nProcessing event files... (this can take a few minutes)\n======================================================================\n\nFound event files in:\n20170216-091149/model\n\nThese tags are in 20170216-091149/model:\naudio -\nhistograms -\nimages -\nscalars -\n======================================================================\n\nEvent statistics for 20170216-091149/model:\naudio -\ngraph\n   first_step           0\n   last_step            0\n   max_step             0\n   min_step             0\n   num_steps            1\n   outoforder_steps     []\nhistograms -\nimages -\nscalars -\nsessionlog:checkpoint -\nsessionlog:start -\nsessionlog:stop -\n======================================================================\n\nThe code I used is exactly the same as the Hands On Tensorboard video code, and when I ran the debug commands as recommended by the FAQ the output of the MNIST tutorial is the same as above.", "body": "I am trying to create embeddings visualization from a pretrained network called FaceNet although nothing shows up when I open it in Tensorboard. Here is my source code\r\n```\r\nimport tensorflow as tf\r\nimport os\r\nfrom tensorflow.contrib.tensorboard.plugins import projector\r\n\r\nMODEL_DIR = \"20170216-091149\"\r\nmeta_file, ckpt_file = facenet.get_model_filenames(MODEL_DIR)\r\nwith tf.Graph().as_default():\r\n    with tf.Session().as_default() as sess: \r\n        # Importing the graph\r\n        model_dir_exp = os.path.expanduser(MODEL_DIR)\r\n        print(model_dir_exp)\r\n        saver = tf.train.import_meta_graph(os.path.join(model_dir_exp, meta_file))\r\n        \r\n        # Restoring and retrieving needed layers\r\n        saver.restore(tf.get_default_session(), os.path.join(model_dir_exp, ckpt_file))\r\n        images_placeholder = tf.get_default_graph().get_tensor_by_name(\"input:0\")\r\n        embeddings = tf.get_default_graph().get_tensor_by_name(\"embeddings:0\")\r\n        phase_train_placeholder = tf.get_default_graph().get_tensor_by_name(\"phase_train:0\") \r\n        \r\n        # Create variables needed for Tensorboard\r\n        embedding = tf.Variable(tf.zeros([33, 128]), name = \"embedding\") \r\n        assignment = embedding.assign(embeddings)\r\n        \r\n        # Create writer class\r\n        writer = tf.summary.FileWriter(os.path.join(MODEL_DIR, \"model\"))\r\n        writer.add_graph(sess.graph)\r\n        \r\n        # Setup the embeddings\r\n        config = projector.ProjectorConfig()\r\n        embedding_config = config.embeddings.add()\r\n        embedding_config.tensor_name = embedding.name\r\n        embedding_config.metadata_path = os.path.join(os.getcwd(), MODEL_DIR, 'labels.tsv')\r\n        embedding_config.sprite.image_path = os.path.join(os.getcwd(), MODEL_DIR,'sprite.png')\r\n        embedding_config.sprite.single_image_dim.extend([160, 160])\r\n        projector.visualize_embeddings(writer, config)\r\n        \r\n        # Create the embeddings\r\n        sess.run(assignment, feed_dict = {images_placeholder : face_images, phase_train_placeholder : False})\r\n```\r\n\r\nI have read the FAQs and this is what I got when I ran `tensorboard --logdir 20170216-091149/ --debug`\r\n\r\n```\r\nINFO:tensorflow:TensorBoard is in debug mode.\r\nINFO:tensorflow:Starting TensorBoard in directory /Users/kevinlu/Documents/Facial-Recognition/facial_recognition\r\nINFO:tensorflow:TensorBoard path_to_run is: {'/Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149': None}\r\nINFO:tensorflow:Event Multiplexer initializing.\r\nINFO:tensorflow:Event Multiplexer done initializing\r\nINFO:tensorflow:TensorBoard reload process beginning\r\nINFO:tensorflow:Starting AddRunsFromDirectory: /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149\r\nINFO:tensorflow:Adding events from directory /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149/model\r\nINFO:tensorflow:Constructing EventAccumulator for /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149/model\r\nINFO:tensorflow:Done with AddRunsFromDirectory: /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149\r\nINFO:tensorflow:TensorBoard reload process: Reload the whole Multiplexer\r\nINFO:tensorflow:Beginning EventMultiplexer.Reload()\r\nDEBUG:tensorflow:Opening a record reader pointing at /Users/kevinlu/Documents/Facial-Recognition/facial_recognition/20170216-091149/model/\r\n```\r\n\r\nThe TensorBoard path_to_run seems correct as that is where I am storing my checkpoint files, the metadata file and sprite image.\r\n\r\nThen I ran`find 20170216-091149/ | grep tfevents` and I got \r\n\r\n```20170216-091149/model/events.out.tfevents.1491408129.Kevins-MacBook-Pro.local``` \r\n\r\n\r\nNote the `model` folder contains the `tfevents` file and the `projector_config.pbtxt` file\r\nSo my data also exists. The last thing I did as per the troubleshooting was: \r\n`tensorboard --inspect --logdir=20170216-091149/` and I got this as the output\r\n\r\n\r\n```\r\n======================================================================\r\nProcessing event files... (this can take a few minutes)\r\n======================================================================\r\n\r\nFound event files in:\r\n20170216-091149/model\r\n\r\nThese tags are in 20170216-091149/model:\r\naudio -\r\nhistograms -\r\nimages -\r\nscalars -\r\n======================================================================\r\n\r\nEvent statistics for 20170216-091149/model:\r\naudio -\r\ngraph\r\n   first_step           0\r\n   last_step            0\r\n   max_step             0\r\n   min_step             0\r\n   num_steps            1\r\n   outoforder_steps     []\r\nhistograms -\r\nimages -\r\nscalars -\r\nsessionlog:checkpoint -\r\nsessionlog:start -\r\nsessionlog:stop -\r\n======================================================================\r\n```\r\n\r\nThe code I used is exactly the same as the Hands On Tensorboard video code, and when I ran the debug commands as recommended by the FAQ the output of the MNIST tutorial is the same as above."}
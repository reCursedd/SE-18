{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3895", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3895/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3895/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3895/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3895", "id": 171843362, "node_id": "MDU6SXNzdWUxNzE4NDMzNjI=", "number": 3895, "title": "MultiRNNCell with state_is_tuple=True got Error!", "user": {"login": "guozhizou", "id": 7837436, "node_id": "MDQ6VXNlcjc4Mzc0MzY=", "avatar_url": "https://avatars1.githubusercontent.com/u/7837436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guozhizou", "html_url": "https://github.com/guozhizou", "followers_url": "https://api.github.com/users/guozhizou/followers", "following_url": "https://api.github.com/users/guozhizou/following{/other_user}", "gists_url": "https://api.github.com/users/guozhizou/gists{/gist_id}", "starred_url": "https://api.github.com/users/guozhizou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guozhizou/subscriptions", "organizations_url": "https://api.github.com/users/guozhizou/orgs", "repos_url": "https://api.github.com/users/guozhizou/repos", "events_url": "https://api.github.com/users/guozhizou/events{/privacy}", "received_events_url": "https://api.github.com/users/guozhizou/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-08-18T08:18:16Z", "updated_at": "2016-08-23T06:28:33Z", "closed_at": "2016-08-23T06:28:33Z", "author_association": "NONE", "body_html": "<p>Running MultiRNN, when I set</p>\n<pre><code>cell = tf.nn.rnn_cell.LSTMCell(state_size, state_is_tuple=True)\ncell = tf.nn.rnn_cell.MultiRNNCell([cell] * num_layers, state_is_tuple=True)\n</code></pre>\n<p>got following error:</p>\n<pre><code>Traceback (most recent call last):\n  File \"/Users/nali/Workspace/tensorflow_example/search_click/RNN/lstm.py\", line 175, in &lt;module&gt;\n    train_network(g, 3)\n  File \"/Users/nali/Workspace/tensorflow_example/search_click/RNN/lstm.py\", line 140, in train_network\n    [g['total_loss'], g['final_state'], g['train_step']], feed_dict)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 372, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 584, in _run\n    processed_fetches = self._process_fetches(fetches)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 540, in _process_fetches\n    % (subfetch, fetch, type(subfetch), str(e)))\nTypeError: Fetch argument (LSTMStateTuple(c=&lt;tf.Tensor 'RNN/while/Exit_2:0' shape=(32, 100) dtype=float32&gt;, h=&lt;tf.Tensor 'RNN/while/Exit_3:0' shape=(32, 100) dtype=float32&gt;), LSTMStateTuple(c=&lt;tf.Tensor 'RNN/while/Exit_4:0' shape=(32, 100) dtype=float32&gt;, h=&lt;tf.Tensor 'RNN/while/Exit_5:0' shape=(32, 100) dtype=float32&gt;), LSTMStateTuple(c=&lt;tf.Tensor 'RNN/while/Exit_6:0' shape=(32, 100) dtype=float32&gt;, h=&lt;tf.Tensor 'RNN/while/Exit_7:0' shape=(32, 100) dtype=float32&gt;)) of (LSTMStateTuple(c=&lt;tf.Tensor 'RNN/while/Exit_2:0' shape=(32, 100) dtype=float32&gt;, h=&lt;tf.Tensor 'RNN/while/Exit_3:0' shape=(32, 100) dtype=float32&gt;), LSTMStateTuple(c=&lt;tf.Tensor 'RNN/while/Exit_4:0' shape=(32, 100) dtype=float32&gt;, h=&lt;tf.Tensor 'RNN/while/Exit_5:0' shape=(32, 100) dtype=float32&gt;), LSTMStateTuple(c=&lt;tf.Tensor 'RNN/while/Exit_6:0' shape=(32, 100) dtype=float32&gt;, h=&lt;tf.Tensor 'RNN/while/Exit_7:0' shape=(32, 100) dtype=float32&gt;)) has invalid type &lt;type 'tuple'&gt;, must be a string or Tensor. (Can not convert a tuple into a Tensor or Operation.)\n</code></pre>\n<p>But when I set state_is_tuple=False(Default), it works fine.<br>\nHowever, state_is_tuple=True is recommended to faster LSTM states.</p>", "body_text": "Running MultiRNN, when I set\ncell = tf.nn.rnn_cell.LSTMCell(state_size, state_is_tuple=True)\ncell = tf.nn.rnn_cell.MultiRNNCell([cell] * num_layers, state_is_tuple=True)\n\ngot following error:\nTraceback (most recent call last):\n  File \"/Users/nali/Workspace/tensorflow_example/search_click/RNN/lstm.py\", line 175, in <module>\n    train_network(g, 3)\n  File \"/Users/nali/Workspace/tensorflow_example/search_click/RNN/lstm.py\", line 140, in train_network\n    [g['total_loss'], g['final_state'], g['train_step']], feed_dict)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 372, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 584, in _run\n    processed_fetches = self._process_fetches(fetches)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 540, in _process_fetches\n    % (subfetch, fetch, type(subfetch), str(e)))\nTypeError: Fetch argument (LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_2:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_3:0' shape=(32, 100) dtype=float32>), LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_4:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_5:0' shape=(32, 100) dtype=float32>), LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_6:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_7:0' shape=(32, 100) dtype=float32>)) of (LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_2:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_3:0' shape=(32, 100) dtype=float32>), LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_4:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_5:0' shape=(32, 100) dtype=float32>), LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_6:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_7:0' shape=(32, 100) dtype=float32>)) has invalid type <type 'tuple'>, must be a string or Tensor. (Can not convert a tuple into a Tensor or Operation.)\n\nBut when I set state_is_tuple=False(Default), it works fine.\nHowever, state_is_tuple=True is recommended to faster LSTM states.", "body": "Running MultiRNN, when I set \n\n```\ncell = tf.nn.rnn_cell.LSTMCell(state_size, state_is_tuple=True)\ncell = tf.nn.rnn_cell.MultiRNNCell([cell] * num_layers, state_is_tuple=True)\n```\n\ngot following error:\n\n```\nTraceback (most recent call last):\n  File \"/Users/nali/Workspace/tensorflow_example/search_click/RNN/lstm.py\", line 175, in <module>\n    train_network(g, 3)\n  File \"/Users/nali/Workspace/tensorflow_example/search_click/RNN/lstm.py\", line 140, in train_network\n    [g['total_loss'], g['final_state'], g['train_step']], feed_dict)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 372, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 584, in _run\n    processed_fetches = self._process_fetches(fetches)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 540, in _process_fetches\n    % (subfetch, fetch, type(subfetch), str(e)))\nTypeError: Fetch argument (LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_2:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_3:0' shape=(32, 100) dtype=float32>), LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_4:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_5:0' shape=(32, 100) dtype=float32>), LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_6:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_7:0' shape=(32, 100) dtype=float32>)) of (LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_2:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_3:0' shape=(32, 100) dtype=float32>), LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_4:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_5:0' shape=(32, 100) dtype=float32>), LSTMStateTuple(c=<tf.Tensor 'RNN/while/Exit_6:0' shape=(32, 100) dtype=float32>, h=<tf.Tensor 'RNN/while/Exit_7:0' shape=(32, 100) dtype=float32>)) has invalid type <type 'tuple'>, must be a string or Tensor. (Can not convert a tuple into a Tensor or Operation.)\n```\n\nBut when I set state_is_tuple=False(Default), it works fine.\nHowever, state_is_tuple=True is recommended to faster LSTM states.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/301504910", "html_url": "https://github.com/tensorflow/tensorflow/pull/9686#issuecomment-301504910", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9686", "id": 301504910, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTUwNDkxMA==", "user": {"login": "sjperkins", "id": 3530212, "node_id": "MDQ6VXNlcjM1MzAyMTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3530212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjperkins", "html_url": "https://github.com/sjperkins", "followers_url": "https://api.github.com/users/sjperkins/followers", "following_url": "https://api.github.com/users/sjperkins/following{/other_user}", "gists_url": "https://api.github.com/users/sjperkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjperkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjperkins/subscriptions", "organizations_url": "https://api.github.com/users/sjperkins/orgs", "repos_url": "https://api.github.com/users/sjperkins/repos", "events_url": "https://api.github.com/users/sjperkins/events{/privacy}", "received_events_url": "https://api.github.com/users/sjperkins/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-15T15:09:19Z", "updated_at": "2017-05-15T15:13:34Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I've added support for a memory limit in the Staging Areas. I thought that would be useful for constraining memory in GPU Staging Areas.</p>\n<p>I've also added support for partial inserts in the MapStagingArea, similar to the heavyweight Barrier. e.g.</p>\n<div class=\"highlight highlight-source-python\"><pre>stage <span class=\"pl-k\">=</span> data_flow_ops.MapStagingArea([tf.float32, tf.int32, tf.float32],\n                                                        <span class=\"pl-v\">names</span><span class=\"pl-k\">=</span>[<span class=\"pl-s\"><span class=\"pl-pds\">'</span>x<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>y<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>z<span class=\"pl-pds\">'</span></span>])\n\ninsert_xy <span class=\"pl-k\">=</span> stage.put(<span class=\"pl-c1\">0</span>, {<span class=\"pl-s\"><span class=\"pl-pds\">'</span>x<span class=\"pl-pds\">'</span></span> : <span class=\"pl-c1\">0</span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>y<span class=\"pl-pds\">'</span></span> :<span class=\"pl-c1\">1</span>})\ninsert_z <span class=\"pl-k\">=</span> stage.put(<span class=\"pl-c1\">0</span>,  {<span class=\"pl-s\"><span class=\"pl-pds\">'</span>z<span class=\"pl-pds\">'</span></span>:<span class=\"pl-c1\">2</span>})\nget_xyz <span class=\"pl-k\">=</span> stage.get(<span class=\"pl-c1\">0</span>)\n\n<span class=\"pl-k\">assert</span> session.run(get_xyz) <span class=\"pl-k\">==</span> [<span class=\"pl-c1\">0</span>, { <span class=\"pl-s\"><span class=\"pl-pds\">'</span>x<span class=\"pl-pds\">'</span></span>:<span class=\"pl-c1\">0</span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>y<span class=\"pl-pds\">'</span></span>:<span class=\"pl-c1\">1</span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>z<span class=\"pl-pds\">'</span></span>:<span class=\"pl-c1\">2</span> }]</pre></div>\n<p>I didn't get around to the refactor and I can't spend much more time on this so I'll stop with the features at this point.</p>", "body_text": "I've added support for a memory limit in the Staging Areas. I thought that would be useful for constraining memory in GPU Staging Areas.\nI've also added support for partial inserts in the MapStagingArea, similar to the heavyweight Barrier. e.g.\nstage = data_flow_ops.MapStagingArea([tf.float32, tf.int32, tf.float32],\n                                                        names=['x', 'y', 'z'])\n\ninsert_xy = stage.put(0, {'x' : 0, 'y' :1})\ninsert_z = stage.put(0,  {'z':2})\nget_xyz = stage.get(0)\n\nassert session.run(get_xyz) == [0, { 'x':0, 'y':1, 'z':2 }]\nI didn't get around to the refactor and I can't spend much more time on this so I'll stop with the features at this point.", "body": "I've added support for a memory limit in the Staging Areas. I thought that would be useful for constraining memory in GPU Staging Areas.\r\n\r\nI've also added support for partial inserts in the MapStagingArea, similar to the heavyweight Barrier. e.g.\r\n\r\n```python\r\nstage = data_flow_ops.MapStagingArea([tf.float32, tf.int32, tf.float32],\r\n                                                        names=['x', 'y', 'z'])\r\n\r\ninsert_xy = stage.put(0, {'x' : 0, 'y' :1})\r\ninsert_z = stage.put(0,  {'z':2})\r\nget_xyz = stage.get(0)\r\n\r\nassert session.run(get_xyz) == [0, { 'x':0, 'y':1, 'z':2 }]\r\n```\r\n\r\nI didn't get around to the refactor and I can't spend much more time on this so I'll stop with the features at this point."}
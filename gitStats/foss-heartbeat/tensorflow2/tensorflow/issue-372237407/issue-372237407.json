{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23130", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23130/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23130/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23130/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23130", "id": 372237407, "node_id": "MDU6SXNzdWUzNzIyMzc0MDc=", "number": 23130, "title": "Keras-GPU Fail to create cudnn handle", "user": {"login": "Gaduu", "id": 9085529, "node_id": "MDQ6VXNlcjkwODU1Mjk=", "avatar_url": "https://avatars3.githubusercontent.com/u/9085529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gaduu", "html_url": "https://github.com/Gaduu", "followers_url": "https://api.github.com/users/Gaduu/followers", "following_url": "https://api.github.com/users/Gaduu/following{/other_user}", "gists_url": "https://api.github.com/users/Gaduu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gaduu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gaduu/subscriptions", "organizations_url": "https://api.github.com/users/Gaduu/orgs", "repos_url": "https://api.github.com/users/Gaduu/repos", "events_url": "https://api.github.com/users/Gaduu/events{/privacy}", "received_events_url": "https://api.github.com/users/Gaduu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-10-20T18:04:00Z", "updated_at": "2018-11-13T23:21:54Z", "closed_at": "2018-11-13T23:21:34Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>Just quick question regarding using Keras-GPU on Windows. Essentially I was playing with implementation of one of the Deep Reinforcement Learning algorithms (DQN) using Keras with Tensorflow-GPU backend for AirSim self-driving car simulation. All good but when it comes to training the NN the TF Fails with the error below. I tried to see if there is something wrong with my script by running simple MNSIT NN example and it fails with exact same reason. What I've noticed is that this ONLY happens when the environment (AirSim application) is running in the background, nothing fails if its not running. Additionally (since I have access to more than one GPU), when the GPUs are not SLI connected and work as 2 separate units it also works just fine by using GPU1 for application and GPU2 for training. Already posted this on AirSim git but was redirected here. Anyone else encountered this issue before?</p>\n<p>I'm using CUDA 9 with and TF 1.5.0 on Windows 10 if that helps, updating TF didn't help etc, as I said all works when the app is not running</p>\n<p>Epoch 1/1<br>\n2018-09-28 15:02:31.247055: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1195] Creating TensorFlow device (/device:GPU:0) -&gt; (device: 0, name: GeForce GTX 1080, pci bus id: 0000:03:00.0, compute capability: 6.1)</p>\n<p>2018-09-28 15:02:33.168438: E C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\stream_executor\\cuda\\cuda_dnn.cc:385] could not create cudnn handle: CUDNN_STATUS_ALLOC_FAILED</p>\n<p>2018-09-28 15:02:33.173026: E C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\stream_executor\\cuda\\cuda_dnn.cc:352] could not destroy cudnn handle: CUDNN_STATUS_BAD_PARAM</p>\n<p>2018-09-28 15:02:33.178209: F C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\kernels\\conv_ops.cc:717] Check failed: stream-&gt;parent()-&gt;GetConvolveAlgorithms( conv_parameters.ShouldIncludeWinogradNonfusedAlgo(), &amp;algorithms)</p>\n<p>Cheers</p>", "body_text": "Hi,\nJust quick question regarding using Keras-GPU on Windows. Essentially I was playing with implementation of one of the Deep Reinforcement Learning algorithms (DQN) using Keras with Tensorflow-GPU backend for AirSim self-driving car simulation. All good but when it comes to training the NN the TF Fails with the error below. I tried to see if there is something wrong with my script by running simple MNSIT NN example and it fails with exact same reason. What I've noticed is that this ONLY happens when the environment (AirSim application) is running in the background, nothing fails if its not running. Additionally (since I have access to more than one GPU), when the GPUs are not SLI connected and work as 2 separate units it also works just fine by using GPU1 for application and GPU2 for training. Already posted this on AirSim git but was redirected here. Anyone else encountered this issue before?\nI'm using CUDA 9 with and TF 1.5.0 on Windows 10 if that helps, updating TF didn't help etc, as I said all works when the app is not running\nEpoch 1/1\n2018-09-28 15:02:31.247055: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1195] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:03:00.0, compute capability: 6.1)\n2018-09-28 15:02:33.168438: E C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\stream_executor\\cuda\\cuda_dnn.cc:385] could not create cudnn handle: CUDNN_STATUS_ALLOC_FAILED\n2018-09-28 15:02:33.173026: E C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\stream_executor\\cuda\\cuda_dnn.cc:352] could not destroy cudnn handle: CUDNN_STATUS_BAD_PARAM\n2018-09-28 15:02:33.178209: F C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\kernels\\conv_ops.cc:717] Check failed: stream->parent()->GetConvolveAlgorithms( conv_parameters.ShouldIncludeWinogradNonfusedAlgo(), &algorithms)\nCheers", "body": "Hi,\r\n\r\nJust quick question regarding using Keras-GPU on Windows. Essentially I was playing with implementation of one of the Deep Reinforcement Learning algorithms (DQN) using Keras with Tensorflow-GPU backend for AirSim self-driving car simulation. All good but when it comes to training the NN the TF Fails with the error below. I tried to see if there is something wrong with my script by running simple MNSIT NN example and it fails with exact same reason. What I've noticed is that this ONLY happens when the environment (AirSim application) is running in the background, nothing fails if its not running. Additionally (since I have access to more than one GPU), when the GPUs are not SLI connected and work as 2 separate units it also works just fine by using GPU1 for application and GPU2 for training. Already posted this on AirSim git but was redirected here. Anyone else encountered this issue before?\r\n\r\nI'm using CUDA 9 with and TF 1.5.0 on Windows 10 if that helps, updating TF didn't help etc, as I said all works when the app is not running\r\n\r\nEpoch 1/1\r\n2018-09-28 15:02:31.247055: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1195] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GTX 1080, pci bus id: 0000:03:00.0, compute capability: 6.1)\r\n\r\n2018-09-28 15:02:33.168438: E C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\stream_executor\\cuda\\cuda_dnn.cc:385] could not create cudnn handle: CUDNN_STATUS_ALLOC_FAILED\r\n\r\n2018-09-28 15:02:33.173026: E C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\stream_executor\\cuda\\cuda_dnn.cc:352] could not destroy cudnn handle: CUDNN_STATUS_BAD_PARAM\r\n\r\n2018-09-28 15:02:33.178209: F C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\kernels\\conv_ops.cc:717] Check failed: stream->parent()->GetConvolveAlgorithms( conv_parameters.ShouldIncludeWinogradNonfusedAlgo(), &algorithms)\r\n\r\nCheers"}
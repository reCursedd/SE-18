{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12747", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12747/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12747/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12747/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12747", "id": 254574702, "node_id": "MDU6SXNzdWUyNTQ1NzQ3MDI=", "number": 12747, "title": "How to build a full C++ API libtensorflow_cc.so for Android?", "user": {"login": "mixml", "id": 16316668, "node_id": "MDQ6VXNlcjE2MzE2NjY4", "avatar_url": "https://avatars1.githubusercontent.com/u/16316668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mixml", "html_url": "https://github.com/mixml", "followers_url": "https://api.github.com/users/mixml/followers", "following_url": "https://api.github.com/users/mixml/following{/other_user}", "gists_url": "https://api.github.com/users/mixml/gists{/gist_id}", "starred_url": "https://api.github.com/users/mixml/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mixml/subscriptions", "organizations_url": "https://api.github.com/users/mixml/orgs", "repos_url": "https://api.github.com/users/mixml/repos", "events_url": "https://api.github.com/users/mixml/events{/privacy}", "received_events_url": "https://api.github.com/users/mixml/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-09-01T08:43:25Z", "updated_at": "2018-10-23T14:57:07Z", "closed_at": "2018-01-03T21:07:14Z", "author_association": "NONE", "body_html": "<h3>Describe the problem</h3>\n<p>When I use</p>\n<pre><code>bazel build -c opt //tensorflow:libtensorflow_cc.so --crosstool_top=//external:android/crosstool --cpu=armeabi-v7a --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --verbose_failures\n</code></pre>\n<p>to compile the full C++ API libtensorflow_cc.so for Android, but It can not work.</p>\n<h3>Source code / logs</h3>\n<pre><code>C++ compilation of rule '@highwayhash//:sip_hash' failed (Exit 1): arm-linux-androideabi-gcc failed: error executing command \n  (exec env - \\\n    PATH=/home/mlin2/.cargo/bin:/home/mlin2/bin:/home/mlin2/anaconda2/bin:/usr/lib64/qt-3.3/bin:/home/mlin2/perl5/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/go/bin:/opt/gopath/bin:/home/mlin2/software/android-ndk-r12b/:/home/mlin2/.fzf/bin:/home/mlin2/.local/bin:/home/mlin2/bin \\\n    PWD=/proc/self/cwd \\\n    PYTHON_BIN_PATH=/home/mlin2/anaconda2/bin/python \\\n    PYTHON_LIB_PATH=/home/mlin2/anaconda2/lib/python2.7/site-packages \\\n    TF_NEED_CUDA=0 \\\n    TF_NEED_OPENCL=0 \\\n  external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables -no-canonical-prefixes -fno-canonical-system-headers '-march=armv7-a' '-mfpu=vfpv3-d16' '-mfloat-abi=softfp' -mthumb -Os -g -DNDEBUG -MD -MF bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/highwayhash/_objs/sip_hash/external/highwayhash/highwayhash/sip_hash.d '-frandom-seed=bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/highwayhash/_objs/sip_hash/external/highwayhash/highwayhash/sip_hash.o' -iquote external/highwayhash -iquote bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/highwayhash -iquote external/bazel_tools -iquote bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/bazel_tools -isystem external/bazel_tools/tools/cpp/gcc3 '--sysroot=external/androidndk/ndk/platforms/android-14/arch-arm' -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -c external/highwayhash/highwayhash/sip_hash.cc -o bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/highwayhash/_objs/sip_hash/external/highwayhash/highwayhash/sip_hash.o).\nIn file included from external/highwayhash/highwayhash/arch_specific.h:23:0,\n                 from external/highwayhash/highwayhash/sip_hash.h:23,\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\nexternal/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::PaddedUpdate(highwayhash::HH_U64, const char*, highwayhash::HH_U64, State*)':\nexternal/highwayhash/highwayhash/compiler_specific.h:50:30: error: expected initializer before 'alignas'\n #define HH_ALIGNAS(multiple) alignas(multiple)  // C++11\n                              ^\nexternal/highwayhash/highwayhash/state_helpers.h:49:41: note: in expansion of macro 'HH_ALIGNAS'\n   char final_packet[State::kPacketSize] HH_ALIGNAS(32) = {0};\n                                         ^\nIn file included from external/highwayhash/highwayhash/sip_hash.h:25:0,\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\nexternal/highwayhash/highwayhash/state_helpers.h:64:10: error: 'final_packet' was not declared in this scope\n   memcpy(final_packet, remaining_bytes, remaining_size - remainder_mod4);\n          ^\nexternal/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::UpdateState(const char*, highwayhash::HH_U64, State*)':\nexternal/highwayhash/highwayhash/state_helpers.h:76:76: error: there are no arguments to 'static_assert' that depend on a template parameter, so a declaration of 'static_assert' must be available [-fpermissive]\n   static_assert((kPacketSize &amp; (kPacketSize - 1)) == 0, \"Size must be 2^i.\");\n                                                                            ^\nexternal/highwayhash/highwayhash/state_helpers.h:76:76: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\nIn file included from external/highwayhash/highwayhash/sip_hash.cc:15:0:\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:33:9: error: expected nested-name-specifier before 'Key'\n   using Key = HH_U64[2];\n         ^\nexternal/highwayhash/highwayhash/sip_hash.h:36:42: error: 'Key' does not name a type\n   explicit HH_INLINE SipHashStateT(const Key&amp; key) {\n                                          ^\nexternal/highwayhash/highwayhash/sip_hash.h: In constructor 'highwayhash::SipHashStateT&lt;kUpdateIters, kFinalizeIters&gt;::SipHashStateT(const int&amp;)':\nexternal/highwayhash/highwayhash/sip_hash.h:37:39: error: invalid types 'const int[int]' for array subscript\n     v0 = 0x736f6d6570736575ull ^ key[0];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:38:39: error: invalid types 'const int[int]' for array subscript\n     v1 = 0x646f72616e646f6dull ^ key[1];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:39:39: error: invalid types 'const int[int]' for array subscript\n     v2 = 0x6c7967656e657261ull ^ key[0];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:40:39: error: invalid types 'const int[int]' for array subscript\n     v3 = 0x7465646279746573ull ^ key[1];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:104:7: error: expected nested-name-specifier before 'SipHashState'\n using SipHashState = SipHashStateT&lt;2, 4&gt;;\n       ^\nexternal/highwayhash/highwayhash/sip_hash.h:105:7: error: expected nested-name-specifier before 'SipHash13State'\n using SipHash13State = SipHashStateT&lt;1, 3&gt;;\n       ^\nexternal/highwayhash/highwayhash/sip_hash.h:110:29: error: 'SipHashState' was not declared in this scope\n HH_INLINE void PaddedUpdate&lt;SipHashState&gt;(const HH_U64 size,\n                             ^\nexternal/highwayhash/highwayhash/sip_hash.h:113:43: error: 'SipHashState' has not been declared\n                                           SipHashState* state) {\n                                           ^\nexternal/highwayhash/highwayhash/sip_hash.h:110:16: error: template-id 'PaddedUpdate&lt;&lt;expression error&gt; &gt;' for 'void highwayhash::PaddedUpdate(highwayhash::HH_U64, const char*, highwayhash::HH_U64, int*)' does not match any template declaration\n HH_INLINE void PaddedUpdate&lt;SipHashState&gt;(const HH_U64 size,\n                ^\nexternal/highwayhash/highwayhash/sip_hash.h:122:29: error: 'SipHash13State' was not declared in this scope\n HH_INLINE void PaddedUpdate&lt;SipHash13State&gt;(const HH_U64 size,\n                             ^\nexternal/highwayhash/highwayhash/sip_hash.h:125:45: error: 'SipHash13State' has not been declared\n                                             SipHash13State* state) {\n                                             ^\nexternal/highwayhash/highwayhash/sip_hash.h:122:16: error: template-id 'PaddedUpdate&lt;&lt;expression error&gt; &gt;' for 'void highwayhash::PaddedUpdate(highwayhash::HH_U64, const char*, highwayhash::HH_U64, int*)' does not match any template declaration\n HH_INLINE void PaddedUpdate&lt;SipHash13State&gt;(const HH_U64 size,\n                ^\nexternal/highwayhash/highwayhash/sip_hash.h:146:39: error: 'SipHashState' does not name a type\n static HH_INLINE HH_U64 SipHash(const SipHashState::Key&amp; key, const char* bytes,\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:146:56: error: expected unqualified-id before '&amp;' token\n static HH_INLINE HH_U64 SipHash(const SipHashState::Key&amp; key, const char* bytes,\n                                                        ^\nexternal/highwayhash/highwayhash/sip_hash.h:146:56: error: expected ')' before '&amp;' token\nexternal/highwayhash/highwayhash/sip_hash.h:146:58: error: expected initializer before 'key'\n static HH_INLINE HH_U64 SipHash(const SipHashState::Key&amp; key, const char* bytes,\n                                                          ^\nexternal/highwayhash/highwayhash/sip_hash.h:152:41: error: 'SipHash13State' does not name a type\n static HH_INLINE HH_U64 SipHash13(const SipHash13State::Key&amp; key,\n                                         ^\nexternal/highwayhash/highwayhash/sip_hash.h:152:60: error: expected unqualified-id before '&amp;' token\n static HH_INLINE HH_U64 SipHash13(const SipHash13State::Key&amp; key,\n                                                            ^\nexternal/highwayhash/highwayhash/sip_hash.h:152:60: error: expected ')' before '&amp;' token\nexternal/highwayhash/highwayhash/sip_hash.h:152:62: error: expected initializer before 'key'\n static HH_INLINE HH_U64 SipHash13(const SipHash13State::Key&amp; key,\n                                                              ^\nexternal/highwayhash/highwayhash/sip_hash.cc:18:20: error: 'highwayhash::SipHash' has not been declared\n using highwayhash::SipHash;\n                    ^\nexternal/highwayhash/highwayhash/sip_hash.cc:19:20: error: 'highwayhash::SipHash13' has not been declared\n using highwayhash::SipHash13;\n                    ^\nexternal/highwayhash/highwayhash/sip_hash.cc:20:7: error: expected nested-name-specifier before 'Key'\n using Key = highwayhash::SipHashState::Key;\n       ^\nexternal/highwayhash/highwayhash/sip_hash.cc:21:7: error: expected nested-name-specifier before 'Key13'\n using Key13 = highwayhash::SipHash13State::Key;\n       ^\nexternal/highwayhash/highwayhash/sip_hash.cc: In function 'highwayhash::HH_U64 SipHashC(const HH_U64*, const char*, highwayhash::HH_U64)':\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]\n   return SipHash(*reinterpret_cast&lt;const Key*&gt;(key), bytes, size);\n                                          ^\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: expected '&gt;' before 'Key'\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: expected '(' before 'Key'\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: 'Key' was not declared in this scope\nexternal/highwayhash/highwayhash/sip_hash.cc:26:46: error: expected primary-expression before '&gt;' token\n   return SipHash(*reinterpret_cast&lt;const Key*&gt;(key), bytes, size);\n                                              ^\nexternal/highwayhash/highwayhash/sip_hash.cc: In function 'highwayhash::HH_U64 SipHash13C(const HH_U64*, const char*, highwayhash::HH_U64)':\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]\n   return SipHash13(*reinterpret_cast&lt;const Key13*&gt;(key), bytes, size);\n                                            ^\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: expected '&gt;' before 'Key13'\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: expected '(' before 'Key13'\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: 'Key13' was not declared in this scope\nexternal/highwayhash/highwayhash/sip_hash.cc:30:50: error: expected primary-expression before '&gt;' token\n   return SipHash13(*reinterpret_cast&lt;const Key13*&gt;(key), bytes, size);\n                                                  ^\nTarget //tensorflow:libtensorflow_cc.so failed to build\nINFO: Elapsed time: 1.812s, Critical Path: 0.14s\n</code></pre>", "body_text": "Describe the problem\nWhen I use\nbazel build -c opt //tensorflow:libtensorflow_cc.so --crosstool_top=//external:android/crosstool --cpu=armeabi-v7a --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --verbose_failures\n\nto compile the full C++ API libtensorflow_cc.so for Android, but It can not work.\nSource code / logs\nC++ compilation of rule '@highwayhash//:sip_hash' failed (Exit 1): arm-linux-androideabi-gcc failed: error executing command \n  (exec env - \\\n    PATH=/home/mlin2/.cargo/bin:/home/mlin2/bin:/home/mlin2/anaconda2/bin:/usr/lib64/qt-3.3/bin:/home/mlin2/perl5/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/go/bin:/opt/gopath/bin:/home/mlin2/software/android-ndk-r12b/:/home/mlin2/.fzf/bin:/home/mlin2/.local/bin:/home/mlin2/bin \\\n    PWD=/proc/self/cwd \\\n    PYTHON_BIN_PATH=/home/mlin2/anaconda2/bin/python \\\n    PYTHON_LIB_PATH=/home/mlin2/anaconda2/lib/python2.7/site-packages \\\n    TF_NEED_CUDA=0 \\\n    TF_NEED_OPENCL=0 \\\n  external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables -no-canonical-prefixes -fno-canonical-system-headers '-march=armv7-a' '-mfpu=vfpv3-d16' '-mfloat-abi=softfp' -mthumb -Os -g -DNDEBUG -MD -MF bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/highwayhash/_objs/sip_hash/external/highwayhash/highwayhash/sip_hash.d '-frandom-seed=bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/highwayhash/_objs/sip_hash/external/highwayhash/highwayhash/sip_hash.o' -iquote external/highwayhash -iquote bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/highwayhash -iquote external/bazel_tools -iquote bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/bazel_tools -isystem external/bazel_tools/tools/cpp/gcc3 '--sysroot=external/androidndk/ndk/platforms/android-14/arch-arm' -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -c external/highwayhash/highwayhash/sip_hash.cc -o bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/highwayhash/_objs/sip_hash/external/highwayhash/highwayhash/sip_hash.o).\nIn file included from external/highwayhash/highwayhash/arch_specific.h:23:0,\n                 from external/highwayhash/highwayhash/sip_hash.h:23,\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\nexternal/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::PaddedUpdate(highwayhash::HH_U64, const char*, highwayhash::HH_U64, State*)':\nexternal/highwayhash/highwayhash/compiler_specific.h:50:30: error: expected initializer before 'alignas'\n #define HH_ALIGNAS(multiple) alignas(multiple)  // C++11\n                              ^\nexternal/highwayhash/highwayhash/state_helpers.h:49:41: note: in expansion of macro 'HH_ALIGNAS'\n   char final_packet[State::kPacketSize] HH_ALIGNAS(32) = {0};\n                                         ^\nIn file included from external/highwayhash/highwayhash/sip_hash.h:25:0,\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\nexternal/highwayhash/highwayhash/state_helpers.h:64:10: error: 'final_packet' was not declared in this scope\n   memcpy(final_packet, remaining_bytes, remaining_size - remainder_mod4);\n          ^\nexternal/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::UpdateState(const char*, highwayhash::HH_U64, State*)':\nexternal/highwayhash/highwayhash/state_helpers.h:76:76: error: there are no arguments to 'static_assert' that depend on a template parameter, so a declaration of 'static_assert' must be available [-fpermissive]\n   static_assert((kPacketSize & (kPacketSize - 1)) == 0, \"Size must be 2^i.\");\n                                                                            ^\nexternal/highwayhash/highwayhash/state_helpers.h:76:76: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\nIn file included from external/highwayhash/highwayhash/sip_hash.cc:15:0:\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:33:9: error: expected nested-name-specifier before 'Key'\n   using Key = HH_U64[2];\n         ^\nexternal/highwayhash/highwayhash/sip_hash.h:36:42: error: 'Key' does not name a type\n   explicit HH_INLINE SipHashStateT(const Key& key) {\n                                          ^\nexternal/highwayhash/highwayhash/sip_hash.h: In constructor 'highwayhash::SipHashStateT<kUpdateIters, kFinalizeIters>::SipHashStateT(const int&)':\nexternal/highwayhash/highwayhash/sip_hash.h:37:39: error: invalid types 'const int[int]' for array subscript\n     v0 = 0x736f6d6570736575ull ^ key[0];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:38:39: error: invalid types 'const int[int]' for array subscript\n     v1 = 0x646f72616e646f6dull ^ key[1];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:39:39: error: invalid types 'const int[int]' for array subscript\n     v2 = 0x6c7967656e657261ull ^ key[0];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:40:39: error: invalid types 'const int[int]' for array subscript\n     v3 = 0x7465646279746573ull ^ key[1];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:104:7: error: expected nested-name-specifier before 'SipHashState'\n using SipHashState = SipHashStateT<2, 4>;\n       ^\nexternal/highwayhash/highwayhash/sip_hash.h:105:7: error: expected nested-name-specifier before 'SipHash13State'\n using SipHash13State = SipHashStateT<1, 3>;\n       ^\nexternal/highwayhash/highwayhash/sip_hash.h:110:29: error: 'SipHashState' was not declared in this scope\n HH_INLINE void PaddedUpdate<SipHashState>(const HH_U64 size,\n                             ^\nexternal/highwayhash/highwayhash/sip_hash.h:113:43: error: 'SipHashState' has not been declared\n                                           SipHashState* state) {\n                                           ^\nexternal/highwayhash/highwayhash/sip_hash.h:110:16: error: template-id 'PaddedUpdate<<expression error> >' for 'void highwayhash::PaddedUpdate(highwayhash::HH_U64, const char*, highwayhash::HH_U64, int*)' does not match any template declaration\n HH_INLINE void PaddedUpdate<SipHashState>(const HH_U64 size,\n                ^\nexternal/highwayhash/highwayhash/sip_hash.h:122:29: error: 'SipHash13State' was not declared in this scope\n HH_INLINE void PaddedUpdate<SipHash13State>(const HH_U64 size,\n                             ^\nexternal/highwayhash/highwayhash/sip_hash.h:125:45: error: 'SipHash13State' has not been declared\n                                             SipHash13State* state) {\n                                             ^\nexternal/highwayhash/highwayhash/sip_hash.h:122:16: error: template-id 'PaddedUpdate<<expression error> >' for 'void highwayhash::PaddedUpdate(highwayhash::HH_U64, const char*, highwayhash::HH_U64, int*)' does not match any template declaration\n HH_INLINE void PaddedUpdate<SipHash13State>(const HH_U64 size,\n                ^\nexternal/highwayhash/highwayhash/sip_hash.h:146:39: error: 'SipHashState' does not name a type\n static HH_INLINE HH_U64 SipHash(const SipHashState::Key& key, const char* bytes,\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:146:56: error: expected unqualified-id before '&' token\n static HH_INLINE HH_U64 SipHash(const SipHashState::Key& key, const char* bytes,\n                                                        ^\nexternal/highwayhash/highwayhash/sip_hash.h:146:56: error: expected ')' before '&' token\nexternal/highwayhash/highwayhash/sip_hash.h:146:58: error: expected initializer before 'key'\n static HH_INLINE HH_U64 SipHash(const SipHashState::Key& key, const char* bytes,\n                                                          ^\nexternal/highwayhash/highwayhash/sip_hash.h:152:41: error: 'SipHash13State' does not name a type\n static HH_INLINE HH_U64 SipHash13(const SipHash13State::Key& key,\n                                         ^\nexternal/highwayhash/highwayhash/sip_hash.h:152:60: error: expected unqualified-id before '&' token\n static HH_INLINE HH_U64 SipHash13(const SipHash13State::Key& key,\n                                                            ^\nexternal/highwayhash/highwayhash/sip_hash.h:152:60: error: expected ')' before '&' token\nexternal/highwayhash/highwayhash/sip_hash.h:152:62: error: expected initializer before 'key'\n static HH_INLINE HH_U64 SipHash13(const SipHash13State::Key& key,\n                                                              ^\nexternal/highwayhash/highwayhash/sip_hash.cc:18:20: error: 'highwayhash::SipHash' has not been declared\n using highwayhash::SipHash;\n                    ^\nexternal/highwayhash/highwayhash/sip_hash.cc:19:20: error: 'highwayhash::SipHash13' has not been declared\n using highwayhash::SipHash13;\n                    ^\nexternal/highwayhash/highwayhash/sip_hash.cc:20:7: error: expected nested-name-specifier before 'Key'\n using Key = highwayhash::SipHashState::Key;\n       ^\nexternal/highwayhash/highwayhash/sip_hash.cc:21:7: error: expected nested-name-specifier before 'Key13'\n using Key13 = highwayhash::SipHash13State::Key;\n       ^\nexternal/highwayhash/highwayhash/sip_hash.cc: In function 'highwayhash::HH_U64 SipHashC(const HH_U64*, const char*, highwayhash::HH_U64)':\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]\n   return SipHash(*reinterpret_cast<const Key*>(key), bytes, size);\n                                          ^\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: expected '>' before 'Key'\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: expected '(' before 'Key'\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: 'Key' was not declared in this scope\nexternal/highwayhash/highwayhash/sip_hash.cc:26:46: error: expected primary-expression before '>' token\n   return SipHash(*reinterpret_cast<const Key*>(key), bytes, size);\n                                              ^\nexternal/highwayhash/highwayhash/sip_hash.cc: In function 'highwayhash::HH_U64 SipHash13C(const HH_U64*, const char*, highwayhash::HH_U64)':\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]\n   return SipHash13(*reinterpret_cast<const Key13*>(key), bytes, size);\n                                            ^\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: expected '>' before 'Key13'\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: expected '(' before 'Key13'\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: 'Key13' was not declared in this scope\nexternal/highwayhash/highwayhash/sip_hash.cc:30:50: error: expected primary-expression before '>' token\n   return SipHash13(*reinterpret_cast<const Key13*>(key), bytes, size);\n                                                  ^\nTarget //tensorflow:libtensorflow_cc.so failed to build\nINFO: Elapsed time: 1.812s, Critical Path: 0.14s", "body": "### Describe the problem\r\nWhen I use \r\n```\r\nbazel build -c opt //tensorflow:libtensorflow_cc.so --crosstool_top=//external:android/crosstool --cpu=armeabi-v7a --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --verbose_failures\r\n```\r\nto compile the full C++ API libtensorflow_cc.so for Android, but It can not work.\r\n\r\n\r\n### Source code / logs\r\n```\r\nC++ compilation of rule '@highwayhash//:sip_hash' failed (Exit 1): arm-linux-androideabi-gcc failed: error executing command \r\n  (exec env - \\\r\n    PATH=/home/mlin2/.cargo/bin:/home/mlin2/bin:/home/mlin2/anaconda2/bin:/usr/lib64/qt-3.3/bin:/home/mlin2/perl5/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/go/bin:/opt/gopath/bin:/home/mlin2/software/android-ndk-r12b/:/home/mlin2/.fzf/bin:/home/mlin2/.local/bin:/home/mlin2/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/home/mlin2/anaconda2/bin/python \\\r\n    PYTHON_LIB_PATH=/home/mlin2/anaconda2/lib/python2.7/site-packages \\\r\n    TF_NEED_CUDA=0 \\\r\n    TF_NEED_OPENCL=0 \\\r\n  external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables -no-canonical-prefixes -fno-canonical-system-headers '-march=armv7-a' '-mfpu=vfpv3-d16' '-mfloat-abi=softfp' -mthumb -Os -g -DNDEBUG -MD -MF bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/highwayhash/_objs/sip_hash/external/highwayhash/highwayhash/sip_hash.d '-frandom-seed=bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/highwayhash/_objs/sip_hash/external/highwayhash/highwayhash/sip_hash.o' -iquote external/highwayhash -iquote bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/highwayhash -iquote external/bazel_tools -iquote bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/bazel_tools -isystem external/bazel_tools/tools/cpp/gcc3 '--sysroot=external/androidndk/ndk/platforms/android-14/arch-arm' -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -c external/highwayhash/highwayhash/sip_hash.cc -o bazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/highwayhash/_objs/sip_hash/external/highwayhash/highwayhash/sip_hash.o).\r\nIn file included from external/highwayhash/highwayhash/arch_specific.h:23:0,\r\n                 from external/highwayhash/highwayhash/sip_hash.h:23,\r\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\r\nexternal/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::PaddedUpdate(highwayhash::HH_U64, const char*, highwayhash::HH_U64, State*)':\r\nexternal/highwayhash/highwayhash/compiler_specific.h:50:30: error: expected initializer before 'alignas'\r\n #define HH_ALIGNAS(multiple) alignas(multiple)  // C++11\r\n                              ^\r\nexternal/highwayhash/highwayhash/state_helpers.h:49:41: note: in expansion of macro 'HH_ALIGNAS'\r\n   char final_packet[State::kPacketSize] HH_ALIGNAS(32) = {0};\r\n                                         ^\r\nIn file included from external/highwayhash/highwayhash/sip_hash.h:25:0,\r\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\r\nexternal/highwayhash/highwayhash/state_helpers.h:64:10: error: 'final_packet' was not declared in this scope\r\n   memcpy(final_packet, remaining_bytes, remaining_size - remainder_mod4);\r\n          ^\r\nexternal/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::UpdateState(const char*, highwayhash::HH_U64, State*)':\r\nexternal/highwayhash/highwayhash/state_helpers.h:76:76: error: there are no arguments to 'static_assert' that depend on a template parameter, so a declaration of 'static_assert' must be available [-fpermissive]\r\n   static_assert((kPacketSize & (kPacketSize - 1)) == 0, \"Size must be 2^i.\");\r\n                                                                            ^\r\nexternal/highwayhash/highwayhash/state_helpers.h:76:76: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\r\nIn file included from external/highwayhash/highwayhash/sip_hash.cc:15:0:\r\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\r\nexternal/highwayhash/highwayhash/sip_hash.h:33:9: error: expected nested-name-specifier before 'Key'\r\n   using Key = HH_U64[2];\r\n         ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:36:42: error: 'Key' does not name a type\r\n   explicit HH_INLINE SipHashStateT(const Key& key) {\r\n                                          ^\r\nexternal/highwayhash/highwayhash/sip_hash.h: In constructor 'highwayhash::SipHashStateT<kUpdateIters, kFinalizeIters>::SipHashStateT(const int&)':\r\nexternal/highwayhash/highwayhash/sip_hash.h:37:39: error: invalid types 'const int[int]' for array subscript\r\n     v0 = 0x736f6d6570736575ull ^ key[0];\r\n                                       ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:38:39: error: invalid types 'const int[int]' for array subscript\r\n     v1 = 0x646f72616e646f6dull ^ key[1];\r\n                                       ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:39:39: error: invalid types 'const int[int]' for array subscript\r\n     v2 = 0x6c7967656e657261ull ^ key[0];\r\n                                       ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:40:39: error: invalid types 'const int[int]' for array subscript\r\n     v3 = 0x7465646279746573ull ^ key[1];\r\n                                       ^\r\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\r\nexternal/highwayhash/highwayhash/sip_hash.h:104:7: error: expected nested-name-specifier before 'SipHashState'\r\n using SipHashState = SipHashStateT<2, 4>;\r\n       ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:105:7: error: expected nested-name-specifier before 'SipHash13State'\r\n using SipHash13State = SipHashStateT<1, 3>;\r\n       ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:110:29: error: 'SipHashState' was not declared in this scope\r\n HH_INLINE void PaddedUpdate<SipHashState>(const HH_U64 size,\r\n                             ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:113:43: error: 'SipHashState' has not been declared\r\n                                           SipHashState* state) {\r\n                                           ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:110:16: error: template-id 'PaddedUpdate<<expression error> >' for 'void highwayhash::PaddedUpdate(highwayhash::HH_U64, const char*, highwayhash::HH_U64, int*)' does not match any template declaration\r\n HH_INLINE void PaddedUpdate<SipHashState>(const HH_U64 size,\r\n                ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:122:29: error: 'SipHash13State' was not declared in this scope\r\n HH_INLINE void PaddedUpdate<SipHash13State>(const HH_U64 size,\r\n                             ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:125:45: error: 'SipHash13State' has not been declared\r\n                                             SipHash13State* state) {\r\n                                             ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:122:16: error: template-id 'PaddedUpdate<<expression error> >' for 'void highwayhash::PaddedUpdate(highwayhash::HH_U64, const char*, highwayhash::HH_U64, int*)' does not match any template declaration\r\n HH_INLINE void PaddedUpdate<SipHash13State>(const HH_U64 size,\r\n                ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:146:39: error: 'SipHashState' does not name a type\r\n static HH_INLINE HH_U64 SipHash(const SipHashState::Key& key, const char* bytes,\r\n                                       ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:146:56: error: expected unqualified-id before '&' token\r\n static HH_INLINE HH_U64 SipHash(const SipHashState::Key& key, const char* bytes,\r\n                                                        ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:146:56: error: expected ')' before '&' token\r\nexternal/highwayhash/highwayhash/sip_hash.h:146:58: error: expected initializer before 'key'\r\n static HH_INLINE HH_U64 SipHash(const SipHashState::Key& key, const char* bytes,\r\n                                                          ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:152:41: error: 'SipHash13State' does not name a type\r\n static HH_INLINE HH_U64 SipHash13(const SipHash13State::Key& key,\r\n                                         ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:152:60: error: expected unqualified-id before '&' token\r\n static HH_INLINE HH_U64 SipHash13(const SipHash13State::Key& key,\r\n                                                            ^\r\nexternal/highwayhash/highwayhash/sip_hash.h:152:60: error: expected ')' before '&' token\r\nexternal/highwayhash/highwayhash/sip_hash.h:152:62: error: expected initializer before 'key'\r\n static HH_INLINE HH_U64 SipHash13(const SipHash13State::Key& key,\r\n                                                              ^\r\nexternal/highwayhash/highwayhash/sip_hash.cc:18:20: error: 'highwayhash::SipHash' has not been declared\r\n using highwayhash::SipHash;\r\n                    ^\r\nexternal/highwayhash/highwayhash/sip_hash.cc:19:20: error: 'highwayhash::SipHash13' has not been declared\r\n using highwayhash::SipHash13;\r\n                    ^\r\nexternal/highwayhash/highwayhash/sip_hash.cc:20:7: error: expected nested-name-specifier before 'Key'\r\n using Key = highwayhash::SipHashState::Key;\r\n       ^\r\nexternal/highwayhash/highwayhash/sip_hash.cc:21:7: error: expected nested-name-specifier before 'Key13'\r\n using Key13 = highwayhash::SipHash13State::Key;\r\n       ^\r\nexternal/highwayhash/highwayhash/sip_hash.cc: In function 'highwayhash::HH_U64 SipHashC(const HH_U64*, const char*, highwayhash::HH_U64)':\r\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]\r\n   return SipHash(*reinterpret_cast<const Key*>(key), bytes, size);\r\n                                          ^\r\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: expected '>' before 'Key'\r\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: expected '(' before 'Key'\r\nexternal/highwayhash/highwayhash/sip_hash.cc:26:42: error: 'Key' was not declared in this scope\r\nexternal/highwayhash/highwayhash/sip_hash.cc:26:46: error: expected primary-expression before '>' token\r\n   return SipHash(*reinterpret_cast<const Key*>(key), bytes, size);\r\n                                              ^\r\nexternal/highwayhash/highwayhash/sip_hash.cc: In function 'highwayhash::HH_U64 SipHash13C(const HH_U64*, const char*, highwayhash::HH_U64)':\r\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]\r\n   return SipHash13(*reinterpret_cast<const Key13*>(key), bytes, size);\r\n                                            ^\r\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: expected '>' before 'Key13'\r\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: expected '(' before 'Key13'\r\nexternal/highwayhash/highwayhash/sip_hash.cc:30:44: error: 'Key13' was not declared in this scope\r\nexternal/highwayhash/highwayhash/sip_hash.cc:30:50: error: expected primary-expression before '>' token\r\n   return SipHash13(*reinterpret_cast<const Key13*>(key), bytes, size);\r\n                                                  ^\r\nTarget //tensorflow:libtensorflow_cc.so failed to build\r\nINFO: Elapsed time: 1.812s, Critical Path: 0.14s\r\n```"}
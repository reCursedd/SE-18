{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22853", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22853/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22853/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22853/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22853", "id": 368402425, "node_id": "MDU6SXNzdWUzNjg0MDI0MjU=", "number": 22853, "title": "tf.keras.Model overrides 'self' behaviour with lists", "user": {"login": "jpatts", "id": 14956156, "node_id": "MDQ6VXNlcjE0OTU2MTU2", "avatar_url": "https://avatars0.githubusercontent.com/u/14956156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpatts", "html_url": "https://github.com/jpatts", "followers_url": "https://api.github.com/users/jpatts/followers", "following_url": "https://api.github.com/users/jpatts/following{/other_user}", "gists_url": "https://api.github.com/users/jpatts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpatts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpatts/subscriptions", "organizations_url": "https://api.github.com/users/jpatts/orgs", "repos_url": "https://api.github.com/users/jpatts/repos", "events_url": "https://api.github.com/users/jpatts/events{/privacy}", "received_events_url": "https://api.github.com/users/jpatts/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-10-09T21:18:52Z", "updated_at": "2018-10-16T20:02:29Z", "closed_at": "2018-10-15T16:33:22Z", "author_association": "NONE", "body_html": "<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 18.04.1 LTS</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>:<br>\nN/A</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\npip3 install tensorflow-gpu</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\nv1.11.0-0-gc19e29306c 1.11.0</li>\n<li><strong>Python version</strong>:<br>\nPython 3.6.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\nN/A</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\nN/A</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nV9.0.176</li>\n<li><strong>GPU model and memory</strong>:<br>\nGTX 1070, 6GB VRAM</li>\n<li><strong>Exact command to reproduce</strong>:<br>\npython3 codebelow.py</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I am not familiar with ListWrapper(), but it is being applied to all list variables created with self when my class inherits from tf.keras.Model. This is bad because it is causing an IndexError when I use it in certain functions, or even by just passing it through my Tensorflow model (I am using eager execution). I don't know whether this is a bug or if it is intended, but if this is supposed to happen, I think documentation should be added to explain this at <a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/models/Model\" rel=\"nofollow\">https://www.tensorflow.org/api_docs/python/tf/keras/models/Model</a>. I have included a smallest working example below.</p>\n<h3>Source code / logs</h3>\n<p>Code:</p>\n<pre><code>import tensorflow as tf\n\nclass my_class(tf.keras.Model):\n\n    def __init__(self):\n        super(my_class, self).__init__()\n\n        self.x = [0]\n        print(self.x)\n\nmodel = my_class()\n</code></pre>\n<p>Output:<br>\n<code>ListWrapper([0])</code></p>", "body_text": "Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 18.04.1 LTS\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nN/A\nTensorFlow installed from (source or binary):\npip3 install tensorflow-gpu\nTensorFlow version (use command below):\nv1.11.0-0-gc19e29306c 1.11.0\nPython version:\nPython 3.6.5\nBazel version (if compiling from source):\nN/A\nGCC/Compiler version (if compiling from source):\nN/A\nCUDA/cuDNN version:\nV9.0.176\nGPU model and memory:\nGTX 1070, 6GB VRAM\nExact command to reproduce:\npython3 codebelow.py\n\nDescribe the problem\nI am not familiar with ListWrapper(), but it is being applied to all list variables created with self when my class inherits from tf.keras.Model. This is bad because it is causing an IndexError when I use it in certain functions, or even by just passing it through my Tensorflow model (I am using eager execution). I don't know whether this is a bug or if it is intended, but if this is supposed to happen, I think documentation should be added to explain this at https://www.tensorflow.org/api_docs/python/tf/keras/models/Model. I have included a smallest working example below.\nSource code / logs\nCode:\nimport tensorflow as tf\n\nclass my_class(tf.keras.Model):\n\n    def __init__(self):\n        super(my_class, self).__init__()\n\n        self.x = [0]\n        print(self.x)\n\nmodel = my_class()\n\nOutput:\nListWrapper([0])", "body": "- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nUbuntu 18.04.1 LTS\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\nN/A\r\n- **TensorFlow installed from (source or binary)**:\r\npip3 install tensorflow-gpu\r\n- **TensorFlow version (use command below)**:\r\nv1.11.0-0-gc19e29306c 1.11.0\r\n- **Python version**:\r\nPython 3.6.5\r\n- **Bazel version (if compiling from source)**:\r\nN/A\r\n- **GCC/Compiler version (if compiling from source)**:\r\nN/A\r\n- **CUDA/cuDNN version**:\r\nV9.0.176\r\n- **GPU model and memory**:\r\nGTX 1070, 6GB VRAM\r\n- **Exact command to reproduce**:\r\npython3 codebelow.py\r\n\r\n### Describe the problem\r\nI am not familiar with ListWrapper(), but it is being applied to all list variables created with self when my class inherits from tf.keras.Model. This is bad because it is causing an IndexError when I use it in certain functions, or even by just passing it through my Tensorflow model (I am using eager execution). I don't know whether this is a bug or if it is intended, but if this is supposed to happen, I think documentation should be added to explain this at https://www.tensorflow.org/api_docs/python/tf/keras/models/Model. I have included a smallest working example below.\r\n\r\n### Source code / logs\r\nCode:\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\nclass my_class(tf.keras.Model):\r\n\r\n    def __init__(self):\r\n        super(my_class, self).__init__()\r\n\r\n        self.x = [0]\r\n        print(self.x)\r\n\r\nmodel = my_class()\r\n```\r\n\r\nOutput:\r\n`ListWrapper([0])`\r\n"}
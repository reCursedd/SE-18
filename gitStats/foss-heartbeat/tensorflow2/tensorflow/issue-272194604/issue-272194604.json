{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14363", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14363/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14363/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14363/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14363", "id": 272194604, "node_id": "MDU6SXNzdWUyNzIxOTQ2MDQ=", "number": 14363, "title": "Failed to synchronize the stop event", "user": {"login": "ljanyst", "id": 126975, "node_id": "MDQ6VXNlcjEyNjk3NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/126975?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ljanyst", "html_url": "https://github.com/ljanyst", "followers_url": "https://api.github.com/users/ljanyst/followers", "following_url": "https://api.github.com/users/ljanyst/following{/other_user}", "gists_url": "https://api.github.com/users/ljanyst/gists{/gist_id}", "starred_url": "https://api.github.com/users/ljanyst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ljanyst/subscriptions", "organizations_url": "https://api.github.com/users/ljanyst/orgs", "repos_url": "https://api.github.com/users/ljanyst/repos", "events_url": "https://api.github.com/users/ljanyst/events{/privacy}", "received_events_url": "https://api.github.com/users/ljanyst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2017-11-08T13:17:00Z", "updated_at": "2018-10-04T10:21:31Z", "closed_at": "2018-01-09T22:43:49Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>\n<p><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYes</p>\n</li>\n<li>\n<p><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nLinux Ubuntu 16.04</p>\n</li>\n<li>\n<p><strong>TensorFlow installed from (source or binary)</strong>:<br>\nsource</p>\n</li>\n<li>\n<p><strong>TensorFlow version (use command below)</strong>:<br>\nb'v1.4.0-0-gd752244' 1.4.0</p>\n</li>\n<li>\n<p><strong>Python version</strong>:<br>\n3.5.2</p>\n</li>\n<li>\n<p><strong>Bazel version (if compiling from source)</strong>:<br>\n0.7.0</p>\n</li>\n<li>\n<p><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\ngcc (Ubuntu 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609</p>\n</li>\n<li>\n<p><strong>CUDA/cuDNN version</strong>:<br>\n9.0/7.0</p>\n</li>\n<li>\n<p><strong>GPU model and memory</strong>:<br>\nTesla V100-SXM2-16GB</p>\n</li>\n<li>\n<p><strong>Exact command to reproduce</strong>:</p>\n</li>\n</ul>\n<pre><code>git clone https://github.com/ljanyst/image-segmentation-fcn.git\ncd image-segmentation-fcn                                       \nwget http://www.cvlibs.net/download.php?file=data_road.zip\nunzip data_road.zip                                     \n./train.py  --data-dir data_road\n</code></pre>\n<h3>Describe the problem</h3>\n<p>It seems like I am hitting some sort of a CUDA/cuDNN synchronization/race issue. Please see the snippet in the next section for the exact error message. The problem only happens with the KITTI dataset. The exact same TensorFlow code works fine for the Cityscapes dataset. Also, the problem only happens on Tesla V100. I tested the same exact software configuration on Tesla K80 and GeForce GTX1080 Ti as well, and things work fine.</p>\n<h3>Source code / logs</h3>\n<pre><code>2017-11-08 12:24:52.838039: E tensorflow/stream_executor/cuda/cuda_driver.cc:1080] failed to synchronize the stop event: CUDA_ERROR_ILLEGAL_ADDRESS\n2017-11-08 12:24:52.838090: E tensorflow/stream_executor/cuda/cuda_timer.cc:54] Internal: error destroying CUDA event in context 0x51f18f0: CUDA_ERROR_ILLEGAL_ADDRESS\n2017-11-08 12:24:52.838106: E tensorflow/stream_executor/cuda/cuda_timer.cc:59] Internal: error destroying CUDA event in context 0x51f18f0: CUDA_ERROR_ILLEGAL_ADDRESS\n2017-11-08 12:24:52.838137: F tensorflow/stream_executor/cuda/cuda_dnn.cc:3218] failed to set stream for cudnn handle: CUDNN_STATUS_MAPPING_ERROR\nzsh: abort (core dumped)  ./train.py --data-dir data_road\n</code></pre>", "body_text": "System information\n\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes\n\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nLinux Ubuntu 16.04\n\n\nTensorFlow installed from (source or binary):\nsource\n\n\nTensorFlow version (use command below):\nb'v1.4.0-0-gd752244' 1.4.0\n\n\nPython version:\n3.5.2\n\n\nBazel version (if compiling from source):\n0.7.0\n\n\nGCC/Compiler version (if compiling from source):\ngcc (Ubuntu 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609\n\n\nCUDA/cuDNN version:\n9.0/7.0\n\n\nGPU model and memory:\nTesla V100-SXM2-16GB\n\n\nExact command to reproduce:\n\n\ngit clone https://github.com/ljanyst/image-segmentation-fcn.git\ncd image-segmentation-fcn                                       \nwget http://www.cvlibs.net/download.php?file=data_road.zip\nunzip data_road.zip                                     \n./train.py  --data-dir data_road\n\nDescribe the problem\nIt seems like I am hitting some sort of a CUDA/cuDNN synchronization/race issue. Please see the snippet in the next section for the exact error message. The problem only happens with the KITTI dataset. The exact same TensorFlow code works fine for the Cityscapes dataset. Also, the problem only happens on Tesla V100. I tested the same exact software configuration on Tesla K80 and GeForce GTX1080 Ti as well, and things work fine.\nSource code / logs\n2017-11-08 12:24:52.838039: E tensorflow/stream_executor/cuda/cuda_driver.cc:1080] failed to synchronize the stop event: CUDA_ERROR_ILLEGAL_ADDRESS\n2017-11-08 12:24:52.838090: E tensorflow/stream_executor/cuda/cuda_timer.cc:54] Internal: error destroying CUDA event in context 0x51f18f0: CUDA_ERROR_ILLEGAL_ADDRESS\n2017-11-08 12:24:52.838106: E tensorflow/stream_executor/cuda/cuda_timer.cc:59] Internal: error destroying CUDA event in context 0x51f18f0: CUDA_ERROR_ILLEGAL_ADDRESS\n2017-11-08 12:24:52.838137: F tensorflow/stream_executor/cuda/cuda_dnn.cc:3218] failed to set stream for cudnn handle: CUDNN_STATUS_MAPPING_ERROR\nzsh: abort (core dumped)  ./train.py --data-dir data_road", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes\r\n\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nLinux Ubuntu 16.04\r\n\r\n- **TensorFlow installed from (source or binary)**:\r\nsource\r\n\r\n- **TensorFlow version (use command below)**:\r\nb'v1.4.0-0-gd752244' 1.4.0\r\n\r\n- **Python version**: \r\n3.5.2\r\n\r\n- **Bazel version (if compiling from source)**:\r\n0.7.0\r\n\r\n- **GCC/Compiler version (if compiling from source)**:\r\ngcc (Ubuntu 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609\r\n\r\n- **CUDA/cuDNN version**:\r\n9.0/7.0\r\n\r\n- **GPU model and memory**:\r\nTesla V100-SXM2-16GB\r\n\r\n- **Exact command to reproduce**:\r\n```\r\ngit clone https://github.com/ljanyst/image-segmentation-fcn.git\r\ncd image-segmentation-fcn                                       \r\nwget http://www.cvlibs.net/download.php?file=data_road.zip\r\nunzip data_road.zip                                     \r\n./train.py  --data-dir data_road\r\n````\r\n### Describe the problem\r\nIt seems like I am hitting some sort of a CUDA/cuDNN synchronization/race issue. Please see the snippet in the next section for the exact error message. The problem only happens with the KITTI dataset. The exact same TensorFlow code works fine for the Cityscapes dataset. Also, the problem only happens on Tesla V100. I tested the same exact software configuration on Tesla K80 and GeForce GTX1080 Ti as well, and things work fine.\r\n\r\n### Source code / logs\r\n```\r\n2017-11-08 12:24:52.838039: E tensorflow/stream_executor/cuda/cuda_driver.cc:1080] failed to synchronize the stop event: CUDA_ERROR_ILLEGAL_ADDRESS\r\n2017-11-08 12:24:52.838090: E tensorflow/stream_executor/cuda/cuda_timer.cc:54] Internal: error destroying CUDA event in context 0x51f18f0: CUDA_ERROR_ILLEGAL_ADDRESS\r\n2017-11-08 12:24:52.838106: E tensorflow/stream_executor/cuda/cuda_timer.cc:59] Internal: error destroying CUDA event in context 0x51f18f0: CUDA_ERROR_ILLEGAL_ADDRESS\r\n2017-11-08 12:24:52.838137: F tensorflow/stream_executor/cuda/cuda_dnn.cc:3218] failed to set stream for cudnn handle: CUDNN_STATUS_MAPPING_ERROR\r\nzsh: abort (core dumped)  ./train.py --data-dir data_road\r\n```\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/223224067", "html_url": "https://github.com/tensorflow/tensorflow/issues/2604#issuecomment-223224067", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2604", "id": 223224067, "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzIyNDA2Nw==", "user": {"login": "qingzew", "id": 3603171, "node_id": "MDQ6VXNlcjM2MDMxNzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3603171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qingzew", "html_url": "https://github.com/qingzew", "followers_url": "https://api.github.com/users/qingzew/followers", "following_url": "https://api.github.com/users/qingzew/following{/other_user}", "gists_url": "https://api.github.com/users/qingzew/gists{/gist_id}", "starred_url": "https://api.github.com/users/qingzew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qingzew/subscriptions", "organizations_url": "https://api.github.com/users/qingzew/orgs", "repos_url": "https://api.github.com/users/qingzew/repos", "events_url": "https://api.github.com/users/qingzew/events{/privacy}", "received_events_url": "https://api.github.com/users/qingzew/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-02T08:09:19Z", "updated_at": "2016-06-02T08:09:56Z", "author_association": "NONE", "body_html": "<p>sorry that it's my faulst. I think I know how to read tensorflow records</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">read_and_decode</span>(<span class=\"pl-smi\">filename_queue</span>, <span class=\"pl-smi\">image_shape</span>):\n        reader <span class=\"pl-k\">=</span> tf.TFRecordReader()\n        _, serialized_example <span class=\"pl-k\">=</span> reader.read(filename_queue)\n\n        features <span class=\"pl-k\">=</span> tf.parse_single_example(\n            serialized_example,\n            <span class=\"pl-v\">features</span> <span class=\"pl-k\">=</span> {\n                <span class=\"pl-s\"><span class=\"pl-pds\">'</span>height<span class=\"pl-pds\">'</span></span>: tf.FixedLenFeature([], tf.int64),\n                <span class=\"pl-s\"><span class=\"pl-pds\">'</span>width<span class=\"pl-pds\">'</span></span>: tf.FixedLenFeature([], tf.int64),\n                <span class=\"pl-s\"><span class=\"pl-pds\">'</span>channel<span class=\"pl-pds\">'</span></span>: tf.FixedLenFeature([], tf.int64),\n                <span class=\"pl-s\"><span class=\"pl-pds\">'</span>image<span class=\"pl-pds\">'</span></span>: tf.FixedLenFeature([], tf.string)\n            })\n\n        <span class=\"pl-c\"><span class=\"pl-c\">#</span> Convert from a scalar string tensor</span>\n        image <span class=\"pl-k\">=</span> tf.decode_raw(features[<span class=\"pl-s\"><span class=\"pl-pds\">'</span>image<span class=\"pl-pds\">'</span></span>],  tf.uint8)\n\n        <span class=\"pl-c\"><span class=\"pl-c\">#</span>set static shape, or you can't reshape a image to [h, w, c]</span>\n        image.set_shape(<span class=\"pl-v\">reduce</span>(<span class=\"pl-k\">lambda</span> <span class=\"pl-smi\">x</span>, <span class=\"pl-smi\">y</span> : x <span class=\"pl-k\">*</span> y,  image_shape))\n\n       <span class=\"pl-c\"><span class=\"pl-c\">#</span>reshape to [h, w, c]</span>\n        image <span class=\"pl-k\">=</span> tf.reshape(image,  image_shape)</pre></div>\n<p>although I write shape [height, width, channel] into records file, but it has nothing to do.</p>", "body_text": "sorry that it's my faulst. I think I know how to read tensorflow records\ndef read_and_decode(filename_queue, image_shape):\n        reader = tf.TFRecordReader()\n        _, serialized_example = reader.read(filename_queue)\n\n        features = tf.parse_single_example(\n            serialized_example,\n            features = {\n                'height': tf.FixedLenFeature([], tf.int64),\n                'width': tf.FixedLenFeature([], tf.int64),\n                'channel': tf.FixedLenFeature([], tf.int64),\n                'image': tf.FixedLenFeature([], tf.string)\n            })\n\n        # Convert from a scalar string tensor\n        image = tf.decode_raw(features['image'],  tf.uint8)\n\n        #set static shape, or you can't reshape a image to [h, w, c]\n        image.set_shape(reduce(lambda x, y : x * y,  image_shape))\n\n       #reshape to [h, w, c]\n        image = tf.reshape(image,  image_shape)\nalthough I write shape [height, width, channel] into records file, but it has nothing to do.", "body": "sorry that it's my faulst. I think I know how to read tensorflow records\n\n``` python\ndef read_and_decode(filename_queue, image_shape):\n        reader = tf.TFRecordReader()\n        _, serialized_example = reader.read(filename_queue)\n\n        features = tf.parse_single_example(\n            serialized_example,\n            features = {\n                'height': tf.FixedLenFeature([], tf.int64),\n                'width': tf.FixedLenFeature([], tf.int64),\n                'channel': tf.FixedLenFeature([], tf.int64),\n                'image': tf.FixedLenFeature([], tf.string)\n            })\n\n        # Convert from a scalar string tensor\n        image = tf.decode_raw(features['image'],  tf.uint8)\n\n        #set static shape, or you can't reshape a image to [h, w, c]\n        image.set_shape(reduce(lambda x, y : x * y,  image_shape))\n\n       #reshape to [h, w, c]\n        image = tf.reshape(image,  image_shape)\n```\n\nalthough I write shape [height, width, channel] into records file, but it has nothing to do.\n"}
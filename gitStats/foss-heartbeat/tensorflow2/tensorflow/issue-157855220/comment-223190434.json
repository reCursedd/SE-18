{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/223190434", "html_url": "https://github.com/tensorflow/tensorflow/issues/2604#issuecomment-223190434", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2604", "id": 223190434, "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzE5MDQzNA==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-02T04:06:02Z", "updated_at": "2016-06-02T04:06:02Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Ah, so the <code>tf.reshape()</code> works as intended, but you then use the result in a call to <code>tf.train.shuffle_batch()</code> and that fails? I'm afraid that this is expected behavior.</p>\n<p>As the <a href=\"https://www.tensorflow.org/versions/r0.8/api_docs/python/io_ops.html#shuffle_batch\" rel=\"nofollow\">docs for <code>tf.train.shuffle_batch()</code></a> say, you must either have fully-defined (i.e. static) shapes for all of the tensors you pass in the <code>tensor_list</code> argument (or you must specify explicit shapes for them). For TensorFlow to batch your images (or other tensors) together, they must all have the <em>same</em> shape. You cannot pass the result of a dynamic <code>tf.reshape()</code>, because each element might have a <em>different</em> shape, and TensorFlow cannot batch them.</p>\n<p>Your best option is to resize, crop, or pad the input images to a static shape before passing them to <code>tf.train.shuffle_batch()</code>. For example, the Inception <a href=\"https://github.com/tensorflow/models/blob/eec79382c4d4dcf04804d22a0e337d5b5b0e398f/inception/inception/image_processing.py#L256\">input pipeline</a> uses  <a href=\"https://www.tensorflow.org/versions/r0.8/api_docs/python/image.html#resize_images\" rel=\"nofollow\"><code>tf.image.resize_images()</code></a> to resize images to a standard size, so that they can be batched (using <code>tf.train.batch_join()</code> in this case).</p>", "body_text": "Ah, so the tf.reshape() works as intended, but you then use the result in a call to tf.train.shuffle_batch() and that fails? I'm afraid that this is expected behavior.\nAs the docs for tf.train.shuffle_batch() say, you must either have fully-defined (i.e. static) shapes for all of the tensors you pass in the tensor_list argument (or you must specify explicit shapes for them). For TensorFlow to batch your images (or other tensors) together, they must all have the same shape. You cannot pass the result of a dynamic tf.reshape(), because each element might have a different shape, and TensorFlow cannot batch them.\nYour best option is to resize, crop, or pad the input images to a static shape before passing them to tf.train.shuffle_batch(). For example, the Inception input pipeline uses  tf.image.resize_images() to resize images to a standard size, so that they can be batched (using tf.train.batch_join() in this case).", "body": "Ah, so the `tf.reshape()` works as intended, but you then use the result in a call to `tf.train.shuffle_batch()` and that fails? I'm afraid that this is expected behavior.\n\nAs the [docs for `tf.train.shuffle_batch()`](https://www.tensorflow.org/versions/r0.8/api_docs/python/io_ops.html#shuffle_batch) say, you must either have fully-defined (i.e. static) shapes for all of the tensors you pass in the `tensor_list` argument (or you must specify explicit shapes for them). For TensorFlow to batch your images (or other tensors) together, they must all have the _same_ shape. You cannot pass the result of a dynamic `tf.reshape()`, because each element might have a _different_ shape, and TensorFlow cannot batch them.\n\nYour best option is to resize, crop, or pad the input images to a static shape before passing them to `tf.train.shuffle_batch()`. For example, the Inception [input pipeline](https://github.com/tensorflow/models/blob/eec79382c4d4dcf04804d22a0e337d5b5b0e398f/inception/inception/image_processing.py#L256) uses  [`tf.image.resize_images()`](https://www.tensorflow.org/versions/r0.8/api_docs/python/image.html#resize_images) to resize images to a standard size, so that they can be batched (using `tf.train.batch_join()` in this case).\n"}
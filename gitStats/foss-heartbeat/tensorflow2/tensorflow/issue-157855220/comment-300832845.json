{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300832845", "html_url": "https://github.com/tensorflow/tensorflow/issues/2604#issuecomment-300832845", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2604", "id": 300832845, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDgzMjg0NQ==", "user": {"login": "JcmeLs", "id": 12932339, "node_id": "MDQ6VXNlcjEyOTMyMzM5", "avatar_url": "https://avatars2.githubusercontent.com/u/12932339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JcmeLs", "html_url": "https://github.com/JcmeLs", "followers_url": "https://api.github.com/users/JcmeLs/followers", "following_url": "https://api.github.com/users/JcmeLs/following{/other_user}", "gists_url": "https://api.github.com/users/JcmeLs/gists{/gist_id}", "starred_url": "https://api.github.com/users/JcmeLs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JcmeLs/subscriptions", "organizations_url": "https://api.github.com/users/JcmeLs/orgs", "repos_url": "https://api.github.com/users/JcmeLs/repos", "events_url": "https://api.github.com/users/JcmeLs/events{/privacy}", "received_events_url": "https://api.github.com/users/JcmeLs/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-11T15:50:22Z", "updated_at": "2017-05-11T15:50:22Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> I want to get image from tfrecord and put it in the batch.The code is:</p>\n<div class=\"highlight highlight-source-python\"><pre>        image<span class=\"pl-k\">=</span>tf.decode_raw(features[<span class=\"pl-s\"><span class=\"pl-pds\">'</span>image<span class=\"pl-pds\">'</span></span>],tf.uint8)\n        image<span class=\"pl-k\">=</span>tf.reshape(image,tf.stack([<span class=\"pl-c1\">64</span>,<span class=\"pl-c1\">256</span>,<span class=\"pl-c1\">3</span>]))\n        label<span class=\"pl-k\">=</span>tf.decode_raw(features[<span class=\"pl-s\"><span class=\"pl-pds\">'</span>label<span class=\"pl-pds\">'</span></span>],tf.uint8)\n        image_batch,label_batch<span class=\"pl-k\">=</span>tf.train.batch([image,label],<span class=\"pl-v\">batch_size</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">64</span>,<span class=\"pl-v\">num_threads</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">64</span>,<span class=\"pl-v\">capacity</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">2000</span>)</pre></div>\n<p>But,when I run this code.It will hava ValueError<code>: All shapes must be fully defined: [TensorShape([Dimension(64), Dimension(256), Dimension(3)]), TensorShape(None)]</code>.So I try <code>image.set_shape([64, 256, 3])</code> .But I get the new ValueError: <code>Shapes (?,) and (64, 256, 3) are not compatible</code></p>", "body_text": "@mrry I want to get image from tfrecord and put it in the batch.The code is:\n        image=tf.decode_raw(features['image'],tf.uint8)\n        image=tf.reshape(image,tf.stack([64,256,3]))\n        label=tf.decode_raw(features['label'],tf.uint8)\n        image_batch,label_batch=tf.train.batch([image,label],batch_size=64,num_threads=64,capacity=2000)\nBut,when I run this code.It will hava ValueError: All shapes must be fully defined: [TensorShape([Dimension(64), Dimension(256), Dimension(3)]), TensorShape(None)].So I try image.set_shape([64, 256, 3]) .But I get the new ValueError: Shapes (?,) and (64, 256, 3) are not compatible", "body": "@mrry I want to get image from tfrecord and put it in the batch.The code is:\r\n``` python\r\n        image=tf.decode_raw(features['image'],tf.uint8)\r\n        image=tf.reshape(image,tf.stack([64,256,3]))\r\n        label=tf.decode_raw(features['label'],tf.uint8)\r\n        image_batch,label_batch=tf.train.batch([image,label],batch_size=64,num_threads=64,capacity=2000)\r\n```\r\nBut,when I run this code.It will hava ValueError`: All shapes must be fully defined: [TensorShape([Dimension(64), Dimension(256), Dimension(3)]), TensorShape(None)]`.So I try `image.set_shape([64, 256, 3])` .But I get the new ValueError: `Shapes (?,) and (64, 256, 3) are not compatible`"}
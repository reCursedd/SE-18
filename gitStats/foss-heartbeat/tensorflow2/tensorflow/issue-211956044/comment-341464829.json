{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/341464829", "html_url": "https://github.com/tensorflow/tensorflow/issues/8102#issuecomment-341464829", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8102", "id": 341464829, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTQ2NDgyOQ==", "user": {"login": "csnemes2", "id": 22052140, "node_id": "MDQ6VXNlcjIyMDUyMTQw", "avatar_url": "https://avatars2.githubusercontent.com/u/22052140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csnemes2", "html_url": "https://github.com/csnemes2", "followers_url": "https://api.github.com/users/csnemes2/followers", "following_url": "https://api.github.com/users/csnemes2/following{/other_user}", "gists_url": "https://api.github.com/users/csnemes2/gists{/gist_id}", "starred_url": "https://api.github.com/users/csnemes2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csnemes2/subscriptions", "organizations_url": "https://api.github.com/users/csnemes2/orgs", "repos_url": "https://api.github.com/users/csnemes2/repos", "events_url": "https://api.github.com/users/csnemes2/events{/privacy}", "received_events_url": "https://api.github.com/users/csnemes2/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-02T15:46:28Z", "updated_at": "2017-11-02T16:04:41Z", "author_association": "NONE", "body_html": "<p>If you are in the unpooling business:</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13429694\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/teramototoya\">@teramototoya</a> what I did as a hack: with <a href=\"https://www.tensorflow.org/api_docs/python/tf/unique_with_counts\" rel=\"nofollow\">https://www.tensorflow.org/api_docs/python/tf/unique_with_counts</a> i counted the multiplication in the indices and i divided the tensor which was holding the values (aka tensor named 'updates' in the first comment)  with this counter<br>\nso when add() comes it will undo what the division made</p>\n<p>you can check this simple script: <a href=\"https://github.com/csnemes2/conv-net-viz/blob/master/ut_unpool.py\">https://github.com/csnemes2/conv-net-viz/blob/master/ut_unpool.py</a></p>\n<p>If not, so your problem is general, then you have to somehow flatten your indices, and then tf.unique, see this post:<br>\n<a href=\"https://stackoverflow.com/questions/44117430/how-to-use-tf-scatter-nd-without-accumulation\" rel=\"nofollow\">https://stackoverflow.com/questions/44117430/how-to-use-tf-scatter-nd-without-accumulation</a></p>", "body_text": "If you are in the unpooling business:\n@teramototoya what I did as a hack: with https://www.tensorflow.org/api_docs/python/tf/unique_with_counts i counted the multiplication in the indices and i divided the tensor which was holding the values (aka tensor named 'updates' in the first comment)  with this counter\nso when add() comes it will undo what the division made\nyou can check this simple script: https://github.com/csnemes2/conv-net-viz/blob/master/ut_unpool.py\nIf not, so your problem is general, then you have to somehow flatten your indices, and then tf.unique, see this post:\nhttps://stackoverflow.com/questions/44117430/how-to-use-tf-scatter-nd-without-accumulation", "body": "If you are in the unpooling business:\r\n\r\n@teramototoya what I did as a hack: with https://www.tensorflow.org/api_docs/python/tf/unique_with_counts i counted the multiplication in the indices and i divided the tensor which was holding the values (aka tensor named 'updates' in the first comment)  with this counter\r\nso when add() comes it will undo what the division made\r\n\r\nyou can check this simple script: https://github.com/csnemes2/conv-net-viz/blob/master/ut_unpool.py\r\n\r\nIf not, so your problem is general, then you have to somehow flatten your indices, and then tf.unique, see this post:\r\nhttps://stackoverflow.com/questions/44117430/how-to-use-tf-scatter-nd-without-accumulation"}
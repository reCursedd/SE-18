{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/315511643", "html_url": "https://github.com/tensorflow/tensorflow/issues/11495#issuecomment-315511643", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11495", "id": 315511643, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTUxMTY0Mw==", "user": {"login": "surajkamal", "id": 6723464, "node_id": "MDQ6VXNlcjY3MjM0NjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/6723464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/surajkamal", "html_url": "https://github.com/surajkamal", "followers_url": "https://api.github.com/users/surajkamal/followers", "following_url": "https://api.github.com/users/surajkamal/following{/other_user}", "gists_url": "https://api.github.com/users/surajkamal/gists{/gist_id}", "starred_url": "https://api.github.com/users/surajkamal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/surajkamal/subscriptions", "organizations_url": "https://api.github.com/users/surajkamal/orgs", "repos_url": "https://api.github.com/users/surajkamal/repos", "events_url": "https://api.github.com/users/surajkamal/events{/privacy}", "received_events_url": "https://api.github.com/users/surajkamal/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-15T05:39:47Z", "updated_at": "2017-07-15T07:34:24Z", "author_association": "NONE", "body_html": "<p>Thanks for the response. Yes I am creating a <code>tf.train.Server</code> from the program. As exactly <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> mentioned the  <code>config.gpu_options.visible_device_list</code> has been passed into a<code> tf.Session</code>, where it is mostly expected and definitely it is ignored by the session. I will try passing the option to server initialiser and let you know.</p>\n<pre><code>    config = tf.ConfigProto(log_device_placement=False, allow_soft_placement=True)\n    config.gpu_options.per_process_gpu_memory_fraction = 0.4\n    config.gpu_options.allow_growth=True\n    config.gpu_options.visible_device_list = str(gpu_index)\n    server = tf.train.Server(spec, job_name=job_name, task_index=task_index, config=config)\n</code></pre>\n<p>Yes, it is working, I should add the GPU RAM fraction specification is also working while it is passed to the server initialiser nicely (what are the <code>tf.ConfigProto</code> options that the <code>tf.Session</code> takes in really?).  However this is not clear from the current documentation, in fact not in many other discussions on the same matter(consider <a href=\"https://github.com/tensorflow/tensorflow/issues/1888\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1888/hovercard\">this</a> feature request). Hope this would help other people trying to get the same functionality with Tensorflow without depending on other complicated resource scheduling schemes. Great work, thank you.</p>", "body_text": "Thanks for the response. Yes I am creating a tf.train.Server from the program. As exactly @mrry mentioned the  config.gpu_options.visible_device_list has been passed into a tf.Session, where it is mostly expected and definitely it is ignored by the session. I will try passing the option to server initialiser and let you know.\n    config = tf.ConfigProto(log_device_placement=False, allow_soft_placement=True)\n    config.gpu_options.per_process_gpu_memory_fraction = 0.4\n    config.gpu_options.allow_growth=True\n    config.gpu_options.visible_device_list = str(gpu_index)\n    server = tf.train.Server(spec, job_name=job_name, task_index=task_index, config=config)\n\nYes, it is working, I should add the GPU RAM fraction specification is also working while it is passed to the server initialiser nicely (what are the tf.ConfigProto options that the tf.Session takes in really?).  However this is not clear from the current documentation, in fact not in many other discussions on the same matter(consider this feature request). Hope this would help other people trying to get the same functionality with Tensorflow without depending on other complicated resource scheduling schemes. Great work, thank you.", "body": "Thanks for the response. Yes I am creating a `tf.train.Server` from the program. As exactly @mrry mentioned the  `config.gpu_options.visible_device_list` has been passed into a` tf.Session`, where it is mostly expected and definitely it is ignored by the session. I will try passing the option to server initialiser and let you know.\r\n```\r\n    config = tf.ConfigProto(log_device_placement=False, allow_soft_placement=True)\r\n    config.gpu_options.per_process_gpu_memory_fraction = 0.4\r\n    config.gpu_options.allow_growth=True\r\n    config.gpu_options.visible_device_list = str(gpu_index)\r\n    server = tf.train.Server(spec, job_name=job_name, task_index=task_index, config=config)\r\n```\r\n\r\nYes, it is working, I should add the GPU RAM fraction specification is also working while it is passed to the server initialiser nicely (what are the `tf.ConfigProto` options that the `tf.Session` takes in really?).  However this is not clear from the current documentation, in fact not in many other discussions on the same matter(consider [this](https://github.com/tensorflow/tensorflow/issues/1888) feature request). Hope this would help other people trying to get the same functionality with Tensorflow without depending on other complicated resource scheduling schemes. Great work, thank you."}
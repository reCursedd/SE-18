{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/320690398", "html_url": "https://github.com/tensorflow/tensorflow/pull/11581#issuecomment-320690398", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11581", "id": 320690398, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDY5MDM5OA==", "user": {"login": "ry", "id": 80, "node_id": "MDQ6VXNlcjgw", "avatar_url": "https://avatars1.githubusercontent.com/u/80?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ry", "html_url": "https://github.com/ry", "followers_url": "https://api.github.com/users/ry/followers", "following_url": "https://api.github.com/users/ry/following{/other_user}", "gists_url": "https://api.github.com/users/ry/gists{/gist_id}", "starred_url": "https://api.github.com/users/ry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ry/subscriptions", "organizations_url": "https://api.github.com/users/ry/orgs", "repos_url": "https://api.github.com/users/ry/repos", "events_url": "https://api.github.com/users/ry/events{/privacy}", "received_events_url": "https://api.github.com/users/ry/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-07T15:08:17Z", "updated_at": "2017-08-07T15:59:05Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=29789552\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/abenmao\">@abenmao</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=407784\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yangjunpro\">@yangjunpro</a> Experiment code likely won't help me, as I need to interface with our internal systems to test. I will hopefully have some results in a few days.</p>\n<p>Regarding the <code>model_average_device_setter</code>: Is it possible to share more code with the existing implementation? Or just use the <code>ps_strategy</code> and <code>ps_ops</code> arguments of the existing?</p>\n<p>Regarding the tests in <code>tensorflow/contrib/model_average/tests/simple</code>: Can you restructure the tests to use <code>tensorflow.python.platform.test</code>? Maybe follow some of this code: <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/sync_replicas_optimizer_test.py\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/sync_replicas_optimizer_test.py</a><br>\nor <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/opt/python/training/delay_compensated_gradient_descent_test.py\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/opt/python/training/delay_compensated_gradient_descent_test.py</a></p>\n<p>Regarding the location of this code: Since this is an optimizer, it might make sense to move this to <code>tensorflow/tensorflow/contrib/opt/python/training</code>. What do you think?</p>", "body_text": "@abenmao @yangjunpro Experiment code likely won't help me, as I need to interface with our internal systems to test. I will hopefully have some results in a few days.\nRegarding the model_average_device_setter: Is it possible to share more code with the existing implementation? Or just use the ps_strategy and ps_ops arguments of the existing?\nRegarding the tests in tensorflow/contrib/model_average/tests/simple: Can you restructure the tests to use tensorflow.python.platform.test? Maybe follow some of this code: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/sync_replicas_optimizer_test.py\nor https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/opt/python/training/delay_compensated_gradient_descent_test.py\nRegarding the location of this code: Since this is an optimizer, it might make sense to move this to tensorflow/tensorflow/contrib/opt/python/training. What do you think?", "body": "@abenmao @yangjunpro Experiment code likely won't help me, as I need to interface with our internal systems to test. I will hopefully have some results in a few days.\r\n\r\nRegarding the `model_average_device_setter`: Is it possible to share more code with the existing implementation? Or just use the `ps_strategy` and `ps_ops` arguments of the existing?\r\n\r\nRegarding the tests in `tensorflow/contrib/model_average/tests/simple`: Can you restructure the tests to use `tensorflow.python.platform.test`? Maybe follow some of this code: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/sync_replicas_optimizer_test.py \r\n or https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/opt/python/training/delay_compensated_gradient_descent_test.py \r\n\r\nRegarding the location of this code: Since this is an optimizer, it might make sense to move this to `tensorflow/tensorflow/contrib/opt/python/training`. What do you think?"}
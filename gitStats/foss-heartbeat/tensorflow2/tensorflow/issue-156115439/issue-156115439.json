{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2457", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2457/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2457/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2457/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2457", "id": 156115439, "node_id": "MDU6SXNzdWUxNTYxMTU0Mzk=", "number": 2457, "title": "external/png_archive/BUILD:23:1: Executing genrule @png_archive//:configure failed: bash failed", "user": {"login": "ElfinFairy", "id": 15977883, "node_id": "MDQ6VXNlcjE1OTc3ODgz", "avatar_url": "https://avatars1.githubusercontent.com/u/15977883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ElfinFairy", "html_url": "https://github.com/ElfinFairy", "followers_url": "https://api.github.com/users/ElfinFairy/followers", "following_url": "https://api.github.com/users/ElfinFairy/following{/other_user}", "gists_url": "https://api.github.com/users/ElfinFairy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ElfinFairy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ElfinFairy/subscriptions", "organizations_url": "https://api.github.com/users/ElfinFairy/orgs", "repos_url": "https://api.github.com/users/ElfinFairy/repos", "events_url": "https://api.github.com/users/ElfinFairy/events{/privacy}", "received_events_url": "https://api.github.com/users/ElfinFairy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2016-05-21T18:31:49Z", "updated_at": "2016-06-06T20:52:12Z", "closed_at": "2016-06-06T20:52:12Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System:<br>\nRed Hat 4.8.3-9</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):<br>\n/usr/local/cuda-7.5/<br>\ncudnn-7.5-linux-x64-v5.0-ga-tgz<br>\nlibcudnn.so.5</p>\n<p>If installed from sources, provide the commit hash:</p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Getting bazel from <a href=\"https://github.com/bazelbuild/bazel/archive/0.2.3.tar.gz\">https://github.com/bazelbuild/bazel/archive/0.2.3.tar.gz</a></li>\n<li>On 18, May , I Get tensor flow via git clone --recurse-submodules <a href=\"https://github.com/tensorflow/tensorflow\">https://github.com/tensorflow/tensorflow</a></li>\n<li>Running command /home/admin/bazel/bazel_source/bazel-0.2.3/output/bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer --verbose_failures, I got error<br>\nexternal/png_archive/BUILD:23:1: Executing genrule @png_archive//:configure failed</li>\n</ol>\n<h3>What have you tried?</h3>\n<ol>\n<li>After I modified external/png_archive/BUILD:30 by adding CPPFLAGS=\"-I /usr/local/zlib/usr /include\"; LDFLAGS=\"-L /usr/local/zlib/lib64\" in cmd, it would get the error \"external/png_archive/BUILD:33:1: C++ compilation of rule '@png_archive//:png' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command<br>\n(cd /home/admin/.cache/bazel/<em>bazel_admin/b33b4c76bea799d489291f7bcf5433ae/tensorflow &amp;&amp; <br>\n   exec env - <br>\nPATH=/sbin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/X11R6/bin:/home/zy80232/.local/bin:/home/zy80232/bin <br>\n   third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -g0 -iquote external/png_archive -iquote bazel-out/host/genfiles/external/png_archive -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -isystem external/png_archive/libpng-1.2.53 -isystem bazel-out/host/genfiles/external/png_archive/libpng-1.2.53 -isystem external/bazel_tools/tools/cpp/gcc3 -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE</em>_=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers '-frandom-seed=bazel-out/host/bin/external/png_archive/_objs/png/external/png_archive/libpng-1.2.53/pngwutil.o' -MD -MF bazel-out/host/bin/external/png_archive/_objs/png/external/png_archive/libpng-1.2.53/pngwutil.d -c external/png_archive/libpng-1.2.53/pngwutil.c -o bazel-out/host/bin/external/png_archive/_objs/png/external/png_archive/libpng-1.2.53/pngwutil.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.<br>\nIn file included from external/png_archive/libpng-1.2.53/pngwutil.c:16:0:<br>\nexternal/png_archive/libpng-1.2.53/png.h:548:18: fatal error: zlib.h\"</li>\n<li>Then I added one extra line in png_archive/BUILD:38 by copts = [\"-Iexternal/zlib/usr/include\"], and I get the error  \"/home/admin/.cache/bazel/_bazel_admin/b33b4c76bea799d489291f7bcf5433ae/external/png_archive/BUILD:33:1: undeclared inclusion(s) in rule '@png_archive//:png':<br>\nthis rule is missing dependency declarations for the following files included by 'external/png_archive/libpng-1.2.53/pngwio.c':<br>\n'external/zlib/usr/include/zlib.h'<br>\n'external/zlib/usr/include/zconf.h'\"</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment).</p>", "body_text": "Environment info\nOperating System:\nRed Hat 4.8.3-9\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n/usr/local/cuda-7.5/\ncudnn-7.5-linux-x64-v5.0-ga-tgz\nlibcudnn.so.5\nIf installed from sources, provide the commit hash:\nSteps to reproduce\n\nGetting bazel from https://github.com/bazelbuild/bazel/archive/0.2.3.tar.gz\nOn 18, May , I Get tensor flow via git clone --recurse-submodules https://github.com/tensorflow/tensorflow\nRunning command /home/admin/bazel/bazel_source/bazel-0.2.3/output/bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer --verbose_failures, I got error\nexternal/png_archive/BUILD:23:1: Executing genrule @png_archive//:configure failed\n\nWhat have you tried?\n\nAfter I modified external/png_archive/BUILD:30 by adding CPPFLAGS=\"-I /usr/local/zlib/usr /include\"; LDFLAGS=\"-L /usr/local/zlib/lib64\" in cmd, it would get the error \"external/png_archive/BUILD:33:1: C++ compilation of rule '@png_archive//:png' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command\n(cd /home/admin/.cache/bazel/bazel_admin/b33b4c76bea799d489291f7bcf5433ae/tensorflow && \n   exec env - \nPATH=/sbin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/X11R6/bin:/home/zy80232/.local/bin:/home/zy80232/bin \n   third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -g0 -iquote external/png_archive -iquote bazel-out/host/genfiles/external/png_archive -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -isystem external/png_archive/libpng-1.2.53 -isystem bazel-out/host/genfiles/external/png_archive/libpng-1.2.53 -isystem external/bazel_tools/tools/cpp/gcc3 -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE_=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers '-frandom-seed=bazel-out/host/bin/external/png_archive/_objs/png/external/png_archive/libpng-1.2.53/pngwutil.o' -MD -MF bazel-out/host/bin/external/png_archive/_objs/png/external/png_archive/libpng-1.2.53/pngwutil.d -c external/png_archive/libpng-1.2.53/pngwutil.c -o bazel-out/host/bin/external/png_archive/_objs/png/external/png_archive/libpng-1.2.53/pngwutil.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nIn file included from external/png_archive/libpng-1.2.53/pngwutil.c:16:0:\nexternal/png_archive/libpng-1.2.53/png.h:548:18: fatal error: zlib.h\"\nThen I added one extra line in png_archive/BUILD:38 by copts = [\"-Iexternal/zlib/usr/include\"], and I get the error  \"/home/admin/.cache/bazel/_bazel_admin/b33b4c76bea799d489291f7bcf5433ae/external/png_archive/BUILD:33:1: undeclared inclusion(s) in rule '@png_archive//:png':\nthis rule is missing dependency declarations for the following files included by 'external/png_archive/libpng-1.2.53/pngwio.c':\n'external/zlib/usr/include/zlib.h'\n'external/zlib/usr/include/zconf.h'\"\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment).", "body": "### Environment info\n\nOperating System:\nRed Hat 4.8.3-9\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n/usr/local/cuda-7.5/ \ncudnn-7.5-linux-x64-v5.0-ga-tgz\nlibcudnn.so.5\n\nIf installed from sources, provide the commit hash:\n### Steps to reproduce\n1. Getting bazel from https://github.com/bazelbuild/bazel/archive/0.2.3.tar.gz\n2. On 18, May , I Get tensor flow via git clone --recurse-submodules https://github.com/tensorflow/tensorflow\n3. Running command /home/admin/bazel/bazel_source/bazel-0.2.3/output/bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer --verbose_failures, I got error\n   external/png_archive/BUILD:23:1: Executing genrule @png_archive//:configure failed\n### What have you tried?\n1.  After I modified external/png_archive/BUILD:30 by adding CPPFLAGS=\\\"-I /usr/local/zlib/usr /include\\\"; LDFLAGS=\\\"-L /usr/local/zlib/lib64\\\" in cmd, it would get the error \"external/png_archive/BUILD:33:1: C++ compilation of rule '@png_archive//:png' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command \n   (cd /home/admin/.cache/bazel/_bazel_admin/b33b4c76bea799d489291f7bcf5433ae/tensorflow && \\\n   exec env - \\\n     PATH=/sbin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/X11R6/bin:/home/zy80232/.local/bin:/home/zy80232/bin \\\n   third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -g0 -iquote external/png_archive -iquote bazel-out/host/genfiles/external/png_archive -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -isystem external/png_archive/libpng-1.2.53 -isystem bazel-out/host/genfiles/external/png_archive/libpng-1.2.53 -isystem external/bazel_tools/tools/cpp/gcc3 -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers '-frandom-seed=bazel-out/host/bin/external/png_archive/_objs/png/external/png_archive/libpng-1.2.53/pngwutil.o' -MD -MF bazel-out/host/bin/external/png_archive/_objs/png/external/png_archive/libpng-1.2.53/pngwutil.d -c external/png_archive/libpng-1.2.53/pngwutil.c -o bazel-out/host/bin/external/png_archive/_objs/png/external/png_archive/libpng-1.2.53/pngwutil.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n   In file included from external/png_archive/libpng-1.2.53/pngwutil.c:16:0:\n   external/png_archive/libpng-1.2.53/png.h:548:18: fatal error: zlib.h\"\n2. Then I added one extra line in png_archive/BUILD:38 by copts = [\"-Iexternal/zlib/usr/include\"], and I get the error  \"/home/admin/.cache/bazel/_bazel_admin/b33b4c76bea799d489291f7bcf5433ae/external/png_archive/BUILD:33:1: undeclared inclusion(s) in rule '@png_archive//:png':\n   this rule is missing dependency declarations for the following files included by 'external/png_archive/libpng-1.2.53/pngwio.c':\n   'external/zlib/usr/include/zlib.h'\n   'external/zlib/usr/include/zconf.h'\"\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/306363396", "html_url": "https://github.com/tensorflow/tensorflow/issues/10435#issuecomment-306363396", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10435", "id": 306363396, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjM2MzM5Ng==", "user": {"login": "JcmeLs", "id": 12932339, "node_id": "MDQ6VXNlcjEyOTMyMzM5", "avatar_url": "https://avatars2.githubusercontent.com/u/12932339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JcmeLs", "html_url": "https://github.com/JcmeLs", "followers_url": "https://api.github.com/users/JcmeLs/followers", "following_url": "https://api.github.com/users/JcmeLs/following{/other_user}", "gists_url": "https://api.github.com/users/JcmeLs/gists{/gist_id}", "starred_url": "https://api.github.com/users/JcmeLs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JcmeLs/subscriptions", "organizations_url": "https://api.github.com/users/JcmeLs/orgs", "repos_url": "https://api.github.com/users/JcmeLs/repos", "events_url": "https://api.github.com/users/JcmeLs/events{/privacy}", "received_events_url": "https://api.github.com/users/JcmeLs/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-06T02:24:35Z", "updated_at": "2017-06-06T02:24:35Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7946809\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gunan\">@gunan</a> Thanks for your reply!But it does not seem to be this problem.<br>\nI did the following:</p>\n<ol>\n<li>Download file to some safe folder from url:\"<a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>\"</li>\n<li>cd to folder</li>\n<li>python -m SimpleHTTPServer 8000</li>\n<li>Change tensorflow/tensorflow/workspace.bzl from url = \"<a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>\" to url = \"<a href=\"http://localhost:8000/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://localhost:8000/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>\"</li>\n</ol>\n<p>Doing this can make sure that protobuf can be downloaded.But it also have this problem.</p>\n<p>Log:</p>\n<pre><code>D:\\tensorflow-r1.2&gt;bazel build tensorflow/python/tools:optimize_for_inference\n\ufffd[32mINFO: \ufffd[0mLoading complete.  Analyzing...\n\ufffd[1A\ufffd[K\ufffd[31m\ufffd[1mERROR: \ufffd[0mD:/tensorflow-r1.2/tensorflow/python/tools/BUILD:133:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such packa\nge '@protobuf//': Traceback (most recent call last):\n        File \"D:/tensorflow-r1.2/tensorflow/workspace.bzl\", line 117\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\n        File \"D:/tensorflow-r1.2/tensorflow/workspace.bzl\", line 108, in _apply_patch\n                _execute_and_check_ret_code(repo_ctx, cmd)\n        File \"D:/tensorflow-r1.2/tensorflow/workspace.bzl\", line 92, in _execute_and_check_ret_code\n                fail(\"Non-zero return code({1}) when ..., &lt;2 more arguments&gt;))\nNon-zero return code(3) when executing 'c:/tools/msys64/usr/bin/bash.exe -c patch -p1 -d C:/users/liba/appdata/local/temp/_bazel_liba/mffpt2ks/external/protobuf -i D:/tensorflow-r1.2/third_party/proto\nbuf/add_noinlines.patch':\nStdout: patching file src/google/protobuf/compiler/cpp/cpp_file.cc\n\nStderr: Assertion failed: hunk, file ../patch-2.5.9-src/patch.c, line 354\n\nThis application has requested the Runtime to terminate it in an unusual way.\nPlease contact the application's support team for more information.\n and referenced by '//tensorflow/python/tools:optimize_for_inference'.\n\ufffd[31m\ufffd[1mERROR: \ufffd[0mAnalysis of target '//tensorflow/python/tools:optimize_for_inference' failed; build aborted.\n\ufffd[32mINFO: \ufffd[0mElapsed time: 9.866s\n</code></pre>", "body_text": "@gunan Thanks for your reply!But it does not seem to be this problem.\nI did the following:\n\nDownload file to some safe folder from url:\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\"\ncd to folder\npython -m SimpleHTTPServer 8000\nChange tensorflow/tensorflow/workspace.bzl from url = \"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" to url = \"http://localhost:8000/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\"\n\nDoing this can make sure that protobuf can be downloaded.But it also have this problem.\nLog:\nD:\\tensorflow-r1.2>bazel build tensorflow/python/tools:optimize_for_inference\n\ufffd[32mINFO: \ufffd[0mLoading complete.  Analyzing...\n\ufffd[1A\ufffd[K\ufffd[31m\ufffd[1mERROR: \ufffd[0mD:/tensorflow-r1.2/tensorflow/python/tools/BUILD:133:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such packa\nge '@protobuf//': Traceback (most recent call last):\n        File \"D:/tensorflow-r1.2/tensorflow/workspace.bzl\", line 117\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\n        File \"D:/tensorflow-r1.2/tensorflow/workspace.bzl\", line 108, in _apply_patch\n                _execute_and_check_ret_code(repo_ctx, cmd)\n        File \"D:/tensorflow-r1.2/tensorflow/workspace.bzl\", line 92, in _execute_and_check_ret_code\n                fail(\"Non-zero return code({1}) when ..., <2 more arguments>))\nNon-zero return code(3) when executing 'c:/tools/msys64/usr/bin/bash.exe -c patch -p1 -d C:/users/liba/appdata/local/temp/_bazel_liba/mffpt2ks/external/protobuf -i D:/tensorflow-r1.2/third_party/proto\nbuf/add_noinlines.patch':\nStdout: patching file src/google/protobuf/compiler/cpp/cpp_file.cc\n\nStderr: Assertion failed: hunk, file ../patch-2.5.9-src/patch.c, line 354\n\nThis application has requested the Runtime to terminate it in an unusual way.\nPlease contact the application's support team for more information.\n and referenced by '//tensorflow/python/tools:optimize_for_inference'.\n\ufffd[31m\ufffd[1mERROR: \ufffd[0mAnalysis of target '//tensorflow/python/tools:optimize_for_inference' failed; build aborted.\n\ufffd[32mINFO: \ufffd[0mElapsed time: 9.866s", "body": "@gunan Thanks for your reply!But it does not seem to be this problem.\r\n I did the following:\r\n1. Download file to some safe folder from url:\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\"\r\n2. cd to folder\r\n3. python -m SimpleHTTPServer 8000\r\n4. Change tensorflow/tensorflow/workspace.bzl from url = \"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" to url = \"http://localhost:8000/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\"\r\n\r\nDoing this can make sure that protobuf can be downloaded.But it also have this problem.\r\n\r\nLog:\r\n``` \r\nD:\\tensorflow-r1.2>bazel build tensorflow/python/tools:optimize_for_inference\r\n\u001b[32mINFO: \u001b[0mLoading complete.  Analyzing...\r\n\u001b[1A\u001b[K\u001b[31m\u001b[1mERROR: \u001b[0mD:/tensorflow-r1.2/tensorflow/python/tools/BUILD:133:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such packa\r\nge '@protobuf//': Traceback (most recent call last):\r\n        File \"D:/tensorflow-r1.2/tensorflow/workspace.bzl\", line 117\r\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\r\n        File \"D:/tensorflow-r1.2/tensorflow/workspace.bzl\", line 108, in _apply_patch\r\n                _execute_and_check_ret_code(repo_ctx, cmd)\r\n        File \"D:/tensorflow-r1.2/tensorflow/workspace.bzl\", line 92, in _execute_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ..., <2 more arguments>))\r\nNon-zero return code(3) when executing 'c:/tools/msys64/usr/bin/bash.exe -c patch -p1 -d C:/users/liba/appdata/local/temp/_bazel_liba/mffpt2ks/external/protobuf -i D:/tensorflow-r1.2/third_party/proto\r\nbuf/add_noinlines.patch':\r\nStdout: patching file src/google/protobuf/compiler/cpp/cpp_file.cc\r\n\r\nStderr: Assertion failed: hunk, file ../patch-2.5.9-src/patch.c, line 354\r\n\r\nThis application has requested the Runtime to terminate it in an unusual way.\r\nPlease contact the application's support team for more information.\r\n and referenced by '//tensorflow/python/tools:optimize_for_inference'.\r\n\u001b[31m\u001b[1mERROR: \u001b[0mAnalysis of target '//tensorflow/python/tools:optimize_for_inference' failed; build aborted.\r\n\u001b[32mINFO: \u001b[0mElapsed time: 9.866s\r\n```"}
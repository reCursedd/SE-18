{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4396", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4396/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4396/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4396/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4396", "id": 177211740, "node_id": "MDU6SXNzdWUxNzcyMTE3NDA=", "number": 4396, "title": "Problem in using docker tensorflow installation for GPU", "user": {"login": "daemonslayer", "id": 10099126, "node_id": "MDQ6VXNlcjEwMDk5MTI2", "avatar_url": "https://avatars0.githubusercontent.com/u/10099126?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daemonslayer", "html_url": "https://github.com/daemonslayer", "followers_url": "https://api.github.com/users/daemonslayer/followers", "following_url": "https://api.github.com/users/daemonslayer/following{/other_user}", "gists_url": "https://api.github.com/users/daemonslayer/gists{/gist_id}", "starred_url": "https://api.github.com/users/daemonslayer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daemonslayer/subscriptions", "organizations_url": "https://api.github.com/users/daemonslayer/orgs", "repos_url": "https://api.github.com/users/daemonslayer/repos", "events_url": "https://api.github.com/users/daemonslayer/events{/privacy}", "received_events_url": "https://api.github.com/users/daemonslayer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2016-09-15T15:38:54Z", "updated_at": "2016-10-19T08:18:54Z", "closed_at": "2016-10-19T08:18:54Z", "author_association": "NONE", "body_html": "<p>Operating System: Ubuntu 16.04<br>\nI installed the gpu-docker tensorflow using these commands:</p>\n<pre><code>wget -P /tmp https://github.com/NVIDIA/nvidia-docker/releases/download/v1.0.0-rc.3/nvidia-docker_1.0.0.rc.3-1_amd64.deb\nsudo dpkg -i /tmp/nvidia-docker*.deb &amp;&amp; rm /tmp/nvidia-docker*.deb\nnvidia-docker run --rm nvidia/cuda nvidia-smi\n</code></pre>\n<p>Now, I have cuda installed but when I try to run code with gpu support, I get this:</p>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:99] Couldn't open CUDA library libcudnn.so. LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64::/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64\nI tensorflow/stream_executor/cuda/cuda_dnn.cc:1562] Unable to load cuDNN DSO\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:99] Couldn't open CUDA library libcuda.so.1. LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64::/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:121] hostname: 25e49b6d892e\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:146] libcuda reported version is: Not found: was unable to find libcuda.so DSO loaded into this program\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:257] driver version file contents: \"\"\"NVRM version: NVIDIA UNIX x86_64 Kernel Module  370.28  Thu Sep  1 19:45:04 PDT 2016\nGCC version:  gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.2) \n\"\"\"\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:150] kernel reported version is: 370.28\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1051] LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64::/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1052] failed to find libcuda.so on this system: Failed precondition: could not dlopen DSO: libcuda.so.1; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n</code></pre>\n<p>It cant open libcuda even though I installed it. Also, how do I install cuDNN here?<br>\noutput of <code>ldconfig -p | grep cuda</code>:</p>\n<pre><code>    libnvrtc.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnvrtc.so.7.5\n    libnvrtc.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnvrtc.so\n    libnvrtc-builtins.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnvrtc-builtins.so.7.5\n    libnvrtc-builtins.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnvrtc-builtins.so\n    libnvblas.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnvblas.so.7.5\n    libnvblas.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnvblas.so\n    libnvToolsExt.so.1 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnvToolsExt.so.1\n    libnvToolsExt.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnvToolsExt.so\n    libnpps.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnpps.so.7.5\n    libnpps.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnpps.so\n    libnppi.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnppi.so.7.5\n    libnppi.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnppi.so\n    libnppc.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnppc.so.7.5\n    libnppc.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libnppc.so\n    libcusparse.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcusparse.so.7.5\n    libcusparse.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcusparse.so\n    libcusolver.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcusolver.so.7.5\n    libcusolver.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcusolver.so\n    libcurand.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcurand.so.7.5\n    libcurand.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcurand.so\n    libcufftw.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcufftw.so.7.5\n    libcufftw.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcufftw.so\n    libcufft.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcufft.so.7.5\n    libcufft.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcufft.so\n    libcudart.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcudart.so.7.5\n    libcudart.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcudart.so\n    libcublas.so.7.5 (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcublas.so.7.5\n    libcublas.so (libc6,x86-64) =&gt; /usr/local/cuda/lib64/libcublas.so\n</code></pre>", "body_text": "Operating System: Ubuntu 16.04\nI installed the gpu-docker tensorflow using these commands:\nwget -P /tmp https://github.com/NVIDIA/nvidia-docker/releases/download/v1.0.0-rc.3/nvidia-docker_1.0.0.rc.3-1_amd64.deb\nsudo dpkg -i /tmp/nvidia-docker*.deb && rm /tmp/nvidia-docker*.deb\nnvidia-docker run --rm nvidia/cuda nvidia-smi\n\nNow, I have cuda installed but when I try to run code with gpu support, I get this:\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:99] Couldn't open CUDA library libcudnn.so. LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64::/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64\nI tensorflow/stream_executor/cuda/cuda_dnn.cc:1562] Unable to load cuDNN DSO\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:99] Couldn't open CUDA library libcuda.so.1. LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64::/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:121] hostname: 25e49b6d892e\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:146] libcuda reported version is: Not found: was unable to find libcuda.so DSO loaded into this program\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:257] driver version file contents: \"\"\"NVRM version: NVIDIA UNIX x86_64 Kernel Module  370.28  Thu Sep  1 19:45:04 PDT 2016\nGCC version:  gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.2) \n\"\"\"\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:150] kernel reported version is: 370.28\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1051] LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64::/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1052] failed to find libcuda.so on this system: Failed precondition: could not dlopen DSO: libcuda.so.1; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n\nIt cant open libcuda even though I installed it. Also, how do I install cuDNN here?\noutput of ldconfig -p | grep cuda:\n    libnvrtc.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnvrtc.so.7.5\n    libnvrtc.so (libc6,x86-64) => /usr/local/cuda/lib64/libnvrtc.so\n    libnvrtc-builtins.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnvrtc-builtins.so.7.5\n    libnvrtc-builtins.so (libc6,x86-64) => /usr/local/cuda/lib64/libnvrtc-builtins.so\n    libnvblas.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnvblas.so.7.5\n    libnvblas.so (libc6,x86-64) => /usr/local/cuda/lib64/libnvblas.so\n    libnvToolsExt.so.1 (libc6,x86-64) => /usr/local/cuda/lib64/libnvToolsExt.so.1\n    libnvToolsExt.so (libc6,x86-64) => /usr/local/cuda/lib64/libnvToolsExt.so\n    libnpps.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnpps.so.7.5\n    libnpps.so (libc6,x86-64) => /usr/local/cuda/lib64/libnpps.so\n    libnppi.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnppi.so.7.5\n    libnppi.so (libc6,x86-64) => /usr/local/cuda/lib64/libnppi.so\n    libnppc.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnppc.so.7.5\n    libnppc.so (libc6,x86-64) => /usr/local/cuda/lib64/libnppc.so\n    libcusparse.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcusparse.so.7.5\n    libcusparse.so (libc6,x86-64) => /usr/local/cuda/lib64/libcusparse.so\n    libcusolver.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcusolver.so.7.5\n    libcusolver.so (libc6,x86-64) => /usr/local/cuda/lib64/libcusolver.so\n    libcurand.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcurand.so.7.5\n    libcurand.so (libc6,x86-64) => /usr/local/cuda/lib64/libcurand.so\n    libcufftw.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcufftw.so.7.5\n    libcufftw.so (libc6,x86-64) => /usr/local/cuda/lib64/libcufftw.so\n    libcufft.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcufft.so.7.5\n    libcufft.so (libc6,x86-64) => /usr/local/cuda/lib64/libcufft.so\n    libcudart.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcudart.so.7.5\n    libcudart.so (libc6,x86-64) => /usr/local/cuda/lib64/libcudart.so\n    libcublas.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcublas.so.7.5\n    libcublas.so (libc6,x86-64) => /usr/local/cuda/lib64/libcublas.so", "body": "Operating System: Ubuntu 16.04\nI installed the gpu-docker tensorflow using these commands:\n\n```\nwget -P /tmp https://github.com/NVIDIA/nvidia-docker/releases/download/v1.0.0-rc.3/nvidia-docker_1.0.0.rc.3-1_amd64.deb\nsudo dpkg -i /tmp/nvidia-docker*.deb && rm /tmp/nvidia-docker*.deb\nnvidia-docker run --rm nvidia/cuda nvidia-smi\n```\n\nNow, I have cuda installed but when I try to run code with gpu support, I get this:\n\n```\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:99] Couldn't open CUDA library libcudnn.so. LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64::/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64\nI tensorflow/stream_executor/cuda/cuda_dnn.cc:1562] Unable to load cuDNN DSO\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:99] Couldn't open CUDA library libcuda.so.1. LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64::/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:121] hostname: 25e49b6d892e\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:146] libcuda reported version is: Not found: was unable to find libcuda.so DSO loaded into this program\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:257] driver version file contents: \"\"\"NVRM version: NVIDIA UNIX x86_64 Kernel Module  370.28  Thu Sep  1 19:45:04 PDT 2016\nGCC version:  gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.2) \n\"\"\"\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:150] kernel reported version is: 370.28\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1051] LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64::/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1052] failed to find libcuda.so on this system: Failed precondition: could not dlopen DSO: libcuda.so.1; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n```\n\nIt cant open libcuda even though I installed it. Also, how do I install cuDNN here?\noutput of `ldconfig -p | grep cuda`:\n\n```\n    libnvrtc.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnvrtc.so.7.5\n    libnvrtc.so (libc6,x86-64) => /usr/local/cuda/lib64/libnvrtc.so\n    libnvrtc-builtins.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnvrtc-builtins.so.7.5\n    libnvrtc-builtins.so (libc6,x86-64) => /usr/local/cuda/lib64/libnvrtc-builtins.so\n    libnvblas.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnvblas.so.7.5\n    libnvblas.so (libc6,x86-64) => /usr/local/cuda/lib64/libnvblas.so\n    libnvToolsExt.so.1 (libc6,x86-64) => /usr/local/cuda/lib64/libnvToolsExt.so.1\n    libnvToolsExt.so (libc6,x86-64) => /usr/local/cuda/lib64/libnvToolsExt.so\n    libnpps.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnpps.so.7.5\n    libnpps.so (libc6,x86-64) => /usr/local/cuda/lib64/libnpps.so\n    libnppi.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnppi.so.7.5\n    libnppi.so (libc6,x86-64) => /usr/local/cuda/lib64/libnppi.so\n    libnppc.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libnppc.so.7.5\n    libnppc.so (libc6,x86-64) => /usr/local/cuda/lib64/libnppc.so\n    libcusparse.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcusparse.so.7.5\n    libcusparse.so (libc6,x86-64) => /usr/local/cuda/lib64/libcusparse.so\n    libcusolver.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcusolver.so.7.5\n    libcusolver.so (libc6,x86-64) => /usr/local/cuda/lib64/libcusolver.so\n    libcurand.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcurand.so.7.5\n    libcurand.so (libc6,x86-64) => /usr/local/cuda/lib64/libcurand.so\n    libcufftw.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcufftw.so.7.5\n    libcufftw.so (libc6,x86-64) => /usr/local/cuda/lib64/libcufftw.so\n    libcufft.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcufft.so.7.5\n    libcufft.so (libc6,x86-64) => /usr/local/cuda/lib64/libcufft.so\n    libcudart.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcudart.so.7.5\n    libcudart.so (libc6,x86-64) => /usr/local/cuda/lib64/libcudart.so\n    libcublas.so.7.5 (libc6,x86-64) => /usr/local/cuda/lib64/libcublas.so.7.5\n    libcublas.so (libc6,x86-64) => /usr/local/cuda/lib64/libcublas.so\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8877", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8877/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8877/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8877/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8877", "id": 218565948, "node_id": "MDU6SXNzdWUyMTg1NjU5NDg=", "number": 8877, "title": "nvidia-smi: No running processes found     ", "user": {"login": "dbl001", "id": 3105499, "node_id": "MDQ6VXNlcjMxMDU0OTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/3105499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbl001", "html_url": "https://github.com/dbl001", "followers_url": "https://api.github.com/users/dbl001/followers", "following_url": "https://api.github.com/users/dbl001/following{/other_user}", "gists_url": "https://api.github.com/users/dbl001/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbl001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbl001/subscriptions", "organizations_url": "https://api.github.com/users/dbl001/orgs", "repos_url": "https://api.github.com/users/dbl001/repos", "events_url": "https://api.github.com/users/dbl001/events{/privacy}", "received_events_url": "https://api.github.com/users/dbl001/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-03-31T17:24:54Z", "updated_at": "2017-04-01T17:31:25Z", "closed_at": "2017-04-01T17:31:25Z", "author_association": "NONE", "body_html": "<p>I'm running Ubuntu 14.04 LTS on AWS g2.2xlarge</p>\n<p>$ python neural_gpu_trainer.py --problem=bmul</p>\n<p>...</p>\n<p>modprobe: ERROR: could not insert 'nvidia_375_uvm': Invalid argument<br>\nE tensorflow/stream_executor/cuda/cuda_driver.cc:509] failed call to cuInit: CUDA_ERROR_UNKNOWN</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p><a href=\"http://stackoverflow.com/questions/33970755/tensorflow-not-using-gpu\" rel=\"nofollow\">http://stackoverflow.com/questions/33970755/tensorflow-not-using-gpu</a></p>\n<h3>Environment info</h3>\n<p>Operating System:<br>\nUbuntu 14.04 LTS</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):<br>\n-rw-r--r-- 1 root root 179466 Mar 27 16:01 /usr/local/cuda/lib/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root     16 Mar 27 16:01 /usr/local/cuda/lib/libcudart.so -&gt; libcudart.so.7.0<br>\nlrwxrwxrwx 1 root root     19 Mar 27 16:01 /usr/local/cuda/lib/libcudart.so.7.0 -&gt; libcudart.so.7.0.28<br>\n-rwxr-xr-x 1 root root 303052 Mar 27 16:01 /usr/local/cuda/lib/libcudart.so.7.0.28<br>\n-rw-r--r-- 1 root root 546514 Mar 27 16:01 /usr/local/cuda/lib/libcudart_static.a</p>\n<p>If installed from binary pip package, provide:<br>\n$ conda install -c jjh_cio_testing tensorflow-gpu</p>\n<ol>\n<li>\n<p>A link to the pip package you installed:</p>\n</li>\n<li>\n<p>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.<br>\nubuntu@ip-10-0-1-131:~/cuda/lib64$ python -c \"import tensorflow; print(tensorflow.<strong>version</strong>)\"<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.7.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.7.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.7.5 locally<br>\n1.0.1</p>\n</li>\n</ol>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>)</li>\n<li>The output of <code>bazel version</code></li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<pre><code>ubuntu@ip-10-0-1-131:~/models/neural_gpu$ python neural_gpu_trainer.py --problem=bmul\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.7.5 locally\nGenerating data for bmul.\ncut 1.20 lr 0.100 iw 0.80 cr 0.30 nm 64 d0.1000 gn 4.00 layers 2 kw 3 h 4 kh 3 batch 32 noise 0.00\nCreating model.\nCreating backward pass for the model.\nWARNING:tensorflow:Tried to colocate gpu0/gradients/gpu0/Gather_2_grad/Shape with an op target_embedding/read that had a different device: /device:GPU:0 vs /device:CPU:0. Ignoring colocation property.\nCreated model for gpu 0 in 6.46 s.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nmodprobe: ERROR: could not insert 'nvidia_375_uvm': Invalid argument\nE tensorflow/stream_executor/cuda/cuda_driver.cc:509] failed call to cuInit: CUDA_ERROR_UNKNOWN\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:158] retrieving CUDA diagnostic information for host: ip-10-0-1-131\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:165] hostname: ip-10-0-1-131\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:189] libcuda reported version is: 346.46.0\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:363] driver version file contents: \"\"\"NVRM version: NVIDIA UNIX x86_64 Kernel Module  346.46  Tue Feb 17 17:56:08 PST 2015\nGCC version:  gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.3) \n\"\"\"\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:193] kernel reported version is: 346.46.0\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:300] kernel version seems to match DSO: 346.46.0\nCreated model. Checkpoint dir /tmp/neural_gpu\nReading model parameters from /tmp/neural_gpu/neural_gpu.ckpt-500\nstep 600 step-time 1.15 train-size 0.051 lr 0.100000 grad-norm 1.3013 len 6 ppl 1.335808 errors 29.08 sequence-errors 23.34\n  bin 0 (2)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\n  bin 1 (3)\tbmul\tppl 1.07 errors 0.00 seq-errors 0.00\n  bin 2 (4)\tbmul\tppl NA errors NA seq-errors NA\n  bin 3 (5)\tbmul\tppl 1.14 errors 2.90 seq-errors 5.47\n  bin 4 (6)\tbmul\tppl NA errors NA seq-errors NA\n  bin 7 (9)\tbmul\tppl 1.67 errors 23.42 seq-errors 61.72\n  bin 10 (12)\tbmul\tppl NA errors NA seq-errors NA\n  bin 13 (15)\tbmul\tppl 1.94 errors 36.26 seq-errors 96.88\n  bin 16 (18)\tbmul\tppl NA errors NA seq-errors NA\n  bin 19 (21)\tbmul\tppl 2.07 errors 41.34 seq-errors 100.00\n  bin 22 (24)\tbmul\tppl NA errors NA seq-errors NA\n  bin 25 (27)\tbmul\tppl 2.11 errors 44.47 seq-errors 100.00\n  bin 28 (30)\tbmul\tppl NA errors NA seq-errors NA\n  bin 31 (33)\tbmul\tppl 2.14 errors 44.22 seq-errors 100.00\n  bin 34 (36)\tbmul\tppl NA errors NA seq-errors NA\n  bin 37 (39)\tbmul\tppl 2.16 errors 46.27 seq-errors 100.00\n  bin 40 (42)\tbmul\tppl NA errors NA seq-errors NA\n  bin 43 (45)\tbmul\tppl 2.17 errors 45.92 seq-errors 100.00\n  bin 46 (48)\tbmul\tppl NA errors NA seq-errors NA\nstep 700 step-time 1.04 train-size 0.051 lr 0.100000 grad-norm 1.2822 len 7 ppl 1.305894 errors 24.70 sequence-errors 20.28\n  bin 0 (2)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\n  bin 1 (3)\tbmul\tppl 1.07 errors 0.00 seq-errors 0.00\n  bin 2 (4)\tbmul\tppl NA errors NA seq-errors NA\n  bin 3 (5)\tbmul\tppl 1.09 errors 0.00 seq-errors 0.00\n  bin 4 (6)\tbmul\tppl NA errors NA seq-errors NA\n  bin 7 (9)\tbmul\tppl 1.65 errors 25.41 seq-errors 59.38\n  bin 10 (12)\tbmul\tppl NA errors NA seq-errors NA\n  bin 13 (15)\tbmul\tppl 1.94 errors 35.41 seq-errors 100.00\n  bin 16 (18)\tbmul\tppl NA errors NA seq-errors NA\n  bin 19 (21)\tbmul\tppl 2.08 errors 42.48 seq-errors 100.00\n  bin 22 (24)\tbmul\tppl NA errors NA seq-errors NA\n  bin 25 (27)\tbmul\tppl 2.14 errors 44.49 seq-errors 100.00\n  bin 28 (30)\tbmul\tppl NA errors NA seq-errors NA\n  bin 31 (33)\tbmul\tppl 2.16 errors 46.73 seq-errors 100.00\n  bin 34 (36)\tbmul\tppl NA errors NA seq-errors NA\n  bin 37 (39)\tbmul\tppl 2.20 errors 47.76 seq-errors 100.00\n  bin 40 (42)\tbmul\tppl NA errors NA seq-errors NA\n  bin 43 (45)\tbmul\tppl 2.22 errors 49.13 seq-errors 100.00\n  bin 46 (48)\tbmul\tppl NA errors NA seq-errors NA\nstep 800 step-time 1.64 train-size 0.051 lr 0.100000 grad-norm 1.3836 len 8 ppl 1.393354 errors 30.55 sequence-errors 30.53\n  bin 0 (2)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\n  bin 1 (3)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\n  bin 2 (4)\tbmul\tppl NA errors NA seq-errors NA\n  bin 3 (5)\tbmul\tppl 1.11 errors 0.00 seq-errors 0.00\n  bin 4 (6)\tbmul\tppl NA errors NA seq-errors NA\n  bin 7 (9)\tbmul\tppl 1.65 errors 23.67 seq-errors 63.28\n  bin 10 (12)\tbmul\tppl NA errors NA seq-errors NA\n  bin 13 (15)\tbmul\tppl 1.91 errors 37.00 seq-errors 97.66\n  bin 16 (18)\tbmul\tppl NA errors NA seq-errors NA\n  bin 19 (21)\tbmul\tppl 2.07 errors 43.81 seq-errors 100.00\n  bin 22 (24)\tbmul\tppl NA errors NA seq-errors NA\n  bin 25 (27)\tbmul\tppl 2.10 errors 44.66 seq-errors 100.00\n  bin 28 (30)\tbmul\tppl NA errors NA seq-errors NA\n  bin 31 (33)\tbmul\tppl 2.13 errors 45.06 seq-errors 100.00\n  bin 34 (36)\tbmul\tppl NA errors NA seq-errors NA\n  bin 37 (39)\tbmul\tppl 2.16 errors 45.51 seq-errors 100.00\n  bin 40 (42)\tbmul\tppl NA errors NA seq-errors NA\n  bin 43 (45)\tbmul\tppl 2.21 errors 47.88 seq-errors 100.00\n  bin 46 (48)\tbmul\tppl NA errors NA seq-errors NA\n\n</code></pre>\n<h3>What other attempted solutions have you tried?</h3>\n<pre><code>ubuntu@ip-10-0-1-131:~/cuda/lib64$ nvidia-smi\nFri Mar 31 17:22:46 2017       \n+------------------------------------------------------+                       \n| NVIDIA-SMI 346.46     Driver Version: 346.46         |                       \n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GRID K520           Off  | 0000:00:03.0     Off |                  N/A |\n| N/A   37C    P0    35W / 125W |     10MiB /  4095MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+--------------------------------------------\n### Logs or other output that would be helpful\n\n</code></pre>\n<p>(If logs are large, please upload as attachment or provide link).</p>", "body_text": "I'm running Ubuntu 14.04 LTS on AWS g2.2xlarge\n$ python neural_gpu_trainer.py --problem=bmul\n...\nmodprobe: ERROR: could not insert 'nvidia_375_uvm': Invalid argument\nE tensorflow/stream_executor/cuda/cuda_driver.cc:509] failed call to cuInit: CUDA_ERROR_UNKNOWN\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nhttp://stackoverflow.com/questions/33970755/tensorflow-not-using-gpu\nEnvironment info\nOperating System:\nUbuntu 14.04 LTS\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n-rw-r--r-- 1 root root 179466 Mar 27 16:01 /usr/local/cuda/lib/libcudadevrt.a\nlrwxrwxrwx 1 root root     16 Mar 27 16:01 /usr/local/cuda/lib/libcudart.so -> libcudart.so.7.0\nlrwxrwxrwx 1 root root     19 Mar 27 16:01 /usr/local/cuda/lib/libcudart.so.7.0 -> libcudart.so.7.0.28\n-rwxr-xr-x 1 root root 303052 Mar 27 16:01 /usr/local/cuda/lib/libcudart.so.7.0.28\n-rw-r--r-- 1 root root 546514 Mar 27 16:01 /usr/local/cuda/lib/libcudart_static.a\nIf installed from binary pip package, provide:\n$ conda install -c jjh_cio_testing tensorflow-gpu\n\n\nA link to the pip package you installed:\n\n\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\nubuntu@ip-10-0-1-131:~/cuda/lib64$ python -c \"import tensorflow; print(tensorflow.version)\"\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.7.5 locally\n1.0.1\n\n\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD)\nThe output of bazel version\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nubuntu@ip-10-0-1-131:~/models/neural_gpu$ python neural_gpu_trainer.py --problem=bmul\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.7.5 locally\nGenerating data for bmul.\ncut 1.20 lr 0.100 iw 0.80 cr 0.30 nm 64 d0.1000 gn 4.00 layers 2 kw 3 h 4 kh 3 batch 32 noise 0.00\nCreating model.\nCreating backward pass for the model.\nWARNING:tensorflow:Tried to colocate gpu0/gradients/gpu0/Gather_2_grad/Shape with an op target_embedding/read that had a different device: /device:GPU:0 vs /device:CPU:0. Ignoring colocation property.\nCreated model for gpu 0 in 6.46 s.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nmodprobe: ERROR: could not insert 'nvidia_375_uvm': Invalid argument\nE tensorflow/stream_executor/cuda/cuda_driver.cc:509] failed call to cuInit: CUDA_ERROR_UNKNOWN\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:158] retrieving CUDA diagnostic information for host: ip-10-0-1-131\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:165] hostname: ip-10-0-1-131\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:189] libcuda reported version is: 346.46.0\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:363] driver version file contents: \"\"\"NVRM version: NVIDIA UNIX x86_64 Kernel Module  346.46  Tue Feb 17 17:56:08 PST 2015\nGCC version:  gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.3) \n\"\"\"\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:193] kernel reported version is: 346.46.0\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:300] kernel version seems to match DSO: 346.46.0\nCreated model. Checkpoint dir /tmp/neural_gpu\nReading model parameters from /tmp/neural_gpu/neural_gpu.ckpt-500\nstep 600 step-time 1.15 train-size 0.051 lr 0.100000 grad-norm 1.3013 len 6 ppl 1.335808 errors 29.08 sequence-errors 23.34\n  bin 0 (2)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\n  bin 1 (3)\tbmul\tppl 1.07 errors 0.00 seq-errors 0.00\n  bin 2 (4)\tbmul\tppl NA errors NA seq-errors NA\n  bin 3 (5)\tbmul\tppl 1.14 errors 2.90 seq-errors 5.47\n  bin 4 (6)\tbmul\tppl NA errors NA seq-errors NA\n  bin 7 (9)\tbmul\tppl 1.67 errors 23.42 seq-errors 61.72\n  bin 10 (12)\tbmul\tppl NA errors NA seq-errors NA\n  bin 13 (15)\tbmul\tppl 1.94 errors 36.26 seq-errors 96.88\n  bin 16 (18)\tbmul\tppl NA errors NA seq-errors NA\n  bin 19 (21)\tbmul\tppl 2.07 errors 41.34 seq-errors 100.00\n  bin 22 (24)\tbmul\tppl NA errors NA seq-errors NA\n  bin 25 (27)\tbmul\tppl 2.11 errors 44.47 seq-errors 100.00\n  bin 28 (30)\tbmul\tppl NA errors NA seq-errors NA\n  bin 31 (33)\tbmul\tppl 2.14 errors 44.22 seq-errors 100.00\n  bin 34 (36)\tbmul\tppl NA errors NA seq-errors NA\n  bin 37 (39)\tbmul\tppl 2.16 errors 46.27 seq-errors 100.00\n  bin 40 (42)\tbmul\tppl NA errors NA seq-errors NA\n  bin 43 (45)\tbmul\tppl 2.17 errors 45.92 seq-errors 100.00\n  bin 46 (48)\tbmul\tppl NA errors NA seq-errors NA\nstep 700 step-time 1.04 train-size 0.051 lr 0.100000 grad-norm 1.2822 len 7 ppl 1.305894 errors 24.70 sequence-errors 20.28\n  bin 0 (2)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\n  bin 1 (3)\tbmul\tppl 1.07 errors 0.00 seq-errors 0.00\n  bin 2 (4)\tbmul\tppl NA errors NA seq-errors NA\n  bin 3 (5)\tbmul\tppl 1.09 errors 0.00 seq-errors 0.00\n  bin 4 (6)\tbmul\tppl NA errors NA seq-errors NA\n  bin 7 (9)\tbmul\tppl 1.65 errors 25.41 seq-errors 59.38\n  bin 10 (12)\tbmul\tppl NA errors NA seq-errors NA\n  bin 13 (15)\tbmul\tppl 1.94 errors 35.41 seq-errors 100.00\n  bin 16 (18)\tbmul\tppl NA errors NA seq-errors NA\n  bin 19 (21)\tbmul\tppl 2.08 errors 42.48 seq-errors 100.00\n  bin 22 (24)\tbmul\tppl NA errors NA seq-errors NA\n  bin 25 (27)\tbmul\tppl 2.14 errors 44.49 seq-errors 100.00\n  bin 28 (30)\tbmul\tppl NA errors NA seq-errors NA\n  bin 31 (33)\tbmul\tppl 2.16 errors 46.73 seq-errors 100.00\n  bin 34 (36)\tbmul\tppl NA errors NA seq-errors NA\n  bin 37 (39)\tbmul\tppl 2.20 errors 47.76 seq-errors 100.00\n  bin 40 (42)\tbmul\tppl NA errors NA seq-errors NA\n  bin 43 (45)\tbmul\tppl 2.22 errors 49.13 seq-errors 100.00\n  bin 46 (48)\tbmul\tppl NA errors NA seq-errors NA\nstep 800 step-time 1.64 train-size 0.051 lr 0.100000 grad-norm 1.3836 len 8 ppl 1.393354 errors 30.55 sequence-errors 30.53\n  bin 0 (2)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\n  bin 1 (3)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\n  bin 2 (4)\tbmul\tppl NA errors NA seq-errors NA\n  bin 3 (5)\tbmul\tppl 1.11 errors 0.00 seq-errors 0.00\n  bin 4 (6)\tbmul\tppl NA errors NA seq-errors NA\n  bin 7 (9)\tbmul\tppl 1.65 errors 23.67 seq-errors 63.28\n  bin 10 (12)\tbmul\tppl NA errors NA seq-errors NA\n  bin 13 (15)\tbmul\tppl 1.91 errors 37.00 seq-errors 97.66\n  bin 16 (18)\tbmul\tppl NA errors NA seq-errors NA\n  bin 19 (21)\tbmul\tppl 2.07 errors 43.81 seq-errors 100.00\n  bin 22 (24)\tbmul\tppl NA errors NA seq-errors NA\n  bin 25 (27)\tbmul\tppl 2.10 errors 44.66 seq-errors 100.00\n  bin 28 (30)\tbmul\tppl NA errors NA seq-errors NA\n  bin 31 (33)\tbmul\tppl 2.13 errors 45.06 seq-errors 100.00\n  bin 34 (36)\tbmul\tppl NA errors NA seq-errors NA\n  bin 37 (39)\tbmul\tppl 2.16 errors 45.51 seq-errors 100.00\n  bin 40 (42)\tbmul\tppl NA errors NA seq-errors NA\n  bin 43 (45)\tbmul\tppl 2.21 errors 47.88 seq-errors 100.00\n  bin 46 (48)\tbmul\tppl NA errors NA seq-errors NA\n\n\nWhat other attempted solutions have you tried?\nubuntu@ip-10-0-1-131:~/cuda/lib64$ nvidia-smi\nFri Mar 31 17:22:46 2017       \n+------------------------------------------------------+                       \n| NVIDIA-SMI 346.46     Driver Version: 346.46         |                       \n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GRID K520           Off  | 0000:00:03.0     Off |                  N/A |\n| N/A   37C    P0    35W / 125W |     10MiB /  4095MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+--------------------------------------------\n### Logs or other output that would be helpful\n\n\n(If logs are large, please upload as attachment or provide link).", "body": "I'm running Ubuntu 14.04 LTS on AWS g2.2xlarge\r\n\r\n\r\n$ python neural_gpu_trainer.py --problem=bmul\r\n \r\n...\r\n\r\nmodprobe: ERROR: could not insert 'nvidia_375_uvm': Invalid argument\r\nE tensorflow/stream_executor/cuda/cuda_driver.cc:509] failed call to cuInit: CUDA_ERROR_UNKNOWN\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nhttp://stackoverflow.com/questions/33970755/tensorflow-not-using-gpu\r\n\r\n### Environment info\r\nOperating System:\r\nUbuntu 14.04 LTS\r\n\r\nInstalled version of CUDA and cuDNN: \r\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\r\n-rw-r--r-- 1 root root 179466 Mar 27 16:01 /usr/local/cuda/lib/libcudadevrt.a\r\nlrwxrwxrwx 1 root root     16 Mar 27 16:01 /usr/local/cuda/lib/libcudart.so -> libcudart.so.7.0\r\nlrwxrwxrwx 1 root root     19 Mar 27 16:01 /usr/local/cuda/lib/libcudart.so.7.0 -> libcudart.so.7.0.28\r\n-rwxr-xr-x 1 root root 303052 Mar 27 16:01 /usr/local/cuda/lib/libcudart.so.7.0.28\r\n-rw-r--r-- 1 root root 546514 Mar 27 16:01 /usr/local/cuda/lib/libcudart_static.a\r\n\r\n\r\nIf installed from binary pip package, provide:\r\n$ conda install -c jjh_cio_testing tensorflow-gpu\r\n\r\n1. A link to the pip package you installed:\r\n\r\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\r\nubuntu@ip-10-0-1-131:~/cuda/lib64$ python -c \"import tensorflow; print(tensorflow.__version__)\"\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.7.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.7.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.7.5 locally\r\n1.0.1\r\n\r\nIf installed from source, provide \r\n\r\n1. The commit hash (`git rev-parse HEAD`)\r\n2. The output of `bazel version`\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n```\r\nubuntu@ip-10-0-1-131:~/models/neural_gpu$ python neural_gpu_trainer.py --problem=bmul\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.7.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.7.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.7.5 locally\r\nGenerating data for bmul.\r\ncut 1.20 lr 0.100 iw 0.80 cr 0.30 nm 64 d0.1000 gn 4.00 layers 2 kw 3 h 4 kh 3 batch 32 noise 0.00\r\nCreating model.\r\nCreating backward pass for the model.\r\nWARNING:tensorflow:Tried to colocate gpu0/gradients/gpu0/Gather_2_grad/Shape with an op target_embedding/read that had a different device: /device:GPU:0 vs /device:CPU:0. Ignoring colocation property.\r\nCreated model for gpu 0 in 6.46 s.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\nmodprobe: ERROR: could not insert 'nvidia_375_uvm': Invalid argument\r\nE tensorflow/stream_executor/cuda/cuda_driver.cc:509] failed call to cuInit: CUDA_ERROR_UNKNOWN\r\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:158] retrieving CUDA diagnostic information for host: ip-10-0-1-131\r\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:165] hostname: ip-10-0-1-131\r\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:189] libcuda reported version is: 346.46.0\r\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:363] driver version file contents: \"\"\"NVRM version: NVIDIA UNIX x86_64 Kernel Module  346.46  Tue Feb 17 17:56:08 PST 2015\r\nGCC version:  gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.3) \r\n\"\"\"\r\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:193] kernel reported version is: 346.46.0\r\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:300] kernel version seems to match DSO: 346.46.0\r\nCreated model. Checkpoint dir /tmp/neural_gpu\r\nReading model parameters from /tmp/neural_gpu/neural_gpu.ckpt-500\r\nstep 600 step-time 1.15 train-size 0.051 lr 0.100000 grad-norm 1.3013 len 6 ppl 1.335808 errors 29.08 sequence-errors 23.34\r\n  bin 0 (2)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\r\n  bin 1 (3)\tbmul\tppl 1.07 errors 0.00 seq-errors 0.00\r\n  bin 2 (4)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 3 (5)\tbmul\tppl 1.14 errors 2.90 seq-errors 5.47\r\n  bin 4 (6)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 7 (9)\tbmul\tppl 1.67 errors 23.42 seq-errors 61.72\r\n  bin 10 (12)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 13 (15)\tbmul\tppl 1.94 errors 36.26 seq-errors 96.88\r\n  bin 16 (18)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 19 (21)\tbmul\tppl 2.07 errors 41.34 seq-errors 100.00\r\n  bin 22 (24)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 25 (27)\tbmul\tppl 2.11 errors 44.47 seq-errors 100.00\r\n  bin 28 (30)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 31 (33)\tbmul\tppl 2.14 errors 44.22 seq-errors 100.00\r\n  bin 34 (36)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 37 (39)\tbmul\tppl 2.16 errors 46.27 seq-errors 100.00\r\n  bin 40 (42)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 43 (45)\tbmul\tppl 2.17 errors 45.92 seq-errors 100.00\r\n  bin 46 (48)\tbmul\tppl NA errors NA seq-errors NA\r\nstep 700 step-time 1.04 train-size 0.051 lr 0.100000 grad-norm 1.2822 len 7 ppl 1.305894 errors 24.70 sequence-errors 20.28\r\n  bin 0 (2)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\r\n  bin 1 (3)\tbmul\tppl 1.07 errors 0.00 seq-errors 0.00\r\n  bin 2 (4)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 3 (5)\tbmul\tppl 1.09 errors 0.00 seq-errors 0.00\r\n  bin 4 (6)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 7 (9)\tbmul\tppl 1.65 errors 25.41 seq-errors 59.38\r\n  bin 10 (12)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 13 (15)\tbmul\tppl 1.94 errors 35.41 seq-errors 100.00\r\n  bin 16 (18)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 19 (21)\tbmul\tppl 2.08 errors 42.48 seq-errors 100.00\r\n  bin 22 (24)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 25 (27)\tbmul\tppl 2.14 errors 44.49 seq-errors 100.00\r\n  bin 28 (30)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 31 (33)\tbmul\tppl 2.16 errors 46.73 seq-errors 100.00\r\n  bin 34 (36)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 37 (39)\tbmul\tppl 2.20 errors 47.76 seq-errors 100.00\r\n  bin 40 (42)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 43 (45)\tbmul\tppl 2.22 errors 49.13 seq-errors 100.00\r\n  bin 46 (48)\tbmul\tppl NA errors NA seq-errors NA\r\nstep 800 step-time 1.64 train-size 0.051 lr 0.100000 grad-norm 1.3836 len 8 ppl 1.393354 errors 30.55 sequence-errors 30.53\r\n  bin 0 (2)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\r\n  bin 1 (3)\tbmul\tppl 1.08 errors 0.00 seq-errors 0.00\r\n  bin 2 (4)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 3 (5)\tbmul\tppl 1.11 errors 0.00 seq-errors 0.00\r\n  bin 4 (6)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 7 (9)\tbmul\tppl 1.65 errors 23.67 seq-errors 63.28\r\n  bin 10 (12)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 13 (15)\tbmul\tppl 1.91 errors 37.00 seq-errors 97.66\r\n  bin 16 (18)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 19 (21)\tbmul\tppl 2.07 errors 43.81 seq-errors 100.00\r\n  bin 22 (24)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 25 (27)\tbmul\tppl 2.10 errors 44.66 seq-errors 100.00\r\n  bin 28 (30)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 31 (33)\tbmul\tppl 2.13 errors 45.06 seq-errors 100.00\r\n  bin 34 (36)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 37 (39)\tbmul\tppl 2.16 errors 45.51 seq-errors 100.00\r\n  bin 40 (42)\tbmul\tppl NA errors NA seq-errors NA\r\n  bin 43 (45)\tbmul\tppl 2.21 errors 47.88 seq-errors 100.00\r\n  bin 46 (48)\tbmul\tppl NA errors NA seq-errors NA\r\n\r\n```\r\n\r\n### What other attempted solutions have you tried?\r\n```\r\nubuntu@ip-10-0-1-131:~/cuda/lib64$ nvidia-smi\r\nFri Mar 31 17:22:46 2017       \r\n+------------------------------------------------------+                       \r\n| NVIDIA-SMI 346.46     Driver Version: 346.46         |                       \r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GRID K520           Off  | 0000:00:03.0     Off |                  N/A |\r\n| N/A   37C    P0    35W / 125W |     10MiB /  4095MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID  Type  Process name                               Usage      |\r\n|=============================================================================|\r\n|  No running processes found                                                 |\r\n+--------------------------------------------\r\n### Logs or other output that would be helpful\r\n\r\n```\r\n(If logs are large, please upload as attachment or provide link).\r\n"}
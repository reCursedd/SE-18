{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7276", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7276/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7276/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7276/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7276", "id": 205462008, "node_id": "MDU6SXNzdWUyMDU0NjIwMDg=", "number": 7276, "title": "Weights are nan, loss is computed fine and gradients are too small", "user": {"login": "HannahMontanna", "id": 25512256, "node_id": "MDQ6VXNlcjI1NTEyMjU2", "avatar_url": "https://avatars1.githubusercontent.com/u/25512256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HannahMontanna", "html_url": "https://github.com/HannahMontanna", "followers_url": "https://api.github.com/users/HannahMontanna/followers", "following_url": "https://api.github.com/users/HannahMontanna/following{/other_user}", "gists_url": "https://api.github.com/users/HannahMontanna/gists{/gist_id}", "starred_url": "https://api.github.com/users/HannahMontanna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HannahMontanna/subscriptions", "organizations_url": "https://api.github.com/users/HannahMontanna/orgs", "repos_url": "https://api.github.com/users/HannahMontanna/repos", "events_url": "https://api.github.com/users/HannahMontanna/events{/privacy}", "received_events_url": "https://api.github.com/users/HannahMontanna/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-05T23:01:05Z", "updated_at": "2017-02-10T16:28:44Z", "closed_at": "2017-02-10T16:28:44Z", "author_association": "NONE", "body_html": "<p>I have been researching about this over the INTERNET for a very long time. But I still do not know where my problem lies. I am finetuning a siamese fashioned vgg. And the problem is that even after first iteration distance calcualted is fine, loss calculated is fine but the gradients are too small(which is a problem) and the weights that are updated are nan. I do not understand what the problem is.<br>\nIn the network, I have removed fully connected layers and the output from the last pooling layer is the input to the distance function. Here is my code. I have only attached important snippets of the code which I hope help understand the architecture.<br>\nPS: stackoverflow was of no help that is why I am posting it here.<br>\nPPS: I have attached snapshot of gradients as well<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/25512256/22630753/60a8760a-ec10-11e6-9a1f-d75ba573842b.png\"><img src=\"https://cloud.githubusercontent.com/assets/25512256/22630753/60a8760a-ec10-11e6-9a1f-d75ba573842b.png\" alt=\"screenshot from 2017-02-06 02-00-10\" style=\"max-width:100%;\"></a></p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/753375/code.txt\">code.txt</a></p>", "body_text": "I have been researching about this over the INTERNET for a very long time. But I still do not know where my problem lies. I am finetuning a siamese fashioned vgg. And the problem is that even after first iteration distance calcualted is fine, loss calculated is fine but the gradients are too small(which is a problem) and the weights that are updated are nan. I do not understand what the problem is.\nIn the network, I have removed fully connected layers and the output from the last pooling layer is the input to the distance function. Here is my code. I have only attached important snippets of the code which I hope help understand the architecture.\nPS: stackoverflow was of no help that is why I am posting it here.\nPPS: I have attached snapshot of gradients as well\n\ncode.txt", "body": "I have been researching about this over the INTERNET for a very long time. But I still do not know where my problem lies. I am finetuning a siamese fashioned vgg. And the problem is that even after first iteration distance calcualted is fine, loss calculated is fine but the gradients are too small(which is a problem) and the weights that are updated are nan. I do not understand what the problem is. \r\nIn the network, I have removed fully connected layers and the output from the last pooling layer is the input to the distance function. Here is my code. I have only attached important snippets of the code which I hope help understand the architecture. \r\nPS: stackoverflow was of no help that is why I am posting it here. \r\nPPS: I have attached snapshot of gradients as well\r\n![screenshot from 2017-02-06 02-00-10](https://cloud.githubusercontent.com/assets/25512256/22630753/60a8760a-ec10-11e6-9a1f-d75ba573842b.png)\r\n\r\n\r\n[code.txt](https://github.com/tensorflow/tensorflow/files/753375/code.txt)\r\n\r\n\r\n"}
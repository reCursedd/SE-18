{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21145", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21145/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21145/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21145/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21145", "id": 344689880, "node_id": "MDU6SXNzdWUzNDQ2ODk4ODA=", "number": 21145, "title": "InvalidArgumentError (see above for traceback): No OpKernel was registered to support Op 'MklConv2DWithBias' with these attrs.", "user": {"login": "tanhe123", "id": 4676235, "node_id": "MDQ6VXNlcjQ2NzYyMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4676235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanhe123", "html_url": "https://github.com/tanhe123", "followers_url": "https://api.github.com/users/tanhe123/followers", "following_url": "https://api.github.com/users/tanhe123/following{/other_user}", "gists_url": "https://api.github.com/users/tanhe123/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanhe123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanhe123/subscriptions", "organizations_url": "https://api.github.com/users/tanhe123/orgs", "repos_url": "https://api.github.com/users/tanhe123/repos", "events_url": "https://api.github.com/users/tanhe123/events{/privacy}", "received_events_url": "https://api.github.com/users/tanhe123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-07-26T04:21:10Z", "updated_at": "2018-08-15T19:26:03Z", "closed_at": "2018-08-15T03:22:10Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: debian 8</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>:</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.1.0</li>\n<li><strong>Python version</strong>: Python 2.7.13</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.4.2</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: gcc version 4.9.2 (Debian 4.9.2-10)</li>\n<li><strong>CUDA/cuDNN version</strong>:</li>\n<li><strong>GPU model and memory</strong>:</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>tf_env_collect.sh:</p>\n<pre><code>== cat /etc/issue ===============================================\nLinux 4be8a8788f34 4.9.60-linuxkit-aufs #1 SMP Mon Nov 6 16:00:12 UTC 2017 x86_64 GNU/Linux\nVERSION_ID=\"8\"\nVERSION=\"8 (jessie)\"\n\n== are we in docker =============================================\nYes\n\n== compiler =====================================================\nc++ (Debian 4.9.2-10) 4.9.2\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n\n== uname -a =====================================================\nLinux 4be8a8788f34 4.9.60-linuxkit-aufs #1 SMP Mon Nov 6 16:00:12 UTC 2017 x86_64 GNU/Linux\n\n== check pips ===================================================\nintel-numpy            1.13.3.10\nnumpy                  1.14.5\nprotobuf               3.6.0\ntensorflow             1.1.0\n\n== check for virtualenv =========================================\nFalse\n\n== tensorflow import ============================================\ntf.VERSION = 1.1.0\ntf.GIT_VERSION = v1.1.0-0-g1ec6ed5\ntf.COMPILER_VERSION = v1.1.0-0-g1ec6ed5\nSanity check: array([1], dtype=int32)\n\n== env ==========================================================\nLD_LIBRARY_PATH /code/:/code//lib:/usr/local/lib\nDYLD_LIBRARY_PATH is unset\n\n== nvidia-smi ===================================================\n/tensor/tensorflow/tools/tf_env_collect.sh: line 105: nvidia-smi: command not found\n\n== cuda libs  ===================================================\n</code></pre>\n<h3>Describe the problem</h3>\n<p>I posted a stackoverflow issue: <a href=\"https://stackoverflow.com/questions/51530592/invalidargumenterror-see-above-for-traceback-no-opkernel-was-registered-to-su\" rel=\"nofollow\">https://stackoverflow.com/questions/51530592/invalidargumenterror-see-above-for-traceback-no-opkernel-was-registered-to-su</a></p>\n<h3>How to Generate the problem</h3>\n<p>I found a way to reproduce this problem.</p>\n<ol>\n<li>\n<p>download tensorflow zip and unzip.<br>\n<a href=\"https://drive.google.com/file/d/1k616LEvgTUXpHuX6Fz7EDXukaG5tGZwQ/view\" rel=\"nofollow\">https://drive.google.com/file/d/1k616LEvgTUXpHuX6Fz7EDXukaG5tGZwQ/view</a></p>\n</li>\n<li>\n<p>mount tensorflow folder to container:<br>\ndocker run --rm -it -v $(pwd):/code econtal/numpy-mkl  bash</p>\n</li>\n<li>\n<p>create the test script:</p>\n</li>\n</ol>\n<pre><code>$ cd /code\n$ vi test_conv2d.py\n\n# demo from https://www.jianshu.com/p/a70c1d931395\nimport tensorflow as tf \nimport tensorflow.contrib.slim as slim\nimport numpy as np\n\nx1 = tf.ones(shape=[1, 64, 64, 3]) \nw = tf.fill([5, 5, 3, 64], 1)\n# print(\"rank is\", tf.rank(x1))\n\n# x1 = tf.cast(x1, tf.float32)  \nw = tf.cast(w, tf.float32)\n\nprint('-----debugging-----')\nprint(type(x1))\nprint(x1.dtype.base_dtype)\n\nprint(type(w))\nprint(w.dtype.base_dtype)\nprint('-------------------')\n\n# x1 = tf.cast(x1, tf.float16)\n\ny1 = tf.nn.conv2d(x1, w, strides=[1, 1, 1, 1], padding='SAME')\ny2 = slim.conv2d(x1, np.float32(64.0), np.array([5.0, 5.0], dtype=np.float32), \nweights_initializer=tf.ones_initializer, padding='SAME')\n\nwith tf.Session() as sess: \n    sess.run(tf.global_variables_initializer()) \n    y1_value,y2_value,x1_value=sess.run([y1,y2,x1])\n    print(\"shapes are\", y1_value.shape, y2_value.shape)\n    print(y1_value==y2_value)\n    print(y1_value)\n    print(y2_value)\n</code></pre>\n<ol start=\"4\">\n<li>run the test script</li>\n</ol>\n<pre><code>$ python test_conv2d.py\n</code></pre>\n<p>Can anyone give some advice on how to find the problem? Thanks.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): debian 8\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 1.1.0\nPython version: Python 2.7.13\nBazel version (if compiling from source): 0.4.2\nGCC/Compiler version (if compiling from source): gcc version 4.9.2 (Debian 4.9.2-10)\nCUDA/cuDNN version:\nGPU model and memory:\nExact command to reproduce:\n\ntf_env_collect.sh:\n== cat /etc/issue ===============================================\nLinux 4be8a8788f34 4.9.60-linuxkit-aufs #1 SMP Mon Nov 6 16:00:12 UTC 2017 x86_64 GNU/Linux\nVERSION_ID=\"8\"\nVERSION=\"8 (jessie)\"\n\n== are we in docker =============================================\nYes\n\n== compiler =====================================================\nc++ (Debian 4.9.2-10) 4.9.2\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n\n== uname -a =====================================================\nLinux 4be8a8788f34 4.9.60-linuxkit-aufs #1 SMP Mon Nov 6 16:00:12 UTC 2017 x86_64 GNU/Linux\n\n== check pips ===================================================\nintel-numpy            1.13.3.10\nnumpy                  1.14.5\nprotobuf               3.6.0\ntensorflow             1.1.0\n\n== check for virtualenv =========================================\nFalse\n\n== tensorflow import ============================================\ntf.VERSION = 1.1.0\ntf.GIT_VERSION = v1.1.0-0-g1ec6ed5\ntf.COMPILER_VERSION = v1.1.0-0-g1ec6ed5\nSanity check: array([1], dtype=int32)\n\n== env ==========================================================\nLD_LIBRARY_PATH /code/:/code//lib:/usr/local/lib\nDYLD_LIBRARY_PATH is unset\n\n== nvidia-smi ===================================================\n/tensor/tensorflow/tools/tf_env_collect.sh: line 105: nvidia-smi: command not found\n\n== cuda libs  ===================================================\n\nDescribe the problem\nI posted a stackoverflow issue: https://stackoverflow.com/questions/51530592/invalidargumenterror-see-above-for-traceback-no-opkernel-was-registered-to-su\nHow to Generate the problem\nI found a way to reproduce this problem.\n\n\ndownload tensorflow zip and unzip.\nhttps://drive.google.com/file/d/1k616LEvgTUXpHuX6Fz7EDXukaG5tGZwQ/view\n\n\nmount tensorflow folder to container:\ndocker run --rm -it -v $(pwd):/code econtal/numpy-mkl  bash\n\n\ncreate the test script:\n\n\n$ cd /code\n$ vi test_conv2d.py\n\n# demo from https://www.jianshu.com/p/a70c1d931395\nimport tensorflow as tf \nimport tensorflow.contrib.slim as slim\nimport numpy as np\n\nx1 = tf.ones(shape=[1, 64, 64, 3]) \nw = tf.fill([5, 5, 3, 64], 1)\n# print(\"rank is\", tf.rank(x1))\n\n# x1 = tf.cast(x1, tf.float32)  \nw = tf.cast(w, tf.float32)\n\nprint('-----debugging-----')\nprint(type(x1))\nprint(x1.dtype.base_dtype)\n\nprint(type(w))\nprint(w.dtype.base_dtype)\nprint('-------------------')\n\n# x1 = tf.cast(x1, tf.float16)\n\ny1 = tf.nn.conv2d(x1, w, strides=[1, 1, 1, 1], padding='SAME')\ny2 = slim.conv2d(x1, np.float32(64.0), np.array([5.0, 5.0], dtype=np.float32), \nweights_initializer=tf.ones_initializer, padding='SAME')\n\nwith tf.Session() as sess: \n    sess.run(tf.global_variables_initializer()) \n    y1_value,y2_value,x1_value=sess.run([y1,y2,x1])\n    print(\"shapes are\", y1_value.shape, y2_value.shape)\n    print(y1_value==y2_value)\n    print(y1_value)\n    print(y2_value)\n\n\nrun the test script\n\n$ python test_conv2d.py\n\nCan anyone give some advice on how to find the problem? Thanks.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: debian 8\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.1.0\r\n- **Python version**: Python 2.7.13\r\n- **Bazel version (if compiling from source)**: 0.4.2\r\n- **GCC/Compiler version (if compiling from source)**: gcc version 4.9.2 (Debian 4.9.2-10)\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\n\r\ntf_env_collect.sh:\r\n\r\n```\r\n== cat /etc/issue ===============================================\r\nLinux 4be8a8788f34 4.9.60-linuxkit-aufs #1 SMP Mon Nov 6 16:00:12 UTC 2017 x86_64 GNU/Linux\r\nVERSION_ID=\"8\"\r\nVERSION=\"8 (jessie)\"\r\n\r\n== are we in docker =============================================\r\nYes\r\n\r\n== compiler =====================================================\r\nc++ (Debian 4.9.2-10) 4.9.2\r\nCopyright (C) 2014 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux 4be8a8788f34 4.9.60-linuxkit-aufs #1 SMP Mon Nov 6 16:00:12 UTC 2017 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nintel-numpy            1.13.3.10\r\nnumpy                  1.14.5\r\nprotobuf               3.6.0\r\ntensorflow             1.1.0\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.1.0\r\ntf.GIT_VERSION = v1.1.0-0-g1ec6ed5\r\ntf.COMPILER_VERSION = v1.1.0-0-g1ec6ed5\r\nSanity check: array([1], dtype=int32)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH /code/:/code//lib:/usr/local/lib\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n/tensor/tensorflow/tools/tf_env_collect.sh: line 105: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n```\r\n\r\n### Describe the problem\r\nI posted a stackoverflow issue: https://stackoverflow.com/questions/51530592/invalidargumenterror-see-above-for-traceback-no-opkernel-was-registered-to-su\r\n\r\n### How to Generate the problem\r\n\r\nI found a way to reproduce this problem.\r\n\r\n1. download tensorflow zip and unzip. \r\n  https://drive.google.com/file/d/1k616LEvgTUXpHuX6Fz7EDXukaG5tGZwQ/view\r\n\r\n2. mount tensorflow folder to container:\r\n  docker run --rm -it -v $(pwd):/code econtal/numpy-mkl  bash\r\n\r\n3. create the test script:\r\n\r\n  ```\r\n  $ cd /code\r\n  $ vi test_conv2d.py\r\n\r\n  # demo from https://www.jianshu.com/p/a70c1d931395\r\n  import tensorflow as tf \r\n  import tensorflow.contrib.slim as slim\r\n  import numpy as np\r\n \r\n  x1 = tf.ones(shape=[1, 64, 64, 3]) \r\n  w = tf.fill([5, 5, 3, 64], 1)\r\n  # print(\"rank is\", tf.rank(x1))\r\n\r\n  # x1 = tf.cast(x1, tf.float32)  \r\n  w = tf.cast(w, tf.float32)\r\n\r\n  print('-----debugging-----')\r\n  print(type(x1))\r\n  print(x1.dtype.base_dtype)\r\n\r\n  print(type(w))\r\n  print(w.dtype.base_dtype)\r\n  print('-------------------')\r\n\r\n  # x1 = tf.cast(x1, tf.float16)\r\n\r\n  y1 = tf.nn.conv2d(x1, w, strides=[1, 1, 1, 1], padding='SAME')\r\n  y2 = slim.conv2d(x1, np.float32(64.0), np.array([5.0, 5.0], dtype=np.float32), \r\n  weights_initializer=tf.ones_initializer, padding='SAME')\r\n\r\n  with tf.Session() as sess: \r\n      sess.run(tf.global_variables_initializer()) \r\n      y1_value,y2_value,x1_value=sess.run([y1,y2,x1])\r\n      print(\"shapes are\", y1_value.shape, y2_value.shape)\r\n      print(y1_value==y2_value)\r\n      print(y1_value)\r\n      print(y2_value)\r\n  ```\r\n\r\n  4. run the test script\r\n\r\n  ```\r\n  $ python test_conv2d.py\r\n  ```\r\n\r\nCan anyone give some advice on how to find the problem? Thanks.\r\n\r\n"}
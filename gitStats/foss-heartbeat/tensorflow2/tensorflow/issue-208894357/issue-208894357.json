{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7698", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7698/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7698/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7698/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7698", "id": 208894357, "node_id": "MDU6SXNzdWUyMDg4OTQzNTc=", "number": 7698, "title": "Quantize nodes via Transform Graph tool cause error", "user": {"login": "Gubarev", "id": 235517, "node_id": "MDQ6VXNlcjIzNTUxNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/235517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gubarev", "html_url": "https://github.com/Gubarev", "followers_url": "https://api.github.com/users/Gubarev/followers", "following_url": "https://api.github.com/users/Gubarev/following{/other_user}", "gists_url": "https://api.github.com/users/Gubarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gubarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gubarev/subscriptions", "organizations_url": "https://api.github.com/users/Gubarev/orgs", "repos_url": "https://api.github.com/users/Gubarev/repos", "events_url": "https://api.github.com/users/Gubarev/events{/privacy}", "received_events_url": "https://api.github.com/users/Gubarev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2017-02-20T14:25:18Z", "updated_at": "2017-04-12T12:20:13Z", "closed_at": "2017-04-12T12:20:13Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I am trying to quantize my model by following this <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/graph_transforms/README.md\">README</a></p>\n<p>I have faced with issue <strong>No attr named 'T' in NodeDef:</strong> when I run <strong>transform_graph</strong> tool with <strong>quantize_nodes</strong> option both for my model and example model (Inception V3).</p>\n<pre><code>path/to/transform_graph --in_graph=model.pb --out_graph=optimized.pb --inputs='input:0' --outputs='regression:0,classification:0' --transforms='quantize_weights quantize_nodes'\n</code></pre>\n<p>Here is relevant part of output:</p>\n<pre><code>2017-02-20 17:14:19.944778: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying quantize_nodes\n2017-02-20 17:14:20.599637: E tensorflow/tools/graph_transforms/transform_graph.cc:203] No attr named 'T' in NodeDef:\n\t [[Node: pool = MaxPool[ksize=[1, 3, 3, 1], padding=\"VALID\", strides=[1, 2, 2, 1]](pool/control_dependency)]]\n</code></pre>\n<h3>Environment info</h3>\n<p>Doesn't seems too important. Tested on two machines with different configurations (referred as M for Mac and U for Ubuntu below).</p>\n<p>Operating System:<br>\nM: macOS Sierra 10.12.3<br>\nU: Ubuntu 16.04.2 LTS x86_64</p>\n<p>TF has been installed from source. Commit hash:<br>\nM: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/b6f16b8166e3a7761f607be66d46acbd37dfaf43/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/b6f16b8166e3a7761f607be66d46acbd37dfaf43\"><tt>b6f16b8</tt></a><br>\nU: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/c56c873fbaf976d26d487ad57c8efbc87f05331c/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/c56c873fbaf976d26d487ad57c8efbc87f05331c\"><tt>c56c873</tt></a></p>\n<p>Bazel version / build label<br>\nM: 0.4.4-homebrew<br>\nU: 0.4.4</p>\n<h3>Minimal reproducible example</h3>\n<p>Download &amp; unpack inception V3. Run the tool (modify path to tool and model if necessary).</p>\n<pre><code>curl http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz -o /tmp/inceptionv3.tgz\ntar xzf /tmp/inceptionv3.tgz -C /tmp/\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph --in_graph=/tmp/classify_image_graph_def.pb --out_graph=optimized.pb --inputs='input:0' --outputs='regression:0,classification:0' --transforms='quantize_weights quantize_nodes'\n</code></pre>\n<h3>What other attempted solutions have you tried?</h3>\n<p>I have tried to run quantisation on different OS (Mac and Ubuntu) and slightly different revisions of master. Also, initially, I have tried to quantize nodes of my own model, not Inception. In all cases result is the same: error.</p>", "body_text": "I am trying to quantize my model by following this README\nI have faced with issue No attr named 'T' in NodeDef: when I run transform_graph tool with quantize_nodes option both for my model and example model (Inception V3).\npath/to/transform_graph --in_graph=model.pb --out_graph=optimized.pb --inputs='input:0' --outputs='regression:0,classification:0' --transforms='quantize_weights quantize_nodes'\n\nHere is relevant part of output:\n2017-02-20 17:14:19.944778: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying quantize_nodes\n2017-02-20 17:14:20.599637: E tensorflow/tools/graph_transforms/transform_graph.cc:203] No attr named 'T' in NodeDef:\n\t [[Node: pool = MaxPool[ksize=[1, 3, 3, 1], padding=\"VALID\", strides=[1, 2, 2, 1]](pool/control_dependency)]]\n\nEnvironment info\nDoesn't seems too important. Tested on two machines with different configurations (referred as M for Mac and U for Ubuntu below).\nOperating System:\nM: macOS Sierra 10.12.3\nU: Ubuntu 16.04.2 LTS x86_64\nTF has been installed from source. Commit hash:\nM: b6f16b8\nU: c56c873\nBazel version / build label\nM: 0.4.4-homebrew\nU: 0.4.4\nMinimal reproducible example\nDownload & unpack inception V3. Run the tool (modify path to tool and model if necessary).\ncurl http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz -o /tmp/inceptionv3.tgz\ntar xzf /tmp/inceptionv3.tgz -C /tmp/\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph --in_graph=/tmp/classify_image_graph_def.pb --out_graph=optimized.pb --inputs='input:0' --outputs='regression:0,classification:0' --transforms='quantize_weights quantize_nodes'\n\nWhat other attempted solutions have you tried?\nI have tried to run quantisation on different OS (Mac and Ubuntu) and slightly different revisions of master. Also, initially, I have tried to quantize nodes of my own model, not Inception. In all cases result is the same: error.", "body": "I am trying to quantize my model by following this [README](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/graph_transforms/README.md)\r\n\r\nI have faced with issue **No attr named 'T' in NodeDef:** when I run **transform_graph** tool with **quantize_nodes** option both for my model and example model (Inception V3).\r\n\r\n```\r\npath/to/transform_graph --in_graph=model.pb --out_graph=optimized.pb --inputs='input:0' --outputs='regression:0,classification:0' --transforms='quantize_weights quantize_nodes'\r\n```\r\n\r\nHere is relevant part of output:\r\n\r\n```\r\n2017-02-20 17:14:19.944778: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying quantize_nodes\r\n2017-02-20 17:14:20.599637: E tensorflow/tools/graph_transforms/transform_graph.cc:203] No attr named 'T' in NodeDef:\r\n\t [[Node: pool = MaxPool[ksize=[1, 3, 3, 1], padding=\"VALID\", strides=[1, 2, 2, 1]](pool/control_dependency)]]\r\n```\r\n\r\n### Environment info\r\n\r\nDoesn't seems too important. Tested on two machines with different configurations (referred as M for Mac and U for Ubuntu below).\r\n \r\nOperating System:\r\nM: macOS Sierra 10.12.3\r\nU: Ubuntu 16.04.2 LTS x86_64\r\n\r\nTF has been installed from source. Commit hash:\r\nM: b6f16b8166e3a7761f607be66d46acbd37dfaf43\r\nU: c56c873fbaf976d26d487ad57c8efbc87f05331c\r\n\r\nBazel version / build label\r\nM: 0.4.4-homebrew\r\nU: 0.4.4\r\n\r\n### Minimal reproducible example\r\nDownload & unpack inception V3. Run the tool (modify path to tool and model if necessary).\r\n\r\n\r\n```\r\ncurl http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz -o /tmp/inceptionv3.tgz\r\ntar xzf /tmp/inceptionv3.tgz -C /tmp/\r\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph --in_graph=/tmp/classify_image_graph_def.pb --out_graph=optimized.pb --inputs='input:0' --outputs='regression:0,classification:0' --transforms='quantize_weights quantize_nodes'\r\n```\r\n\r\n### What other attempted solutions have you tried?\r\nI have tried to run quantisation on different OS (Mac and Ubuntu) and slightly different revisions of master. Also, initially, I have tried to quantize nodes of my own model, not Inception. In all cases result is the same: error."}
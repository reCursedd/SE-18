{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/386879364", "html_url": "https://github.com/tensorflow/tensorflow/issues/18456#issuecomment-386879364", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18456", "id": 386879364, "node_id": "MDEyOklzc3VlQ29tbWVudDM4Njg3OTM2NA==", "user": {"login": "tambu-j", "id": 11877150, "node_id": "MDQ6VXNlcjExODc3MTUw", "avatar_url": "https://avatars0.githubusercontent.com/u/11877150?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tambu-j", "html_url": "https://github.com/tambu-j", "followers_url": "https://api.github.com/users/tambu-j/followers", "following_url": "https://api.github.com/users/tambu-j/following{/other_user}", "gists_url": "https://api.github.com/users/tambu-j/gists{/gist_id}", "starred_url": "https://api.github.com/users/tambu-j/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tambu-j/subscriptions", "organizations_url": "https://api.github.com/users/tambu-j/orgs", "repos_url": "https://api.github.com/users/tambu-j/repos", "events_url": "https://api.github.com/users/tambu-j/events{/privacy}", "received_events_url": "https://api.github.com/users/tambu-j/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-06T13:26:56Z", "updated_at": "2018-05-06T15:00:28Z", "author_association": "NONE", "body_html": "<p>Since the addition of create_python_api.py in <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/43f5b27f6064b64b7dbcfcae865829e3617a7112/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/43f5b27f6064b64b7dbcfcae865829e3617a7112\"><tt>43f5b27</tt></a>, it does an import of tf code during the build of the tf_python_api project which means that you need to have at least protobuf and absl-py in the python path of the interpreter you specified when you ran cmake.</p>\n<p>Ideally (?), the local build of protobuf could be added to the pythonpath but a few additional steps need to be added to the protobuf build to get the locally built version to work, so as a workaround I just pip installed protobuf at a version compatible with the constraint in setup.py for the tf pip pkg on master. I also needed to pip install absl-py, which should probably be added to the list of deps (alongside numpy) for building the python package from source. Arguably, the full list of dependencies should already be in the python environment when building if parts of the package itself are going to be imported during the build, or those dependencies should be pulled, built and added to the pythonpath during the tf build.</p>", "body_text": "Since the addition of create_python_api.py in 43f5b27, it does an import of tf code during the build of the tf_python_api project which means that you need to have at least protobuf and absl-py in the python path of the interpreter you specified when you ran cmake.\nIdeally (?), the local build of protobuf could be added to the pythonpath but a few additional steps need to be added to the protobuf build to get the locally built version to work, so as a workaround I just pip installed protobuf at a version compatible with the constraint in setup.py for the tf pip pkg on master. I also needed to pip install absl-py, which should probably be added to the list of deps (alongside numpy) for building the python package from source. Arguably, the full list of dependencies should already be in the python environment when building if parts of the package itself are going to be imported during the build, or those dependencies should be pulled, built and added to the pythonpath during the tf build.", "body": "Since the addition of create_python_api.py in 43f5b27, it does an import of tf code during the build of the tf_python_api project which means that you need to have at least protobuf and absl-py in the python path of the interpreter you specified when you ran cmake. \r\n\r\nIdeally (?), the local build of protobuf could be added to the pythonpath but a few additional steps need to be added to the protobuf build to get the locally built version to work, so as a workaround I just pip installed protobuf at a version compatible with the constraint in setup.py for the tf pip pkg on master. I also needed to pip install absl-py, which should probably be added to the list of deps (alongside numpy) for building the python package from source. Arguably, the full list of dependencies should already be in the python environment when building if parts of the package itself are going to be imported during the build, or those dependencies should be pulled, built and added to the pythonpath during the tf build."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7647", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7647/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7647/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7647/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7647", "id": 208639515, "node_id": "MDU6SXNzdWUyMDg2Mzk1MTU=", "number": 7647, "title": "Error when running image retraining example (retrain.py) with --print_misclassified_test_images flag", "user": {"login": "jsawruk", "id": 422233, "node_id": "MDQ6VXNlcjQyMjIzMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/422233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsawruk", "html_url": "https://github.com/jsawruk", "followers_url": "https://api.github.com/users/jsawruk/followers", "following_url": "https://api.github.com/users/jsawruk/following{/other_user}", "gists_url": "https://api.github.com/users/jsawruk/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsawruk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsawruk/subscriptions", "organizations_url": "https://api.github.com/users/jsawruk/orgs", "repos_url": "https://api.github.com/users/jsawruk/repos", "events_url": "https://api.github.com/users/jsawruk/events{/privacy}", "received_events_url": "https://api.github.com/users/jsawruk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-02-18T12:38:34Z", "updated_at": "2018-02-07T15:19:06Z", "closed_at": "2017-03-03T23:39:56Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/17322668/typeerror-dict-keys-object-does-not-support-indexing\" rel=\"nofollow\">http://stackoverflow.com/questions/17322668/typeerror-dict-keys-object-does-not-support-indexing</a></li>\n<li><a href=\"http://stackoverflow.com/questions/18552001/accessing-dict-keys-element-by-index-in-python3\" rel=\"nofollow\">http://stackoverflow.com/questions/18552001/accessing-dict-keys-element-by-index-in-python3</a></li>\n<li><a href=\"http://stackoverflow.com/questions/26693055/dict-key-object-does-not-support-indexing-python-3\" rel=\"nofollow\">http://stackoverflow.com/questions/26693055/dict-key-object-does-not-support-indexing-python-3</a></li>\n</ul>\n<h3>Environment info</h3>\n<p>Operating System: macOS 10.12.3<br>\nPython version: 3.5.2</p>\n<p>Installed version of CUDA and cuDNN: Not using CUDA</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>): <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/89059e6f0b2788b624e744afc21ba2472523a250/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/89059e6f0b2788b624e744afc21ba2472523a250\"><tt>89059e6</tt></a></li>\n<li>The output of <code>bazel version</code>:</li>\n</ol>\n<pre><code>Build label: 0.4.4\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Feb 1 18:56:35 2017 (1485975395)\nBuild timestamp: 1485975395\nBuild timestamp as int: 1485975395\n</code></pre>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>Run this command:<br>\n<code>bazel-bin/tensorflow/examples/image_retraining/retrain --image_dir ~/flower_photos/ --print_misclassified_test_images</code></p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>Reviewed source code for retrain.py, both locally and latest version on Github. See lines 892-896 (inside main function). The code looks correct. I suspect it is an issue specific to Python 3.</p>\n<p>I have not tried to run this in Python 2 yet.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>This is what is output:</p>\n<pre><code>=== MISCLASSIFIED TEST IMAGES ===\nTraceback (most recent call last):\n  File \"/Users/jsawruk/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1061, in &lt;module&gt;\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"/Users/jsawruk/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/Users/jsawruk/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 896, in main\n    print('%70s  %s' % (test_filename, image_lists.keys()[predictions[i]]))\nTypeError: 'dict_keys' object does not support indexing\n</code></pre>\n<p>It appears the solution is to rewrite line 896 from:<br>\n<code>print('%70s  %s' % (test_filename, image_lists.keys()[predictions[i]]))</code></p>\n<p>to:</p>\n<p><code>print('%70s  %s' % (test_filename, list(image_lists.keys())[predictions[i]]))</code></p>\n<p>When I edit the code locally to the line above, I no longer get the error when I run the example.</p>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n\nhttp://stackoverflow.com/questions/17322668/typeerror-dict-keys-object-does-not-support-indexing\nhttp://stackoverflow.com/questions/18552001/accessing-dict-keys-element-by-index-in-python3\nhttp://stackoverflow.com/questions/26693055/dict-key-object-does-not-support-indexing-python-3\n\nEnvironment info\nOperating System: macOS 10.12.3\nPython version: 3.5.2\nInstalled version of CUDA and cuDNN: Not using CUDA\n\nThe commit hash (git rev-parse HEAD): 89059e6\nThe output of bazel version:\n\nBuild label: 0.4.4\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Feb 1 18:56:35 2017 (1485975395)\nBuild timestamp: 1485975395\nBuild timestamp as int: 1485975395\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nRun this command:\nbazel-bin/tensorflow/examples/image_retraining/retrain --image_dir ~/flower_photos/ --print_misclassified_test_images\nWhat other attempted solutions have you tried?\nReviewed source code for retrain.py, both locally and latest version on Github. See lines 892-896 (inside main function). The code looks correct. I suspect it is an issue specific to Python 3.\nI have not tried to run this in Python 2 yet.\nLogs or other output that would be helpful\nThis is what is output:\n=== MISCLASSIFIED TEST IMAGES ===\nTraceback (most recent call last):\n  File \"/Users/jsawruk/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1061, in <module>\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"/Users/jsawruk/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/Users/jsawruk/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 896, in main\n    print('%70s  %s' % (test_filename, image_lists.keys()[predictions[i]]))\nTypeError: 'dict_keys' object does not support indexing\n\nIt appears the solution is to rewrite line 896 from:\nprint('%70s  %s' % (test_filename, image_lists.keys()[predictions[i]]))\nto:\nprint('%70s  %s' % (test_filename, list(image_lists.keys())[predictions[i]]))\nWhen I edit the code locally to the line above, I no longer get the error when I run the example.", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n\r\n- http://stackoverflow.com/questions/17322668/typeerror-dict-keys-object-does-not-support-indexing\r\n- http://stackoverflow.com/questions/18552001/accessing-dict-keys-element-by-index-in-python3\r\n- http://stackoverflow.com/questions/26693055/dict-key-object-does-not-support-indexing-python-3\r\n\r\n### Environment info\r\nOperating System: macOS 10.12.3\r\nPython version: 3.5.2\r\n\r\nInstalled version of CUDA and cuDNN: Not using CUDA\r\n\r\n1. The commit hash (`git rev-parse HEAD`): 89059e6f0b2788b624e744afc21ba2472523a250\r\n2. The output of `bazel version`: \r\n```\r\nBuild label: 0.4.4\r\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed Feb 1 18:56:35 2017 (1485975395)\r\nBuild timestamp: 1485975395\r\nBuild timestamp as int: 1485975395\r\n```\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\nRun this command:\r\n`bazel-bin/tensorflow/examples/image_retraining/retrain --image_dir ~/flower_photos/ --print_misclassified_test_images`\r\n\r\n### What other attempted solutions have you tried?\r\nReviewed source code for retrain.py, both locally and latest version on Github. See lines 892-896 (inside main function). The code looks correct. I suspect it is an issue specific to Python 3. \r\n\r\nI have not tried to run this in Python 2 yet.\r\n\r\n### Logs or other output that would be helpful\r\nThis is what is output:\r\n```\r\n=== MISCLASSIFIED TEST IMAGES ===\r\nTraceback (most recent call last):\r\n  File \"/Users/jsawruk/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1061, in <module>\r\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/Users/jsawruk/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/Users/jsawruk/tensorflow/bazel-bin/tensorflow/examples/image_retraining/retrain.runfiles/org_tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 896, in main\r\n    print('%70s  %s' % (test_filename, image_lists.keys()[predictions[i]]))\r\nTypeError: 'dict_keys' object does not support indexing\r\n```\r\n\r\nIt appears the solution is to rewrite line 896 from:\r\n`print('%70s  %s' % (test_filename, image_lists.keys()[predictions[i]]))`\r\n\r\nto:\r\n\r\n`print('%70s  %s' % (test_filename, list(image_lists.keys())[predictions[i]]))`\r\n\r\nWhen I edit the code locally to the line above, I no longer get the error when I run the example."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9341", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9341/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9341/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9341/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9341", "id": 223143380, "node_id": "MDU6SXNzdWUyMjMxNDMzODA=", "number": 9341, "title": "Tensorflow looks for wrong libcupti.so version", "user": {"login": "StefanoD", "id": 1634862, "node_id": "MDQ6VXNlcjE2MzQ4NjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1634862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StefanoD", "html_url": "https://github.com/StefanoD", "followers_url": "https://api.github.com/users/StefanoD/followers", "following_url": "https://api.github.com/users/StefanoD/following{/other_user}", "gists_url": "https://api.github.com/users/StefanoD/gists{/gist_id}", "starred_url": "https://api.github.com/users/StefanoD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StefanoD/subscriptions", "organizations_url": "https://api.github.com/users/StefanoD/orgs", "repos_url": "https://api.github.com/users/StefanoD/repos", "events_url": "https://api.github.com/users/StefanoD/events{/privacy}", "received_events_url": "https://api.github.com/users/StefanoD/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-04-20T17:36:16Z", "updated_at": "2017-12-20T23:31:17Z", "closed_at": "2017-05-19T17:45:39Z", "author_association": "NONE", "body_html": "<ul>\n<li>OS: Ubuntu 16.04</li>\n<li>*TensorFlow installed from: source</li>\n<li><em>TensorFlow version</em>: 1.1.0-rc2</li>\n<li><em>Bazel version (if compiling from source)</em>: 0.4.5</li>\n<li><em>CUDA/cuDNN version</em>: 8.0/6.0</li>\n<li><em>GPU Model and Memory</em>: NVIDIA GTX 1060, 6 GB RAM</li>\n<li><em>Exact command to reproduce</em>:</li>\n</ul>\n<hr>\n<p>MNIST examples works fine, bute MNIST example with summaries crashes with:</p>\n<pre><code>(tensorflow) stefano@stefano-linux:~/Dokumente/Programming/Python/TensorflowCoreTutorial$ /home/stefano/tensorflow/bin/python3 /home/stefano/Dokumente/Programming/Python/TensorflowCoreTutorial/src/mnist_with_summaries.py\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/train-images-idx3-ubyte.gz\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/train-labels-idx1-ubyte.gz\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/t10k-images-idx3-ubyte.gz\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/t10k-labels-idx1-ubyte.gz\n2017-04-20 19:16:15.388639: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:901] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-04-20 19:16:15.389019: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 0 with properties:\nname: GeForce GTX 1060 6GB\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.7085\npciBusID 0000:22:00.0\nTotal memory: 5.93GiB\nFree memory: 4.97GiB\n2017-04-20 19:16:15.389036: I tensorflow/core/common_runtime/gpu/gpu_device.cc:908] DMA: 0\n2017-04-20 19:16:15.389042: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 0:   Y\n2017-04-20 19:16:15.389055: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX 1060 6GB, pci bus id: 0000:22:00.0)\nAccuracy at step 0: 0.0981\nAccuracy at step 10: 0.7258\nAccuracy at step 20: 0.8151\nAccuracy at step 30: 0.8572\nAccuracy at step 40: 0.879\nAccuracy at step 50: 0.8949\nAccuracy at step 60: 0.9052\nAccuracy at step 70: 0.9058\nAccuracy at step 80: 0.915\nAccuracy at step 90: 0.9137\n2017-04-20 19:16:20.708545: I tensorflow/stream_executor/dso_loader.cc:129] Couldn't open CUDA library libcupti.so.8.0. LD_LIBRARY_PATH: /usr/local/lib:/usr/local/cuda/lib64:/usr/lib/x86_64-linux-gnu:/usr/lib/nvidia-375\n2017-04-20 19:16:20.708600: F tensorflow/core/platform/default/gpu/cupti_wrapper.cc:59] Non-OK-status: ::tensorflow::Env::Default()-&gt;GetSymbolFromLibrary( GetDsoHandle(), kName, &amp;f) status: Not found: /usr/local/lib/python3.5/dist-packages/tensorfl\now/python/_pywrap_tensorflow_internal.so: undefined symbol: cuptiActivityRegisterCallbackscould not find cuptiActivityRegisterCallbacksin libcupti DSO\n</code></pre>\n<p>source code:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/mnist/mnist_with_summaries.py\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/mnist/mnist_with_summaries.py</a></p>\n<p>Problem is, that tensorflow looks for libcupti.so.8.0, but only libcupti.so.7.5 is installed:</p>\n<pre><code>stefano@stefano-linux:~$ ls /usr/lib/x86_64-linux-gnu | grep libcupti*\nlibcupti.so\nlibcupti.so.7.5\nlibcupti.so.7.5.18\n</code></pre>\n<p>I installed libcupti like described in the Install section on the Tensorflow website:</p>\n<pre><code>sudo apt-get install libcupti-dev\n</code></pre>\n<p>libcupti-dev 8.0 is not available for Ubuntu 16.04.</p>", "body_text": "OS: Ubuntu 16.04\n*TensorFlow installed from: source\nTensorFlow version: 1.1.0-rc2\nBazel version (if compiling from source): 0.4.5\nCUDA/cuDNN version: 8.0/6.0\nGPU Model and Memory: NVIDIA GTX 1060, 6 GB RAM\nExact command to reproduce:\n\n\nMNIST examples works fine, bute MNIST example with summaries crashes with:\n(tensorflow) stefano@stefano-linux:~/Dokumente/Programming/Python/TensorflowCoreTutorial$ /home/stefano/tensorflow/bin/python3 /home/stefano/Dokumente/Programming/Python/TensorflowCoreTutorial/src/mnist_with_summaries.py\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/train-images-idx3-ubyte.gz\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/train-labels-idx1-ubyte.gz\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/t10k-images-idx3-ubyte.gz\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/t10k-labels-idx1-ubyte.gz\n2017-04-20 19:16:15.388639: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:901] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-04-20 19:16:15.389019: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 0 with properties:\nname: GeForce GTX 1060 6GB\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.7085\npciBusID 0000:22:00.0\nTotal memory: 5.93GiB\nFree memory: 4.97GiB\n2017-04-20 19:16:15.389036: I tensorflow/core/common_runtime/gpu/gpu_device.cc:908] DMA: 0\n2017-04-20 19:16:15.389042: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 0:   Y\n2017-04-20 19:16:15.389055: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1060 6GB, pci bus id: 0000:22:00.0)\nAccuracy at step 0: 0.0981\nAccuracy at step 10: 0.7258\nAccuracy at step 20: 0.8151\nAccuracy at step 30: 0.8572\nAccuracy at step 40: 0.879\nAccuracy at step 50: 0.8949\nAccuracy at step 60: 0.9052\nAccuracy at step 70: 0.9058\nAccuracy at step 80: 0.915\nAccuracy at step 90: 0.9137\n2017-04-20 19:16:20.708545: I tensorflow/stream_executor/dso_loader.cc:129] Couldn't open CUDA library libcupti.so.8.0. LD_LIBRARY_PATH: /usr/local/lib:/usr/local/cuda/lib64:/usr/lib/x86_64-linux-gnu:/usr/lib/nvidia-375\n2017-04-20 19:16:20.708600: F tensorflow/core/platform/default/gpu/cupti_wrapper.cc:59] Non-OK-status: ::tensorflow::Env::Default()->GetSymbolFromLibrary( GetDsoHandle(), kName, &f) status: Not found: /usr/local/lib/python3.5/dist-packages/tensorfl\now/python/_pywrap_tensorflow_internal.so: undefined symbol: cuptiActivityRegisterCallbackscould not find cuptiActivityRegisterCallbacksin libcupti DSO\n\nsource code:\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/mnist/mnist_with_summaries.py\nProblem is, that tensorflow looks for libcupti.so.8.0, but only libcupti.so.7.5 is installed:\nstefano@stefano-linux:~$ ls /usr/lib/x86_64-linux-gnu | grep libcupti*\nlibcupti.so\nlibcupti.so.7.5\nlibcupti.so.7.5.18\n\nI installed libcupti like described in the Install section on the Tensorflow website:\nsudo apt-get install libcupti-dev\n\nlibcupti-dev 8.0 is not available for Ubuntu 16.04.", "body": "- OS: Ubuntu 16.04\r\n- *TensorFlow installed from: source\r\n- *TensorFlow version*: 1.1.0-rc2\r\n- *Bazel version (if compiling from source)*: 0.4.5\r\n- *CUDA/cuDNN version*: 8.0/6.0\r\n- *GPU Model and Memory*: NVIDIA GTX 1060, 6 GB RAM\r\n- *Exact command to reproduce*:\r\n------------------------\r\nMNIST examples works fine, bute MNIST example with summaries crashes with:\r\n\r\n```\r\n(tensorflow) stefano@stefano-linux:~/Dokumente/Programming/Python/TensorflowCoreTutorial$ /home/stefano/tensorflow/bin/python3 /home/stefano/Dokumente/Programming/Python/TensorflowCoreTutorial/src/mnist_with_summaries.py\r\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/train-images-idx3-ubyte.gz\r\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/train-labels-idx1-ubyte.gz\r\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/t10k-images-idx3-ubyte.gz\r\nExtracting /home/stefano/Dokumente/Programming/Python/MNIST/t10k-labels-idx1-ubyte.gz\r\n2017-04-20 19:16:15.388639: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:901] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2017-04-20 19:16:15.389019: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 0 with properties:\r\nname: GeForce GTX 1060 6GB\r\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.7085\r\npciBusID 0000:22:00.0\r\nTotal memory: 5.93GiB\r\nFree memory: 4.97GiB\r\n2017-04-20 19:16:15.389036: I tensorflow/core/common_runtime/gpu/gpu_device.cc:908] DMA: 0\r\n2017-04-20 19:16:15.389042: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 0:   Y\r\n2017-04-20 19:16:15.389055: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1060 6GB, pci bus id: 0000:22:00.0)\r\nAccuracy at step 0: 0.0981\r\nAccuracy at step 10: 0.7258\r\nAccuracy at step 20: 0.8151\r\nAccuracy at step 30: 0.8572\r\nAccuracy at step 40: 0.879\r\nAccuracy at step 50: 0.8949\r\nAccuracy at step 60: 0.9052\r\nAccuracy at step 70: 0.9058\r\nAccuracy at step 80: 0.915\r\nAccuracy at step 90: 0.9137\r\n2017-04-20 19:16:20.708545: I tensorflow/stream_executor/dso_loader.cc:129] Couldn't open CUDA library libcupti.so.8.0. LD_LIBRARY_PATH: /usr/local/lib:/usr/local/cuda/lib64:/usr/lib/x86_64-linux-gnu:/usr/lib/nvidia-375\r\n2017-04-20 19:16:20.708600: F tensorflow/core/platform/default/gpu/cupti_wrapper.cc:59] Non-OK-status: ::tensorflow::Env::Default()->GetSymbolFromLibrary( GetDsoHandle(), kName, &f) status: Not found: /usr/local/lib/python3.5/dist-packages/tensorfl\r\now/python/_pywrap_tensorflow_internal.so: undefined symbol: cuptiActivityRegisterCallbackscould not find cuptiActivityRegisterCallbacksin libcupti DSO\r\n```\r\n\r\nsource code:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/mnist/mnist_with_summaries.py\r\n\r\nProblem is, that tensorflow looks for libcupti.so.8.0, but only libcupti.so.7.5 is installed:\r\n\r\n```\r\nstefano@stefano-linux:~$ ls /usr/lib/x86_64-linux-gnu | grep libcupti*\r\nlibcupti.so\r\nlibcupti.so.7.5\r\nlibcupti.so.7.5.18\r\n```\r\n\r\nI installed libcupti like described in the Install section on the Tensorflow website:\r\n\r\n```\r\nsudo apt-get install libcupti-dev\r\n```\r\n\r\nlibcupti-dev 8.0 is not available for Ubuntu 16.04."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/406291181", "html_url": "https://github.com/tensorflow/tensorflow/issues/20886#issuecomment-406291181", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20886", "id": 406291181, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjI5MTE4MQ==", "user": {"login": "Basil-M", "id": 20246313, "node_id": "MDQ6VXNlcjIwMjQ2MzEz", "avatar_url": "https://avatars1.githubusercontent.com/u/20246313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Basil-M", "html_url": "https://github.com/Basil-M", "followers_url": "https://api.github.com/users/Basil-M/followers", "following_url": "https://api.github.com/users/Basil-M/following{/other_user}", "gists_url": "https://api.github.com/users/Basil-M/gists{/gist_id}", "starred_url": "https://api.github.com/users/Basil-M/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Basil-M/subscriptions", "organizations_url": "https://api.github.com/users/Basil-M/orgs", "repos_url": "https://api.github.com/users/Basil-M/repos", "events_url": "https://api.github.com/users/Basil-M/events{/privacy}", "received_events_url": "https://api.github.com/users/Basil-M/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-19T14:14:59Z", "updated_at": "2018-07-19T14:14:59Z", "author_association": "NONE", "body_html": "<p>I think this issue may be fixed with correct usage of tf.contrib.create_eval_graph()<br>\nThere are currently two issues I have there:</p>\n<ol>\n<li>If I use create_eval_graph() after create_training_graph() it doesn't correctly change the graph</li>\n<li>If I freeze the graph after create_eval_graph() (having not applied create_training_graph()) it fails, giving the following error:</li>\n</ol>\n<blockquote>\n<p>tensorflow.python.framework.errors_impl.FailedPreconditionError: Attempting to use uninitialized value Output/weights_quant/min<br>\n[[Node: _retval_Output/weights_quant/min_0_53 = _Retval<a href=\"Output/weights_quant/min\">T=DT_FLOAT, index=53, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"</a>]]</p>\n</blockquote>\n<p>Intuitively I feel create_eval_graph() applied after create_training_graph() should work and also have values initialised correctly but it doesn't want to play nice!</p>\n<p>I also thought it may be I need to run more data through the graph after creating the eval_graph but this did not work.</p>", "body_text": "I think this issue may be fixed with correct usage of tf.contrib.create_eval_graph()\nThere are currently two issues I have there:\n\nIf I use create_eval_graph() after create_training_graph() it doesn't correctly change the graph\nIf I freeze the graph after create_eval_graph() (having not applied create_training_graph()) it fails, giving the following error:\n\n\ntensorflow.python.framework.errors_impl.FailedPreconditionError: Attempting to use uninitialized value Output/weights_quant/min\n[[Node: _retval_Output/weights_quant/min_0_53 = _RetvalT=DT_FLOAT, index=53, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]]\n\nIntuitively I feel create_eval_graph() applied after create_training_graph() should work and also have values initialised correctly but it doesn't want to play nice!\nI also thought it may be I need to run more data through the graph after creating the eval_graph but this did not work.", "body": "I think this issue may be fixed with correct usage of tf.contrib.create_eval_graph()\r\nThere are currently two issues I have there:\r\n\r\n1. If I use create_eval_graph() after create_training_graph() it doesn't correctly change the graph\r\n2. If I freeze the graph after create_eval_graph() (having not applied create_training_graph()) it fails, giving the following error:\r\n\r\n> tensorflow.python.framework.errors_impl.FailedPreconditionError: Attempting to use uninitialized value Output/weights_quant/min\r\n> [[Node: _retval_Output/weights_quant/min_0_53 = _Retval[T=DT_FLOAT, index=53, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](Output/weights_quant/min)]]\r\n\r\nIntuitively I feel create_eval_graph() applied after create_training_graph() should work and also have values initialised correctly but it doesn't want to play nice!\r\n\r\nI also thought it may be I need to run more data through the graph after creating the eval_graph but this did not work."}
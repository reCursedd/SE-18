{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/435236254", "html_url": "https://github.com/tensorflow/tensorflow/issues/23405#issuecomment-435236254", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23405", "id": 435236254, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTIzNjI1NA==", "user": {"login": "chuckyoufarlie", "id": 26906432, "node_id": "MDQ6VXNlcjI2OTA2NDMy", "avatar_url": "https://avatars0.githubusercontent.com/u/26906432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chuckyoufarlie", "html_url": "https://github.com/chuckyoufarlie", "followers_url": "https://api.github.com/users/chuckyoufarlie/followers", "following_url": "https://api.github.com/users/chuckyoufarlie/following{/other_user}", "gists_url": "https://api.github.com/users/chuckyoufarlie/gists{/gist_id}", "starred_url": "https://api.github.com/users/chuckyoufarlie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chuckyoufarlie/subscriptions", "organizations_url": "https://api.github.com/users/chuckyoufarlie/orgs", "repos_url": "https://api.github.com/users/chuckyoufarlie/repos", "events_url": "https://api.github.com/users/chuckyoufarlie/events{/privacy}", "received_events_url": "https://api.github.com/users/chuckyoufarlie/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-02T00:54:54Z", "updated_at": "2018-11-02T01:01:41Z", "author_association": "NONE", "body_html": "<p>I'm seeing the same while building against CUDA 10.<br>\nOS - Ubuntu 18.04.1/x86_64<br>\nCUDA/cuDNN - 10.0.130/7.3.1<br>\nbazel - bazel-0.18.1<br>\nGCC - gcc (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0<br>\nCUDA_HOME=/opt/cuda-10.0<br>\nCUDA_TOOLKIT_PATH=/opt/cuda-10.0</p>\n<pre><code>$ bazel version  \nWARNING: Processed legacy workspace file /scratch/opt/tensorflow-1.12.0/src/tensorflow/tools/bazel.rc. This file will not be processed in the next release of Bazel. Please read https://github.com/bazelbuild/bazel/issues/6319 for further information, including how to upgrade.\nWARNING: Output base 'homes/fultz/.cache/bazel/_bazel_fultz/a3796d4ff5cfe6f876d63615ff95821d' is on NFS. This may lead to surprising failures and undetermined behavior.\nBuild label: 0.18.1\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Oct 31 14:46:05 2018 (1540997165)\nBuild timestamp: 1540997165\nBuild timestamp as int: 1540997165\n\n$ CUDA_TOOLKIT_PATH=/opt/cuda-10.0 bazel build --config=noaws --config=nogcp --config=nohdfs --config=noignite --config=nokafka //tensorflow/tools/pip_packa\nge:build_pip_package\n...\nERROR: /homes/fultz/.cache/bazel/_bazel_fultz/a3796d4ff5cfe6f876d63615ff95821d/external/nccl_archive/BUILD.bazel:139:1: Executing genrule @nccl_archive//:device_code_fatbin_h failed (Exit 1)\n/bin/bash: CUDA_TOOLKIT_PATH: unbound variable\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 41.210s, Critical Path: 26.82s\nINFO: 277 processes: 277 local.\nFAILED: Build did NOT complete successfully\n</code></pre>", "body_text": "I'm seeing the same while building against CUDA 10.\nOS - Ubuntu 18.04.1/x86_64\nCUDA/cuDNN - 10.0.130/7.3.1\nbazel - bazel-0.18.1\nGCC - gcc (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\nCUDA_HOME=/opt/cuda-10.0\nCUDA_TOOLKIT_PATH=/opt/cuda-10.0\n$ bazel version  \nWARNING: Processed legacy workspace file /scratch/opt/tensorflow-1.12.0/src/tensorflow/tools/bazel.rc. This file will not be processed in the next release of Bazel. Please read https://github.com/bazelbuild/bazel/issues/6319 for further information, including how to upgrade.\nWARNING: Output base 'homes/fultz/.cache/bazel/_bazel_fultz/a3796d4ff5cfe6f876d63615ff95821d' is on NFS. This may lead to surprising failures and undetermined behavior.\nBuild label: 0.18.1\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Oct 31 14:46:05 2018 (1540997165)\nBuild timestamp: 1540997165\nBuild timestamp as int: 1540997165\n\n$ CUDA_TOOLKIT_PATH=/opt/cuda-10.0 bazel build --config=noaws --config=nogcp --config=nohdfs --config=noignite --config=nokafka //tensorflow/tools/pip_packa\nge:build_pip_package\n...\nERROR: /homes/fultz/.cache/bazel/_bazel_fultz/a3796d4ff5cfe6f876d63615ff95821d/external/nccl_archive/BUILD.bazel:139:1: Executing genrule @nccl_archive//:device_code_fatbin_h failed (Exit 1)\n/bin/bash: CUDA_TOOLKIT_PATH: unbound variable\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 41.210s, Critical Path: 26.82s\nINFO: 277 processes: 277 local.\nFAILED: Build did NOT complete successfully", "body": "I'm seeing the same while building against CUDA 10.\r\nOS - Ubuntu 18.04.1/x86_64\r\nCUDA/cuDNN - 10.0.130/7.3.1\r\nbazel - bazel-0.18.1\r\nGCC - gcc (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\r\nCUDA_HOME=/opt/cuda-10.0\r\nCUDA_TOOLKIT_PATH=/opt/cuda-10.0\r\n\r\n```\r\n$ bazel version  \r\nWARNING: Processed legacy workspace file /scratch/opt/tensorflow-1.12.0/src/tensorflow/tools/bazel.rc. This file will not be processed in the next release of Bazel. Please read https://github.com/bazelbuild/bazel/issues/6319 for further information, including how to upgrade.\r\nWARNING: Output base 'homes/fultz/.cache/bazel/_bazel_fultz/a3796d4ff5cfe6f876d63615ff95821d' is on NFS. This may lead to surprising failures and undetermined behavior.\r\nBuild label: 0.18.1\r\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed Oct 31 14:46:05 2018 (1540997165)\r\nBuild timestamp: 1540997165\r\nBuild timestamp as int: 1540997165\r\n\r\n$ CUDA_TOOLKIT_PATH=/opt/cuda-10.0 bazel build --config=noaws --config=nogcp --config=nohdfs --config=noignite --config=nokafka //tensorflow/tools/pip_packa\r\nge:build_pip_package\r\n...\r\nERROR: /homes/fultz/.cache/bazel/_bazel_fultz/a3796d4ff5cfe6f876d63615ff95821d/external/nccl_archive/BUILD.bazel:139:1: Executing genrule @nccl_archive//:device_code_fatbin_h failed (Exit 1)\r\n/bin/bash: CUDA_TOOLKIT_PATH: unbound variable\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 41.210s, Critical Path: 26.82s\r\nINFO: 277 processes: 277 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n"}
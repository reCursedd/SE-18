{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7416", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7416/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7416/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7416/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7416", "id": 206821127, "node_id": "MDU6SXNzdWUyMDY4MjExMjc=", "number": 7416, "title": "Bazel build fails on SUSE Enterprise due to too many open files", "user": {"login": "themightyoarfish", "id": 11613312, "node_id": "MDQ6VXNlcjExNjEzMzEy", "avatar_url": "https://avatars0.githubusercontent.com/u/11613312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/themightyoarfish", "html_url": "https://github.com/themightyoarfish", "followers_url": "https://api.github.com/users/themightyoarfish/followers", "following_url": "https://api.github.com/users/themightyoarfish/following{/other_user}", "gists_url": "https://api.github.com/users/themightyoarfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/themightyoarfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/themightyoarfish/subscriptions", "organizations_url": "https://api.github.com/users/themightyoarfish/orgs", "repos_url": "https://api.github.com/users/themightyoarfish/repos", "events_url": "https://api.github.com/users/themightyoarfish/events{/privacy}", "received_events_url": "https://api.github.com/users/themightyoarfish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-02-10T15:13:12Z", "updated_at": "2017-02-10T17:44:23Z", "closed_at": "2017-02-10T17:28:00Z", "author_association": "CONTRIBUTOR", "body_html": "<p>This could also be a bazel issue, I don't know.</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>None</p>\n<h3>Environment info</h3>\n<p>Operating System: SUSE Linux Enterprise Server 12 SP1</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<pre><code>$ ls /usr/local/cuda/lib/libcuda*\n/usr/local/cuda/lib/libcudadevrt.a  /usr/local/cuda/lib/libcudart.so.7.0     /usr/local/cuda/lib/libcudart_static.a\n/usr/local/cuda/lib/libcudart.so    /usr/local/cuda/lib/libcudart.so.7.0.28\n$ ls ~/.local/lib64/libcudnn*\n/home/student/r/rdiederichse/.local/lib64/libcudnn.so    /home/student/r/rdiederichse/.local/lib64/libcudnn.so.4.0.7\n/home/student/r/rdiederichse/.local/lib64/libcudnn.so.4  /home/student/r/rdiederichse/.local/lib64/libcudnn_static.a\n</code></pre>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>): <code>d86cadcdf03ae6fef63f34c90150a4518a121de8</code></li>\n<li>The output of <code>bazel version</code></li>\n</ol>\n<pre><code>Warning: ignoring http_proxy in environment.\nBuild label: 0.4.4- (@non-git)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Feb 10 14:39:20 2017 (1486737560)\nBuild timestamp: 1486737560\nBuild timestamp as int: 1486737560\n</code></pre>\n<p>The error I get when  running <code>bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package</code> is (after some time)</p>\n<pre><code>ERROR: /home/student/r/rdiederichse/.cache/bazel/_bazel_rdiederichse/e5cce820cc082410b4fcc604db349066/external/jpeg/BUILD:37:1: C++ compilation of rule '@jpeg//:jpeg' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 33 argument(s) skipped): java.io.IOException: Cannot run program \"/home/student/r/rdiederichse/.cache/bazel/_bazel_rdiederichse/e5cce820cc082410b4fcc604db349066/execroot/tensorflow/_bin/process-wrapper\" (in directory \"/home/student/r/rdiederichse/.cache/bazel/_bazel_rdiederichse/e5cce820cc082410b4fcc604db349066/execroot/tensorflow\"): error=24, Too many open files.\n</code></pre>", "body_text": "This could also be a bazel issue, I don't know.\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nNone\nEnvironment info\nOperating System: SUSE Linux Enterprise Server 12 SP1\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n$ ls /usr/local/cuda/lib/libcuda*\n/usr/local/cuda/lib/libcudadevrt.a  /usr/local/cuda/lib/libcudart.so.7.0     /usr/local/cuda/lib/libcudart_static.a\n/usr/local/cuda/lib/libcudart.so    /usr/local/cuda/lib/libcudart.so.7.0.28\n$ ls ~/.local/lib64/libcudnn*\n/home/student/r/rdiederichse/.local/lib64/libcudnn.so    /home/student/r/rdiederichse/.local/lib64/libcudnn.so.4.0.7\n/home/student/r/rdiederichse/.local/lib64/libcudnn.so.4  /home/student/r/rdiederichse/.local/lib64/libcudnn_static.a\n\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD): d86cadcdf03ae6fef63f34c90150a4518a121de8\nThe output of bazel version\n\nWarning: ignoring http_proxy in environment.\nBuild label: 0.4.4- (@non-git)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Feb 10 14:39:20 2017 (1486737560)\nBuild timestamp: 1486737560\nBuild timestamp as int: 1486737560\n\nThe error I get when  running bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package is (after some time)\nERROR: /home/student/r/rdiederichse/.cache/bazel/_bazel_rdiederichse/e5cce820cc082410b4fcc604db349066/external/jpeg/BUILD:37:1: C++ compilation of rule '@jpeg//:jpeg' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 33 argument(s) skipped): java.io.IOException: Cannot run program \"/home/student/r/rdiederichse/.cache/bazel/_bazel_rdiederichse/e5cce820cc082410b4fcc604db349066/execroot/tensorflow/_bin/process-wrapper\" (in directory \"/home/student/r/rdiederichse/.cache/bazel/_bazel_rdiederichse/e5cce820cc082410b4fcc604db349066/execroot/tensorflow\"): error=24, Too many open files.", "body": "This could also be a bazel issue, I don't know.\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nNone\r\n\r\n### Environment info\r\nOperating System: SUSE Linux Enterprise Server 12 SP1\r\n\r\nInstalled version of CUDA and cuDNN: \r\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\r\n```\r\n$ ls /usr/local/cuda/lib/libcuda*\r\n/usr/local/cuda/lib/libcudadevrt.a  /usr/local/cuda/lib/libcudart.so.7.0     /usr/local/cuda/lib/libcudart_static.a\r\n/usr/local/cuda/lib/libcudart.so    /usr/local/cuda/lib/libcudart.so.7.0.28\r\n$ ls ~/.local/lib64/libcudnn*\r\n/home/student/r/rdiederichse/.local/lib64/libcudnn.so    /home/student/r/rdiederichse/.local/lib64/libcudnn.so.4.0.7\r\n/home/student/r/rdiederichse/.local/lib64/libcudnn.so.4  /home/student/r/rdiederichse/.local/lib64/libcudnn_static.a\r\n```\r\nIf installed from source, provide \r\n\r\n1. The commit hash (`git rev-parse HEAD`): `d86cadcdf03ae6fef63f34c90150a4518a121de8`\r\n2. The output of `bazel version`\r\n```\r\nWarning: ignoring http_proxy in environment.\r\nBuild label: 0.4.4- (@non-git)\r\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Fri Feb 10 14:39:20 2017 (1486737560)\r\nBuild timestamp: 1486737560\r\nBuild timestamp as int: 1486737560\r\n```\r\n\r\nThe error I get when  running `bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package` is (after some time)\r\n```\r\nERROR: /home/student/r/rdiederichse/.cache/bazel/_bazel_rdiederichse/e5cce820cc082410b4fcc604db349066/external/jpeg/BUILD:37:1: C++ compilation of rule '@jpeg//:jpeg' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 33 argument(s) skipped): java.io.IOException: Cannot run program \"/home/student/r/rdiederichse/.cache/bazel/_bazel_rdiederichse/e5cce820cc082410b4fcc604db349066/execroot/tensorflow/_bin/process-wrapper\" (in directory \"/home/student/r/rdiederichse/.cache/bazel/_bazel_rdiederichse/e5cce820cc082410b4fcc604db349066/execroot/tensorflow\"): error=24, Too many open files.\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17191", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17191/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17191/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17191/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17191", "id": 299265494, "node_id": "MDU6SXNzdWUyOTkyNjU0OTQ=", "number": 17191, "title": "ValueError: Unknown activation function:relu6  while converting MobileNet under Keras to estimator using model_to_estimator", "user": {"login": "SofaPotatos", "id": 8243382, "node_id": "MDQ6VXNlcjgyNDMzODI=", "avatar_url": "https://avatars0.githubusercontent.com/u/8243382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SofaPotatos", "html_url": "https://github.com/SofaPotatos", "followers_url": "https://api.github.com/users/SofaPotatos/followers", "following_url": "https://api.github.com/users/SofaPotatos/following{/other_user}", "gists_url": "https://api.github.com/users/SofaPotatos/gists{/gist_id}", "starred_url": "https://api.github.com/users/SofaPotatos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SofaPotatos/subscriptions", "organizations_url": "https://api.github.com/users/SofaPotatos/orgs", "repos_url": "https://api.github.com/users/SofaPotatos/repos", "events_url": "https://api.github.com/users/SofaPotatos/events{/privacy}", "received_events_url": "https://api.github.com/users/SofaPotatos/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-02-22T08:48:34Z", "updated_at": "2018-10-26T08:14:01Z", "closed_at": "2018-02-26T05:51:23Z", "author_association": "NONE", "body_html": "<p>Hi, I try to convert a mobilenet model under <code>tf.keras.application</code> to estimator using model_to_estimator.<br>\nI get an error (<code>ValueError: Unknown activation function:relu6</code>) due to relu6 is a customized activation defined in mobilenet.</p>\n<p>Thanks for help.</p>\n<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nLinux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nSource</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.6r</li>\n<li><strong>Python version</strong>:<br>\n3.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.10.1</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\nGCC</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\n9.0</li>\n<li><strong>GPU model and memory</strong>:<br>\nGTX 1070</li>\n<li><strong>Have I written custom code</strong>:<br>\nNo</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\nkeras_mobilenet<span class=\"pl-k\">=</span> tf.keras.applications.mobilenet.MobileNet(<span class=\"pl-v\">weights</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">None</span>)\nkeras_mobilenet.compile(<span class=\"pl-v\">optimizer</span><span class=\"pl-k\">=</span>tf.keras.optimizers.SGD(<span class=\"pl-v\">lr</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">0.0001</span>, <span class=\"pl-v\">momentum</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">0.9</span>),\n                          <span class=\"pl-v\">loss</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>categorical_crossentropy<span class=\"pl-pds\">'</span></span>,\n                          <span class=\"pl-v\">metric</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>accuracy<span class=\"pl-pds\">'</span></span>)\nmobilenet_estimator <span class=\"pl-k\">=</span> tf.keras.estimator.model_to_estimator(<span class=\"pl-v\">keras_model</span><span class=\"pl-k\">=</span>keras_mobilenet)</pre></div>", "body_text": "Hi, I try to convert a mobilenet model under tf.keras.application to estimator using model_to_estimator.\nI get an error (ValueError: Unknown activation function:relu6) due to relu6 is a customized activation defined in mobilenet.\nThanks for help.\nSystem information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nLinux Ubuntu 16.04\nTensorFlow installed from (source or binary):\nSource\nTensorFlow version (use command below):\n1.6r\nPython version:\n3.5\nBazel version (if compiling from source):\n0.10.1\nGCC/Compiler version (if compiling from source):\nGCC\nCUDA/cuDNN version:\n9.0\nGPU model and memory:\nGTX 1070\nHave I written custom code:\nNo\nExact command to reproduce:\n\nimport tensorflow as tf\nkeras_mobilenet= tf.keras.applications.mobilenet.MobileNet(weights=None)\nkeras_mobilenet.compile(optimizer=tf.keras.optimizers.SGD(lr=0.0001, momentum=0.9),\n                          loss='categorical_crossentropy',\n                          metric='accuracy')\nmobilenet_estimator = tf.keras.estimator.model_to_estimator(keras_model=keras_mobilenet)", "body": "Hi, I try to convert a mobilenet model under `tf.keras.application` to estimator using model_to_estimator.\r\nI get an error (`ValueError: Unknown activation function:relu6`) due to relu6 is a customized activation defined in mobilenet.\r\n\r\nThanks for help.\r\n\r\n### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nLinux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**:\r\nSource\r\n- **TensorFlow version (use command below)**:\r\n1.6r\r\n- **Python version**: \r\n3.5\r\n- **Bazel version (if compiling from source)**:\r\n0.10.1\r\n- **GCC/Compiler version (if compiling from source)**:\r\nGCC\r\n- **CUDA/cuDNN version**:\r\n9.0\r\n- **GPU model and memory**:\r\nGTX 1070\r\n- **Have I written custom code**: \r\nNo\r\n- **Exact command to reproduce**:\r\n```python\r\nimport tensorflow as tf\r\nkeras_mobilenet= tf.keras.applications.mobilenet.MobileNet(weights=None)\r\nkeras_mobilenet.compile(optimizer=tf.keras.optimizers.SGD(lr=0.0001, momentum=0.9),\r\n                          loss='categorical_crossentropy',\r\n                          metric='accuracy')\r\nmobilenet_estimator = tf.keras.estimator.model_to_estimator(keras_model=keras_mobilenet)\r\n```\r\n\r\n\r\n\r\n\r\n\r\n"}
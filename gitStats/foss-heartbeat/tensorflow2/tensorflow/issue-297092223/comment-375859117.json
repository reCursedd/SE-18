{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/375859117", "html_url": "https://github.com/tensorflow/tensorflow/issues/17009#issuecomment-375859117", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17009", "id": 375859117, "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTg1OTExNw==", "user": {"login": "peterwilliams97", "id": 103773, "node_id": "MDQ6VXNlcjEwMzc3Mw==", "avatar_url": "https://avatars0.githubusercontent.com/u/103773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peterwilliams97", "html_url": "https://github.com/peterwilliams97", "followers_url": "https://api.github.com/users/peterwilliams97/followers", "following_url": "https://api.github.com/users/peterwilliams97/following{/other_user}", "gists_url": "https://api.github.com/users/peterwilliams97/gists{/gist_id}", "starred_url": "https://api.github.com/users/peterwilliams97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peterwilliams97/subscriptions", "organizations_url": "https://api.github.com/users/peterwilliams97/orgs", "repos_url": "https://api.github.com/users/peterwilliams97/repos", "events_url": "https://api.github.com/users/peterwilliams97/events{/privacy}", "received_events_url": "https://api.github.com/users/peterwilliams97/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-24T09:21:32Z", "updated_at": "2018-03-24T09:28:31Z", "author_association": "NONE", "body_html": "<p>I get the same error with Keras on Ubuntu 16.04</p>\n<p>My model is</p>\n<pre><code>inp1 = Input(shape=(maxlen, ), name='w_inp')\n  x = Embedding(embedding_matrix.shape[0],\n                embedding_matrix.shape[1],\n                weights=[embedding_matrix],\n                trainable=trainable, name='w_emb')(inp1)\n  x = SpatialDropout1D(dropout, name='w_drop')(x)\n\n  for i in range(rnn_layers):\n      x = Bidirectional(CuDNNGRU(n_hidden, return_sequences=True), name='w_bidi%d' % i)(x)\n  avg_pool = GlobalAveragePooling1D(name='w_ave')(x)\n  max_pool = GlobalMaxPooling1D(name='w_max')(x)\n  conc1 = concatenate([avg_pool, max_pool], name='w_conc')\n\n  inp2 = Input(shape=(char_maxlen, ), name='c_inp')\n  x = Embedding(char_embedding_matrix.shape[0],\n                char_embedding_matrix.shape[1],\n                weights=[char_embedding_matrix], name='c_emb')(inp2)\n  x = SpatialDropout1D(dropout, name='c_drop')(x)\n\n  for i in range(rnn_layers - 1):\n      x = Bidirectional(CuDNNGRU(n_hidden, return_sequences=True), name='c_bidi%d' % i)(x)\n  conc2 = Bidirectional(Rec(n_hidden, return_sequences=False), name='c_bidi%d' % rnn_layers)(x)\n\n  conc = concatenate([conc1, conc2], name='w_c_conc')\n\n  outp = Dense(6, activation=\"sigmoid\", name='output')(conc)\n\n  model = Model(inputs=[inp1, inp2], outputs=outp)\n  model.compile(loss='binary_crossentropy',\n                optimizer='adam',\n                metrics=['accuracy'])\n</code></pre>", "body_text": "I get the same error with Keras on Ubuntu 16.04\nMy model is\ninp1 = Input(shape=(maxlen, ), name='w_inp')\n  x = Embedding(embedding_matrix.shape[0],\n                embedding_matrix.shape[1],\n                weights=[embedding_matrix],\n                trainable=trainable, name='w_emb')(inp1)\n  x = SpatialDropout1D(dropout, name='w_drop')(x)\n\n  for i in range(rnn_layers):\n      x = Bidirectional(CuDNNGRU(n_hidden, return_sequences=True), name='w_bidi%d' % i)(x)\n  avg_pool = GlobalAveragePooling1D(name='w_ave')(x)\n  max_pool = GlobalMaxPooling1D(name='w_max')(x)\n  conc1 = concatenate([avg_pool, max_pool], name='w_conc')\n\n  inp2 = Input(shape=(char_maxlen, ), name='c_inp')\n  x = Embedding(char_embedding_matrix.shape[0],\n                char_embedding_matrix.shape[1],\n                weights=[char_embedding_matrix], name='c_emb')(inp2)\n  x = SpatialDropout1D(dropout, name='c_drop')(x)\n\n  for i in range(rnn_layers - 1):\n      x = Bidirectional(CuDNNGRU(n_hidden, return_sequences=True), name='c_bidi%d' % i)(x)\n  conc2 = Bidirectional(Rec(n_hidden, return_sequences=False), name='c_bidi%d' % rnn_layers)(x)\n\n  conc = concatenate([conc1, conc2], name='w_c_conc')\n\n  outp = Dense(6, activation=\"sigmoid\", name='output')(conc)\n\n  model = Model(inputs=[inp1, inp2], outputs=outp)\n  model.compile(loss='binary_crossentropy',\n                optimizer='adam',\n                metrics=['accuracy'])", "body": "I get the same error with Keras on Ubuntu 16.04\r\n\r\nMy model is\r\n\r\n  ```\r\n inp1 = Input(shape=(maxlen, ), name='w_inp')\r\n    x = Embedding(embedding_matrix.shape[0],\r\n                  embedding_matrix.shape[1],\r\n                  weights=[embedding_matrix],\r\n                  trainable=trainable, name='w_emb')(inp1)\r\n    x = SpatialDropout1D(dropout, name='w_drop')(x)\r\n\r\n    for i in range(rnn_layers):\r\n        x = Bidirectional(CuDNNGRU(n_hidden, return_sequences=True), name='w_bidi%d' % i)(x)\r\n    avg_pool = GlobalAveragePooling1D(name='w_ave')(x)\r\n    max_pool = GlobalMaxPooling1D(name='w_max')(x)\r\n    conc1 = concatenate([avg_pool, max_pool], name='w_conc')\r\n \r\n    inp2 = Input(shape=(char_maxlen, ), name='c_inp')\r\n    x = Embedding(char_embedding_matrix.shape[0],\r\n                  char_embedding_matrix.shape[1],\r\n                  weights=[char_embedding_matrix], name='c_emb')(inp2)\r\n    x = SpatialDropout1D(dropout, name='c_drop')(x)\r\n\r\n    for i in range(rnn_layers - 1):\r\n        x = Bidirectional(CuDNNGRU(n_hidden, return_sequences=True), name='c_bidi%d' % i)(x)\r\n    conc2 = Bidirectional(Rec(n_hidden, return_sequences=False), name='c_bidi%d' % rnn_layers)(x)\r\n\r\n    conc = concatenate([conc1, conc2], name='w_c_conc')\r\n\r\n    outp = Dense(6, activation=\"sigmoid\", name='output')(conc)\r\n\r\n    model = Model(inputs=[inp1, inp2], outputs=outp)\r\n    model.compile(loss='binary_crossentropy',\r\n                  optimizer='adam',\r\n                  metrics=['accuracy'])\r\n```"}
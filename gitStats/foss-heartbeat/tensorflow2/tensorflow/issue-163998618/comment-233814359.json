{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/233814359", "html_url": "https://github.com/tensorflow/tensorflow/issues/3200#issuecomment-233814359", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3200", "id": 233814359, "node_id": "MDEyOklzc3VlQ29tbWVudDIzMzgxNDM1OQ==", "user": {"login": "JulianNorton", "id": 2412992, "node_id": "MDQ6VXNlcjI0MTI5OTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/2412992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JulianNorton", "html_url": "https://github.com/JulianNorton", "followers_url": "https://api.github.com/users/JulianNorton/followers", "following_url": "https://api.github.com/users/JulianNorton/following{/other_user}", "gists_url": "https://api.github.com/users/JulianNorton/gists{/gist_id}", "starred_url": "https://api.github.com/users/JulianNorton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JulianNorton/subscriptions", "organizations_url": "https://api.github.com/users/JulianNorton/orgs", "repos_url": "https://api.github.com/users/JulianNorton/repos", "events_url": "https://api.github.com/users/JulianNorton/events{/privacy}", "received_events_url": "https://api.github.com/users/JulianNorton/received_events", "type": "User", "site_admin": false}, "created_at": "2016-07-20T01:29:19Z", "updated_at": "2016-07-20T01:29:41Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1229575\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/hengtze\">@hengtze</a><br>\n<strong>I can confirm this issue is present in the most recent version of code.</strong> I was trying to do the tutorial here: <a href=\"https://www.tensorflow.org/versions/r0.9/tutorials/wide/index.html\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.9/tutorials/wide/index.html</a> using <a href=\"https://github.com/JulianNorton/trump-weather/blob/87062b07e037e1c3dedb06bd45c95d222e175f85/tensor-flow.py\">this code</a>.</p>\n<p>Python 3.5.1<br>\nTensorflow 0.9.0</p>\n<h2>Problem</h2>\n<pre><code>def _get_dnn_feature_columns(self):\n      return sorted(\n        set(self._dnn_feature_columns),\n        key=lambda x: x.key) if self._dnn_feature_columns else None\n</code></pre>\n<p>in dnn_linear_combined.py was causing the issue as <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1198509\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/skywildworld\">@skywildworld</a> mentioned.</p>\n<pre><code>  File \"/usr/local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 216, in _get_dnn_feature_columns\n    self._dnn_feature_columns)) if self._dnn_feature_columns else None\nTypeError: unorderable types: _SparseColumnKeys() &lt; str()\n</code></pre>\n<h2>Solution</h2>\n<p>Change line 214 in <code>dnn_linear_combined.py</code></p>\n<pre><code>def _get_dnn_feature_columns(self):\n      return sorted(\n        set(self._dnn_feature_columns),\n        key=lambda x: x.key) if self._dnn_feature_columns else None\n</code></pre>\n<p>and now the program works with this output</p>\n<pre><code>accuracy: 0.820588\neval_auc: 0.8732\nloss: 1.13403\n</code></pre>", "body_text": "@hengtze\nI can confirm this issue is present in the most recent version of code. I was trying to do the tutorial here: https://www.tensorflow.org/versions/r0.9/tutorials/wide/index.html using this code.\nPython 3.5.1\nTensorflow 0.9.0\nProblem\ndef _get_dnn_feature_columns(self):\n      return sorted(\n        set(self._dnn_feature_columns),\n        key=lambda x: x.key) if self._dnn_feature_columns else None\n\nin dnn_linear_combined.py was causing the issue as @skywildworld mentioned.\n  File \"/usr/local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 216, in _get_dnn_feature_columns\n    self._dnn_feature_columns)) if self._dnn_feature_columns else None\nTypeError: unorderable types: _SparseColumnKeys() < str()\n\nSolution\nChange line 214 in dnn_linear_combined.py\ndef _get_dnn_feature_columns(self):\n      return sorted(\n        set(self._dnn_feature_columns),\n        key=lambda x: x.key) if self._dnn_feature_columns else None\n\nand now the program works with this output\naccuracy: 0.820588\neval_auc: 0.8732\nloss: 1.13403", "body": "@hengtze \n**I can confirm this issue is present in the most recent version of code.** I was trying to do the tutorial here: https://www.tensorflow.org/versions/r0.9/tutorials/wide/index.html using [this code](https://github.com/JulianNorton/trump-weather/blob/87062b07e037e1c3dedb06bd45c95d222e175f85/tensor-flow.py).\n\nPython 3.5.1\nTensorflow 0.9.0\n\n## Problem\n\n```\ndef _get_dnn_feature_columns(self):\n      return sorted(\n        set(self._dnn_feature_columns),\n        key=lambda x: x.key) if self._dnn_feature_columns else None\n```\n\nin dnn_linear_combined.py was causing the issue as @skywildworld mentioned.\n\n```\n  File \"/usr/local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 216, in _get_dnn_feature_columns\n    self._dnn_feature_columns)) if self._dnn_feature_columns else None\nTypeError: unorderable types: _SparseColumnKeys() < str()\n```\n\n## Solution\n\nChange line 214 in `dnn_linear_combined.py`\n\n```\ndef _get_dnn_feature_columns(self):\n      return sorted(\n        set(self._dnn_feature_columns),\n        key=lambda x: x.key) if self._dnn_feature_columns else None\n```\n\nand now the program works with this output\n\n```\naccuracy: 0.820588\neval_auc: 0.8732\nloss: 1.13403\n```\n"}
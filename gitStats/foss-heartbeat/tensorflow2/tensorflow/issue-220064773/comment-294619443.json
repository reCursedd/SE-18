{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/294619443", "html_url": "https://github.com/tensorflow/tensorflow/issues/9034#issuecomment-294619443", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9034", "id": 294619443, "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDYxOTQ0Mw==", "user": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-17T22:57:07Z", "updated_at": "2017-04-17T22:57:07Z", "author_association": "MEMBER", "body_html": "<blockquote>\n<p>I think updates_collections should not affect the ability to compute gradients?</p>\n</blockquote>\n<p>When you are using a custom <code>updates_collections</code> you are routed to a <em>different</em> implementation of batch norm (the one in <code>tf.layers</code> does not support custom update collections), so this is not about <code>updates_collections</code> affecting gradient computation.</p>\n<p>As far as I can tell you are calling an op (as part of the legacy batch norm layer implementation) that does not implement second-order gradients. Can anyone confirm?</p>", "body_text": "I think updates_collections should not affect the ability to compute gradients?\n\nWhen you are using a custom updates_collections you are routed to a different implementation of batch norm (the one in tf.layers does not support custom update collections), so this is not about updates_collections affecting gradient computation.\nAs far as I can tell you are calling an op (as part of the legacy batch norm layer implementation) that does not implement second-order gradients. Can anyone confirm?", "body": "> I think updates_collections should not affect the ability to compute gradients?\r\n\r\nWhen you are using a custom `updates_collections` you are routed to a *different* implementation of batch norm (the one in `tf.layers` does not support custom update collections), so this is not about `updates_collections` affecting gradient computation.\r\n\r\nAs far as I can tell you are calling an op (as part of the legacy batch norm layer implementation) that does not implement second-order gradients. Can anyone confirm?"}
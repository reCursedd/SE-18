{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/293888194", "html_url": "https://github.com/tensorflow/tensorflow/issues/9034#issuecomment-293888194", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9034", "id": 293888194, "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mzg4ODE5NA==", "user": {"login": "shaform", "id": 367172, "node_id": "MDQ6VXNlcjM2NzE3Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/367172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shaform", "html_url": "https://github.com/shaform", "followers_url": "https://api.github.com/users/shaform/followers", "following_url": "https://api.github.com/users/shaform/following{/other_user}", "gists_url": "https://api.github.com/users/shaform/gists{/gist_id}", "starred_url": "https://api.github.com/users/shaform/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shaform/subscriptions", "organizations_url": "https://api.github.com/users/shaform/orgs", "repos_url": "https://api.github.com/users/shaform/repos", "events_url": "https://api.github.com/users/shaform/events{/privacy}", "received_events_url": "https://api.github.com/users/shaform/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-13T12:59:38Z", "updated_at": "2017-04-13T12:59:38Z", "author_association": "NONE", "body_html": "<p>Looks like it's because when custom <code>updates_collections</code> is set, legacy BN implementation would be used <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.0/tensorflow/contrib/layers/python/layers/layers.py#L536\">https://github.com/tensorflow/tensorflow/blob/r1.0/tensorflow/contrib/layers/python/layers/layers.py#L536</a>. It's likely that this implementation would cause problems when one attempts 2-nd order <code>tf.gradients</code>.</p>", "body_text": "Looks like it's because when custom updates_collections is set, legacy BN implementation would be used https://github.com/tensorflow/tensorflow/blob/r1.0/tensorflow/contrib/layers/python/layers/layers.py#L536. It's likely that this implementation would cause problems when one attempts 2-nd order tf.gradients.", "body": "Looks like it's because when custom `updates_collections` is set, legacy BN implementation would be used https://github.com/tensorflow/tensorflow/blob/r1.0/tensorflow/contrib/layers/python/layers/layers.py#L536. It's likely that this implementation would cause problems when one attempts 2-nd order `tf.gradients`."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/385894710", "html_url": "https://github.com/tensorflow/tensorflow/issues/18376#issuecomment-385894710", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18376", "id": 385894710, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTg5NDcxMA==", "user": {"login": "AndRossi", "id": 6909990, "node_id": "MDQ6VXNlcjY5MDk5OTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/6909990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndRossi", "html_url": "https://github.com/AndRossi", "followers_url": "https://api.github.com/users/AndRossi/followers", "following_url": "https://api.github.com/users/AndRossi/following{/other_user}", "gists_url": "https://api.github.com/users/AndRossi/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndRossi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndRossi/subscriptions", "organizations_url": "https://api.github.com/users/AndRossi/orgs", "repos_url": "https://api.github.com/users/AndRossi/repos", "events_url": "https://api.github.com/users/AndRossi/events{/privacy}", "received_events_url": "https://api.github.com/users/AndRossi/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-02T07:55:36Z", "updated_at": "2018-05-02T07:55:36Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3731025\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/allenlavoie\">@allenlavoie</a>, thanks for addressing this issue.</p>\n<p>Can you please give me more details about your answer?  The part I don't get is this:</p>\n<blockquote>\n<p>features[\"x\"] is the thing that should have an unknown batch dimension, not some reshape down the line</p>\n</blockquote>\n<p>In the MNIST tutorial code, this is the model function:</p>\n<pre><code>def cnn_model_fn(features, labels, mode):\n  \"\"\"Model function for CNN.\"\"\"\n  # Input Layer\n  input_layer = tf.reshape(features[\"x\"], [-1, 28, 28, 1])\n\n</code></pre>\n<p>So <code>features</code> (and thus <code>features[\"x\"]</code>) is a parameter of the model function.<br>\nAccording to the tutorial, the reshape is what sets the batch dimension as unknown.<br>\nI thought that was the reason why it is <em>the very first</em> operation performed in the model function</p>\n<p>How can I make features[\"x\"] have an unknown batch dimension since the beginning?<br>\nI'm a bit confused :(</p>", "body_text": "Hi @allenlavoie, thanks for addressing this issue.\nCan you please give me more details about your answer?  The part I don't get is this:\n\nfeatures[\"x\"] is the thing that should have an unknown batch dimension, not some reshape down the line\n\nIn the MNIST tutorial code, this is the model function:\ndef cnn_model_fn(features, labels, mode):\n  \"\"\"Model function for CNN.\"\"\"\n  # Input Layer\n  input_layer = tf.reshape(features[\"x\"], [-1, 28, 28, 1])\n\n\nSo features (and thus features[\"x\"]) is a parameter of the model function.\nAccording to the tutorial, the reshape is what sets the batch dimension as unknown.\nI thought that was the reason why it is the very first operation performed in the model function\nHow can I make features[\"x\"] have an unknown batch dimension since the beginning?\nI'm a bit confused :(", "body": "Hi @allenlavoie, thanks for addressing this issue.\r\n\r\nCan you please give me more details about your answer?  The part I don't get is this:\r\n> features[\"x\"] is the thing that should have an unknown batch dimension, not some reshape down the line\r\n\r\nIn the MNIST tutorial code, this is the model function:\r\n\r\n```\r\ndef cnn_model_fn(features, labels, mode):\r\n  \"\"\"Model function for CNN.\"\"\"\r\n  # Input Layer\r\n  input_layer = tf.reshape(features[\"x\"], [-1, 28, 28, 1])\r\n\r\n```\r\n\r\nSo `features` (and thus `features[\"x\"]`) is a parameter of the model function.\r\nAccording to the tutorial, the reshape is what sets the batch dimension as unknown.\r\nI thought that was the reason why it is *the very first* operation performed in the model function\r\n\r\nHow can I make features[\"x\"] have an unknown batch dimension since the beginning?\r\nI'm a bit confused :("}
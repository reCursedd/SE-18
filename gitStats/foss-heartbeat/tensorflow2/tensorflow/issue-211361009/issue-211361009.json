{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8008", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8008/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8008/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8008/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/8008", "id": 211361009, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA4NzM3MjEx", "number": 8008, "title": "fix compiler issues with intrinsics under Windows for Build Tools for VS2017", "user": {"login": "pavelbulanov", "id": 14073667, "node_id": "MDQ6VXNlcjE0MDczNjY3", "avatar_url": "https://avatars0.githubusercontent.com/u/14073667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavelbulanov", "html_url": "https://github.com/pavelbulanov", "followers_url": "https://api.github.com/users/pavelbulanov/followers", "following_url": "https://api.github.com/users/pavelbulanov/following{/other_user}", "gists_url": "https://api.github.com/users/pavelbulanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavelbulanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavelbulanov/subscriptions", "organizations_url": "https://api.github.com/users/pavelbulanov/orgs", "repos_url": "https://api.github.com/users/pavelbulanov/repos", "events_url": "https://api.github.com/users/pavelbulanov/events{/privacy}", "received_events_url": "https://api.github.com/users/pavelbulanov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-03-02T11:15:23Z", "updated_at": "2017-03-11T18:17:32Z", "closed_at": "2017-03-10T23:23:28Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/8008", "html_url": "https://github.com/tensorflow/tensorflow/pull/8008", "diff_url": "https://github.com/tensorflow/tensorflow/pull/8008.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/8008.patch"}, "body_html": "<p>Based on discussion in Issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"211021730\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7966\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7966/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7966\">#7966</a></p>\n<p>two changes made:</p>\n<ol>\n<li>\n<p>add <code>#include &lt;intrin.h&gt;</code> to <code>tensorflow\\core\\platform\\windows\\cpu_info.h </code> for availability of <code>__cpuidex</code> function based on <a href=\"https://msdn.microsoft.com/en-us/library/hskdteyh.aspx\" rel=\"nofollow\">this</a></p>\n</li>\n<li>\n<p>do not define functions <code>_mm256_extract_epi32 </code>and <code>_mm256_insert_epi32 </code>in <code>tensorflow/core/platform/windows/intrinsics_port.h</code> because they are already declared in <code>immintrin.h</code> in VS2017 (as extern as they are intrinsics now)</p>\n</li>\n</ol>\n<p>Quote from <code>immintrin.h</code></p>\n<pre><code>// Insert integer into 256-bit packed integer array at element selected by index\nextern __m256i __cdecl _mm256_insert_epi8 (__m256i /* dst */, int /* src */, const int /* index */);\nextern __m256i __cdecl _mm256_insert_epi16(__m256i /* dst */, int /* src */, const int /* index */);\nextern __m256i __cdecl _mm256_insert_epi32(__m256i /* dst */, int /* src */, const int /* index */);\n#if defined(_M_X64)\nextern __m256i __cdecl _mm256_insert_epi64(__m256i /* dst */, __int64 /* src */, const int /* index */);\n#endif  // defined (_M_X64)\n\n// Extract integer element selected by index from 256-bit packed integer array\nextern int __cdecl _mm256_extract_epi8 (__m256i /* src */, const int /* index */);\nextern int __cdecl _mm256_extract_epi16(__m256i /* src */, const int /* index */);\nextern int __cdecl _mm256_extract_epi32(__m256i /* src */, const int /* index */);\n#if defined(_M_X64)\nextern __int64 __cdecl _mm256_extract_epi64(__m256i /* src */, const int /* index */);\n#endif  // defined (_M_X64)\n</code></pre>", "body_text": "Based on discussion in Issue #7966\ntwo changes made:\n\n\nadd #include <intrin.h> to tensorflow\\core\\platform\\windows\\cpu_info.h  for availability of __cpuidex function based on this\n\n\ndo not define functions _mm256_extract_epi32 and _mm256_insert_epi32 in tensorflow/core/platform/windows/intrinsics_port.h because they are already declared in immintrin.h in VS2017 (as extern as they are intrinsics now)\n\n\nQuote from immintrin.h\n// Insert integer into 256-bit packed integer array at element selected by index\nextern __m256i __cdecl _mm256_insert_epi8 (__m256i /* dst */, int /* src */, const int /* index */);\nextern __m256i __cdecl _mm256_insert_epi16(__m256i /* dst */, int /* src */, const int /* index */);\nextern __m256i __cdecl _mm256_insert_epi32(__m256i /* dst */, int /* src */, const int /* index */);\n#if defined(_M_X64)\nextern __m256i __cdecl _mm256_insert_epi64(__m256i /* dst */, __int64 /* src */, const int /* index */);\n#endif  // defined (_M_X64)\n\n// Extract integer element selected by index from 256-bit packed integer array\nextern int __cdecl _mm256_extract_epi8 (__m256i /* src */, const int /* index */);\nextern int __cdecl _mm256_extract_epi16(__m256i /* src */, const int /* index */);\nextern int __cdecl _mm256_extract_epi32(__m256i /* src */, const int /* index */);\n#if defined(_M_X64)\nextern __int64 __cdecl _mm256_extract_epi64(__m256i /* src */, const int /* index */);\n#endif  // defined (_M_X64)", "body": "Based on discussion in Issue #7966 \r\n\r\ntwo changes made:\r\n1) add `#include <intrin.h>` to `tensorflow\\core\\platform\\windows\\cpu_info.h ` for availability of `__cpuidex` function based on [this](https://msdn.microsoft.com/en-us/library/hskdteyh.aspx)\r\n\r\n2) do not define functions `_mm256_extract_epi32 `and `_mm256_insert_epi32 `in `tensorflow/core/platform/windows/intrinsics_port.h` because they are already declared in `immintrin.h` in VS2017 (as extern as they are intrinsics now)\r\n\r\nQuote from `immintrin.h`\r\n```\r\n// Insert integer into 256-bit packed integer array at element selected by index\r\nextern __m256i __cdecl _mm256_insert_epi8 (__m256i /* dst */, int /* src */, const int /* index */);\r\nextern __m256i __cdecl _mm256_insert_epi16(__m256i /* dst */, int /* src */, const int /* index */);\r\nextern __m256i __cdecl _mm256_insert_epi32(__m256i /* dst */, int /* src */, const int /* index */);\r\n#if defined(_M_X64)\r\nextern __m256i __cdecl _mm256_insert_epi64(__m256i /* dst */, __int64 /* src */, const int /* index */);\r\n#endif  // defined (_M_X64)\r\n\r\n// Extract integer element selected by index from 256-bit packed integer array\r\nextern int __cdecl _mm256_extract_epi8 (__m256i /* src */, const int /* index */);\r\nextern int __cdecl _mm256_extract_epi16(__m256i /* src */, const int /* index */);\r\nextern int __cdecl _mm256_extract_epi32(__m256i /* src */, const int /* index */);\r\n#if defined(_M_X64)\r\nextern __int64 __cdecl _mm256_extract_epi64(__m256i /* src */, const int /* index */);\r\n#endif  // defined (_M_X64)\r\n```"}
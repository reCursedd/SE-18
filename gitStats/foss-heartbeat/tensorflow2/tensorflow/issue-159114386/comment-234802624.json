{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/234802624", "html_url": "https://github.com/tensorflow/tensorflow/issues/2726#issuecomment-234802624", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2726", "id": 234802624, "node_id": "MDEyOklzc3VlQ29tbWVudDIzNDgwMjYyNA==", "user": {"login": "lliu25", "id": 2426087, "node_id": "MDQ6VXNlcjI0MjYwODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/2426087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lliu25", "html_url": "https://github.com/lliu25", "followers_url": "https://api.github.com/users/lliu25/followers", "following_url": "https://api.github.com/users/lliu25/following{/other_user}", "gists_url": "https://api.github.com/users/lliu25/gists{/gist_id}", "starred_url": "https://api.github.com/users/lliu25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lliu25/subscriptions", "organizations_url": "https://api.github.com/users/lliu25/orgs", "repos_url": "https://api.github.com/users/lliu25/repos", "events_url": "https://api.github.com/users/lliu25/events{/privacy}", "received_events_url": "https://api.github.com/users/lliu25/received_events", "type": "User", "site_admin": false}, "created_at": "2016-07-24T21:11:23Z", "updated_at": "2016-07-24T21:11:23Z", "author_association": "NONE", "body_html": "<p>I am new to tensorflow and distributed tensorflow. I ran the example on a raspberry pi 3 cluster with one ps node and three worker nodes. I use slurm as the tool to assign four nodes for the task, piw30-33.</p>\n<p>I have following error message.<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -&gt; {piw30:2223}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -&gt; {piw31:2223, localhost:2223, piw33:2223}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -&gt; {localhost:2223}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -&gt; {piw31:2223, piw32:2223, piw33:2223}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -&gt; {piw30:2223}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -&gt; {localhost:2223, piw32:2223, piw33:2223}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -&gt; {piw30:2223}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -&gt; {piw31:2223, piw32:2223, localhost:2223}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223<br>\nExtracting data/train-images-idx3-ubyte.gz<br>\nExtracting data/train-labels-idx1-ubyte.gz<br>\nExtracting data/t10k-images-idx3-ubyte.gz<br>\nExtracting data/t10k-labels-idx1-ubyte.gz<br>\nInitialized!<br>\nTraceback (most recent call last):<br>\nFile \"mnist_yetanother.py\", line 351, in <br>\ntf.app.run()<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"mnist_yetanother.py\", line 310, in main<br>\nwith sv.prepare_or_wait_for_session(server.target, config=None) as sess:<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/supervisor.py\", line 684, in prepare_or_wait_for_session<br>\ninit_feed_dict=self._init_feed_dict, init_fn=self._init_fn)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/session_manager.py\", line 176, in prepare_session<br>\nsess.run(init_op, feed_dict=init_feed_dict)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 372, in run<br>\nrun_metadata_ptr)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 636, in _run<br>\nfeed_dict_string, options, run_metadata)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 708, in _do_run<br>\ntarget_list, options, run_metadata)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 728, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors.InvalidArgumentError: /job:worker/replica:0/task:0/cpu:0 unknown device.<br>\n[[Node: truncated_normal_2_S5 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:ps/replica:0/task:0/cpu:0\", send_device=\"/job:worker/replica:0/task:0/cpu:0\", send_device_incarnation=-2310109875678913912, tensor_name=\"edge_37_truncated_normal_2\", tensor_type=DT_FLOAT, _device=\"/job:ps/replica:0/task:0/cpu:0\"</a>]]<br>\nsrun: error: piw32: task 0: Exited with exit code 1</p>\n<p>Any help or suggestion would be appreciated!</p>", "body_text": "I am new to tensorflow and distributed tensorflow. I ran the example on a raspberry pi 3 cluster with one ps node and three worker nodes. I use slurm as the tool to assign four nodes for the task, piw30-33.\nI have following error message.\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {piw30:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {piw31:2223, localhost:2223, piw33:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {localhost:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {piw31:2223, piw32:2223, piw33:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {piw30:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {localhost:2223, piw32:2223, piw33:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {piw30:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {piw31:2223, piw32:2223, localhost:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nInitialized!\nTraceback (most recent call last):\nFile \"mnist_yetanother.py\", line 351, in \ntf.app.run()\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"mnist_yetanother.py\", line 310, in main\nwith sv.prepare_or_wait_for_session(server.target, config=None) as sess:\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/supervisor.py\", line 684, in prepare_or_wait_for_session\ninit_feed_dict=self._init_feed_dict, init_fn=self._init_fn)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/session_manager.py\", line 176, in prepare_session\nsess.run(init_op, feed_dict=init_feed_dict)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 372, in run\nrun_metadata_ptr)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 636, in _run\nfeed_dict_string, options, run_metadata)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 708, in _do_run\ntarget_list, options, run_metadata)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 728, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.InvalidArgumentError: /job:worker/replica:0/task:0/cpu:0 unknown device.\n[[Node: truncated_normal_2_S5 = _Recvclient_terminated=false, recv_device=\"/job:ps/replica:0/task:0/cpu:0\", send_device=\"/job:worker/replica:0/task:0/cpu:0\", send_device_incarnation=-2310109875678913912, tensor_name=\"edge_37_truncated_normal_2\", tensor_type=DT_FLOAT, _device=\"/job:ps/replica:0/task:0/cpu:0\"]]\nsrun: error: piw32: task 0: Exited with exit code 1\nAny help or suggestion would be appreciated!", "body": "I am new to tensorflow and distributed tensorflow. I ran the example on a raspberry pi 3 cluster with one ps node and three worker nodes. I use slurm as the tool to assign four nodes for the task, piw30-33.\n\nI have following error message. \nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {piw30:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {piw31:2223, localhost:2223, piw33:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {localhost:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {piw31:2223, piw32:2223, piw33:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {piw30:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {localhost:2223, piw32:2223, piw33:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {piw30:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {piw31:2223, piw32:2223, localhost:2223}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2223\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nInitialized!\nTraceback (most recent call last):\n  File \"mnist_yetanother.py\", line 351, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"mnist_yetanother.py\", line 310, in main\n    with sv.prepare_or_wait_for_session(server.target, config=None) as sess:\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/supervisor.py\", line 684, in prepare_or_wait_for_session\n    init_feed_dict=self._init_feed_dict, init_fn=self._init_fn)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/session_manager.py\", line 176, in prepare_session\n    sess.run(init_op, feed_dict=init_feed_dict)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 372, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 636, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 708, in _do_run\n    target_list, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 728, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.InvalidArgumentError: /job:worker/replica:0/task:0/cpu:0 unknown device.\n     [[Node: truncated_normal_2_S5 = _Recv[client_terminated=false, recv_device=\"/job:ps/replica:0/task:0/cpu:0\", send_device=\"/job:worker/replica:0/task:0/cpu:0\", send_device_incarnation=-2310109875678913912, tensor_name=\"edge_37_truncated_normal_2\", tensor_type=DT_FLOAT, _device=\"/job:ps/replica:0/task:0/cpu:0\"]()]]\nsrun: error: piw32: task 0: Exited with exit code 1\n\nAny help or suggestion would be appreciated!\n"}
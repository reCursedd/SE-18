{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15175", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15175/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15175/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15175/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15175", "id": 279994003, "node_id": "MDU6SXNzdWUyNzk5OTQwMDM=", "number": 15175, "title": "Got \"Attempting to use uninitialized value\" error after variable initalization", "user": {"login": "SystemErrorWang", "id": 26077659, "node_id": "MDQ6VXNlcjI2MDc3NjU5", "avatar_url": "https://avatars0.githubusercontent.com/u/26077659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SystemErrorWang", "html_url": "https://github.com/SystemErrorWang", "followers_url": "https://api.github.com/users/SystemErrorWang/followers", "following_url": "https://api.github.com/users/SystemErrorWang/following{/other_user}", "gists_url": "https://api.github.com/users/SystemErrorWang/gists{/gist_id}", "starred_url": "https://api.github.com/users/SystemErrorWang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SystemErrorWang/subscriptions", "organizations_url": "https://api.github.com/users/SystemErrorWang/orgs", "repos_url": "https://api.github.com/users/SystemErrorWang/repos", "events_url": "https://api.github.com/users/SystemErrorWang/events{/privacy}", "received_events_url": "https://api.github.com/users/SystemErrorWang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-07T04:04:51Z", "updated_at": "2017-12-07T04:10:35Z", "closed_at": "2017-12-07T04:10:34Z", "author_association": "NONE", "body_html": "<p>I am working on windows 10, Python 3.6 and tensorflow 1.4.0. I tested the code on two laptops, one with gpu and another without, both of them had this problem.</p>\n<p>This is my code:</p>\n<p><code>def network(self, net_input): dense1 = tf.layers.dense(net_input, 64) norm1 = tf.contrib.layers.batch_norm(dense1) relu1 = tf.nn.relu(norm1) dense2 = tf.layers.dense(relu1, 32) norm2 = tf.contrib.layers.batch_norm(dense2) relu2 = tf.nn.relu(norm2) out = tf.layers.dense(relu2, 1) return out</code></p>\n<p>`def train(self):<br>\ninit_global = tf.global_variables_initializer()<br>\ninit_local = tf.local_variables_initializer()<br>\nsess = tf.InteractiveSession()<br>\n#sess = tf.Session()<br>\nsess.run(init_global)<br>\nsess.run(init_local)<br>\ndata = tf.placeholder(tf.float32, [self.batch_size, 53])<br>\nlabel = tf.placeholder(tf.float32, [self.batch_size, 1])<br>\nprediction = self.network(data)<br>\nloss = tf.reduce_mean(tf.reduce_sum(tf.square(<br>\nlabel - prediction),reduction_indices=[1]))<br>\ntrain_step = tf.train.GradientDescentOptimizer(1e-3).minimize(loss)</p>\n<pre><code>    for i in range(self.epoch):\n        for j in range(20000 // self.batch_size):\n            batch_data, batch_label = self.next_batch(self.train_data, self.train_label)\n            #batch_label = self.next_batch(self.train_label)\n            sess.run(train_step, feed_dict = {data : batch_data, label : batch_label})\n            if j % 50 == 0:\n                start = time.time()\n                loss = sess.run(loss, feed_dict = {data : batch_data, label : batch_label})\n                print('Epoch: [%2d/%2d], Iter: [%4d/%4d], Loss: %8f, Time cost: %8f'%\\\n                      (i, self.epoch, j, 20000//self.batch_size, loss, time.time()-start))`\n</code></pre>\n<p>and this is the error message:</p>\n<p>`Traceback (most recent call last):</p>\n<p>File \"\", line 1, in <br>\nrunfile('C:/Users/System_Error/Downloads/report1/regression_tf.py', wdir='C:/Users/System_Error/Downloads/report1')</p>\n<p>File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 880, in runfile<br>\nexecfile(filename, namespace)</p>\n<p>File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile<br>\nexec(compile(f.read(), filename, 'exec'), namespace)</p>\n<p>File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 99, in <br>\nmain()</p>\n<p>File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 92, in main<br>\nregression.train()</p>\n<p>File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 76, in train<br>\nsess.run(train_step, feed_dict = {data : batch_data, label : batch_label})</p>\n<p>File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 889, in run<br>\nrun_metadata_ptr)</p>\n<p>File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1120, in _run<br>\nfeed_dict_tensor, options, run_metadata)</p>\n<p>File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1317, in _do_run<br>\noptions, run_metadata)</p>\n<p>File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1336, in _do_call<br>\nraise type(e)(node_def, op, message)</p>\n<p><code>FailedPreconditionError:</code> Attempting to use uninitialized value dense_18/bias<br>\n[[Node: dense_18/bias/read = Identity<a href=\"dense_18/bias\">T=DT_FLOAT, _class=[\"loc:@dense_18/bias\"], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"</a>]]</p>\n<p>Caused by op 'dense_18/bias/read', defined at:<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\ipython\\start_kernel.py\", line 231, in <br>\nmain()<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\ipython\\start_kernel.py\", line 227, in main<br>\nkernel.start()<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelapp.py\", line 477, in start<br>\nioloop.IOLoop.instance().start()<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\ioloop.py\", line 177, in start<br>\nsuper(ZMQIOLoop, self).start()<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tornado\\ioloop.py\", line 888, in start<br>\nhandler_func(fd_obj, events)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tornado\\stack_context.py\", line 277, in null_wrapper<br>\nreturn fn(*args, **kwargs)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\zmqstream.py\", line 440, in _handle_events<br>\nself._handle_recv()<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\zmqstream.py\", line 472, in _handle_recv<br>\nself._run_callback(callback, msg)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\zmqstream.py\", line 414, in _run_callback<br>\ncallback(*args, **kwargs)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tornado\\stack_context.py\", line 277, in null_wrapper<br>\nreturn fn(*args, **kwargs)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelbase.py\", line 283, in dispatcher<br>\nreturn self.dispatch_shell(stream, msg)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelbase.py\", line 235, in dispatch_shell<br>\nhandler(stream, idents, msg)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelbase.py\", line 399, in execute_request<br>\nuser_expressions, allow_stdin)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\ipkernel.py\", line 196, in do_execute<br>\nres = shell.run_cell(code, store_history=store_history, silent=silent)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\zmqshell.py\", line 533, in run_cell<br>\nreturn super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2717, in run_cell<br>\ninteractivity=interactivity, compiler=compiler, result=result)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2827, in run_ast_nodes<br>\nif self.run_code(code, result):<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2881, in run_code<br>\nexec(code_obj, self.user_global_ns, self.user_ns)<br>\nFile \"\", line 1, in <br>\nrunfile('C:/Users/System_Error/Downloads/report1/regression_tf.py', wdir='C:/Users/System_Error/Downloads/report1')<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 880, in runfile<br>\nexecfile(filename, namespace)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile<br>\nexec(compile(f.read(), filename, 'exec'), namespace)<br>\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 99, in <br>\nmain()<br>\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 92, in main<br>\nregression.train()<br>\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 67, in train<br>\nprediction = self.network(data)<br>\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 26, in network<br>\ndense1 = tf.layers.dense(net_input, 64)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\core.py\", line 250, in dense<br>\nreturn layer.apply(inputs)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 671, in apply<br>\nreturn self.<strong>call</strong>(inputs, *args, **kwargs)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 559, in <strong>call</strong><br>\nself.build(input_shapes[0])<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\core.py\", line 145, in build<br>\ntrainable=True)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 458, in add_variable<br>\ntrainable=trainable and self.trainable)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 1203, in get_variable<br>\nconstraint=constraint)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 1092, in get_variable<br>\nconstraint=constraint)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 425, in get_variable<br>\nconstraint=constraint)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 394, in _true_getter<br>\nuse_resource=use_resource, constraint=constraint)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 805, in _get_single_variable<br>\nconstraint=constraint)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variables.py\", line 213, in <strong>init</strong><br>\nconstraint=constraint)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variables.py\", line 356, in _init_from_args<br>\nself._snapshot = array_ops.identity(self._variable, name=\"read\")<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\array_ops.py\", line 125, in identity<br>\nreturn gen_array_ops.identity(input, name=name)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_array_ops.py\", line 2070, in identity<br>\n\"Identity\", input=input, name=name)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper<br>\nop_def=op_def)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2956, in create_op<br>\nop_def=op_def)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1470, in <strong>init</strong><br>\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access</p>\n<p>FailedPreconditionError (see above for traceback): Attempting to use uninitialized value dense_18/bias<br>\n[[Node: dense_18/bias/read = Identity<a href=\"dense_18/bias\">T=DT_FLOAT, _class=[\"loc:@dense_18/bias\"], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"</a>]]`</p>\n<p>I searched stack overflow, most of the answers told me to add an global_variables_initializer, and I tried tf.Session and tf.InteractiveSession, global and local variables initializer, but still got this error.</p>", "body_text": "I am working on windows 10, Python 3.6 and tensorflow 1.4.0. I tested the code on two laptops, one with gpu and another without, both of them had this problem.\nThis is my code:\ndef network(self, net_input): dense1 = tf.layers.dense(net_input, 64) norm1 = tf.contrib.layers.batch_norm(dense1) relu1 = tf.nn.relu(norm1) dense2 = tf.layers.dense(relu1, 32) norm2 = tf.contrib.layers.batch_norm(dense2) relu2 = tf.nn.relu(norm2) out = tf.layers.dense(relu2, 1) return out\n`def train(self):\ninit_global = tf.global_variables_initializer()\ninit_local = tf.local_variables_initializer()\nsess = tf.InteractiveSession()\n#sess = tf.Session()\nsess.run(init_global)\nsess.run(init_local)\ndata = tf.placeholder(tf.float32, [self.batch_size, 53])\nlabel = tf.placeholder(tf.float32, [self.batch_size, 1])\nprediction = self.network(data)\nloss = tf.reduce_mean(tf.reduce_sum(tf.square(\nlabel - prediction),reduction_indices=[1]))\ntrain_step = tf.train.GradientDescentOptimizer(1e-3).minimize(loss)\n    for i in range(self.epoch):\n        for j in range(20000 // self.batch_size):\n            batch_data, batch_label = self.next_batch(self.train_data, self.train_label)\n            #batch_label = self.next_batch(self.train_label)\n            sess.run(train_step, feed_dict = {data : batch_data, label : batch_label})\n            if j % 50 == 0:\n                start = time.time()\n                loss = sess.run(loss, feed_dict = {data : batch_data, label : batch_label})\n                print('Epoch: [%2d/%2d], Iter: [%4d/%4d], Loss: %8f, Time cost: %8f'%\\\n                      (i, self.epoch, j, 20000//self.batch_size, loss, time.time()-start))`\n\nand this is the error message:\n`Traceback (most recent call last):\nFile \"\", line 1, in \nrunfile('C:/Users/System_Error/Downloads/report1/regression_tf.py', wdir='C:/Users/System_Error/Downloads/report1')\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 880, in runfile\nexecfile(filename, namespace)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile\nexec(compile(f.read(), filename, 'exec'), namespace)\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 99, in \nmain()\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 92, in main\nregression.train()\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 76, in train\nsess.run(train_step, feed_dict = {data : batch_data, label : batch_label})\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 889, in run\nrun_metadata_ptr)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1120, in _run\nfeed_dict_tensor, options, run_metadata)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1317, in _do_run\noptions, run_metadata)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1336, in _do_call\nraise type(e)(node_def, op, message)\nFailedPreconditionError: Attempting to use uninitialized value dense_18/bias\n[[Node: dense_18/bias/read = IdentityT=DT_FLOAT, _class=[\"loc:@dense_18/bias\"], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]]\nCaused by op 'dense_18/bias/read', defined at:\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\ipython\\start_kernel.py\", line 231, in \nmain()\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\ipython\\start_kernel.py\", line 227, in main\nkernel.start()\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelapp.py\", line 477, in start\nioloop.IOLoop.instance().start()\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\ioloop.py\", line 177, in start\nsuper(ZMQIOLoop, self).start()\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tornado\\ioloop.py\", line 888, in start\nhandler_func(fd_obj, events)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tornado\\stack_context.py\", line 277, in null_wrapper\nreturn fn(*args, **kwargs)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\zmqstream.py\", line 440, in _handle_events\nself._handle_recv()\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\zmqstream.py\", line 472, in _handle_recv\nself._run_callback(callback, msg)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\zmqstream.py\", line 414, in _run_callback\ncallback(*args, **kwargs)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tornado\\stack_context.py\", line 277, in null_wrapper\nreturn fn(*args, **kwargs)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelbase.py\", line 283, in dispatcher\nreturn self.dispatch_shell(stream, msg)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelbase.py\", line 235, in dispatch_shell\nhandler(stream, idents, msg)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelbase.py\", line 399, in execute_request\nuser_expressions, allow_stdin)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\ipkernel.py\", line 196, in do_execute\nres = shell.run_cell(code, store_history=store_history, silent=silent)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\zmqshell.py\", line 533, in run_cell\nreturn super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2717, in run_cell\ninteractivity=interactivity, compiler=compiler, result=result)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2827, in run_ast_nodes\nif self.run_code(code, result):\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2881, in run_code\nexec(code_obj, self.user_global_ns, self.user_ns)\nFile \"\", line 1, in \nrunfile('C:/Users/System_Error/Downloads/report1/regression_tf.py', wdir='C:/Users/System_Error/Downloads/report1')\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 880, in runfile\nexecfile(filename, namespace)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile\nexec(compile(f.read(), filename, 'exec'), namespace)\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 99, in \nmain()\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 92, in main\nregression.train()\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 67, in train\nprediction = self.network(data)\nFile \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 26, in network\ndense1 = tf.layers.dense(net_input, 64)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\core.py\", line 250, in dense\nreturn layer.apply(inputs)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 671, in apply\nreturn self.call(inputs, *args, **kwargs)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 559, in call\nself.build(input_shapes[0])\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\core.py\", line 145, in build\ntrainable=True)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 458, in add_variable\ntrainable=trainable and self.trainable)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 1203, in get_variable\nconstraint=constraint)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 1092, in get_variable\nconstraint=constraint)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 425, in get_variable\nconstraint=constraint)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 394, in _true_getter\nuse_resource=use_resource, constraint=constraint)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 805, in _get_single_variable\nconstraint=constraint)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variables.py\", line 213, in init\nconstraint=constraint)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variables.py\", line 356, in _init_from_args\nself._snapshot = array_ops.identity(self._variable, name=\"read\")\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\array_ops.py\", line 125, in identity\nreturn gen_array_ops.identity(input, name=name)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_array_ops.py\", line 2070, in identity\n\"Identity\", input=input, name=name)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper\nop_def=op_def)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2956, in create_op\nop_def=op_def)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1470, in init\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\nFailedPreconditionError (see above for traceback): Attempting to use uninitialized value dense_18/bias\n[[Node: dense_18/bias/read = IdentityT=DT_FLOAT, _class=[\"loc:@dense_18/bias\"], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]]`\nI searched stack overflow, most of the answers told me to add an global_variables_initializer, and I tried tf.Session and tf.InteractiveSession, global and local variables initializer, but still got this error.", "body": "I am working on windows 10, Python 3.6 and tensorflow 1.4.0. I tested the code on two laptops, one with gpu and another without, both of them had this problem.\r\n\r\nThis is my code:\r\n\r\n`def network(self, net_input):\r\n        dense1 = tf.layers.dense(net_input, 64)\r\n        norm1 = tf.contrib.layers.batch_norm(dense1)\r\n        relu1 = tf.nn.relu(norm1)\r\n        dense2 = tf.layers.dense(relu1, 32)\r\n        norm2 = tf.contrib.layers.batch_norm(dense2)\r\n        relu2 = tf.nn.relu(norm2)\r\n        out = tf.layers.dense(relu2, 1)\r\n        return out`\r\n\r\n`def train(self):\r\n        init_global = tf.global_variables_initializer()\r\n        init_local = tf.local_variables_initializer()\r\n        sess = tf.InteractiveSession()\r\n        #sess = tf.Session()\r\n        sess.run(init_global)\r\n        sess.run(init_local)\r\n        data = tf.placeholder(tf.float32, [self.batch_size, 53])\r\n        label = tf.placeholder(tf.float32, [self.batch_size, 1])\r\n        prediction = self.network(data)\r\n        loss = tf.reduce_mean(tf.reduce_sum(tf.square(\r\n                label - prediction),reduction_indices=[1]))\r\n        train_step = tf.train.GradientDescentOptimizer(1e-3).minimize(loss)\r\n    \r\n        for i in range(self.epoch):\r\n            for j in range(20000 // self.batch_size):\r\n                batch_data, batch_label = self.next_batch(self.train_data, self.train_label)\r\n                #batch_label = self.next_batch(self.train_label)\r\n                sess.run(train_step, feed_dict = {data : batch_data, label : batch_label})\r\n                if j % 50 == 0:\r\n                    start = time.time()\r\n                    loss = sess.run(loss, feed_dict = {data : batch_data, label : batch_label})\r\n                    print('Epoch: [%2d/%2d], Iter: [%4d/%4d], Loss: %8f, Time cost: %8f'%\\\r\n                          (i, self.epoch, j, 20000//self.batch_size, loss, time.time()-start))`\r\n\r\nand this is the error message:\r\n\r\n`Traceback (most recent call last):\r\n\r\n  File \"<ipython-input-17-6e018316c758>\", line 1, in <module>\r\n    runfile('C:/Users/System_Error/Downloads/report1/regression_tf.py', wdir='C:/Users/System_Error/Downloads/report1')\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 880, in runfile\r\n    execfile(filename, namespace)\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile\r\n    exec(compile(f.read(), filename, 'exec'), namespace)\r\n\r\n  File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 99, in <module>\r\n    main()\r\n\r\n  File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 92, in main\r\n    regression.train()\r\n\r\n  File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 76, in train\r\n    sess.run(train_step, feed_dict = {data : batch_data, label : batch_label})\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 889, in run\r\n    run_metadata_ptr)\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1120, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1317, in _do_run\r\n    options, run_metadata)\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1336, in _do_call\r\n    raise type(e)(node_def, op, message)\r\n\r\n`FailedPreconditionError:` Attempting to use uninitialized value dense_18/bias\r\n\t [[Node: dense_18/bias/read = Identity[T=DT_FLOAT, _class=[\"loc:@dense_18/bias\"], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](dense_18/bias)]]\r\n\r\nCaused by op 'dense_18/bias/read', defined at:\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\ipython\\start_kernel.py\", line 231, in <module>\r\n    main()\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\ipython\\start_kernel.py\", line 227, in main\r\n    kernel.start()\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelapp.py\", line 477, in start\r\n    ioloop.IOLoop.instance().start()\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\ioloop.py\", line 177, in start\r\n    super(ZMQIOLoop, self).start()\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tornado\\ioloop.py\", line 888, in start\r\n    handler_func(fd_obj, events)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tornado\\stack_context.py\", line 277, in null_wrapper\r\n    return fn(*args, **kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\zmqstream.py\", line 440, in _handle_events\r\n    self._handle_recv()\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\zmqstream.py\", line 472, in _handle_recv\r\n    self._run_callback(callback, msg)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\zmqstream.py\", line 414, in _run_callback\r\n    callback(*args, **kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tornado\\stack_context.py\", line 277, in null_wrapper\r\n    return fn(*args, **kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelbase.py\", line 283, in dispatcher\r\n    return self.dispatch_shell(stream, msg)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelbase.py\", line 235, in dispatch_shell\r\n    handler(stream, idents, msg)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\kernelbase.py\", line 399, in execute_request\r\n    user_expressions, allow_stdin)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\ipkernel.py\", line 196, in do_execute\r\n    res = shell.run_cell(code, store_history=store_history, silent=silent)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\ipykernel\\zmqshell.py\", line 533, in run_cell\r\n    return super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2717, in run_cell\r\n    interactivity=interactivity, compiler=compiler, result=result)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2827, in run_ast_nodes\r\n    if self.run_code(code, result):\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2881, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-17-6e018316c758>\", line 1, in <module>\r\n    runfile('C:/Users/System_Error/Downloads/report1/regression_tf.py', wdir='C:/Users/System_Error/Downloads/report1')\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 880, in runfile\r\n    execfile(filename, namespace)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile\r\n    exec(compile(f.read(), filename, 'exec'), namespace)\r\n  File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 99, in <module>\r\n    main()\r\n  File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 92, in main\r\n    regression.train()\r\n  File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 67, in train\r\n    prediction = self.network(data)\r\n  File \"C:/Users/System_Error/Downloads/report1/regression_tf.py\", line 26, in network\r\n    dense1 = tf.layers.dense(net_input, 64)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\core.py\", line 250, in dense\r\n    return layer.apply(inputs)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 671, in apply\r\n    return self.__call__(inputs, *args, **kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 559, in __call__\r\n    self.build(input_shapes[0])\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\core.py\", line 145, in build\r\n    trainable=True)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 458, in add_variable\r\n    trainable=trainable and self.trainable)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 1203, in get_variable\r\n    constraint=constraint)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 1092, in get_variable\r\n    constraint=constraint)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 425, in get_variable\r\n    constraint=constraint)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 394, in _true_getter\r\n    use_resource=use_resource, constraint=constraint)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variable_scope.py\", line 805, in _get_single_variable\r\n    constraint=constraint)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variables.py\", line 213, in __init__\r\n    constraint=constraint)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\variables.py\", line 356, in _init_from_args\r\n    self._snapshot = array_ops.identity(self._variable, name=\"read\")\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\array_ops.py\", line 125, in identity\r\n    return gen_array_ops.identity(input, name=name)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_array_ops.py\", line 2070, in identity\r\n    \"Identity\", input=input, name=name)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2956, in create_op\r\n    op_def=op_def)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1470, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nFailedPreconditionError (see above for traceback): Attempting to use uninitialized value dense_18/bias\r\n\t [[Node: dense_18/bias/read = Identity[T=DT_FLOAT, _class=[\"loc:@dense_18/bias\"], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](dense_18/bias)]]`\r\n\r\n\r\nI searched stack overflow, most of the answers told me to add an global_variables_initializer, and I tried tf.Session and tf.InteractiveSession, global and local variables initializer, but still got this error. \r\n\r\n\r\n\r\n\r\n\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15963", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15963/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15963/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15963/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15963", "id": 286959754, "node_id": "MDU6SXNzdWUyODY5NTk3NTQ=", "number": 15963, "title": "how to disable do_constant_folding  of OptimizerOptions for my custom ops ", "user": {"login": "yogurfrul", "id": 25316372, "node_id": "MDQ6VXNlcjI1MzE2Mzcy", "avatar_url": "https://avatars3.githubusercontent.com/u/25316372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yogurfrul", "html_url": "https://github.com/yogurfrul", "followers_url": "https://api.github.com/users/yogurfrul/followers", "following_url": "https://api.github.com/users/yogurfrul/following{/other_user}", "gists_url": "https://api.github.com/users/yogurfrul/gists{/gist_id}", "starred_url": "https://api.github.com/users/yogurfrul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yogurfrul/subscriptions", "organizations_url": "https://api.github.com/users/yogurfrul/orgs", "repos_url": "https://api.github.com/users/yogurfrul/repos", "events_url": "https://api.github.com/users/yogurfrul/events{/privacy}", "received_events_url": "https://api.github.com/users/yogurfrul/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2018-01-09T03:28:29Z", "updated_at": "2018-06-17T18:33:42Z", "closed_at": "2018-06-17T18:30:08Z", "author_association": "NONE", "body_html": "<p>I write two ops named own_send and own_recv in c++<br>\nown_send write data to an buffer while wait the buffer flag is 0 ,then set the buffer flag to 1<br>\nown_recv read the buffer while wait the buffer flag is 1 and set the flag to 0<br>\nbut when I run my model I got the error own_recv is waiting the buffer flag is 1 but the flag is 0 when own_send is done rightly.<br>\nI finally found the GraphOptimizer class would run own_recv  previously ends with my flag is changed before my model really process.<br>\nI run the code following get the error own_recv is always  waiting the flag is 1 thile the flag is 0.<br>\n<code>input = [tf.ones([3136,1024])]</code><br>\n<code>send = own_send(input)</code><br>\n<code>recv = own_recv([tf.ones([1])])</code><br>\n<code>sess = tf.Session()</code><br>\n<code>sess.run(recv)</code></p>\n<p>then I try to run with opt_level is L0, it works:</p>\n<p><code>input = [tf.ones([3136,1024])]</code><br>\n<code>send = own_send(input)</code><br>\n<code>recv = own_recv([tf.ones([1])])</code><br>\n<code>config = tf.ConfigProto(graph_options=tf.GraphOptions(optimizer_options=tf.OptimizerOptions(opt_level=tf.OptimizerOptions.L0)))</code><br>\n<code>sess = tf.Session(config = config)</code><br>\n<code>sess.run(recv)</code></p>\n<p>I want to know how to disable the optimizer options just for my own custiom ops leaving the other ops optimied<br>\nIs there some path to disable option for specified ops \uff1f<br>\nsomething like  add some opt in my BUILD ?</p>\n<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:Linux  Ubuntu 14.04.4 LTS</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:source</li>\n<li><strong>TensorFlow version (use command below)</strong>:1.4.0-rc1</li>\n<li><strong>Python version</strong>: Python 2.7.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.5.4</li>\n</ul>", "body_text": "I write two ops named own_send and own_recv in c++\nown_send write data to an buffer while wait the buffer flag is 0 ,then set the buffer flag to 1\nown_recv read the buffer while wait the buffer flag is 1 and set the flag to 0\nbut when I run my model I got the error own_recv is waiting the buffer flag is 1 but the flag is 0 when own_send is done rightly.\nI finally found the GraphOptimizer class would run own_recv  previously ends with my flag is changed before my model really process.\nI run the code following get the error own_recv is always  waiting the flag is 1 thile the flag is 0.\ninput = [tf.ones([3136,1024])]\nsend = own_send(input)\nrecv = own_recv([tf.ones([1])])\nsess = tf.Session()\nsess.run(recv)\nthen I try to run with opt_level is L0, it works:\ninput = [tf.ones([3136,1024])]\nsend = own_send(input)\nrecv = own_recv([tf.ones([1])])\nconfig = tf.ConfigProto(graph_options=tf.GraphOptions(optimizer_options=tf.OptimizerOptions(opt_level=tf.OptimizerOptions.L0)))\nsess = tf.Session(config = config)\nsess.run(recv)\nI want to know how to disable the optimizer options just for my own custiom ops leaving the other ops optimied\nIs there some path to disable option for specified ops \uff1f\nsomething like  add some opt in my BUILD ?\nSystem information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):Linux  Ubuntu 14.04.4 LTS\nTensorFlow installed from (source or binary):source\nTensorFlow version (use command below):1.4.0-rc1\nPython version: Python 2.7.6\nBazel version (if compiling from source): 0.5.4", "body": "I write two ops named own_send and own_recv in c++ \r\nown_send write data to an buffer while wait the buffer flag is 0 ,then set the buffer flag to 1\r\nown_recv read the buffer while wait the buffer flag is 1 and set the flag to 0\r\nbut when I run my model I got the error own_recv is waiting the buffer flag is 1 but the flag is 0 when own_send is done rightly.\r\nI finally found the GraphOptimizer class would run own_recv  previously ends with my flag is changed before my model really process.\r\nI run the code following get the error own_recv is always  waiting the flag is 1 thile the flag is 0.\r\n`input = [tf.ones([3136,1024])]`\r\n`send = own_send(input)`\r\n`recv = own_recv([tf.ones([1])])`\r\n`sess = tf.Session()`\r\n`sess.run(recv)`\r\n\r\nthen I try to run with opt_level is L0, it works:\r\n\r\n`input = [tf.ones([3136,1024])]`\r\n`send = own_send(input)`\r\n`recv = own_recv([tf.ones([1])])`\r\n`config = tf.ConfigProto(graph_options=tf.GraphOptions(optimizer_options=tf.OptimizerOptions(opt_level=tf.OptimizerOptions.L0)))`\r\n`sess = tf.Session(config = config)`\r\n`sess.run(recv)`\r\n\r\nI want to know how to disable the optimizer options just for my own custiom ops leaving the other ops optimied\r\nIs there some path to disable option for specified ops \uff1f\r\nsomething like  add some opt in my BUILD ?\r\n\r\n### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:Linux  Ubuntu 14.04.4 LTS \r\n- **TensorFlow installed from (source or binary)**:source\r\n- **TensorFlow version (use command below)**:1.4.0-rc1\r\n- **Python version**: Python 2.7.6\r\n- **Bazel version (if compiling from source)**: 0.5.4"}
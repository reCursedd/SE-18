{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12450", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12450/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12450/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12450/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12450", "id": 251638225, "node_id": "MDU6SXNzdWUyNTE2MzgyMjU=", "number": 12450, "title": "Freezing Model drops Output Accuracy", "user": {"login": "anandcu3", "id": 13032916, "node_id": "MDQ6VXNlcjEzMDMyOTE2", "avatar_url": "https://avatars0.githubusercontent.com/u/13032916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anandcu3", "html_url": "https://github.com/anandcu3", "followers_url": "https://api.github.com/users/anandcu3/followers", "following_url": "https://api.github.com/users/anandcu3/following{/other_user}", "gists_url": "https://api.github.com/users/anandcu3/gists{/gist_id}", "starred_url": "https://api.github.com/users/anandcu3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anandcu3/subscriptions", "organizations_url": "https://api.github.com/users/anandcu3/orgs", "repos_url": "https://api.github.com/users/anandcu3/repos", "events_url": "https://api.github.com/users/anandcu3/events{/privacy}", "received_events_url": "https://api.github.com/users/anandcu3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-08-21T12:04:07Z", "updated_at": "2017-11-29T23:29:51Z", "closed_at": "2017-11-29T23:29:51Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nNo</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nWindows 10</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nBinary</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\nv1.2 and v1.3 (Same Problem repeats on both)</li>\n<li><strong>Python version</strong>:<br>\n3.5</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nCuda compilation tools, release 8.0, V8.0.44<br>\ncuDNN Version 5.1.10</li>\n<li><strong>GPU model and memory</strong>:<br>\nGeForce GTX 1060 - 6GB</li>\n</ul>\n<p>I have a image segmentation network designed to classify roads and obstacles.  I want to freeze the model and serve it as a API. So I used the default TensorFlow tool for freezing the model. After freezing, the output given by the network are completely off and inaccurate.</p>\n<p>Here is one sample.</p>\n<p><strong>The Input Image</strong></p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/13032916/29518128-d016402e-8695-11e7-95e5-1fdac3e5b0f6.png\"><img src=\"https://user-images.githubusercontent.com/13032916/29518128-d016402e-8695-11e7-95e5-1fdac3e5b0f6.png\" alt=\"00016\" style=\"max-width:100%;\"></a></p>\n<p><strong>Output when tested using ckpt files</strong><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/13032916/29518247-3623ea56-8696-11e7-94e0-6eabe13ab066.png\"><img src=\"https://user-images.githubusercontent.com/13032916/29518247-3623ea56-8696-11e7-94e0-6eabe13ab066.png\" alt=\"16_actual\" style=\"max-width:100%;\"></a></p>\n<p><strong>Output after Freezing the Model</strong><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/13032916/29518258-4087803e-8696-11e7-9a56-4c5d45d7fda1.png\"><img src=\"https://user-images.githubusercontent.com/13032916/29518258-4087803e-8696-11e7-9a56-4c5d45d7fda1.png\" alt=\"16\" style=\"max-width:100%;\"></a></p>\n<p>I have tried to freeze using different versions of tensorflow, but that has not helped. Since the network is performing as excepted when tested against checkpoint, the issue, I think is in the Freeze Models Script. The network uses Batch_normalisation. Could this be the reason for this drop because I saw a couple of issues linked to that of similar nature? How can I avoid that?</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nNo\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nWindows 10\nTensorFlow installed from (source or binary):\nBinary\nTensorFlow version (use command below):\nv1.2 and v1.3 (Same Problem repeats on both)\nPython version:\n3.5\nCUDA/cuDNN version:\nCuda compilation tools, release 8.0, V8.0.44\ncuDNN Version 5.1.10\nGPU model and memory:\nGeForce GTX 1060 - 6GB\n\nI have a image segmentation network designed to classify roads and obstacles.  I want to freeze the model and serve it as a API. So I used the default TensorFlow tool for freezing the model. After freezing, the output given by the network are completely off and inaccurate.\nHere is one sample.\nThe Input Image\n\nOutput when tested using ckpt files\n\nOutput after Freezing the Model\n\nI have tried to freeze using different versions of tensorflow, but that has not helped. Since the network is performing as excepted when tested against checkpoint, the issue, I think is in the Freeze Models Script. The network uses Batch_normalisation. Could this be the reason for this drop because I saw a couple of issues linked to that of similar nature? How can I avoid that?", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nNo\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nWindows 10\r\n- **TensorFlow installed from (source or binary)**:\r\nBinary\r\n- **TensorFlow version (use command below)**:\r\nv1.2 and v1.3 (Same Problem repeats on both)\r\n- **Python version**: \r\n3.5\r\n- **CUDA/cuDNN version**:\r\nCuda compilation tools, release 8.0, V8.0.44\r\ncuDNN Version 5.1.10\r\n- **GPU model and memory**:\r\nGeForce GTX 1060 - 6GB\r\n\r\nI have a image segmentation network designed to classify roads and obstacles.  I want to freeze the model and serve it as a API. So I used the default TensorFlow tool for freezing the model. After freezing, the output given by the network are completely off and inaccurate.\r\n\r\nHere is one sample. \r\n\r\n**The Input Image**\r\n\r\n![00016](https://user-images.githubusercontent.com/13032916/29518128-d016402e-8695-11e7-95e5-1fdac3e5b0f6.png)\r\n\r\n**Output when tested using ckpt files**\r\n![16_actual](https://user-images.githubusercontent.com/13032916/29518247-3623ea56-8696-11e7-94e0-6eabe13ab066.png)\r\n\r\n**Output after Freezing the Model**\r\n![16](https://user-images.githubusercontent.com/13032916/29518258-4087803e-8696-11e7-9a56-4c5d45d7fda1.png)\r\n\r\nI have tried to freeze using different versions of tensorflow, but that has not helped. Since the network is performing as excepted when tested against checkpoint, the issue, I think is in the Freeze Models Script. The network uses Batch_normalisation. Could this be the reason for this drop because I saw a couple of issues linked to that of similar nature? How can I avoid that?\r\n"}
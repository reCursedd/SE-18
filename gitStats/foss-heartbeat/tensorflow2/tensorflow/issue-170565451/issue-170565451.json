{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3743", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3743/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3743/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3743/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3743", "id": 170565451, "node_id": "MDU6SXNzdWUxNzA1NjU0NTE=", "number": 3743, "title": "Bazel missing dependency declaration for Eigen", "user": {"login": "gustavla", "id": 902935, "node_id": "MDQ6VXNlcjkwMjkzNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/902935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gustavla", "html_url": "https://github.com/gustavla", "followers_url": "https://api.github.com/users/gustavla/followers", "following_url": "https://api.github.com/users/gustavla/following{/other_user}", "gists_url": "https://api.github.com/users/gustavla/gists{/gist_id}", "starred_url": "https://api.github.com/users/gustavla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gustavla/subscriptions", "organizations_url": "https://api.github.com/users/gustavla/orgs", "repos_url": "https://api.github.com/users/gustavla/repos", "events_url": "https://api.github.com/users/gustavla/events{/privacy}", "received_events_url": "https://api.github.com/users/gustavla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2016-08-11T03:49:57Z", "updated_at": "2016-09-15T17:44:33Z", "closed_at": "2016-09-15T17:44:33Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Compilation error that suggests Bazel is not recognizing the Eigen header files. Occurs consistently for me on all versions starting from <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/21716d8f6e175cd6e8cd97a84e48497574268b0c/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/21716d8f6e175cd6e8cd97a84e48497574268b0c\"><tt>21716d8</tt></a> up until the current master (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/00726750c9f7dedfc57685c5011e21df3b5b3706/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/00726750c9f7dedfc57685c5011e21df3b5b3706\"><tt>0072675</tt></a>).</p>\n<h3>Environment info</h3>\n<p>64-bit CentOS / cuda 7.5.18 / cudnn 5.0.5 / bazel 0.2.1 / java 1.8.0_91</p>\n<h3>Steps to reproduce</h3>\n<p>Run <code>./configure</code> and set up compilation with CUDA 7.5 and CuDNN 5.0.</p>\n<pre><code>bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<p>Compiles fine without <code>--config=cuda</code>.</p>\n<h3>What have you tried?</h3>\n<p>I ran a <code>git bisect</code> and traced it to <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/21716d8f6e175cd6e8cd97a84e48497574268b0c/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/21716d8f6e175cd6e8cd97a84e48497574268b0c\"><tt>21716d8</tt></a>. More specifically, it is moving Eigen out of the <code>eigen-eigen-b4fa9622b809</code> folder that for some reason is causing this. Reverting only these changes from the master makes it compile just fine (see <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/gustavla/tensorflow/commit/058a6517576171bb0c7dcf11ec1aac04bd59aedf/hovercard\" href=\"https://github.com/gustavla/tensorflow/commit/058a6517576171bb0c7dcf11ec1aac04bd59aedf\">gustavla@<tt>058a651</tt></a>). I have so far been unable to fix it while keeping the <code>strip_prefix</code> in.</p>\n<p>It suspect it might be a quirk in bazel 0.2.1. It would be great if anyone else running that version can confirm.</p>\n<h3>Error</h3>\n<p>The error message (abridged and personal paths removed):</p>\n<pre><code>ERROR: /.../tensorflow/core/kernels/BUILD:1527:1: undeclared inclusion(s) in rule '//tensorflow/core/kernels:depth_space_ops_gpu':\nthis rule is missing dependency declarations for the following files included by 'tensorflow/core/kernels/spacetodepth_op_gpu.cu.cc':\n  '/.../.cache/external/eigen_archive/Eigen/Core'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/util/DisableStupidWarnings.h'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/util/Macros.h'\n  ...\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/ArrayWrapper.h'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/GlobalFunctions.h'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/util/ReenableStupidWarnings.h'.\n</code></pre>\n<p>Issues with related error messages include <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"134446133\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1157\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1157/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1157\">#1157</a> and  <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"168500331\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3589\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3589/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/3589\">#3589</a>.</p>", "body_text": "Compilation error that suggests Bazel is not recognizing the Eigen header files. Occurs consistently for me on all versions starting from 21716d8 up until the current master (0072675).\nEnvironment info\n64-bit CentOS / cuda 7.5.18 / cudnn 5.0.5 / bazel 0.2.1 / java 1.8.0_91\nSteps to reproduce\nRun ./configure and set up compilation with CUDA 7.5 and CuDNN 5.0.\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n\nCompiles fine without --config=cuda.\nWhat have you tried?\nI ran a git bisect and traced it to 21716d8. More specifically, it is moving Eigen out of the eigen-eigen-b4fa9622b809 folder that for some reason is causing this. Reverting only these changes from the master makes it compile just fine (see gustavla@058a651). I have so far been unable to fix it while keeping the strip_prefix in.\nIt suspect it might be a quirk in bazel 0.2.1. It would be great if anyone else running that version can confirm.\nError\nThe error message (abridged and personal paths removed):\nERROR: /.../tensorflow/core/kernels/BUILD:1527:1: undeclared inclusion(s) in rule '//tensorflow/core/kernels:depth_space_ops_gpu':\nthis rule is missing dependency declarations for the following files included by 'tensorflow/core/kernels/spacetodepth_op_gpu.cu.cc':\n  '/.../.cache/external/eigen_archive/Eigen/Core'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/util/DisableStupidWarnings.h'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/util/Macros.h'\n  ...\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/ArrayWrapper.h'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/GlobalFunctions.h'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/util/ReenableStupidWarnings.h'.\n\nIssues with related error messages include #1157 and  #3589.", "body": "Compilation error that suggests Bazel is not recognizing the Eigen header files. Occurs consistently for me on all versions starting from 21716d8f6e175cd6e8cd97a84e48497574268b0c up until the current master (00726750c9f7dedfc57685c5011e21df3b5b3706).\n### Environment info\n\n64-bit CentOS / cuda 7.5.18 / cudnn 5.0.5 / bazel 0.2.1 / java 1.8.0_91\n### Steps to reproduce\n\nRun `./configure` and set up compilation with CUDA 7.5 and CuDNN 5.0.\n\n```\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n```\n\nCompiles fine without `--config=cuda`.\n### What have you tried?\n\nI ran a `git bisect` and traced it to 21716d8f6e175cd6e8cd97a84e48497574268b0c. More specifically, it is moving Eigen out of the `eigen-eigen-b4fa9622b809` folder that for some reason is causing this. Reverting only these changes from the master makes it compile just fine (see https://github.com/gustavla/tensorflow/commit/058a6517576171bb0c7dcf11ec1aac04bd59aedf). I have so far been unable to fix it while keeping the `strip_prefix` in.\n\nIt suspect it might be a quirk in bazel 0.2.1. It would be great if anyone else running that version can confirm.\n### Error\n\nThe error message (abridged and personal paths removed):\n\n```\nERROR: /.../tensorflow/core/kernels/BUILD:1527:1: undeclared inclusion(s) in rule '//tensorflow/core/kernels:depth_space_ops_gpu':\nthis rule is missing dependency declarations for the following files included by 'tensorflow/core/kernels/spacetodepth_op_gpu.cu.cc':\n  '/.../.cache/external/eigen_archive/Eigen/Core'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/util/DisableStupidWarnings.h'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/util/Macros.h'\n  ...\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/ArrayWrapper.h'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/GlobalFunctions.h'\n  '/.../.cache/external/eigen_archive/Eigen/src/Core/util/ReenableStupidWarnings.h'.\n```\n\nIssues with related error messages include #1157 and  #3589.\n"}
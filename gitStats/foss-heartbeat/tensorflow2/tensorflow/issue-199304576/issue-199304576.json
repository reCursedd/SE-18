{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6701", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6701/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6701/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6701/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6701", "id": 199304576, "node_id": "MDU6SXNzdWUxOTkzMDQ1NzY=", "number": 6701, "title": "Possible bug: tf.reverse() does not accept bool type 'dim' argument in r0.12", "user": {"login": "dasabir", "id": 3665715, "node_id": "MDQ6VXNlcjM2NjU3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3665715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dasabir", "html_url": "https://github.com/dasabir", "followers_url": "https://api.github.com/users/dasabir/followers", "following_url": "https://api.github.com/users/dasabir/following{/other_user}", "gists_url": "https://api.github.com/users/dasabir/gists{/gist_id}", "starred_url": "https://api.github.com/users/dasabir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dasabir/subscriptions", "organizations_url": "https://api.github.com/users/dasabir/orgs", "repos_url": "https://api.github.com/users/dasabir/repos", "events_url": "https://api.github.com/users/dasabir/events{/privacy}", "received_events_url": "https://api.github.com/users/dasabir/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-01-06T22:17:37Z", "updated_at": "2017-01-07T05:09:50Z", "closed_at": "2017-01-07T05:09:50Z", "author_association": "NONE", "body_html": "<p>I think tf.reverse() got messed up in r0.12. Though the <a href=\"https://www.tensorflow.org/api_docs/python/array_ops/slicing_and_joining#reverse\" rel=\"nofollow\">documentation</a> says the argument 'dim' has to be 'bool', while running it complains -- \"Value passed to parameter 'axis' has DataType bool not in list of allowed values: int32, int64\". I can see that this comes from a new op -- tf.reverse_v2(). I saw that in r0.11 this runs with no complains. I have prepared a mwe for this (link provided below).<br>\nEither the documentation needs to be updated (for r0.12) or this needs to be fixed so that dims can accept boolean. I'd, rather, opt for a fix as this might be a reason for backward incompatibility in some legacy code.</p>\n<h3>Environment info</h3>\n<p>Operating System: Centos 7<br>\nInstalled version of CUDA and cuDNN: cuda 8.0, cuDNN 5.1<br>\nIf installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>): <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/e4dde23d58a10c9d0c14005d20d1ecdd599539ac/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/e4dde23d58a10c9d0c14005d20d1ecdd599539ac\"><tt>e4dde23</tt></a></li>\n<li>The output of <code>bazel version</code> - 4.2</li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>I have prepared a mwe for this (Just 26 lines of code). This tries to reproduce one of the examples given in the documentation. Attached<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/690954/mwe.txt\">here</a></p>\n<h3>Logs or other output that would be helpful</h3>\n<p>Traceback (most recent call last):<br>\nFile \"mwe.py\", line 16, in <br>\nt, dims, t_rev = flip()<br>\nFile \"mwe.py\", line 10, in flip<br>\nt_rev = tf.reverse(t, dims)<br>\nFile \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 2679, in reverse<br>\nreturn gen_array_ops.reverse_v2(tensor, axis, name)<br>\nFile \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 2963, in reverse_v2<br>\nname=name)<br>\nFile \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 585, in apply_op<br>\nparam_name=input_name)<br>\nFile \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 61, in _SatisfiesTypeConstraint<br>\n\", \".join(dtypes.as_dtype(x).name for x in allowed_list)))<br>\nTypeError: Value passed to parameter 'axis' has DataType bool not in list of allowed values: int32, int64</p>", "body_text": "I think tf.reverse() got messed up in r0.12. Though the documentation says the argument 'dim' has to be 'bool', while running it complains -- \"Value passed to parameter 'axis' has DataType bool not in list of allowed values: int32, int64\". I can see that this comes from a new op -- tf.reverse_v2(). I saw that in r0.11 this runs with no complains. I have prepared a mwe for this (link provided below).\nEither the documentation needs to be updated (for r0.12) or this needs to be fixed so that dims can accept boolean. I'd, rather, opt for a fix as this might be a reason for backward incompatibility in some legacy code.\nEnvironment info\nOperating System: Centos 7\nInstalled version of CUDA and cuDNN: cuda 8.0, cuDNN 5.1\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD): e4dde23\nThe output of bazel version - 4.2\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nI have prepared a mwe for this (Just 26 lines of code). This tries to reproduce one of the examples given in the documentation. Attached\nhere\nLogs or other output that would be helpful\nTraceback (most recent call last):\nFile \"mwe.py\", line 16, in \nt, dims, t_rev = flip()\nFile \"mwe.py\", line 10, in flip\nt_rev = tf.reverse(t, dims)\nFile \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 2679, in reverse\nreturn gen_array_ops.reverse_v2(tensor, axis, name)\nFile \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 2963, in reverse_v2\nname=name)\nFile \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 585, in apply_op\nparam_name=input_name)\nFile \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 61, in _SatisfiesTypeConstraint\n\", \".join(dtypes.as_dtype(x).name for x in allowed_list)))\nTypeError: Value passed to parameter 'axis' has DataType bool not in list of allowed values: int32, int64", "body": "I think tf.reverse() got messed up in r0.12. Though the [documentation](https://www.tensorflow.org/api_docs/python/array_ops/slicing_and_joining#reverse) says the argument 'dim' has to be 'bool', while running it complains -- \"Value passed to parameter 'axis' has DataType bool not in list of allowed values: int32, int64\". I can see that this comes from a new op -- tf.reverse_v2(). I saw that in r0.11 this runs with no complains. I have prepared a mwe for this (link provided below).\r\nEither the documentation needs to be updated (for r0.12) or this needs to be fixed so that dims can accept boolean. I'd, rather, opt for a fix as this might be a reason for backward incompatibility in some legacy code.\r\n\r\n### Environment info\r\nOperating System: Centos 7\r\nInstalled version of CUDA and cuDNN: cuda 8.0, cuDNN 5.1\r\nIf installed from source, provide \r\n\r\n1. The commit hash (`git rev-parse HEAD`): e4dde23d58a10c9d0c14005d20d1ecdd599539ac\r\n2. The output of `bazel version` - 4.2\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\nI have prepared a mwe for this (Just 26 lines of code). This tries to reproduce one of the examples given in the documentation. Attached\r\n[here](https://github.com/tensorflow/tensorflow/files/690954/mwe.txt)\r\n\r\n### Logs or other output that would be helpful\r\nTraceback (most recent call last):\r\n  File \"mwe.py\", line 16, in <module>\r\n    t, dims, t_rev = flip()\r\n  File \"mwe.py\", line 10, in flip\r\n    t_rev = tf.reverse(t, dims)\r\n  File \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 2679, in reverse\r\n    return gen_array_ops.reverse_v2(tensor, axis, name)\r\n  File \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 2963, in reverse_v2\r\n    name=name)\r\n  File \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 585, in apply_op\r\n    param_name=input_name)\r\n  File \"/scratch/virtual_envs/tensorflow_r12_env/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 61, in _SatisfiesTypeConstraint\r\n    \", \".join(dtypes.as_dtype(x).name for x in allowed_list)))\r\nTypeError: Value passed to parameter 'axis' has DataType bool not in list of allowed values: int32, int64\r\n"}
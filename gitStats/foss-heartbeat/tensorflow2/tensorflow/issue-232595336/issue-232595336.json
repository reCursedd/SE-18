{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10325", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10325/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10325/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10325/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10325", "id": 232595336, "node_id": "MDU6SXNzdWUyMzI1OTUzMzY=", "number": 10325, "title": "How to add cwise_op_floor_mod to build libtensorflow-core.a for ANDROID", "user": {"login": "kzos", "id": 5010954, "node_id": "MDQ6VXNlcjUwMTA5NTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5010954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kzos", "html_url": "https://github.com/kzos", "followers_url": "https://api.github.com/users/kzos/followers", "following_url": "https://api.github.com/users/kzos/following{/other_user}", "gists_url": "https://api.github.com/users/kzos/gists{/gist_id}", "starred_url": "https://api.github.com/users/kzos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kzos/subscriptions", "organizations_url": "https://api.github.com/users/kzos/orgs", "repos_url": "https://api.github.com/users/kzos/repos", "events_url": "https://api.github.com/users/kzos/events{/privacy}", "received_events_url": "https://api.github.com/users/kzos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-31T15:00:38Z", "updated_at": "2017-06-01T10:16:41Z", "closed_at": "2017-06-01T10:16:17Z", "author_association": "NONE", "body_html": "<p>OS: Ubuntu 16.04 64bits<br>\nAndroid Version: 7.1 (Nougat)<br>\nNDK Version: android-ndk-r12b<br>\nHEXAGON SDK: 3.1</p>\n<p>When i am trying to build benchmark app, using make build, floor mod operation is not getting added by default,</p>\n<h3>By default:-</h3>\n<p>when I issue below command, cwise_op_floor_mod.cc is not getting compiled against most of the files getting compiled in core/kernel/ folder<br>\n<code>make -f tensorflow/contrib/makefile/Makefile TARGET=ANDROID NDK_ROOT=~/android-ndk-r12b</code></p>\n<h3>Changes tried to add floor mod but failed:-</h3>\n<p>tensorflow/core/kernels/cwise_op_floor_mode.cc - changes in bold</p>\n<p>--- snip ---</p>\n<pre><code>#include \"tensorflow/core/kernels/cwise_ops_common.h\"\n \n namespace tensorflow {\n REGISTER2(BinaryOp, CPU, \"FloorMod\", functor::safe_floor_mod, int32, int64);\n REGISTER2(BinaryOp, CPU, \"FloorMod\", functor::floor_fmod, float, double);\n \n **REGISTER_KERNEL_BUILDER(Name(\"FloorMod\")\n                             .Device(DEVICE_CPU)\n                             .HostMemory(\"x\")\n                             .HostMemory(\"y\")\n                             .HostMemory(\"z\")\n                             .TypeConstraint&lt;int32&gt;(\"T\"),\n                         BinaryOp&lt;CPUDevice, functor::safe_floor_mod&lt;int32&gt;&gt;);**\n #if GOOGLE_CUDA\n // A special GPU kernel for int32.\n // TODO(b/25387198): Also enable int32 in device memory. This kernel\n // registration requires all int32 inputs and outputs to be in host memory.\n REGISTER_KERNEL_BUILDER(Name(\"FloorMod\")\n                             .Device(DEVICE_GPU)\n                             .HostMemory(\"x\")\n                             .HostMemory(\"y\")\n                             .HostMemory(\"z\")\n                             .TypeConstraint&lt;int32&gt;(\"T\"),\n                         BinaryOp&lt;CPUDevice, functor::safe_floor_mod&lt;int32&gt;&gt;);\n #endif\n\n</code></pre>\n<p>-- eo snip --</p>\n<p>somebody help out adding floor mod in the build.<br>\nthanks</p>", "body_text": "OS: Ubuntu 16.04 64bits\nAndroid Version: 7.1 (Nougat)\nNDK Version: android-ndk-r12b\nHEXAGON SDK: 3.1\nWhen i am trying to build benchmark app, using make build, floor mod operation is not getting added by default,\nBy default:-\nwhen I issue below command, cwise_op_floor_mod.cc is not getting compiled against most of the files getting compiled in core/kernel/ folder\nmake -f tensorflow/contrib/makefile/Makefile TARGET=ANDROID NDK_ROOT=~/android-ndk-r12b\nChanges tried to add floor mod but failed:-\ntensorflow/core/kernels/cwise_op_floor_mode.cc - changes in bold\n--- snip ---\n#include \"tensorflow/core/kernels/cwise_ops_common.h\"\n \n namespace tensorflow {\n REGISTER2(BinaryOp, CPU, \"FloorMod\", functor::safe_floor_mod, int32, int64);\n REGISTER2(BinaryOp, CPU, \"FloorMod\", functor::floor_fmod, float, double);\n \n **REGISTER_KERNEL_BUILDER(Name(\"FloorMod\")\n                             .Device(DEVICE_CPU)\n                             .HostMemory(\"x\")\n                             .HostMemory(\"y\")\n                             .HostMemory(\"z\")\n                             .TypeConstraint<int32>(\"T\"),\n                         BinaryOp<CPUDevice, functor::safe_floor_mod<int32>>);**\n #if GOOGLE_CUDA\n // A special GPU kernel for int32.\n // TODO(b/25387198): Also enable int32 in device memory. This kernel\n // registration requires all int32 inputs and outputs to be in host memory.\n REGISTER_KERNEL_BUILDER(Name(\"FloorMod\")\n                             .Device(DEVICE_GPU)\n                             .HostMemory(\"x\")\n                             .HostMemory(\"y\")\n                             .HostMemory(\"z\")\n                             .TypeConstraint<int32>(\"T\"),\n                         BinaryOp<CPUDevice, functor::safe_floor_mod<int32>>);\n #endif\n\n\n-- eo snip --\nsomebody help out adding floor mod in the build.\nthanks", "body": "OS: Ubuntu 16.04 64bits\r\nAndroid Version: 7.1 (Nougat)\r\nNDK Version: android-ndk-r12b\r\nHEXAGON SDK: 3.1\r\n\r\nWhen i am trying to build benchmark app, using make build, floor mod operation is not getting added by default, \r\n\r\n### By default:- \r\nwhen I issue below command, cwise_op_floor_mod.cc is not getting compiled against most of the files getting compiled in core/kernel/ folder\r\n`make -f tensorflow/contrib/makefile/Makefile TARGET=ANDROID NDK_ROOT=~/android-ndk-r12b`\r\n\r\n### Changes tried to add floor mod but failed:-\r\ntensorflow/core/kernels/cwise_op_floor_mode.cc - changes in bold \r\n\r\n--- snip ---\r\n\r\n```\r\n#include \"tensorflow/core/kernels/cwise_ops_common.h\"\r\n \r\n namespace tensorflow {\r\n REGISTER2(BinaryOp, CPU, \"FloorMod\", functor::safe_floor_mod, int32, int64);\r\n REGISTER2(BinaryOp, CPU, \"FloorMod\", functor::floor_fmod, float, double);\r\n \r\n **REGISTER_KERNEL_BUILDER(Name(\"FloorMod\")\r\n                             .Device(DEVICE_CPU)\r\n                             .HostMemory(\"x\")\r\n                             .HostMemory(\"y\")\r\n                             .HostMemory(\"z\")\r\n                             .TypeConstraint<int32>(\"T\"),\r\n                         BinaryOp<CPUDevice, functor::safe_floor_mod<int32>>);**\r\n #if GOOGLE_CUDA\r\n // A special GPU kernel for int32.\r\n // TODO(b/25387198): Also enable int32 in device memory. This kernel\r\n // registration requires all int32 inputs and outputs to be in host memory.\r\n REGISTER_KERNEL_BUILDER(Name(\"FloorMod\")\r\n                             .Device(DEVICE_GPU)\r\n                             .HostMemory(\"x\")\r\n                             .HostMemory(\"y\")\r\n                             .HostMemory(\"z\")\r\n                             .TypeConstraint<int32>(\"T\"),\r\n                         BinaryOp<CPUDevice, functor::safe_floor_mod<int32>>);\r\n #endif\r\n\r\n```\r\n-- eo snip --\r\n\r\nsomebody help out adding floor mod in the build.\r\nthanks\r\n"}
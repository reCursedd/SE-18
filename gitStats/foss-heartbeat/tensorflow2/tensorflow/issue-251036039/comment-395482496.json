{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/395482496", "html_url": "https://github.com/tensorflow/tensorflow/issues/12367#issuecomment-395482496", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12367", "id": 395482496, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTQ4MjQ5Ng==", "user": {"login": "amir-abdi", "id": 4620480, "node_id": "MDQ6VXNlcjQ2MjA0ODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/4620480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amir-abdi", "html_url": "https://github.com/amir-abdi", "followers_url": "https://api.github.com/users/amir-abdi/followers", "following_url": "https://api.github.com/users/amir-abdi/following{/other_user}", "gists_url": "https://api.github.com/users/amir-abdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/amir-abdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amir-abdi/subscriptions", "organizations_url": "https://api.github.com/users/amir-abdi/orgs", "repos_url": "https://api.github.com/users/amir-abdi/repos", "events_url": "https://api.github.com/users/amir-abdi/events{/privacy}", "received_events_url": "https://api.github.com/users/amir-abdi/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-07T16:25:58Z", "updated_at": "2018-06-07T16:29:57Z", "author_association": "NONE", "body_html": "<p>I use this to export, following the code posted <a href=\"here\">https://github.com/tensorflow/models/blob/72f5834cc19bcfd3aef795dd926575fd9e0db802/official/mnist/mnist.py</a>:</p>\n<pre><code>  features = tf.placeholder(dtype=tf.float64, shape=[15])\n  receiver_fn = tf.estimator.export.build_raw_serving_input_receiver_fn(\n      features={\"features\": features},\n  )\n  pixel_classifier.export_savedmodel(\n      export_dir_base=output_directory,\n      serving_input_receiver_fn=receiver_fn,\n      strip_default_attrs=True)\n</code></pre>\n<p>Here is the error I get:</p>\n<pre><code>tensorflow/python/framework/tensor_util.py\", line 348, in _AssertCompatible\n    (dtype.name, repr(mismatch), type(mismatch).__name__))\nTypeError: Expected float64, got {'features': &lt;tf.Tensor 'Placeholder:0' shape=(?,) dtype=float64&gt;} of type 'dict' instead.\n\n</code></pre>\n<p>And if I switch to:</p>\n<pre><code>  features = tf.placeholder(dtype=tf.float64, shape=[15])\n  receiver_fn = tf.estimator.export.build_raw_serving_input_receiver_fn(\n      features=features,\n  )\n</code></pre>\n<p>I would receive the following error:</p>\n<pre><code>tensorflow/python/estimator/export/export.py\", line 313, in _placeholders_from_receiver_tensors_dict\n    for name, t in input_vals.items()\nAttributeError: 'Tensor' object has no attribute 'items'\n\n</code></pre>\n<p>It is not clear what kind of input the <code>build_raw_serving_input_receiver_fn</code> is expecting.</p>", "body_text": "I use this to export, following the code posted https://github.com/tensorflow/models/blob/72f5834cc19bcfd3aef795dd926575fd9e0db802/official/mnist/mnist.py:\n  features = tf.placeholder(dtype=tf.float64, shape=[15])\n  receiver_fn = tf.estimator.export.build_raw_serving_input_receiver_fn(\n      features={\"features\": features},\n  )\n  pixel_classifier.export_savedmodel(\n      export_dir_base=output_directory,\n      serving_input_receiver_fn=receiver_fn,\n      strip_default_attrs=True)\n\nHere is the error I get:\ntensorflow/python/framework/tensor_util.py\", line 348, in _AssertCompatible\n    (dtype.name, repr(mismatch), type(mismatch).__name__))\nTypeError: Expected float64, got {'features': <tf.Tensor 'Placeholder:0' shape=(?,) dtype=float64>} of type 'dict' instead.\n\n\nAnd if I switch to:\n  features = tf.placeholder(dtype=tf.float64, shape=[15])\n  receiver_fn = tf.estimator.export.build_raw_serving_input_receiver_fn(\n      features=features,\n  )\n\nI would receive the following error:\ntensorflow/python/estimator/export/export.py\", line 313, in _placeholders_from_receiver_tensors_dict\n    for name, t in input_vals.items()\nAttributeError: 'Tensor' object has no attribute 'items'\n\n\nIt is not clear what kind of input the build_raw_serving_input_receiver_fn is expecting.", "body": "I use this to export, following the code posted [https://github.com/tensorflow/models/blob/72f5834cc19bcfd3aef795dd926575fd9e0db802/official/mnist/mnist.py](here):\r\n```\r\n  features = tf.placeholder(dtype=tf.float64, shape=[15])\r\n  receiver_fn = tf.estimator.export.build_raw_serving_input_receiver_fn(\r\n      features={\"features\": features},\r\n  )\r\n  pixel_classifier.export_savedmodel(\r\n      export_dir_base=output_directory,\r\n      serving_input_receiver_fn=receiver_fn,\r\n      strip_default_attrs=True)\r\n```\r\n\r\nHere is the error I get:\r\n\r\n```\r\ntensorflow/python/framework/tensor_util.py\", line 348, in _AssertCompatible\r\n    (dtype.name, repr(mismatch), type(mismatch).__name__))\r\nTypeError: Expected float64, got {'features': <tf.Tensor 'Placeholder:0' shape=(?,) dtype=float64>} of type 'dict' instead.\r\n\r\n```\r\n\r\n\r\nAnd if I switch to:\r\n```\r\n  features = tf.placeholder(dtype=tf.float64, shape=[15])\r\n  receiver_fn = tf.estimator.export.build_raw_serving_input_receiver_fn(\r\n      features=features,\r\n  )\r\n```\r\n\r\nI would receive the following error:\r\n```\r\ntensorflow/python/estimator/export/export.py\", line 313, in _placeholders_from_receiver_tensors_dict\r\n    for name, t in input_vals.items()\r\nAttributeError: 'Tensor' object has no attribute 'items'\r\n\r\n```\r\n\r\nIt is not clear what kind of input the `build_raw_serving_input_receiver_fn` is expecting."}
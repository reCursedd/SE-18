{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/336567625", "html_url": "https://github.com/tensorflow/tensorflow/issues/12367#issuecomment-336567625", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12367", "id": 336567625, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjU2NzYyNQ==", "user": {"login": "rutadesai", "id": 7421733, "node_id": "MDQ6VXNlcjc0MjE3MzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/7421733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rutadesai", "html_url": "https://github.com/rutadesai", "followers_url": "https://api.github.com/users/rutadesai/followers", "following_url": "https://api.github.com/users/rutadesai/following{/other_user}", "gists_url": "https://api.github.com/users/rutadesai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rutadesai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rutadesai/subscriptions", "organizations_url": "https://api.github.com/users/rutadesai/orgs", "repos_url": "https://api.github.com/users/rutadesai/repos", "events_url": "https://api.github.com/users/rutadesai/events{/privacy}", "received_events_url": "https://api.github.com/users/rutadesai/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-13T21:07:34Z", "updated_at": "2017-10-13T21:13:58Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=14881815\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sudododo\">@sudododo</a> -- I am trying to use export_savedmodel() to save a trained DNNLinearCombinedRegressor after training. I do not want to use Tensorflow serving as I intend to use it for a simple local desktop application. When I use build_parsing_serving_input_receiver_fn(), I am able to export the model using:  <code>servable_model_path = regressor.export_savedmodel(export_dir_base = servable_model_dir, serving_input_fn = export_input_fn, as_text= True).</code> However, when I use the build_raw_serving_input_receiver_fn() (as I should be, since I don't want to use Tensorflow Serving), I get the following error:<br>\n<code>AttributeError: 'FixedLenFeature' object has no attribute 'get_shape' </code></p>\n<p>The only thing I did different was creation of export_input_fn. Instead of doing --<br>\n<code>export_input_fn = tf.contrib.learn.utils.build_parsing_serving_input_fn(feature_spec)</code>, I did this:<br>\n<code>export_input_fn = tf.estimator.export.build_raw_serving_input_receiver_fn(feature_spec)</code></p>\n<p>Here feature_spec is created as follows:<br>\n<code>feature_spec = tf.feature_column.make_parse_example_spec(feature_cols)</code><br>\nwhere feature cols are real_valued and embedding columns. I am using tensorflow 1.3.</p>\n<p>Thanks for your help!</p>", "body_text": "@sudododo -- I am trying to use export_savedmodel() to save a trained DNNLinearCombinedRegressor after training. I do not want to use Tensorflow serving as I intend to use it for a simple local desktop application. When I use build_parsing_serving_input_receiver_fn(), I am able to export the model using:  servable_model_path = regressor.export_savedmodel(export_dir_base = servable_model_dir, serving_input_fn = export_input_fn, as_text= True). However, when I use the build_raw_serving_input_receiver_fn() (as I should be, since I don't want to use Tensorflow Serving), I get the following error:\nAttributeError: 'FixedLenFeature' object has no attribute 'get_shape' \nThe only thing I did different was creation of export_input_fn. Instead of doing --\nexport_input_fn = tf.contrib.learn.utils.build_parsing_serving_input_fn(feature_spec), I did this:\nexport_input_fn = tf.estimator.export.build_raw_serving_input_receiver_fn(feature_spec)\nHere feature_spec is created as follows:\nfeature_spec = tf.feature_column.make_parse_example_spec(feature_cols)\nwhere feature cols are real_valued and embedding columns. I am using tensorflow 1.3.\nThanks for your help!", "body": "@sudododo -- I am trying to use export_savedmodel() to save a trained DNNLinearCombinedRegressor after training. I do not want to use Tensorflow serving as I intend to use it for a simple local desktop application. When I use build_parsing_serving_input_receiver_fn(), I am able to export the model using:  `servable_model_path = regressor.export_savedmodel(export_dir_base = servable_model_dir, serving_input_fn = export_input_fn, as_text= True).` However, when I use the build_raw_serving_input_receiver_fn() (as I should be, since I don't want to use Tensorflow Serving), I get the following error:\r\n`AttributeError: 'FixedLenFeature' object has no attribute 'get_shape'\r\n`\r\n\r\nThe only thing I did different was creation of export_input_fn. Instead of doing -- \r\n`export_input_fn = tf.contrib.learn.utils.build_parsing_serving_input_fn(feature_spec)`, I did this:\r\n`export_input_fn = tf.estimator.export.build_raw_serving_input_receiver_fn(feature_spec)`\r\n\r\nHere feature_spec is created as follows:\r\n`feature_spec = tf.feature_column.make_parse_example_spec(feature_cols)`\r\nwhere feature cols are real_valued and embedding columns. I am using tensorflow 1.3.\r\n\r\nThanks for your help!"}
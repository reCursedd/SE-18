{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/345722449", "html_url": "https://github.com/tensorflow/tensorflow/issues/12367#issuecomment-345722449", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12367", "id": 345722449, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTcyMjQ0OQ==", "user": {"login": "kiminh", "id": 8201408, "node_id": "MDQ6VXNlcjgyMDE0MDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/8201408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kiminh", "html_url": "https://github.com/kiminh", "followers_url": "https://api.github.com/users/kiminh/followers", "following_url": "https://api.github.com/users/kiminh/following{/other_user}", "gists_url": "https://api.github.com/users/kiminh/gists{/gist_id}", "starred_url": "https://api.github.com/users/kiminh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kiminh/subscriptions", "organizations_url": "https://api.github.com/users/kiminh/orgs", "repos_url": "https://api.github.com/users/kiminh/repos", "events_url": "https://api.github.com/users/kiminh/events{/privacy}", "received_events_url": "https://api.github.com/users/kiminh/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-20T15:04:48Z", "updated_at": "2017-11-20T15:04:48Z", "author_association": "NONE", "body_html": "<p>I use the same code and <code> tf 1.4.0</code> version, get the <code>save_model.pbtxt</code>, the stucture of <code>signature_def</code> is</p>\n<pre><code>  signature_def {\n    key: \"predict\"\n    value {\n      inputs {\n        key: \"age\"\n        value {\n          name: \"age:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"capital_gain\"\n        value {\n          name: \"capital_gain:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"capital_loss\"\n        value {\n          name: \"capital_loss:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"education\"\n        value {\n          name: \"education:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"education_num\"\n        value {\n          name: \"education_num:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"hours_per_week\"\n        value {\n          name: \"hours_per_week:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"marital_status\"\n        value {\n          name: \"marital_status:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"occupation\"\n        value {\n          name: \"occupation:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"relationship\"\n        value {\n          name: \"relationship:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"workclass\"\n        value {\n          name: \"workclass:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"class_ids\"\n        value {\n          name: \"head/predictions/classes:0\"\n          dtype: DT_INT64\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"classes\"\n        value {\n          name: \"head/predictions/str_classes:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"logistic\"\n        value {\n          name: \"head/predictions/logistic:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"logits\"\n        value {\n          name: \"head/predictions/logits:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"probabilities\"\n        value {\n          name: \"head/predictions/probabilities:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 2\n            }\n          }\n        }\n      }\n      method_name: \"tensorflow/serving/predict\"\n    }\n  }\n</code></pre>\n<p>I'm working on using Pure Java binding of tensorflow to do prediction.</p>", "body_text": "I use the same code and  tf 1.4.0 version, get the save_model.pbtxt, the stucture of signature_def is\n  signature_def {\n    key: \"predict\"\n    value {\n      inputs {\n        key: \"age\"\n        value {\n          name: \"age:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"capital_gain\"\n        value {\n          name: \"capital_gain:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"capital_loss\"\n        value {\n          name: \"capital_loss:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"education\"\n        value {\n          name: \"education:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"education_num\"\n        value {\n          name: \"education_num:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"hours_per_week\"\n        value {\n          name: \"hours_per_week:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"marital_status\"\n        value {\n          name: \"marital_status:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"occupation\"\n        value {\n          name: \"occupation:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"relationship\"\n        value {\n          name: \"relationship:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      inputs {\n        key: \"workclass\"\n        value {\n          name: \"workclass:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"class_ids\"\n        value {\n          name: \"head/predictions/classes:0\"\n          dtype: DT_INT64\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"classes\"\n        value {\n          name: \"head/predictions/str_classes:0\"\n          dtype: DT_STRING\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"logistic\"\n        value {\n          name: \"head/predictions/logistic:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"logits\"\n        value {\n          name: \"head/predictions/logits:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 1\n            }\n          }\n        }\n      }\n      outputs {\n        key: \"probabilities\"\n        value {\n          name: \"head/predictions/probabilities:0\"\n          dtype: DT_FLOAT\n          tensor_shape {\n            dim {\n              size: -1\n            }\n            dim {\n              size: 2\n            }\n          }\n        }\n      }\n      method_name: \"tensorflow/serving/predict\"\n    }\n  }\n\nI'm working on using Pure Java binding of tensorflow to do prediction.", "body": "I use the same code and ` tf 1.4.0` version, get the `save_model.pbtxt`, the stucture of `signature_def` is\r\n```\r\n  signature_def {\r\n    key: \"predict\"\r\n    value {\r\n      inputs {\r\n        key: \"age\"\r\n        value {\r\n          name: \"age:0\"\r\n          dtype: DT_FLOAT\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      inputs {\r\n        key: \"capital_gain\"\r\n        value {\r\n          name: \"capital_gain:0\"\r\n          dtype: DT_FLOAT\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      inputs {\r\n        key: \"capital_loss\"\r\n        value {\r\n          name: \"capital_loss:0\"\r\n          dtype: DT_FLOAT\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      inputs {\r\n        key: \"education\"\r\n        value {\r\n          name: \"education:0\"\r\n          dtype: DT_STRING\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      inputs {\r\n        key: \"education_num\"\r\n        value {\r\n          name: \"education_num:0\"\r\n          dtype: DT_FLOAT\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      inputs {\r\n        key: \"hours_per_week\"\r\n        value {\r\n          name: \"hours_per_week:0\"\r\n          dtype: DT_FLOAT\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      inputs {\r\n        key: \"marital_status\"\r\n        value {\r\n          name: \"marital_status:0\"\r\n          dtype: DT_STRING\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      inputs {\r\n        key: \"occupation\"\r\n        value {\r\n          name: \"occupation:0\"\r\n          dtype: DT_STRING\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      inputs {\r\n        key: \"relationship\"\r\n        value {\r\n          name: \"relationship:0\"\r\n          dtype: DT_STRING\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      inputs {\r\n        key: \"workclass\"\r\n        value {\r\n          name: \"workclass:0\"\r\n          dtype: DT_STRING\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      outputs {\r\n        key: \"class_ids\"\r\n        value {\r\n          name: \"head/predictions/classes:0\"\r\n          dtype: DT_INT64\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      outputs {\r\n        key: \"classes\"\r\n        value {\r\n          name: \"head/predictions/str_classes:0\"\r\n          dtype: DT_STRING\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      outputs {\r\n        key: \"logistic\"\r\n        value {\r\n          name: \"head/predictions/logistic:0\"\r\n          dtype: DT_FLOAT\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      outputs {\r\n        key: \"logits\"\r\n        value {\r\n          name: \"head/predictions/logits:0\"\r\n          dtype: DT_FLOAT\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n      outputs {\r\n        key: \"probabilities\"\r\n        value {\r\n          name: \"head/predictions/probabilities:0\"\r\n          dtype: DT_FLOAT\r\n          tensor_shape {\r\n            dim {\r\n              size: -1\r\n            }\r\n            dim {\r\n              size: 2\r\n            }\r\n          }\r\n        }\r\n      }\r\n      method_name: \"tensorflow/serving/predict\"\r\n    }\r\n  }\r\n```\r\n\r\nI'm working on using Pure Java binding of tensorflow to do prediction."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/280322192", "html_url": "https://github.com/tensorflow/tensorflow/issues/7542#issuecomment-280322192", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7542", "id": 280322192, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDMyMjE5Mg==", "user": {"login": "dchirikov", "id": 6017800, "node_id": "MDQ6VXNlcjYwMTc4MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6017800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dchirikov", "html_url": "https://github.com/dchirikov", "followers_url": "https://api.github.com/users/dchirikov/followers", "following_url": "https://api.github.com/users/dchirikov/following{/other_user}", "gists_url": "https://api.github.com/users/dchirikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dchirikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dchirikov/subscriptions", "organizations_url": "https://api.github.com/users/dchirikov/orgs", "repos_url": "https://api.github.com/users/dchirikov/repos", "events_url": "https://api.github.com/users/dchirikov/events{/privacy}", "received_events_url": "https://api.github.com/users/dchirikov/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-16T12:51:17Z", "updated_at": "2017-02-16T12:51:17Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1835471\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/r4nt\">@r4nt</a><br>\nIf i get it right <code>./third_party/gpus/cuda_configure.bzl</code> is being executed during <code>basel build</code>, and yes, it expects some vars is user environment is being defined:</p>\n<pre><code>def _enable_cuda(repository_ctx):\n  if \"TF_NEED_CUDA\" in repository_ctx.os.environ:\n    enable_cuda = repository_ctx.os.environ[\"TF_NEED_CUDA\"].strip()\n    return enable_cuda == \"1\"\n  return False\n</code></pre>", "body_text": "@r4nt\nIf i get it right ./third_party/gpus/cuda_configure.bzl is being executed during basel build, and yes, it expects some vars is user environment is being defined:\ndef _enable_cuda(repository_ctx):\n  if \"TF_NEED_CUDA\" in repository_ctx.os.environ:\n    enable_cuda = repository_ctx.os.environ[\"TF_NEED_CUDA\"].strip()\n    return enable_cuda == \"1\"\n  return False", "body": "@r4nt \r\nIf i get it right `./third_party/gpus/cuda_configure.bzl` is being executed during `basel build`, and yes, it expects some vars is user environment is being defined:\r\n```\r\ndef _enable_cuda(repository_ctx):\r\n  if \"TF_NEED_CUDA\" in repository_ctx.os.environ:\r\n    enable_cuda = repository_ctx.os.environ[\"TF_NEED_CUDA\"].strip()\r\n    return enable_cuda == \"1\"\r\n  return False\r\n```\r\n"}
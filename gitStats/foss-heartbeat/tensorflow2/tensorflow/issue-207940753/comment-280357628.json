{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/280357628", "html_url": "https://github.com/tensorflow/tensorflow/issues/7542#issuecomment-280357628", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7542", "id": 280357628, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDM1NzYyOA==", "user": {"login": "dchirikov", "id": 6017800, "node_id": "MDQ6VXNlcjYwMTc4MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6017800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dchirikov", "html_url": "https://github.com/dchirikov", "followers_url": "https://api.github.com/users/dchirikov/followers", "following_url": "https://api.github.com/users/dchirikov/following{/other_user}", "gists_url": "https://api.github.com/users/dchirikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dchirikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dchirikov/subscriptions", "organizations_url": "https://api.github.com/users/dchirikov/orgs", "repos_url": "https://api.github.com/users/dchirikov/repos", "events_url": "https://api.github.com/users/dchirikov/events{/privacy}", "received_events_url": "https://api.github.com/users/dchirikov/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-16T15:13:23Z", "updated_at": "2017-02-16T15:13:23Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1835471\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/r4nt\">@r4nt</a><br>\nif i add print statement to cuda_configure.bzl it will be printed during build:</p>\n<pre><code>def _enable_cuda(repository_ctx):\n  print(\"========================= test ==========================\")\n  if \"TF_NEED_CUDA\" in repository_ctx.os.environ:\n    enable_cuda = repository_ctx.os.environ[\"TF_NEED_CUDA\"].strip()\n    return enable_cuda == \"1\"\n  return False\n</code></pre>\n<pre><code>$ bazel build -s -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package \nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\n....................\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.build/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\nWARNING: /trinity/home/cvsupport/dmitry/tf/tensorflow/third_party/gpus/cuda_configure.bzl:116:3: ========================= test ==========================.\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD:4:1: Traceback (most recent call last):\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD\", line 4\n                error_gpu_disabled()\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/error_gpu_disabled.bzl\", line 3, in error_gpu_disabled\n                fail(\"ERROR: Building with --config=c...\")\nERROR: Building with --config=cuda but TensorFlow is not configured to build with GPU support. Please re-run ./configure and enter 'Y' at the prompt to build with GPU support.\nERROR: no such target '@local_config_cuda//crosstool:toolchain': target 'toolchain' not declared in package 'crosstool' defined by /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD.\nINFO: Elapsed time: 1.585s\n</code></pre>", "body_text": "@r4nt\nif i add print statement to cuda_configure.bzl it will be printed during build:\ndef _enable_cuda(repository_ctx):\n  print(\"========================= test ==========================\")\n  if \"TF_NEED_CUDA\" in repository_ctx.os.environ:\n    enable_cuda = repository_ctx.os.environ[\"TF_NEED_CUDA\"].strip()\n    return enable_cuda == \"1\"\n  return False\n\n$ bazel build -s -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package \nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\n....................\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.build/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\nWARNING: /trinity/home/cvsupport/dmitry/tf/tensorflow/third_party/gpus/cuda_configure.bzl:116:3: ========================= test ==========================.\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD:4:1: Traceback (most recent call last):\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD\", line 4\n                error_gpu_disabled()\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/error_gpu_disabled.bzl\", line 3, in error_gpu_disabled\n                fail(\"ERROR: Building with --config=c...\")\nERROR: Building with --config=cuda but TensorFlow is not configured to build with GPU support. Please re-run ./configure and enter 'Y' at the prompt to build with GPU support.\nERROR: no such target '@local_config_cuda//crosstool:toolchain': target 'toolchain' not declared in package 'crosstool' defined by /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD.\nINFO: Elapsed time: 1.585s", "body": "@r4nt\r\nif i add print statement to cuda_configure.bzl it will be printed during build:\r\n```\r\ndef _enable_cuda(repository_ctx):\r\n  print(\"========================= test ==========================\")\r\n  if \"TF_NEED_CUDA\" in repository_ctx.os.environ:\r\n    enable_cuda = repository_ctx.os.environ[\"TF_NEED_CUDA\"].strip()\r\n    return enable_cuda == \"1\"\r\n  return False\r\n```\r\n```\r\n$ bazel build -s -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package \r\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\r\n....................\r\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.build/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\r\nWARNING: /trinity/home/cvsupport/dmitry/tf/tensorflow/third_party/gpus/cuda_configure.bzl:116:3: ========================= test ==========================.\r\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD:4:1: Traceback (most recent call last):\r\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD\", line 4\r\n                error_gpu_disabled()\r\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/error_gpu_disabled.bzl\", line 3, in error_gpu_disabled\r\n                fail(\"ERROR: Building with --config=c...\")\r\nERROR: Building with --config=cuda but TensorFlow is not configured to build with GPU support. Please re-run ./configure and enter 'Y' at the prompt to build with GPU support.\r\nERROR: no such target '@local_config_cuda//crosstool:toolchain': target 'toolchain' not declared in package 'crosstool' defined by /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD.\r\nINFO: Elapsed time: 1.585s\r\n```\r\n"}
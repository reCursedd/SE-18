{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/280619065", "html_url": "https://github.com/tensorflow/tensorflow/issues/7542#issuecomment-280619065", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7542", "id": 280619065, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDYxOTA2NQ==", "user": {"login": "dchirikov", "id": 6017800, "node_id": "MDQ6VXNlcjYwMTc4MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6017800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dchirikov", "html_url": "https://github.com/dchirikov", "followers_url": "https://api.github.com/users/dchirikov/followers", "following_url": "https://api.github.com/users/dchirikov/following{/other_user}", "gists_url": "https://api.github.com/users/dchirikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dchirikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dchirikov/subscriptions", "organizations_url": "https://api.github.com/users/dchirikov/orgs", "repos_url": "https://api.github.com/users/dchirikov/repos", "events_url": "https://api.github.com/users/dchirikov/events{/privacy}", "received_events_url": "https://api.github.com/users/dchirikov/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-17T10:52:41Z", "updated_at": "2017-02-17T10:52:41Z", "author_association": "NONE", "body_html": "<p>Seems like something in <code>bazel build</code> invalidates the cache:</p>\n<pre><code>$ ls  -l $(bazel info output_base)/external/local_config_cuda/crosstool\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\n................\ntotal 16\n-rwxrwxr-x 1 cvsupport cvsupport 1267 Feb 17 11:45 BUILD\ndrwxrwxr-x 3 cvsupport cvsupport   17 Feb 17 11:45 clang\n-rwxrwxr-x 1 cvsupport cvsupport 8928 Feb 17 11:45 CROSSTOOL\n\n$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD:4:1: Traceback (most recent call last):\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD\", line 4\n                error_gpu_disabled()\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/error_gpu_disabled.bzl\", line 3, in error_gpu_disabled\n                fail(\"ERROR: Building with --config=c...\")\nERROR: Building with --config=cuda but TensorFlow is not configured to build with GPU support. Please re-run ./configure and enter 'Y' at the prompt to build with GPU support.\nERROR: no such target '@local_config_cuda//crosstool:toolchain': target 'toolchain' not declared in package 'crosstool' defined by /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD.\nINFO: Elapsed time: 1.396s\n\n$ ls  -l $(bazel info output_base)/external/local_config_cuda/crosstool\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\ntotal 8\n-rwxrwxr-x 1 cvsupport cvsupport  88 Feb 17 11:49 BUILD\n-rwxrwxr-x 1 cvsupport cvsupport 497 Feb 17 11:49 error_gpu_disabled.bzl\n</code></pre>", "body_text": "Seems like something in bazel build invalidates the cache:\n$ ls  -l $(bazel info output_base)/external/local_config_cuda/crosstool\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\n................\ntotal 16\n-rwxrwxr-x 1 cvsupport cvsupport 1267 Feb 17 11:45 BUILD\ndrwxrwxr-x 3 cvsupport cvsupport   17 Feb 17 11:45 clang\n-rwxrwxr-x 1 cvsupport cvsupport 8928 Feb 17 11:45 CROSSTOOL\n\n$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD:4:1: Traceback (most recent call last):\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD\", line 4\n                error_gpu_disabled()\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/error_gpu_disabled.bzl\", line 3, in error_gpu_disabled\n                fail(\"ERROR: Building with --config=c...\")\nERROR: Building with --config=cuda but TensorFlow is not configured to build with GPU support. Please re-run ./configure and enter 'Y' at the prompt to build with GPU support.\nERROR: no such target '@local_config_cuda//crosstool:toolchain': target 'toolchain' not declared in package 'crosstool' defined by /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD.\nINFO: Elapsed time: 1.396s\n\n$ ls  -l $(bazel info output_base)/external/local_config_cuda/crosstool\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\ntotal 8\n-rwxrwxr-x 1 cvsupport cvsupport  88 Feb 17 11:49 BUILD\n-rwxrwxr-x 1 cvsupport cvsupport 497 Feb 17 11:49 error_gpu_disabled.bzl", "body": "Seems like something in `bazel build` invalidates the cache:\r\n```\r\n$ ls  -l $(bazel info output_base)/external/local_config_cuda/crosstool\r\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\r\n................\r\ntotal 16\r\n-rwxrwxr-x 1 cvsupport cvsupport 1267 Feb 17 11:45 BUILD\r\ndrwxrwxr-x 3 cvsupport cvsupport   17 Feb 17 11:45 clang\r\n-rwxrwxr-x 1 cvsupport cvsupport 8928 Feb 17 11:45 CROSSTOOL\r\n\r\n$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD:4:1: Traceback (most recent call last):\r\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD\", line 4\r\n                error_gpu_disabled()\r\n        File \"/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/error_gpu_disabled.bzl\", line 3, in error_gpu_disabled\r\n                fail(\"ERROR: Building with --config=c...\")\r\nERROR: Building with --config=cuda but TensorFlow is not configured to build with GPU support. Please re-run ./configure and enter 'Y' at the prompt to build with GPU support.\r\nERROR: no such target '@local_config_cuda//crosstool:toolchain': target 'toolchain' not declared in package 'crosstool' defined by /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/local_config_cuda/crosstool/BUILD.\r\nINFO: Elapsed time: 1.396s\r\n\r\n$ ls  -l $(bazel info output_base)/external/local_config_cuda/crosstool\r\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\r\ntotal 8\r\n-rwxrwxr-x 1 cvsupport cvsupport  88 Feb 17 11:49 BUILD\r\n-rwxrwxr-x 1 cvsupport cvsupport 497 Feb 17 11:49 error_gpu_disabled.bzl\r\n```"}
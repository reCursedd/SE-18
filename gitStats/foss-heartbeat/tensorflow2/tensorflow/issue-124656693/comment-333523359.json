{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/333523359", "html_url": "https://github.com/tensorflow/tensorflow/issues/672#issuecomment-333523359", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/672", "id": 333523359, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzUyMzM1OQ==", "user": {"login": "Amitayus", "id": 2138952, "node_id": "MDQ6VXNlcjIxMzg5NTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/2138952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amitayus", "html_url": "https://github.com/Amitayus", "followers_url": "https://api.github.com/users/Amitayus/followers", "following_url": "https://api.github.com/users/Amitayus/following{/other_user}", "gists_url": "https://api.github.com/users/Amitayus/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amitayus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amitayus/subscriptions", "organizations_url": "https://api.github.com/users/Amitayus/orgs", "repos_url": "https://api.github.com/users/Amitayus/repos", "events_url": "https://api.github.com/users/Amitayus/events{/privacy}", "received_events_url": "https://api.github.com/users/Amitayus/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-02T12:45:21Z", "updated_at": "2017-10-02T12:52:39Z", "author_association": "NONE", "body_html": "<p>There is some interesting logic in following code.</p>\n<pre><code>import tensorflow as tf\n\none = tf.constant(1, name=\"constant_1\")\nstate = tf.Variable(0, name=\"variable_1\")\n\nnew_state = tf.add(state, one)\nupdate_op = tf.assign(state, new_state)\n\n\nsess = tf.Session()\nsess.run(tf.global_variables_initializer())\nsess.run(tf.local_variables_initializer())\n\nfor _ in range(4):\n    # way 1\n    sess.run(update_op)\n    result = sess.run([state, new_state])\n    # way 2\n    # result = sess.run([update_op, state, new_state])\n    # way 3\n    # result = sess.run([state, new_state, update_op])\n    print(result)\n</code></pre>\n<p>Way 1 outputs:</p>\n<pre><code>[1, 2]\n[2, 3]\n[3, 4]\n[4, 5]\n</code></pre>\n<p>But Way 2 and 3 output:</p>\n<pre><code>[1, 1, 1]\n[2, 2, 2]\n[3, 3, 3]\n[4, 4, 4]\n</code></pre>", "body_text": "There is some interesting logic in following code.\nimport tensorflow as tf\n\none = tf.constant(1, name=\"constant_1\")\nstate = tf.Variable(0, name=\"variable_1\")\n\nnew_state = tf.add(state, one)\nupdate_op = tf.assign(state, new_state)\n\n\nsess = tf.Session()\nsess.run(tf.global_variables_initializer())\nsess.run(tf.local_variables_initializer())\n\nfor _ in range(4):\n    # way 1\n    sess.run(update_op)\n    result = sess.run([state, new_state])\n    # way 2\n    # result = sess.run([update_op, state, new_state])\n    # way 3\n    # result = sess.run([state, new_state, update_op])\n    print(result)\n\nWay 1 outputs:\n[1, 2]\n[2, 3]\n[3, 4]\n[4, 5]\n\nBut Way 2 and 3 output:\n[1, 1, 1]\n[2, 2, 2]\n[3, 3, 3]\n[4, 4, 4]", "body": "There is some interesting logic in following code.\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\none = tf.constant(1, name=\"constant_1\")\r\nstate = tf.Variable(0, name=\"variable_1\")\r\n\r\nnew_state = tf.add(state, one)\r\nupdate_op = tf.assign(state, new_state)\r\n\r\n\r\nsess = tf.Session()\r\nsess.run(tf.global_variables_initializer())\r\nsess.run(tf.local_variables_initializer())\r\n\r\nfor _ in range(4):\r\n    # way 1\r\n    sess.run(update_op)\r\n    result = sess.run([state, new_state])\r\n    # way 2\r\n    # result = sess.run([update_op, state, new_state])\r\n    # way 3\r\n    # result = sess.run([state, new_state, update_op])\r\n    print(result)\r\n```\r\n\r\nWay 1 outputs:\r\n```\r\n[1, 2]\r\n[2, 3]\r\n[3, 4]\r\n[4, 5]\r\n```\r\nBut Way 2 and 3 output:\r\n```\r\n[1, 1, 1]\r\n[2, 2, 2]\r\n[3, 3, 3]\r\n[4, 4, 4]\r\n```"}
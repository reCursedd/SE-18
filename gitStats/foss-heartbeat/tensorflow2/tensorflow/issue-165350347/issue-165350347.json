{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3295", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3295/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3295/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3295/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3295", "id": 165350347, "node_id": "MDU6SXNzdWUxNjUzNTAzNDc=", "number": 3295, "title": "tf.train.Server.create_local_server  has two problems :1)performance drop 2 times compare to without it,2) gpu memory fraction limitations fails. ", "user": {"login": "u4lr451", "id": 18026245, "node_id": "MDQ6VXNlcjE4MDI2MjQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/18026245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/u4lr451", "html_url": "https://github.com/u4lr451", "followers_url": "https://api.github.com/users/u4lr451/followers", "following_url": "https://api.github.com/users/u4lr451/following{/other_user}", "gists_url": "https://api.github.com/users/u4lr451/gists{/gist_id}", "starred_url": "https://api.github.com/users/u4lr451/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/u4lr451/subscriptions", "organizations_url": "https://api.github.com/users/u4lr451/orgs", "repos_url": "https://api.github.com/users/u4lr451/repos", "events_url": "https://api.github.com/users/u4lr451/events{/privacy}", "received_events_url": "https://api.github.com/users/u4lr451/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2016-07-13T15:28:24Z", "updated_at": "2017-11-02T17:04:22Z", "closed_at": "2016-08-08T17:51:04Z", "author_association": "NONE", "body_html": "<p>tf.train.Server.create_local_server has two problems :1)performance drop 2 times compare to without it,2) gpu memory fraction limitations fails</p>\n<p>my model is a dnn network with 12 layers, same as the alphago policy network!</p>\n<h2>code1: whitout server = tf.train.Server.create_local_server(start = True)</h2>\n<pre><code>gpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.333)\n\nsess =  tf.Session(config=tf.ConfigProto(log_device_placement=True,allow_soft_placement=True,gpu_options=gpu_options))\n</code></pre>\n<h2>- code2:  using server = tf.train.Server.create_local_server(start = True)</h2>\n<pre><code>gpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.333)\n\n    server = tf.train.Server.create_local_server(start = True)\n\n    sess= tf.Session(target=server.target,config=tf.ConfigProto(log_device_placement=True,allow_soft_placement=True,gpu_options=gpu_options))\n</code></pre>\n<h1>Questions:</h1>\n<p><strong>1. code2 performance drop 3 times compare to code1( 3 steps/seconds vs 11 steps/seconds), why?</strong><br>\n<strong>2. code2 will broke the  limitations of gpu memory. while code1 is ok</strong></p>\n<p>ps: Is this relevant to this issue than the training data is read from queue?</p>", "body_text": "tf.train.Server.create_local_server has two problems :1)performance drop 2 times compare to without it,2) gpu memory fraction limitations fails\nmy model is a dnn network with 12 layers, same as the alphago policy network!\ncode1: whitout server = tf.train.Server.create_local_server(start = True)\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.333)\n\nsess =  tf.Session(config=tf.ConfigProto(log_device_placement=True,allow_soft_placement=True,gpu_options=gpu_options))\n\n- code2:  using server = tf.train.Server.create_local_server(start = True)\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.333)\n\n    server = tf.train.Server.create_local_server(start = True)\n\n    sess= tf.Session(target=server.target,config=tf.ConfigProto(log_device_placement=True,allow_soft_placement=True,gpu_options=gpu_options))\n\nQuestions:\n1. code2 performance drop 3 times compare to code1( 3 steps/seconds vs 11 steps/seconds), why?\n2. code2 will broke the  limitations of gpu memory. while code1 is ok\nps: Is this relevant to this issue than the training data is read from queue?", "body": "tf.train.Server.create_local_server has two problems :1)performance drop 2 times compare to without it,2) gpu memory fraction limitations fails\n\nmy model is a dnn network with 12 layers, same as the alphago policy network!\n## code1: whitout server = tf.train.Server.create_local_server(start = True)\n\n```\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.333)\n\nsess =  tf.Session(config=tf.ConfigProto(log_device_placement=True,allow_soft_placement=True,gpu_options=gpu_options))\n```\n## \\- code2:  using server = tf.train.Server.create_local_server(start = True)\n\n```\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.333)\n\n    server = tf.train.Server.create_local_server(start = True)\n\n    sess= tf.Session(target=server.target,config=tf.ConfigProto(log_device_placement=True,allow_soft_placement=True,gpu_options=gpu_options))\n```\n# Questions:\n\n**1. code2 performance drop 3 times compare to code1( 3 steps/seconds vs 11 steps/seconds), why?**\n**2. code2 will broke the  limitations of gpu memory. while code1 is ok**\n\nps: Is this relevant to this issue than the training data is read from queue?\n"}
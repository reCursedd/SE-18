{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/312296911", "html_url": "https://github.com/tensorflow/tensorflow/issues/11102#issuecomment-312296911", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11102", "id": 312296911, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjI5NjkxMQ==", "user": {"login": "paultsw", "id": 1909634, "node_id": "MDQ6VXNlcjE5MDk2MzQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1909634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultsw", "html_url": "https://github.com/paultsw", "followers_url": "https://api.github.com/users/paultsw/followers", "following_url": "https://api.github.com/users/paultsw/following{/other_user}", "gists_url": "https://api.github.com/users/paultsw/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultsw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultsw/subscriptions", "organizations_url": "https://api.github.com/users/paultsw/orgs", "repos_url": "https://api.github.com/users/paultsw/repos", "events_url": "https://api.github.com/users/paultsw/events{/privacy}", "received_events_url": "https://api.github.com/users/paultsw/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-30T15:23:06Z", "updated_at": "2017-07-02T21:43:46Z", "author_association": "NONE", "body_html": "<p>I think the issue is that <code>tf.contrib.seq2seq.BasicDecoder</code> expects an instance of the <code>tf.python.layers.core.Layer</code> class, e.g., <code>tf.python.layers.core.Dense</code>, which is an internal class used in the <code>tf.layers.dense</code> function:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/layers/core.py#L41\">https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/layers/core.py#L41</a></p>\n<p>This can be seen in the tests for <code>BasicDecoder</code>:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/contrib/seq2seq/python/kernel_tests/basic_decoder_test.py#L38\">https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/contrib/seq2seq/python/kernel_tests/basic_decoder_test.py#L38</a></p>\n<p>Note in particular the line:<br>\n<code> output_layer = layers_core.Dense(output_layer_depth, use_bias=False)</code></p>\n<p>However, I don't think the Dense layer class is exposed in the Python API as of v1.2. Does anyone have any ideas on how to cleanly resolve this?</p>\n<p>Edit: whoops, my mistake, you just have to import it. Here's a minimal example:</p>\n<pre><code>from tensorflow.python.layers.core import Dense\noutput_layer = Dense(units=_num_units)\n# ... define your decoder RNN cell, initial state, and sampling/training helper here ...\ndecoder = tf.contrib.seq2seq.BasicDecoder(\n  cell=_rnn_cell_here,\n  helper=_training_helper_here,\n  initial_state=_initial_state_here,\n  output_layer=output_layer)\n</code></pre>", "body_text": "I think the issue is that tf.contrib.seq2seq.BasicDecoder expects an instance of the tf.python.layers.core.Layer class, e.g., tf.python.layers.core.Dense, which is an internal class used in the tf.layers.dense function:\nhttps://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/layers/core.py#L41\nThis can be seen in the tests for BasicDecoder:\nhttps://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/contrib/seq2seq/python/kernel_tests/basic_decoder_test.py#L38\nNote in particular the line:\n output_layer = layers_core.Dense(output_layer_depth, use_bias=False)\nHowever, I don't think the Dense layer class is exposed in the Python API as of v1.2. Does anyone have any ideas on how to cleanly resolve this?\nEdit: whoops, my mistake, you just have to import it. Here's a minimal example:\nfrom tensorflow.python.layers.core import Dense\noutput_layer = Dense(units=_num_units)\n# ... define your decoder RNN cell, initial state, and sampling/training helper here ...\ndecoder = tf.contrib.seq2seq.BasicDecoder(\n  cell=_rnn_cell_here,\n  helper=_training_helper_here,\n  initial_state=_initial_state_here,\n  output_layer=output_layer)", "body": "I think the issue is that `tf.contrib.seq2seq.BasicDecoder` expects an instance of the `tf.python.layers.core.Layer` class, e.g., `tf.python.layers.core.Dense`, which is an internal class used in the `tf.layers.dense` function:\r\nhttps://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/layers/core.py#L41\r\n\r\nThis can be seen in the tests for `BasicDecoder`:\r\nhttps://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/contrib/seq2seq/python/kernel_tests/basic_decoder_test.py#L38\r\n\r\nNote in particular the line:\r\n` output_layer = layers_core.Dense(output_layer_depth, use_bias=False)`\r\n\r\nHowever, I don't think the Dense layer class is exposed in the Python API as of v1.2. Does anyone have any ideas on how to cleanly resolve this?\r\n\r\nEdit: whoops, my mistake, you just have to import it. Here's a minimal example:\r\n```\r\nfrom tensorflow.python.layers.core import Dense\r\noutput_layer = Dense(units=_num_units)\r\n# ... define your decoder RNN cell, initial state, and sampling/training helper here ...\r\ndecoder = tf.contrib.seq2seq.BasicDecoder(\r\n  cell=_rnn_cell_here,\r\n  helper=_training_helper_here,\r\n  initial_state=_initial_state_here,\r\n  output_layer=output_layer)\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11912", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11912/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11912/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11912/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11912", "id": 246780380, "node_id": "MDU6SXNzdWUyNDY3ODAzODA=", "number": 11912, "title": "A potential null pointer deference bug in GraphProperties class", "user": {"login": "andrew659", "id": 697555, "node_id": "MDQ6VXNlcjY5NzU1NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/697555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrew659", "html_url": "https://github.com/andrew659", "followers_url": "https://api.github.com/users/andrew659/followers", "following_url": "https://api.github.com/users/andrew659/following{/other_user}", "gists_url": "https://api.github.com/users/andrew659/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrew659/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrew659/subscriptions", "organizations_url": "https://api.github.com/users/andrew659/orgs", "repos_url": "https://api.github.com/users/andrew659/repos", "events_url": "https://api.github.com/users/andrew659/events{/privacy}", "received_events_url": "https://api.github.com/users/andrew659/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-07-31T14:41:03Z", "updated_at": "2018-01-19T20:24:37Z", "closed_at": "2018-01-19T20:24:27Z", "author_association": "NONE", "body_html": "<p>Dear developers,</p>\n<p>I am studying the code of Tensorflow and found a potential null pointer dereference bug in tensorflow/core/grappler/costs/graph_properties.cc</p>\n<h3>The problem</h3>\n<p>The function <code>updateEnter()</code> at line 70 of tensorflow/core/grappler/costs/graph_properties.cc calls the <code>getContext()</code> function of the ShapeRefiner class, which could return a null pointer (line 79 of tensorflow/core/common_runtime/shape_refiner.h) and get stored in the variable <code>enter_ctx</code>. At line 73 of the <code>updateEnter()</code> function, <code>enter_ctx</code> is dereferenced in the for loop condition without being checked against null. If the null pointer dereference is triggered, the program might crash.</p>\n<p>I noticed that for another call of the <code>getContext()</code> function at line 255 of tensorflow/core/grappler/costs/graph_properties.cc, the function return value, which gets stored in the variable <code>qctx</code>, is checked against null, indicating that <code>getContext()</code> can indeed return null pointer.</p>\n<h3>Source code</h3>\n<p>I am analyzing the latest version of Tensorflow as of July 31, 2017, and the two relevant files are:<br>\n(1) <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/grappler/costs/graph_properties.cc\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/grappler/costs/graph_properties.cc</a> (commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/4432623ee08ecf145941161ba520397fc22d614f/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/4432623ee08ecf145941161ba520397fc22d614f\"><tt>4432623</tt></a> on 1 July)</p>\n<p>(2) <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/shape_refiner.h\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/shape_refiner.h</a> (commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/e85d3df92deb9d717befdf173966a2913ac2aea0/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/e85d3df92deb9d717befdf173966a2913ac2aea0\"><tt>e85d3df</tt></a>  on 30 June)</p>\n<p>Hope my report helps :)</p>", "body_text": "Dear developers,\nI am studying the code of Tensorflow and found a potential null pointer dereference bug in tensorflow/core/grappler/costs/graph_properties.cc\nThe problem\nThe function updateEnter() at line 70 of tensorflow/core/grappler/costs/graph_properties.cc calls the getContext() function of the ShapeRefiner class, which could return a null pointer (line 79 of tensorflow/core/common_runtime/shape_refiner.h) and get stored in the variable enter_ctx. At line 73 of the updateEnter() function, enter_ctx is dereferenced in the for loop condition without being checked against null. If the null pointer dereference is triggered, the program might crash.\nI noticed that for another call of the getContext() function at line 255 of tensorflow/core/grappler/costs/graph_properties.cc, the function return value, which gets stored in the variable qctx, is checked against null, indicating that getContext() can indeed return null pointer.\nSource code\nI am analyzing the latest version of Tensorflow as of July 31, 2017, and the two relevant files are:\n(1) https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/grappler/costs/graph_properties.cc (commit 4432623 on 1 July)\n(2) https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/shape_refiner.h (commit e85d3df  on 30 June)\nHope my report helps :)", "body": "Dear developers,\r\n\r\nI am studying the code of Tensorflow and found a potential null pointer dereference bug in tensorflow/core/grappler/costs/graph_properties.cc\r\n\r\n### The problem\r\n\r\nThe function `updateEnter()` at line 70 of tensorflow/core/grappler/costs/graph_properties.cc calls the `getContext()` function of the ShapeRefiner class, which could return a null pointer (line 79 of tensorflow/core/common_runtime/shape_refiner.h) and get stored in the variable `enter_ctx`. At line 73 of the `updateEnter()` function, `enter_ctx` is dereferenced in the for loop condition without being checked against null. If the null pointer dereference is triggered, the program might crash.\r\n\r\nI noticed that for another call of the `getContext()` function at line 255 of tensorflow/core/grappler/costs/graph_properties.cc, the function return value, which gets stored in the variable `qctx`, is checked against null, indicating that `getContext()` can indeed return null pointer.\r\n\r\n### Source code\r\n\r\nI am analyzing the latest version of Tensorflow as of July 31, 2017, and the two relevant files are:\r\n(1) https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/grappler/costs/graph_properties.cc (commit 4432623 on 1 July)\r\n\r\n(2) https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/shape_refiner.h (commit e85d3df  on 30 June)\r\n\r\nHope my report helps :)\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/196534390", "html_url": "https://github.com/tensorflow/tensorflow/issues/1287#issuecomment-196534390", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1287", "id": 196534390, "node_id": "MDEyOklzc3VlQ29tbWVudDE5NjUzNDM5MA==", "user": {"login": "dsmilkov", "id": 2294279, "node_id": "MDQ6VXNlcjIyOTQyNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2294279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsmilkov", "html_url": "https://github.com/dsmilkov", "followers_url": "https://api.github.com/users/dsmilkov/followers", "following_url": "https://api.github.com/users/dsmilkov/following{/other_user}", "gists_url": "https://api.github.com/users/dsmilkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsmilkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsmilkov/subscriptions", "organizations_url": "https://api.github.com/users/dsmilkov/orgs", "repos_url": "https://api.github.com/users/dsmilkov/repos", "events_url": "https://api.github.com/users/dsmilkov/events{/privacy}", "received_events_url": "https://api.github.com/users/dsmilkov/received_events", "type": "User", "site_admin": false}, "created_at": "2016-03-14T21:44:01Z", "updated_at": "2016-03-14T21:46:50Z", "author_association": "MEMBER", "body_html": "<p>Was able to reproduce the issue using python3. The problem comes down to <code>str</code> and <code>bytes</code> being equivalent types in python2, but not in python3. Moreover python3 bytes requires an encoding to be specified when converting a string to bytes (protobuf uses utf-8 for encoding strings).</p>\n<p>Fix is on the way. The commit should appear tomorrow. If you don't want to wait, a small fix that makes it work just for python3 is to replace line 66 in <code>process_graph.py</code> from<br>\n<code>node.attr[large_attrs_key].list.s.append(str(key))</code><br>\nto<br>\n<code>node.attr[large_attrs_key].list.s.append(bytes(key, 'utf-8'))</code></p>", "body_text": "Was able to reproduce the issue using python3. The problem comes down to str and bytes being equivalent types in python2, but not in python3. Moreover python3 bytes requires an encoding to be specified when converting a string to bytes (protobuf uses utf-8 for encoding strings).\nFix is on the way. The commit should appear tomorrow. If you don't want to wait, a small fix that makes it work just for python3 is to replace line 66 in process_graph.py from\nnode.attr[large_attrs_key].list.s.append(str(key))\nto\nnode.attr[large_attrs_key].list.s.append(bytes(key, 'utf-8'))", "body": "Was able to reproduce the issue using python3. The problem comes down to `str` and `bytes` being equivalent types in python2, but not in python3. Moreover python3 bytes requires an encoding to be specified when converting a string to bytes (protobuf uses utf-8 for encoding strings).\n\nFix is on the way. The commit should appear tomorrow. If you don't want to wait, a small fix that makes it work just for python3 is to replace line 66 in `process_graph.py` from\n`node.attr[large_attrs_key].list.s.append(str(key))`\nto\n`node.attr[large_attrs_key].list.s.append(bytes(key, 'utf-8'))`\n"}
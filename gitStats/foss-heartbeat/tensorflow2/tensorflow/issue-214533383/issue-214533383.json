{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8447", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8447/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8447/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8447/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8447", "id": 214533383, "node_id": "MDU6SXNzdWUyMTQ1MzMzODM=", "number": 8447, "title": "im2txt checkpoint issue", "user": {"login": "mustafaxfe", "id": 15131907, "node_id": "MDQ6VXNlcjE1MTMxOTA3", "avatar_url": "https://avatars3.githubusercontent.com/u/15131907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafaxfe", "html_url": "https://github.com/mustafaxfe", "followers_url": "https://api.github.com/users/mustafaxfe/followers", "following_url": "https://api.github.com/users/mustafaxfe/following{/other_user}", "gists_url": "https://api.github.com/users/mustafaxfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafaxfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafaxfe/subscriptions", "organizations_url": "https://api.github.com/users/mustafaxfe/orgs", "repos_url": "https://api.github.com/users/mustafaxfe/repos", "events_url": "https://api.github.com/users/mustafaxfe/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafaxfe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-03-15T21:35:13Z", "updated_at": "2017-03-16T04:16:41Z", "closed_at": "2017-03-16T04:16:27Z", "author_association": "NONE", "body_html": "<p>I have compiled tensorflow from source. I have followed steps at <a href=\"https://github.com/tensorflow/models/tree/master/im2txt\">https://github.com/tensorflow/models/tree/master/im2txt</a>. But when I run bazel-bin/im2txt/run_inference, it gives an error:</p>\n<p><code>bazel-bin/im2txt/run_inference   --checkpoint_path=${CHECKPOINT_DIR}   --vocab_file=${VOCAB_FILE}   --input_files=${IMAGE_FILE} --checkpoint_path=\"/home/raspberry/models/im2txt/im2txt_pretrained/model.ckpt-2000000\"</code></p>\n<p>And error:</p>\n<p>Traceback (most recent call last):<br>\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 83, in <br>\ntf.app.run()<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 63, in main<br>\nrestore_fn(sess)<br>\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/inference_utils/inference_wrapper_base.py\", line 96, in _restore_fn<br>\nsaver.restore(sess, checkpoint_path)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1428, in restore<br>\n{self.saver_def.filename_tensor_name: save_path})<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 767, in run<br>\nrun_metadata_ptr)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 965, in _run<br>\nfeed_dict_string, options, run_metadata)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1015, in _do_run<br>\ntarget_list, options, run_metadata)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1035, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.NotFoundError: Tensor name \"lstm/basic_lstm_cell/biases\" not found in checkpoint files /home/raspberry/models/im2txt/im2txt_pretrained/model.ckpt-2000000<br>\n[[Node: save/RestoreV2_380 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/RestoreV2_380/tensor_names, save/RestoreV2_380/shape_and_slices)]]</p>\n<p>Caused by op u'save/RestoreV2_380', defined at:<br>\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 83, in <br>\ntf.app.run()<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 49, in main<br>\nFLAGS.checkpoint_path)<br>\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/inference_utils/inference_wrapper_base.py\", line 116, in build_graph_from_config<br>\nsaver = tf.train.Saver()<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1040, in <strong>init</strong><br>\nself.build()<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1070, in build<br>\nrestore_sequentially=self._restore_sequentially)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 675, in build<br>\nrestore_sequentially, reshape)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 402, in _AddRestoreOps<br>\ntensors = self.restore_op(filename_tensor, saveable, preferred_shard)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 242, in restore_op<br>\n[spec.tensor.dtype])[0])<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_io_ops.py\", line 668, in restore_v2<br>\ndtypes=dtypes, name=name)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 763, in apply_op<br>\nop_def=op_def)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2327, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1226, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>NotFoundError (see above for traceback): Tensor name \"lstm/basic_lstm_cell/biases\" not found in checkpoint files /home/raspberry/models/im2txt/im2txt_pretrained/model.ckpt-2000000<br>\n[[Node: save/RestoreV2_380 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/RestoreV2_380/tensor_names, save/RestoreV2_380/shape_and_slices)]]</p>", "body_text": "I have compiled tensorflow from source. I have followed steps at https://github.com/tensorflow/models/tree/master/im2txt. But when I run bazel-bin/im2txt/run_inference, it gives an error:\nbazel-bin/im2txt/run_inference   --checkpoint_path=${CHECKPOINT_DIR}   --vocab_file=${VOCAB_FILE}   --input_files=${IMAGE_FILE} --checkpoint_path=\"/home/raspberry/models/im2txt/im2txt_pretrained/model.ckpt-2000000\"\nAnd error:\nTraceback (most recent call last):\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 83, in \ntf.app.run()\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 63, in main\nrestore_fn(sess)\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/inference_utils/inference_wrapper_base.py\", line 96, in _restore_fn\nsaver.restore(sess, checkpoint_path)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1428, in restore\n{self.saver_def.filename_tensor_name: save_path})\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 767, in run\nrun_metadata_ptr)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 965, in _run\nfeed_dict_string, options, run_metadata)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1015, in _do_run\ntarget_list, options, run_metadata)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1035, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.NotFoundError: Tensor name \"lstm/basic_lstm_cell/biases\" not found in checkpoint files /home/raspberry/models/im2txt/im2txt_pretrained/model.ckpt-2000000\n[[Node: save/RestoreV2_380 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/RestoreV2_380/tensor_names, save/RestoreV2_380/shape_and_slices)]]\nCaused by op u'save/RestoreV2_380', defined at:\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 83, in \ntf.app.run()\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 49, in main\nFLAGS.checkpoint_path)\nFile \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/inference_utils/inference_wrapper_base.py\", line 116, in build_graph_from_config\nsaver = tf.train.Saver()\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1040, in init\nself.build()\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1070, in build\nrestore_sequentially=self._restore_sequentially)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 675, in build\nrestore_sequentially, reshape)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 402, in _AddRestoreOps\ntensors = self.restore_op(filename_tensor, saveable, preferred_shard)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 242, in restore_op\n[spec.tensor.dtype])[0])\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_io_ops.py\", line 668, in restore_v2\ndtypes=dtypes, name=name)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 763, in apply_op\nop_def=op_def)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2327, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1226, in init\nself._traceback = _extract_stack()\nNotFoundError (see above for traceback): Tensor name \"lstm/basic_lstm_cell/biases\" not found in checkpoint files /home/raspberry/models/im2txt/im2txt_pretrained/model.ckpt-2000000\n[[Node: save/RestoreV2_380 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/RestoreV2_380/tensor_names, save/RestoreV2_380/shape_and_slices)]]", "body": "I have compiled tensorflow from source. I have followed steps at https://github.com/tensorflow/models/tree/master/im2txt. But when I run bazel-bin/im2txt/run_inference, it gives an error:\r\n\r\n`bazel-bin/im2txt/run_inference   --checkpoint_path=${CHECKPOINT_DIR}   --vocab_file=${VOCAB_FILE}   --input_files=${IMAGE_FILE} --checkpoint_path=\"/home/raspberry/models/im2txt/im2txt_pretrained/model.ckpt-2000000\"`\r\n\r\nAnd error:\r\n\r\n Traceback (most recent call last):\r\n  File \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 83, in <module>\r\n    tf.app.run()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 63, in main\r\n    restore_fn(sess)\r\n  File \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/inference_utils/inference_wrapper_base.py\", line 96, in _restore_fn\r\n    saver.restore(sess, checkpoint_path)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1428, in restore\r\n    {self.saver_def.filename_tensor_name: save_path})\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 767, in run\r\n    run_metadata_ptr)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 965, in _run\r\n    feed_dict_string, options, run_metadata)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1015, in _do_run\r\n    target_list, options, run_metadata)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1035, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.NotFoundError: Tensor name \"lstm/basic_lstm_cell/biases\" not found in checkpoint files /home/raspberry/models/im2txt/im2txt_pretrained/model.ckpt-2000000\r\n\t [[Node: save/RestoreV2_380 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/RestoreV2_380/tensor_names, save/RestoreV2_380/shape_and_slices)]]\r\n\r\nCaused by op u'save/RestoreV2_380', defined at:\r\n  File \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 83, in <module>\r\n    tf.app.run()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/run_inference.py\", line 49, in main\r\n    FLAGS.checkpoint_path)\r\n  File \"/home/raspberry/models/im2txt/bazel-bin/im2txt/run_inference.runfiles/im2txt/im2txt/inference_utils/inference_wrapper_base.py\", line 116, in build_graph_from_config\r\n    saver = tf.train.Saver()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1040, in __init__\r\n    self.build()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1070, in build\r\n    restore_sequentially=self._restore_sequentially)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 675, in build\r\n    restore_sequentially, reshape)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 402, in _AddRestoreOps\r\n    tensors = self.restore_op(filename_tensor, saveable, preferred_shard)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 242, in restore_op\r\n    [spec.tensor.dtype])[0])\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_io_ops.py\", line 668, in restore_v2\r\n    dtypes=dtypes, name=name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 763, in apply_op\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2327, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1226, in __init__\r\n    self._traceback = _extract_stack()\r\n\r\nNotFoundError (see above for traceback): Tensor name \"lstm/basic_lstm_cell/biases\" not found in checkpoint files /home/raspberry/models/im2txt/im2txt_pretrained/model.ckpt-2000000\r\n\t [[Node: save/RestoreV2_380 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/RestoreV2_380/tensor_names, save/RestoreV2_380/shape_and_slices)]]\r\n\r\n\r\n\r\n"}
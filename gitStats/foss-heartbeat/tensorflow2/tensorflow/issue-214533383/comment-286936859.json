{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/286936859", "html_url": "https://github.com/tensorflow/tensorflow/issues/8447#issuecomment-286936859", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8447", "id": 286936859, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjkzNjg1OQ==", "user": {"login": "mustafaxfe", "id": 15131907, "node_id": "MDQ6VXNlcjE1MTMxOTA3", "avatar_url": "https://avatars3.githubusercontent.com/u/15131907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafaxfe", "html_url": "https://github.com/mustafaxfe", "followers_url": "https://api.github.com/users/mustafaxfe/followers", "following_url": "https://api.github.com/users/mustafaxfe/following{/other_user}", "gists_url": "https://api.github.com/users/mustafaxfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafaxfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafaxfe/subscriptions", "organizations_url": "https://api.github.com/users/mustafaxfe/orgs", "repos_url": "https://api.github.com/users/mustafaxfe/repos", "events_url": "https://api.github.com/users/mustafaxfe/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafaxfe/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-16T02:09:13Z", "updated_at": "2017-03-16T02:37:23Z", "author_association": "NONE", "body_html": "<p>What will I do with this code segment?<br>\nI edited code, but it is not working:</p>\n<pre><code>import tensorflow as tf\nvars_to_rename = {\n      \"rnn/BasicLSTMCell/Linear/Matrix\": \"lstm/basic_lstm_cell/weights\",\n      \"rnn/BasicLSTMCell/Linear/Bias\": \"lstm/basic_lstm_cell/biases\",\n}\nnew_checkpoint_vars = {}\nreader = tf.train.NewCheckpointReader(\"/home/workspace/models/im2txt\")\nfor old_name in reader.get_variable_to_shape_map():\n  if old_name in vars_to_rename:\n    new_name = vars_to_rename[old_name]\n  else:\n    new_name = old_name\n  new_checkpoint_vars[new_name] = tf.Variable(reader.get_tensor(old_name))\n\ninit = tf.global_variables_initializer()\nsaver = tf.train.Saver(new_checkpoint_vars)\n\nwith tf.Session() as sess:\n  sess.run(init)\n  saver.save(sess, \"/home/workspace/models/im2txt/train\")\n</code></pre>", "body_text": "What will I do with this code segment?\nI edited code, but it is not working:\nimport tensorflow as tf\nvars_to_rename = {\n      \"rnn/BasicLSTMCell/Linear/Matrix\": \"lstm/basic_lstm_cell/weights\",\n      \"rnn/BasicLSTMCell/Linear/Bias\": \"lstm/basic_lstm_cell/biases\",\n}\nnew_checkpoint_vars = {}\nreader = tf.train.NewCheckpointReader(\"/home/workspace/models/im2txt\")\nfor old_name in reader.get_variable_to_shape_map():\n  if old_name in vars_to_rename:\n    new_name = vars_to_rename[old_name]\n  else:\n    new_name = old_name\n  new_checkpoint_vars[new_name] = tf.Variable(reader.get_tensor(old_name))\n\ninit = tf.global_variables_initializer()\nsaver = tf.train.Saver(new_checkpoint_vars)\n\nwith tf.Session() as sess:\n  sess.run(init)\n  saver.save(sess, \"/home/workspace/models/im2txt/train\")", "body": "What will I do with this code segment?\r\nI edited code, but it is not working:\r\n```\r\nimport tensorflow as tf\r\nvars_to_rename = {\r\n      \"rnn/BasicLSTMCell/Linear/Matrix\": \"lstm/basic_lstm_cell/weights\",\r\n      \"rnn/BasicLSTMCell/Linear/Bias\": \"lstm/basic_lstm_cell/biases\",\r\n}\r\nnew_checkpoint_vars = {}\r\nreader = tf.train.NewCheckpointReader(\"/home/workspace/models/im2txt\")\r\nfor old_name in reader.get_variable_to_shape_map():\r\n  if old_name in vars_to_rename:\r\n    new_name = vars_to_rename[old_name]\r\n  else:\r\n    new_name = old_name\r\n  new_checkpoint_vars[new_name] = tf.Variable(reader.get_tensor(old_name))\r\n\r\ninit = tf.global_variables_initializer()\r\nsaver = tf.train.Saver(new_checkpoint_vars)\r\n\r\nwith tf.Session() as sess:\r\n  sess.run(init)\r\n  saver.save(sess, \"/home/workspace/models/im2txt/train\")\r\n```"}
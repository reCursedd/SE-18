{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/387897966", "html_url": "https://github.com/tensorflow/tensorflow/issues/16988#issuecomment-387897966", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16988", "id": 387897966, "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzg5Nzk2Ng==", "user": {"login": "dan-1d", "id": 4029020, "node_id": "MDQ6VXNlcjQwMjkwMjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4029020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dan-1d", "html_url": "https://github.com/dan-1d", "followers_url": "https://api.github.com/users/dan-1d/followers", "following_url": "https://api.github.com/users/dan-1d/following{/other_user}", "gists_url": "https://api.github.com/users/dan-1d/gists{/gist_id}", "starred_url": "https://api.github.com/users/dan-1d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dan-1d/subscriptions", "organizations_url": "https://api.github.com/users/dan-1d/orgs", "repos_url": "https://api.github.com/users/dan-1d/repos", "events_url": "https://api.github.com/users/dan-1d/events{/privacy}", "received_events_url": "https://api.github.com/users/dan-1d/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-09T22:47:18Z", "updated_at": "2018-05-10T00:21:20Z", "author_association": "NONE", "body_html": "<ul>\n<li>UPDATE: Workaround posted below *</li>\n</ul>\n<p>I am also experiencing this issue. I've tried TF v.1.8 and the latest Github master. My system:<br>\nLinux Redhat 7.5<br>\nCUDA 9.1 -- installed as root user<br>\ncuDNN 7.1.3  -- located in my user directory<br>\nappropriately set paths in ./configure script, and confirmed by looking at tensorflow-master/.tf_configure.bazelrc</p>\n<p>I have tried with/without the --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\" as suggested. Failure occurs in various places (this is a 32-core machine, so there's some parallelism-related non-determinism with which files cause a fault-out first). It gets to about 11,000 of 12,462 tasks.</p>\n<p>\"\"\"\"\"  log with verbose errors \"\"\"\"<br>\nERROR: $HOME/tensorflow_source/tensorflow-master/tensorflow/python/BUILD:1568:1: Linking of rule '//tensorflow/python:gen_set_ops_py_wrappers_cc' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command<br>\n(cd $HOME/.cache/bazel/<em>bazel</em>$USER/0adab69598361a8f35bbb0e3835cbfb8/execroot/org_tensorflow &amp;&amp; <br>\nexec env - <br>\nPWD=/proc/self/cwd <br>\nexternal/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/host/bin/tensorflow/python/gen_set_ops_py_wrappers_cc '-Wl,-rpath,$ORIGIN/../../_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow' '-Wl,-rpath,$ORIGIN/../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' '-Wl,-rpath,$ORIGIN/../../_solib_local/_U@mkl_Ulinux_S_S_Cmkl_Ulibs_Ulinux___Uexternal_Smkl_Ulinux_Slib' -Lbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow -Lbazel-out/host/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib -Lbazel-out/host/bin/_solib_local/_U@mkl_Ulinux_S_S_Cmkl_Ulibs_Ulinux___Uexternal_Smkl_Ulinux_Slib '-Wl,-rpath,$ORIGIN/,-rpath,$ORIGIN/..' -Wl,-z,notext -Wl,-z,notext -Wl,-rpath,../local_config_cuda/cuda/lib64 -Wl,-rpath,../local_config_cuda/cuda/extras/CUPTI/lib64 -pthread -Wl,-no-as-needed -B/usr/bin/ -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,--gc-sections -Wl,-S -Wl,@bazel-out/host/bin/tensorflow/python/gen_set_ops_py_wrappers_cc-2.params)<br>\n/usr/bin/ld: warning: libcudnn.so.7, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)<br>\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreate@libcudnn.so.7'</p>\n\n\"\"\"\"\"", "body_text": "UPDATE: Workaround posted below *\n\nI am also experiencing this issue. I've tried TF v.1.8 and the latest Github master. My system:\nLinux Redhat 7.5\nCUDA 9.1 -- installed as root user\ncuDNN 7.1.3  -- located in my user directory\nappropriately set paths in ./configure script, and confirmed by looking at tensorflow-master/.tf_configure.bazelrc\nI have tried with/without the --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\" as suggested. Failure occurs in various places (this is a 32-core machine, so there's some parallelism-related non-determinism with which files cause a fault-out first). It gets to about 11,000 of 12,462 tasks.\n\"\"\"\"\"  log with verbose errors \"\"\"\"\nERROR: $HOME/tensorflow_source/tensorflow-master/tensorflow/python/BUILD:1568:1: Linking of rule '//tensorflow/python:gen_set_ops_py_wrappers_cc' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command\n(cd $HOME/.cache/bazel/bazel$USER/0adab69598361a8f35bbb0e3835cbfb8/execroot/org_tensorflow && \nexec env - \nPWD=/proc/self/cwd \nexternal/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/host/bin/tensorflow/python/gen_set_ops_py_wrappers_cc '-Wl,-rpath,$ORIGIN/../../_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow' '-Wl,-rpath,$ORIGIN/../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' '-Wl,-rpath,$ORIGIN/../../_solib_local/_U@mkl_Ulinux_S_S_Cmkl_Ulibs_Ulinux___Uexternal_Smkl_Ulinux_Slib' -Lbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow -Lbazel-out/host/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib -Lbazel-out/host/bin/_solib_local/_U@mkl_Ulinux_S_S_Cmkl_Ulibs_Ulinux___Uexternal_Smkl_Ulinux_Slib '-Wl,-rpath,$ORIGIN/,-rpath,$ORIGIN/..' -Wl,-z,notext -Wl,-z,notext -Wl,-rpath,../local_config_cuda/cuda/lib64 -Wl,-rpath,../local_config_cuda/cuda/extras/CUPTI/lib64 -pthread -Wl,-no-as-needed -B/usr/bin/ -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,--gc-sections -Wl,-S -Wl,@bazel-out/host/bin/tensorflow/python/gen_set_ops_py_wrappers_cc-2.params)\n/usr/bin/ld: warning: libcudnn.so.7, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreate@libcudnn.so.7'\n\n\"\"\"\"\"", "body": "\r\n* UPDATE: Workaround posted below *\r\n\r\nI am also experiencing this issue. I've tried TF v.1.8 and the latest Github master. My system:\r\nLinux Redhat 7.5\r\nCUDA 9.1 -- installed as root user\r\ncuDNN 7.1.3  -- located in my user directory\r\nappropriately set paths in ./configure script, and confirmed by looking at tensorflow-master/.tf_configure.bazelrc\r\n\r\nI have tried with/without the --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\" as suggested. Failure occurs in various places (this is a 32-core machine, so there's some parallelism-related non-determinism with which files cause a fault-out first). It gets to about 11,000 of 12,462 tasks.\r\n\r\n\"\"\"\"\"  log with verbose errors \"\"\"\"\r\nERROR: $HOME/tensorflow_source/tensorflow-master/tensorflow/python/BUILD:1568:1: Linking of rule '//tensorflow/python:gen_set_ops_py_wrappers_cc' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command \r\n  (cd $HOME/.cache/bazel/_bazel_$USER/0adab69598361a8f35bbb0e3835cbfb8/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PWD=/proc/self/cwd \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/host/bin/tensorflow/python/gen_set_ops_py_wrappers_cc '-Wl,-rpath,$ORIGIN/../../_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow' '-Wl,-rpath,$ORIGIN/../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' '-Wl,-rpath,$ORIGIN/../../_solib_local/_U@mkl_Ulinux_S_S_Cmkl_Ulibs_Ulinux___Uexternal_Smkl_Ulinux_Slib' -Lbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow -Lbazel-out/host/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib -Lbazel-out/host/bin/_solib_local/_U@mkl_Ulinux_S_S_Cmkl_Ulibs_Ulinux___Uexternal_Smkl_Ulinux_Slib '-Wl,-rpath,$ORIGIN/,-rpath,$ORIGIN/..' -Wl,-z,notext -Wl,-z,notext -Wl,-rpath,../local_config_cuda/cuda/lib64 -Wl,-rpath,../local_config_cuda/cuda/extras/CUPTI/lib64 -pthread -Wl,-no-as-needed -B/usr/bin/ -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,--gc-sections -Wl,-S -Wl,@bazel-out/host/bin/tensorflow/python/gen_set_ops_py_wrappers_cc-2.params)\r\n/usr/bin/ld: warning: libcudnn.so.7, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\nbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Spython_Cgen_Uset_Uops_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreate@libcudnn.so.7'\r\n\r\n<other files>\r\n\"\"\"\"\"\r\n\r\n\r\n"}
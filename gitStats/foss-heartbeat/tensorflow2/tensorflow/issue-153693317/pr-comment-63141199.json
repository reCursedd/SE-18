{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/63141199", "pull_request_review_id": null, "id": 63141199, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTQxMTk5", "diff_hunk": "@@ -83,6 +83,20 @@ def testNoCheckpoints(self):\n     with self.assertRaises(ValueError):\n       learn.TensorFlowEstimator.restore(path)\n \n+  def testOverwriteParams(self):\n+    path = tf.test.get_temp_dir() + '/tmp_saver3'\n+    random.seed(42)\n+    iris = datasets.load_iris()\n+    classifier = learn.TensorFlowDNNClassifier(hidden_units=[10, 20, 10],\n+                                               n_classes=3,\n+                                               learning_rate=0.1)\n+    classifier.fit(iris.data, iris.target)\n+    classifier.save(path)\n+    self.assertEqual(classifier.learning_rate, 0.1)\n+    new_classifier = learn.TensorFlowEstimator.restore(path,\n+      new_params={'learning_rate': 0.2})\n+    self.assertEqual(type(new_classifier), type(classifier))\n+    self.assertEqual(new_classifier.learning_rate, 0.2)", "path": "tensorflow/contrib/learn/python/learn/tests/test_saver.py", "position": null, "original_position": 17, "commit_id": "f671cfd9686967125066b6ede21e18a24e9d3156", "original_commit_id": "820506b7bae048b64f6df29f3918367b6ca5d93e", "user": {"login": "ilblackdragon", "id": 175486, "node_id": "MDQ6VXNlcjE3NTQ4Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/175486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilblackdragon", "html_url": "https://github.com/ilblackdragon", "followers_url": "https://api.github.com/users/ilblackdragon/followers", "following_url": "https://api.github.com/users/ilblackdragon/following{/other_user}", "gists_url": "https://api.github.com/users/ilblackdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilblackdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilblackdragon/subscriptions", "organizations_url": "https://api.github.com/users/ilblackdragon/orgs", "repos_url": "https://api.github.com/users/ilblackdragon/repos", "events_url": "https://api.github.com/users/ilblackdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/ilblackdragon/received_events", "type": "User", "site_admin": false}, "body": "that said - there is a lot of other arguments changing will lead to problems, for example if one changes hidden_units or n_classes - it will lead to a mismatch with checkpoints and etc.\n\nI would instead recommend creating new Estimator with new params and then just restoring model variables from existing checkpoints. see `learn/utils/checkpoints` library for an `init_from_checkpoints` function that can help with loading. We can add a nice interface for it on Estimator (not sure how it should look yet though), but already one can use it to restore parameters from another trained estimator.\n", "created_at": "2016-05-13T07:11:36Z", "updated_at": "2016-05-13T14:57:24Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/2279#discussion_r63141199", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/2279", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/63141199"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/2279#discussion_r63141199"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/2279"}}, "body_html": "<p>that said - there is a lot of other arguments changing will lead to problems, for example if one changes hidden_units or n_classes - it will lead to a mismatch with checkpoints and etc.</p>\n<p>I would instead recommend creating new Estimator with new params and then just restoring model variables from existing checkpoints. see <code>learn/utils/checkpoints</code> library for an <code>init_from_checkpoints</code> function that can help with loading. We can add a nice interface for it on Estimator (not sure how it should look yet though), but already one can use it to restore parameters from another trained estimator.</p>", "body_text": "that said - there is a lot of other arguments changing will lead to problems, for example if one changes hidden_units or n_classes - it will lead to a mismatch with checkpoints and etc.\nI would instead recommend creating new Estimator with new params and then just restoring model variables from existing checkpoints. see learn/utils/checkpoints library for an init_from_checkpoints function that can help with loading. We can add a nice interface for it on Estimator (not sure how it should look yet though), but already one can use it to restore parameters from another trained estimator."}
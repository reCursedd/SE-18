{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17506", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17506/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17506/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17506/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17506", "id": 303064670, "node_id": "MDU6SXNzdWUzMDMwNjQ2NzA=", "number": 17506, "title": "TfLiteCameraDemo crashed on Android 8.1 with call setUseNNAPI(true)", "user": {"login": "dimitryn", "id": 36672340, "node_id": "MDQ6VXNlcjM2NjcyMzQw", "avatar_url": "https://avatars3.githubusercontent.com/u/36672340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dimitryn", "html_url": "https://github.com/dimitryn", "followers_url": "https://api.github.com/users/dimitryn/followers", "following_url": "https://api.github.com/users/dimitryn/following{/other_user}", "gists_url": "https://api.github.com/users/dimitryn/gists{/gist_id}", "starred_url": "https://api.github.com/users/dimitryn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dimitryn/subscriptions", "organizations_url": "https://api.github.com/users/dimitryn/orgs", "repos_url": "https://api.github.com/users/dimitryn/repos", "events_url": "https://api.github.com/users/dimitryn/events{/privacy}", "received_events_url": "https://api.github.com/users/dimitryn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "andrehentz", "id": 25754898, "node_id": "MDQ6VXNlcjI1NzU0ODk4", "avatar_url": "https://avatars3.githubusercontent.com/u/25754898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrehentz", "html_url": "https://github.com/andrehentz", "followers_url": "https://api.github.com/users/andrehentz/followers", "following_url": "https://api.github.com/users/andrehentz/following{/other_user}", "gists_url": "https://api.github.com/users/andrehentz/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrehentz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrehentz/subscriptions", "organizations_url": "https://api.github.com/users/andrehentz/orgs", "repos_url": "https://api.github.com/users/andrehentz/repos", "events_url": "https://api.github.com/users/andrehentz/events{/privacy}", "received_events_url": "https://api.github.com/users/andrehentz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andrehentz", "id": 25754898, "node_id": "MDQ6VXNlcjI1NzU0ODk4", "avatar_url": "https://avatars3.githubusercontent.com/u/25754898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrehentz", "html_url": "https://github.com/andrehentz", "followers_url": "https://api.github.com/users/andrehentz/followers", "following_url": "https://api.github.com/users/andrehentz/following{/other_user}", "gists_url": "https://api.github.com/users/andrehentz/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrehentz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrehentz/subscriptions", "organizations_url": "https://api.github.com/users/andrehentz/orgs", "repos_url": "https://api.github.com/users/andrehentz/repos", "events_url": "https://api.github.com/users/andrehentz/events{/privacy}", "received_events_url": "https://api.github.com/users/andrehentz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-03-07T11:37:07Z", "updated_at": "2018-07-03T10:58:04Z", "closed_at": "2018-03-27T12:11:14Z", "author_association": "NONE", "body_html": "<p>Hi ,<br>\nI follow steps in : <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite\">https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite</a> to build tensoflowlite from sources.</p>\n<p>trying run output demo apk on Google Pixel 2   create crash :</p>\n<pre><code>03-07 06:09:44.739 22823-22837/? I/Adreno: ESXAPILOG: API logging initialized: Name = com.example.android.tflitecamerademo, PID = 22823\n03-07 06:09:44.744 22823-22823/? W/linker: /data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so: is missing DT_SONAME will use basename as a replacement: \"libtensorflowlite_jni.so\"\n03-07 06:09:44.744 22823-22823/? W/System.err: TensorFlowLite: failed to load native library: dlopen failed: cannot locate symbol \"_ZN6tflite14getCurrentTimeEv\" referenced by \"/data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so\"...\n03-07 06:09:44.745 22823-22823/? W/linker: /data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so: is missing DT_SONAME will use basename as a replacement: \"libtensorflowlite_jni.so\"\n03-07 06:09:44.745 22823-22823/? W/System.err: TensorFlowLite: failed to load native library: dlopen failed: cannot locate symbol \"_ZN6tflite14getCurrentTimeEv\" referenced by \"/data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so\"...\n03-07 06:09:44.745 22823-22823/? E/zygote64: No implementation found for long org.tensorflow.lite.NativeInterpreterWrapper.createErrorReporter(int) (tried Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter and Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter__I)\n03-07 06:09:44.745 22823-22823/? D/AndroidRuntime: Shutting down VM\n03-07 06:09:44.746 22823-22823/? E/AndroidRuntime: FATAL EXCEPTION: main\n                                                   Process: com.example.android.tflitecamerademo, PID: 22823\n                                                   java.lang.UnsatisfiedLinkError: No implementation found for long org.tensorflow.lite.NativeInterpreterWrapper.createErrorReporter(int) (tried Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter and Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter__I)\n                                                       at org.tensorflow.lite.NativeInterpreterWrapper.createErrorReporter(Native Method)\n                                                       at org.tensorflow.lite.NativeInterpreterWrapper.&lt;init&gt;(NativeInterpreterWrapper.java:48)\n                                                       at org.tensorflow.lite.Interpreter.&lt;init&gt;(Interpreter.java:77)\n                                                       at com.example.android.tflitecamerademo.ImageClassifier.&lt;init&gt;(ImageClassifier.java:87)\n                                                       at com.example.android.tflitecamerademo.ImageClassifierFloatIntel.&lt;init&gt;(ImageClassifierFloatIntel.java:50)\n                                                       at com.example.android.tflitecamerademo.CameraActivity.testImage(CameraActivity.java:71)\n                                                       at com.example.android.tflitecamerademo.CameraActivity.onCreate(CameraActivity.java:36)\n                                                       at android.app.Activity.performCreate(Activity.java:6999)\n                                                       at android.app.Activity.performCreate(Activity.java:6990)\n                                                       at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\n                                                       at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2731)\n                                                       at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\n                                                       at android.app.ActivityThread.-wrap11(Unknown Source:0)\n                                                       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\n                                                       at android.os.Handler.dispatchMessage(Handler.java:106)\n                                                       at android.os.Looper.loop(Looper.java:164)\n                                                       at android.app.ActivityThread.main(ActivityThread.java:6494)\n                                                       at java.lang.reflect.Method.invoke(Native Method)\n                                                       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n</code></pre>\n<p>Build command :  bazel build --cxxopt=--std=c++11 //tensorflow/contrib/lite/java/demo/app/src/main:TfLiteCameraDemo --config=android_arm64 --cpu=arm64-v8a --fat_apk_cpu=arm64-v8a</p>\n<p>Tensorflow WORKSPACE file changes:</p>\n<pre><code># Uncomment and update the paths in these entries to build the Android demo.\nandroid_sdk_repository(\n    name = \"androidsdk\",\n   api_level = 27,\n   # Ensure that you have the build_tools_version below installed in the\n    # SDK manager as it updates periodically.\n    build_tools_version = \"27.0.3\",\n    # Replace with path to Android SDK on your system\n    path = \"/home/XXX/Android/Sdk/\",\n)\n\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/home/dnozik/Code/Tensorflow/android-ndk-r14b/\",\n    # This needs to be 14 or higher to compile TensorFlow.\n#    # Please specify API level to &gt;= 21 to build for 64-bit\n#    # archtectures or the Android NDK will automatically select biggest\n#    # API level that it supports without notice.\n#    # Note that the NDK version is not the API level.\n    api_level=27)\n</code></pre>\n<p>Symbols:<br>\nXXX@XXX-VirtualBox:~/Code$ nm -S libtensorflowlite_jni.so<br>\nnm: libtensorflowlite_jni.so: no symbols</p>\n<p>Thanks for help.</p>", "body_text": "Hi ,\nI follow steps in : https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite to build tensoflowlite from sources.\ntrying run output demo apk on Google Pixel 2   create crash :\n03-07 06:09:44.739 22823-22837/? I/Adreno: ESXAPILOG: API logging initialized: Name = com.example.android.tflitecamerademo, PID = 22823\n03-07 06:09:44.744 22823-22823/? W/linker: /data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so: is missing DT_SONAME will use basename as a replacement: \"libtensorflowlite_jni.so\"\n03-07 06:09:44.744 22823-22823/? W/System.err: TensorFlowLite: failed to load native library: dlopen failed: cannot locate symbol \"_ZN6tflite14getCurrentTimeEv\" referenced by \"/data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so\"...\n03-07 06:09:44.745 22823-22823/? W/linker: /data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so: is missing DT_SONAME will use basename as a replacement: \"libtensorflowlite_jni.so\"\n03-07 06:09:44.745 22823-22823/? W/System.err: TensorFlowLite: failed to load native library: dlopen failed: cannot locate symbol \"_ZN6tflite14getCurrentTimeEv\" referenced by \"/data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so\"...\n03-07 06:09:44.745 22823-22823/? E/zygote64: No implementation found for long org.tensorflow.lite.NativeInterpreterWrapper.createErrorReporter(int) (tried Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter and Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter__I)\n03-07 06:09:44.745 22823-22823/? D/AndroidRuntime: Shutting down VM\n03-07 06:09:44.746 22823-22823/? E/AndroidRuntime: FATAL EXCEPTION: main\n                                                   Process: com.example.android.tflitecamerademo, PID: 22823\n                                                   java.lang.UnsatisfiedLinkError: No implementation found for long org.tensorflow.lite.NativeInterpreterWrapper.createErrorReporter(int) (tried Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter and Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter__I)\n                                                       at org.tensorflow.lite.NativeInterpreterWrapper.createErrorReporter(Native Method)\n                                                       at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:48)\n                                                       at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:77)\n                                                       at com.example.android.tflitecamerademo.ImageClassifier.<init>(ImageClassifier.java:87)\n                                                       at com.example.android.tflitecamerademo.ImageClassifierFloatIntel.<init>(ImageClassifierFloatIntel.java:50)\n                                                       at com.example.android.tflitecamerademo.CameraActivity.testImage(CameraActivity.java:71)\n                                                       at com.example.android.tflitecamerademo.CameraActivity.onCreate(CameraActivity.java:36)\n                                                       at android.app.Activity.performCreate(Activity.java:6999)\n                                                       at android.app.Activity.performCreate(Activity.java:6990)\n                                                       at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\n                                                       at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2731)\n                                                       at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\n                                                       at android.app.ActivityThread.-wrap11(Unknown Source:0)\n                                                       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\n                                                       at android.os.Handler.dispatchMessage(Handler.java:106)\n                                                       at android.os.Looper.loop(Looper.java:164)\n                                                       at android.app.ActivityThread.main(ActivityThread.java:6494)\n                                                       at java.lang.reflect.Method.invoke(Native Method)\n                                                       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n\nBuild command :  bazel build --cxxopt=--std=c++11 //tensorflow/contrib/lite/java/demo/app/src/main:TfLiteCameraDemo --config=android_arm64 --cpu=arm64-v8a --fat_apk_cpu=arm64-v8a\nTensorflow WORKSPACE file changes:\n# Uncomment and update the paths in these entries to build the Android demo.\nandroid_sdk_repository(\n    name = \"androidsdk\",\n   api_level = 27,\n   # Ensure that you have the build_tools_version below installed in the\n    # SDK manager as it updates periodically.\n    build_tools_version = \"27.0.3\",\n    # Replace with path to Android SDK on your system\n    path = \"/home/XXX/Android/Sdk/\",\n)\n\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/home/dnozik/Code/Tensorflow/android-ndk-r14b/\",\n    # This needs to be 14 or higher to compile TensorFlow.\n#    # Please specify API level to >= 21 to build for 64-bit\n#    # archtectures or the Android NDK will automatically select biggest\n#    # API level that it supports without notice.\n#    # Note that the NDK version is not the API level.\n    api_level=27)\n\nSymbols:\nXXX@XXX-VirtualBox:~/Code$ nm -S libtensorflowlite_jni.so\nnm: libtensorflowlite_jni.so: no symbols\nThanks for help.", "body": "Hi , \r\nI follow steps in : https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite to build tensoflowlite from sources.\r\n\r\ntrying run output demo apk on Google Pixel 2   create crash :\r\n\r\n```\r\n03-07 06:09:44.739 22823-22837/? I/Adreno: ESXAPILOG: API logging initialized: Name = com.example.android.tflitecamerademo, PID = 22823\r\n03-07 06:09:44.744 22823-22823/? W/linker: /data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so: is missing DT_SONAME will use basename as a replacement: \"libtensorflowlite_jni.so\"\r\n03-07 06:09:44.744 22823-22823/? W/System.err: TensorFlowLite: failed to load native library: dlopen failed: cannot locate symbol \"_ZN6tflite14getCurrentTimeEv\" referenced by \"/data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so\"...\r\n03-07 06:09:44.745 22823-22823/? W/linker: /data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so: is missing DT_SONAME will use basename as a replacement: \"libtensorflowlite_jni.so\"\r\n03-07 06:09:44.745 22823-22823/? W/System.err: TensorFlowLite: failed to load native library: dlopen failed: cannot locate symbol \"_ZN6tflite14getCurrentTimeEv\" referenced by \"/data/app/com.example.android.tflitecamerademo-qSwQ-3Ztm2MtPAw8Lu3x4A==/lib/arm64/libtensorflowlite_jni.so\"...\r\n03-07 06:09:44.745 22823-22823/? E/zygote64: No implementation found for long org.tensorflow.lite.NativeInterpreterWrapper.createErrorReporter(int) (tried Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter and Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter__I)\r\n03-07 06:09:44.745 22823-22823/? D/AndroidRuntime: Shutting down VM\r\n03-07 06:09:44.746 22823-22823/? E/AndroidRuntime: FATAL EXCEPTION: main\r\n                                                   Process: com.example.android.tflitecamerademo, PID: 22823\r\n                                                   java.lang.UnsatisfiedLinkError: No implementation found for long org.tensorflow.lite.NativeInterpreterWrapper.createErrorReporter(int) (tried Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter and Java_org_tensorflow_lite_NativeInterpreterWrapper_createErrorReporter__I)\r\n                                                       at org.tensorflow.lite.NativeInterpreterWrapper.createErrorReporter(Native Method)\r\n                                                       at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:48)\r\n                                                       at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:77)\r\n                                                       at com.example.android.tflitecamerademo.ImageClassifier.<init>(ImageClassifier.java:87)\r\n                                                       at com.example.android.tflitecamerademo.ImageClassifierFloatIntel.<init>(ImageClassifierFloatIntel.java:50)\r\n                                                       at com.example.android.tflitecamerademo.CameraActivity.testImage(CameraActivity.java:71)\r\n                                                       at com.example.android.tflitecamerademo.CameraActivity.onCreate(CameraActivity.java:36)\r\n                                                       at android.app.Activity.performCreate(Activity.java:6999)\r\n                                                       at android.app.Activity.performCreate(Activity.java:6990)\r\n                                                       at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\r\n                                                       at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2731)\r\n                                                       at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\r\n                                                       at android.app.ActivityThread.-wrap11(Unknown Source:0)\r\n                                                       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\r\n                                                       at android.os.Handler.dispatchMessage(Handler.java:106)\r\n                                                       at android.os.Looper.loop(Looper.java:164)\r\n                                                       at android.app.ActivityThread.main(ActivityThread.java:6494)\r\n                                                       at java.lang.reflect.Method.invoke(Native Method)\r\n                                                       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\r\n                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\r\n```\r\n\r\nBuild command :  bazel build --cxxopt=--std=c++11 //tensorflow/contrib/lite/java/demo/app/src/main:TfLiteCameraDemo --config=android_arm64 --cpu=arm64-v8a --fat_apk_cpu=arm64-v8a\r\n\r\nTensorflow WORKSPACE file changes:\r\n\r\n```\r\n# Uncomment and update the paths in these entries to build the Android demo.\r\nandroid_sdk_repository(\r\n    name = \"androidsdk\",\r\n   api_level = 27,\r\n   # Ensure that you have the build_tools_version below installed in the\r\n    # SDK manager as it updates periodically.\r\n    build_tools_version = \"27.0.3\",\r\n    # Replace with path to Android SDK on your system\r\n    path = \"/home/XXX/Android/Sdk/\",\r\n)\r\n\r\nandroid_ndk_repository(\r\n    name=\"androidndk\",\r\n    path=\"/home/dnozik/Code/Tensorflow/android-ndk-r14b/\",\r\n    # This needs to be 14 or higher to compile TensorFlow.\r\n#    # Please specify API level to >= 21 to build for 64-bit\r\n#    # archtectures or the Android NDK will automatically select biggest\r\n#    # API level that it supports without notice.\r\n#    # Note that the NDK version is not the API level.\r\n    api_level=27)\r\n```\r\n\r\n\r\nSymbols:\r\nXXX@XXX-VirtualBox:~/Code$ nm -S libtensorflowlite_jni.so \r\nnm: libtensorflowlite_jni.so: no symbols\r\n\r\nThanks for help.\r\n\r\n"}
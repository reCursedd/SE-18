{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21416", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21416/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21416/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21416/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21416", "id": 348049520, "node_id": "MDU6SXNzdWUzNDgwNDk1MjA=", "number": 21416, "title": "Android: Compiling ops yields \"THIS_TYPE_IS_NOT_SUPPORTED\" for cwise_op", "user": {"login": "gibiansky", "id": 1865411, "node_id": "MDQ6VXNlcjE4NjU0MTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1865411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gibiansky", "html_url": "https://github.com/gibiansky", "followers_url": "https://api.github.com/users/gibiansky/followers", "following_url": "https://api.github.com/users/gibiansky/following{/other_user}", "gists_url": "https://api.github.com/users/gibiansky/gists{/gist_id}", "starred_url": "https://api.github.com/users/gibiansky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gibiansky/subscriptions", "organizations_url": "https://api.github.com/users/gibiansky/orgs", "repos_url": "https://api.github.com/users/gibiansky/repos", "events_url": "https://api.github.com/users/gibiansky/events{/privacy}", "received_events_url": "https://api.github.com/users/gibiansky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-08-06T19:18:21Z", "updated_at": "2018-11-20T13:29:53Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>Using TF 1.9.0, I cannot build applications for Android due to errors from <code>cwise_op</code>.</p>\n<p>Building for ARM v8, the error is <code>THIS_TYPE_IS_NOT_SUPPORTED</code>:</p>\n<pre lang=\"In\" data-meta=\"file included from tensorflow/core/kernels/cwise_op_lgamma.cc:16:\"><code>In file included from ./tensorflow/core/kernels/cwise_ops_common.h:29:\nIn file included from ./tensorflow/core/kernels/cwise_ops.h:23:\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:31:\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/../SpecialFunctions:50:\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:177:5: error: static_assert failed \"THIS_TYPE_IS_NOT_SUPPORTED\"\n    EIGEN_STATIC_ASSERT((internal::is_same&lt;Scalar, Scalar&gt;::value == false),\n</code></pre>\n<p>For ARM v7, the error is <code>no matching function for call to 'acosh'</code>:</p>\n<pre lang=\"In\" data-meta=\"file included from tensorflow/core/kernels/cwise_op_acosh.cc:16:\"><code>In file included from ./tensorflow/core/kernels/cwise_ops_common.h:29:\n./tensorflow/core/kernels/cwise_ops.h:55:12: error: no matching function for call to 'acosh'\n    return std::acosh(a);\n           ^~~~~~~~~~\n</code></pre>\n<p>The exact bazel command is quite simple and is provided below.</p>\n<p>This is an isolated issue which crops up when trying to build a larger target (which depends on the cwise kernels). I can provide additional information about the larger target, but the error is the same and boils down to being unable to compile cwise_ops. The same error also occurred on TF 1.8.0.</p>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No (failure occurs when compiling TF target)</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>: N/A</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.9 (git tag v1.9.0)</li>\n<li><strong>Python version</strong>: (3.5)</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.15.2</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: Android NDK r16b</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<pre><code># For ARM v8\nbazel \\\n  --crosstool_top=//external:android/crosstool \\\n  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n  --config=android \\\n  --cpu=arm64-v8a \\\n  --fat_apk_cpu=arm64-v8a \\\n  --verbose_failures \\\n  --cxxopt=-std=c++11 \\\n  --copt=-D__ANDROID_TYPES_SLIM__ \\\n  --copt=-DIS_MOBILE_PLATFORM \\\n  //tensorflow/core/kernels:cwise_op\n\n# For ARM v7\nbazel \\\n  --crosstool_top=//external:android/crosstool \\\n  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n  --config=android \\\n  --cpu=armeabi-v7a \\\n  --fat_apk_cpu=armeabi-v7a \\\n  --verbose_failures \\\n  --cxxopt=-std=c++11 \\\n  --copt=-D__ANDROID_TYPES_SLIM__ \\\n  --copt=-DIS_MOBILE_PLATFORM \\\n  //tensorflow/core/kernels:cwise_op\n</code></pre>", "body_text": "Using TF 1.9.0, I cannot build applications for Android due to errors from cwise_op.\nBuilding for ARM v8, the error is THIS_TYPE_IS_NOT_SUPPORTED:\nIn file included from ./tensorflow/core/kernels/cwise_ops_common.h:29:\nIn file included from ./tensorflow/core/kernels/cwise_ops.h:23:\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:31:\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/../SpecialFunctions:50:\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:177:5: error: static_assert failed \"THIS_TYPE_IS_NOT_SUPPORTED\"\n    EIGEN_STATIC_ASSERT((internal::is_same<Scalar, Scalar>::value == false),\n\nFor ARM v7, the error is no matching function for call to 'acosh':\nIn file included from ./tensorflow/core/kernels/cwise_ops_common.h:29:\n./tensorflow/core/kernels/cwise_ops.h:55:12: error: no matching function for call to 'acosh'\n    return std::acosh(a);\n           ^~~~~~~~~~\n\nThe exact bazel command is quite simple and is provided below.\nThis is an isolated issue which crops up when trying to build a larger target (which depends on the cwise kernels). I can provide additional information about the larger target, but the error is the same and boils down to being unable to compile cwise_ops. The same error also occurred on TF 1.8.0.\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No (failure occurs when compiling TF target)\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\nTensorFlow installed from (source or binary): Source\nTensorFlow version (use command below): 1.9 (git tag v1.9.0)\nPython version: (3.5)\nBazel version (if compiling from source): 0.15.2\nGCC/Compiler version (if compiling from source): Android NDK r16b\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce:\n\n# For ARM v8\nbazel \\\n  --crosstool_top=//external:android/crosstool \\\n  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n  --config=android \\\n  --cpu=arm64-v8a \\\n  --fat_apk_cpu=arm64-v8a \\\n  --verbose_failures \\\n  --cxxopt=-std=c++11 \\\n  --copt=-D__ANDROID_TYPES_SLIM__ \\\n  --copt=-DIS_MOBILE_PLATFORM \\\n  //tensorflow/core/kernels:cwise_op\n\n# For ARM v7\nbazel \\\n  --crosstool_top=//external:android/crosstool \\\n  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n  --config=android \\\n  --cpu=armeabi-v7a \\\n  --fat_apk_cpu=armeabi-v7a \\\n  --verbose_failures \\\n  --cxxopt=-std=c++11 \\\n  --copt=-D__ANDROID_TYPES_SLIM__ \\\n  --copt=-DIS_MOBILE_PLATFORM \\\n  //tensorflow/core/kernels:cwise_op", "body": "Using TF 1.9.0, I cannot build applications for Android due to errors from `cwise_op`. \r\n\r\nBuilding for ARM v8, the error is `THIS_TYPE_IS_NOT_SUPPORTED`:\r\n```In file included from tensorflow/core/kernels/cwise_op_lgamma.cc:16:\r\nIn file included from ./tensorflow/core/kernels/cwise_ops_common.h:29:\r\nIn file included from ./tensorflow/core/kernels/cwise_ops.h:23:\r\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\r\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:31:\r\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/../SpecialFunctions:50:\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../src/SpecialFunctions/SpecialFunctionsImpl.h:177:5: error: static_assert failed \"THIS_TYPE_IS_NOT_SUPPORTED\"\r\n    EIGEN_STATIC_ASSERT((internal::is_same<Scalar, Scalar>::value == false),\r\n```\r\n\r\nFor ARM v7, the error is `no matching function for call to 'acosh'`:\r\n```In file included from tensorflow/core/kernels/cwise_op_acosh.cc:16:\r\nIn file included from ./tensorflow/core/kernels/cwise_ops_common.h:29:\r\n./tensorflow/core/kernels/cwise_ops.h:55:12: error: no matching function for call to 'acosh'\r\n    return std::acosh(a);\r\n           ^~~~~~~~~~\r\n```\r\n\r\nThe exact bazel command is quite simple and is provided below.\r\n\r\nThis is an isolated issue which crops up when trying to build a larger target (which depends on the cwise kernels). I can provide additional information about the larger target, but the error is the same and boils down to being unable to compile cwise_ops. The same error also occurred on TF 1.8.0.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No (failure occurs when compiling TF target)\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: 1.9 (git tag v1.9.0)\r\n- **Python version**: (3.5)\r\n- **Bazel version (if compiling from source)**: 0.15.2\r\n- **GCC/Compiler version (if compiling from source)**: Android NDK r16b\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**:\r\n\r\n```\r\n# For ARM v8\r\nbazel \\\r\n  --crosstool_top=//external:android/crosstool \\\r\n  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\r\n  --config=android \\\r\n  --cpu=arm64-v8a \\\r\n  --fat_apk_cpu=arm64-v8a \\\r\n  --verbose_failures \\\r\n  --cxxopt=-std=c++11 \\\r\n  --copt=-D__ANDROID_TYPES_SLIM__ \\\r\n  --copt=-DIS_MOBILE_PLATFORM \\\r\n  //tensorflow/core/kernels:cwise_op\r\n\r\n# For ARM v7\r\nbazel \\\r\n  --crosstool_top=//external:android/crosstool \\\r\n  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\r\n  --config=android \\\r\n  --cpu=armeabi-v7a \\\r\n  --fat_apk_cpu=armeabi-v7a \\\r\n  --verbose_failures \\\r\n  --cxxopt=-std=c++11 \\\r\n  --copt=-D__ANDROID_TYPES_SLIM__ \\\r\n  --copt=-DIS_MOBILE_PLATFORM \\\r\n  //tensorflow/core/kernels:cwise_op\r\n```\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14573", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14573/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14573/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14573/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14573", "id": 274075217, "node_id": "MDU6SXNzdWUyNzQwNzUyMTc=", "number": 14573, "title": "bazel build failure of current master in Docker container due to contrib/lite", "user": {"login": "chhwang", "id": 8018170, "node_id": "MDQ6VXNlcjgwMTgxNzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/8018170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chhwang", "html_url": "https://github.com/chhwang", "followers_url": "https://api.github.com/users/chhwang/followers", "following_url": "https://api.github.com/users/chhwang/following{/other_user}", "gists_url": "https://api.github.com/users/chhwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chhwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chhwang/subscriptions", "organizations_url": "https://api.github.com/users/chhwang/orgs", "repos_url": "https://api.github.com/users/chhwang/repos", "events_url": "https://api.github.com/users/chhwang/events{/privacy}", "received_events_url": "https://api.github.com/users/chhwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "angersson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angersson", "html_url": "https://github.com/angersson", "followers_url": "https://api.github.com/users/angersson/followers", "following_url": "https://api.github.com/users/angersson/following{/other_user}", "gists_url": "https://api.github.com/users/angersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angersson/subscriptions", "organizations_url": "https://api.github.com/users/angersson/orgs", "repos_url": "https://api.github.com/users/angersson/repos", "events_url": "https://api.github.com/users/angersson/events{/privacy}", "received_events_url": "https://api.github.com/users/angersson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angersson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angersson", "html_url": "https://github.com/angersson", "followers_url": "https://api.github.com/users/angersson/followers", "following_url": "https://api.github.com/users/angersson/following{/other_user}", "gists_url": "https://api.github.com/users/angersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angersson/subscriptions", "organizations_url": "https://api.github.com/users/angersson/orgs", "repos_url": "https://api.github.com/users/angersson/repos", "events_url": "https://api.github.com/users/angersson/events{/privacy}", "received_events_url": "https://api.github.com/users/angersson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 18, "created_at": "2017-11-15T08:40:46Z", "updated_at": "2018-02-03T09:16:42Z", "closed_at": "2018-02-03T09:16:42Z", "author_association": "NONE", "body_html": "<p>Building current GPU version of master branch <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/31b79e42b9e1643b3bcdc9df992eb3ce216804c5/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/31b79e42b9e1643b3bcdc9df992eb3ce216804c5\"><tt>31b79e4</tt></a> fails in Docker container, saying</p>\n<pre><code>/usr/bin/ld: warning: libcuda.so.1, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scc_Cops_Sdata_Uflow_Uops_Ugen_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n</code></pre>\n<p>and I find that it is due to <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite\"><code>contrib/lite</code></a>: when I comment out the related dependencies in <a href=\"https://github.com/tensorflow/tensorflow/blob/31b79e42b9e1643b3bcdc9df992eb3ce216804c5/tensorflow/tools/pip_package/BUILD#L164-L166\"><code>tensorflow/tools/pip_package/BUILD</code></a>, the build success.</p>\n<p>I know this error is typically solved when I create a soft link inside the container before to build (c.f. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"236568256\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/10776\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/10776/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/10776\">#10776</a>):</p>\n<pre><code>RUN ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1\n</code></pre>\n<p>but this time, it doesn't help.</p>", "body_text": "Building current GPU version of master branch 31b79e4 fails in Docker container, saying\n/usr/bin/ld: warning: libcuda.so.1, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scc_Cops_Sdata_Uflow_Uops_Ugen_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n\nand I find that it is due to contrib/lite: when I comment out the related dependencies in tensorflow/tools/pip_package/BUILD, the build success.\nI know this error is typically solved when I create a soft link inside the container before to build (c.f. #10776):\nRUN ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1\n\nbut this time, it doesn't help.", "body": "Building current GPU version of master branch tensorflow/tensorflow@31b79e42b9e1643b3bcdc9df992eb3ce216804c5 fails in Docker container, saying\r\n\r\n    /usr/bin/ld: warning: libcuda.so.1, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scc_Cops_Sdata_Uflow_Uops_Ugen_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\n\r\nand I find that it is due to [`contrib/lite`](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/lite): when I comment out the related dependencies in [`tensorflow/tools/pip_package/BUILD`](https://github.com/tensorflow/tensorflow/blob/31b79e42b9e1643b3bcdc9df992eb3ce216804c5/tensorflow/tools/pip_package/BUILD#L164-L166), the build success.\r\n\r\nI know this error is typically solved when I create a soft link inside the container before to build (c.f. #10776):\r\n\r\n    RUN ln -s /usr/local/cuda/lib64/stubs/libcuda.so /usr/local/cuda/lib64/stubs/libcuda.so.1\r\n\r\nbut this time, it doesn't help."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17149", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17149/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17149/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17149/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17149", "id": 298536818, "node_id": "MDU6SXNzdWUyOTg1MzY4MTg=", "number": 17149, "title": "Cannot assign a device for operation 'dense_0/dense/Tensordot/ListDiff'", "user": {"login": "dieka13", "id": 6777265, "node_id": "MDQ6VXNlcjY3NzcyNjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/6777265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dieka13", "html_url": "https://github.com/dieka13", "followers_url": "https://api.github.com/users/dieka13/followers", "following_url": "https://api.github.com/users/dieka13/following{/other_user}", "gists_url": "https://api.github.com/users/dieka13/gists{/gist_id}", "starred_url": "https://api.github.com/users/dieka13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dieka13/subscriptions", "organizations_url": "https://api.github.com/users/dieka13/orgs", "repos_url": "https://api.github.com/users/dieka13/repos", "events_url": "https://api.github.com/users/dieka13/events{/privacy}", "received_events_url": "https://api.github.com/users/dieka13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-02-20T10:12:59Z", "updated_at": "2018-08-28T23:44:36Z", "closed_at": "2018-08-28T23:44:36Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\n16.04.3 LTS (Xenial Xerus)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\npip</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n('v1.5.0-0-g37aa430d84', '1.5.0')</li>\n<li><strong>Python version</strong>:<br>\n2.7.12</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\nnot from source</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\nnot from source</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\n9.0 / 7</li>\n<li><strong>GPU model and memory</strong>:<br>\nGTX 1070 8GB</li>\n<li><strong>Exact command to reproduce</strong>:\n<ul>\n<li>loading model through tensorflow.contrib.predictor.from_saved_model</li>\n<li>loading model through tensorflow serving (built from latest source, with GPU support)</li>\n</ul>\n</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I'm trying to load Estimator saved using export_savedmodel.<br>\nthe model is a speech to text model with CNN, ctc_loss and ctc_greedy_decoder, trained on single GTX 1070. Training run successfully and the model is also saved. but when i load it with tensorflow serving or from_saved_model i got this error:</p>\n<pre><code>failed: Invalid argument: Cannot assign a device for operation 'dense_0/dense/Tensordot/ListDiff': Could not satisfy explicit device specification '/device:GPU:0' because no supported kernel for GPU devices is available.\nRegistered kernels:\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT32]\n</code></pre>\n<h3>Source code / logs</h3>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/1739607/error.txt\">error.txt</a><br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1739608/bug.zip\">source code</a> (run estimator_CNN.py)</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\n16.04.3 LTS (Xenial Xerus)\nTensorFlow installed from (source or binary):\npip\nTensorFlow version (use command below):\n('v1.5.0-0-g37aa430d84', '1.5.0')\nPython version:\n2.7.12\nBazel version (if compiling from source):\nnot from source\nGCC/Compiler version (if compiling from source):\nnot from source\nCUDA/cuDNN version:\n9.0 / 7\nGPU model and memory:\nGTX 1070 8GB\nExact command to reproduce:\n\nloading model through tensorflow.contrib.predictor.from_saved_model\nloading model through tensorflow serving (built from latest source, with GPU support)\n\n\n\nDescribe the problem\nI'm trying to load Estimator saved using export_savedmodel.\nthe model is a speech to text model with CNN, ctc_loss and ctc_greedy_decoder, trained on single GTX 1070. Training run successfully and the model is also saved. but when i load it with tensorflow serving or from_saved_model i got this error:\nfailed: Invalid argument: Cannot assign a device for operation 'dense_0/dense/Tensordot/ListDiff': Could not satisfy explicit device specification '/device:GPU:0' because no supported kernel for GPU devices is available.\nRegistered kernels:\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT32]\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT64]\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT32]\n\nSource code / logs\nerror.txt\nsource code (run estimator_CNN.py)", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n16.04.3 LTS (Xenial Xerus)\r\n- **TensorFlow installed from (source or binary)**:\r\npip\r\n- **TensorFlow version (use command below)**:\r\n('v1.5.0-0-g37aa430d84', '1.5.0')\r\n- **Python version**:\r\n2.7.12\r\n- **Bazel version (if compiling from source)**:\r\nnot from source\r\n- **GCC/Compiler version (if compiling from source)**:\r\nnot from source\r\n- **CUDA/cuDNN version**:\r\n9.0 / 7\r\n- **GPU model and memory**:\r\nGTX 1070 8GB\r\n- **Exact command to reproduce**:\r\n  - loading model through tensorflow.contrib.predictor.from_saved_model\r\n  - loading model through tensorflow serving (built from latest source, with GPU support)\r\n\r\n### Describe the problem\r\nI'm trying to load Estimator saved using export_savedmodel.\r\nthe model is a speech to text model with CNN, ctc_loss and ctc_greedy_decoder, trained on single GTX 1070. Training run successfully and the model is also saved. but when i load it with tensorflow serving or from_saved_model i got this error:\r\n```\r\nfailed: Invalid argument: Cannot assign a device for operation 'dense_0/dense/Tensordot/ListDiff': Could not satisfy explicit device specification '/device:GPU:0' because no supported kernel for GPU devices is available.\r\nRegistered kernels:\r\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT32]\r\n```\r\n\r\n### Source code / logs\r\n[error.txt](https://github.com/tensorflow/tensorflow/files/1739607/error.txt)\r\n[source code](https://github.com/tensorflow/tensorflow/files/1739608/bug.zip) (run estimator_CNN.py)\r\n\r\n\r\n"}
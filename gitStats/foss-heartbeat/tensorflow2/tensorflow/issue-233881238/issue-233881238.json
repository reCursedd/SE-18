{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10459", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10459/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10459/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10459/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10459", "id": 233881238, "node_id": "MDU6SXNzdWUyMzM4ODEyMzg=", "number": 10459, "title": "//tensorflow/core/kernels:sparse_matmul_op_test_gpu is failing on ppc64le with \"Actual: false but Expected: true\"", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-06-06T12:51:00Z", "updated_at": "2017-08-10T06:09:25Z", "closed_at": "2017-08-10T06:09:25Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 16.04 (ppc64le)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nInstalled from source (v1.0.1)</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n('v1.0.1-0-ge895d5c-dirty', '1.0.1')</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.4.4-2017-05-26 (@80a07b5)</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nCUDA = 8.0 and cuDNN = 5.1</li>\n<li><strong>GPU model and memory</strong>:<br>\nGPU 0: Tesla P100-SXM2-16GB<br>\nGPU 1: Tesla P100-SXM2-16GB</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nbazel test --config=opt --config=cuda //tensorflow/core/kernels:sparse_matmul_op_test_gpu</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>This test is passing successfully on X86, however getting failure on ppc64le with following errors:</p>\n<h3>Source code / logs</h3>\n<pre><code>$  bazel test --config=opt --config=cuda //tensorflow/core/kernels:sparse_matmul_op_test_gpu\n\nexec ${PAGER:-/usr/bin/less} \"$0\" || exit 1\n-----------------------------------------------------------------------------\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\nRunning main() from test_main.cc\n[==========] Running 4 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 4 tests from SparseMatmulOpTest\n[ RUN      ] SparseMatmulOpTest.BroadcastPacketTest\n[0.170094 0.170094 0.170094 0.170094] != [  0.170094    0.14922 -0.0823886   0.026985], differences: [         0 -0.0208738  -0.252482  -0.143109]\ntensorflow/core/kernels/sparse_matmul_op_test.cc:257: Failure\nValue of: areApprox(ref, data2, PacketSize)\n  Actual: false\nExpected: true\n[  FAILED  ] SparseMatmulOpTest.BroadcastPacketTest (0 ms)\n[ RUN      ] SparseMatmulOpTest.InterleavePacketTest\n[       OK ] SparseMatmulOpTest.InterleavePacketTest (0 ms)\n[ RUN      ] SparseMatmulOpTest.Bfloat16ExpandTest\n[       OK ] SparseMatmulOpTest.Bfloat16ExpandTest (0 ms)\n[ RUN      ] SparseMatmulOpTest.Bfloat16LoadTest\n[       OK ] SparseMatmulOpTest.Bfloat16LoadTest (0 ms)\n[----------] 4 tests from SparseMatmulOpTest (0 ms total)\n\n[----------] Global test environment tear-down\n[==========] 4 tests from 1 test case ran. (0 ms total)\n[  PASSED  ] 3 tests.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] SparseMatmulOpTest.BroadcastPacketTest\n\n 1 FAILED TEST\n</code></pre>\n<p>I went through the file tensorflow/core/kernels/sparse_matmul_op_test.cc to find the root cause, but couldn't understand the code. Please provide your suggestions/comments on this.Thanks!</p>", "body_text": "System information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.04 (ppc64le)\nTensorFlow installed from (source or binary):\nInstalled from source (v1.0.1)\nTensorFlow version (use command below):\n('v1.0.1-0-ge895d5c-dirty', '1.0.1')\nBazel version (if compiling from source):\n0.4.4-2017-05-26 (@80a07b5)\nCUDA/cuDNN version:\nCUDA = 8.0 and cuDNN = 5.1\nGPU model and memory:\nGPU 0: Tesla P100-SXM2-16GB\nGPU 1: Tesla P100-SXM2-16GB\nExact command to reproduce:\nbazel test --config=opt --config=cuda //tensorflow/core/kernels:sparse_matmul_op_test_gpu\n\nDescribe the problem\nThis test is passing successfully on X86, however getting failure on ppc64le with following errors:\nSource code / logs\n$  bazel test --config=opt --config=cuda //tensorflow/core/kernels:sparse_matmul_op_test_gpu\n\nexec ${PAGER:-/usr/bin/less} \"$0\" || exit 1\n-----------------------------------------------------------------------------\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\nRunning main() from test_main.cc\n[==========] Running 4 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 4 tests from SparseMatmulOpTest\n[ RUN      ] SparseMatmulOpTest.BroadcastPacketTest\n[0.170094 0.170094 0.170094 0.170094] != [  0.170094    0.14922 -0.0823886   0.026985], differences: [         0 -0.0208738  -0.252482  -0.143109]\ntensorflow/core/kernels/sparse_matmul_op_test.cc:257: Failure\nValue of: areApprox(ref, data2, PacketSize)\n  Actual: false\nExpected: true\n[  FAILED  ] SparseMatmulOpTest.BroadcastPacketTest (0 ms)\n[ RUN      ] SparseMatmulOpTest.InterleavePacketTest\n[       OK ] SparseMatmulOpTest.InterleavePacketTest (0 ms)\n[ RUN      ] SparseMatmulOpTest.Bfloat16ExpandTest\n[       OK ] SparseMatmulOpTest.Bfloat16ExpandTest (0 ms)\n[ RUN      ] SparseMatmulOpTest.Bfloat16LoadTest\n[       OK ] SparseMatmulOpTest.Bfloat16LoadTest (0 ms)\n[----------] 4 tests from SparseMatmulOpTest (0 ms total)\n\n[----------] Global test environment tear-down\n[==========] 4 tests from 1 test case ran. (0 ms total)\n[  PASSED  ] 3 tests.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] SparseMatmulOpTest.BroadcastPacketTest\n\n 1 FAILED TEST\n\nI went through the file tensorflow/core/kernels/sparse_matmul_op_test.cc to find the root cause, but couldn't understand the code. Please provide your suggestions/comments on this.Thanks!", "body": "### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n   Ubuntu 16.04 (ppc64le)\r\n- **TensorFlow installed from (source or binary)**:\r\n    Installed from source (v1.0.1)\r\n- **TensorFlow version (use command below)**:\r\n    ('v1.0.1-0-ge895d5c-dirty', '1.0.1')\r\n- **Bazel version (if compiling from source)**:\r\n     0.4.4-2017-05-26 (@80a07b5)\r\n- **CUDA/cuDNN version**:\r\n     CUDA = 8.0 and cuDNN = 5.1\r\n- **GPU model and memory**:\r\n    GPU 0: Tesla P100-SXM2-16GB\r\n    GPU 1: Tesla P100-SXM2-16GB\r\n- **Exact command to reproduce**:\r\n     bazel test --config=opt --config=cuda //tensorflow/core/kernels:sparse_matmul_op_test_gpu\r\n\r\n### Describe the problem\r\nThis test is passing successfully on X86, however getting failure on ppc64le with following errors:\r\n\r\n### Source code / logs\r\n```\r\n$  bazel test --config=opt --config=cuda //tensorflow/core/kernels:sparse_matmul_op_test_gpu\r\n\r\nexec ${PAGER:-/usr/bin/less} \"$0\" || exit 1\r\n-----------------------------------------------------------------------------\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\nRunning main() from test_main.cc\r\n[==========] Running 4 tests from 1 test case.\r\n[----------] Global test environment set-up.\r\n[----------] 4 tests from SparseMatmulOpTest\r\n[ RUN      ] SparseMatmulOpTest.BroadcastPacketTest\r\n[0.170094 0.170094 0.170094 0.170094] != [  0.170094    0.14922 -0.0823886   0.026985], differences: [         0 -0.0208738  -0.252482  -0.143109]\r\ntensorflow/core/kernels/sparse_matmul_op_test.cc:257: Failure\r\nValue of: areApprox(ref, data2, PacketSize)\r\n  Actual: false\r\nExpected: true\r\n[  FAILED  ] SparseMatmulOpTest.BroadcastPacketTest (0 ms)\r\n[ RUN      ] SparseMatmulOpTest.InterleavePacketTest\r\n[       OK ] SparseMatmulOpTest.InterleavePacketTest (0 ms)\r\n[ RUN      ] SparseMatmulOpTest.Bfloat16ExpandTest\r\n[       OK ] SparseMatmulOpTest.Bfloat16ExpandTest (0 ms)\r\n[ RUN      ] SparseMatmulOpTest.Bfloat16LoadTest\r\n[       OK ] SparseMatmulOpTest.Bfloat16LoadTest (0 ms)\r\n[----------] 4 tests from SparseMatmulOpTest (0 ms total)\r\n\r\n[----------] Global test environment tear-down\r\n[==========] 4 tests from 1 test case ran. (0 ms total)\r\n[  PASSED  ] 3 tests.\r\n[  FAILED  ] 1 test, listed below:\r\n[  FAILED  ] SparseMatmulOpTest.BroadcastPacketTest\r\n\r\n 1 FAILED TEST\r\n```\r\nI went through the file tensorflow/core/kernels/sparse_matmul_op_test.cc to find the root cause, but couldn't understand the code. Please provide your suggestions/comments on this.Thanks!\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/308696516", "html_url": "https://github.com/tensorflow/tensorflow/issues/10459#issuecomment-308696516", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10459", "id": 308696516, "node_id": "MDEyOklzc3VlQ29tbWVudDMwODY5NjUxNg==", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-15T10:46:50Z", "updated_at": "2017-07-18T08:25:28Z", "author_association": "CONTRIBUTOR", "body_html": "<p>With a little more investigation I found the following things :<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op_test.cc#L255-L256\">https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op_test.cc#L255-L256</a></p>\n<pre><code> internal::pstoreu(data2, internal::pbroadcast_first&lt;Packet&gt;(\n                              internal::ploadu&lt;Packet&gt;(data1)));\n</code></pre>\n<p>For <code>internal::pbroadcast_first&lt;Packet&gt;</code>  line, on both the platform executed different functions, see below-</p>\n<p>On x86 executed  <code>EIGEN_STRONG_INLINE Packet4f pbroadcast_first&lt;Packet4f&gt;(const Packet4f&amp; a)</code> function (<a href=\"https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op.h#L197\">https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op.h#L197</a>)<br>\nAnd on ppc64le executed <code>EIGEN_DEVICE_FUNC inline Packet pbroadcast_first(const Packet&amp; a)</code> function (<a href=\"https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op.h#L92\">https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op.h#L92</a>)</p>\n<p>That is why our test case is failing on ppc64le. Investigating this further</p>", "body_text": "With a little more investigation I found the following things :\nhttps://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op_test.cc#L255-L256\n internal::pstoreu(data2, internal::pbroadcast_first<Packet>(\n                              internal::ploadu<Packet>(data1)));\n\nFor internal::pbroadcast_first<Packet>  line, on both the platform executed different functions, see below-\nOn x86 executed  EIGEN_STRONG_INLINE Packet4f pbroadcast_first<Packet4f>(const Packet4f& a) function (https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op.h#L197)\nAnd on ppc64le executed EIGEN_DEVICE_FUNC inline Packet pbroadcast_first(const Packet& a) function (https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op.h#L92)\nThat is why our test case is failing on ppc64le. Investigating this further", "body": "With a little more investigation I found the following things : \r\n https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op_test.cc#L255-L256\r\n```\r\n internal::pstoreu(data2, internal::pbroadcast_first<Packet>(\r\n                              internal::ploadu<Packet>(data1)));\r\n```\r\n\r\nFor `internal::pbroadcast_first<Packet>`  line, on both the platform executed different functions, see below-\r\n \r\nOn x86 executed  `EIGEN_STRONG_INLINE Packet4f pbroadcast_first<Packet4f>(const Packet4f& a)` function (https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op.h#L197)\r\nAnd on ppc64le executed `EIGEN_DEVICE_FUNC inline Packet pbroadcast_first(const Packet& a)` function (https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/kernels/sparse_matmul_op.h#L92)\r\n\r\nThat is why our test case is failing on ppc64le. Investigating this further"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/258791131", "html_url": "https://github.com/tensorflow/tensorflow/issues/5396#issuecomment-258791131", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5396", "id": 258791131, "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODc5MTEzMQ==", "user": {"login": "pltrdy", "id": 6375843, "node_id": "MDQ6VXNlcjYzNzU4NDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/6375843?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pltrdy", "html_url": "https://github.com/pltrdy", "followers_url": "https://api.github.com/users/pltrdy/followers", "following_url": "https://api.github.com/users/pltrdy/following{/other_user}", "gists_url": "https://api.github.com/users/pltrdy/gists{/gist_id}", "starred_url": "https://api.github.com/users/pltrdy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pltrdy/subscriptions", "organizations_url": "https://api.github.com/users/pltrdy/orgs", "repos_url": "https://api.github.com/users/pltrdy/repos", "events_url": "https://api.github.com/users/pltrdy/events{/privacy}", "received_events_url": "https://api.github.com/users/pltrdy/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-07T09:51:00Z", "updated_at": "2016-11-07T10:34:46Z", "author_association": "NONE", "body_html": "<p>My point here is that I am using <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/reader.py\">reader.py</a> from a custom script (i.e. not <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/ptb_word_lm.py\">ptb_word_lm.py</a> as suggested in the tuto).</p>\n<p>My issue in fact only concerns <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/reader.py\">reader.py</a> since I'm having trouble using <code>tensorflow.models.rnn.ptb.ptb_word_lm.ptb_producer()</code>. My tensorflow is up to date with master.</p>\n<p>I think I may have missunderstood something. I would expect <code>inputs_ = sess.run(inputs)</code> to run correctly with following \"model\":</p>\n<pre><code>ptb_data_path = '&lt;some_path&gt;/ptb_data/simple-examples/data/'\n(train, valid, test, _) = reader.ptb_raw_data(ptb_data_path)\nc = ptb_word_lm.SmallConfig()\ninputs, targets = reader.ptb_producer(train, c.batch_size, c.num_steps, name=None)\n</code></pre>\n<p>It instead \"sleeps\" (does not terminate, no (C/G)PU load</p>\n<p>EDIT:<br>\nMoreover, the code below does not terminate either:</p>\n<pre><code>import tensorflow as tf\n\nepoch_size = 20\ni = tf.train.range_input_producer(epoch_size, shuffle=False).dequeue()\n</code></pre>\n<p>(hints: thats what involved in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/reader.py\">reader.py</a> line 115.</p>", "body_text": "My point here is that I am using reader.py from a custom script (i.e. not ptb_word_lm.py as suggested in the tuto).\nMy issue in fact only concerns reader.py since I'm having trouble using tensorflow.models.rnn.ptb.ptb_word_lm.ptb_producer(). My tensorflow is up to date with master.\nI think I may have missunderstood something. I would expect inputs_ = sess.run(inputs) to run correctly with following \"model\":\nptb_data_path = '<some_path>/ptb_data/simple-examples/data/'\n(train, valid, test, _) = reader.ptb_raw_data(ptb_data_path)\nc = ptb_word_lm.SmallConfig()\ninputs, targets = reader.ptb_producer(train, c.batch_size, c.num_steps, name=None)\n\nIt instead \"sleeps\" (does not terminate, no (C/G)PU load\nEDIT:\nMoreover, the code below does not terminate either:\nimport tensorflow as tf\n\nepoch_size = 20\ni = tf.train.range_input_producer(epoch_size, shuffle=False).dequeue()\n\n(hints: thats what involved in reader.py line 115.", "body": "My point here is that I am using [reader.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/reader.py) from a custom script (i.e. not [ptb_word_lm.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/ptb_word_lm.py) as suggested in the tuto). \n\nMy issue in fact only concerns [reader.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/reader.py) since I'm having trouble using `tensorflow.models.rnn.ptb.ptb_word_lm.ptb_producer()`. My tensorflow is up to date with master. \n\nI think I may have missunderstood something. I would expect `inputs_ = sess.run(inputs)` to run correctly with following \"model\":\n\n```\nptb_data_path = '<some_path>/ptb_data/simple-examples/data/'\n(train, valid, test, _) = reader.ptb_raw_data(ptb_data_path)\nc = ptb_word_lm.SmallConfig()\ninputs, targets = reader.ptb_producer(train, c.batch_size, c.num_steps, name=None)\n```\n\nIt instead \"sleeps\" (does not terminate, no (C/G)PU load\n\nEDIT:\nMoreover, the code below does not terminate either:\n\n```\nimport tensorflow as tf\n\nepoch_size = 20\ni = tf.train.range_input_producer(epoch_size, shuffle=False).dequeue()\n```\n\n(hints: thats what involved in [reader.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/ptb/reader.py) line 115.\n"}
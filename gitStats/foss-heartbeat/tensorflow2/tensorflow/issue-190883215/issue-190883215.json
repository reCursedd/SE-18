{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5770", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5770/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5770/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5770/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5770", "id": 190883215, "node_id": "MDU6SXNzdWUxOTA4ODMyMTU=", "number": 5770, "title": "Documentation of  tf.extract_image_patches is incomplete and slightly inaccurate", "user": {"login": "deeptigp", "id": 2092933, "node_id": "MDQ6VXNlcjIwOTI5MzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2092933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deeptigp", "html_url": "https://github.com/deeptigp", "followers_url": "https://api.github.com/users/deeptigp/followers", "following_url": "https://api.github.com/users/deeptigp/following{/other_user}", "gists_url": "https://api.github.com/users/deeptigp/gists{/gist_id}", "starred_url": "https://api.github.com/users/deeptigp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deeptigp/subscriptions", "organizations_url": "https://api.github.com/users/deeptigp/orgs", "repos_url": "https://api.github.com/users/deeptigp/repos", "events_url": "https://api.github.com/users/deeptigp/events{/privacy}", "received_events_url": "https://api.github.com/users/deeptigp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-11-22T01:24:56Z", "updated_at": "2017-07-01T23:01:40Z", "closed_at": "2017-07-01T23:01:40Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>The documentation of <a href=\"https://www.tensorflow.org/versions/r0.9/api_docs/python/array_ops.html#extract_image_patches\" rel=\"nofollow\">tf.extract_image_patches</a> is unclear and slightly incorrect.</p>\n<ol>\n<li>The function call requires the first 5 parameters to be set and throws an error otherwise.The documentation, however, mentions that they are optional parameters.</li>\n<li>The \"out_rows\" and \"out_cols\" are not defined making it hard to make sense of what this function is actually doing.</li>\n<li>The definition of \"rates\" is not clear.. Is patch_size same as k_rows or k_cols?</li>\n</ol>\n<p>Running<br>\n<code>test_patches = tf.extract_image_patches(images, padding=\"SAME\",ksizes=[1, 32, 32, 1], strides=[1, 32, 32, 1], rates=[1,1, 1, 1]) </code><br>\nwhere images = 1X299x299x3 returns me a tensor (test_patches) of shape 1x10x10x3072.</p>\n<p>1.Is test_patches[0,0,0,:] the first patch test_patches[0,0,1,:] the second patch and so on?<br>\n2. If (1) is true, how was the dimension of a patch reduced from 32x32x3 to 3072, i.e., how exactly should this be reshaped? I tried reshaping test_patches[0,0,0,:] to (32,32,3) and (3,32,32) but the resulting image patch does not make sense.</p>\n<p>Clarifying the documentation of this method would be immensely helpful!</p>\n<h3>Environment info</h3>\n<p>Ubuntu 14.04</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):<br>\n-rw-r--r-- 1 root root   558720 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root       16 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart.so -&gt; libcudart.so.8.0<br>\nlrwxrwxrwx 1 root root       19 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.44<br>\n-rwxr-xr-x 1 root root   415432 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart.so.8.0.44<br>\n-rw-r--r-- 1 root root   775162 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart_static.a<br>\n-rwxr-xr-x 1 root root 79337624 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn.so<br>\n-rwxr-xr-x 1 root root 79337624 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn.so.5<br>\n-rwxr-xr-x 1 root root 79337624 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn.so.5.1.5<br>\n-rw-r--r-- 1 root root 69756172 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn_static.a</p>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>)<br>\n1f9e1eb186325dc789e7ea28aa5f7ef1e183f6b9</li>\n<li>The output of <code>bazel version</code></li>\n</ol>\n<p>Build label: 0.3.2<br>\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Fri Oct 7 17:25:10 2016 (1475861110)<br>\nBuild timestamp: 1475861110<br>\nBuild timestamp as int: 1475861110</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>Just calling this function would do.</p>", "body_text": "Hi,\nThe documentation of tf.extract_image_patches is unclear and slightly incorrect.\n\nThe function call requires the first 5 parameters to be set and throws an error otherwise.The documentation, however, mentions that they are optional parameters.\nThe \"out_rows\" and \"out_cols\" are not defined making it hard to make sense of what this function is actually doing.\nThe definition of \"rates\" is not clear.. Is patch_size same as k_rows or k_cols?\n\nRunning\ntest_patches = tf.extract_image_patches(images, padding=\"SAME\",ksizes=[1, 32, 32, 1], strides=[1, 32, 32, 1], rates=[1,1, 1, 1]) \nwhere images = 1X299x299x3 returns me a tensor (test_patches) of shape 1x10x10x3072.\n1.Is test_patches[0,0,0,:] the first patch test_patches[0,0,1,:] the second patch and so on?\n2. If (1) is true, how was the dimension of a patch reduced from 32x32x3 to 3072, i.e., how exactly should this be reshaped? I tried reshaping test_patches[0,0,0,:] to (32,32,3) and (3,32,32) but the resulting image patch does not make sense.\nClarifying the documentation of this method would be immensely helpful!\nEnvironment info\nUbuntu 14.04\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n-rw-r--r-- 1 root root   558720 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.44\n-rwxr-xr-x 1 root root   415432 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart.so.8.0.44\n-rw-r--r-- 1 root root   775162 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 79337624 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 79337624 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 79337624 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn.so.5.1.5\n-rw-r--r-- 1 root root 69756172 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn_static.a\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD)\n1f9e1eb186325dc789e7ea28aa5f7ef1e183f6b9\nThe output of bazel version\n\nBuild label: 0.3.2\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Oct 7 17:25:10 2016 (1475861110)\nBuild timestamp: 1475861110\nBuild timestamp as int: 1475861110\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nJust calling this function would do.", "body": "Hi,\r\n\r\nThe documentation of [tf.extract_image_patches](https://www.tensorflow.org/versions/r0.9/api_docs/python/array_ops.html#extract_image_patches) is unclear and slightly incorrect. \r\n\r\n1. The function call requires the first 5 parameters to be set and throws an error otherwise.The documentation, however, mentions that they are optional parameters.\r\n2. The \"out_rows\" and \"out_cols\" are not defined making it hard to make sense of what this function is actually doing. \r\n3. The definition of \"rates\" is not clear.. Is patch_size same as k_rows or k_cols?\r\n\r\nRunning\r\n`test_patches = tf.extract_image_patches(images, padding=\"SAME\",ksizes=[1, 32, 32, 1], strides=[1, 32, 32, 1], rates=[1,1, 1, 1])\r\n`\r\nwhere images = 1X299x299x3 returns me a tensor (test_patches) of shape 1x10x10x3072. \r\n\r\n1.Is test_patches[0,0,0,:] the first patch test_patches[0,0,1,:] the second patch and so on? \r\n2. If (1) is true, how was the dimension of a patch reduced from 32x32x3 to 3072, i.e., how exactly should this be reshaped? I tried reshaping test_patches[0,0,0,:] to (32,32,3) and (3,32,32) but the resulting image patch does not make sense. \r\n\r\nClarifying the documentation of this method would be immensely helpful!\r\n\r\n### Environment info\r\nUbuntu 14.04\r\n\r\nInstalled version of CUDA and cuDNN: \r\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\r\n-rw-r--r-- 1 root root   558720 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudadevrt.a\r\nlrwxrwxrwx 1 root root       16 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\r\nlrwxrwxrwx 1 root root       19 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.44\r\n-rwxr-xr-x 1 root root   415432 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart.so.8.0.44\r\n-rw-r--r-- 1 root root   775162 Oct 22 01:37 /opt/cuda-8.0/lib64/libcudart_static.a\r\n-rwxr-xr-x 1 root root 79337624 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn.so\r\n-rwxr-xr-x 1 root root 79337624 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn.so.5\r\n-rwxr-xr-x 1 root root 79337624 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn.so.5.1.5\r\n-rw-r--r-- 1 root root 69756172 Oct 22 01:48 /opt/cuda-8.0/lib64/libcudnn_static.a\r\n\r\nIf installed from source, provide \r\n1. The commit hash (`git rev-parse HEAD`)\r\n1f9e1eb186325dc789e7ea28aa5f7ef1e183f6b9\r\n2. The output of `bazel version`\r\n\r\nBuild label: 0.3.2\r\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Fri Oct 7 17:25:10 2016 (1475861110)\r\nBuild timestamp: 1475861110\r\nBuild timestamp as int: 1475861110\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n\r\nJust calling this function would do.\r\n"}
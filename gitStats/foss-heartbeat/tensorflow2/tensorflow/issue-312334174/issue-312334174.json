{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18332", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18332/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18332/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18332/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18332", "id": 312334174, "node_id": "MDU6SXNzdWUzMTIzMzQxNzQ=", "number": 18332, "title": "tf_debug incompatibility with importlib (Python 3.6)", "user": {"login": "Sciguymjm", "id": 1396015, "node_id": "MDQ6VXNlcjEzOTYwMTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1396015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sciguymjm", "html_url": "https://github.com/Sciguymjm", "followers_url": "https://api.github.com/users/Sciguymjm/followers", "following_url": "https://api.github.com/users/Sciguymjm/following{/other_user}", "gists_url": "https://api.github.com/users/Sciguymjm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sciguymjm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sciguymjm/subscriptions", "organizations_url": "https://api.github.com/users/Sciguymjm/orgs", "repos_url": "https://api.github.com/users/Sciguymjm/repos", "events_url": "https://api.github.com/users/Sciguymjm/events{/privacy}", "received_events_url": "https://api.github.com/users/Sciguymjm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-04-08T19:44:34Z", "updated_at": "2018-09-12T13:21:17Z", "closed_at": "2018-05-17T02:45:01Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Windows 10</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.7.0</li>\n<li><strong>Python version</strong>: Python 3.6</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n<li>Bazel version: N/A</li>\n<li>CUDA/cuDNN version: N/A</li>\n<li>GPU model and memory: N/A</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>When using tf_debug with a class that is dynamically imported using <code>importlib</code>, Tensorflow throws an exception since it is unable to determine if the dynamically imported library is either a compiled/uncompiled python file. This is due to how importlib handles imports, as a class imported using that library does not have a proper <code>file_path</code>, as seen in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/debug/lib/source_utils.py#L42\">this function</a> (Line 42 of <code>source_utils.py</code>). I believe it does this because it is trying to find the lines of the file which the traceback mentions, but is unable to find them.</p>\n<h3>Source code / logs</h3>\n<pre><code>229 ops no flops stats due to incomplete shapes.\nTraceback (most recent call last):\n  File \"C:\\Users\\Matt\\PycharmProjects\\Saltie\\bot_code\\models\\base_model.py\", line 308, in _initialize_variables\n    self.sess.run(init, run_metadata=run_metadata)\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\wrappers\\grpc_wrapper.py\", line 225, in run\n    self._sent_graph_version)\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\wrappers\\grpc_wrapper.py\", line 61, in publish_traceback\n    send_source=True)\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_remote.py\", line 192, in send_graph_tracebacks\n    graph=graph, send_source=send_source)\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_remote.py\", line 154, in _send_call_tracebacks\n    call_traceback.graph_traceback.id_to_string))\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_remote.py\", line 94, in &lt;genexpr&gt;\n    if not source_utils.guess_is_tensorflow_py_library(f) and gfile.Exists(f))\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_utils.py\", line 76, in guess_is_tensorflow_py_library\n    \"Input file path (%s) is not a Python source file.\" % py_file_path)\nValueError: Input file path (&lt;frozen importlib._bootstrap&gt;) is not a Python source file.\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\nTensorFlow installed from (source or binary): Binary\nTensorFlow version (use command below): 1.7.0\nPython version: Python 3.6\nExact command to reproduce:\nBazel version: N/A\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\n\nDescribe the problem\nWhen using tf_debug with a class that is dynamically imported using importlib, Tensorflow throws an exception since it is unable to determine if the dynamically imported library is either a compiled/uncompiled python file. This is due to how importlib handles imports, as a class imported using that library does not have a proper file_path, as seen in this function (Line 42 of source_utils.py). I believe it does this because it is trying to find the lines of the file which the traceback mentions, but is unable to find them.\nSource code / logs\n229 ops no flops stats due to incomplete shapes.\nTraceback (most recent call last):\n  File \"C:\\Users\\Matt\\PycharmProjects\\Saltie\\bot_code\\models\\base_model.py\", line 308, in _initialize_variables\n    self.sess.run(init, run_metadata=run_metadata)\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\wrappers\\grpc_wrapper.py\", line 225, in run\n    self._sent_graph_version)\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\wrappers\\grpc_wrapper.py\", line 61, in publish_traceback\n    send_source=True)\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_remote.py\", line 192, in send_graph_tracebacks\n    graph=graph, send_source=send_source)\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_remote.py\", line 154, in _send_call_tracebacks\n    call_traceback.graph_traceback.id_to_string))\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_remote.py\", line 94, in <genexpr>\n    if not source_utils.guess_is_tensorflow_py_library(f) and gfile.Exists(f))\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_utils.py\", line 76, in guess_is_tensorflow_py_library\n    \"Input file path (%s) is not a Python source file.\" % py_file_path)\nValueError: Input file path (<frozen importlib._bootstrap>) is not a Python source file.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10\r\n- **TensorFlow installed from (source or binary)**: Binary\r\n- **TensorFlow version (use command below)**: 1.7.0\r\n- **Python version**: Python 3.6\r\n- **Exact command to reproduce**:\r\n- Bazel version: N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n### Describe the problem\r\nWhen using tf_debug with a class that is dynamically imported using `importlib`, Tensorflow throws an exception since it is unable to determine if the dynamically imported library is either a compiled/uncompiled python file. This is due to how importlib handles imports, as a class imported using that library does not have a proper `file_path`, as seen in [this function](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/debug/lib/source_utils.py#L42) (Line 42 of `source_utils.py`). I believe it does this because it is trying to find the lines of the file which the traceback mentions, but is unable to find them.\r\n\r\n### Source code / logs\r\n```\r\n229 ops no flops stats due to incomplete shapes.\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Matt\\PycharmProjects\\Saltie\\bot_code\\models\\base_model.py\", line 308, in _initialize_variables\r\n    self.sess.run(init, run_metadata=run_metadata)\r\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\wrappers\\grpc_wrapper.py\", line 225, in run\r\n    self._sent_graph_version)\r\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\wrappers\\grpc_wrapper.py\", line 61, in publish_traceback\r\n    send_source=True)\r\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_remote.py\", line 192, in send_graph_tracebacks\r\n    graph=graph, send_source=send_source)\r\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_remote.py\", line 154, in _send_call_tracebacks\r\n    call_traceback.graph_traceback.id_to_string))\r\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_remote.py\", line 94, in <genexpr>\r\n    if not source_utils.guess_is_tensorflow_py_library(f) and gfile.Exists(f))\r\n  File \"C:\\Users\\Matt\\PycharmProjects\\venvs\\Saltie-3.6\\lib\\site-packages\\tensorflow\\python\\debug\\lib\\source_utils.py\", line 76, in guess_is_tensorflow_py_library\r\n    \"Input file path (%s) is not a Python source file.\" % py_file_path)\r\nValueError: Input file path (<frozen importlib._bootstrap>) is not a Python source file.\r\n```"}
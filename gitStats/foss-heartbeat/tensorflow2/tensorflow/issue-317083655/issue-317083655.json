{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18818", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18818/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18818/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18818/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18818", "id": 317083655, "node_id": "MDU6SXNzdWUzMTcwODM2NTU=", "number": 18818, "title": "Using out-of-graph Reward in Reinforcement Learning with Iterator in tf.data", "user": {"login": "gsh199449", "id": 3295342, "node_id": "MDQ6VXNlcjMyOTUzNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3295342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gsh199449", "html_url": "https://github.com/gsh199449", "followers_url": "https://api.github.com/users/gsh199449/followers", "following_url": "https://api.github.com/users/gsh199449/following{/other_user}", "gists_url": "https://api.github.com/users/gsh199449/gists{/gist_id}", "starred_url": "https://api.github.com/users/gsh199449/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gsh199449/subscriptions", "organizations_url": "https://api.github.com/users/gsh199449/orgs", "repos_url": "https://api.github.com/users/gsh199449/repos", "events_url": "https://api.github.com/users/gsh199449/events{/privacy}", "received_events_url": "https://api.github.com/users/gsh199449/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-04-24T06:15:42Z", "updated_at": "2018-04-26T20:58:49Z", "closed_at": "2018-04-26T20:58:49Z", "author_association": "NONE", "body_html": "<p>When the reward value is generated from a script that is not computed in Tensorflow graph, like ROUGE score in text summarization or BLEU score in machine translation.<br>\nWe first use the graph to generate a prediction result, then calculate the reward value out of the graph, and then feed the value into the graph to update the parameters of our model by policy gradients.<br>\nIf we use session.run, this will cause recomputation that is mentioned in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"124656693\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/672\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/672/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/672\">#672</a>.<br>\nAlthough recomputation does not cost very much, when we use the <code>tf.dataset</code> with <code>Iterator</code>, the dataset pointer will move to the next sample when calling <code>session.run</code> function.<br>\nIn <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"124656693\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/672\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/672/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/672\">#672</a>, they suggest to use <code>partitial_run</code> instead of <code>session.run</code>. But <code>partitial_run</code> can only fetch the tensor, but it can not execute the operation.</p>\n<p>So can you add a feature that can move the pointer of <code>Iterator</code> backward? or fix the pointer when calling the <code>session.run</code> function?</p>", "body_text": "When the reward value is generated from a script that is not computed in Tensorflow graph, like ROUGE score in text summarization or BLEU score in machine translation.\nWe first use the graph to generate a prediction result, then calculate the reward value out of the graph, and then feed the value into the graph to update the parameters of our model by policy gradients.\nIf we use session.run, this will cause recomputation that is mentioned in #672.\nAlthough recomputation does not cost very much, when we use the tf.dataset with Iterator, the dataset pointer will move to the next sample when calling session.run function.\nIn #672, they suggest to use partitial_run instead of session.run. But partitial_run can only fetch the tensor, but it can not execute the operation.\nSo can you add a feature that can move the pointer of Iterator backward? or fix the pointer when calling the session.run function?", "body": "When the reward value is generated from a script that is not computed in Tensorflow graph, like ROUGE score in text summarization or BLEU score in machine translation.\r\nWe first use the graph to generate a prediction result, then calculate the reward value out of the graph, and then feed the value into the graph to update the parameters of our model by policy gradients.\r\nIf we use session.run, this will cause recomputation that is mentioned in #672.  \r\nAlthough recomputation does not cost very much, when we use the `tf.dataset` with `Iterator`, the dataset pointer will move to the next sample when calling `session.run` function.\r\nIn #672, they suggest to use `partitial_run` instead of `session.run`. But `partitial_run` can only fetch the tensor, but it can not execute the operation. \r\n\r\n\r\nSo can you add a feature that can move the pointer of `Iterator` backward? or fix the pointer when calling the `session.run` function?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/430884947", "html_url": "https://github.com/tensorflow/tensorflow/issues/23032#issuecomment-430884947", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23032", "id": 430884947, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDg4NDk0Nw==", "user": {"login": "zihuaweng", "id": 13395833, "node_id": "MDQ6VXNlcjEzMzk1ODMz", "avatar_url": "https://avatars3.githubusercontent.com/u/13395833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zihuaweng", "html_url": "https://github.com/zihuaweng", "followers_url": "https://api.github.com/users/zihuaweng/followers", "following_url": "https://api.github.com/users/zihuaweng/following{/other_user}", "gists_url": "https://api.github.com/users/zihuaweng/gists{/gist_id}", "starred_url": "https://api.github.com/users/zihuaweng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zihuaweng/subscriptions", "organizations_url": "https://api.github.com/users/zihuaweng/orgs", "repos_url": "https://api.github.com/users/zihuaweng/repos", "events_url": "https://api.github.com/users/zihuaweng/events{/privacy}", "received_events_url": "https://api.github.com/users/zihuaweng/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-18T05:59:35Z", "updated_at": "2018-10-18T05:59:35Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1381301\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ppwwyyxx\">@ppwwyyxx</a> Thanks!<br>\nI try <a href=\"https://github.com/tensorflow/benchmarks/tree/master/scripts/tf_cnn_benchmarks\">tf_cnn_benchmarks</a> using synthetic data and docker image tensorflow/tensorflow:nightly-gpu-py3, it works pretty well!</p>\n<p>1 gpu batch_size=32</p>\n<pre><code>Step\tImg/sec\ttotal_loss\n1\timages/sec: 198.0 +/- 0.0 (jitter = 0.0)\t8.458\n10\timages/sec: 198.1 +/- 0.2 (jitter = 0.3)\t7.997\n20\timages/sec: 197.9 +/- 0.3 (jitter = 0.6)\t8.259\n30\timages/sec: 198.1 +/- 0.2 (jitter = 0.5)\t8.340\n40\timages/sec: 198.0 +/- 0.2 (jitter = 0.6)\t8.188\n50\timages/sec: 198.1 +/- 0.2 (jitter = 0.6)\t7.754\n60\timages/sec: 198.2 +/- 0.1 (jitter = 0.6)\t8.080\n70\timages/sec: 198.1 +/- 0.1 (jitter = 0.6)\t8.472\n80\timages/sec: 198.2 +/- 0.1 (jitter = 0.6)\t8.290\n90\timages/sec: 198.2 +/- 0.1 (jitter = 0.6)\t8.041\n100\timages/sec: 198.1 +/- 0.1 (jitter = 0.6)\t7.993\n----------------------------------------------------------------\ntotal images/sec: 197.98\n</code></pre>\n<p>2 gpus batch_size=32</p>\n<pre><code>Step\tImg/sec\ttotal_loss\n1\timages/sec: 373.2 +/- 0.0 (jitter = 0.0)\t8.453\n10\timages/sec: 375.8 +/- 0.4 (jitter = 0.4)\t8.209\n20\timages/sec: 375.5 +/- 0.5 (jitter = 2.5)\t8.120\n30\timages/sec: 375.4 +/- 0.4 (jitter = 2.4)\t8.235\n40\timages/sec: 375.6 +/- 0.4 (jitter = 2.3)\t8.108\n50\timages/sec: 375.9 +/- 0.4 (jitter = 2.4)\t8.027\n60\timages/sec: 375.8 +/- 0.3 (jitter = 2.6)\t8.239\n70\timages/sec: 375.7 +/- 0.3 (jitter = 2.4)\t8.373\n80\timages/sec: 375.4 +/- 0.3 (jitter = 2.5)\t8.191\n90\timages/sec: 375.5 +/- 0.3 (jitter = 2.5)\t7.976\n100\timages/sec: 375.6 +/- 0.3 (jitter = 2.8)\t8.157\n----------------------------------------------------------------\ntotal images/sec: 375.40\n</code></pre>\n<p>3 gpus batch_size=32</p>\n<pre><code>Step\tImg/sec\ttotal_loss\n1\timages/sec: 524.8 +/- 0.0 (jitter = 0.0)\t8.394\n10\timages/sec: 525.4 +/- 3.4 (jitter = 12.1)\t8.143\n20\timages/sec: 527.6 +/- 2.4 (jitter = 10.1)\t8.066\n30\timages/sec: 529.1 +/- 1.9 (jitter = 9.2)\t8.191\n40\timages/sec: 529.0 +/- 1.5 (jitter = 8.9)\t8.230\n50\timages/sec: 530.1 +/- 1.4 (jitter = 9.2)\t8.049\n60\timages/sec: 530.5 +/- 1.2 (jitter = 9.2)\t8.292\n70\timages/sec: 529.9 +/- 1.2 (jitter = 9.5)\t8.247\n80\timages/sec: 530.4 +/- 1.1 (jitter = 9.2)\t8.152\n90\timages/sec: 530.6 +/- 1.1 (jitter = 9.1)\t8.019\n100\timages/sec: 530.5 +/- 1.0 (jitter = 8.6)\t8.212\n----------------------------------------------------------------\ntotal images/sec: 530.16\n</code></pre>", "body_text": "@ppwwyyxx Thanks!\nI try tf_cnn_benchmarks using synthetic data and docker image tensorflow/tensorflow:nightly-gpu-py3, it works pretty well!\n1 gpu batch_size=32\nStep\tImg/sec\ttotal_loss\n1\timages/sec: 198.0 +/- 0.0 (jitter = 0.0)\t8.458\n10\timages/sec: 198.1 +/- 0.2 (jitter = 0.3)\t7.997\n20\timages/sec: 197.9 +/- 0.3 (jitter = 0.6)\t8.259\n30\timages/sec: 198.1 +/- 0.2 (jitter = 0.5)\t8.340\n40\timages/sec: 198.0 +/- 0.2 (jitter = 0.6)\t8.188\n50\timages/sec: 198.1 +/- 0.2 (jitter = 0.6)\t7.754\n60\timages/sec: 198.2 +/- 0.1 (jitter = 0.6)\t8.080\n70\timages/sec: 198.1 +/- 0.1 (jitter = 0.6)\t8.472\n80\timages/sec: 198.2 +/- 0.1 (jitter = 0.6)\t8.290\n90\timages/sec: 198.2 +/- 0.1 (jitter = 0.6)\t8.041\n100\timages/sec: 198.1 +/- 0.1 (jitter = 0.6)\t7.993\n----------------------------------------------------------------\ntotal images/sec: 197.98\n\n2 gpus batch_size=32\nStep\tImg/sec\ttotal_loss\n1\timages/sec: 373.2 +/- 0.0 (jitter = 0.0)\t8.453\n10\timages/sec: 375.8 +/- 0.4 (jitter = 0.4)\t8.209\n20\timages/sec: 375.5 +/- 0.5 (jitter = 2.5)\t8.120\n30\timages/sec: 375.4 +/- 0.4 (jitter = 2.4)\t8.235\n40\timages/sec: 375.6 +/- 0.4 (jitter = 2.3)\t8.108\n50\timages/sec: 375.9 +/- 0.4 (jitter = 2.4)\t8.027\n60\timages/sec: 375.8 +/- 0.3 (jitter = 2.6)\t8.239\n70\timages/sec: 375.7 +/- 0.3 (jitter = 2.4)\t8.373\n80\timages/sec: 375.4 +/- 0.3 (jitter = 2.5)\t8.191\n90\timages/sec: 375.5 +/- 0.3 (jitter = 2.5)\t7.976\n100\timages/sec: 375.6 +/- 0.3 (jitter = 2.8)\t8.157\n----------------------------------------------------------------\ntotal images/sec: 375.40\n\n3 gpus batch_size=32\nStep\tImg/sec\ttotal_loss\n1\timages/sec: 524.8 +/- 0.0 (jitter = 0.0)\t8.394\n10\timages/sec: 525.4 +/- 3.4 (jitter = 12.1)\t8.143\n20\timages/sec: 527.6 +/- 2.4 (jitter = 10.1)\t8.066\n30\timages/sec: 529.1 +/- 1.9 (jitter = 9.2)\t8.191\n40\timages/sec: 529.0 +/- 1.5 (jitter = 8.9)\t8.230\n50\timages/sec: 530.1 +/- 1.4 (jitter = 9.2)\t8.049\n60\timages/sec: 530.5 +/- 1.2 (jitter = 9.2)\t8.292\n70\timages/sec: 529.9 +/- 1.2 (jitter = 9.5)\t8.247\n80\timages/sec: 530.4 +/- 1.1 (jitter = 9.2)\t8.152\n90\timages/sec: 530.6 +/- 1.1 (jitter = 9.1)\t8.019\n100\timages/sec: 530.5 +/- 1.0 (jitter = 8.6)\t8.212\n----------------------------------------------------------------\ntotal images/sec: 530.16", "body": "@ppwwyyxx Thanks!\r\nI try [tf_cnn_benchmarks](https://github.com/tensorflow/benchmarks/tree/master/scripts/tf_cnn_benchmarks) using synthetic data and docker image tensorflow/tensorflow:nightly-gpu-py3, it works pretty well!\r\n\r\n 1 gpu batch_size=32\r\n```\r\nStep\tImg/sec\ttotal_loss\r\n1\timages/sec: 198.0 +/- 0.0 (jitter = 0.0)\t8.458\r\n10\timages/sec: 198.1 +/- 0.2 (jitter = 0.3)\t7.997\r\n20\timages/sec: 197.9 +/- 0.3 (jitter = 0.6)\t8.259\r\n30\timages/sec: 198.1 +/- 0.2 (jitter = 0.5)\t8.340\r\n40\timages/sec: 198.0 +/- 0.2 (jitter = 0.6)\t8.188\r\n50\timages/sec: 198.1 +/- 0.2 (jitter = 0.6)\t7.754\r\n60\timages/sec: 198.2 +/- 0.1 (jitter = 0.6)\t8.080\r\n70\timages/sec: 198.1 +/- 0.1 (jitter = 0.6)\t8.472\r\n80\timages/sec: 198.2 +/- 0.1 (jitter = 0.6)\t8.290\r\n90\timages/sec: 198.2 +/- 0.1 (jitter = 0.6)\t8.041\r\n100\timages/sec: 198.1 +/- 0.1 (jitter = 0.6)\t7.993\r\n----------------------------------------------------------------\r\ntotal images/sec: 197.98\r\n```\r\n2 gpus batch_size=32\r\n```\r\nStep\tImg/sec\ttotal_loss\r\n1\timages/sec: 373.2 +/- 0.0 (jitter = 0.0)\t8.453\r\n10\timages/sec: 375.8 +/- 0.4 (jitter = 0.4)\t8.209\r\n20\timages/sec: 375.5 +/- 0.5 (jitter = 2.5)\t8.120\r\n30\timages/sec: 375.4 +/- 0.4 (jitter = 2.4)\t8.235\r\n40\timages/sec: 375.6 +/- 0.4 (jitter = 2.3)\t8.108\r\n50\timages/sec: 375.9 +/- 0.4 (jitter = 2.4)\t8.027\r\n60\timages/sec: 375.8 +/- 0.3 (jitter = 2.6)\t8.239\r\n70\timages/sec: 375.7 +/- 0.3 (jitter = 2.4)\t8.373\r\n80\timages/sec: 375.4 +/- 0.3 (jitter = 2.5)\t8.191\r\n90\timages/sec: 375.5 +/- 0.3 (jitter = 2.5)\t7.976\r\n100\timages/sec: 375.6 +/- 0.3 (jitter = 2.8)\t8.157\r\n----------------------------------------------------------------\r\ntotal images/sec: 375.40\r\n```\r\n3 gpus batch_size=32\r\n```\r\nStep\tImg/sec\ttotal_loss\r\n1\timages/sec: 524.8 +/- 0.0 (jitter = 0.0)\t8.394\r\n10\timages/sec: 525.4 +/- 3.4 (jitter = 12.1)\t8.143\r\n20\timages/sec: 527.6 +/- 2.4 (jitter = 10.1)\t8.066\r\n30\timages/sec: 529.1 +/- 1.9 (jitter = 9.2)\t8.191\r\n40\timages/sec: 529.0 +/- 1.5 (jitter = 8.9)\t8.230\r\n50\timages/sec: 530.1 +/- 1.4 (jitter = 9.2)\t8.049\r\n60\timages/sec: 530.5 +/- 1.2 (jitter = 9.2)\t8.292\r\n70\timages/sec: 529.9 +/- 1.2 (jitter = 9.5)\t8.247\r\n80\timages/sec: 530.4 +/- 1.1 (jitter = 9.2)\t8.152\r\n90\timages/sec: 530.6 +/- 1.1 (jitter = 9.1)\t8.019\r\n100\timages/sec: 530.5 +/- 1.0 (jitter = 8.6)\t8.212\r\n----------------------------------------------------------------\r\ntotal images/sec: 530.16\r\n```"}
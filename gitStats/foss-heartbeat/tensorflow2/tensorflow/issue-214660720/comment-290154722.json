{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/290154722", "html_url": "https://github.com/tensorflow/tensorflow/issues/8462#issuecomment-290154722", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8462", "id": 290154722, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDE1NDcyMg==", "user": {"login": "nmoenning", "id": 11430317, "node_id": "MDQ6VXNlcjExNDMwMzE3", "avatar_url": "https://avatars0.githubusercontent.com/u/11430317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmoenning", "html_url": "https://github.com/nmoenning", "followers_url": "https://api.github.com/users/nmoenning/followers", "following_url": "https://api.github.com/users/nmoenning/following{/other_user}", "gists_url": "https://api.github.com/users/nmoenning/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmoenning/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmoenning/subscriptions", "organizations_url": "https://api.github.com/users/nmoenning/orgs", "repos_url": "https://api.github.com/users/nmoenning/repos", "events_url": "https://api.github.com/users/nmoenning/events{/privacy}", "received_events_url": "https://api.github.com/users/nmoenning/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-29T17:00:36Z", "updated_at": "2017-03-29T17:00:36Z", "author_association": "NONE", "body_html": "<p>I get the same error when compiling from code.</p>\n<p>I want to update my TF from 0.12.0 (which I had compiled myself, too) to the most recent version. The current settings work fine: Ubuntu 16.04 LTS with gcc 4.9.3, TF 0.12.0, Cuda 8.0, cudNN 5.1.5, python 3.5 But compiling the most recent version of TF (with the same setup) returns the following error:</p>\n<p><code>ni@WV8782:~/Downloads/tensorflow$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package</code> produces</p>\n<pre><code>ERROR: /home/ni/Downloads/tensorflow/tensorflow/stream_executor/BUILD:39:1: C++ compilation of rule '//tensorflow/stream_executor:cuda_platform' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command \n  (cd /home/ni/.cache/bazel/_bazel_ni/ee42072b03580a9e2812c30ca6c3e85a/execroot/tensorflow &amp;&amp; \\\n  exec env - \\\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections '-march=native' '-std=c++11' '-march=native' -MD -MF bazel-out/local_linux-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.d '-frandom-seed=bazel-out/local_linux-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.o' -fPIC -DEIGEN_MPL2_ONLY -DTENSORFLOW_USE_JEMALLOC -iquote . -iquote bazel-out/local_linux-py3-opt/genfiles -iquote external/jemalloc -iquote bazel-out/local_linux-py3-opt/genfiles/external/jemalloc -iquote external/bazel_tools -iquote bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools -iquote external/protobuf -iquote bazel-out/local_linux-py3-opt/genfiles/external/protobuf -iquote external/eigen_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_sycl -iquote external/gif_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/gif_archive -iquote external/jpeg -iquote bazel-out/local_linux-py3-opt/genfiles/external/jpeg -iquote external/com_googlesource_code_re2 -iquote bazel-out/local_linux-py3-opt/genfiles/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/farmhash_archive -iquote external/highwayhash -iquote bazel-out/local_linux-py3-opt/genfiles/external/highwayhash -iquote external/png_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/png_archive -iquote external/zlib_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/zlib_archive -iquote external/local_config_cuda -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda -isystem external/jemalloc/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/jemalloc/include -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/protobuf/src -isystem bazel-out/local_linux-py3-opt/genfiles/external/protobuf/src -isystem external/eigen_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/eigen_archive -isystem external/gif_archive/lib -isystem bazel-out/local_linux-py3-opt/genfiles/external/gif_archive/lib -isystem external/farmhash_archive/src -isystem bazel-out/local_linux-py3-opt/genfiles/external/farmhash_archive/src -isystem external/png_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/png_archive -isystem external/zlib_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/zlib_archive -isystem external/local_config_cuda/cuda -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c tensorflow/stream_executor/cuda/cuda_blas.cc -o bazel-out/local_linux-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n</code></pre>\n<p>Thanks for your help, PhilJd.</p>\n<blockquote>\n<p>Maybe your cudnn version is somehow incompatible with the cuda version, for example if cuda was installed via apt and cudnn was installed manually. Ubuntu 14.04 currently has cudnn version 5.0.{5,6} and 5.1.{3, 5, 10} in the repos (says apt-cache madison libcudnn5. You seem to have version 5.0.4. Probably try the local solution with one of the versions above.</p>\n</blockquote>\n<p>Doesn't seem to be the case considering that previous TensorFlow version runs smoothly.</p>\n<blockquote>\n<p>Try to run bazel clean manually before running ./configure</p>\n</blockquote>\n<p>Tried this. Sadly, the same error.</p>\n<blockquote>\n<p>Explicitly state the cuda version, or maybe even better overwrite all default values (even if they match your requirements)</p>\n</blockquote>\n<p>Tried this, too. Same error.</p>\n<p>Does anyone have some recommendations or even a solution? I appreciate your help.</p>", "body_text": "I get the same error when compiling from code.\nI want to update my TF from 0.12.0 (which I had compiled myself, too) to the most recent version. The current settings work fine: Ubuntu 16.04 LTS with gcc 4.9.3, TF 0.12.0, Cuda 8.0, cudNN 5.1.5, python 3.5 But compiling the most recent version of TF (with the same setup) returns the following error:\nni@WV8782:~/Downloads/tensorflow$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package produces\nERROR: /home/ni/Downloads/tensorflow/tensorflow/stream_executor/BUILD:39:1: C++ compilation of rule '//tensorflow/stream_executor:cuda_platform' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command \n  (cd /home/ni/.cache/bazel/_bazel_ni/ee42072b03580a9e2812c30ca6c3e85a/execroot/tensorflow && \\\n  exec env - \\\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections '-march=native' '-std=c++11' '-march=native' -MD -MF bazel-out/local_linux-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.d '-frandom-seed=bazel-out/local_linux-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.o' -fPIC -DEIGEN_MPL2_ONLY -DTENSORFLOW_USE_JEMALLOC -iquote . -iquote bazel-out/local_linux-py3-opt/genfiles -iquote external/jemalloc -iquote bazel-out/local_linux-py3-opt/genfiles/external/jemalloc -iquote external/bazel_tools -iquote bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools -iquote external/protobuf -iquote bazel-out/local_linux-py3-opt/genfiles/external/protobuf -iquote external/eigen_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_sycl -iquote external/gif_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/gif_archive -iquote external/jpeg -iquote bazel-out/local_linux-py3-opt/genfiles/external/jpeg -iquote external/com_googlesource_code_re2 -iquote bazel-out/local_linux-py3-opt/genfiles/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/farmhash_archive -iquote external/highwayhash -iquote bazel-out/local_linux-py3-opt/genfiles/external/highwayhash -iquote external/png_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/png_archive -iquote external/zlib_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/zlib_archive -iquote external/local_config_cuda -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda -isystem external/jemalloc/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/jemalloc/include -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/protobuf/src -isystem bazel-out/local_linux-py3-opt/genfiles/external/protobuf/src -isystem external/eigen_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/eigen_archive -isystem external/gif_archive/lib -isystem bazel-out/local_linux-py3-opt/genfiles/external/gif_archive/lib -isystem external/farmhash_archive/src -isystem bazel-out/local_linux-py3-opt/genfiles/external/farmhash_archive/src -isystem external/png_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/png_archive -isystem external/zlib_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/zlib_archive -isystem external/local_config_cuda/cuda -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c tensorflow/stream_executor/cuda/cuda_blas.cc -o bazel-out/local_linux-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n\nThanks for your help, PhilJd.\n\nMaybe your cudnn version is somehow incompatible with the cuda version, for example if cuda was installed via apt and cudnn was installed manually. Ubuntu 14.04 currently has cudnn version 5.0.{5,6} and 5.1.{3, 5, 10} in the repos (says apt-cache madison libcudnn5. You seem to have version 5.0.4. Probably try the local solution with one of the versions above.\n\nDoesn't seem to be the case considering that previous TensorFlow version runs smoothly.\n\nTry to run bazel clean manually before running ./configure\n\nTried this. Sadly, the same error.\n\nExplicitly state the cuda version, or maybe even better overwrite all default values (even if they match your requirements)\n\nTried this, too. Same error.\nDoes anyone have some recommendations or even a solution? I appreciate your help.", "body": "I get the same error when compiling from code.\r\n\r\nI want to update my TF from 0.12.0 (which I had compiled myself, too) to the most recent version. The current settings work fine: Ubuntu 16.04 LTS with gcc 4.9.3, TF 0.12.0, Cuda 8.0, cudNN 5.1.5, python 3.5 But compiling the most recent version of TF (with the same setup) returns the following error:\r\n\r\n`ni@WV8782:~/Downloads/tensorflow$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package` produces \r\n```\r\nERROR: /home/ni/Downloads/tensorflow/tensorflow/stream_executor/BUILD:39:1: C++ compilation of rule '//tensorflow/stream_executor:cuda_platform' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command \r\n  (cd /home/ni/.cache/bazel/_bazel_ni/ee42072b03580a9e2812c30ca6c3e85a/execroot/tensorflow && \\\r\n  exec env - \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections '-march=native' '-std=c++11' '-march=native' -MD -MF bazel-out/local_linux-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.d '-frandom-seed=bazel-out/local_linux-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.o' -fPIC -DEIGEN_MPL2_ONLY -DTENSORFLOW_USE_JEMALLOC -iquote . -iquote bazel-out/local_linux-py3-opt/genfiles -iquote external/jemalloc -iquote bazel-out/local_linux-py3-opt/genfiles/external/jemalloc -iquote external/bazel_tools -iquote bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools -iquote external/protobuf -iquote bazel-out/local_linux-py3-opt/genfiles/external/protobuf -iquote external/eigen_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_sycl -iquote external/gif_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/gif_archive -iquote external/jpeg -iquote bazel-out/local_linux-py3-opt/genfiles/external/jpeg -iquote external/com_googlesource_code_re2 -iquote bazel-out/local_linux-py3-opt/genfiles/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/farmhash_archive -iquote external/highwayhash -iquote bazel-out/local_linux-py3-opt/genfiles/external/highwayhash -iquote external/png_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/png_archive -iquote external/zlib_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/zlib_archive -iquote external/local_config_cuda -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda -isystem external/jemalloc/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/jemalloc/include -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/protobuf/src -isystem bazel-out/local_linux-py3-opt/genfiles/external/protobuf/src -isystem external/eigen_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/eigen_archive -isystem external/gif_archive/lib -isystem bazel-out/local_linux-py3-opt/genfiles/external/gif_archive/lib -isystem external/farmhash_archive/src -isystem bazel-out/local_linux-py3-opt/genfiles/external/farmhash_archive/src -isystem external/png_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/png_archive -isystem external/zlib_archive -isystem bazel-out/local_linux-py3-opt/genfiles/external/zlib_archive -isystem external/local_config_cuda/cuda -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c tensorflow/stream_executor/cuda/cuda_blas.cc -o bazel-out/local_linux-py3-opt/bin/tensorflow/stream_executor/_objs/cuda_platform/tensorflow/stream_executor/cuda/cuda_blas.pic.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\n```\r\n\r\n\r\nThanks for your help, PhilJd.\r\n\r\n> Maybe your cudnn version is somehow incompatible with the cuda version, for example if cuda was installed via apt and cudnn was installed manually. Ubuntu 14.04 currently has cudnn version 5.0.{5,6} and 5.1.{3, 5, 10} in the repos (says apt-cache madison libcudnn5. You seem to have version 5.0.4. Probably try the local solution with one of the versions above.\r\n\r\nDoesn't seem to be the case considering that previous TensorFlow version runs smoothly.\r\n\r\n> Try to run bazel clean manually before running ./configure\r\n\r\nTried this. Sadly, the same error.\r\n\r\n> Explicitly state the cuda version, or maybe even better overwrite all default values (even if they match your requirements)\r\n\r\nTried this, too. Same error.\r\n\r\nDoes anyone have some recommendations or even a solution? I appreciate your help.\r\n"}